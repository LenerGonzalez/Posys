var Bce=Object.defineProperty;var Pce=(t,e,r)=>e in t?Bce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ta=(t,e,r)=>Pce(t,typeof e!="symbol"?e+"":e,r);function jce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Srt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bq={exports:{}},rI={},wq={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b=Symbol.for("react.element"),Tce=Symbol.for("react.portal"),kce=Symbol.for("react.fragment"),Fce=Symbol.for("react.strict_mode"),Oce=Symbol.for("react.profiler"),Dce=Symbol.for("react.provider"),Rce=Symbol.for("react.context"),Mce=Symbol.for("react.forward_ref"),Lce=Symbol.for("react.suspense"),Uce=Symbol.for("react.memo"),Qce=Symbol.for("react.lazy"),sM=Symbol.iterator;function Vce(t){return t===null||typeof t!="object"?null:(t=sM&&t[sM]||t["@@iterator"],typeof t=="function"?t:null)}var Nq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cq=Object.assign,_q={};function hv(t,e,r){this.props=t,this.context=e,this.refs=_q,this.updater=r||Nq}hv.prototype.isReactComponent={};hv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Eq(){}Eq.prototype=hv.prototype;function cF(t,e,r){this.props=t,this.context=e,this.refs=_q,this.updater=r||Nq}var uF=cF.prototype=new Eq;uF.constructor=cF;Cq(uF,hv.prototype);uF.isPureReactComponent=!0;var iM=Array.isArray,Sq=Object.prototype.hasOwnProperty,dF={current:null},Iq={key:!0,ref:!0,__self:!0,__source:!0};function Bq(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Sq.call(e,n)&&!Iq.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:_b,type:t,key:s,ref:i,props:a,_owner:dF.current}}function Hce(t,e){return{$$typeof:_b,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fF(t){return typeof t=="object"&&t!==null&&t.$$typeof===_b}function $ce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var oM=/\/+/g;function q3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$ce(""+t.key):e.toString(36)}function WC(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case _b:case Tce:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+q3(i,0):n,iM(a)?(r="",t!=null&&(r=t.replace(oM,"$&/")+"/"),WC(a,e,r,"",function(u){return u})):a!=null&&(fF(a)&&(a=Hce(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(oM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",iM(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+q3(s,l);i+=WC(s,e,r,c,a)}else if(c=Vce(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+q3(s,l++),i+=WC(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Xw(t,e,r){if(t==null)return t;var n=[],a=0;return WC(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Kce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vl={current:null},XC={transition:null},Gce={ReactCurrentDispatcher:Vl,ReactCurrentBatchConfig:XC,ReactCurrentOwner:dF};function Pq(){throw Error("act(...) is not supported in production builds of React.")}In.Children={map:Xw,forEach:function(t,e,r){Xw(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Xw(t,function(){e++}),e},toArray:function(t){return Xw(t,function(e){return e})||[]},only:function(t){if(!fF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};In.Component=hv;In.Fragment=kce;In.Profiler=Oce;In.PureComponent=cF;In.StrictMode=Fce;In.Suspense=Lce;In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gce;In.act=Pq;In.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Cq({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=dF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Sq.call(e,c)&&!Iq.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:_b,type:t.type,key:a,ref:s,props:n,_owner:i}};In.createContext=function(t){return t={$$typeof:Rce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dce,_context:t},t.Consumer=t};In.createElement=Bq;In.createFactory=function(t){var e=Bq.bind(null,t);return e.type=t,e};In.createRef=function(){return{current:null}};In.forwardRef=function(t){return{$$typeof:Mce,render:t}};In.isValidElement=fF;In.lazy=function(t){return{$$typeof:Qce,_payload:{_status:-1,_result:t},_init:Kce}};In.memo=function(t,e){return{$$typeof:Uce,type:t,compare:e===void 0?null:e}};In.startTransition=function(t){var e=XC.transition;XC.transition={};try{t()}finally{XC.transition=e}};In.unstable_act=Pq;In.useCallback=function(t,e){return Vl.current.useCallback(t,e)};In.useContext=function(t){return Vl.current.useContext(t)};In.useDebugValue=function(){};In.useDeferredValue=function(t){return Vl.current.useDeferredValue(t)};In.useEffect=function(t,e){return Vl.current.useEffect(t,e)};In.useId=function(){return Vl.current.useId()};In.useImperativeHandle=function(t,e,r){return Vl.current.useImperativeHandle(t,e,r)};In.useInsertionEffect=function(t,e){return Vl.current.useInsertionEffect(t,e)};In.useLayoutEffect=function(t,e){return Vl.current.useLayoutEffect(t,e)};In.useMemo=function(t,e){return Vl.current.useMemo(t,e)};In.useReducer=function(t,e,r){return Vl.current.useReducer(t,e,r)};In.useRef=function(t){return Vl.current.useRef(t)};In.useState=function(t){return Vl.current.useState(t)};In.useSyncExternalStore=function(t,e,r){return Vl.current.useSyncExternalStore(t,e,r)};In.useTransition=function(){return Vl.current.useTransition()};In.version="18.3.1";wq.exports=In;var v=wq.exports;const so=OA(v),qce=jce({__proto__:null,default:so},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zce=v,Wce=Symbol.for("react.element"),Xce=Symbol.for("react.fragment"),Yce=Object.prototype.hasOwnProperty,Jce=zce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zce={key:!0,ref:!0,__self:!0,__source:!0};function jq(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Yce.call(e,n)&&!Zce.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Wce,type:t,key:s,ref:i,props:a,_owner:Jce.current}}rI.Fragment=Xce;rI.jsx=jq;rI.jsxs=jq;bq.exports=rI;var o=bq.exports,kP={},Tq={exports:{}},zc={},kq={exports:{}},Fq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(me,Z){var ve=me.length;me.push(Z);e:for(;0<ve;){var Se=ve-1>>>1,k=me[Se];if(0<a(k,Z))me[Se]=Z,me[ve]=k,ve=Se;else break e}}function r(me){return me.length===0?null:me[0]}function n(me){if(me.length===0)return null;var Z=me[0],ve=me.pop();if(ve!==Z){me[0]=ve;e:for(var Se=0,k=me.length,F=k>>>1;Se<F;){var H=2*(Se+1)-1,Q=me[H],V=H+1,Y=me[V];if(0>a(Q,ve))V<k&&0>a(Y,Q)?(me[Se]=Y,me[V]=ve,Se=V):(me[Se]=Q,me[H]=ve,Se=H);else if(V<k&&0>a(Y,ve))me[Se]=Y,me[V]=ve,Se=V;else break e}}return Z}function a(me,Z){var ve=me.sortIndex-Z.sortIndex;return ve!==0?ve:me.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,A=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(me){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=me)n(u),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=r(u)}}function w(me){if(p=!1,b(me),!m)if(r(c)!==null)m=!0,se(B);else{var Z=r(u);Z!==null&&he(w,Z.startTime-me)}}function B(me,Z){m=!1,p&&(p=!1,x(E),E=-1),A=!0;var ve=h;try{for(b(Z),f=r(c);f!==null&&(!(f.expirationTime>Z)||me&&!S());){var Se=f.callback;if(typeof Se=="function"){f.callback=null,h=f.priorityLevel;var k=Se(f.expirationTime<=Z);Z=t.unstable_now(),typeof k=="function"?f.callback=k:f===r(c)&&n(c),b(Z)}else n(c);f=r(c)}if(f!==null)var F=!0;else{var H=r(u);H!==null&&he(w,H.startTime-Z),F=!1}return F}finally{f=null,h=ve,A=!1}}var P=!1,_=null,E=-1,I=5,O=-1;function S(){return!(t.unstable_now()-O<I)}function j(){if(_!==null){var me=t.unstable_now();O=me;var Z=!0;try{Z=_(!0,me)}finally{Z?D():(P=!1,_=null)}}else P=!1}var D;if(typeof y=="function")D=function(){y(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ge=J.port2;J.port1.onmessage=j,D=function(){ge.postMessage(null)}}else D=function(){g(j,0)};function se(me){_=me,P||(P=!0,D())}function he(me,Z){E=g(function(){me(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){m||A||(m=!0,se(B))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(me){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var ve=h;h=Z;try{return me()}finally{h=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,Z){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var ve=h;h=me;try{return Z()}finally{h=ve}},t.unstable_scheduleCallback=function(me,Z,ve){var Se=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Se+ve:Se):ve=Se,me){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ve+k,me={id:d++,callback:Z,priorityLevel:me,startTime:ve,expirationTime:k,sortIndex:-1},ve>Se?(me.sortIndex=ve,e(u,me),r(c)===null&&me===r(u)&&(p?(x(E),E=-1):p=!0,he(w,ve-Se))):(me.sortIndex=k,e(c,me),m||A||(m=!0,se(B))),me},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(me){var Z=h;return function(){var ve=h;h=Z;try{return me.apply(this,arguments)}finally{h=ve}}}})(Fq);kq.exports=Fq;var eue=kq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tue=v,Hc=eue;function cr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oq=new Set,s2={};function Lp(t,e){Rx(t,e),Rx(t+"Capture",e)}function Rx(t,e){for(s2[t]=e,t=0;t<e.length;t++)Oq.add(e[t])}var xA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FP=Object.prototype.hasOwnProperty,rue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lM={},cM={};function nue(t){return FP.call(cM,t)?!0:FP.call(lM,t)?!1:rue.test(t)?cM[t]=!0:(lM[t]=!0,!1)}function aue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sue(t,e,r,n){if(e===null||typeof e>"u"||aue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hl(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qo[t]=new Hl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qo[e]=new Hl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qo[t]=new Hl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qo[t]=new Hl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qo[t]=new Hl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qo[t]=new Hl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qo[t]=new Hl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qo[t]=new Hl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qo[t]=new Hl(t,5,!1,t.toLowerCase(),null,!1,!1)});var AF=/[\-:]([a-z])/g;function hF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AF,hF);Qo[e]=new Hl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AF,hF);Qo[e]=new Hl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AF,hF);Qo[e]=new Hl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qo[t]=new Hl(t,1,!1,t.toLowerCase(),null,!1,!1)});Qo.xlinkHref=new Hl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qo[t]=new Hl(t,1,!1,t.toLowerCase(),null,!0,!0)});function mF(t,e,r,n){var a=Qo.hasOwnProperty(e)?Qo[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sue(e,r,a,n)&&(r=null),n||a===null?nue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var DA=tue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yw=Symbol.for("react.element"),Zg=Symbol.for("react.portal"),ex=Symbol.for("react.fragment"),pF=Symbol.for("react.strict_mode"),OP=Symbol.for("react.profiler"),Dq=Symbol.for("react.provider"),Rq=Symbol.for("react.context"),gF=Symbol.for("react.forward_ref"),DP=Symbol.for("react.suspense"),RP=Symbol.for("react.suspense_list"),xF=Symbol.for("react.memo"),jh=Symbol.for("react.lazy"),Mq=Symbol.for("react.offscreen"),uM=Symbol.iterator;function u1(t){return t===null||typeof t!="object"?null:(t=uM&&t[uM]||t["@@iterator"],typeof t=="function"?t:null)}var Ss=Object.assign,z3;function X1(t){if(z3===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);z3=e&&e[1]||""}return`
`+z3+t}var W3=!1;function X3(t,e){if(!t||W3)return"";W3=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==s[l]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{W3=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?X1(t):""}function iue(t){switch(t.tag){case 5:return X1(t.type);case 16:return X1("Lazy");case 13:return X1("Suspense");case 19:return X1("SuspenseList");case 0:case 2:case 15:return t=X3(t.type,!1),t;case 11:return t=X3(t.type.render,!1),t;case 1:return t=X3(t.type,!0),t;default:return""}}function MP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ex:return"Fragment";case Zg:return"Portal";case OP:return"Profiler";case pF:return"StrictMode";case DP:return"Suspense";case RP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rq:return(t.displayName||"Context")+".Consumer";case Dq:return(t._context.displayName||"Context")+".Provider";case gF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xF:return e=t.displayName||null,e!==null?e:MP(t.type)||"Memo";case jh:e=t._payload,t=t._init;try{return MP(t(e))}catch{}}return null}function oue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return MP(e);case 8:return e===pF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function b0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lue(t){var e=Lq(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jw(t){t._valueTracker||(t._valueTracker=lue(t))}function Uq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Lq(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function R_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function LP(t,e){var r=e.checked;return Ss({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function dM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=b0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qq(t,e){e=e.checked,e!=null&&mF(t,"checked",e,!1)}function UP(t,e){Qq(t,e);var r=b0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?QP(t,e.type,r):e.hasOwnProperty("defaultValue")&&QP(t,e.type,b0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fM(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function QP(t,e,r){(e!=="number"||R_(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Y1=Array.isArray;function yx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+b0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function VP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(cr(91));return Ss({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(cr(92));if(Y1(r)){if(1<r.length)throw Error(cr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:b0(r)}}function Vq(t,e){var r=b0(e.value),n=b0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hq(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function HP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hq(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zw,$q=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zw=Zw||document.createElement("div"),Zw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function i2(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var wy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cue=["Webkit","ms","Moz","O"];Object.keys(wy).forEach(function(t){cue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wy[e]=wy[t]})});function Kq(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||wy.hasOwnProperty(t)&&wy[t]?(""+e).trim():e+"px"}function Gq(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Kq(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var uue=Ss({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $P(t,e){if(e){if(uue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(cr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(cr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(cr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(cr(62))}}function KP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GP=null;function vF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qP=null,bx=null,wx=null;function mM(t){if(t=Ib(t)){if(typeof qP!="function")throw Error(cr(280));var e=t.stateNode;e&&(e=oI(e),qP(t.stateNode,t.type,e))}}function qq(t){bx?wx?wx.push(t):wx=[t]:bx=t}function zq(){if(bx){var t=bx,e=wx;if(wx=bx=null,mM(t),e)for(t=0;t<e.length;t++)mM(e[t])}}function Wq(t,e){return t(e)}function Xq(){}var Y3=!1;function Yq(t,e,r){if(Y3)return t(e,r);Y3=!0;try{return Wq(t,e,r)}finally{Y3=!1,(bx!==null||wx!==null)&&(Xq(),zq())}}function o2(t,e){var r=t.stateNode;if(r===null)return null;var n=oI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(cr(231,e,typeof r));return r}var zP=!1;if(xA)try{var d1={};Object.defineProperty(d1,"passive",{get:function(){zP=!0}}),window.addEventListener("test",d1,d1),window.removeEventListener("test",d1,d1)}catch{zP=!1}function due(t,e,r,n,a,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Ny=!1,M_=null,L_=!1,WP=null,fue={onError:function(t){Ny=!0,M_=t}};function Aue(t,e,r,n,a,s,i,l,c){Ny=!1,M_=null,due.apply(fue,arguments)}function hue(t,e,r,n,a,s,i,l,c){if(Aue.apply(this,arguments),Ny){if(Ny){var u=M_;Ny=!1,M_=null}else throw Error(cr(198));L_||(L_=!0,WP=u)}}function Up(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Jq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pM(t){if(Up(t)!==t)throw Error(cr(188))}function mue(t){var e=t.alternate;if(!e){if(e=Up(t),e===null)throw Error(cr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return pM(a),t;if(s===n)return pM(a),e;s=s.sibling}throw Error(cr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i)throw Error(cr(189))}}if(r.alternate!==n)throw Error(cr(190))}if(r.tag!==3)throw Error(cr(188));return r.stateNode.current===r?t:e}function Zq(t){return t=mue(t),t!==null?ez(t):null}function ez(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ez(t);if(e!==null)return e;t=t.sibling}return null}var tz=Hc.unstable_scheduleCallback,gM=Hc.unstable_cancelCallback,pue=Hc.unstable_shouldYield,gue=Hc.unstable_requestPaint,Js=Hc.unstable_now,xue=Hc.unstable_getCurrentPriorityLevel,yF=Hc.unstable_ImmediatePriority,rz=Hc.unstable_UserBlockingPriority,U_=Hc.unstable_NormalPriority,vue=Hc.unstable_LowPriority,nz=Hc.unstable_IdlePriority,nI=null,uf=null;function yue(t){if(uf&&typeof uf.onCommitFiberRoot=="function")try{uf.onCommitFiberRoot(nI,t,void 0,(t.current.flags&128)===128)}catch{}}var pd=Math.clz32?Math.clz32:Nue,bue=Math.log,wue=Math.LN2;function Nue(t){return t>>>=0,t===0?32:31-(bue(t)/wue|0)|0}var eN=64,tN=4194304;function J1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Q_(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=J1(l):(s&=i,s!==0&&(n=J1(s)))}else i=r&~a,i!==0?n=J1(i):s!==0&&(n=J1(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-pd(e),a=1<<r,n|=t[r],e&=~a;return n}function Cue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _ue(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-pd(s),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=Cue(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function XP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function az(){var t=eN;return eN<<=1,!(eN&4194240)&&(eN=64),t}function J3(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Eb(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pd(e),t[e]=r}function Eue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-pd(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function bF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-pd(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var ba=0;function sz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iz,wF,oz,lz,cz,YP=!1,rN=[],n0=null,a0=null,s0=null,l2=new Map,c2=new Map,Rh=[],Sue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xM(t,e){switch(t){case"focusin":case"focusout":n0=null;break;case"dragenter":case"dragleave":a0=null;break;case"mouseover":case"mouseout":s0=null;break;case"pointerover":case"pointerout":l2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":c2.delete(e.pointerId)}}function f1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Ib(e),e!==null&&wF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Iue(t,e,r,n,a){switch(e){case"focusin":return n0=f1(n0,t,e,r,n,a),!0;case"dragenter":return a0=f1(a0,t,e,r,n,a),!0;case"mouseover":return s0=f1(s0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return l2.set(s,f1(l2.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,c2.set(s,f1(c2.get(s)||null,t,e,r,n,a)),!0}return!1}function uz(t){var e=km(t.target);if(e!==null){var r=Up(e);if(r!==null){if(e=r.tag,e===13){if(e=Jq(r),e!==null){t.blockedOn=e,cz(t.priority,function(){oz(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function YC(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=JP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);GP=n,r.target.dispatchEvent(n),GP=null}else return e=Ib(r),e!==null&&wF(e),t.blockedOn=r,!1;e.shift()}return!0}function vM(t,e,r){YC(t)&&r.delete(e)}function Bue(){YP=!1,n0!==null&&YC(n0)&&(n0=null),a0!==null&&YC(a0)&&(a0=null),s0!==null&&YC(s0)&&(s0=null),l2.forEach(vM),c2.forEach(vM)}function A1(t,e){t.blockedOn===e&&(t.blockedOn=null,YP||(YP=!0,Hc.unstable_scheduleCallback(Hc.unstable_NormalPriority,Bue)))}function u2(t){function e(a){return A1(a,t)}if(0<rN.length){A1(rN[0],t);for(var r=1;r<rN.length;r++){var n=rN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(n0!==null&&A1(n0,t),a0!==null&&A1(a0,t),s0!==null&&A1(s0,t),l2.forEach(e),c2.forEach(e),r=0;r<Rh.length;r++)n=Rh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Rh.length&&(r=Rh[0],r.blockedOn===null);)uz(r),r.blockedOn===null&&Rh.shift()}var Nx=DA.ReactCurrentBatchConfig,V_=!0;function Pue(t,e,r,n){var a=ba,s=Nx.transition;Nx.transition=null;try{ba=1,NF(t,e,r,n)}finally{ba=a,Nx.transition=s}}function jue(t,e,r,n){var a=ba,s=Nx.transition;Nx.transition=null;try{ba=4,NF(t,e,r,n)}finally{ba=a,Nx.transition=s}}function NF(t,e,r,n){if(V_){var a=JP(t,e,r,n);if(a===null)l5(t,e,n,H_,r),xM(t,n);else if(Iue(a,t,e,r,n))n.stopPropagation();else if(xM(t,n),e&4&&-1<Sue.indexOf(t)){for(;a!==null;){var s=Ib(a);if(s!==null&&iz(s),s=JP(t,e,r,n),s===null&&l5(t,e,n,H_,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else l5(t,e,n,null,r)}}var H_=null;function JP(t,e,r,n){if(H_=null,t=vF(n),t=km(t),t!==null)if(e=Up(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Jq(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return H_=t,null}function dz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xue()){case yF:return 1;case rz:return 4;case U_:case vue:return 16;case nz:return 536870912;default:return 16}default:return 16}}var qh=null,CF=null,JC=null;function fz(){if(JC)return JC;var t,e=CF,r=e.length,n,a="value"in qh?qh.value:qh.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return JC=a.slice(t,1<n?1-n:void 0)}function ZC(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nN(){return!0}function yM(){return!1}function Wc(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nN:yM,this.isPropagationStopped=yM,this}return Ss(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nN)},persist:function(){},isPersistent:nN}),e}var mv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_F=Wc(mv),Sb=Ss({},mv,{view:0,detail:0}),Tue=Wc(Sb),Z3,e5,h1,aI=Ss({},Sb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==h1&&(h1&&t.type==="mousemove"?(Z3=t.screenX-h1.screenX,e5=t.screenY-h1.screenY):e5=Z3=0,h1=t),Z3)},movementY:function(t){return"movementY"in t?t.movementY:e5}}),bM=Wc(aI),kue=Ss({},aI,{dataTransfer:0}),Fue=Wc(kue),Oue=Ss({},Sb,{relatedTarget:0}),t5=Wc(Oue),Due=Ss({},mv,{animationName:0,elapsedTime:0,pseudoElement:0}),Rue=Wc(Due),Mue=Ss({},mv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lue=Wc(Mue),Uue=Ss({},mv,{data:0}),wM=Wc(Uue),Que={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $ue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hue[t])?!!e[t]:!1}function EF(){return $ue}var Kue=Ss({},Sb,{key:function(t){if(t.key){var e=Que[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ZC(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EF,charCode:function(t){return t.type==="keypress"?ZC(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ZC(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gue=Wc(Kue),que=Ss({},aI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NM=Wc(que),zue=Ss({},Sb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EF}),Wue=Wc(zue),Xue=Ss({},mv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yue=Wc(Xue),Jue=Ss({},aI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zue=Wc(Jue),ede=[9,13,27,32],SF=xA&&"CompositionEvent"in window,Cy=null;xA&&"documentMode"in document&&(Cy=document.documentMode);var tde=xA&&"TextEvent"in window&&!Cy,Az=xA&&(!SF||Cy&&8<Cy&&11>=Cy),CM=" ",_M=!1;function hz(t,e){switch(t){case"keyup":return ede.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tx=!1;function rde(t,e){switch(t){case"compositionend":return mz(e);case"keypress":return e.which!==32?null:(_M=!0,CM);case"textInput":return t=e.data,t===CM&&_M?null:t;default:return null}}function nde(t,e){if(tx)return t==="compositionend"||!SF&&hz(t,e)?(t=fz(),JC=CF=qh=null,tx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Az&&e.locale!=="ko"?null:e.data;default:return null}}var ade={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ade[t.type]:e==="textarea"}function pz(t,e,r,n){qq(n),e=$_(e,"onChange"),0<e.length&&(r=new _F("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _y=null,d2=null;function sde(t){Sz(t,0)}function sI(t){var e=ax(t);if(Uq(e))return t}function ide(t,e){if(t==="change")return e}var gz=!1;if(xA){var r5;if(xA){var n5="oninput"in document;if(!n5){var SM=document.createElement("div");SM.setAttribute("oninput","return;"),n5=typeof SM.oninput=="function"}r5=n5}else r5=!1;gz=r5&&(!document.documentMode||9<document.documentMode)}function IM(){_y&&(_y.detachEvent("onpropertychange",xz),d2=_y=null)}function xz(t){if(t.propertyName==="value"&&sI(d2)){var e=[];pz(e,d2,t,vF(t)),Yq(sde,e)}}function ode(t,e,r){t==="focusin"?(IM(),_y=e,d2=r,_y.attachEvent("onpropertychange",xz)):t==="focusout"&&IM()}function lde(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sI(d2)}function cde(t,e){if(t==="click")return sI(e)}function ude(t,e){if(t==="input"||t==="change")return sI(e)}function dde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nd=typeof Object.is=="function"?Object.is:dde;function f2(t,e){if(Nd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!FP.call(e,a)||!Nd(t[a],e[a]))return!1}return!0}function BM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function PM(t,e){var r=BM(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BM(r)}}function vz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yz(){for(var t=window,e=R_();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=R_(t.document)}return e}function IF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fde(t){var e=yz(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&vz(r.ownerDocument.documentElement,r)){if(n!==null&&IF(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=PM(r,s);var i=PM(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ade=xA&&"documentMode"in document&&11>=document.documentMode,rx=null,ZP=null,Ey=null,ej=!1;function jM(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ej||rx==null||rx!==R_(n)||(n=rx,"selectionStart"in n&&IF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ey&&f2(Ey,n)||(Ey=n,n=$_(ZP,"onSelect"),0<n.length&&(e=new _F("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=rx)))}function aN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var nx={animationend:aN("Animation","AnimationEnd"),animationiteration:aN("Animation","AnimationIteration"),animationstart:aN("Animation","AnimationStart"),transitionend:aN("Transition","TransitionEnd")},a5={},bz={};xA&&(bz=document.createElement("div").style,"AnimationEvent"in window||(delete nx.animationend.animation,delete nx.animationiteration.animation,delete nx.animationstart.animation),"TransitionEvent"in window||delete nx.transitionend.transition);function iI(t){if(a5[t])return a5[t];if(!nx[t])return t;var e=nx[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in bz)return a5[t]=e[r];return t}var wz=iI("animationend"),Nz=iI("animationiteration"),Cz=iI("animationstart"),_z=iI("transitionend"),Ez=new Map,TM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function L0(t,e){Ez.set(t,e),Lp(e,[t])}for(var s5=0;s5<TM.length;s5++){var i5=TM[s5],hde=i5.toLowerCase(),mde=i5[0].toUpperCase()+i5.slice(1);L0(hde,"on"+mde)}L0(wz,"onAnimationEnd");L0(Nz,"onAnimationIteration");L0(Cz,"onAnimationStart");L0("dblclick","onDoubleClick");L0("focusin","onFocus");L0("focusout","onBlur");L0(_z,"onTransitionEnd");Rx("onMouseEnter",["mouseout","mouseover"]);Rx("onMouseLeave",["mouseout","mouseover"]);Rx("onPointerEnter",["pointerout","pointerover"]);Rx("onPointerLeave",["pointerout","pointerover"]);Lp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Z1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pde=new Set("cancel close invalid load scroll toggle".split(" ").concat(Z1));function kM(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hue(n,e,void 0,t),t.currentTarget=null}function Sz(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;kM(a,l,u),s=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;kM(a,l,u),s=c}}}if(L_)throw t=WP,L_=!1,WP=null,t}function Ga(t,e){var r=e[sj];r===void 0&&(r=e[sj]=new Set);var n=t+"__bubble";r.has(n)||(Iz(e,t,2,!1),r.add(n))}function o5(t,e,r){var n=0;e&&(n|=4),Iz(r,t,n,e)}var sN="_reactListening"+Math.random().toString(36).slice(2);function A2(t){if(!t[sN]){t[sN]=!0,Oq.forEach(function(r){r!=="selectionchange"&&(pde.has(r)||o5(r,!1,t),o5(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sN]||(e[sN]=!0,o5("selectionchange",!1,e))}}function Iz(t,e,r,n){switch(dz(e)){case 1:var a=Pue;break;case 4:a=jue;break;default:a=NF}r=a.bind(null,e,r,t),a=void 0,!zP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function l5(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=km(l),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}l=l.parentNode}}n=n.return}Yq(function(){var u=s,d=vF(r),f=[];e:{var h=Ez.get(t);if(h!==void 0){var A=_F,m=t;switch(t){case"keypress":if(ZC(r)===0)break e;case"keydown":case"keyup":A=Gue;break;case"focusin":m="focus",A=t5;break;case"focusout":m="blur",A=t5;break;case"beforeblur":case"afterblur":A=t5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=bM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Fue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Wue;break;case wz:case Nz:case Cz:A=Rue;break;case _z:A=Yue;break;case"scroll":A=Tue;break;case"wheel":A=Zue;break;case"copy":case"cut":case"paste":A=Lue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=NM}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=o2(y,x),w!=null&&p.push(h2(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new A(h,m,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",h&&r!==GP&&(m=r.relatedTarget||r.fromElement)&&(km(m)||m[vA]))break e;if((A||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,A?(m=r.relatedTarget||r.toElement,A=u,m=m?km(m):null,m!==null&&(g=Up(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=u),A!==m)){if(p=bM,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=NM,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=A==null?h:ax(A),b=m==null?h:ax(m),h=new p(w,y+"leave",A,r,d),h.target=g,h.relatedTarget=b,w=null,km(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,A&&m)t:{for(p=A,x=m,y=0,b=p;b;b=Ag(b))y++;for(b=0,w=x;w;w=Ag(w))b++;for(;0<y-b;)p=Ag(p),y--;for(;0<b-y;)x=Ag(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=Ag(p),x=Ag(x)}p=null}else p=null;A!==null&&FM(f,h,A,p,!1),m!==null&&g!==null&&FM(f,g,m,p,!0)}}e:{if(h=u?ax(u):window,A=h.nodeName&&h.nodeName.toLowerCase(),A==="select"||A==="input"&&h.type==="file")var B=ide;else if(EM(h))if(gz)B=ude;else{B=lde;var P=ode}else(A=h.nodeName)&&A.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(B=cde);if(B&&(B=B(t,u))){pz(f,B,r,d);break e}P&&P(t,h,u),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&QP(h,"number",h.value)}switch(P=u?ax(u):window,t){case"focusin":(EM(P)||P.contentEditable==="true")&&(rx=P,ZP=u,Ey=null);break;case"focusout":Ey=ZP=rx=null;break;case"mousedown":ej=!0;break;case"contextmenu":case"mouseup":case"dragend":ej=!1,jM(f,r,d);break;case"selectionchange":if(Ade)break;case"keydown":case"keyup":jM(f,r,d)}var _;if(SF)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else tx?hz(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Az&&r.locale!=="ko"&&(tx||E!=="onCompositionStart"?E==="onCompositionEnd"&&tx&&(_=fz()):(qh=d,CF="value"in qh?qh.value:qh.textContent,tx=!0)),P=$_(u,E),0<P.length&&(E=new wM(E,t,null,r,d),f.push({event:E,listeners:P}),_?E.data=_:(_=mz(r),_!==null&&(E.data=_)))),(_=tde?rde(t,r):nde(t,r))&&(u=$_(u,"onBeforeInput"),0<u.length&&(d=new wM("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}Sz(f,e)})}function h2(t,e,r){return{instance:t,listener:e,currentTarget:r}}function $_(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=o2(t,r),s!=null&&n.unshift(h2(t,s,a)),s=o2(t,e),s!=null&&n.push(h2(t,s,a))),t=t.return}return n}function Ag(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function FM(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=o2(r,s),c!=null&&i.unshift(h2(r,c,l))):a||(c=o2(r,s),c!=null&&i.push(h2(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var gde=/\r\n?/g,xde=/\u0000|\uFFFD/g;function OM(t){return(typeof t=="string"?t:""+t).replace(gde,`
`).replace(xde,"")}function iN(t,e,r){if(e=OM(e),OM(t)!==e&&r)throw Error(cr(425))}function K_(){}var tj=null,rj=null;function nj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aj=typeof setTimeout=="function"?setTimeout:void 0,vde=typeof clearTimeout=="function"?clearTimeout:void 0,DM=typeof Promise=="function"?Promise:void 0,yde=typeof queueMicrotask=="function"?queueMicrotask:typeof DM<"u"?function(t){return DM.resolve(null).then(t).catch(bde)}:aj;function bde(t){setTimeout(function(){throw t})}function c5(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),u2(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);u2(e)}function i0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var pv=Math.random().toString(36).slice(2),tf="__reactFiber$"+pv,m2="__reactProps$"+pv,vA="__reactContainer$"+pv,sj="__reactEvents$"+pv,wde="__reactListeners$"+pv,Nde="__reactHandles$"+pv;function km(t){var e=t[tf];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vA]||r[tf]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=RM(t);t!==null;){if(r=t[tf])return r;t=RM(t)}return e}t=r,r=t.parentNode}return null}function Ib(t){return t=t[tf]||t[vA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ax(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(cr(33))}function oI(t){return t[m2]||null}var ij=[],sx=-1;function U0(t){return{current:t}}function Ja(t){0>sx||(t.current=ij[sx],ij[sx]=null,sx--)}function Ua(t,e){sx++,ij[sx]=t.current,t.current=e}var w0={},hl=U0(w0),oc=U0(!1),lp=w0;function Mx(t,e){var r=t.type.contextTypes;if(!r)return w0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function lc(t){return t=t.childContextTypes,t!=null}function G_(){Ja(oc),Ja(hl)}function MM(t,e,r){if(hl.current!==w0)throw Error(cr(168));Ua(hl,e),Ua(oc,r)}function Bz(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(cr(108,oue(t)||"Unknown",a));return Ss({},r,n)}function q_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||w0,lp=hl.current,Ua(hl,t),Ua(oc,oc.current),!0}function LM(t,e,r){var n=t.stateNode;if(!n)throw Error(cr(169));r?(t=Bz(t,e,lp),n.__reactInternalMemoizedMergedChildContext=t,Ja(oc),Ja(hl),Ua(hl,t)):Ja(oc),Ua(oc,r)}var qf=null,lI=!1,u5=!1;function Pz(t){qf===null?qf=[t]:qf.push(t)}function Cde(t){lI=!0,Pz(t)}function Q0(){if(!u5&&qf!==null){u5=!0;var t=0,e=ba;try{var r=qf;for(ba=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}qf=null,lI=!1}catch(a){throw qf!==null&&(qf=qf.slice(t+1)),tz(yF,Q0),a}finally{ba=e,u5=!1}}return null}var ix=[],ox=0,z_=null,W_=0,wu=[],Nu=0,cp=null,Jf=1,Zf="";function pm(t,e){ix[ox++]=W_,ix[ox++]=z_,z_=t,W_=e}function jz(t,e,r){wu[Nu++]=Jf,wu[Nu++]=Zf,wu[Nu++]=cp,cp=t;var n=Jf;t=Zf;var a=32-pd(n)-1;n&=~(1<<a),r+=1;var s=32-pd(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Jf=1<<32-pd(e)+a|r<<a|n,Zf=s+t}else Jf=1<<s|r<<a|n,Zf=t}function BF(t){t.return!==null&&(pm(t,1),jz(t,1,0))}function PF(t){for(;t===z_;)z_=ix[--ox],ix[ox]=null,W_=ix[--ox],ix[ox]=null;for(;t===cp;)cp=wu[--Nu],wu[Nu]=null,Zf=wu[--Nu],wu[Nu]=null,Jf=wu[--Nu],wu[Nu]=null}var Qc=null,Rc=null,ls=!1,ld=null;function Tz(t,e){var r=_u(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function UM(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qc=t,Rc=i0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qc=t,Rc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=cp!==null?{id:Jf,overflow:Zf}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=_u(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qc=t,Rc=null,!0):!1;default:return!1}}function oj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lj(t){if(ls){var e=Rc;if(e){var r=e;if(!UM(t,e)){if(oj(t))throw Error(cr(418));e=i0(r.nextSibling);var n=Qc;e&&UM(t,e)?Tz(n,r):(t.flags=t.flags&-4097|2,ls=!1,Qc=t)}}else{if(oj(t))throw Error(cr(418));t.flags=t.flags&-4097|2,ls=!1,Qc=t}}}function QM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qc=t}function oN(t){if(t!==Qc)return!1;if(!ls)return QM(t),ls=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nj(t.type,t.memoizedProps)),e&&(e=Rc)){if(oj(t))throw kz(),Error(cr(418));for(;e;)Tz(t,e),e=i0(e.nextSibling)}if(QM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(cr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Rc=i0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Rc=null}}else Rc=Qc?i0(t.stateNode.nextSibling):null;return!0}function kz(){for(var t=Rc;t;)t=i0(t.nextSibling)}function Lx(){Rc=Qc=null,ls=!1}function jF(t){ld===null?ld=[t]:ld.push(t)}var _de=DA.ReactCurrentBatchConfig;function m1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(cr(309));var n=r.stateNode}if(!n)throw Error(cr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=a.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(cr(284));if(!r._owner)throw Error(cr(290,t))}return t}function lN(t,e){throw t=Object.prototype.toString.call(e),Error(cr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function VM(t){var e=t._init;return e(t._payload)}function Fz(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=u0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=g5(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var B=b.type;return B===ex?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===jh&&VM(B)===y.type)?(w=a(y,b.props),w.ref=m1(x,y,b),w.return=x,w):(w=i_(b.type,b.key,b.props,null,x.mode,w),w.ref=m1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=x5(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,B){return y===null||y.tag!==7?(y=Km(b,x.mode,w,B),y.return=x,y):(y=a(y,b),y.return=x,y)}function f(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=g5(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yw:return b=i_(y.type,y.key,y.props,null,x.mode,b),b.ref=m1(x,null,y),b.return=x,b;case Zg:return y=x5(y,x.mode,b),y.return=x,y;case jh:var w=y._init;return f(x,w(y._payload),b)}if(Y1(y)||u1(y))return y=Km(y,x.mode,b,null),y.return=x,y;lN(x,y)}return null}function h(x,y,b,w){var B=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return B!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yw:return b.key===B?c(x,y,b,w):null;case Zg:return b.key===B?u(x,y,b,w):null;case jh:return B=b._init,h(x,y,B(b._payload),w)}if(Y1(b)||u1(b))return B!==null?null:d(x,y,b,w,null);lN(x,b)}return null}function A(x,y,b,w,B){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,B);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yw:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,B);case Zg:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,B);case jh:var P=w._init;return A(x,y,b,P(w._payload),B)}if(Y1(w)||u1(w))return x=x.get(b)||null,d(y,x,w,B,null);lN(y,w)}return null}function m(x,y,b,w){for(var B=null,P=null,_=y,E=y=0,I=null;_!==null&&E<b.length;E++){_.index>E?(I=_,_=null):I=_.sibling;var O=h(x,_,b[E],w);if(O===null){_===null&&(_=I);break}t&&_&&O.alternate===null&&e(x,_),y=s(O,y,E),P===null?B=O:P.sibling=O,P=O,_=I}if(E===b.length)return r(x,_),ls&&pm(x,E),B;if(_===null){for(;E<b.length;E++)_=f(x,b[E],w),_!==null&&(y=s(_,y,E),P===null?B=_:P.sibling=_,P=_);return ls&&pm(x,E),B}for(_=n(x,_);E<b.length;E++)I=A(_,x,E,b[E],w),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?E:I.key),y=s(I,y,E),P===null?B=I:P.sibling=I,P=I);return t&&_.forEach(function(S){return e(x,S)}),ls&&pm(x,E),B}function p(x,y,b,w){var B=u1(b);if(typeof B!="function")throw Error(cr(150));if(b=B.call(b),b==null)throw Error(cr(151));for(var P=B=null,_=y,E=y=0,I=null,O=b.next();_!==null&&!O.done;E++,O=b.next()){_.index>E?(I=_,_=null):I=_.sibling;var S=h(x,_,O.value,w);if(S===null){_===null&&(_=I);break}t&&_&&S.alternate===null&&e(x,_),y=s(S,y,E),P===null?B=S:P.sibling=S,P=S,_=I}if(O.done)return r(x,_),ls&&pm(x,E),B;if(_===null){for(;!O.done;E++,O=b.next())O=f(x,O.value,w),O!==null&&(y=s(O,y,E),P===null?B=O:P.sibling=O,P=O);return ls&&pm(x,E),B}for(_=n(x,_);!O.done;E++,O=b.next())O=A(_,x,E,O.value,w),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?E:O.key),y=s(O,y,E),P===null?B=O:P.sibling=O,P=O);return t&&_.forEach(function(j){return e(x,j)}),ls&&pm(x,E),B}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===ex&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Yw:e:{for(var B=b.key,P=y;P!==null;){if(P.key===B){if(B=b.type,B===ex){if(P.tag===7){r(x,P.sibling),y=a(P,b.props.children),y.return=x,x=y;break e}}else if(P.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===jh&&VM(B)===P.type){r(x,P.sibling),y=a(P,b.props),y.ref=m1(x,P,b),y.return=x,x=y;break e}r(x,P);break}else e(x,P);P=P.sibling}b.type===ex?(y=Km(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=i_(b.type,b.key,b.props,null,x.mode,w),w.ref=m1(x,y,b),w.return=x,x=w)}return i(x);case Zg:e:{for(P=b.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=x5(b,x.mode,w),y.return=x,x=y}return i(x);case jh:return P=b._init,g(x,y,P(b._payload),w)}if(Y1(b))return m(x,y,b,w);if(u1(b))return p(x,y,b,w);lN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=g5(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var Ux=Fz(!0),Oz=Fz(!1),X_=U0(null),Y_=null,lx=null,TF=null;function kF(){TF=lx=Y_=null}function FF(t){var e=X_.current;Ja(X_),t._currentValue=e}function cj(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Cx(t,e){Y_=t,TF=lx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ac=!0),t.firstContext=null)}function Ou(t){var e=t._currentValue;if(TF!==t)if(t={context:t,memoizedValue:e,next:null},lx===null){if(Y_===null)throw Error(cr(308));lx=t,Y_.dependencies={lanes:0,firstContext:t}}else lx=lx.next=t;return e}var Fm=null;function OF(t){Fm===null?Fm=[t]:Fm.push(t)}function Dz(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,OF(e)):(r.next=a.next,a.next=r),e.interleaved=r,yA(t,n)}function yA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Th=!1;function DF(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function o0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Kn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,yA(t,r)}return a=n.interleaved,a===null?(e.next=e,OF(n)):(e.next=a.next,a.next=e),n.interleaved=e,yA(t,r)}function e_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bF(t,r)}}function HM(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function J_(t,e,r,n){var a=t.updateQueue;Th=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;i=0,d=u=c=null,l=s;do{var h=l.lane,A=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(h=e,A=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(A,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(A,f,h):m,h==null)break e;f=Ss({},f,h);break e;case 2:Th=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else A={eventTime:A,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=A,c=f):d=d.next=A,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);dp|=i,t.lanes=i,t.memoizedState=f}}function $M(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(cr(191,a));a.call(n)}}}var Bb={},df=U0(Bb),p2=U0(Bb),g2=U0(Bb);function Om(t){if(t===Bb)throw Error(cr(174));return t}function RF(t,e){switch(Ua(g2,e),Ua(p2,t),Ua(df,Bb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:HP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=HP(e,t)}Ja(df),Ua(df,e)}function Qx(){Ja(df),Ja(p2),Ja(g2)}function Mz(t){Om(g2.current);var e=Om(df.current),r=HP(e,t.type);e!==r&&(Ua(p2,t),Ua(df,r))}function MF(t){p2.current===t&&(Ja(df),Ja(p2))}var Ns=U0(0);function Z_(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var d5=[];function LF(){for(var t=0;t<d5.length;t++)d5[t]._workInProgressVersionPrimary=null;d5.length=0}var t_=DA.ReactCurrentDispatcher,f5=DA.ReactCurrentBatchConfig,up=0,Es=null,Ei=null,ao=null,eE=!1,Sy=!1,x2=0,Ede=0;function Go(){throw Error(cr(321))}function UF(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Nd(t[r],e[r]))return!1;return!0}function QF(t,e,r,n,a,s){if(up=s,Es=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,t_.current=t===null||t.memoizedState===null?Pde:jde,t=r(n,a),Sy){s=0;do{if(Sy=!1,x2=0,25<=s)throw Error(cr(301));s+=1,ao=Ei=null,e.updateQueue=null,t_.current=Tde,t=r(n,a)}while(Sy)}if(t_.current=tE,e=Ei!==null&&Ei.next!==null,up=0,ao=Ei=Es=null,eE=!1,e)throw Error(cr(300));return t}function VF(){var t=x2!==0;return x2=0,t}function ef(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ao===null?Es.memoizedState=ao=t:ao=ao.next=t,ao}function Du(){if(Ei===null){var t=Es.alternate;t=t!==null?t.memoizedState:null}else t=Ei.next;var e=ao===null?Es.memoizedState:ao.next;if(e!==null)ao=e,Ei=t;else{if(t===null)throw Error(cr(310));Ei=t,t={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},ao===null?Es.memoizedState=ao=t:ao=ao.next=t}return ao}function v2(t,e){return typeof e=="function"?e(t):e}function A5(t){var e=Du(),r=e.queue;if(r===null)throw Error(cr(311));r.lastRenderedReducer=t;var n=Ei,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((up&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Es.lanes|=d,dp|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=l,Nd(n,e.memoizedState)||(ac=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Es.lanes|=s,dp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function h5(t){var e=Du(),r=e.queue;if(r===null)throw Error(cr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);Nd(s,e.memoizedState)||(ac=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Lz(){}function Uz(t,e){var r=Es,n=Du(),a=e(),s=!Nd(n.memoizedState,a);if(s&&(n.memoizedState=a,ac=!0),n=n.queue,HF(Hz.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ao!==null&&ao.memoizedState.tag&1){if(r.flags|=2048,y2(9,Vz.bind(null,r,n,a,e),void 0,null),co===null)throw Error(cr(349));up&30||Qz(r,e,a)}return a}function Qz(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Es.updateQueue,e===null?(e={lastEffect:null,stores:null},Es.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Vz(t,e,r,n){e.value=r,e.getSnapshot=n,$z(e)&&Kz(t)}function Hz(t,e,r){return r(function(){$z(e)&&Kz(t)})}function $z(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nd(t,r)}catch{return!0}}function Kz(t){var e=yA(t,1);e!==null&&gd(e,t,1,-1)}function KM(t){var e=ef();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v2,lastRenderedState:t},e.queue=t,t=t.dispatch=Bde.bind(null,Es,t),[e.memoizedState,t]}function y2(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Es.updateQueue,e===null?(e={lastEffect:null,stores:null},Es.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Gz(){return Du().memoizedState}function r_(t,e,r,n){var a=ef();Es.flags|=t,a.memoizedState=y2(1|e,r,void 0,n===void 0?null:n)}function cI(t,e,r,n){var a=Du();n=n===void 0?null:n;var s=void 0;if(Ei!==null){var i=Ei.memoizedState;if(s=i.destroy,n!==null&&UF(n,i.deps)){a.memoizedState=y2(e,r,s,n);return}}Es.flags|=t,a.memoizedState=y2(1|e,r,s,n)}function GM(t,e){return r_(8390656,8,t,e)}function HF(t,e){return cI(2048,8,t,e)}function qz(t,e){return cI(4,2,t,e)}function zz(t,e){return cI(4,4,t,e)}function Wz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xz(t,e,r){return r=r!=null?r.concat([t]):null,cI(4,4,Wz.bind(null,e,t),r)}function $F(){}function Yz(t,e){var r=Du();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UF(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Jz(t,e){var r=Du();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UF(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Zz(t,e,r){return up&21?(Nd(r,e)||(r=az(),Es.lanes|=r,dp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ac=!0),t.memoizedState=r)}function Sde(t,e){var r=ba;ba=r!==0&&4>r?r:4,t(!0);var n=f5.transition;f5.transition={};try{t(!1),e()}finally{ba=r,f5.transition=n}}function eW(){return Du().memoizedState}function Ide(t,e,r){var n=c0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},tW(t))rW(e,r);else if(r=Dz(t,e,r,n),r!==null){var a=Rl();gd(r,t,n,a),nW(r,e,n)}}function Bde(t,e,r){var n=c0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(tW(t))rW(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,r);if(a.hasEagerState=!0,a.eagerState=l,Nd(l,i)){var c=e.interleaved;c===null?(a.next=a,OF(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Dz(t,e,a,n),r!==null&&(a=Rl(),gd(r,t,n,a),nW(r,e,n))}}function tW(t){var e=t.alternate;return t===Es||e!==null&&e===Es}function rW(t,e){Sy=eE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function nW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bF(t,r)}}var tE={readContext:Ou,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},Pde={readContext:Ou,useCallback:function(t,e){return ef().memoizedState=[t,e===void 0?null:e],t},useContext:Ou,useEffect:GM,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,r_(4194308,4,Wz.bind(null,e,t),r)},useLayoutEffect:function(t,e){return r_(4194308,4,t,e)},useInsertionEffect:function(t,e){return r_(4,2,t,e)},useMemo:function(t,e){var r=ef();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ef();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ide.bind(null,Es,t),[n.memoizedState,t]},useRef:function(t){var e=ef();return t={current:t},e.memoizedState=t},useState:KM,useDebugValue:$F,useDeferredValue:function(t){return ef().memoizedState=t},useTransition:function(){var t=KM(!1),e=t[0];return t=Sde.bind(null,t[1]),ef().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Es,a=ef();if(ls){if(r===void 0)throw Error(cr(407));r=r()}else{if(r=e(),co===null)throw Error(cr(349));up&30||Qz(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,GM(Hz.bind(null,n,s,t),[t]),n.flags|=2048,y2(9,Vz.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ef(),e=co.identifierPrefix;if(ls){var r=Zf,n=Jf;r=(n&~(1<<32-pd(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=x2++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ede++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jde={readContext:Ou,useCallback:Yz,useContext:Ou,useEffect:HF,useImperativeHandle:Xz,useInsertionEffect:qz,useLayoutEffect:zz,useMemo:Jz,useReducer:A5,useRef:Gz,useState:function(){return A5(v2)},useDebugValue:$F,useDeferredValue:function(t){var e=Du();return Zz(e,Ei.memoizedState,t)},useTransition:function(){var t=A5(v2)[0],e=Du().memoizedState;return[t,e]},useMutableSource:Lz,useSyncExternalStore:Uz,useId:eW,unstable_isNewReconciler:!1},Tde={readContext:Ou,useCallback:Yz,useContext:Ou,useEffect:HF,useImperativeHandle:Xz,useInsertionEffect:qz,useLayoutEffect:zz,useMemo:Jz,useReducer:h5,useRef:Gz,useState:function(){return h5(v2)},useDebugValue:$F,useDeferredValue:function(t){var e=Du();return Ei===null?e.memoizedState=t:Zz(e,Ei.memoizedState,t)},useTransition:function(){var t=h5(v2)[0],e=Du().memoizedState;return[t,e]},useMutableSource:Lz,useSyncExternalStore:Uz,useId:eW,unstable_isNewReconciler:!1};function id(t,e){if(t&&t.defaultProps){e=Ss({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function uj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ss({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uI={isMounted:function(t){return(t=t._reactInternals)?Up(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Rl(),a=c0(t),s=oA(n,a);s.payload=e,r!=null&&(s.callback=r),e=o0(t,s,a),e!==null&&(gd(e,t,a,n),e_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Rl(),a=c0(t),s=oA(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=o0(t,s,a),e!==null&&(gd(e,t,a,n),e_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Rl(),n=c0(t),a=oA(r,n);a.tag=2,e!=null&&(a.callback=e),e=o0(t,a,n),e!==null&&(gd(e,t,n,r),e_(e,t,n))}};function qM(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!f2(r,n)||!f2(a,s):!0}function aW(t,e,r){var n=!1,a=w0,s=e.contextType;return typeof s=="object"&&s!==null?s=Ou(s):(a=lc(e)?lp:hl.current,n=e.contextTypes,s=(n=n!=null)?Mx(t,a):w0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function zM(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uI.enqueueReplaceState(e,e.state,null)}function dj(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},DF(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Ou(s):(s=lc(e)?lp:hl.current,a.context=Mx(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uj(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&uI.enqueueReplaceState(a,a.state,null),J_(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Vx(t,e){try{var r="",n=e;do r+=iue(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function m5(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function fj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kde=typeof WeakMap=="function"?WeakMap:Map;function sW(t,e,r){r=oA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){nE||(nE=!0,wj=n),fj(t,e)},r}function iW(t,e,r){r=oA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){fj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){fj(t,e),typeof n!="function"&&(l0===null?l0=new Set([this]):l0.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function WM(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new kde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=qde.bind(null,t,e,r),e.then(t,t))}function XM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function YM(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=oA(-1,1),e.tag=2,o0(r,e,1))),r.lanes|=1),t)}var Fde=DA.ReactCurrentOwner,ac=!1;function Pl(t,e,r,n){e.child=t===null?Oz(e,null,r,n):Ux(e,t.child,r,n)}function JM(t,e,r,n,a){r=r.render;var s=e.ref;return Cx(e,a),n=QF(t,e,r,n,s,a),r=VF(),t!==null&&!ac?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bA(t,e,a)):(ls&&r&&BF(e),e.flags|=1,Pl(t,e,n,a),e.child)}function ZM(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!JF(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,oW(t,e,s,n,a)):(t=i_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:f2,r(i,n)&&t.ref===e.ref)return bA(t,e,a)}return e.flags|=1,t=u0(s,n),t.ref=e.ref,t.return=e,e.child=t}function oW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(f2(s,n)&&t.ref===e.ref)if(ac=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(ac=!0);else return e.lanes=t.lanes,bA(t,e,a)}return Aj(t,e,r,n,a)}function lW(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ua(ux,Pc),Pc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ua(ux,Pc),Pc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ua(ux,Pc),Pc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ua(ux,Pc),Pc|=n;return Pl(t,e,a,r),e.child}function cW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Aj(t,e,r,n,a){var s=lc(r)?lp:hl.current;return s=Mx(e,s),Cx(e,a),r=QF(t,e,r,n,s,a),n=VF(),t!==null&&!ac?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bA(t,e,a)):(ls&&n&&BF(e),e.flags|=1,Pl(t,e,r,a),e.child)}function eL(t,e,r,n,a){if(lc(r)){var s=!0;q_(e)}else s=!1;if(Cx(e,a),e.stateNode===null)n_(t,e),aW(e,r,n),dj(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ou(u):(u=lc(r)?lp:hl.current,u=Mx(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&zM(e,i,n,u),Th=!1;var h=e.memoizedState;i.state=h,J_(e,n,i,a),c=e.memoizedState,l!==n||h!==c||oc.current||Th?(typeof d=="function"&&(uj(e,r,d,n),c=e.memoizedState),(l=Th||qM(e,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Rz(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:id(e.type,l),i.props=u,f=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ou(c):(c=lc(r)?lp:hl.current,c=Mx(e,c));var A=r.getDerivedStateFromProps;(d=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&zM(e,i,n,c),Th=!1,h=e.memoizedState,i.state=h,J_(e,n,i,a);var m=e.memoizedState;l!==f||h!==m||oc.current||Th?(typeof A=="function"&&(uj(e,r,A,n),m=e.memoizedState),(u=Th||qM(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return hj(t,e,r,n,s,a)}function hj(t,e,r,n,a,s){cW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&LM(e,r,!1),bA(t,e,s);n=e.stateNode,Fde.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Ux(e,t.child,null,s),e.child=Ux(e,null,l,s)):Pl(t,e,l,s),e.memoizedState=n.state,a&&LM(e,r,!0),e.child}function uW(t){var e=t.stateNode;e.pendingContext?MM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&MM(t,e.context,!1),RF(t,e.containerInfo)}function tL(t,e,r,n,a){return Lx(),jF(a),e.flags|=256,Pl(t,e,r,n),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function pj(t){return{baseLanes:t,cachePool:null,transitions:null}}function dW(t,e,r){var n=e.pendingProps,a=Ns.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ua(Ns,a&1),t===null)return lj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=AI(i,n,0,null),t=Km(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pj(r),e.memoizedState=mj,t):KF(e,i));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Ode(t,e,i,n,l,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=u0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=u0(l,s):(s=Km(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?pj(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=mj,n}return s=t.child,t=s.sibling,n=u0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function KF(t,e){return e=AI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cN(t,e,r,n){return n!==null&&jF(n),Ux(e,t.child,null,r),t=KF(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ode(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=m5(Error(cr(422))),cN(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=AI({mode:"visible",children:n.children},a,0,null),s=Km(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ux(e,t.child,null,i),e.child.memoizedState=pj(i),e.memoizedState=mj,s);if(!(e.mode&1))return cN(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(cr(419)),n=m5(s,n,void 0),cN(t,e,i,n)}if(l=(i&t.childLanes)!==0,ac||l){if(n=co,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,yA(t,a),gd(n,t,a,-1))}return YF(),n=m5(Error(cr(421))),cN(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=zde.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Rc=i0(a.nextSibling),Qc=e,ls=!0,ld=null,t!==null&&(wu[Nu++]=Jf,wu[Nu++]=Zf,wu[Nu++]=cp,Jf=t.id,Zf=t.overflow,cp=e),e=KF(e,n.children),e.flags|=4096,e)}function rL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),cj(t.return,e,r)}function p5(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function fW(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Pl(t,e,n.children,r),n=Ns.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rL(t,r,e);else if(t.tag===19)rL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ua(Ns,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&Z_(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),p5(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Z_(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}p5(e,!0,r,null,s);break;case"together":p5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function n_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),dp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(cr(153));if(e.child!==null){for(t=e.child,r=u0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=u0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Dde(t,e,r){switch(e.tag){case 3:uW(e),Lx();break;case 5:Mz(e);break;case 1:lc(e.type)&&q_(e);break;case 4:RF(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ua(X_,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ua(Ns,Ns.current&1),e.flags|=128,null):r&e.child.childLanes?dW(t,e,r):(Ua(Ns,Ns.current&1),t=bA(t,e,r),t!==null?t.sibling:null);Ua(Ns,Ns.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return fW(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ua(Ns,Ns.current),n)break;return null;case 22:case 23:return e.lanes=0,lW(t,e,r)}return bA(t,e,r)}var AW,gj,hW,mW;AW=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gj=function(){};hW=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Om(df.current);var s=null;switch(r){case"input":a=LP(t,a),n=LP(t,n),s=[];break;case"select":a=Ss({},a,{value:void 0}),n=Ss({},n,{value:void 0}),s=[];break;case"textarea":a=VP(t,a),n=VP(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=K_)}$P(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(s2.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(s2.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ga("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mW=function(t,e,r,n){r!==n&&(e.flags|=4)};function p1(t,e){if(!ls)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function qo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Rde(t,e,r){var n=e.pendingProps;switch(PF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(e),null;case 1:return lc(e.type)&&G_(),qo(e),null;case 3:return n=e.stateNode,Qx(),Ja(oc),Ja(hl),LF(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(oN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ld!==null&&(_j(ld),ld=null))),gj(t,e),qo(e),null;case 5:MF(e);var a=Om(g2.current);if(r=e.type,t!==null&&e.stateNode!=null)hW(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(cr(166));return qo(e),null}if(t=Om(df.current),oN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[tf]=e,n[m2]=s,t=(e.mode&1)!==0,r){case"dialog":Ga("cancel",n),Ga("close",n);break;case"iframe":case"object":case"embed":Ga("load",n);break;case"video":case"audio":for(a=0;a<Z1.length;a++)Ga(Z1[a],n);break;case"source":Ga("error",n);break;case"img":case"image":case"link":Ga("error",n),Ga("load",n);break;case"details":Ga("toggle",n);break;case"input":dM(n,s),Ga("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ga("invalid",n);break;case"textarea":AM(n,s),Ga("invalid",n)}$P(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&iN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&iN(n.textContent,l,t),a=["children",""+l]):s2.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ga("scroll",n)}switch(r){case"input":Jw(n),fM(n,s,!0);break;case"textarea":Jw(n),hM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=K_)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hq(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[tf]=e,t[m2]=n,AW(t,e,!1,!1),e.stateNode=t;e:{switch(i=KP(r,n),r){case"dialog":Ga("cancel",t),Ga("close",t),a=n;break;case"iframe":case"object":case"embed":Ga("load",t),a=n;break;case"video":case"audio":for(a=0;a<Z1.length;a++)Ga(Z1[a],t);a=n;break;case"source":Ga("error",t),a=n;break;case"img":case"image":case"link":Ga("error",t),Ga("load",t),a=n;break;case"details":Ga("toggle",t),a=n;break;case"input":dM(t,n),a=LP(t,n),Ga("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ss({},n,{value:void 0}),Ga("invalid",t);break;case"textarea":AM(t,n),a=VP(t,n),Ga("invalid",t);break;default:a=n}$P(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Gq(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$q(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&i2(t,c):typeof c=="number"&&i2(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(s2.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ga("scroll",t):c!=null&&mF(t,s,c,i))}switch(r){case"input":Jw(t),fM(t,n,!1);break;case"textarea":Jw(t),hM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+b0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?yx(t,!!n.multiple,s,!1):n.defaultValue!=null&&yx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=K_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qo(e),null;case 6:if(t&&e.stateNode!=null)mW(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(cr(166));if(r=Om(g2.current),Om(df.current),oN(e)){if(n=e.stateNode,r=e.memoizedProps,n[tf]=e,(s=n.nodeValue!==r)&&(t=Qc,t!==null))switch(t.tag){case 3:iN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tf]=e,e.stateNode=n}return qo(e),null;case 13:if(Ja(Ns),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ls&&Rc!==null&&e.mode&1&&!(e.flags&128))kz(),Lx(),e.flags|=98560,s=!1;else if(s=oN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(cr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(cr(317));s[tf]=e}else Lx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qo(e),s=!1}else ld!==null&&(_j(ld),ld=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ns.current&1?Oi===0&&(Oi=3):YF())),e.updateQueue!==null&&(e.flags|=4),qo(e),null);case 4:return Qx(),gj(t,e),t===null&&A2(e.stateNode.containerInfo),qo(e),null;case 10:return FF(e.type._context),qo(e),null;case 17:return lc(e.type)&&G_(),qo(e),null;case 19:if(Ja(Ns),s=e.memoizedState,s===null)return qo(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)p1(s,!1);else{if(Oi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Z_(t),i!==null){for(e.flags|=128,p1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ua(Ns,Ns.current&1|2),e.child}t=t.sibling}s.tail!==null&&Js()>Hx&&(e.flags|=128,n=!0,p1(s,!1),e.lanes=4194304)}else{if(!n)if(t=Z_(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),p1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ls)return qo(e),null}else 2*Js()-s.renderingStartTime>Hx&&r!==1073741824&&(e.flags|=128,n=!0,p1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Js(),e.sibling=null,r=Ns.current,Ua(Ns,n?r&1|2:r&1),e):(qo(e),null);case 22:case 23:return XF(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Pc&1073741824&&(qo(e),e.subtreeFlags&6&&(e.flags|=8192)):qo(e),null;case 24:return null;case 25:return null}throw Error(cr(156,e.tag))}function Mde(t,e){switch(PF(e),e.tag){case 1:return lc(e.type)&&G_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qx(),Ja(oc),Ja(hl),LF(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MF(e),null;case 13:if(Ja(Ns),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(cr(340));Lx()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ja(Ns),null;case 4:return Qx(),null;case 10:return FF(e.type._context),null;case 22:case 23:return XF(),null;case 24:return null;default:return null}}var uN=!1,ll=!1,Lde=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function cx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Rs(t,e,n)}else r.current=null}function xj(t,e,r){try{r()}catch(n){Rs(t,e,n)}}var nL=!1;function Ude(t,e){if(tj=V_,t=yz(),IF(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var A;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==s||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(A=f.firstChild)!==null;)h=f,f=A;for(;;){if(f===t)break t;if(h===r&&++u===a&&(l=i),h===s&&++d===n&&(c=i),(A=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=A}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rj={focusedElem:t,selectionRange:r},V_=!1,Pr=e;Pr!==null;)if(e=Pr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pr=t;else for(;Pr!==null;){e=Pr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:id(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(cr(163))}}catch(w){Rs(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Pr=t;break}Pr=e.return}return m=nL,nL=!1,m}function Iy(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&xj(e,r,s)}a=a.next}while(a!==n)}}function dI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function vj(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function pW(t){var e=t.alternate;e!==null&&(t.alternate=null,pW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tf],delete e[m2],delete e[sj],delete e[wde],delete e[Nde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gW(t){return t.tag===5||t.tag===3||t.tag===4}function aL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=K_));else if(n!==4&&(t=t.child,t!==null))for(yj(t,e,r),t=t.sibling;t!==null;)yj(t,e,r),t=t.sibling}function bj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(bj(t,e,r),t=t.sibling;t!==null;)bj(t,e,r),t=t.sibling}var Io=null,od=!1;function mh(t,e,r){for(r=r.child;r!==null;)xW(t,e,r),r=r.sibling}function xW(t,e,r){if(uf&&typeof uf.onCommitFiberUnmount=="function")try{uf.onCommitFiberUnmount(nI,r)}catch{}switch(r.tag){case 5:ll||cx(r,e);case 6:var n=Io,a=od;Io=null,mh(t,e,r),Io=n,od=a,Io!==null&&(od?(t=Io,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Io.removeChild(r.stateNode));break;case 18:Io!==null&&(od?(t=Io,r=r.stateNode,t.nodeType===8?c5(t.parentNode,r):t.nodeType===1&&c5(t,r),u2(t)):c5(Io,r.stateNode));break;case 4:n=Io,a=od,Io=r.stateNode.containerInfo,od=!0,mh(t,e,r),Io=n,od=a;break;case 0:case 11:case 14:case 15:if(!ll&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&xj(r,e,i),a=a.next}while(a!==n)}mh(t,e,r);break;case 1:if(!ll&&(cx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Rs(r,e,l)}mh(t,e,r);break;case 21:mh(t,e,r);break;case 22:r.mode&1?(ll=(n=ll)||r.memoizedState!==null,mh(t,e,r),ll=n):mh(t,e,r);break;default:mh(t,e,r)}}function sL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Lde),e.forEach(function(n){var a=Wde.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ju(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Io=l.stateNode,od=!1;break e;case 3:Io=l.stateNode.containerInfo,od=!0;break e;case 4:Io=l.stateNode.containerInfo,od=!0;break e}l=l.return}if(Io===null)throw Error(cr(160));xW(s,i,a),Io=null,od=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Rs(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vW(e,t),e=e.sibling}function vW(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ju(e,t),Kd(t),n&4){try{Iy(3,t,t.return),dI(3,t)}catch(p){Rs(t,t.return,p)}try{Iy(5,t,t.return)}catch(p){Rs(t,t.return,p)}}break;case 1:Ju(e,t),Kd(t),n&512&&r!==null&&cx(r,r.return);break;case 5:if(Ju(e,t),Kd(t),n&512&&r!==null&&cx(r,r.return),t.flags&32){var a=t.stateNode;try{i2(a,"")}catch(p){Rs(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Qq(a,s),KP(l,i);var u=KP(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?Gq(a,f):d==="dangerouslySetInnerHTML"?$q(a,f):d==="children"?i2(a,f):mF(a,d,f,u)}switch(l){case"input":UP(a,s);break;case"textarea":Vq(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?yx(a,!!s.multiple,A,!1):h!==!!s.multiple&&(s.defaultValue!=null?yx(a,!!s.multiple,s.defaultValue,!0):yx(a,!!s.multiple,s.multiple?[]:"",!1))}a[m2]=s}catch(p){Rs(t,t.return,p)}}break;case 6:if(Ju(e,t),Kd(t),n&4){if(t.stateNode===null)throw Error(cr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){Rs(t,t.return,p)}}break;case 3:if(Ju(e,t),Kd(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{u2(e.containerInfo)}catch(p){Rs(t,t.return,p)}break;case 4:Ju(e,t),Kd(t);break;case 13:Ju(e,t),Kd(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(zF=Js())),n&4&&sL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ll=(u=ll)||d,Ju(e,t),ll=u):Ju(e,t),Kd(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Pr=t,d=t.child;d!==null;){for(f=Pr=d;Pr!==null;){switch(h=Pr,A=h.child,h.tag){case 0:case 11:case 14:case 15:Iy(4,h,h.return);break;case 1:cx(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Rs(n,r,p)}}break;case 5:cx(h,h.return);break;case 22:if(h.memoizedState!==null){oL(f);continue}}A!==null?(A.return=h,Pr=A):oL(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Kq("display",i))}catch(p){Rs(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Rs(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ju(e,t),Kd(t),n&4&&sL(t);break;case 21:break;default:Ju(e,t),Kd(t)}}function Kd(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(gW(r)){var n=r;break e}r=r.return}throw Error(cr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(i2(a,""),n.flags&=-33);var s=aL(t);bj(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=aL(t);yj(t,l,i);break;default:throw Error(cr(161))}}catch(c){Rs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qde(t,e,r){Pr=t,yW(t)}function yW(t,e,r){for(var n=(t.mode&1)!==0;Pr!==null;){var a=Pr,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||uN;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ll;l=uN;var u=ll;if(uN=i,(ll=c)&&!u)for(Pr=a;Pr!==null;)i=Pr,c=i.child,i.tag===22&&i.memoizedState!==null?lL(a):c!==null?(c.return=i,Pr=c):lL(a);for(;s!==null;)Pr=s,yW(s),s=s.sibling;Pr=a,uN=l,ll=u}iL(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Pr=s):iL(t)}}function iL(t){for(;Pr!==null;){var e=Pr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ll||dI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ll)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:id(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$M(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}$M(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&u2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(cr(163))}ll||e.flags&512&&vj(e)}catch(h){Rs(e,e.return,h)}}if(e===t){Pr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Pr=r;break}Pr=e.return}}function oL(t){for(;Pr!==null;){var e=Pr;if(e===t){Pr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Pr=r;break}Pr=e.return}}function lL(t){for(;Pr!==null;){var e=Pr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{dI(4,e)}catch(c){Rs(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Rs(e,a,c)}}var s=e.return;try{vj(e)}catch(c){Rs(e,s,c)}break;case 5:var i=e.return;try{vj(e)}catch(c){Rs(e,i,c)}}}catch(c){Rs(e,e.return,c)}if(e===t){Pr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Pr=l;break}Pr=e.return}}var Vde=Math.ceil,rE=DA.ReactCurrentDispatcher,GF=DA.ReactCurrentOwner,ju=DA.ReactCurrentBatchConfig,Kn=0,co=null,fi=null,Uo=0,Pc=0,ux=U0(0),Oi=0,b2=null,dp=0,fI=0,qF=0,By=null,rc=null,zF=0,Hx=1/0,Gf=null,nE=!1,wj=null,l0=null,dN=!1,zh=null,aE=0,Py=0,Nj=null,a_=-1,s_=0;function Rl(){return Kn&6?Js():a_!==-1?a_:a_=Js()}function c0(t){return t.mode&1?Kn&2&&Uo!==0?Uo&-Uo:_de.transition!==null?(s_===0&&(s_=az()),s_):(t=ba,t!==0||(t=window.event,t=t===void 0?16:dz(t.type)),t):1}function gd(t,e,r,n){if(50<Py)throw Py=0,Nj=null,Error(cr(185));Eb(t,r,n),(!(Kn&2)||t!==co)&&(t===co&&(!(Kn&2)&&(fI|=r),Oi===4&&Mh(t,Uo)),cc(t,n),r===1&&Kn===0&&!(e.mode&1)&&(Hx=Js()+500,lI&&Q0()))}function cc(t,e){var r=t.callbackNode;_ue(t,e);var n=Q_(t,t===co?Uo:0);if(n===0)r!==null&&gM(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&gM(r),e===1)t.tag===0?Cde(cL.bind(null,t)):Pz(cL.bind(null,t)),yde(function(){!(Kn&6)&&Q0()}),r=null;else{switch(sz(n)){case 1:r=yF;break;case 4:r=rz;break;case 16:r=U_;break;case 536870912:r=nz;break;default:r=U_}r=IW(r,bW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function bW(t,e){if(a_=-1,s_=0,Kn&6)throw Error(cr(327));var r=t.callbackNode;if(_x()&&t.callbackNode!==r)return null;var n=Q_(t,t===co?Uo:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sE(t,n);else{e=n;var a=Kn;Kn|=2;var s=NW();(co!==t||Uo!==e)&&(Gf=null,Hx=Js()+500,$m(t,e));do try{Kde();break}catch(l){wW(t,l)}while(!0);kF(),rE.current=s,Kn=a,fi!==null?e=0:(co=null,Uo=0,e=Oi)}if(e!==0){if(e===2&&(a=XP(t),a!==0&&(n=a,e=Cj(t,a))),e===1)throw r=b2,$m(t,0),Mh(t,n),cc(t,Js()),r;if(e===6)Mh(t,n);else{if(a=t.current.alternate,!(n&30)&&!Hde(a)&&(e=sE(t,n),e===2&&(s=XP(t),s!==0&&(n=s,e=Cj(t,s))),e===1))throw r=b2,$m(t,0),Mh(t,n),cc(t,Js()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(cr(345));case 2:gm(t,rc,Gf);break;case 3:if(Mh(t,n),(n&130023424)===n&&(e=zF+500-Js(),10<e)){if(Q_(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Rl(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=aj(gm.bind(null,t,rc,Gf),e);break}gm(t,rc,Gf);break;case 4:if(Mh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-pd(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=Js()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vde(n/1960))-n,10<n){t.timeoutHandle=aj(gm.bind(null,t,rc,Gf),n);break}gm(t,rc,Gf);break;case 5:gm(t,rc,Gf);break;default:throw Error(cr(329))}}}return cc(t,Js()),t.callbackNode===r?bW.bind(null,t):null}function Cj(t,e){var r=By;return t.current.memoizedState.isDehydrated&&($m(t,e).flags|=256),t=sE(t,e),t!==2&&(e=rc,rc=r,e!==null&&_j(e)),t}function _j(t){rc===null?rc=t:rc.push.apply(rc,t)}function Hde(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Nd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mh(t,e){for(e&=~qF,e&=~fI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-pd(e),n=1<<r;t[r]=-1,e&=~n}}function cL(t){if(Kn&6)throw Error(cr(327));_x();var e=Q_(t,0);if(!(e&1))return cc(t,Js()),null;var r=sE(t,e);if(t.tag!==0&&r===2){var n=XP(t);n!==0&&(e=n,r=Cj(t,n))}if(r===1)throw r=b2,$m(t,0),Mh(t,e),cc(t,Js()),r;if(r===6)throw Error(cr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gm(t,rc,Gf),cc(t,Js()),null}function WF(t,e){var r=Kn;Kn|=1;try{return t(e)}finally{Kn=r,Kn===0&&(Hx=Js()+500,lI&&Q0())}}function fp(t){zh!==null&&zh.tag===0&&!(Kn&6)&&_x();var e=Kn;Kn|=1;var r=ju.transition,n=ba;try{if(ju.transition=null,ba=1,t)return t()}finally{ba=n,ju.transition=r,Kn=e,!(Kn&6)&&Q0()}}function XF(){Pc=ux.current,Ja(ux)}function $m(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vde(r)),fi!==null)for(r=fi.return;r!==null;){var n=r;switch(PF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&G_();break;case 3:Qx(),Ja(oc),Ja(hl),LF();break;case 5:MF(n);break;case 4:Qx();break;case 13:Ja(Ns);break;case 19:Ja(Ns);break;case 10:FF(n.type._context);break;case 22:case 23:XF()}r=r.return}if(co=t,fi=t=u0(t.current,null),Uo=Pc=e,Oi=0,b2=null,qF=fI=dp=0,rc=By=null,Fm!==null){for(e=0;e<Fm.length;e++)if(r=Fm[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}Fm=null}return t}function wW(t,e){do{var r=fi;try{if(kF(),t_.current=tE,eE){for(var n=Es.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}eE=!1}if(up=0,ao=Ei=Es=null,Sy=!1,x2=0,GF.current=null,r===null||r.return===null){Oi=1,b2=e,fi=null;break}e:{var s=t,i=r.return,l=r,c=e;if(e=Uo,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=XM(i);if(A!==null){A.flags&=-257,YM(A,i,l,s,e),A.mode&1&&WM(s,u,e),e=A,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){WM(s,u,e),YF();break e}c=Error(cr(426))}}else if(ls&&l.mode&1){var g=XM(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),YM(g,i,l,s,e),jF(Vx(c,l));break e}}s=c=Vx(c,l),Oi!==4&&(Oi=2),By===null?By=[s]:By.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=sW(s,c,e);HM(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(l0===null||!l0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=iW(s,l,e);HM(s,w);break e}}s=s.return}while(s!==null)}_W(r)}catch(B){e=B,fi===r&&r!==null&&(fi=r=r.return);continue}break}while(!0)}function NW(){var t=rE.current;return rE.current=tE,t===null?tE:t}function YF(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),co===null||!(dp&268435455)&&!(fI&268435455)||Mh(co,Uo)}function sE(t,e){var r=Kn;Kn|=2;var n=NW();(co!==t||Uo!==e)&&(Gf=null,$m(t,e));do try{$de();break}catch(a){wW(t,a)}while(!0);if(kF(),Kn=r,rE.current=n,fi!==null)throw Error(cr(261));return co=null,Uo=0,Oi}function $de(){for(;fi!==null;)CW(fi)}function Kde(){for(;fi!==null&&!pue();)CW(fi)}function CW(t){var e=SW(t.alternate,t,Pc);t.memoizedProps=t.pendingProps,e===null?_W(t):fi=e,GF.current=null}function _W(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Mde(r,e),r!==null){r.flags&=32767,fi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oi=6,fi=null;return}}else if(r=Rde(r,e,Pc),r!==null){fi=r;return}if(e=e.sibling,e!==null){fi=e;return}fi=e=t}while(e!==null);Oi===0&&(Oi=5)}function gm(t,e,r){var n=ba,a=ju.transition;try{ju.transition=null,ba=1,Gde(t,e,r,n)}finally{ju.transition=a,ba=n}return null}function Gde(t,e,r,n){do _x();while(zh!==null);if(Kn&6)throw Error(cr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(cr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Eue(t,s),t===co&&(fi=co=null,Uo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||dN||(dN=!0,IW(U_,function(){return _x(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ju.transition,ju.transition=null;var i=ba;ba=1;var l=Kn;Kn|=4,GF.current=null,Ude(t,r),vW(r,t),fde(rj),V_=!!tj,rj=tj=null,t.current=r,Qde(r),gue(),Kn=l,ba=i,ju.transition=s}else t.current=r;if(dN&&(dN=!1,zh=t,aE=a),s=t.pendingLanes,s===0&&(l0=null),yue(r.stateNode),cc(t,Js()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(nE)throw nE=!1,t=wj,wj=null,t;return aE&1&&t.tag!==0&&_x(),s=t.pendingLanes,s&1?t===Nj?Py++:(Py=0,Nj=t):Py=0,Q0(),null}function _x(){if(zh!==null){var t=sz(aE),e=ju.transition,r=ba;try{if(ju.transition=null,ba=16>t?16:t,zh===null)var n=!1;else{if(t=zh,zh=null,aE=0,Kn&6)throw Error(cr(331));var a=Kn;for(Kn|=4,Pr=t.current;Pr!==null;){var s=Pr,i=s.child;if(Pr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Pr=u;Pr!==null;){var d=Pr;switch(d.tag){case 0:case 11:case 15:Iy(8,d,s)}var f=d.child;if(f!==null)f.return=d,Pr=f;else for(;Pr!==null;){d=Pr;var h=d.sibling,A=d.return;if(pW(d),d===u){Pr=null;break}if(h!==null){h.return=A,Pr=h;break}Pr=A}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Pr=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Pr=i;else e:for(;Pr!==null;){if(s=Pr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Iy(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Pr=x;break e}Pr=s.return}}var y=t.current;for(Pr=y;Pr!==null;){i=Pr;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Pr=b;else e:for(i=y;Pr!==null;){if(l=Pr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dI(9,l)}}catch(B){Rs(l,l.return,B)}if(l===i){Pr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Pr=w;break e}Pr=l.return}}if(Kn=a,Q0(),uf&&typeof uf.onPostCommitFiberRoot=="function")try{uf.onPostCommitFiberRoot(nI,t)}catch{}n=!0}return n}finally{ba=r,ju.transition=e}}return!1}function uL(t,e,r){e=Vx(r,e),e=sW(t,e,1),t=o0(t,e,1),e=Rl(),t!==null&&(Eb(t,1,e),cc(t,e))}function Rs(t,e,r){if(t.tag===3)uL(t,t,r);else for(;e!==null;){if(e.tag===3){uL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(l0===null||!l0.has(n))){t=Vx(r,t),t=iW(e,t,1),e=o0(e,t,1),t=Rl(),e!==null&&(Eb(e,1,t),cc(e,t));break}}e=e.return}}function qde(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Rl(),t.pingedLanes|=t.suspendedLanes&r,co===t&&(Uo&r)===r&&(Oi===4||Oi===3&&(Uo&130023424)===Uo&&500>Js()-zF?$m(t,0):qF|=r),cc(t,e)}function EW(t,e){e===0&&(t.mode&1?(e=tN,tN<<=1,!(tN&130023424)&&(tN=4194304)):e=1);var r=Rl();t=yA(t,e),t!==null&&(Eb(t,e,r),cc(t,r))}function zde(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),EW(t,r)}function Wde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(cr(314))}n!==null&&n.delete(e),EW(t,r)}var SW;SW=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||oc.current)ac=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ac=!1,Dde(t,e,r);ac=!!(t.flags&131072)}else ac=!1,ls&&e.flags&1048576&&jz(e,W_,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;n_(t,e),t=e.pendingProps;var a=Mx(e,hl.current);Cx(e,r),a=QF(null,e,n,t,a,r);var s=VF();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lc(n)?(s=!0,q_(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,DF(e),a.updater=uI,e.stateNode=a,a._reactInternals=e,dj(e,n,t,r),e=hj(null,e,n,!0,s,r)):(e.tag=0,ls&&s&&BF(e),Pl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(n_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Yde(n),t=id(n,t),a){case 0:e=Aj(null,e,n,t,r);break e;case 1:e=eL(null,e,n,t,r);break e;case 11:e=JM(null,e,n,t,r);break e;case 14:e=ZM(null,e,n,id(n.type,t),r);break e}throw Error(cr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:id(n,a),Aj(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:id(n,a),eL(t,e,n,a,r);case 3:e:{if(uW(e),t===null)throw Error(cr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,Rz(t,e),J_(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Vx(Error(cr(423)),e),e=tL(t,e,n,r,a);break e}else if(n!==a){a=Vx(Error(cr(424)),e),e=tL(t,e,n,r,a);break e}else for(Rc=i0(e.stateNode.containerInfo.firstChild),Qc=e,ls=!0,ld=null,r=Oz(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lx(),n===a){e=bA(t,e,r);break e}Pl(t,e,n,r)}e=e.child}return e;case 5:return Mz(e),t===null&&lj(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,nj(n,a)?i=null:s!==null&&nj(n,s)&&(e.flags|=32),cW(t,e),Pl(t,e,i,r),e.child;case 6:return t===null&&lj(e),null;case 13:return dW(t,e,r);case 4:return RF(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ux(e,null,n,r):Pl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:id(n,a),JM(t,e,n,a,r);case 7:return Pl(t,e,e.pendingProps,r),e.child;case 8:return Pl(t,e,e.pendingProps.children,r),e.child;case 12:return Pl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,Ua(X_,n._currentValue),n._currentValue=i,s!==null)if(Nd(s.value,i)){if(s.children===a.children&&!oc.current){e=bA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=oA(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),cj(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(cr(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),cj(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Pl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Cx(e,r),a=Ou(a),n=n(a),e.flags|=1,Pl(t,e,n,r),e.child;case 14:return n=e.type,a=id(n,e.pendingProps),a=id(n.type,a),ZM(t,e,n,a,r);case 15:return oW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:id(n,a),n_(t,e),e.tag=1,lc(n)?(t=!0,q_(e)):t=!1,Cx(e,r),aW(e,n,a),dj(e,n,a,r),hj(null,e,n,!0,t,r);case 19:return fW(t,e,r);case 22:return lW(t,e,r)}throw Error(cr(156,e.tag))};function IW(t,e){return tz(t,e)}function Xde(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _u(t,e,r,n){return new Xde(t,e,r,n)}function JF(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yde(t){if(typeof t=="function")return JF(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gF)return 11;if(t===xF)return 14}return 2}function u0(t,e){var r=t.alternate;return r===null?(r=_u(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function i_(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")JF(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ex:return Km(r.children,a,s,e);case pF:i=8,a|=8;break;case OP:return t=_u(12,r,e,a|2),t.elementType=OP,t.lanes=s,t;case DP:return t=_u(13,r,e,a),t.elementType=DP,t.lanes=s,t;case RP:return t=_u(19,r,e,a),t.elementType=RP,t.lanes=s,t;case Mq:return AI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dq:i=10;break e;case Rq:i=9;break e;case gF:i=11;break e;case xF:i=14;break e;case jh:i=16,n=null;break e}throw Error(cr(130,t==null?t:typeof t,""))}return e=_u(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Km(t,e,r,n){return t=_u(7,t,n,e),t.lanes=r,t}function AI(t,e,r,n){return t=_u(22,t,n,e),t.elementType=Mq,t.lanes=r,t.stateNode={isHidden:!1},t}function g5(t,e,r){return t=_u(6,t,null,e),t.lanes=r,t}function x5(t,e,r){return e=_u(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jde(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J3(0),this.expirationTimes=J3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J3(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ZF(t,e,r,n,a,s,i,l,c){return t=new Jde(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_u(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DF(s),t}function Zde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function BW(t){if(!t)return w0;t=t._reactInternals;e:{if(Up(t)!==t||t.tag!==1)throw Error(cr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(cr(171))}if(t.tag===1){var r=t.type;if(lc(r))return Bz(t,r,e)}return e}function PW(t,e,r,n,a,s,i,l,c){return t=ZF(r,n,!0,t,a,s,i,l,c),t.context=BW(null),r=t.current,n=Rl(),a=c0(r),s=oA(n,a),s.callback=e??null,o0(r,s,a),t.current.lanes=a,Eb(t,a,n),cc(t,n),t}function hI(t,e,r,n){var a=e.current,s=Rl(),i=c0(a);return r=BW(r),e.context===null?e.context=r:e.pendingContext=r,e=oA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=o0(a,e,i),t!==null&&(gd(t,a,i,s),e_(t,a,i)),i}function iE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eO(t,e){dL(t,e),(t=t.alternate)&&dL(t,e)}function efe(){return null}var jW=typeof reportError=="function"?reportError:function(t){console.error(t)};function tO(t){this._internalRoot=t}mI.prototype.render=tO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(cr(409));hI(t,e,null,null)};mI.prototype.unmount=tO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fp(function(){hI(null,t,null,null)}),e[vA]=null}};function mI(t){this._internalRoot=t}mI.prototype.unstable_scheduleHydration=function(t){if(t){var e=lz();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Rh.length&&e!==0&&e<Rh[r].priority;r++);Rh.splice(r,0,t),r===0&&uz(t)}};function rO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fL(){}function tfe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=iE(i);s.call(u)}}var i=PW(e,n,t,0,null,!1,!1,"",fL);return t._reactRootContainer=i,t[vA]=i.current,A2(t.nodeType===8?t.parentNode:t),fp(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=iE(c);l.call(u)}}var c=ZF(t,0,!1,null,null,!1,!1,"",fL);return t._reactRootContainer=c,t[vA]=c.current,A2(t.nodeType===8?t.parentNode:t),fp(function(){hI(e,c,r,n)}),c}function gI(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var l=a;a=function(){var c=iE(i);l.call(c)}}hI(e,i,t,a)}else i=tfe(r,e,t,a,n);return iE(i)}iz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=J1(e.pendingLanes);r!==0&&(bF(e,r|1),cc(e,Js()),!(Kn&6)&&(Hx=Js()+500,Q0()))}break;case 13:fp(function(){var n=yA(t,1);if(n!==null){var a=Rl();gd(n,t,1,a)}}),eO(t,1)}};wF=function(t){if(t.tag===13){var e=yA(t,134217728);if(e!==null){var r=Rl();gd(e,t,134217728,r)}eO(t,134217728)}};oz=function(t){if(t.tag===13){var e=c0(t),r=yA(t,e);if(r!==null){var n=Rl();gd(r,t,e,n)}eO(t,e)}};lz=function(){return ba};cz=function(t,e){var r=ba;try{return ba=t,e()}finally{ba=r}};qP=function(t,e,r){switch(e){case"input":if(UP(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=oI(n);if(!a)throw Error(cr(90));Uq(n),UP(n,a)}}}break;case"textarea":Vq(t,r);break;case"select":e=r.value,e!=null&&yx(t,!!r.multiple,e,!1)}};Wq=WF;Xq=fp;var rfe={usingClientEntryPoint:!1,Events:[Ib,ax,oI,qq,zq,WF]},g1={findFiberByHostInstance:km,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nfe={bundleType:g1.bundleType,version:g1.version,rendererPackageName:g1.rendererPackageName,rendererConfig:g1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:DA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zq(t),t===null?null:t.stateNode},findFiberByHostInstance:g1.findFiberByHostInstance||efe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fN.isDisabled&&fN.supportsFiber)try{nI=fN.inject(nfe),uf=fN}catch{}}zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rfe;zc.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rO(e))throw Error(cr(200));return Zde(t,e,null,r)};zc.createRoot=function(t,e){if(!rO(t))throw Error(cr(299));var r=!1,n="",a=jW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ZF(t,1,!1,null,null,r,!1,n,a),t[vA]=e.current,A2(t.nodeType===8?t.parentNode:t),new tO(e)};zc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(cr(188)):(t=Object.keys(t).join(","),Error(cr(268,t)));return t=Zq(e),t=t===null?null:t.stateNode,t};zc.flushSync=function(t){return fp(t)};zc.hydrate=function(t,e,r){if(!pI(e))throw Error(cr(200));return gI(null,t,e,!0,r)};zc.hydrateRoot=function(t,e,r){if(!rO(t))throw Error(cr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=jW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=PW(e,null,t,1,r??null,a,!1,s,i),t[vA]=e.current,A2(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new mI(e)};zc.render=function(t,e,r){if(!pI(e))throw Error(cr(200));return gI(null,t,e,!1,r)};zc.unmountComponentAtNode=function(t){if(!pI(t))throw Error(cr(40));return t._reactRootContainer?(fp(function(){gI(null,null,t,!1,function(){t._reactRootContainer=null,t[vA]=null})}),!0):!1};zc.unstable_batchedUpdates=WF;zc.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!pI(r))throw Error(cr(200));if(t==null||t._reactInternals===void 0)throw Error(cr(38));return gI(t,e,r,!1,n)};zc.version="18.3.1-next-f1338f8080-20240426";function TW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TW)}catch(t){console.error(t)}}TW(),Tq.exports=zc;var xd=Tq.exports,AL=xd;kP.createRoot=AL.createRoot,kP.hydrateRoot=AL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hL="popstate";function afe(t={}){function e(n,a){let{pathname:s,search:i,hash:l}=n.location;return Ej("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:w2(a)}return ife(e,r,null,t)}function As(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sfe(){return Math.random().toString(36).substring(2,10)}function mL(t,e){return{usr:t.state,key:t.key,idx:e}}function Ej(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?gv(e):e,state:r,key:e&&e.key||n||sfe()}}function w2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function ife(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function h(g,x){l="PUSH";let y=Ej(p.location,g,x);u=d()+1;let b=mL(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function A(g,x){l="REPLACE";let y=Ej(p.location,g,x);u=d();let b=mL(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return ofe(g)}let p={get action(){return l},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(hL,f),c=g,()=>{a.removeEventListener(hL,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:A,go(g){return i.go(g)}};return p}function ofe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),As(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:w2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function kW(t,e,r="/"){return lfe(t,e,r,!1)}function lfe(t,e,r,n){let a=typeof e=="string"?gv(e):e,s=wA(a.pathname||"/",r);if(s==null)return null;let i=FW(t);cfe(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=yfe(s);l=xfe(i[c],u,n)}return l}function FW(t,e=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;As(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=lA([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(As(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),FW(i.children,e,h,f,c)),!(i.path==null&&!i.index)&&e.push({path:f,score:pfe(f,i.index),routesMeta:h})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of OW(i.path))s(i,l,!0,u)}),e}function OW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=OW(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function cfe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:gfe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ufe=/^:[\w-]+$/,dfe=3,ffe=2,Afe=1,hfe=10,mfe=-2,pL=t=>t==="*";function pfe(t,e){let r=t.split("/"),n=r.length;return r.some(pL)&&(n+=mfe),e&&(n+=ffe),r.filter(a=>!pL(a)).reduce((a,s)=>a+(ufe.test(s)?dfe:s===""?Afe:hfe),n)}function gfe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function xfe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=oE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=oE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:lA([s,f.pathname]),pathnameBase:Cfe(lA([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=lA([s,f.pathnameBase]))}return i}function oE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=vfe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let m=l[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const A=l[h];return f&&!A?u[d]=void 0:u[d]=(A||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function vfe(t,e=!1,r=!0){Cd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function yfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function wA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function bfe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?gv(t):t;return{pathname:r?r.startsWith("/")?r:wfe(r,e):e,search:_fe(n),hash:Efe(a)}}function wfe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function v5(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nfe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nO(t){let e=Nfe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aO(t,e,r,n=!1){let a;typeof t=="string"?a=gv(t):(a={...t},As(!a.pathname||!a.pathname.includes("?"),v5("?","pathname","search",a)),As(!a.pathname||!a.pathname.includes("#"),v5("#","pathname","hash",a)),As(!a.search||!a.search.includes("#"),v5("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let f=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=bfe(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var lA=t=>t.join("/").replace(/\/\/+/g,"/"),Cfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_fe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Efe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var DW=["POST","PUT","PATCH","DELETE"];new Set(DW);var Ife=["GET",...DW];new Set(Ife);var xv=v.createContext(null);xv.displayName="DataRouter";var xI=v.createContext(null);xI.displayName="DataRouterState";v.createContext(!1);var RW=v.createContext({isTransitioning:!1});RW.displayName="ViewTransition";var Bfe=v.createContext(new Map);Bfe.displayName="Fetchers";var Pfe=v.createContext(null);Pfe.displayName="Await";var Pd=v.createContext(null);Pd.displayName="Navigation";var Pb=v.createContext(null);Pb.displayName="Location";var jd=v.createContext({outlet:null,matches:[],isDataRoute:!1});jd.displayName="Route";var sO=v.createContext(null);sO.displayName="RouteError";function jfe(t,{relative:e}={}){As(vv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Pd),{hash:a,pathname:s,search:i}=Tb(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:lA([r,s])),n.createHref({pathname:l,search:i,hash:a})}function vv(){return v.useContext(Pb)!=null}function RA(){return As(vv(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Pb).location}var MW="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LW(t){v.useContext(Pd).static||v.useLayoutEffect(t)}function jb(){let{isDataRoute:t}=v.useContext(jd);return t?Gfe():Tfe()}function Tfe(){As(vv(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(xv),{basename:e,navigator:r}=v.useContext(Pd),{matches:n}=v.useContext(jd),{pathname:a}=RA(),s=JSON.stringify(nO(n)),i=v.useRef(!1);return LW(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(Cd(i.current,MW),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=aO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:lA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var kfe=v.createContext(null);function Ffe(t){let e=v.useContext(jd).outlet;return e&&v.createElement(kfe.Provider,{value:t},e)}function Tb(t,{relative:e}={}){let{matches:r}=v.useContext(jd),{pathname:n}=RA(),a=JSON.stringify(nO(r));return v.useMemo(()=>aO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function Ofe(t,e){return UW(t,e)}function UW(t,e,r,n){var x;As(vv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(Pd),{matches:s}=v.useContext(jd),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";QW(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=RA(),h;if(e){let y=typeof e=="string"?gv(e):e;As(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=f;let A=h.pathname||"/",m=A;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=kW(t,{pathname:m});Cd(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Cd(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Ufe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:lA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:lA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(Pb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function Dfe(){let t=Kfe(),e=Sfe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var Rfe=v.createElement(Dfe,null),Mfe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(jd.Provider,{value:this.props.routeContext},v.createElement(sO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Lfe({routeContext:t,match:e,children:r}){let n=v.useContext(xv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(jd.Provider,{value:t},r)}function Ufe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);As(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,h=!1,A=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,A=u.route.errorElement||Rfe,i&&(l<0&&d===0?(QW("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return f?x=A:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(Lfe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(Mfe,{location:r.location,revalidation:r.revalidation,component:A,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function iO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qfe(t){let e=v.useContext(xv);return As(e,iO(t)),e}function Vfe(t){let e=v.useContext(xI);return As(e,iO(t)),e}function Hfe(t){let e=v.useContext(jd);return As(e,iO(t)),e}function oO(t){let e=Hfe(t),r=e.matches[e.matches.length-1];return As(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function $fe(){return oO("useRouteId")}function Kfe(){var n;let t=v.useContext(sO),e=Vfe("useRouteError"),r=oO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Gfe(){let{router:t}=Qfe("useNavigate"),e=oO("useNavigate"),r=v.useRef(!1);return LW(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{Cd(r.current,MW),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var gL={};function QW(t,e,r){!e&&!gL[t]&&(gL[t]=!0,Cd(!1,r))}v.memo(qfe);function qfe({routes:t,future:e,state:r}){return UW(t,void 0,r,e)}function xm({to:t,replace:e,state:r,relative:n}){As(vv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(Pd);Cd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(jd),{pathname:i}=RA(),l=jb(),c=aO(t,nO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function VW(t){return Ffe(t.context)}function cn(t){As(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zfe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){As(!vv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=gv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,A=v.useMemo(()=>{let m=wA(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:h},navigationType:n}},[i,c,u,d,f,h,n]);return Cd(A!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:v.createElement(Pd.Provider,{value:l},v.createElement(Pb.Provider,{children:e,value:A}))}function Wfe({children:t,location:e}){return Ofe(Sj(t),e)}function Sj(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,Sj(n.props.children,s));return}As(n.type===cn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),As(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Sj(n.props.children,s)),r.push(i)}),r}var o_="get",l_="application/x-www-form-urlencoded";function vI(t){return t!=null&&typeof t.tagName=="string"}function Xfe(t){return vI(t)&&t.tagName.toLowerCase()==="button"}function Yfe(t){return vI(t)&&t.tagName.toLowerCase()==="form"}function Jfe(t){return vI(t)&&t.tagName.toLowerCase()==="input"}function Zfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eAe(t,e){return t.button===0&&(!e||e==="_self")&&!Zfe(t)}var AN=null;function tAe(){if(AN===null)try{new FormData(document.createElement("form"),0),AN=!1}catch{AN=!0}return AN}var rAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y5(t){return t!=null&&!rAe.has(t)?(Cd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${l_}"`),null):t}function nAe(t,e){let r,n,a,s,i;if(Yfe(t)){let l=t.getAttribute("action");n=l?wA(l,e):null,r=t.getAttribute("method")||o_,a=y5(t.getAttribute("enctype"))||l_,s=new FormData(t)}else if(Xfe(t)||Jfe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?wA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||o_,a=y5(t.getAttribute("formenctype"))||y5(l.getAttribute("enctype"))||l_,s=new FormData(l,t),!tAe()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(vI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=o_,n=null,a=l_,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aAe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&wA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function sAe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iAe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oAe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await sAe(s,r);return i.links?i.links():[]}return[]}));return dAe(n.flat(1).filter(iAe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function xL(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function lAe(t,e,{includeHydrateFallback:r}={}){return cAe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function cAe(t){return[...new Set(t)]}function uAe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function dAe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(uAe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function HW(){let t=v.useContext(xv);return lO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function fAe(){let t=v.useContext(xI);return lO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cO=v.createContext(void 0);cO.displayName="FrameworkContext";function $W(){let t=v.useContext(cO);return lO(t,"You must render this element inside a <HydratedRouter> element"),t}function AAe(t,e){let r=v.useContext(cO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let A=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:x1(l,A),onBlur:x1(c,m),onMouseEnter:x1(u,A),onMouseLeave:x1(d,m),onTouchStart:x1(f,A)}]:[!1,h,{}]}function x1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function hAe({page:t,...e}){let{router:r}=HW(),n=v.useMemo(()=>kW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(pAe,{page:t,matches:n,...e}):null}function mAe(t){let{manifest:e,routeModules:r}=$W(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return oAe(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function pAe({page:t,matches:e,...r}){let n=RA(),{manifest:a,routeModules:s}=$W(),{basename:i}=HW(),{loaderData:l,matches:c}=fAe(),u=v.useMemo(()=>xL(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>xL(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=aAe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,l,n,a,u,e,t,s]),h=v.useMemo(()=>lAe(d,a),[d,a]),A=mAe(d);return v.createElement(v.Fragment,null,f.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),A.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function gAe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var KW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KW&&(window.__reactRouterVersion="7.8.1")}catch{}function xAe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=afe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(zfe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var GW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qW=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},A){let{basename:m}=v.useContext(Pd),p=typeof u=="string"&&GW.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,KW))try{let I=new URL(window.location.href),O=u.startsWith("//")?new URL(I.protocol+u):new URL(u),S=wA(O.pathname,m);O.origin===I.origin&&S!=null?u=S+O.search+O.hash:x=!0}catch{Cd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=jfe(u,{relative:a}),[b,w,B]=AAe(n,h),P=bAe(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(I){e&&e(I),I.defaultPrevented||P(I)}let E=v.createElement("a",{...h,...B,href:g||y,onClick:x||s?e:_,ref:gAe(A,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,E,v.createElement(hAe,{page:y})):E});qW.displayName="Link";var on=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let f=Tb(i,{relative:u.relative}),h=RA(),A=v.useContext(xI),{navigator:m,basename:p}=v.useContext(Pd),g=A!=null&&EAe(f)&&l===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=h.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=wA(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let B=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",P=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),_={isActive:B,isPending:P,isTransitioning:g},E=B?e:void 0,I;typeof n=="function"?I=n(_):I=[n,B?"active":null,P?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(_):s;return v.createElement(qW,{...u,"aria-current":E,className:I,ref:d,style:O,to:i,viewTransition:l},typeof c=="function"?c(_):c)});on.displayName="NavLink";var vAe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=o_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},A)=>{let m=CAe(),p=_Ae(l,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&GW.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,B=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:B,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:A,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});vAe.displayName="Form";function yAe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zW(t){let e=v.useContext(xv);return As(e,yAe(t)),e}function bAe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=jb(),c=RA(),u=Tb(t,{relative:s});return v.useCallback(d=>{if(eAe(d,e)){d.preventDefault();let f=r!==void 0?r:w2(c)===w2(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,e,t,a,s,i])}var wAe=0,NAe=()=>`__${String(++wAe)}__`;function CAe(){let{router:t}=zW("useSubmit"),{basename:e}=v.useContext(Pd),r=$fe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=nAe(n,e);if(a.navigate===!1){let d=a.fetcherKey||NAe();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function _Ae(t,{relative:e}={}){let{basename:r}=v.useContext(Pd),n=v.useContext(jd);As(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Tb(t||".",{relative:e})},i=RA();if(t==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:lA([r,s.pathname])),w2(s)}function EAe(t,{relative:e}={}){let r=v.useContext(RW);As(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=zW("useViewTransitionState"),a=Tb(t,{relative:e});if(!r.isTransitioning)return!1;let s=wA(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=wA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return oE(a.pathname,i)!=null||oE(a.pathname,s)!=null}var vL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},SAe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},XW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,l=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,A=u&63;c||(A=64,i||(h=64)),n.push(r[d],r[f],r[h],r[A])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new IAe;const h=s<<2|l>>4;if(n.push(h),u!==64){const A=l<<4&240|u>>2;if(n.push(A),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BAe=function(t){const e=WW(t);return XW.encodeByteArray(e,!0)},lE=function(t){return BAe(t).replace(/\./g,"")},YW=function(t){try{return XW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jAe=()=>PAe().__FIREBASE_DEFAULTS__,TAe=()=>{if(typeof process>"u"||typeof vL>"u")return;const t=vL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YW(t[1]);return e&&JSON.parse(e)},yI=()=>{try{return jAe()||TAe()||kAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JW=t=>{var e,r;return(r=(e=yI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},FAe=t=>{const e=JW(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},ZW=()=>{var t;return(t=yI())===null||t===void 0?void 0:t.config},eX=t=>{var e;return(e=yI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lE(JSON.stringify(r)),lE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function MAe(){var t;const e=(t=yI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UAe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QAe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VAe(){const t=Mi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tX(){return!MAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rX(){try{return typeof indexedDB=="object"}catch{return!1}}function HAe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ae="FirebaseError";class MA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=$Ae,Object.setPrototypeOf(this,MA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kb.prototype.create)}}class kb{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?KAe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new MA(a,l,n)}}function KAe(t,e){return t.replace(GAe,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const GAe=/\{\$([^}]+)}/g;function qAe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cE(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(yL(s)&&yL(i)){if(!cE(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function yL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ey(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function ty(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function zAe(t,e){const r=new WAe(t,e);return r.subscribe.bind(r)}class WAe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");XAe(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=b5),a.error===void 0&&(a.error=b5),a.complete===void 0&&(a.complete=b5);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XAe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function b5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){return t&&t._delegate?t._delegate:t}class Ap{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YAe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new OAe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZAe(e))try{this.getOrInitializeService({instanceIdentifier:vm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=vm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vm){return this.instances.has(e)}getOptions(e=vm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JAe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=vm){return this.component?this.component.multipleInstances?e:vm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JAe(t){return t===vm?void 0:t}function ZAe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ehe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new YAe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tn||(Tn={}));const the={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},rhe=Tn.INFO,nhe={[Tn.DEBUG]:"log",[Tn.VERBOSE]:"log",[Tn.INFO]:"info",[Tn.WARN]:"warn",[Tn.ERROR]:"error"},ahe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=nhe[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uO=class{constructor(e){this.name=e,this._logLevel=rhe,this._logHandler=ahe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?the[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tn.DEBUG,...e),this._logHandler(this,Tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tn.VERBOSE,...e),this._logHandler(this,Tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tn.INFO,...e),this._logHandler(this,Tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tn.WARN,...e),this._logHandler(this,Tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tn.ERROR,...e),this._logHandler(this,Tn.ERROR,...e)}};const she=(t,e)=>e.some(r=>t instanceof r);let bL,wL;function ihe(){return bL||(bL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ohe(){return wL||(wL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nX=new WeakMap,Ij=new WeakMap,aX=new WeakMap,w5=new WeakMap,dO=new WeakMap;function lhe(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(d0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&nX.set(r,t)}).catch(()=>{}),dO.set(e,t),e}function che(t){if(Ij.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Ij.set(t,e)}let Bj={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ij.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return d0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uhe(t){Bj=t(Bj)}function dhe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(N5(this),e,...r);return aX.set(n,e.sort?e.sort():[e]),d0(n)}:ohe().includes(t)?function(...e){return t.apply(N5(this),e),d0(nX.get(this))}:function(...e){return d0(t.apply(N5(this),e))}}function fhe(t){return typeof t=="function"?dhe(t):(t instanceof IDBTransaction&&che(t),she(t,ihe())?new Proxy(t,Bj):t)}function d0(t){if(t instanceof IDBRequest)return lhe(t);if(w5.has(t))return w5.get(t);const e=fhe(t);return e!==t&&(w5.set(t,e),dO.set(e,t)),e}const N5=t=>dO.get(t);function Ahe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),l=d0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(d0(i.result),c.oldVersion,c.newVersion,d0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const hhe=["get","getKey","getAll","getAllKeys","count"],mhe=["put","add","delete","clear"],C5=new Map;function NL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(C5.get(e))return C5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=mhe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||hhe.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return C5.set(e,s),s}uhe(t=>({...t,get:(e,r,n)=>NL(e,r)||t.get(e,r,n),has:(e,r)=>!!NL(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ghe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ghe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pj="@firebase/app",CL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new uO("@firebase/app"),xhe="@firebase/app-compat",vhe="@firebase/analytics-compat",yhe="@firebase/analytics",bhe="@firebase/app-check-compat",whe="@firebase/app-check",Nhe="@firebase/auth",Che="@firebase/auth-compat",_he="@firebase/database",Ehe="@firebase/data-connect",She="@firebase/database-compat",Ihe="@firebase/functions",Bhe="@firebase/functions-compat",Phe="@firebase/installations",jhe="@firebase/installations-compat",The="@firebase/messaging",khe="@firebase/messaging-compat",Fhe="@firebase/performance",Ohe="@firebase/performance-compat",Dhe="@firebase/remote-config",Rhe="@firebase/remote-config-compat",Mhe="@firebase/storage",Lhe="@firebase/storage-compat",Uhe="@firebase/firestore",Qhe="@firebase/vertexai-preview",Vhe="@firebase/firestore-compat",Hhe="firebase",$he="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="[DEFAULT]",Khe={[Pj]:"fire-core",[xhe]:"fire-core-compat",[yhe]:"fire-analytics",[vhe]:"fire-analytics-compat",[whe]:"fire-app-check",[bhe]:"fire-app-check-compat",[Nhe]:"fire-auth",[Che]:"fire-auth-compat",[_he]:"fire-rtdb",[Ehe]:"fire-data-connect",[She]:"fire-rtdb-compat",[Ihe]:"fire-fn",[Bhe]:"fire-fn-compat",[Phe]:"fire-iid",[jhe]:"fire-iid-compat",[The]:"fire-fcm",[khe]:"fire-fcm-compat",[Fhe]:"fire-perf",[Ohe]:"fire-perf-compat",[Dhe]:"fire-rc",[Rhe]:"fire-rc-compat",[Mhe]:"fire-gcs",[Lhe]:"fire-gcs-compat",[Uhe]:"fire-fst",[Vhe]:"fire-fst-compat",[Qhe]:"fire-vertex","fire-js":"fire-js",[Hhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map,Tj=new Map,kj=new Map;function _L(t,e){try{t.container.addComponent(e)}catch(r){NA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Kx(t){const e=t.name;if(kj.has(e))return NA.debug(`There were multiple attempts to register component ${e}.`),!1;kj.set(e,t);for(const r of $x.values())_L(r,t);for(const r of Tj.values())_L(r,t);return!0}function fO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function rf(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ghe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},f0=new kb("app","Firebase",Ghe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qhe{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ap("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw f0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=$he;function AO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:jj,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw f0.create("bad-app-name",{appName:String(a)});if(r||(r=ZW()),!r)throw f0.create("no-options");const s=$x.get(a);if(s){if(cE(r,s.options)&&cE(n,s.config))return s;throw f0.create("duplicate-app",{appName:a})}const i=new ehe(a);for(const c of kj.values())i.addComponent(c);const l=new qhe(r,n,i);return $x.set(a,l),l}function hO(t=jj){const e=$x.get(t);if(!e&&t===jj&&ZW())return AO();if(!e)throw f0.create("no-app",{appName:t});return e}async function zhe(t){let e=!1;const r=t.name;$x.has(r)?(e=!0,$x.delete(r)):Tj.has(r)&&t.decRefCount()<=0&&(Tj.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function A0(t,e,r){var n;let a=(n=Khe[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),NA.warn(l.join(" "));return}Kx(new Ap(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe="firebase-heartbeat-database",Xhe=1,N2="firebase-heartbeat-store";let _5=null;function sX(){return _5||(_5=Ahe(Whe,Xhe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(N2)}catch(r){console.warn(r)}}}}).catch(t=>{throw f0.create("idb-open",{originalErrorMessage:t.message})})),_5}async function Yhe(t){try{const r=(await sX()).transaction(N2),n=await r.objectStore(N2).get(iX(t));return await r.done,n}catch(e){if(e instanceof MA)NA.warn(e.message);else{const r=f0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});NA.warn(r.message)}}}async function EL(t,e){try{const n=(await sX()).transaction(N2,"readwrite");await n.objectStore(N2).put(e,iX(t)),await n.done}catch(r){if(r instanceof MA)NA.warn(r.message);else{const n=f0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});NA.warn(n.message)}}}function iX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jhe=1024,Zhe=30*24*60*60*1e3;class e0e{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new r0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=Zhe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){NA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=SL(),{heartbeatsToSend:n,unsentEntries:a}=t0e(this._heartbeatsCache.heartbeats),s=lE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return NA.warn(r),""}}}function SL(){return new Date().toISOString().substring(0,10)}function t0e(t,e=Jhe){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),IL(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),IL(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class r0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rX()?HAe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Yhe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return EL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return EL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function IL(t){return lE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0e(t){Kx(new Ap("platform-logger",e=>new phe(e),"PRIVATE")),Kx(new Ap("heartbeat",e=>new e0e(e),"PRIVATE")),A0(Pj,CL,t),A0(Pj,CL,"esm2017"),A0("fire-js","")}n0e("");function mO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function oX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const a0e=oX,lX=new kb("auth","Firebase",oX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new uO("@firebase/auth");function s0e(t,...e){uE.logLevel<=Tn.WARN&&uE.warn(`Auth (${yv}): ${t}`,...e)}function c_(t,...e){uE.logLevel<=Tn.ERROR&&uE.error(`Auth (${yv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,...e){throw pO(t,...e)}function ff(t,...e){return pO(t,...e)}function cX(t,e,r){const n=Object.assign(Object.assign({},a0e()),{[e]:r});return new kb("auth","Firebase",n).create(e,{appName:t.name})}function cA(t){return cX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return lX.create(t,...e)}function tn(t,e,...r){if(!t)throw pO(e,...r)}function eA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw c_(e),new Error(e)}function CA(t,e){t||eA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function i0e(){return BL()==="http:"||BL()==="https:"}function BL(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i0e()||UAe()||"connection"in navigator)?navigator.onLine:!0}function l0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,r){this.shortDelay=e,this.longDelay=r,CA(r>e,"Short delay should be less than long delay!"),this.isMobile=RAe()||QAe()}get(){return o0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){CA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0e=new Ob(3e4,6e4);function V0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function H0(t,e,r,n,a={}){return dX(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const l=Fb(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return LAe()||(u.referrerPolicy="no-referrer"),uX.fetch()(fX(t,t.config.apiHost,r,l),u)})}async function dX(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},c0e),e);try{const a=new f0e(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw hN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw hN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw hN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cX(t,d,u);_d(t,d)}}catch(a){if(a instanceof MA)throw a;_d(t,"network-request-failed",{message:String(a)})}}async function Db(t,e,r,n,a={}){const s=await H0(t,e,r,n,a);return"mfaPendingCredential"in s&&_d(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fX(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?gO(t.config,a):`${t.config.apiScheme}://${a}`}function d0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class f0e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ff(this.auth,"network-request-failed")),u0e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=ff(t,e,n);return a.customData._tokenResponse=r,a}function PL(t){return t!==void 0&&t.enterprise!==void 0}class A0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return d0e(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function h0e(t,e){return H0(t,"GET","/v2/recaptchaConfig",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0e(t,e){return H0(t,"POST","/v1/accounts:delete",e)}async function AX(t,e){return H0(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p0e(t,e=!1){const r=Is(t),n=await r.getIdToken(e),a=xO(n);tn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:jy(E5(a.auth_time)),issuedAtTime:jy(E5(a.iat)),expirationTime:jy(E5(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function E5(t){return Number(t)*1e3}function xO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return c_("JWT malformed, contained fewer than 3 sections"),null;try{const a=YW(r);return a?JSON.parse(a):(c_("Failed to decode base64 JWT payload"),null)}catch(a){return c_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function jL(t){const e=xO(t);return tn(e,"internal-error"),tn(typeof e.exp<"u","internal-error"),tn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof MA&&g0e(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function g0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=jy(this.lastLoginAt),this.creationTime=jy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await C2(t,AX(r,{idToken:n}));tn(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hX(s.providerUserInfo):[],l=y0e(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Oj(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function v0e(t){const e=Is(t);await dE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y0e(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function hX(t){return t.map(e=>{var{providerId:r}=e,n=mO(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b0e(t,e){const r=await dX(t,{},async()=>{const n=Fb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=fX(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",uX.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function w0e(t,e){return H0(t,"POST","/v2/accounts:revokeToken",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tn(e.idToken,"internal-error"),tn(typeof e.idToken<"u","internal-error"),tn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){tn(e.length!==0,"internal-error");const r=jL(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(tn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await b0e(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Ex;return n&&(tn(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(tn(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(tn(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ex,this.toJSON())}_performRefresh(){return eA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t,e){tn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=mO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new x0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oj(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await C2(this,this.stsTokenManager.getToken(this.auth,e));return tn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return p0e(this,e)}reload(){return v0e(this)}_assign(e){this!==e&&(tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new tA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await dE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rf(this.auth.app))return Promise.reject(cA(this.auth));const e=await this.getIdToken();return await C2(this,m0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,A=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:B,providerData:P,stsTokenManager:_}=r;tn(b&&_,e,"internal-error");const E=Ex.fromJSON(this.name,_);tn(typeof b=="string",e,"internal-error"),ph(f,e.name),ph(h,e.name),tn(typeof w=="boolean",e,"internal-error"),tn(typeof B=="boolean",e,"internal-error"),ph(A,e.name),ph(m,e.name),ph(p,e.name),ph(g,e.name),ph(x,e.name),ph(y,e.name);const I=new tA({uid:b,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:B,photoURL:m,phoneNumber:A,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:y});return P&&Array.isArray(P)&&(I.providerData=P.map(O=>Object.assign({},O))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(e,r,n=!1){const a=new Ex;a.updateFromServerResponse(r);const s=new tA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await dE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];tn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?hX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Ex;l.updateFromIdToken(n);const c=new tA({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Oj(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Map;function rA(t){CA(t instanceof Function,"Expected a class definition");let e=TL.get(t);return e?(CA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}mX.type="NONE";const kL=mX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t,e,r){return`firebase:${t}:${e}:${r}`}class Sx{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=u_(this.userKey,a.apiKey,s),this.fullPersistenceKey=u_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Sx(rA(kL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||rA(kL);const i=u_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){const f=tA._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Sx(s,e,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Sx(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bX(e))return"Blackberry";if(wX(e))return"Webos";if(gX(e))return"Safari";if((e.includes("chrome/")||xX(e))&&!e.includes("edge/"))return"Chrome";if(yX(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function pX(t=Mi()){return/firefox\//i.test(t)}function gX(t=Mi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xX(t=Mi()){return/crios\//i.test(t)}function vX(t=Mi()){return/iemobile/i.test(t)}function yX(t=Mi()){return/android/i.test(t)}function bX(t=Mi()){return/blackberry/i.test(t)}function wX(t=Mi()){return/webos/i.test(t)}function vO(t=Mi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N0e(t=Mi()){var e;return vO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C0e(){return VAe()&&document.documentMode===10}function NX(t=Mi()){return vO(t)||yX(t)||wX(t)||bX(t)||/windows phone/i.test(t)||vX(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t,e=[]){let r;switch(t){case"Browser":r=FL(Mi());break;case"Worker":r=`${FL(Mi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${yv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,l)=>{try{const c=e(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0e(t,e={}){return H0(t,"GET","/v2/passwordPolicy",V0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0e=6;class I0e{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:S0e,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0e{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OL(this),this.idTokenSubscription=new OL(this),this.beforeStateQueue=new _0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=rA(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Sx.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await AX(this,{idToken:e}),n=await tA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(rf(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await dE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rf(this.app))return Promise.reject(cA(this));const r=e?Is(e):null;return r&&tn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&tn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rf(this.app)?Promise.reject(cA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rf(this.app)?Promise.reject(cA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await E0e(this),r=new I0e(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kb("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await w0e(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&rA(e)||this._popupRedirectResolver;tn(r,this,"argument-error"),this.redirectPersistenceManager=await Sx.create(this,[rA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&s0e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Qp(t){return Is(t)}class OL{constructor(e){this.auth=e,this.observer=null,this.addObserver=zAe(r=>this.observer=r)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P0e(t){bI=t}function _X(t){return bI.loadJS(t)}function j0e(){return bI.recaptchaEnterpriseScript}function T0e(){return bI.gapiScript}function k0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const F0e="recaptcha-enterprise",O0e="NO_RECAPTCHA";class D0e{constructor(e){this.type=F0e,this.auth=Qp(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{h0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new A0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;PL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(O0e)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&PL(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=j0e();c.length!==0&&(c+=l),_X(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function DL(t,e,r,n=!1){const a=new D0e(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Dj(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await DL(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await DL(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0e(t,e){const r=fO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(cE(s,e??{}))return a;_d(a,"already-initialized")}return r.initialize({options:e})}function M0e(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(rA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function L0e(t,e,r){const n=Qp(t);tn(n._canInitEmulator,n,"emulator-config-failed"),tn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=EX(e),{host:i,port:l}=U0e(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Q0e()}function EX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function U0e(t){const e=EX(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:RL(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:RL(i)}}}function RL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q0e(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return eA("not implemented")}_getIdTokenResponse(e){return eA("not implemented")}_linkToIdToken(e,r){return eA("not implemented")}_getReauthenticationResolver(e){return eA("not implemented")}}async function V0e(t,e){return H0(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0e(t,e){return Db(t,"POST","/v1/accounts:signInWithPassword",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0e(t,e){return Db(t,"POST","/v1/accounts:signInWithEmailLink",V0(t,e))}async function K0e(t,e){return Db(t,"POST","/v1/accounts:signInWithEmailLink",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends yO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new _2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new _2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dj(e,r,"signInWithPassword",H0e);case"emailLink":return $0e(e,{email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dj(e,n,"signUpPassword",V0e);case"emailLink":return K0e(e,{idToken:r,email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e){return Db(t,"POST","/v1/accounts:signInWithIdp",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0e="http://localhost";class hp extends yO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new hp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_d("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=mO(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new hp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Ix(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ix(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ix(e,r)}buildRequest(){const e={requestUri:G0e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fb(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function z0e(t){const e=ey(ty(t)).link,r=e?ey(ty(e)).deep_link_id:null,n=ey(ty(t)).deep_link_id;return(n?ey(ty(n)).link:null)||n||r||e||t}class bO{constructor(e){var r,n,a,s,i,l;const c=ey(ty(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=q0e((a=c.mode)!==null&&a!==void 0?a:null);tn(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=z0e(e);try{return new bO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.providerId=bv.PROVIDER_ID}static credential(e,r){return _2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bO.parseLink(r);return tn(n,"argument-error"),_2._fromEmailAndCode(e,n.code,n.tenantId)}}bv.PROVIDER_ID="password";bv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends SX{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Rb{constructor(){super("facebook.com")}static credential(e){return hp._fromParams({providerId:Lh.PROVIDER_ID,signInMethod:Lh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lh.credentialFromTaggedObject(e)}static credentialFromError(e){return Lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lh.credential(e.oauthAccessToken)}catch{return null}}}Lh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends Rb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return hp._fromParams({providerId:Uh.PROVIDER_ID,signInMethod:Uh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Uh.credentialFromTaggedObject(e)}static credentialFromError(e){return Uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Uh.credential(r,n)}catch{return null}}}Uh.GOOGLE_SIGN_IN_METHOD="google.com";Uh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Rb{constructor(){super("github.com")}static credential(e){return hp._fromParams({providerId:Qh.PROVIDER_ID,signInMethod:Qh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qh.credentialFromTaggedObject(e)}static credentialFromError(e){return Qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qh.credential(e.oauthAccessToken)}catch{return null}}}Qh.GITHUB_SIGN_IN_METHOD="github.com";Qh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Rb{constructor(){super("twitter.com")}static credential(e,r){return hp._fromParams({providerId:Vh.PROVIDER_ID,signInMethod:Vh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Vh.credentialFromTaggedObject(e)}static credentialFromError(e){return Vh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Vh.credential(r,n)}catch{return null}}}Vh.TWITTER_SIGN_IN_METHOD="twitter.com";Vh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0e(t,e){return Db(t,"POST","/v1/accounts:signUp",V0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await tA._fromIdTokenResponse(e,n,a),i=ML(n);return new mp({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=ML(n);return new mp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function ML(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends MA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,fE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new fE(e,r,n,a)}}function IX(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fE._fromErrorAndOperation(t,s,e,n):s})}async function X0e(t,e,r=!1){const n=await C2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return mp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0e(t,e,r=!1){const{auth:n}=t;if(rf(n.app))return Promise.reject(cA(n));const a="reauthenticate";try{const s=await C2(t,IX(n,a,e,t),r);tn(s.idToken,n,"internal-error");const i=xO(s.idToken);tn(i,n,"internal-error");const{sub:l}=i;return tn(t.uid===l,n,"user-mismatch"),mp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_d(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BX(t,e,r=!1){if(rf(t.app))return Promise.reject(cA(t));const n="signIn",a=await IX(t,n,e),s=await mp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function J0e(t,e){return BX(Qp(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PX(t){const e=Qp(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z0e(t,e,r){if(rf(t.app))return Promise.reject(cA(t));const n=Qp(t),i=await Dj(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W0e).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&PX(t),c}),l=await mp._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(l.user),l}function eme(t,e,r){return rf(t.app)?Promise.reject(cA(t)):J0e(Is(t),bv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&PX(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tme(t,e){return Is(t).setPersistence(e)}function rme(t,e,r,n){return Is(t).onIdTokenChanged(e,r,n)}function nme(t,e,r){return Is(t).beforeAuthStateChanged(e,r)}function wO(t,e,r,n){return Is(t).onAuthStateChanged(e,r,n)}function wI(t){return Is(t).signOut()}const AE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(AE,"1"),this.storage.removeItem(AE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ame=1e3,sme=10;class TX extends jX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);C0e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,sme):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},ame)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}TX.type="LOCAL";const kX=TX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FX extends jX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}FX.type="SESSION";const OX=FX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ime(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new NI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await ime(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}NI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ome{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=NO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(){return window}function lme(t){Af().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DX(){return typeof Af().WorkerGlobalScope<"u"&&typeof Af().importScripts=="function"}async function cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ume(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dme(){return DX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX="firebaseLocalStorageDb",fme=1,hE="firebaseLocalStorage",MX="fbase_key";class Mb{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function CI(t,e){return t.transaction([hE],e?"readwrite":"readonly").objectStore(hE)}function Ame(){const t=indexedDB.deleteDatabase(RX);return new Mb(t).toPromise()}function Rj(){const t=indexedDB.open(RX,fme);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(hE,{keyPath:MX})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(hE)?e(n):(n.close(),await Ame(),e(await Rj()))})})}async function LL(t,e,r){const n=CI(t,!0).put({[MX]:e,value:r});return new Mb(n).toPromise()}async function hme(t,e){const r=CI(t,!1).get(e),n=await new Mb(r).toPromise();return n===void 0?null:n.value}function UL(t,e){const r=CI(t,!0).delete(e);return new Mb(r).toPromise()}const mme=800,pme=3;class LX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rj(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>pme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=NI._getInstance(dme()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await cme(),!this.activeServiceWorker)return;this.sender=new ome(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ume()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rj();return await LL(e,AE,"1"),await UL(e,AE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>LL(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>hme(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>UL(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=CI(a,!1).getAll();return new Mb(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LX.type="LOCAL";const gme=LX;new Ob(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xme(t,e){return e?rA(e):(tn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO extends yO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ix(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ix(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ix(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function vme(t){return BX(t.auth,new CO(t),t.bypassAuthState)}function yme(t){const{auth:e,user:r}=t;return tn(r,e,"internal-error"),Y0e(r,new CO(t),t.bypassAuthState)}async function bme(t){const{auth:e,user:r}=t;return tn(r,e,"internal-error"),X0e(r,new CO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UX{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vme;case"linkViaPopup":case"linkViaRedirect":return bme;case"reauthViaPopup":case"reauthViaRedirect":return yme;default:_d(this.auth,"internal-error")}}resolve(e){CA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){CA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wme=new Ob(2e3,1e4);class dx extends UX{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,dx.currentPopupAction&&dx.currentPopupAction.cancel(),dx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tn(e,this.auth,"internal-error"),e}async onExecution(){CA(this.filter.length===1,"Popup operations only handle one event");const e=NO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ff(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ff(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ff(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wme.get())};e()}}dx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nme="pendingRedirect",d_=new Map;class Cme extends UX{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=d_.get(this.auth._key());if(!e){try{const n=await _me(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}d_.set(this.auth._key(),e)}return this.bypassAuthState||d_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _me(t,e){const r=Ime(e),n=Sme(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Eme(t,e){d_.set(t._key(),e)}function Sme(t){return rA(t._redirectPersistence)}function Ime(t){return u_(Nme,t.config.apiKey,t.name)}async function Bme(t,e,r=!1){if(rf(t.app))return Promise.reject(cA(t));const n=Qp(t),a=xme(n,e),i=await new Cme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme=10*60*1e3;class jme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tme(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!QX(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ff(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pme&&this.cachedEventUids.clear(),this.cachedEventUids.has(QL(e))}saveEventToCache(e){this.cachedEventUids.add(QL(e)),this.lastProcessedEventTime=Date.now()}}function QL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QX({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Tme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QX(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kme(t,e={}){return H0(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ome=/^https?/;async function Dme(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kme(t);for(const r of e)try{if(Rme(r))return}catch{}_d(t,"unauthorized-domain")}function Rme(t){const e=Fj(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Ome.test(r))return!1;if(Fme.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme=new Ob(3e4,6e4);function VL(){const t=Af().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Lme(t){return new Promise((e,r)=>{var n,a,s;function i(){VL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VL(),r(ff(t,"network-request-failed"))},timeout:Mme.get()})}if(!((a=(n=Af().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Af().gapi)===null||s===void 0)&&s.load)i();else{const l=k0e("iframefcb");return Af()[l]=()=>{gapi.load?i():r(ff(t,"network-request-failed"))},_X(`${T0e()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw f_=null,e})}let f_=null;function Ume(t){return f_=f_||Lme(t),f_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme=new Ob(5e3,15e3),Vme="__/auth/iframe",Hme="emulator/auth/iframe",$me={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gme(t){const e=t.config;tn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?gO(e,Hme):`https://${t.config.authDomain}/${Vme}`,n={apiKey:e.apiKey,appName:t.name,v:yv},a=Kme.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Fb(n).slice(1)}`}async function qme(t){const e=await Ume(t),r=Af().gapi;return tn(r,t,"internal-error"),e.open({where:document.body,url:Gme(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$me,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=ff(t,"network-request-failed"),l=Af().setTimeout(()=>{s(i)},Qme.get());function c(){Af().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wme=500,Xme=600,Yme="_blank",Jme="http://localhost";class HL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zme(t,e,r,n=Wme,a=Xme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},zme),{width:n.toString(),height:a.toString(),top:s,left:i}),u=Mi().toLowerCase();r&&(l=xX(u)?Yme:r),pX(u)&&(e=e||Jme,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[A,m])=>`${h}${A}=${m},`,"");if(N0e(u)&&l!=="_self")return epe(e||"",l),new HL(null);const f=window.open(e||"",l,d);tn(f,t,"popup-blocked");try{f.focus()}catch{}return new HL(f)}function epe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tpe="__/auth/handler",rpe="emulator/auth/handler",npe=encodeURIComponent("fac");async function $L(t,e,r,n,a,s){tn(t.config.authDomain,t,"auth-domain-config-required"),tn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:yv,eventId:a};if(e instanceof SX){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",qAe(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(e instanceof Rb){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${npe}=${encodeURIComponent(c)}`:"";return`${ape(t)}?${Fb(l).slice(1)}${u}`}function ape({config:t}){return t.emulator?gO(t,rpe):`https://${t.authDomain}/${tpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="webStorageSupport";class spe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OX,this._completeRedirectFn=Bme,this._overrideRedirectResult=Eme}async _openPopup(e,r,n,a){var s;CA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await $L(e,r,n,Fj(),a);return Zme(e,i,NO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await $L(e,r,n,Fj(),a);return lme(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(CA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await qme(e),n=new jme(e);return r.register("authEvent",a=>(tn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(S5,{type:S5},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[S5];i!==void 0&&r(!!i),_d(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Dme(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return NX()||gX()||vO()}}const ipe=spe;var KL="@firebase/auth",GL="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ope{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cpe(t){Kx(new Ap("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;tn(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CX(t)},u=new B0e(n,a,s,c);return M0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Kx(new Ap("auth-internal",e=>{const r=Qp(e.getProvider("auth").getImmediate());return(n=>new ope(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),A0(KL,GL,lpe(t)),A0(KL,GL,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe=5*60,dpe=eX("authIdTokenMaxAge")||upe;let qL=null;const fpe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>dpe)return;const a=r==null?void 0:r.token;qL!==a&&(qL=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function VX(t=hO()){const e=fO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=R0e(t,{popupRedirectResolver:ipe,persistence:[gme,kX,OX]}),n=eX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=fpe(s.toString());nme(r,i,()=>i(r.currentUser)),rme(r,l=>i(l))}}const a=JW("auth");return a&&L0e(r,`http://${a}`),r}function Ape(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}P0e({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=ff("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Ape().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cpe("Browser");var hpe="firebase",mpe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */A0(hpe,mpe,"app");var zL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gm,HX;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,E){function I(){}I.prototype=E.prototype,_.D=E.prototype,_.prototype=new I,_.prototype.constructor=_,_.C=function(O,S,j){for(var D=Array(arguments.length-2),J=2;J<arguments.length;J++)D[J-2]=arguments[J];return E.prototype[S].apply(O,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,E,I){I||(I=0);var O=Array(16);if(typeof E=="string")for(var S=0;16>S;++S)O[S]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(S=0;16>S;++S)O[S]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=_.g[0],I=_.g[1],S=_.g[2];var j=_.g[3],D=E+(j^I&(S^j))+O[0]+3614090360&4294967295;E=I+(D<<7&4294967295|D>>>25),D=j+(S^E&(I^S))+O[1]+3905402710&4294967295,j=E+(D<<12&4294967295|D>>>20),D=S+(I^j&(E^I))+O[2]+606105819&4294967295,S=j+(D<<17&4294967295|D>>>15),D=I+(E^S&(j^E))+O[3]+3250441966&4294967295,I=S+(D<<22&4294967295|D>>>10),D=E+(j^I&(S^j))+O[4]+4118548399&4294967295,E=I+(D<<7&4294967295|D>>>25),D=j+(S^E&(I^S))+O[5]+1200080426&4294967295,j=E+(D<<12&4294967295|D>>>20),D=S+(I^j&(E^I))+O[6]+2821735955&4294967295,S=j+(D<<17&4294967295|D>>>15),D=I+(E^S&(j^E))+O[7]+4249261313&4294967295,I=S+(D<<22&4294967295|D>>>10),D=E+(j^I&(S^j))+O[8]+1770035416&4294967295,E=I+(D<<7&4294967295|D>>>25),D=j+(S^E&(I^S))+O[9]+2336552879&4294967295,j=E+(D<<12&4294967295|D>>>20),D=S+(I^j&(E^I))+O[10]+4294925233&4294967295,S=j+(D<<17&4294967295|D>>>15),D=I+(E^S&(j^E))+O[11]+2304563134&4294967295,I=S+(D<<22&4294967295|D>>>10),D=E+(j^I&(S^j))+O[12]+1804603682&4294967295,E=I+(D<<7&4294967295|D>>>25),D=j+(S^E&(I^S))+O[13]+4254626195&4294967295,j=E+(D<<12&4294967295|D>>>20),D=S+(I^j&(E^I))+O[14]+2792965006&4294967295,S=j+(D<<17&4294967295|D>>>15),D=I+(E^S&(j^E))+O[15]+1236535329&4294967295,I=S+(D<<22&4294967295|D>>>10),D=E+(S^j&(I^S))+O[1]+4129170786&4294967295,E=I+(D<<5&4294967295|D>>>27),D=j+(I^S&(E^I))+O[6]+3225465664&4294967295,j=E+(D<<9&4294967295|D>>>23),D=S+(E^I&(j^E))+O[11]+643717713&4294967295,S=j+(D<<14&4294967295|D>>>18),D=I+(j^E&(S^j))+O[0]+3921069994&4294967295,I=S+(D<<20&4294967295|D>>>12),D=E+(S^j&(I^S))+O[5]+3593408605&4294967295,E=I+(D<<5&4294967295|D>>>27),D=j+(I^S&(E^I))+O[10]+38016083&4294967295,j=E+(D<<9&4294967295|D>>>23),D=S+(E^I&(j^E))+O[15]+3634488961&4294967295,S=j+(D<<14&4294967295|D>>>18),D=I+(j^E&(S^j))+O[4]+3889429448&4294967295,I=S+(D<<20&4294967295|D>>>12),D=E+(S^j&(I^S))+O[9]+568446438&4294967295,E=I+(D<<5&4294967295|D>>>27),D=j+(I^S&(E^I))+O[14]+3275163606&4294967295,j=E+(D<<9&4294967295|D>>>23),D=S+(E^I&(j^E))+O[3]+4107603335&4294967295,S=j+(D<<14&4294967295|D>>>18),D=I+(j^E&(S^j))+O[8]+1163531501&4294967295,I=S+(D<<20&4294967295|D>>>12),D=E+(S^j&(I^S))+O[13]+2850285829&4294967295,E=I+(D<<5&4294967295|D>>>27),D=j+(I^S&(E^I))+O[2]+4243563512&4294967295,j=E+(D<<9&4294967295|D>>>23),D=S+(E^I&(j^E))+O[7]+1735328473&4294967295,S=j+(D<<14&4294967295|D>>>18),D=I+(j^E&(S^j))+O[12]+2368359562&4294967295,I=S+(D<<20&4294967295|D>>>12),D=E+(I^S^j)+O[5]+4294588738&4294967295,E=I+(D<<4&4294967295|D>>>28),D=j+(E^I^S)+O[8]+2272392833&4294967295,j=E+(D<<11&4294967295|D>>>21),D=S+(j^E^I)+O[11]+1839030562&4294967295,S=j+(D<<16&4294967295|D>>>16),D=I+(S^j^E)+O[14]+4259657740&4294967295,I=S+(D<<23&4294967295|D>>>9),D=E+(I^S^j)+O[1]+2763975236&4294967295,E=I+(D<<4&4294967295|D>>>28),D=j+(E^I^S)+O[4]+1272893353&4294967295,j=E+(D<<11&4294967295|D>>>21),D=S+(j^E^I)+O[7]+4139469664&4294967295,S=j+(D<<16&4294967295|D>>>16),D=I+(S^j^E)+O[10]+3200236656&4294967295,I=S+(D<<23&4294967295|D>>>9),D=E+(I^S^j)+O[13]+681279174&4294967295,E=I+(D<<4&4294967295|D>>>28),D=j+(E^I^S)+O[0]+3936430074&4294967295,j=E+(D<<11&4294967295|D>>>21),D=S+(j^E^I)+O[3]+3572445317&4294967295,S=j+(D<<16&4294967295|D>>>16),D=I+(S^j^E)+O[6]+76029189&4294967295,I=S+(D<<23&4294967295|D>>>9),D=E+(I^S^j)+O[9]+3654602809&4294967295,E=I+(D<<4&4294967295|D>>>28),D=j+(E^I^S)+O[12]+3873151461&4294967295,j=E+(D<<11&4294967295|D>>>21),D=S+(j^E^I)+O[15]+530742520&4294967295,S=j+(D<<16&4294967295|D>>>16),D=I+(S^j^E)+O[2]+3299628645&4294967295,I=S+(D<<23&4294967295|D>>>9),D=E+(S^(I|~j))+O[0]+4096336452&4294967295,E=I+(D<<6&4294967295|D>>>26),D=j+(I^(E|~S))+O[7]+1126891415&4294967295,j=E+(D<<10&4294967295|D>>>22),D=S+(E^(j|~I))+O[14]+2878612391&4294967295,S=j+(D<<15&4294967295|D>>>17),D=I+(j^(S|~E))+O[5]+4237533241&4294967295,I=S+(D<<21&4294967295|D>>>11),D=E+(S^(I|~j))+O[12]+1700485571&4294967295,E=I+(D<<6&4294967295|D>>>26),D=j+(I^(E|~S))+O[3]+2399980690&4294967295,j=E+(D<<10&4294967295|D>>>22),D=S+(E^(j|~I))+O[10]+4293915773&4294967295,S=j+(D<<15&4294967295|D>>>17),D=I+(j^(S|~E))+O[1]+2240044497&4294967295,I=S+(D<<21&4294967295|D>>>11),D=E+(S^(I|~j))+O[8]+1873313359&4294967295,E=I+(D<<6&4294967295|D>>>26),D=j+(I^(E|~S))+O[15]+4264355552&4294967295,j=E+(D<<10&4294967295|D>>>22),D=S+(E^(j|~I))+O[6]+2734768916&4294967295,S=j+(D<<15&4294967295|D>>>17),D=I+(j^(S|~E))+O[13]+1309151649&4294967295,I=S+(D<<21&4294967295|D>>>11),D=E+(S^(I|~j))+O[4]+4149444226&4294967295,E=I+(D<<6&4294967295|D>>>26),D=j+(I^(E|~S))+O[11]+3174756917&4294967295,j=E+(D<<10&4294967295|D>>>22),D=S+(E^(j|~I))+O[2]+718787259&4294967295,S=j+(D<<15&4294967295|D>>>17),D=I+(j^(S|~E))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+E&4294967295,_.g[1]=_.g[1]+(S+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+j&4294967295}n.prototype.u=function(_,E){E===void 0&&(E=_.length);for(var I=E-this.blockSize,O=this.B,S=this.h,j=0;j<E;){if(S==0)for(;j<=I;)a(this,_,j),j+=this.blockSize;if(typeof _=="string"){for(;j<E;)if(O[S++]=_.charCodeAt(j++),S==this.blockSize){a(this,O),S=0;break}}else for(;j<E;)if(O[S++]=_[j++],S==this.blockSize){a(this,O),S=0;break}}this.h=S,this.o+=E},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var E=1;E<_.length-8;++E)_[E]=0;var I=8*this.o;for(E=_.length-8;E<_.length;++E)_[E]=I&255,I/=256;for(this.u(_),_=Array(16),E=I=0;4>E;++E)for(var O=0;32>O;O+=8)_[I++]=this.g[E]>>>O&255;return _};function s(_,E){var I=l;return Object.prototype.hasOwnProperty.call(I,_)?I[_]:I[_]=E(_)}function i(_,E){this.h=E;for(var I=[],O=!0,S=_.length-1;0<=S;S--){var j=_[S]|0;O&&j==E||(I[S]=j,O=!1)}this.g=I}var l={};function c(_){return-128<=_&&128>_?s(_,function(E){return new i([E|0],0>E?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var E=[],I=1,O=0;_>=I;O++)E[O]=_/I|0,I*=4294967296;return new i(E,0)}function d(_,E){if(_.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_.charAt(0)=="-")return g(d(_.substring(1),E));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),O=f,S=0;S<_.length;S+=8){var j=Math.min(8,_.length-S),D=parseInt(_.substring(S,S+j),E);8>j?(j=u(Math.pow(E,j)),O=O.j(j).add(u(D))):(O=O.j(I),O=O.add(u(D)))}return O}var f=c(0),h=c(1),A=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,E=1,I=0;I<this.g.length;I++){var O=this.i(I);_+=(0<=O?O:4294967296+O)*E,E*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var E=u(Math.pow(_,6)),I=this,O="";;){var S=w(I,E).g;I=x(I,S.j(E));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(_);if(I=S,m(I))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var E=0;E<_.g.length;E++)if(_.g[E]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=x(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var E=_.g.length,I=[],O=0;O<E;O++)I[O]=~_.g[O];return new i(I,~_.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],O=0,S=0;S<=E;S++){var j=O+(this.i(S)&65535)+(_.i(S)&65535),D=(j>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);O=D>>>16,j&=65535,D&=65535,I[S]=D<<16|j}return new i(I,I[I.length-1]&-2147483648?-1:0)};function x(_,E){return _.add(g(E))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(A)&&0>_.l(A))return u(this.m()*_.m());for(var E=this.g.length+_.g.length,I=[],O=0;O<2*E;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var S=0;S<_.g.length;S++){var j=this.i(O)>>>16,D=this.i(O)&65535,J=_.i(S)>>>16,ge=_.i(S)&65535;I[2*O+2*S]+=D*ge,y(I,2*O+2*S),I[2*O+2*S+1]+=j*ge,y(I,2*O+2*S+1),I[2*O+2*S+1]+=D*J,y(I,2*O+2*S+1),I[2*O+2*S+2]+=j*J,y(I,2*O+2*S+2)}for(O=0;O<E;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=E;O<2*E;O++)I[O]=0;return new i(I,0)};function y(_,E){for(;(_[E]&65535)!=_[E];)_[E+1]+=_[E]>>>16,_[E]&=65535,E++}function b(_,E){this.g=_,this.h=E}function w(_,E){if(m(E))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return E=w(g(_),E),new b(g(E.g),g(E.h));if(p(E))return E=w(_,g(E)),new b(g(E.g),E.h);if(30<_.g.length){if(p(_)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var I=h,O=E;0>=O.l(_);)I=B(I),O=B(O);var S=P(I,1),j=P(O,1);for(O=P(O,2),I=P(I,2);!m(O);){var D=j.add(O);0>=D.l(_)&&(S=S.add(I),j=D),O=P(O,1),I=P(I,1)}return E=x(_,S.j(E)),new b(S,E)}for(S=f;0<=_.l(E);){for(I=Math.max(1,Math.floor(_.m()/E.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=u(I),D=j.j(E);p(D)||0<D.l(_);)I-=O,j=u(I),D=j.j(E);m(j)&&(j=h),S=S.add(j),_=x(_,D)}return new b(S,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],O=0;O<E;O++)I[O]=this.i(O)&_.i(O);return new i(I,this.h&_.h)},t.or=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],O=0;O<E;O++)I[O]=this.i(O)|_.i(O);return new i(I,this.h|_.h)},t.xor=function(_){for(var E=Math.max(this.g.length,_.g.length),I=[],O=0;O<E;O++)I[O]=this.i(O)^_.i(O);return new i(I,this.h^_.h)};function B(_){for(var E=_.g.length+1,I=[],O=0;O<E;O++)I[O]=_.i(O)<<1|_.i(O-1)>>>31;return new i(I,_.h)}function P(_,E){var I=E>>5;E%=32;for(var O=_.g.length-I,S=[],j=0;j<O;j++)S[j]=0<E?_.i(j+I)>>>E|_.i(j+I+1)<<32-E:_.i(j+I);return new i(S,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,HX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Gm=i}).apply(typeof zL<"u"?zL:typeof self<"u"?self:typeof window<"u"?window:{});var mN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $X,ry,KX,A_,Mj,GX,qX,zX;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,W,de){return C==Array.prototype||C==Object.prototype||(C[W]=de.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof mN=="object"&&mN];for(var W=0;W<C.length;++W){var de=C[W];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var n=r(this);function a(C,W){if(W)e:{var de=n;C=C.split(".");for(var Oe=0;Oe<C.length-1;Oe++){var wt=C[Oe];if(!(wt in de))break e;de=de[wt]}C=C[C.length-1],Oe=de[C],W=W(Oe),W!=Oe&&W!=null&&e(de,C,{configurable:!0,writable:!0,value:W})}}function s(C,W){C instanceof String&&(C+="");var de=0,Oe=!1,wt={next:function(){if(!Oe&&de<C.length){var Ft=de++;return{value:W(Ft,C[Ft]),done:!1}}return Oe=!0,{done:!0,value:void 0}}};return wt[Symbol.iterator]=function(){return wt},wt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(W,de){return de})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(C){var W=typeof C;return W=W!="object"?W:C?Array.isArray(C)?"array":W:"null",W=="array"||W=="object"&&typeof C.length=="number"}function u(C){var W=typeof C;return W=="object"&&C!=null||W=="function"}function d(C,W,de){return C.call.apply(C.bind,arguments)}function f(C,W,de){if(!C)throw Error();if(2<arguments.length){var Oe=Array.prototype.slice.call(arguments,2);return function(){var wt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(wt,Oe),C.apply(W,wt)}}return function(){return C.apply(W,arguments)}}function h(C,W,de){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function A(C,W){var de=Array.prototype.slice.call(arguments,1);return function(){var Oe=de.slice();return Oe.push.apply(Oe,arguments),C.apply(this,Oe)}}function m(C,W){function de(){}de.prototype=W.prototype,C.aa=W.prototype,C.prototype=new de,C.prototype.constructor=C,C.Qb=function(Oe,wt,Ft){for(var ur=Array(arguments.length-2),On=2;On<arguments.length;On++)ur[On-2]=arguments[On];return W.prototype[wt].apply(Oe,ur)}}function p(C){const W=C.length;if(0<W){const de=Array(W);for(let Oe=0;Oe<W;Oe++)de[Oe]=C[Oe];return de}return[]}function g(C,W){for(let de=1;de<arguments.length;de++){const Oe=arguments[de];if(c(Oe)){const wt=C.length||0,Ft=Oe.length||0;C.length=wt+Ft;for(let ur=0;ur<Ft;ur++)C[wt+ur]=Oe[ur]}else C.push(Oe)}}class x{constructor(W,de){this.i=W,this.j=de,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var B=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function P(C,W,de){for(const Oe in C)W.call(de,C[Oe],Oe,C)}function _(C,W){for(const de in C)W.call(void 0,C[de],de,C)}function E(C){const W={};for(const de in C)W[de]=C[de];return W}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(C,W){let de,Oe;for(let wt=1;wt<arguments.length;wt++){Oe=arguments[wt];for(de in Oe)C[de]=Oe[de];for(let Ft=0;Ft<I.length;Ft++)de=I[Ft],Object.prototype.hasOwnProperty.call(Oe,de)&&(C[de]=Oe[de])}}function S(C){var W=1;C=C.split(":");const de=[];for(;0<W&&C.length;)de.push(C.shift()),W--;return C.length&&de.push(C.join(":")),de}function j(C){l.setTimeout(()=>{throw C},0)}function D(){var C=Z;let W=null;return C.g&&(W=C.g,C.g=C.g.next,C.g||(C.h=null),W.next=null),W}class J{constructor(){this.h=this.g=null}add(W,de){const Oe=ge.get();Oe.set(W,de),this.h?this.h.next=Oe:this.g=Oe,this.h=Oe}}var ge=new x(()=>new se,C=>C.reset());class se{constructor(){this.next=this.g=this.h=null}set(W,de){this.h=W,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let he,me=!1,Z=new J,ve=()=>{const C=l.Promise.resolve(void 0);he=()=>{C.then(Se)}};var Se=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(de){j(de)}var W=ge;W.j(C),100>W.h&&(W.h++,C.next=W.g,W.g=C)}me=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(C,W){this.type=C,this.g=this.target=W,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,W=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const de=()=>{};l.addEventListener("test",de,W),l.removeEventListener("test",de,W)}catch{}return C}();function Q(C,W){if(F.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var de=this.type=C.type,Oe=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=W,W=C.relatedTarget){if(B){e:{try{w(W.nodeName);var wt=!0;break e}catch{}wt=!1}wt||(W=null)}}else de=="mouseover"?W=C.fromElement:de=="mouseout"&&(W=C.toElement);this.relatedTarget=W,Oe?(this.clientX=Oe.clientX!==void 0?Oe.clientX:Oe.pageX,this.clientY=Oe.clientY!==void 0?Oe.clientY:Oe.pageY,this.screenX=Oe.screenX||0,this.screenY=Oe.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:V[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&Q.aa.h.call(this)}}m(Q,F);var V={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),R=0;function z(C,W,de,Oe,wt){this.listener=C,this.proxy=null,this.src=W,this.type=de,this.capture=!!Oe,this.ha=wt,this.key=++R,this.da=this.fa=!1}function le(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function K(C){this.src=C,this.g={},this.h=0}K.prototype.add=function(C,W,de,Oe,wt){var Ft=C.toString();C=this.g[Ft],C||(C=this.g[Ft]=[],this.h++);var ur=pe(C,W,Oe,wt);return-1<ur?(W=C[ur],de||(W.fa=!1)):(W=new z(W,this.src,Ft,!!Oe,wt),W.fa=de,C.push(W)),W};function M(C,W){var de=W.type;if(de in C.g){var Oe=C.g[de],wt=Array.prototype.indexOf.call(Oe,W,void 0),Ft;(Ft=0<=wt)&&Array.prototype.splice.call(Oe,wt,1),Ft&&(le(W),C.g[de].length==0&&(delete C.g[de],C.h--))}}function pe(C,W,de,Oe){for(var wt=0;wt<C.length;++wt){var Ft=C[wt];if(!Ft.da&&Ft.listener==W&&Ft.capture==!!de&&Ft.ha==Oe)return wt}return-1}var X="closure_lm_"+(1e6*Math.random()|0),G={};function ie(C,W,de,Oe,wt){if(Array.isArray(W)){for(var Ft=0;Ft<W.length;Ft++)ie(C,W[Ft],de,Oe,wt);return null}return de=kt(de),C&&C[Y]?C.K(W,de,u(Oe)?!!Oe.capture:!1,wt):Ie(C,W,de,!1,Oe,wt)}function Ie(C,W,de,Oe,wt,Ft){if(!W)throw Error("Invalid event type");var ur=u(wt)?!!wt.capture:!!wt,On=bt(C);if(On||(C[X]=On=new K(C)),de=On.add(W,de,Oe,ur,Ft),de.proxy)return de;if(Oe=Re(),de.proxy=Oe,Oe.src=C,Oe.listener=de,C.addEventListener)H||(wt=ur),wt===void 0&&(wt=!1),C.addEventListener(W.toString(),Oe,wt);else if(C.attachEvent)C.attachEvent(lt(W.toString()),Oe);else if(C.addListener&&C.removeListener)C.addListener(Oe);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Re(){function C(de){return W.call(C.src,C.listener,de)}const W=_t;return C}function ze(C,W,de,Oe,wt){if(Array.isArray(W))for(var Ft=0;Ft<W.length;Ft++)ze(C,W[Ft],de,Oe,wt);else Oe=u(Oe)?!!Oe.capture:!!Oe,de=kt(de),C&&C[Y]?(C=C.i,W=String(W).toString(),W in C.g&&(Ft=C.g[W],de=pe(Ft,de,Oe,wt),-1<de&&(le(Ft[de]),Array.prototype.splice.call(Ft,de,1),Ft.length==0&&(delete C.g[W],C.h--)))):C&&(C=bt(C))&&(W=C.g[W.toString()],C=-1,W&&(C=pe(W,de,Oe,wt)),(de=-1<C?W[C]:null)&&st(de))}function st(C){if(typeof C!="number"&&C&&!C.da){var W=C.src;if(W&&W[Y])M(W.i,C);else{var de=C.type,Oe=C.proxy;W.removeEventListener?W.removeEventListener(de,Oe,C.capture):W.detachEvent?W.detachEvent(lt(de),Oe):W.addListener&&W.removeListener&&W.removeListener(Oe),(de=bt(W))?(M(de,C),de.h==0&&(de.src=null,W[X]=null)):le(C)}}}function lt(C){return C in G?G[C]:G[C]="on"+C}function _t(C,W){if(C.da)C=!0;else{W=new Q(W,this);var de=C.listener,Oe=C.ha||C.src;C.fa&&st(C),C=de.call(Oe,W)}return C}function bt(C){return C=C[X],C instanceof K?C:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(C){return typeof C=="function"?C:(C[St]||(C[St]=function(W){return C.handleEvent(W)}),C[St])}function et(){k.call(this),this.i=new K(this),this.M=this,this.F=null}m(et,k),et.prototype[Y]=!0,et.prototype.removeEventListener=function(C,W,de,Oe){ze(this,C,W,de,Oe)};function ce(C,W){var de,Oe=C.F;if(Oe)for(de=[];Oe;Oe=Oe.F)de.push(Oe);if(C=C.M,Oe=W.type||W,typeof W=="string")W=new F(W,C);else if(W instanceof F)W.target=W.target||C;else{var wt=W;W=new F(Oe,C),O(W,wt)}if(wt=!0,de)for(var Ft=de.length-1;0<=Ft;Ft--){var ur=W.g=de[Ft];wt=Qe(ur,Oe,!0,W)&&wt}if(ur=W.g=C,wt=Qe(ur,Oe,!0,W)&&wt,wt=Qe(ur,Oe,!1,W)&&wt,de)for(Ft=0;Ft<de.length;Ft++)ur=W.g=de[Ft],wt=Qe(ur,Oe,!1,W)&&wt}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var C=this.i,W;for(W in C.g){for(var de=C.g[W],Oe=0;Oe<de.length;Oe++)le(de[Oe]);delete C.g[W],C.h--}}this.F=null},et.prototype.K=function(C,W,de,Oe){return this.i.add(String(C),W,!1,de,Oe)},et.prototype.L=function(C,W,de,Oe){return this.i.add(String(C),W,!0,de,Oe)};function Qe(C,W,de,Oe){if(W=C.i.g[String(W)],!W)return!0;W=W.concat();for(var wt=!0,Ft=0;Ft<W.length;++Ft){var ur=W[Ft];if(ur&&!ur.da&&ur.capture==de){var On=ur.listener,vs=ur.ha||ur.src;ur.fa&&M(C.i,ur),wt=On.call(vs,Oe)!==!1&&wt}}return wt&&!Oe.defaultPrevented}function xe(C,W,de){if(typeof C=="function")de&&(C=h(C,de));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:l.setTimeout(C,W||0)}function fe(C){C.g=xe(()=>{C.g=null,C.i&&(C.i=!1,fe(C))},C.l);const W=C.h;C.h=null,C.m.apply(null,W)}class oe extends k{constructor(W,de){super(),this.m=W,this.l=de,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:fe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(C){k.call(this),this.h=C,this.g={}}m(Be,k);var Me=[];function Ze(C){P(C.g,function(W,de){this.g.hasOwnProperty(de)&&st(W)},C),C.g={}}Be.prototype.N=function(){Be.aa.N.call(this),Ze(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=l.JSON.stringify,nt=l.JSON.parse,ke=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function ae(){}ae.prototype.h=null;function De(C){return C.h||(C.h=C.i())}function We(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ct(){F.call(this,"d")}m(ct,F);function Xe(){F.call(this,"c")}m(Xe,F);var Rt={},er=null;function L(){return er=er||new et}Rt.La="serverreachability";function we(C){F.call(this,Rt.La,C)}m(we,F);function Ue(C){const W=L();ce(W,new we(W))}Rt.STAT_EVENT="statevent";function te(C,W){F.call(this,Rt.STAT_EVENT,C),this.stat=W}m(te,F);function Ce(C){const W=L();ce(W,new te(W,C))}Rt.Ma="timingevent";function $e(C,W){F.call(this,Rt.Ma,C),this.size=W}m($e,F);function He(C,W){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},W)}function Ye(){this.g=!0}Ye.prototype.xa=function(){this.g=!1};function mt(C,W,de,Oe,wt,Ft){C.info(function(){if(C.g)if(Ft)for(var ur="",On=Ft.split("&"),vs=0;vs<On.length;vs++){var Cn=On[vs].split("=");if(1<Cn.length){var zn=Cn[0];Cn=Cn[1];var Oa=zn.split("_");ur=2<=Oa.length&&Oa[1]=="type"?ur+(zn+"="+Cn+"&"):ur+(zn+"=redacted&")}}else ur=null;else ur=Ft;return"XMLHTTP REQ ("+Oe+") [attempt "+wt+"]: "+W+`
`+de+`
`+ur})}function rt(C,W,de,Oe,wt,Ft,ur){C.info(function(){return"XMLHTTP RESP ("+Oe+") [ attempt "+wt+"]: "+W+`
`+de+`
`+Ft+" "+ur})}function re(C,W,de,Oe){C.info(function(){return"XMLHTTP TEXT ("+W+"): "+Ae(C,de)+(Oe?" "+Oe:"")})}function ne(C,W){C.info(function(){return"TIMEOUT: "+W})}Ye.prototype.info=function(){};function Ae(C,W){if(!C.g)return W;if(!W)return null;try{var de=JSON.parse(W);if(de){for(C=0;C<de.length;C++)if(Array.isArray(de[C])){var Oe=de[C];if(!(2>Oe.length)){var wt=Oe[1];if(Array.isArray(wt)&&!(1>wt.length)){var Ft=wt[0];if(Ft!="noop"&&Ft!="stop"&&Ft!="close")for(var ur=1;ur<wt.length;ur++)wt[ur]=""}}}}return Je(de)}catch{return W}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function tt(){}m(tt,ae),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},Te=new tt;function ot(C,W,de,Oe){this.j=C,this.i=W,this.l=de,this.R=Oe||1,this.U=new Be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var yt={},Et={};function Ee(C,W,de){C.L=1,C.v=Ho(rr(W)),C.m=de,C.P=!0,ut(C,null)}function ut(C,W){C.F=Date.now(),at(C),C.A=rr(C.v);var de=C.A,Oe=C.R;Array.isArray(Oe)||(Oe=[String(Oe)]),og(de.i,"t",Oe),C.C=0,de=C.j.J,C.h=new vt,C.g=js(C.j,de?W:null,!C.m),0<C.O&&(C.M=new oe(h(C.Y,C,C.g),C.O)),W=C.U,de=C.g,Oe=C.ca;var wt="readystatechange";Array.isArray(wt)||(wt&&(Me[0]=wt.toString()),wt=Me);for(var Ft=0;Ft<wt.length;Ft++){var ur=ie(de,wt[Ft],Oe||W.handleEvent,!1,W.h||W);if(!ur)break;W.g[ur.key]=ur}W=C.H?E(C.H):{},C.m?(C.u||(C.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,W)):(C.u="GET",C.g.ea(C.A,C.u,null,W)),Ue(),mt(C.i,C.u,C.A,C.l,C.R,C.m)}ot.prototype.ca=function(C){C=C.target;const W=this.M;W&&xl(C)==3?W.j():this.Y(C)},ot.prototype.Y=function(C){try{if(C==this.g)e:{const Oa=xl(this.g);var W=this.g.Ba();const gc=this.g.Z();if(!(3>Oa)&&(Oa!=3||this.g&&(this.h.h||this.g.oa()||rm(this.g)))){this.J||Oa!=4||W==7||(W==8||0>=gc?Ue(3):Ue(2)),Jt(this);var de=this.g.Z();this.X=de;t:if(Nt(this)){var Oe=rm(this.g);C="";var wt=Oe.length,Ft=xl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Ot(this);var ur="";break t}this.h.i=new l.TextDecoder}for(W=0;W<wt;W++)this.h.h=!0,C+=this.h.i.decode(Oe[W],{stream:!(Ft&&W==wt-1)});Oe.length=0,this.h.g+=C,this.C=0,ur=this.h.g}else ur=this.g.oa();if(this.o=de==200,rt(this.i,this.u,this.A,this.l,this.R,Oa,de),this.o){if(this.T&&!this.K){t:{if(this.g){var On,vs=this.g;if((On=vs.g?vs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(On)){var Cn=On;break t}}Cn=null}if(de=Cn)re(this.i,this.l,de,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nr(this,de);else{this.o=!1,this.s=3,Ce(12),Vt(this),Ot(this);break e}}if(this.P){de=!0;let $o;for(;!this.J&&this.C<ur.length;)if($o=gt(this,ur),$o==Et){Oa==4&&(this.s=4,Ce(14),de=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if($o==yt){this.s=4,Ce(15),re(this.i,this.l,ur,"[Invalid Chunk]"),de=!1;break}else re(this.i,this.l,$o,null),nr(this,$o);if(Nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oa!=4||ur.length!=0||this.h.h||(this.s=1,Ce(16),de=!1),this.o=this.o&&de,!de)re(this.i,this.l,ur,"[Invalid Chunked Response]"),Vt(this),Ot(this);else if(0<ur.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+ur.length),Ir(zn),zn.M=!0,Ce(11))}}else re(this.i,this.l,ur,null),nr(this,ur);Oa==4&&Vt(this),this.o&&!this.J&&(Oa==4?sn(this.j,this):(this.o=!1,at(this)))}else cg(this.g),de==400&&0<ur.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Vt(this),Ot(this)}}}catch{}finally{}};function Nt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function gt(C,W){var de=C.C,Oe=W.indexOf(`
`,de);return Oe==-1?Et:(de=Number(W.substring(de,Oe)),isNaN(de)?yt:(Oe+=1,Oe+de>W.length?Et:(W=W.slice(Oe,Oe+de),C.C=Oe+de,W)))}ot.prototype.cancel=function(){this.J=!0,Vt(this)};function at(C){C.S=Date.now()+C.I,zt(C,C.I)}function zt(C,W){if(C.B!=null)throw Error("WatchDog timer not null");C.B=He(h(C.ba,C),W)}function Jt(C){C.B&&(l.clearTimeout(C.B),C.B=null)}ot.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(ne(this.i,this.A),this.L!=2&&(Ue(),Ce(17)),Vt(this),this.s=2,Ot(this)):zt(this,this.S-C)};function Ot(C){C.j.G==0||C.J||sn(C.j,C)}function Vt(C){Jt(C);var W=C.M;W&&typeof W.ma=="function"&&W.ma(),C.M=null,Ze(C.U),C.g&&(W=C.g,C.g=null,W.abort(),W.ma())}function nr(C,W){try{var de=C.j;if(de.G!=0&&(de.g==C||vn(de.h,C))){if(!C.K&&vn(de.h,C)&&de.G==3){try{var Oe=de.Da.g.parse(W)}catch{Oe=null}if(Array.isArray(Oe)&&Oe.length==3){var wt=Oe;if(wt[0]==0){e:if(!de.u){if(de.g)if(de.g.F+3e3<C.F)Xr(de),ru(de);else break e;Xt(de),Ce(18)}}else de.za=wt[1],0<de.za-de.T&&37500>wt[2]&&de.F&&de.v==0&&!de.C&&(de.C=He(h(de.Za,de),6e3));if(1>=Fn(de.h)&&de.ca){try{de.ca()}catch{}de.ca=void 0}}else ea(de,11)}else if((C.K||de.g==C)&&Xr(de),!y(W))for(wt=de.Da.g.parse(W),W=0;W<wt.length;W++){let Cn=wt[W];if(de.T=Cn[0],Cn=Cn[1],de.G==2)if(Cn[0]=="c"){de.K=Cn[1],de.ia=Cn[2];const zn=Cn[3];zn!=null&&(de.la=zn,de.j.info("VER="+de.la));const Oa=Cn[4];Oa!=null&&(de.Aa=Oa,de.j.info("SVER="+de.Aa));const gc=Cn[5];gc!=null&&typeof gc=="number"&&0<gc&&(Oe=1.5*gc,de.L=Oe,de.j.info("backChannelRequestTimeoutMs_="+Oe)),Oe=de;const $o=C.g;if($o){const go=$o.g?$o.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var Ft=Oe.h;Ft.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(Ft.j=Ft.l,Ft.g=new Set,Ft.h&&(Na(Ft,Ft.h),Ft.h=null))}if(Oe.D){const zu=$o.g?$o.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(Oe.ya=zu,an(Oe.I,Oe.D,zu))}}de.G=3,de.l&&de.l.ua(),de.ba&&(de.R=Date.now()-C.F,de.j.info("Handshake RTT: "+de.R+"ms")),Oe=de;var ur=C;if(Oe.qa=la(Oe,Oe.J?Oe.ia:null,Oe.W),ur.K){Ku(Oe.h,ur);var On=ur,vs=Oe.L;vs&&(On.I=vs),On.B&&(Jt(On),at(On)),Oe.g=ur}else Kt(Oe);0<de.i.length&&U(de)}else Cn[0]!="stop"&&Cn[0]!="close"||ea(de,7);else de.G==3&&(Cn[0]=="stop"||Cn[0]=="close"?Cn[0]=="stop"?ea(de,7):th(de):Cn[0]!="noop"&&de.l&&de.l.ta(Cn),de.v=0)}}Ue(4)}catch{}}var Ht=class{constructor(C,W){this.g=C,this.map=W}};function Nr(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Or(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Fn(C){return C.h?1:C.g?C.g.size:0}function vn(C,W){return C.h?C.h==W:C.g?C.g.has(W):!1}function Na(C,W){C.g?C.g.add(W):C.h=W}function Ku(C,W){C.h&&C.h==W?C.h=null:C.g&&C.g.has(W)&&C.g.delete(W)}Nr.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Rn(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let W=C.i;for(const de of C.g.values())W=W.concat(de.D);return W}return p(C.i)}function ft(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var W=[],de=C.length,Oe=0;Oe<de;Oe++)W.push(C[Oe]);return W}W=[],de=0;for(Oe in C)W[de++]=C[Oe];return W}function xr(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var W=[];C=C.length;for(var de=0;de<C;de++)W.push(de);return W}W=[],de=0;for(const Oe in C)W[de++]=Oe;return W}}}function vr(C,W){if(C.forEach&&typeof C.forEach=="function")C.forEach(W,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,W,void 0);else for(var de=xr(C),Oe=ft(C),wt=Oe.length,Ft=0;Ft<wt;Ft++)W.call(void 0,Oe[Ft],de&&de[Ft],C)}var fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(C,W){if(C){C=C.split("&");for(var de=0;de<C.length;de++){var Oe=C[de].indexOf("="),wt=null;if(0<=Oe){var Ft=C[de].substring(0,Oe);wt=C[de].substring(Oe+1)}else Ft=C[de];W(Ft,wt?decodeURIComponent(wt.replace(/\+/g," ")):"")}}}function or(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof or){this.h=C.h,gr(this,C.j),this.o=C.o,this.g=C.g,Vr(this,C.s),this.l=C.l;var W=C.i,de=new po;de.i=W.i,W.g&&(de.g=new Map(W.g),de.h=W.h),gn(this,de),this.m=C.m}else C&&(W=String(C).match(fr))?(this.h=!1,gr(this,W[1]||"",!0),this.o=si(W[2]||""),this.g=si(W[3]||"",!0),Vr(this,W[4]),this.l=si(W[5]||"",!0),gn(this,W[6]||"",!0),this.m=si(W[7]||"")):(this.h=!1,this.i=new po(null,this.h))}or.prototype.toString=function(){var C=[],W=this.j;W&&C.push(pi(W,If,!0),":");var de=this.g;return(de||W=="file")&&(C.push("//"),(W=this.o)&&C.push(pi(W,If,!0),"@"),C.push(encodeURIComponent(String(de)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.s,de!=null&&C.push(":",String(de))),(de=this.l)&&(this.g&&de.charAt(0)!="/"&&C.push("/"),C.push(pi(de,de.charAt(0)=="/"?Z0:XA,!0))),(de=this.i.toString())&&C.push("?",de),(de=this.m)&&C.push("#",pi(de,ig)),C.join("")};function rr(C){return new or(C)}function gr(C,W,de){C.j=de?si(W,!0):W,C.j&&(C.j=C.j.replace(/:$/,""))}function Vr(C,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);C.s=W}else C.s=null}function gn(C,W,de){W instanceof po?(C.i=W,Gv(C.i,C.h)):(de||(W=pi(W,Md)),C.i=new po(W,C.h))}function an(C,W,de){C.i.set(W,de)}function Ho(C){return an(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function si(C,W){return C?W?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function pi(C,W,de){return typeof C=="string"?(C=encodeURI(C).replace(W,Kl),de&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Kl(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var If=/[#\/\?@]/g,XA=/[#\?:]/g,Z0=/[#\?]/g,Md=/[#\?@]/g,ig=/#/g;function po(C,W){this.h=this.g=null,this.i=C||null,this.j=!!W}function Jc(C){C.g||(C.g=new Map,C.h=0,C.i&&ir(C.i,function(W,de){C.add(decodeURIComponent(W.replace(/\+/g," ")),de)}))}t=po.prototype,t.add=function(C,W){Jc(this),this.i=null,C=Wr(this,C);var de=this.g.get(C);return de||this.g.set(C,de=[]),de.push(W),this.h+=1,this};function Ld(C,W){Jc(C),W=Wr(C,W),C.g.has(W)&&(C.i=null,C.h-=C.g.get(W).length,C.g.delete(W))}function YA(C,W){return Jc(C),W=Wr(C,W),C.g.has(W)}t.forEach=function(C,W){Jc(this),this.g.forEach(function(de,Oe){de.forEach(function(wt){C.call(W,wt,Oe,this)},this)},this)},t.na=function(){Jc(this);const C=Array.from(this.g.values()),W=Array.from(this.g.keys()),de=[];for(let Oe=0;Oe<W.length;Oe++){const wt=C[Oe];for(let Ft=0;Ft<wt.length;Ft++)de.push(W[Oe])}return de},t.V=function(C){Jc(this);let W=[];if(typeof C=="string")YA(this,C)&&(W=W.concat(this.g.get(Wr(this,C))));else{C=Array.from(this.g.values());for(let de=0;de<C.length;de++)W=W.concat(C[de])}return W},t.set=function(C,W){return Jc(this),this.i=null,C=Wr(this,C),YA(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[W]),this.h+=1,this},t.get=function(C,W){return C?(C=this.V(C),0<C.length?String(C[0]):W):W};function og(C,W,de){Ld(C,W),0<de.length&&(C.i=null,C.g.set(Wr(C,W),p(de)),C.h+=de.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],W=Array.from(this.g.keys());for(var de=0;de<W.length;de++){var Oe=W[de];const Ft=encodeURIComponent(String(Oe)),ur=this.V(Oe);for(Oe=0;Oe<ur.length;Oe++){var wt=Ft;ur[Oe]!==""&&(wt+="="+encodeURIComponent(String(ur[Oe]))),C.push(wt)}}return this.i=C.join("&")};function Wr(C,W){return W=String(W),C.j&&(W=W.toLowerCase()),W}function Gv(C,W){W&&!C.j&&(Jc(C),C.i=null,C.g.forEach(function(de,Oe){var wt=Oe.toLowerCase();Oe!=wt&&(Ld(this,Oe),og(this,wt,de))},C)),C.j=W}function qv(C,W){const de=new Ye;if(l.Image){const Oe=new Image;Oe.onload=A(Gi,de,"TestLoadImage: loaded",!0,W,Oe),Oe.onerror=A(Gi,de,"TestLoadImage: error",!1,W,Oe),Oe.onabort=A(Gi,de,"TestLoadImage: abort",!1,W,Oe),Oe.ontimeout=A(Gi,de,"TestLoadImage: timeout",!1,W,Oe),l.setTimeout(function(){Oe.ontimeout&&Oe.ontimeout()},1e4),Oe.src=C}else W(!1)}function zv(C,W){const de=new Ye,Oe=new AbortController,wt=setTimeout(()=>{Oe.abort(),Gi(de,"TestPingServer: timeout",!1,W)},1e4);fetch(C,{signal:Oe.signal}).then(Ft=>{clearTimeout(wt),Ft.ok?Gi(de,"TestPingServer: ok",!0,W):Gi(de,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(wt),Gi(de,"TestPingServer: error",!1,W)})}function Gi(C,W,de,Oe,wt){try{wt&&(wt.onload=null,wt.onerror=null,wt.onabort=null,wt.ontimeout=null),Oe(de)}catch{}}function Gu(){this.g=new ke}function Wv(C,W,de){const Oe=de||"";try{vr(C,function(wt,Ft){let ur=wt;u(wt)&&(ur=Je(wt)),W.push(Oe+Ft+"="+encodeURIComponent(ur))})}catch(wt){throw W.push(Oe+"type="+encodeURIComponent("_badmap")),wt}}function JA(C){this.l=C.Ub||null,this.j=C.eb||!1}m(JA,ae),JA.prototype.g=function(){return new qu(this.l,this.j)},JA.prototype.i=function(C){return function(){return C}}({});function qu(C,W){et.call(this),this.D=C,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(qu,et),t=qu.prototype,t.open=function(C,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=W,this.readyState=1,Bf(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(W.body=C),(this.D||l).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Bf(this)),this.g&&(this.readyState=3,Bf(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZA(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function ZA(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var W=C.value?C.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!C.done}))&&(this.response=this.responseText+=W)}C.done?pc(this):Bf(this),this.readyState==3&&ZA(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,pc(this))},t.Qa=function(C){this.g&&(this.response=C,pc(this))},t.ga=function(){this.g&&pc(this)};function pc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Bf(C)}t.setRequestHeader=function(C,W){this.u.append(C,W)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],W=this.h.entries();for(var de=W.next();!de.done;)de=de.value,C.push(de[0]+": "+de[1]),de=W.next();return C.join(`\r
`)};function Bf(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Zc(C){let W="";return P(C,function(de,Oe){W+=Oe,W+=":",W+=de,W+=`\r
`}),W}function em(C,W,de){e:{for(Oe in de){var Oe=!1;break e}Oe=!0}Oe||(de=Zc(de),typeof C=="string"?de!=null&&encodeURIComponent(String(de)):an(C,W,de))}function Ca(C){et.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ca,et);var tm=/^https?$/i,lg=["POST","PUT"];t=Ca.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,W,de,Oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);W=W?W.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?De(this.o):De(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(W,String(C),!0),this.B=!1}catch(Ft){eu(this,Ft);return}if(C=de||"",de=new Map(this.headers),Oe)if(Object.getPrototypeOf(Oe)===Object.prototype)for(var wt in Oe)de.set(wt,Oe[wt]);else if(typeof Oe.keys=="function"&&typeof Oe.get=="function")for(const Ft of Oe.keys())de.set(Ft,Oe.get(Ft));else throw Error("Unknown input type for opt_headers: "+String(Oe));Oe=Array.from(de.keys()).find(Ft=>Ft.toLowerCase()=="content-type"),wt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(lg,W,void 0))||Oe||wt||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ft,ur]of de)this.g.setRequestHeader(Ft,ur);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qd(this),this.u=!0,this.g.send(C),this.u=!1}catch(Ft){eu(this,Ft)}};function eu(C,W){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=W,C.m=5,eh(C),Ud(C)}function eh(C){C.A||(C.A=!0,ce(C,"complete"),ce(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,ce(this,"complete"),ce(this,"abort"),Ud(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ud(this,!0)),Ca.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pf(this):this.bb())},t.bb=function(){Pf(this)};function Pf(C){if(C.h&&typeof i<"u"&&(!C.v[1]||xl(C)!=4||C.Z()!=2)){if(C.u&&xl(C)==4)xe(C.Ea,0,C);else if(ce(C,"readystatechange"),xl(C)==4){C.h=!1;try{const ur=C.Z();e:switch(ur){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var de;if(!(de=W)){var Oe;if(Oe=ur===0){var wt=String(C.D).match(fr)[1]||null;!wt&&l.self&&l.self.location&&(wt=l.self.location.protocol.slice(0,-1)),Oe=!tm.test(wt?wt.toLowerCase():"")}de=Oe}if(de)ce(C,"complete"),ce(C,"success");else{C.m=6;try{var Ft=2<xl(C)?C.g.statusText:""}catch{Ft=""}C.l=Ft+" ["+C.Z()+"]",eh(C)}}finally{Ud(C)}}}}function Ud(C,W){if(C.g){Qd(C);const de=C.g,Oe=C.v[0]?()=>{}:null;C.g=null,C.v=null,W||ce(C,"ready");try{de.onreadystatechange=Oe}catch{}}}function Qd(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function xl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<xl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var W=this.g.responseText;return C&&W.indexOf(C)==0&&(W=W.substring(C.length)),nt(W)}};function rm(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function cg(C){const W={};C=(C.g&&2<=xl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Oe=0;Oe<C.length;Oe++){if(y(C[Oe]))continue;var de=S(C[Oe]);const wt=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const Ft=W[wt]||[];W[wt]=Ft,Ft.push(de)}_(W,function(Oe){return Oe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(C,W,de){return de&&de.internalChannelParams&&de.internalChannelParams[C]||W}function tu(C){this.Aa=0,this.i=[],this.j=new Ye,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,C),this.cb=vl("retryDelaySeedMs",1e4,C),this.Wa=vl("forwardChannelMaxRetries",2,C),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Nr(C&&C.concurrentRequestLimit),this.Da=new Gu,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tu.prototype,t.la=8,t.G=1,t.connect=function(C,W,de,Oe){Ce(0),this.W=C,this.H=W||{},de&&Oe!==void 0&&(this.H.OSID=de,this.H.OAID=Oe),this.F=this.X,this.I=la(this,null,this.W),U(this)};function th(C){if(nm(C),C.G==3){var W=C.U++,de=rr(C.I);if(an(de,"SID",C.K),an(de,"RID",W),an(de,"TYPE","terminate"),it(C,de),W=new ot(C,C.j,W),W.L=2,W.v=Ho(rr(de)),de=!1,l.navigator&&l.navigator.sendBeacon)try{de=l.navigator.sendBeacon(W.v.toString(),"")}catch{}!de&&l.Image&&(new Image().src=W.v,de=!0),de||(W.g=js(W.j,null),W.g.ea(W.v)),W.F=Date.now(),at(W)}ps(C)}function ru(C){C.g&&(Ir(C),C.g.cancel(),C.g=null)}function nm(C){ru(C),C.u&&(l.clearTimeout(C.u),C.u=null),Xr(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function U(C){if(!Or(C.h)&&!C.s){C.s=!0;var W=C.Ga;he||ve(),me||(he(),me=!0),Z.add(W,C),C.B=0}}function ye(C,W){return Fn(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=W.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=He(h(C.Ga,C,W),Bn(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const wt=new ot(this,this.j,C);let Ft=this.o;if(this.S&&(Ft?(Ft=E(Ft),O(Ft,this.S)):Ft=this.S),this.m!==null||this.O||(wt.H=Ft,Ft=null),this.P)e:{for(var W=0,de=0;de<this.i.length;de++){t:{var Oe=this.i[de];if("__data__"in Oe.map&&(Oe=Oe.map.__data__,typeof Oe=="string")){Oe=Oe.length;break t}Oe=void 0}if(Oe===void 0)break;if(W+=Oe,4096<W){W=de;break e}if(W===4096||de===this.i.length-1){W=de+1;break e}}W=1e3}else W=1e3;W=xt(this,wt,W),de=rr(this.I),an(de,"RID",C),an(de,"CVER",22),this.D&&an(de,"X-HTTP-Session-Id",this.D),it(this,de),Ft&&(this.O?W="headers="+encodeURIComponent(String(Zc(Ft)))+"&"+W:this.m&&em(de,this.m,Ft)),Na(this.h,wt),this.Ua&&an(de,"TYPE","init"),this.P?(an(de,"$req",W),an(de,"SID","null"),wt.T=!0,Ee(wt,de,null)):Ee(wt,de,W),this.G=2}}else this.G==3&&(C?Ke(this,C):this.i.length==0||Or(this.h)||Ke(this))};function Ke(C,W){var de;W?de=W.l:de=C.U++;const Oe=rr(C.I);an(Oe,"SID",C.K),an(Oe,"RID",de),an(Oe,"AID",C.T),it(C,Oe),C.m&&C.o&&em(Oe,C.m,C.o),de=new ot(C,C.j,de,C.B+1),C.m===null&&(de.H=C.o),W&&(C.i=W.D.concat(C.i)),W=xt(C,de,1e3),de.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Na(C.h,de),Ee(de,Oe,W)}function it(C,W){C.H&&P(C.H,function(de,Oe){an(W,Oe,de)}),C.l&&vr({},function(de,Oe){an(W,Oe,de)})}function xt(C,W,de){de=Math.min(C.i.length,de);var Oe=C.l?h(C.l.Na,C.l,C):null;e:{var wt=C.i;let Ft=-1;for(;;){const ur=["count="+de];Ft==-1?0<de?(Ft=wt[0].g,ur.push("ofs="+Ft)):Ft=0:ur.push("ofs="+Ft);let On=!0;for(let vs=0;vs<de;vs++){let Cn=wt[vs].g;const zn=wt[vs].map;if(Cn-=Ft,0>Cn)Ft=Math.max(0,wt[vs].g-100),On=!1;else try{Wv(zn,ur,"req"+Cn+"_")}catch{Oe&&Oe(zn)}}if(On){Oe=ur.join("&");break e}}}return C=C.i.splice(0,de),W.D=C,Oe}function Kt(C){if(!C.g&&!C.u){C.Y=1;var W=C.Fa;he||ve(),me||(he(),me=!0),Z.add(W,C),C.v=0}}function Xt(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=He(h(C.Fa,C),Bn(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Dr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=He(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),ru(this),Dr(this))};function Ir(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Dr(C){C.g=new ot(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var W=rr(C.qa);an(W,"RID","rpc"),an(W,"SID",C.K),an(W,"AID",C.T),an(W,"CI",C.F?"0":"1"),!C.F&&C.ja&&an(W,"TO",C.ja),an(W,"TYPE","xmlhttp"),it(C,W),C.m&&C.o&&em(W,C.m,C.o),C.L&&(C.g.I=C.L);var de=C.g;C=C.ia,de.L=1,de.v=Ho(rr(W)),de.m=null,de.P=!0,ut(de,C)}t.Za=function(){this.C!=null&&(this.C=null,ru(this),Xt(this),Ce(19))};function Xr(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function sn(C,W){var de=null;if(C.g==W){Xr(C),Ir(C),C.g=null;var Oe=2}else if(vn(C.h,W))de=W.D,Ku(C.h,W),Oe=1;else return;if(C.G!=0){if(W.o)if(Oe==1){de=W.m?W.m.length:0,W=Date.now()-W.F;var wt=C.B;Oe=L(),ce(Oe,new $e(Oe,de)),U(C)}else Kt(C);else if(wt=W.s,wt==3||wt==0&&0<W.X||!(Oe==1&&ye(C,W)||Oe==2&&Xt(C)))switch(de&&0<de.length&&(W=C.h,W.i=W.i.concat(de)),wt){case 1:ea(C,5);break;case 4:ea(C,10);break;case 3:ea(C,6);break;default:ea(C,2)}}}function Bn(C,W){let de=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(de*=2),de*W}function ea(C,W){if(C.j.info("Error code "+W),W==2){var de=h(C.fb,C),Oe=C.Xa;const wt=!Oe;Oe=new or(Oe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gr(Oe,"https"),Ho(Oe),wt?qv(Oe.toString(),de):zv(Oe.toString(),de)}else Ce(2);C.G=0,C.l&&C.l.sa(W),ps(C),nm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function ps(C){if(C.G=0,C.ka=[],C.l){const W=Rn(C.h);(W.length!=0||C.i.length!=0)&&(g(C.ka,W),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function la(C,W,de){var Oe=de instanceof or?rr(de):new or(de);if(Oe.g!="")W&&(Oe.g=W+"."+Oe.g),Vr(Oe,Oe.s);else{var wt=l.location;Oe=wt.protocol,W=W?W+"."+wt.hostname:wt.hostname,wt=+wt.port;var Ft=new or(null);Oe&&gr(Ft,Oe),W&&(Ft.g=W),wt&&Vr(Ft,wt),de&&(Ft.l=de),Oe=Ft}return de=C.D,W=C.ya,de&&W&&an(Oe,de,W),an(Oe,"VER",C.la),it(C,Oe),Oe}function js(C,W,de){if(W&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=C.Ca&&!C.pa?new Ca(new JA({eb:de})):new Ca(C.pa),W.Ha(C.J),W}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gs(){}t=gs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ts(){}Ts.prototype.g=function(C,W){return new xs(C,W)};function xs(C,W){et.call(this),this.g=new tu(W),this.l=C,this.h=W&&W.messageUrlParams||null,C=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(C?C["X-WebChannel-Content-Type"]=W.messageContentType:C={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(C?C["X-WebChannel-Client-Profile"]=W.va:C={"X-WebChannel-Client-Profile":W.va}),this.g.S=C,(C=W&&W.Sb)&&!y(C)&&(this.g.m=C),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!y(W)&&(this.g.D=W,C=this.h,C!==null&&W in C&&(C=this.h,W in C&&delete C[W])),this.j=new au(this)}m(xs,et),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){th(this.g)},xs.prototype.o=function(C){var W=this.g;if(typeof C=="string"){var de={};de.__data__=C,C=de}else this.u&&(de={},de.__data__=Je(C),C=de);W.i.push(new Ht(W.Ya++,C)),W.G==3&&U(W)},xs.prototype.N=function(){this.g.l=null,delete this.j,th(this.g),delete this.g,xs.aa.N.call(this)};function Gl(C){ct.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var W=C.__sm__;if(W){e:{for(const de in W){C=de;break e}C=void 0}(this.i=C)&&(C=this.i,W=W!==null&&C in W?W[C]:void 0),this.data=W}else this.data=C}m(Gl,ct);function nu(){Xe.call(this),this.status=1}m(nu,Xe);function au(C){this.g=C}m(au,gs),au.prototype.ua=function(){ce(this.g,"a")},au.prototype.ta=function(C){ce(this.g,new Gl(C))},au.prototype.sa=function(C){ce(this.g,new nu)},au.prototype.ra=function(){ce(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,zX=function(){return new Ts},qX=function(){return L()},GX=Rt,Mj={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,A_=ue,Ne.COMPLETE="complete",KX=Ne,We.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",et.prototype.listen=et.prototype.K,ry=We,Ca.prototype.listenOnce=Ca.prototype.L,Ca.prototype.getLastError=Ca.prototype.Ka,Ca.prototype.getLastErrorCode=Ca.prototype.Ba,Ca.prototype.getStatus=Ca.prototype.Z,Ca.prototype.getResponseJson=Ca.prototype.Oa,Ca.prototype.getResponseText=Ca.prototype.oa,Ca.prototype.send=Ca.prototype.ea,Ca.prototype.setWithCredentials=Ca.prototype.Ha,$X=Ca}).apply(typeof mN<"u"?mN:typeof self<"u"?self:typeof window<"u"?window:{});const WL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jo.UNAUTHENTICATED=new jo(null),jo.GOOGLE_CREDENTIALS=new jo("google-credentials-uid"),jo.FIRST_PARTY=new jo("first-party-uid"),jo.MOCK_USER=new jo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new uO("@firebase/firestore");function Vg(){return pp.logLevel}function lr(t,...e){if(pp.logLevel<=Tn.DEBUG){const r=e.map(_O);pp.debug(`Firestore (${wv}): ${t}`,...r)}}function Ol(t,...e){if(pp.logLevel<=Tn.ERROR){const r=e.map(_O);pp.error(`Firestore (${wv}): ${t}`,...r)}}function N0(t,...e){if(pp.logLevel<=Tn.WARN){const r=e.map(_O);pp.warn(`Firestore (${wv}): ${t}`,...r)}}function _O(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t="Unexpected state"){const e=`FIRESTORE (${wv}) INTERNAL ASSERTION FAILED: `+t;throw Ol(e),new Error(e)}function Ur(t,e){t||Fr()}function nn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dr extends MA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(jo.UNAUTHENTICATED))}shutdown(){}}class ppe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class gpe{constructor(e){this.t=e,this.currentUser=jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ur(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new vd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vd,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vd)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ur(typeof n.accessToken=="string"),new WX(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ur(e===null||typeof e=="string"),new jo(e)}}class xpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=jo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new xpe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(jo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ype{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ur(this.o===void 0);const n=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ur(typeof r.token=="string"),this.R=r.token,new ype(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=wpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function fn(t,e){return t<e?-1:t>e?1:0}function Gx(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function YX(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new tr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $r(e)}static min(){return new $r(new tr(0,0))}static max(){return new $r(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,r,n){r===void 0?r=0:r>e.length&&Fr(),n===void 0?n=e.length-r:n>e.length-r&&Fr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return E2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof E2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Yn extends E2{construct(e,r,n){return new Yn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Yn(r)}static emptyPath(){return new Yn([])}}const Npe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends E2{construct(e,r,n){return new us(e,r,n)}static isValidIdentifier(e){return Npe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new us(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new dr(Qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new dr(Qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new dr(Qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new us(r)}static emptyPath(){return new us([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.path=e}static fromPath(e){return new br(Yn.fromString(e))}static fromName(e){return new br(Yn.fromString(e).popFirst(5))}static empty(){return new br(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Yn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new br(new Yn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function Lj(t){return t.fields.find(e=>e.kind===2)}function ym(t){return t.fields.filter(e=>e.kind!==2)}mE.UNKNOWN_ID=-1;class h_{constructor(e,r){this.fieldPath=e,this.kind=r}}class S2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new S2(0,$c.min())}}function Cpe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=$r.fromTimestamp(n===1e9?new tr(r+1,0):new tr(r,n));return new $c(a,br.empty(),e)}function JX(t){return new $c(t.readTime,t.key,-1)}class $c{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new $c($r.min(),br.empty(),-1)}static max(){return new $c($r.max(),br.empty(),-1)}}function SO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=br.comparator(t.documentKey,e.documentKey),r!==0?r:fn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(t){if(t.code!==Qt.FAILED_PRECONDITION||t.message!==ZX)throw t;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Fr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new jt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof jt?r:jt.resolve(r)}catch(r){return jt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):jt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):jt.reject(r)}static resolve(e){return new jt((r,n)=>{r(e)})}static reject(e){return new jt((r,n)=>{n(e)})}static waitFor(e){return new jt((r,n)=>{let a=0,s=0,i=!1;e.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=jt.resolve(!1);for(const n of e)r=r.next(a=>a?jt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new jt((n,a)=>{const s=e.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new jt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new vd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Ty(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=IO(n.target.error);this.V.reject(new Ty(e,a))}}static open(e,r,n,a){try{return new _I(r,e.transaction(a,n))}catch(s){throw new Ty(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(lr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Epe(r)}}class h0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,h0.S(Mi())===12.2&&Ol("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return lr("SimpleDb","Removing database:",e),Sm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!rX())return!1;if(h0.v())return!0;const e=Mi(),r=h0.S(e),n=0<r&&r<10,a=tY(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(lr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new Ty(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new dr(Qt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new dr(Qt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Ty(e,i))},a.onupgradeneeded=s=>{lr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{lr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=_I.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),jt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&i<3;if(lr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class _pe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Sm(this.B.delete())}}class Ty extends dr{constructor(e,r){super(Qt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function $0(t){return t.name==="IndexedDbTransactionError"}class Epe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(lr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(lr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Sm(n)}add(e){return lr("SimpleDb","ADD",this.store.name,e,e),Sm(this.store.add(e))}get(e){return Sm(this.store.get(e)).next(r=>(r===void 0&&(r=null),lr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return lr("SimpleDb","DELETE",this.store.name,e),Sm(this.store.delete(e))}count(){return lr("SimpleDb","COUNT",this.store.name),Sm(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new jt((i,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(l,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new jt((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){lr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new jt((n,a)=>{r.onerror=s=>{const i=IO(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new jt((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void a();const c=new _pe(l),u=r(l.primaryKey,l.value,c);if(u instanceof jt){const d=u.catch(f=>(c.done(),jt.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>jt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Sm(t){return new jt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=IO(n.target.error);r(a)}})}let XL=!1;function IO(t){const e=h0.S(Mi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new dr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XL||(XL=!0,setTimeout(()=>{throw n},0)),n}}return t}class Spe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){lr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{lr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){$0(r)?lr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Vp(r)}await this.X(6e4)})}}class Ipe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return jt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return lr("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(l=>{a-=l,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(l=>(lr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=JX(s);SO(i,n)>0&&(n=i)}),new $c(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Eu.oe=-1;function Lb(t){return t==null}function I2(t){return t===0&&1/t==-1/0}function Bpe(t){return typeof t=="number"&&Number.isInteger(t)&&!I2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=YL(e)),e=Ppe(t.get(r),e);return YL(e)}function Ppe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function YL(t){return t+""}function nf(t){const e=t.length;if(Ur(e>=2),e===2)return Ur(t.charAt(0)===""&&t.charAt(1)===""),Yn.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Fr(),t.charAt(i+1)){case"":const l=t.substring(s,i);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:Fr()}s=i+2}return new Yn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t,e){return[t,Ml(e)]}function rY(t,e,r){return[t,Ml(e),r]}const jpe={},Tpe=["prefixPath","collectionGroup","readTime","documentId"],kpe=["prefixPath","collectionGroup","documentId"],Fpe=["collectionGroup","readTime","prefixPath","documentId"],Ope=["canonicalId","targetId"],Dpe=["targetId","path"],Rpe=["path","targetId"],Mpe=["collectionId","parent"],Lpe=["indexId","uid"],Upe=["uid","sequenceNumber"],Qpe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vpe=["indexId","uid","orderedDocumentKey"],Hpe=["userId","collectionPath","documentId"],$pe=["userId","collectionPath","largestBatchId"],Kpe=["userId","collectionGroup","largestBatchId"],nY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gpe=[...nY,"documentOverlays"],aY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sY=aY,BO=[...sY,"indexConfiguration","indexState","indexEntries"],qpe=BO,zpe=[...BO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj extends eY{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Qi(t,e){const r=nn(t);return h0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Hp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function iY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,r){this.comparator=e,this.root=r||To.EMPTY}insert(e,r){return new hs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,To.BLACK,null,null))}remove(e){return new hs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,To.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pN(this.root,e,this.comparator,!1)}getReverseIterator(){return new pN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pN(this.root,e,this.comparator,!0)}}class pN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class To{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??To.RED,this.left=a??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new To(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return To.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fr();const e=this.left.check();if(e!==this.right.check())throw Fr();return e+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw Fr()}get value(){throw Fr()}get color(){throw Fr()}get left(){throw Fr()}get right(){throw Fr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new To(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.comparator=e,this.data=new hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new eU(this.data.getIterator())}getIteratorFrom(e){return new eU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ia(this.comparator);return r.data=e,r}}class eU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.fields=e,e.sort(us.comparator)}static empty(){return new sc([])}unionWith(e){let r=new Ia(us.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gx(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oY("Invalid base64 string: "+s):s}}(e);return new ni(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new ni(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const Wpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _A(t){if(Ur(!!t),typeof t=="string"){let e=0;const r=Wpe.exec(t);if(Ur(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:os(t.seconds),nanos:os(t.nanos)}}function os(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function C0(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function jO(t){const e=t.mapValue.fields.__previous_value__;return PO(e)?jO(e):e}function B2(t){const e=_A(t.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xpe{constructor(e,r,n,a,s,i,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class _0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new _0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},p_={nullValue:"NULL_VALUE"};function gp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?PO(t)?4:lY(t)?9007199254740991:EI(t)?10:11:Fr()}function mf(t,e){if(t===e)return!0;const r=gp(t);if(r!==gp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return B2(t).isEqual(B2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=_A(a.timestampValue),l=_A(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return C0(a.bytesValue).isEqual(C0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return os(a.geoPointValue.latitude)===os(s.geoPointValue.latitude)&&os(a.geoPointValue.longitude)===os(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return os(a.integerValue)===os(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=os(a.doubleValue),l=os(s.doubleValue);return i===l?I2(i)===I2(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return Gx(t.arrayValue.values||[],e.arrayValue.values||[],mf);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(ZL(i)!==ZL(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!mf(i[c],l[c])))return!1;return!0}(t,e);default:return Fr()}}function P2(t,e){return(t.values||[]).find(r=>mf(r,e))!==void 0}function E0(t,e){if(t===e)return 0;const r=gp(t),n=gp(e);if(r!==n)return fn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return fn(t.booleanValue,e.booleanValue);case 2:return function(s,i){const l=os(s.integerValue||s.doubleValue),c=os(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return tU(t.timestampValue,e.timestampValue);case 4:return tU(B2(t),B2(e));case 5:return fn(t.stringValue,e.stringValue);case 6:return function(s,i){const l=C0(s),c=C0(i);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=fn(l[u],c[u]);if(d!==0)return d}return fn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const l=fn(os(s.latitude),os(i.latitude));return l!==0?l:fn(os(s.longitude),os(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var l,c,u,d;const f=s.fields||{},h=i.fields||{},A=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=fn(((u=A==null?void 0:A.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:rU(A,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Wh.mapValue&&i===Wh.mapValue)return 0;if(s===Wh.mapValue)return 1;if(i===Wh.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=fn(c[f],d[f]);if(h!==0)return h;const A=E0(l[c[f]],u[d[f]]);if(A!==0)return A}return fn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Fr()}}function tU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fn(t,e);const r=_A(t),n=_A(e),a=fn(r.seconds,n.seconds);return a!==0?a:fn(r.nanos,n.nanos)}function rU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=E0(r[a],n[a]);if(s)return s}return fn(r.length,n.length)}function qx(t){return Qj(t)}function Qj(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=_A(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return C0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return br.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Qj(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${Qj(r.fields[i])}`;return a+"}"}(t.mapValue):Fr()}function j2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vj(t){return!!t&&"integerValue"in t}function T2(t){return!!t&&"arrayValue"in t}function nU(t){return!!t&&"nullValue"in t}function aU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function g_(t){return!!t&&"mapValue"in t}function EI(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ky(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ky(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ky(t.arrayValue.values[r]);return e}return Object.assign({},t)}function lY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const cY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ype(t){return"nullValue"in t?p_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?j2(_0.empty(),br.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?EI(t)?cY:{mapValue:{}}:Fr()}function Jpe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?j2(_0.empty(),br.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?cY:"mapValue"in t?EI(t)?{mapValue:{}}:Wh:Fr()}function sU(t,e){const r=E0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function iU(t,e){const r=E0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!g_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ky(r)}setAll(e){let r=us.emptyPath(),n={},a=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=ky(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());g_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return mf(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];g_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Hp(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Oo(ky(this.value))}}function uY(t){const e=[];return Hp(t.fields,(r,n)=>{const a=new us([r]);if(g_(n)){const s=uY(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new sc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,r,n,a,s,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(e){return new cs(e,0,$r.min(),$r.min(),$r.min(),Oo.empty(),0)}static newFoundDocument(e,r,n,a){return new cs(e,1,r,$r.min(),n,a,0)}static newNoDocument(e,r){return new cs(e,2,r,$r.min(),$r.min(),Oo.empty(),0)}static newUnknownDocument(e,r){return new cs(e,3,r,$r.min(),$r.min(),Oo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($r.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$r.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,r){this.position=e,this.inclusive=r}}function oU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=br.comparator(br.fromName(i.referenceValue),r.key):n=E0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function lU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!mf(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,r="asc"){this.field=e,this.dir=r}}function Zpe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{}class kn extends dY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new ege(e,r,n):r==="array-contains"?new nge(e,n):r==="in"?new gY(e,n):r==="not-in"?new age(e,n):r==="array-contains-any"?new sge(e,n):new kn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new tge(e,n):new rge(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(E0(r,this.value)):r!==null&&gp(this.value)===gp(r)&&this.matchesComparison(E0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class va extends dY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new va(e,r)}matches(e){return Wx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wx(t){return t.op==="and"}function Hj(t){return t.op==="or"}function TO(t){return fY(t)&&Wx(t)}function fY(t){for(const e of t.filters)if(e instanceof va)return!1;return!0}function $j(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+qx(t.value);if(TO(t))return t.filters.map(e=>$j(e)).join(",");{const e=t.filters.map(r=>$j(r)).join(",");return`${t.op}(${e})`}}function AY(t,e){return t instanceof kn?function(n,a){return a instanceof kn&&n.op===a.op&&n.field.isEqual(a.field)&&mf(n.value,a.value)}(t,e):t instanceof va?function(n,a){return a instanceof va&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&AY(i,a.filters[l]),!0):!1}(t,e):void Fr()}function hY(t,e){const r=t.filters.concat(e);return va.create(r,t.op)}function mY(t){return t instanceof kn?function(r){return`${r.field.canonicalString()} ${r.op} ${qx(r.value)}`}(t):t instanceof va?function(r){return r.op.toString()+" {"+r.getFilters().map(mY).join(" ,")+"}"}(t):"Filter"}class ege extends kn{constructor(e,r,n){super(e,r,n),this.key=br.fromName(n.referenceValue)}matches(e){const r=br.comparator(e.key,this.key);return this.matchesComparison(r)}}class tge extends kn{constructor(e,r){super(e,"in",r),this.keys=pY("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class rge extends kn{constructor(e,r){super(e,"not-in",r),this.keys=pY("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function pY(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>br.fromName(n.referenceValue))}class nge extends kn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return T2(r)&&P2(r.arrayValue,this.value)}}class gY extends kn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&P2(this.value.arrayValue,r)}}class age extends kn{constructor(e,r){super(e,"not-in",r)}matches(e){if(P2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!P2(this.value.arrayValue,r)}}class sge extends kn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!T2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>P2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ige{constructor(e,r=null,n=[],a=[],s=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.ue=null}}function Kj(t,e=null,r=[],n=[],a=null,s=null,i=null){return new ige(t,e,r,n,a,s,i)}function xp(t){const e=nn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>$j(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Lb(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>qx(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>qx(n)).join(",")),e.ue=r}return e.ue}function Ub(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Zpe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!AY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lU(t.startAt,e.startAt)&&lU(t.endAt,e.endAt)}function pE(t){return br.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gE(t,e){return t.filters.filter(r=>r instanceof kn&&r.field.isEqual(e))}function cU(t,e,r){let n=p_,a=!0;for(const s of gE(t,e)){let i=p_,l=!0;switch(s.op){case"<":case"<=":i=Ype(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,l=!1;break;case"!=":case"not-in":i=p_}sU({value:n,inclusive:a},{value:i,inclusive:l})<0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];sU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function uU(t,e,r){let n=Wh,a=!0;for(const s of gE(t,e)){let i=Wh,l=!0;switch(s.op){case">=":case">":i=Jpe(s.value),l=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,l=!1;break;case"!=":case"not-in":i=Wh}iU({value:n,inclusive:a},{value:i,inclusive:l})>0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];iU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oge(t,e,r,n,a,s,i,l){return new Nv(t,e,r,n,a,s,i,l)}function Qb(t){return new Nv(t)}function dU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xY(t){return t.collectionGroup!==null}function Fy(t){const e=nn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ia(us.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new k2(s,n))}),r.has(us.keyField().canonicalString())||e.ce.push(new k2(us.keyField(),n))}return e.ce}function Tu(t){const e=nn(t);return e.le||(e.le=lge(e,Fy(t))),e.le}function lge(t,e){if(t.limitType==="F")return Kj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new k2(a.field,s)});const r=t.endAt?new zx(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new zx(t.startAt.position,t.startAt.inclusive):null;return Kj(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Gj(t,e){const r=t.filters.concat([e]);return new Nv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function xE(t,e,r){return new Nv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function SI(t,e){return Ub(Tu(t),Tu(e))&&t.limitType===e.limitType}function vY(t){return`${xp(Tu(t))}|lt:${t.limitType}`}function Hg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>mY(a)).join(", ")}]`),Lb(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>qx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>qx(a)).join(",")),`Target(${n})`}(Tu(t))}; limitType=${t.limitType})`}function Vb(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):br.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Fy(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=oU(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,Fy(n),a)||n.endAt&&!function(i,l,c){const u=oU(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,Fy(n),a))}(t,e)}function cge(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yY(t){return(e,r)=>{let n=!1;for(const a of Fy(t)){const s=uge(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function uge(t,e,r){const n=t.field.isKeyField()?br.comparator(e.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?E0(c,u):Fr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Fr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Hp(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return iY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dge=new hs(br.comparator);function Mc(){return dge}const bY=new hs(br.comparator);function ny(...t){let e=bY;for(const r of t)e=e.insert(r.key,r);return e}function wY(t){let e=bY;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function af(){return Oy()}function NY(){return Oy()}function Oy(){return new K0(t=>t.toString(),(t,e)=>t.isEqual(e))}const fge=new hs(br.comparator),Age=new Ia(br.comparator);function wn(...t){let e=Age;for(const r of t)e=e.add(r);return e}const hge=new Ia(fn);function mge(){return hge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:I2(e)?"-0":e}}function CY(t){return{integerValue:""+t}}function pge(t,e){return Bpe(e)?CY(e):kO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this._=void 0}}function gge(t,e,r){return t instanceof F2?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&PO(s)&&(s=jO(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Xx?EY(t,e):t instanceof Yx?SY(t,e):function(a,s){const i=_Y(a,s),l=fU(i)+fU(a.Pe);return Vj(i)&&Vj(a.Pe)?CY(l):kO(a.serializer,l)}(t,e)}function xge(t,e,r){return t instanceof Xx?EY(t,e):t instanceof Yx?SY(t,e):r}function _Y(t,e){return t instanceof O2?function(n){return Vj(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class F2 extends II{}class Xx extends II{constructor(e){super(),this.elements=e}}function EY(t,e){const r=IY(e);for(const n of t.elements)r.some(a=>mf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Yx extends II{constructor(e){super(),this.elements=e}}function SY(t,e){let r=IY(e);for(const n of t.elements)r=r.filter(a=>!mf(a,n));return{arrayValue:{values:r}}}class O2 extends II{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function fU(t){return os(t.integerValue||t.doubleValue)}function IY(t){return T2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vge{constructor(e,r){this.field=e,this.transform=r}}function yge(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Xx&&a instanceof Xx||n instanceof Yx&&a instanceof Yx?Gx(n.elements,a.elements,mf):n instanceof O2&&a instanceof O2?mf(n.Pe,a.Pe):n instanceof F2&&a instanceof F2}(t.transform,e.transform)}class bge{constructor(e,r){this.version=e,this.transformResults=r}}class ds{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ds}static exists(e){return new ds(void 0,e)}static updateTime(e){return new ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class BI{}function BY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _v(t.key,ds.none()):new Cv(t.key,t.data,ds.none());{const r=t.data,n=Oo.empty();let a=new Ia(us.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new LA(t.key,n,new sc(a.toArray()),ds.none())}}function wge(t,e,r){t instanceof Cv?function(a,s,i){const l=a.value.clone(),c=hU(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof LA?function(a,s,i){if(!x_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=hU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(PY(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Dy(t,e,r,n){return t instanceof Cv?function(s,i,l,c){if(!x_(s.precondition,i))return l;const u=s.value.clone(),d=mU(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof LA?function(s,i,l,c){if(!x_(s.precondition,i))return l;const u=mU(s.fieldTransforms,c,i),d=i.data;return d.setAll(PY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,i,l){return x_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function Nge(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=_Y(n.transform,a||null);s!=null&&(r===null&&(r=Oo.empty()),r.set(n.field,s))}return r||null}function AU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Gx(n,a,(s,i)=>yge(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cv extends BI{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class LA extends BI{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PY(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function hU(t,e,r){const n=new Map;Ur(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,l=e.data.field(s.field);n.set(s.field,xge(i,l,r[a]))}return n}function mU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,gge(s,i,e))}return n}class _v extends BI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FO extends BI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&wge(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Dy(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Dy(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=NY();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=BY(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument($r.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),wn())}isEqual(e){return this.batchId===e.batchId&&Gx(this.mutations,e.mutations,(r,n)=>AU(r,n))&&Gx(this.baseMutations,e.baseMutations,(r,n)=>AU(r,n))}}class DO{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ur(e.mutations.length===n.length);let a=function(){return fge}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new DO(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi,Ln;function jY(t){switch(t){default:return Fr();case Qt.CANCELLED:case Qt.UNKNOWN:case Qt.DEADLINE_EXCEEDED:case Qt.RESOURCE_EXHAUSTED:case Qt.INTERNAL:case Qt.UNAVAILABLE:case Qt.UNAUTHENTICATED:return!1;case Qt.INVALID_ARGUMENT:case Qt.NOT_FOUND:case Qt.ALREADY_EXISTS:case Qt.PERMISSION_DENIED:case Qt.FAILED_PRECONDITION:case Qt.ABORTED:case Qt.OUT_OF_RANGE:case Qt.UNIMPLEMENTED:case Qt.DATA_LOSS:return!0}}function TY(t){if(t===void 0)return Ol("GRPC error has no .code"),Qt.UNKNOWN;switch(t){case oi.OK:return Qt.OK;case oi.CANCELLED:return Qt.CANCELLED;case oi.UNKNOWN:return Qt.UNKNOWN;case oi.DEADLINE_EXCEEDED:return Qt.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return Qt.RESOURCE_EXHAUSTED;case oi.INTERNAL:return Qt.INTERNAL;case oi.UNAVAILABLE:return Qt.UNAVAILABLE;case oi.UNAUTHENTICATED:return Qt.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return Qt.INVALID_ARGUMENT;case oi.NOT_FOUND:return Qt.NOT_FOUND;case oi.ALREADY_EXISTS:return Qt.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return Qt.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return Qt.FAILED_PRECONDITION;case oi.ABORTED:return Qt.ABORTED;case oi.OUT_OF_RANGE:return Qt.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return Qt.UNIMPLEMENTED;case oi.DATA_LOSS:return Qt.DATA_LOSS;default:return Fr()}}(Ln=oi||(oi={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=new Gm([4294967295,4294967295],0);function pU(t){const e=_ge().encode(t),r=new HX;return r.update(e),new Uint8Array(r.digest())}function gU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gm([r,n],0),new Gm([a,s],0)]}class MO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ay(`Invalid padding: ${r}`);if(n<0)throw new ay(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ay(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ay(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Gm.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Gm.fromNumber(n)));return a.compare(Ege)===1&&(a=new Gm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=pU(e),[n,a]=gU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new MO(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=pU(e),[n,a]=gU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ay extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Hb.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new PI($r.min(),a,new hs(fn),Mc(),wn())}}class Hb{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Hb(n,r,wn(),wn(),wn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class kY{constructor(e,r){this.targetId=e,this.me=r}}class FY{constructor(e,r,n=ni.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class xU{constructor(){this.fe=0,this.ge=yU(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=wn(),r=wn(),n=wn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Fr()}}),new Hb(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=yU()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ur(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Sge{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mc(),this.qe=vU(),this.Qe=new hs(fn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Fr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(pE(s))if(n===0){const i=new br(s.path);this.Ue(r,i,cs.newNoDocument(i,$r.min()))}else Ur(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),c=l?this.Xe(l,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=C0(n).toUint8Array()}catch(c){if(c instanceof oY)return N0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new MO(i,a,s)}catch(c){return N0(c instanceof ay?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const l=this.Je(i);if(l){if(s.current&&pE(l.target)){const c=new br(l.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,cs.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=wn();this.qe.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new PI(e,r,this.Qe,this.ke,n);return this.ke=Mc(),this.qe=vU(),this.Qe=new hs(fn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new xU,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ia(fn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xU),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function vU(){return new hs(br.comparator)}function yU(){return new hs(br.comparator)}const Ige={asc:"ASCENDING",desc:"DESCENDING"},Bge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pge={and:"AND",or:"OR"};class jge{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function qj(t,e){return t.useProto3Json||Lb(e)?e:{value:e}}function Jx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tge(t,e){return Jx(t,e.toTimestamp())}function uo(t){return Ur(!!t),$r.fromTimestamp(function(r){const n=_A(r);return new tr(n.seconds,n.nanos)}(t))}function LO(t,e){return zj(t,e).canonicalString()}function zj(t,e){const r=function(a){return new Yn(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function DY(t){const e=Yn.fromString(t);return Ur(KY(e)),e}function D2(t,e){return LO(t.databaseId,e.path)}function uA(t,e){const r=DY(e);if(r.get(1)!==t.databaseId.projectId)throw new dr(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new dr(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new br(LY(r))}function RY(t,e){return LO(t.databaseId,e)}function MY(t){const e=DY(t);return e.length===4?Yn.emptyPath():LY(e)}function Wj(t){return new Yn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LY(t){return Ur(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bU(t,e,r){return{name:D2(t,e),fields:r.value.mapValue.fields}}function kge(t,e,r){const n=uA(t,e.name),a=uo(e.updateTime),s=e.createTime?uo(e.createTime):$r.min(),i=new Oo({mapValue:{fields:e.fields}}),l=cs.newFoundDocument(n,a,s,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Fge(t,e){return"found"in e?function(n,a){Ur(!!a.found),a.found.name,a.found.updateTime;const s=uA(n,a.found.name),i=uo(a.found.updateTime),l=a.found.createTime?uo(a.found.createTime):$r.min(),c=new Oo({mapValue:{fields:a.found.fields}});return cs.newFoundDocument(s,i,l,c)}(t,e):"missing"in e?function(n,a){Ur(!!a.missing),Ur(!!a.readTime);const s=uA(n,a.missing),i=uo(a.readTime);return cs.newNoDocument(s,i)}(t,e):Fr()}function Oge(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ur(d===void 0||typeof d=="string"),ni.fromBase64String(d||"")):(Ur(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ni.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Qt.UNKNOWN:TY(u.code);return new dr(d,u.message||"")}(i);r=new FY(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=uA(t,n.document.name),s=uo(n.document.updateTime),i=n.document.createTime?uo(n.document.createTime):$r.min(),l=new Oo({mapValue:{fields:n.document.fields}}),c=cs.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new v_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=uA(t,n.document),s=n.readTime?uo(n.readTime):$r.min(),i=cs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new v_([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=uA(t,n.document),s=n.removedTargetIds||[];r=new v_([],s,a,null)}else{if(!("filter"in e))return Fr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Cge(a,s),l=n.targetId;r=new kY(l,i)}}return r}function R2(t,e){let r;if(e instanceof Cv)r={update:bU(t,e.key,e.value)};else if(e instanceof _v)r={delete:D2(t,e.key)};else if(e instanceof LA)r={update:bU(t,e.key,e.data),updateMask:Qge(e.fieldMask)};else{if(!(e instanceof FO))return Fr();r={verify:D2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof F2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xx)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof O2)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Fr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Tge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Fr()}(t,e.precondition)),r}function Xj(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?ds.updateTime(uo(s.updateTime)):s.exists!==void 0?ds.exists(s.exists):ds.none()}(e.currentDocument):ds.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,l){let c=null;if("setToServerValue"in l)Ur(l.setToServerValue==="REQUEST_TIME"),c=new F2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Xx(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Yx(d)}else"increment"in l?c=new O2(i,l.increment):Fr();const u=us.fromServerFormat(l.fieldPath);return new vge(u,c)}(t,a)):[];if(e.update){e.update.name;const a=uA(t,e.update.name),s=new Oo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new sc(u.map(d=>us.fromServerFormat(d)))}(e.updateMask);return new LA(a,s,i,r,n)}return new Cv(a,s,r,n)}if(e.delete){const a=uA(t,e.delete);return new _v(a,r)}if(e.verify){const a=uA(t,e.verify);return new FO(a,r)}return Fr()}function Dge(t,e){return t&&t.length>0?(Ur(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?uo(a.updateTime):uo(s);return i.isEqual($r.min())&&(i=uo(s)),new bge(i,a.transformResults||[])}(r,e))):[]}function UY(t,e){return{documents:[RY(t,e.path)]}}function QY(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=RY(t,a);const s=function(u){if(u.length!==0)return $Y(va.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:$g(h.field),direction:Mge(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=qj(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function VY(t){let e=MY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ur(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=HY(f);return h instanceof va&&TO(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(m){return new k2(Kg(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Lb(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,A=f.values||[];return new zx(A,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,A=f.values||[];return new zx(A,h)}(r.endAt)),oge(e,a,i,s,l,"F",c,u)}function Rge(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function HY(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Kg(r.unaryFilter.field);return kn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Kg(r.unaryFilter.field);return kn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kg(r.unaryFilter.field);return kn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kg(r.unaryFilter.field);return kn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fr()}}(t):t.fieldFilter!==void 0?function(r){return kn.create(Kg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return va.create(r.compositeFilter.filters.map(n=>HY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Fr()}}(r.compositeFilter.op))}(t):Fr()}function Mge(t){return Ige[t]}function Lge(t){return Bge[t]}function Uge(t){return Pge[t]}function $g(t){return{fieldPath:t.canonicalString()}}function Kg(t){return us.fromServerFormat(t.fieldPath)}function $Y(t){return t instanceof kn?function(r){if(r.op==="=="){if(aU(r.value))return{unaryFilter:{field:$g(r.field),op:"IS_NAN"}};if(nU(r.value))return{unaryFilter:{field:$g(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(aU(r.value))return{unaryFilter:{field:$g(r.field),op:"IS_NOT_NAN"}};if(nU(r.value))return{unaryFilter:{field:$g(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$g(r.field),op:Lge(r.op),value:r.value}}}(t):t instanceof va?function(r){const n=r.getFilters().map(a=>$Y(a));return n.length===1?n[0]:{compositeFilter:{op:Uge(r.op),filters:n}}}(t):Fr()}function Qge(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function KY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,r,n,a,s=$r.min(),i=$r.min(),l=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new nA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new nA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GY{constructor(e){this.ct=e}}function Vge(t,e){let r;if(e.document)r=kge(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=br.fromSegments(e.noDocument.path),a=yp(e.noDocument.readTime);r=cs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fr();{const n=br.fromSegments(e.unknownDocument.path),a=yp(e.unknownDocument.version);r=cs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new tr(a[0],a[1]);return $r.fromTimestamp(s)}(e.readTime)),r}function wU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:vE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:D2(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Jx(s,i.version.toTimestamp()),createTime:Jx(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:vp(e.version)};else{if(!e.isUnknownDocument())return Fr();n.unknownDocument={path:r.path.toArray(),version:vp(e.version)}}return n}function vE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function vp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yp(t){const e=new tr(t.seconds,t.nanoseconds);return $r.fromTimestamp(e)}function Im(t,e){const r=(e.baseMutations||[]).map(s=>Xj(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Xj(t.ct,s)),a=tr.fromMillis(e.localWriteTimeMs);return new OO(e.batchId,a,r,n)}function sy(t){const e=yp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?yp(t.lastLimboFreeSnapshotVersion):$r.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Ur(s.documents.length===1),Tu(Qb(MY(s.documents[0])))}(t.query):function(s){return Tu(VY(s))}(t.query),new nA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ni.fromBase64String(t.resumeToken))}function qY(t,e){const r=vp(e.snapshotVersion),n=vp(e.lastLimboFreeSnapshotVersion);let a;a=pE(e.target)?UY(t.ct,e.target):QY(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function zY(t){const e=VY({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xE(e,e.limit,"L"):e}function I5(t,e){return new RO(e.largestBatchId,Xj(t.ct,e.overlayMutation))}function NU(t,e){const r=e.path.lastSegment();return[t,Ml(e.path.popLast()),r]}function CU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:vp(n.readTime),documentKey:Ml(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{getBundleMetadata(e,r){return _U(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:yp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return _U(e).put(function(a){return{bundleId:a.id,createTime:vp(uo(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return EU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:zY(s.bundledQuery),readTime:yp(s.readTime)}}(n)})}saveNamedQuery(e,r){return EU(e).put(function(a){return{name:a.name,readTime:vp(uo(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function _U(t){return Qi(t,"bundles")}function EU(t){return Qi(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new jI(e,n)}getOverlay(e,r){return v1(e).get(NU(this.userId,r)).next(n=>n?I5(this.serializer,n):null)}getOverlays(e,r){const n=af();return jt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const l=new RO(r,i);a.push(this.ht(e,l))}),jt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(Ml(i.getCollectionPath())));const s=[];return a.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(v1(e).j("collectionPathOverlayIndex",l))}),jt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=af(),s=Ml(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return v1(e).U("collectionPathOverlayIndex",i).next(l=>{for(const c of l){const u=I5(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=af();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return v1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=I5(this.serializer,u);s.size()<a||f.largestBatchId===i?(s.set(f.getKey(),f),i=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return v1(e).put(function(a,s,i){const[l,c,u]=NU(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:R2(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function v1(t){return Qi(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ge{Pt(e){return Qi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ni.fromUint8Array(n):ni.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(os(e.integerValue));else if("doubleValue"in e){const n=os(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),I2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=_A(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(C0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?lY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):EI(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Fr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",l=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(os(l)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),br.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Bm.vt=new Bm;function Kge(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function SU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=Kge(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class Gge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=SU(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=SU(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class qge{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class zge{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class y1{constructor(){this.jt=new Gge,this.Ht=new qge(this.jt),this.Jt=new zge(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Pm(this.indexId,this.documentKey,this.arrayValue,n)}}function gh(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=IU(t.arrayValue,e.arrayValue),r!==0?r:(r=IU(t.directionalValue,e.directionalValue),r!==0?r:br.comparator(t.documentKey,e.documentKey)))}function IU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.Xt=new Ia((r,n)=>us.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ur(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Lj(e);if(r!==void 0&&!this.sn(r))return!1;const n=ym(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ia(us.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new h_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new h_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new h_(n.field,n.dir==="asc"?0:1)));return new mE(mE.UNKNOWN_ID,this.collectionId,r,S2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t){var e,r;if(Ur(t instanceof kn||t instanceof va),t instanceof kn){if(t instanceof gY){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>kn.create(t.field,"==",s)))||[];return va.create(a,"or")}return t}const n=t.filters.map(a=>WY(a));return va.create(n,t.op)}function Wge(t){if(t.getFilters().length===0)return[];const e=Zj(WY(t));return Ur(XY(e)),Yj(e)||Jj(e)?[e]:e.getFilters()}function Yj(t){return t instanceof kn}function Jj(t){return t instanceof va&&TO(t)}function XY(t){return Yj(t)||Jj(t)||function(r){if(r instanceof va&&Hj(r)){for(const n of r.getFilters())if(!Yj(n)&&!Jj(n))return!1;return!0}return!1}(t)}function Zj(t){if(Ur(t instanceof kn||t instanceof va),t instanceof kn)return t;if(t.filters.length===1)return Zj(t.filters[0]);const e=t.filters.map(n=>Zj(n));let r=va.create(e,t.op);return r=yE(r),XY(r)?r:(Ur(r instanceof va),Ur(Wx(r)),Ur(r.filters.length>1),r.filters.reduce((n,a)=>UO(n,a)))}function UO(t,e){let r;return Ur(t instanceof kn||t instanceof va),Ur(e instanceof kn||e instanceof va),r=t instanceof kn?e instanceof kn?function(a,s){return va.create([a,s],"and")}(t,e):PU(t,e):e instanceof kn?PU(e,t):function(a,s){if(Ur(a.filters.length>0&&s.filters.length>0),Wx(a)&&Wx(s))return hY(a,s.getFilters());const i=Hj(a)?a:s,l=Hj(a)?s:a,c=i.filters.map(u=>UO(u,l));return va.create(c,"or")}(t,e),yE(r)}function PU(t,e){if(Wx(e))return hY(e,t.getFilters());{const r=e.filters.map(n=>UO(t,n));return va.create(r,"or")}}function yE(t){if(Ur(t instanceof kn||t instanceof va),t instanceof kn)return t;const e=t.getFilters();if(e.length===1)return yE(e[0]);if(fY(t))return t;const r=e.map(a=>yE(a)),n=[];return r.forEach(a=>{a instanceof kn?n.push(a):a instanceof va&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:va.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xge{constructor(){this.un=new QO}addToCollectionParentIndex(e,r){return this.un.add(r),jt.resolve()}getCollectionParents(e,r){return jt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return jt.resolve()}deleteFieldIndex(e,r){return jt.resolve()}deleteAllFieldIndexes(e){return jt.resolve()}createTargetIndexes(e,r){return jt.resolve()}getDocumentsMatchingTarget(e,r){return jt.resolve(null)}getIndexType(e,r){return jt.resolve(0)}getFieldIndexes(e,r){return jt.resolve([])}getNextCollectionGroupToUpdate(e){return jt.resolve(null)}getMinOffset(e,r){return jt.resolve($c.min())}getMinOffsetFromCollectionGroup(e,r){return jt.resolve($c.min())}updateCollectionGroup(e,r,n){return jt.resolve()}updateIndexEntries(e,r){return jt.resolve()}}class QO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ia(Yn.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ia(Yn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new Uint8Array(0);class Yge{constructor(e,r){this.databaseId=r,this.cn=new QO,this.ln=new K0(n=>xp(n),(n,a)=>Ub(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Ml(a)};return jU(e).put(s)}return jt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[YX(r),""],!1,!0);return jU(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(nf(i.parent))}return n})}addFieldIndex(e,r){const n=b1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=pg(e);return s.next(l=>{i.put(CU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=b1(e),a=pg(e),s=mg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=b1(e),n=mg(e),a=pg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return jt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new BU(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=mg(e);let a=!0;const s=new Map;return jt.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{a&&(a=!!l),s.set(i,l)})).next(()=>{if(a){let i=wn();const l=[];return jt.forEach(s,(c,u)=>{lr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${xp(r)}`);const d=function(b,w){const B=Lj(w);if(B===void 0)return null;for(const P of gE(b,B.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(u,c),f=function(b,w){const B=new Map;for(const P of ym(w))for(const _ of gE(b,P.fieldPath))switch(_.op){case"==":case"in":B.set(P.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return B.set(P.fieldPath.canonicalString(),_.value),Array.from(B.values())}return null}(u,c),h=function(b,w){const B=[];let P=!0;for(const _ of ym(w)){const E=_.kind===0?cU(b,_.fieldPath,b.startAt):uU(b,_.fieldPath,b.startAt);B.push(E.value),P&&(P=E.inclusive)}return new zx(B,P)}(u,c),A=function(b,w){const B=[];let P=!0;for(const _ of ym(w)){const E=_.kind===0?uU(b,_.fieldPath,b.endAt):cU(b,_.fieldPath,b.endAt);B.push(E.value),P&&(P=E.inclusive)}return new zx(B,P)}(u,c),m=this.In(c,u,h),p=this.In(c,u,A),g=this.Tn(c,u,f),x=this.En(c.indexId,d,m,h.inclusive,p,A.inclusive,g);return jt.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const B=br.fromSegments(w.documentKey);i.has(B)||(i=i.add(B),l.push(B))})}))}).next(()=>l)}return jt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Wge(va.create(e.filters,"and")).map(n=>Kj(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const h=r?this.dn(r[f/u]):gN,A=this.An(e,h,n[f%u],a),m=this.Rn(e,h,s[f%u],i),p=l.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(A,m,p))}return d}An(e,r,n,a){const s=new Pm(e,br.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Pm(e,br.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new BU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const l of s)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return jt.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new Ia(us.comparator),d=!1;for(const f of c.filters)for(const h of f.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new y1;for(const a of ym(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);Bm.vt.It(s,i)}return n.zt()}dn(e){const r=new y1;return Bm.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new y1;return Bm.vt.It(j2(this.databaseId,r),n.Yt(function(s){const i=ym(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new y1);let s=0;for(const i of ym(e)){const l=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&T2(l))a=this.gn(a,i,l);else{const u=c.Yt(i.kind);Bm.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const l of a){const c=new y1;c.seed(l.zt()),Bm.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof kn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=b1(e),a=pg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return jt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{i.push(function(d,f){const h=f?new S2(f.sequenceNumber,new $c(yp(f.readTime),new br(nf(f.documentKey)),f.largestBatchId)):S2.empty(),A=d.fields.map(([m,p])=>new h_(us.fromServerFormat(m),p));return new mE(d.indexId,d.collectionGroup,A,h)}(l,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:fn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=b1(e),s=pg(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>jt.forEach(l,c=>s.put(CU(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return jt.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?jt.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),jt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?jt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return mg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return mg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=mg(e);let s=new Ia(gh);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{s=s.add(new Pm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Ia(gh);const a=this.Vn(r,e);if(a==null)return n;const s=Lj(r);if(s!=null){const i=e.data.field(s.fieldPath);if(T2(i))for(const l of i.arrayValue.values||[])n=n.add(new Pm(r.indexId,e.key,this.dn(l),a))}else n=n.add(new Pm(r.indexId,e.key,gN,a));return n}bn(e,r,n,a,s){lr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,f,h){const A=c.getIterator(),m=u.getIterator();let p=hg(A),g=hg(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(f(g),g=hg(m)):y?(h(p),p=hg(A)):(p=hg(A),g=hg(m))}}(a,s,gh,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),jt.waitFor(i)}yn(e){let r=1;return pg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>gh(i,l)).filter((i,l,c)=>!l||gh(i,c[l-1])!==0);const a=[];a.push(e);for(const i of n){const l=gh(i,e),c=gh(i,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const l=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,gN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,gN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return gh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(TU)}getMinOffset(e,r){return jt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Fr())).next(TU)}}function jU(t){return Qi(t,"collectionParents")}function mg(t){return Qi(t,"indexEntries")}function b1(t){return Qi(t,"indexConfiguration")}function pg(t){return Qi(t,"indexState")}function TU(t){Ur(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;SO(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new $c(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ec{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ec(e,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:i},(d,f,h)=>(l++,h.delete()));s.push(c.next(()=>{Ur(l===1)}));const u=[];for(const d of r.mutations){const f=rY(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return jt.waitFor(s).next(()=>u)}function bE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ec.DEFAULT_COLLECTION_PERCENTILE=10,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ec.DEFAULT=new ec(41943040,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ec.DISABLED=new ec(-1,0,0);class TI{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Ur(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new TI(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Gg(e),i=xh(e);return i.add({}).next(l=>{Ur(typeof l=="number");const c=new OO(l,r,n,a),u=function(A,m,p){const g=p.baseMutations.map(y=>R2(A.ct,y)),x=p.mutations.map(y=>R2(A.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let f=new Ia((h,A)=>fn(h.canonicalString(),A.canonicalString()));for(const h of a){const A=rY(this.userId,h.key.path,l);f=f.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(A,jpe))}return f.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),jt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return xh(e).get(r).next(n=>n?(Ur(n.userId===this.userId),Im(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?jt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return xh(e).J({index:"userMutationsIndex",range:a},(i,l,c)=>{l.userId===this.userId&&(Ur(l.batchId>=n),s=Im(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return xh(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).U("userMutationsIndex",r).next(n=>n.map(a=>Im(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=m_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Gg(e).J({range:a},(i,l,c)=>{const[u,d,f]=i,h=nf(d);if(u===this.userId&&r.path.isEqual(h))return xh(e).get(f).next(A=>{if(!A)throw Fr();Ur(A.userId===this.userId),s.push(Im(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ia(fn);const a=[];return r.forEach(s=>{const i=m_(this.userId,s.path),l=IDBKeyRange.lowerBound(i),c=Gg(e).J({range:l},(u,d,f)=>{const[h,A,m]=u,p=nf(A);h===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),jt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=m_(this.userId,n),i=IDBKeyRange.lowerBound(s);let l=new Ia(fn);return Gg(e).J({range:i},(c,u,d)=>{const[f,h,A]=c,m=nf(h);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(A)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(xh(e).get(s).next(i=>{if(i===null)throw Fr();Ur(i.userId===this.userId),n.push(Im(this.serializer,i))}))}),jt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return YY(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),jt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return jt.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return Gg(e).J({range:n},(s,i,l)=>{if(s[0]===this.userId){const c=nf(s[1]);a.push(c)}else l.done()}).next(()=>{Ur(a.length===0)})})}containsKey(e,r){return JY(e,this.userId,r)}Nn(e){return ZY(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JY(t,e,r){const n=m_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Gg(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,h]=l;d===e&&f===a&&(i=!0),u.done()}).next(()=>i)}function xh(t){return Qi(t,"mutations")}function Gg(t){return Qi(t,"documentMutations")}function ZY(t){return Qi(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bp(0)}static kn(){return new bp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new bp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$r.fromTimestamp(new tr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>gg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Ur(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return gg(e).J((i,l)=>{const c=sy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>jt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return gg(e).J((n,a)=>{const s=sy(a);r(s)})}qn(e){return FU(e).get("targetGlobalKey").next(r=>(Ur(r!==null),r))}Qn(e,r){return FU(e).put("targetGlobalKey",r)}Kn(e,r){return gg(e).put(qY(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=xp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return gg(e).J({range:a,index:"queryTargetsIndex"},(i,l,c)=>{const u=sy(l);Ub(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=Hh(e);return r.forEach(i=>{const l=Ml(i.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,i))}),jt.waitFor(a)}removeMatchingKeys(e,r,n){const a=Hh(e);return jt.forEach(r,s=>{const i=Ml(s.path);return jt.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=Hh(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=Hh(e);let s=wn();return a.J({range:n,H:!0},(i,l,c)=>{const u=nf(i[1]),d=new br(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ml(r.path),a=IDBKeyRange.bound([n],[YX(n)],!1,!0);let s=0;return Hh(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,l],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return gg(e).get(r).next(n=>n?sy(n):null)}}function gg(t){return Qi(t,"targets")}function FU(t){return Qi(t,"targetGlobal")}function Hh(t){return Qi(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU([t,e],[r,n]){const a=fn(t,r);return a===0?fn(e,n):a}class Zge{constructor(e){this.Un=e,this.buffer=new Ia(OU),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();OU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class exe{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){lr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$0(r)?lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Vp(r)}await this.Hn(3e5)})}}class txe{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return jt.resolve(Eu.oe);const n=new Zge(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),jt.resolve(kU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kU):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Vg()<=Tn.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),jt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function rxe(t,e){return new txe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxe{constructor(e,r){this.db=e,this.garbageCollector=rxe(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return xN(e,n)}removeReference(e,r,n){return xN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return xN(e,r)}nr(e,r){return function(a,s){let i=!1;return ZY(a).Y(l=>JY(a,l,s).next(c=>(c&&(i=!0),jt.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,l)=>{if(l<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,$r.min()),Hh(e).delete(function(f){return[0,Ml(f.path)]}(i))))});a.push(c)}}).next(()=>jt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return xN(e,r)}tr(e,r){const n=Hh(e);let a,s=Eu.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:c,sequenceNumber:u})=>{i===0?(s!==Eu.oe&&r(new br(nf(a)),s),s=u,a=c):s=Eu.oe}).next(()=>{s!==Eu.oe&&r(new br(nf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xN(t,e){return Hh(t).put(function(n,a){return{targetId:0,path:Ml(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(){this.changes=new K0(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?jt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class axe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return lm(e).put(n)}removeEntry(e,r,n){return lm(e).delete(function(s,i){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],vE(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=cs.newInvalidDocument(r);return lm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(w1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:cs.newInvalidDocument(r)};return lm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(w1(r))},(a,s)=>{n={document:this.ir(r,s),size:bE(s)}}).next(()=>n)}getEntries(e,r){let n=Mc();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=Mc(),a=new hs(br.comparator);return this._r(e,r,(s,i)=>{const l=this.ir(s,i);n=n.insert(s,l),a=a.insert(s,bE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return jt.resolve();let a=new Ia(MU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(w1(a.first()),w1(a.last())),i=a.getIterator();let l=i.getNext();return lm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=br.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&MU(l,f)<0;)n(l,null),l=i.getNext();l&&l.isEqual(f)&&(n(l,u),l=i.hasNext()?i.getNext():null),l?d.$(w1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),vE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Mc();for(const f of u){const h=this.ir(br.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);h.isFoundDocument()&&(Vb(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Mc();const i=RU(r,n),l=RU(r,$c.max());return lm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(c,u,d)=>{const f=this.ir(br.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new sxe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return DU(e).get("remoteDocumentGlobalKey").next(r=>(Ur(!!r),r))}rr(e,r){return DU(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Vge(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($r.min())))return n}return cs.newInvalidDocument(e)}}function tJ(t){return new axe(t)}class sxe extends eJ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new K0(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ia((s,i)=>fn(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),i.isValidDocument()){const c=wU(this.cr.serializer,i);a=a.add(s.path.popLast());const u=bE(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=wU(this.cr.serializer,i.convertToNoDocument($r.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),jt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function DU(t){return Qi(t,"remoteDocumentGlobal")}function lm(t){return Qi(t,"remoteDocumentsV14")}function w1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function RU(t,e){const r=e.documentKey.path.toArray();return[t,vE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function MU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=fn(r[s],n[s]),a)return a;return a=fn(r.length,n.length),a||(a=fn(r[r.length-2],n[n.length-2]),a||fn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Dy(n.mutation,a,sc.empty(),tr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,wn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=wn()){const a=af();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=ny();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=af();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,wn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,a){let s=Mc();const i=Oy(),l=function(){return Oy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof LA)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Dy(d.mutation,u,d.mutation.getFieldMask(),tr.now())):i.set(u.key,sc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new ixe(d,(f=i.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Oy();let a=new hs((i,l)=>i-l),s=wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||sc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||wn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=NY();d.forEach(h=>{if(!s.has(h)){const A=BY(r.get(h),n.get(h));A!==null&&f.set(h,A),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,f))}return jt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return br.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):xY(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):jt.resolve(af());let l=-1,c=s;return i.next(u=>jt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?jt.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,wn())).next(d=>({batchId:l,changes:wY(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new br(r)).next(n=>{let a=ny();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=ny();return this.indexManager.getCollectionParents(e,s).next(l=>jt.forEach(l,c=>{const u=function(f,h){return new Nv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,cs.newInvalidDocument(d)))});let l=ny();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Dy(d.mutation,u,sc.empty(),tr.now()),Vb(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return jt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:uo(a.createTime)}}(r)),jt.resolve()}getNamedQuery(e,r){return jt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:zY(a.bundledQuery),readTime:uo(a.readTime)}}(r)),jt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(){this.overlays=new hs(br.comparator),this.Ir=new Map}getOverlay(e,r){return jt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=af();return jt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),jt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),jt.resolve()}getOverlaysForCollection(e,r,n){const a=af(),s=r.length+1,i=new br(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return jt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new hs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=af(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=af(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return jt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new RO(r,n));let s=this.Ir.get(r);s===void 0&&(s=wn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return jt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,jt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.Tr=new Ia(to.Er),this.dr=new Ia(to.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new to(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new to(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new br(new Yn([])),n=new to(r,e),a=new to(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new br(new Yn([])),n=new to(r,e),a=new to(r,e+1);let s=wn();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new to(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class to{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return br.comparator(e.key,r.key)||fn(e.wr,r.wr)}static Ar(e,r){return fn(e.wr,r.wr)||br.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uxe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ia(to.Er)}checkEmpty(e){return jt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new OO(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.br=this.br.add(new to(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return jt.resolve(i)}lookupMutationBatch(e,r){return jt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return jt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return jt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return jt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new to(r,0),a=new to(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const l=this.Dr(i.wr);s.push(l)}),jt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ia(fn);return r.forEach(a=>{const s=new to(a,0),i=new to(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],l=>{n=n.add(l.wr)})}),jt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new to(new br(s),0);let l=new Ia(fn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},i),jt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Ur(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return jt.forEach(r.mutations,a=>{const s=new to(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new to(r,0),a=this.br.firstAfterOrEqual(n);return jt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,jt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(e){this.Mr=e,this.docs=function(){return new hs(br.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return jt.resolve(n?n.document.mutableCopy():cs.newInvalidDocument(r))}getEntries(e,r){let n=Mc();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():cs.newInvalidDocument(a))}),jt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Mc();const i=r.path,l=new br(i.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||SO(JX(d),n)<=0||(a.has(d.key)||Vb(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return jt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Fr()}Or(e,r){return jt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new fxe(this)}getSize(e){return jt.resolve(this.size)}}class fxe extends eJ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),jt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(e){this.persistence=e,this.Nr=new K0(r=>xp(r),Ub),this.lastRemoteSnapshotVersion=$r.min(),this.highestTargetId=0,this.Lr=0,this.Br=new VO,this.targetCount=0,this.kr=bp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),jt.resolve()}getLastRemoteSnapshotVersion(e){return jt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return jt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),jt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),jt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new bp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,jt.resolve()}updateTargetData(e,r){return this.Kn(r),jt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,jt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),jt.waitFor(s).next(()=>a)}getTargetCount(e){return jt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return jt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),jt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),jt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),jt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return jt.resolve(n)}containsKey(e,r){return jt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Eu(0),this.Kr=!1,this.Kr=!0,this.$r=new cxe,this.referenceDelegate=e(this),this.Ur=new Axe(this),this.indexManager=new Xge,this.remoteDocumentCache=function(a){return new dxe(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new GY(r),this.Gr=new oxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new lxe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new uxe(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){lr("MemoryPersistence","Starting transaction:",e);const a=new hxe(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return jt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class hxe extends eY{constructor(e){super(),this.currentSequenceNumber=e}}class kI{constructor(e){this.persistence=e,this.Jr=new VO,this.Yr=null}static Zr(e){return new kI(e)}get Xr(){if(this.Yr)return this.Yr;throw Fr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),jt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),jt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),jt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jt.forEach(this.Xr,n=>{const a=br.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,$r.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return jt.or([()=>jt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(e){this.serializer=e}O(e,r,n,a){const s=new _I("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JL,{unique:!0}),c.createObjectStore("documentMutations")}(e),LU(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=jt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),LU(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$r.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JL,{unique:!0});const f=u.store("mutations"),h=d.map(A=>f.put(A));return jt.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Hpe});u.createIndex("collectionPathOverlayIndex",$pe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Kpe,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Tpe});u.createIndex("documentKeyIndex",kpe),u.createIndex("collectionGroupIndex",Fpe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Lpe}).createIndex("sequenceNumberIndex",Upe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Qpe}).createIndex("documentKeyIndex",Vpe,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=bE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>jt.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>jt.forEach(l,c=>{Ur(c.userId===s.userId);const u=Im(this.serializer,c);return YY(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,l)=>{const c=new Yn(i),u=function(f){return[0,Ml(f)]}(c);s.push(r.get(u).next(d=>d?jt.resolve():(f=>r.put({targetId:0,path:Ml(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>jt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Mpe});const n=r.store("collectionParents"),a=new QO,s=i=>{if(a.add(i)){const l=i.lastSegment(),c=i.popLast();return n.put({collectionId:l,parent:Ml(c)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const c=new Yn(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,c],u)=>{const d=nf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=sy(a),i=qY(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new br(Yn.fromString(f.document.name).popFirst(5)):f.noDocument?br.fromSegments(f.noDocument.path):f.unknownDocument?br.fromSegments(f.unknownDocument.path):Fr()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(l.put(u))}).next(()=>jt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=tJ(this.serializer),s=new nJ(kI.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:wn();Im(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),jt.forEach(l,(c,u)=>{const d=new jo(u),f=jI.lt(this.serializer,d),h=s.getIndexManager(d),A=TI.lt(d,this.serializer,h,s.referenceDelegate);return new rJ(a,A,f,h).recalculateAndSaveOverlaysForDocumentKeys(new Uj(r,Eu.oe),c).next()})})}}function LU(t){t.createObjectStore("targetDocuments",{keyPath:Dpe}).createIndex("documentTargetsIndex",Rpe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ope,{unique:!0}),t.createObjectStore("targetGlobal")}const B5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HO{constructor(e,r,n,a,s,i,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!HO.D())throw new dr(Qt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nxe(this,a),this.Ai=r+"main",this.serializer=new GY(c),this.Ri=new h0(this.Ai,this.hi,new mxe(this.serializer)),this.$r=new $ge,this.Ur=new Jge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tJ(this.serializer),this.Gr=new Hge,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ol("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dr(Qt.FAILED_PRECONDITION,B5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Eu(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if($0(e))return lr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return N1(e).get("owner").next(r=>jt.resolve(this.vi(r)))}Ci(e){return vN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Qi(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(l=>s.indexOf(l)===-1);return jt.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?jt.resolve(!0):N1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new dr(Qt.FAILED_PRECONDITION,B5);return!1}}return!(!this.networkEnabled||!this.inForeground)||vN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&lr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Uj(e,Eu.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return TI.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yge(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){lr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?zpe:c===16?qpe:c===15?BO:c===14?sY:c===13?aY:c===12?Gpe:c===11?nY:void Fr()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,l=>(i=new Uj(l,this.Qr?this.Qr.next():Eu.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw Ol(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new dr(Qt.FAILED_PRECONDITION,ZX);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return N1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new dr(Qt.FAILED_PRECONDITION,B5)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return N1(e).put("owner",r)}static D(){return h0.D()}bi(e){const r=N1(e);return r.get("owner").next(n=>this.vi(n)?(lr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):jt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ol(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;tX()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return lr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ol("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ol("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function N1(t){return Qi(t,"owner")}function vN(t){return Qi(t,"clientMetadata")}function pxe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=wn(),a=wn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new $O(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tX()?8:tY(Mi())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new gxe;return this.Xi(e,r,i).next(l=>{if(s.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Vg()<=Tn.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",Hg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),jt.resolve()):(Vg()<=Tn.DEBUG&&lr("QueryEngine","Query:",Hg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Vg()<=Tn.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",Hg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tu(r))):jt.resolve())}Yi(e,r){if(dU(r))return jt.resolve(null);let n=Tu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=xE(r,null,"F"),n=Tu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=wn(...s);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,i,c.readTime)?this.Yi(e,xE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return dU(r)||a.isEqual($r.min())?jt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?jt.resolve(null):(Vg()<=Tn.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Hg(r)),this.rs(e,i,r,Cpe(a,-1)).next(l=>l))})}ts(e,r){let n=new Ia(yY(e));return r.forEach((a,s)=>{Vb(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Vg()<=Tn.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",Hg(r)),this.Ji.getDocumentsMatchingQuery(e,r,$c.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new hs(fn),this._s=new K0(s=>xp(s),Ub),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function sJ(t,e,r,n){return new xxe(t,e,r,n)}async function iJ(t,e){const r=nn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=wn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:l}))})})}function vxe(t,e){const r=nn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let A=jt.resolve();return h.forEach(m=>{A=A.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Ur(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=wn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function oJ(t){const e=nn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function yxe(t,e){const r=nn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let A=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?A=A.withResumeToken(ni.EMPTY_BYTE_STRING,$r.min()).withLastLimboFreeSnapshotVersion($r.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,n)),a=a.insert(f,A),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,A,d)&&l.push(r.Ur.updateTargetData(s,A))});let c=Mc(),u=wn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(bxe(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual($r.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return jt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function bxe(t,e,r){let n=wn(),a=wn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=Mc();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual($r.min())?(e.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(l,c)):lr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function wxe(t,e){const r=nn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Nxe(t,e){const r=nn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,jt.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new nA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function eT(t,e,r){const n=nn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!$0(i))throw i;lr("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function UU(t,e,r){const n=nn(t);let a=$r.min(),s=wn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=nn(c),h=f._s.get(d);return h!==void 0?jt.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(n,i,Tu(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:$r.min(),r?s:wn())).next(l=>(Cxe(n,cge(e),l),{documents:l,Ts:s})))}function Cxe(t,e,r){let n=t.us.get(e)||$r.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class QU{constructor(){this.activeTargetIds=mge()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lJ{constructor(){this.so=new QU,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new QU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _xe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yN=null;function P5(){return yN===null?yN=function(){return 268435456+Math.round(2147483648*Math.random())}():yN++,"0x"+yN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Exe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="WebChannelConnection";class Ixe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const l=P5(),c=this.xo(r,n.toUriEncodedString());lr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(lr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw N0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,l){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=Exe[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=P5();return new Promise((i,l)=>{const c=new $X;c.setWithCredentials(!0),c.listenOnce(KX.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case A_.NO_ERROR:const d=c.getResponseJson();lr(zo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case A_.TIMEOUT:lr(zo,`RPC '${e}' ${s} timed out`),l(new dr(Qt.DEADLINE_EXCEEDED,"Request time out"));break;case A_.HTTP_ERROR:const f=c.getStatus();if(lr(zo,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const A=h==null?void 0:h.error;if(A&&A.status&&A.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Qt).indexOf(x)>=0?x:Qt.UNKNOWN}(A.status);l(new dr(m,A.message))}else l(new dr(Qt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new dr(Qt.UNAVAILABLE,"Connection failed."));break;default:Fr()}}finally{lr(zo,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);lr(zo,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=P5(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=zX(),l=qX(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");lr(zo,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);let h=!1,A=!1;const m=new Sxe({Io:g=>{A?lr(zo,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(lr(zo,`Opening RPC '${e}' stream ${a} transport.`),f.open(),h=!0),lr(zo,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,ry.EventType.OPEN,()=>{A||(lr(zo,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,ry.EventType.CLOSE,()=>{A||(A=!0,lr(zo,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,ry.EventType.ERROR,g=>{A||(A=!0,N0(zo,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new dr(Qt.UNAVAILABLE,"The operation could not be completed")))}),p(f,ry.EventType.MESSAGE,g=>{var x;if(!A){const y=g.data[0];Ur(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){lr(zo,`RPC '${e}' stream ${a} received error:`,w);const B=w.status;let P=function(I){const O=oi[I];if(O!==void 0)return TY(O)}(B),_=w.message;P===void 0&&(P=Qt.INTERNAL,_="Unknown error status: "+B+" with message "+w.message),A=!0,m.So(new dr(P,_)),f.close()}else lr(zo,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,GX.STAT_EVENT,g=>{g.stat===Mj.PROXY?lr(zo,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===Mj.NOPROXY&&lr(zo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bxe(){return typeof window<"u"?window:null}function y_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t){return new jge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&lr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(e,r,n,a,s,i,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KO(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Qt.RESOURCE_EXHAUSTED?(Ol(r.toString()),Ol("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Qt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new dr(Qt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return lr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pxe extends cJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Oge(this.serializer,e),n=function(s){if(!("targetChange"in s))return $r.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?$r.min():i.readTime?uo(i.readTime):$r.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Wj(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=pE(c)?{documents:UY(s,c)}:{query:QY(s,c)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=OY(s,i.resumeToken);const u=qj(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo($r.min())>0){l.readTime=Jx(s,i.snapshotVersion.toTimestamp());const u=qj(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Rge(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Wj(this.serializer),r.removeTarget=e,this.a_(r)}}class jxe extends cJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,Ur(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Dge(e.writeResults,e.commitTime),n=uo(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Wj(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>R2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new dr(Qt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,zj(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new dr(Qt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,zj(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new dr(Qt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kxe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ol(r),this.D_=!1):lr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{$p(this)&&(lr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=nn(c);u.L_.add(4),await $b(u),u.q_.set("Unknown"),u.L_.delete(4),await OI(u)}(this))})}),this.q_=new kxe(n,a)}}async function OI(t){if($p(t))for(const e of t.B_)await e(!0)}async function $b(t){for(const e of t.B_)await e(!1)}function uJ(t,e){const r=nn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),WO(r)?zO(r):Ev(r).r_()&&qO(r,e))}function GO(t,e){const r=nn(t),n=Ev(r);r.N_.delete(e),n.r_()&&dJ(r,e),r.N_.size===0&&(n.r_()?n.o_():$p(r)&&r.q_.set("Unknown"))}function qO(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($r.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ev(t).A_(e)}function dJ(t,e){t.Q_.xe(e),Ev(t).R_(e)}function zO(t){t.Q_=new Sge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ev(t).start(),t.q_.v_()}function WO(t){return $p(t)&&!Ev(t).n_()&&t.N_.size>0}function $p(t){return nn(t).L_.size===0}function fJ(t){t.Q_=void 0}async function Oxe(t){t.q_.set("Online")}async function Dxe(t){t.N_.forEach((e,r)=>{qO(t,e)})}async function Rxe(t,e){fJ(t),WO(t)?(t.q_.M_(e),zO(t)):t.q_.set("Unknown")}async function Mxe(t,e,r){if(t.q_.set("Online"),e instanceof FY&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){lr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await wE(t,n)}else if(e instanceof v_?t.Q_.Ke(e):e instanceof kY?t.Q_.He(e):t.Q_.We(e),!r.isEqual($r.min()))try{const n=await oJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Q_.rt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ni.EMPTY_BYTE_STRING,d.snapshotVersion)),dJ(s,c);const f=new nA(d.target,c,u,d.sequenceNumber);qO(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){lr("RemoteStore","Failed to raise snapshot:",n),await wE(t,n)}}async function wE(t,e,r){if(!$0(e))throw e;t.L_.add(1),await $b(t),t.q_.set("Offline"),r||(r=()=>oJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{lr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await OI(t)})}function AJ(t,e){return e().catch(r=>wE(t,r,e))}async function Kb(t){const e=nn(t),r=S0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Lxe(e);)try{const a=await wxe(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Uxe(e,a)}catch(a){await wE(e,a)}hJ(e)&&mJ(e)}function Lxe(t){return $p(t)&&t.O_.length<10}function Uxe(t,e){t.O_.push(e);const r=S0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function hJ(t){return $p(t)&&!S0(t).n_()&&t.O_.length>0}function mJ(t){S0(t).start()}async function Qxe(t){S0(t).p_()}async function Vxe(t){const e=S0(t);for(const r of t.O_)e.m_(r.mutations)}async function Hxe(t,e,r){const n=t.O_.shift(),a=DO.from(n,e,r);await AJ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Kb(t)}async function $xe(t,e){e&&S0(t).V_&&await async function(n,a){if(function(i){return jY(i)&&i!==Qt.ABORTED}(a.code)){const s=n.O_.shift();S0(n).s_(),await AJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Kb(n)}}(t,e),hJ(t)&&mJ(t)}async function HU(t,e){const r=nn(t);r.asyncQueue.verifyOperationInProgress(),lr("RemoteStore","RemoteStore received new credentials");const n=$p(r);r.L_.add(3),await $b(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await OI(r)}async function Kxe(t,e){const r=nn(t);e?(r.L_.delete(2),await OI(r)):e||(r.L_.add(2),await $b(r),r.q_.set("Unknown"))}function Ev(t){return t.K_||(t.K_=function(r,n,a){const s=nn(r);return s.w_(),new Pxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:Oxe.bind(null,t),Ro:Dxe.bind(null,t),mo:Rxe.bind(null,t),d_:Mxe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),WO(t)?zO(t):t.q_.set("Unknown")):(await t.K_.stop(),fJ(t))})),t.K_}function S0(t){return t.U_||(t.U_=function(r,n,a){const s=nn(r);return s.w_(),new jxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Qxe.bind(null,t),mo:$xe.bind(null,t),f_:Vxe.bind(null,t),g_:Hxe.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Kb(t)):(await t.U_.stop(),t.O_.length>0&&(lr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new vd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,l=new XO(e,r,i,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dr(Qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function YO(t,e){if(Ol("AsyncQueue",`${e}: ${t}`),$0(t))return new dr(Qt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.comparator=e?(r,n)=>e(r,n)||br.comparator(r.key,n.key):(r,n)=>br.comparator(r.key,n.key),this.keyedMap=ny(),this.sortedSet=new hs(this.comparator)}static emptySet(e){return new Bx(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Bx)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Bx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.W_=new hs(br.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Fr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Zx{constructor(e,r,n,a,s,i,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new Zx(e,r,Bx.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&SI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gxe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qxe{constructor(){this.queries=KU(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=nn(r),s=a.queries;a.queries=KU(),s.forEach((i,l)=>{for(const c of l.j_)c.onError(n)})})(this,new dr(Qt.ABORTED,"Firestore shutting down"))}}function KU(){return new K0(t=>vY(t),SI)}async function JO(t,e){const r=nn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new Gxe,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=YO(i,`Initialization of query '${Hg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&e6(r)}async function ZO(t,e){const r=nn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function zxe(t,e){const r=nn(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.j_)l.X_(a)&&(n=!0);i.z_=a}}n&&e6(r)}function Wxe(t,e,r){const n=nn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function e6(t){t.Y_.forEach(e=>{e.next()})}var tT,GU;(GU=tT||(tT={})).ea="default",GU.Cache="cache";class t6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Zx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Zx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(e){this.key=e}}class gJ{constructor(e){this.key=e}}class Xxe{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=wn(),this.mutatedKeys=wn(),this.Aa=yY(e),this.Ra=new Bx(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new $U,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const h=a.get(d),A=Vb(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let g=!1;h&&A?h.data.isEqual(A.data)?m!==p&&(n.track({type:3,doc:A}),g=!0):this.ga(h,A)||(n.track({type:2,doc:A}),g=!0,(c&&this.Aa(A,c)>0||u&&this.Aa(A,u)<0)&&(l=!0)):!h&&A?(n.track({type:0,doc:A}),g=!0):h&&!A&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(A?(i=i.add(A),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,f)=>function(A,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fr()}};return p(A)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new Zx(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $U,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=wn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new gJ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new pJ(n))}),r}ba(e){this.Ta=e.Ts,this.da=wn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Zx.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Yxe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Jxe{constructor(e){this.key=e,this.va=!1}}class Zxe{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new K0(l=>vY(l),SI),this.Ma=new Map,this.xa=new Set,this.Oa=new hs(br.comparator),this.Na=new Map,this.La=new VO,this.Ba={},this.ka=new Map,this.qa=bp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eve(t,e,r=!0){const n=NJ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await xJ(n,e,r,!0),a}async function tve(t,e){const r=NJ(t);await xJ(r,e,!0,!1)}async function xJ(t,e,r,n){const a=await Nxe(t.localStore,Tu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await rve(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&uJ(t.remoteStore,a),l}async function rve(t,e,r,n,a){t.Ka=(f,h,A)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await UU(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),B=y&&y.targetMismatches.get(g.targetId)!=null,P=g.view.applyChanges(b,p.isPrimaryClient,w,B);return zU(p,g.targetId,P.wa),P.snapshot}(t,f,h,A);const s=await UU(t.localStore,e,!0),i=new Xxe(e,s.Ts),l=i.ma(s.documents),c=Hb.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(l,t.isPrimaryClient,c);zU(t,r,u.wa);const d=new Yxe(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function nve(t,e,r){const n=nn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!SI(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await eT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&GO(n.remoteStore,a.targetId),rT(n,a.targetId)}).catch(Vp)):(rT(n,a.targetId),await eT(n.localStore,a.targetId,!0))}async function ave(t,e){const r=nn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),GO(r.remoteStore,n.targetId))}async function sve(t,e,r){const n=CJ(t);try{const a=await function(i,l){const c=nn(i),u=tr.now(),d=l.reduce((A,m)=>A.add(m.key),wn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let m=Mc(),p=wn();return c.cs.getEntries(A,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,m)).next(g=>{f=g;const x=[];for(const y of l){const b=Nge(y,f.get(y.key).overlayedDocument);b!=null&&x.push(new LA(y.key,b,uY(b.value.mapValue),ds.exists(!0)))}return c.mutationQueue.addMutationBatch(A,u,x,l)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(A,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:wY(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new hs(fn)),u=u.insert(l,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await Gb(n,a.changes),await Kb(n.remoteStore)}catch(a){const s=YO(a,"Failed to persist write");r.reject(s)}}async function vJ(t,e){const r=nn(t);try{const n=await yxe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Ur(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Ur(i.va):a.removedDocuments.size>0&&(Ur(i.va),i.va=!1))}),await Gb(r,n,e)}catch(n){await Vp(n)}}function qU(t,e,r){const n=nn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const l=i.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=nn(i);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&e6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ive(t,e,r){const n=nn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new hs(br.comparator);i=i.insert(s,cs.newNoDocument(s,$r.min()));const l=wn().add(s),c=new PI($r.min(),new Map,new hs(fn),i,l);await vJ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),r6(n)}else await eT(n.localStore,e,!1).then(()=>rT(n,e,r)).catch(Vp)}async function ove(t,e){const r=nn(t),n=e.batch.batchId;try{const a=await vxe(r.localStore,e);bJ(r,n,null),yJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Gb(r,a)}catch(a){await Vp(a)}}async function lve(t,e,r){const n=nn(t);try{const a=await function(i,l){const c=nn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ur(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);bJ(n,e,r),yJ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Gb(n,a)}catch(a){await Vp(a)}}function yJ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function bJ(t,e,r){const n=nn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function rT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||wJ(t,n)})}function wJ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(GO(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),r6(t))}function zU(t,e,r){for(const n of r)n instanceof pJ?(t.La.addReference(n.key,e),cve(t,n)):n instanceof gJ?(lr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||wJ(t,n.key)):Fr()}function cve(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(lr("SyncEngine","New document in limbo: "+r),t.xa.add(n),r6(t))}function r6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new br(Yn.fromString(e)),n=t.qa.next();t.Na.set(n,new Jxe(r)),t.Oa=t.Oa.insert(r,n),uJ(t.remoteStore,new nA(Tu(Qb(r.path)),n,"TargetPurposeLimboResolution",Eu.oe))}}async function Gb(t,e,r){const n=nn(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=$O.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=nn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>jt.forEach(u,h=>jt.forEach(h.$i,A=>d.persistence.referenceDelegate.addReference(f,h.targetId,A)).next(()=>jt.forEach(h.Ui,A=>d.persistence.referenceDelegate.removeReference(f,h.targetId,A)))))}catch(f){if(!$0(f))throw f;lr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const A=d.os.get(h),m=A.snapshotVersion,p=A.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function uve(t,e){const r=nn(t);if(!r.currentUser.isEqual(e)){lr("SyncEngine","User change. New user:",e.toKey());const n=await iJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new dr(Qt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Gb(r,n.hs)}}function dve(t,e){const r=nn(t),n=r.Na.get(e);if(n&&n.va)return wn().add(n.key);{let a=wn();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const l=r.Fa.get(i);a=a.unionWith(l.view.Va)}return a}}function NJ(t){const e=nn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ive.bind(null,e),e.Ca.d_=zxe.bind(null,e.eventManager),e.Ca.$a=Wxe.bind(null,e.eventManager),e}function CJ(t){const e=nn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ove.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lve.bind(null,e),e}class M2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=FI(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return sJ(this.persistence,new aJ,e.initialUser,this.serializer)}Ga(e){return new nJ(kI.Zr,this.serializer)}Wa(e){return new lJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}M2.provider={build:()=>new M2};class fve extends M2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await CJ(this.Ja.syncEngine),await Kb(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return sJ(this.persistence,new aJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new exe(n,e.asyncQueue,r)}Ha(e,r){const n=new Ipe(r,this.persistence);return new Spe(e.asyncQueue,n)}Ga(e){const r=pxe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ec.withCacheSize(this.cacheSizeBytes):ec.DEFAULT;return new HO(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Bxe(),y_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new lJ}}class NE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>qU(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=uve.bind(null,this.syncEngine),await Kxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qxe}()}createDatastore(e){const r=FI(e.databaseInfo.databaseId),n=function(s){return new Ixe(s)}(e.databaseInfo);return function(s,i,l,c){return new Txe(s,i,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,l){return new Fxe(n,a,s,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>qU(this.syncEngine,r,0),function(){return VU.D()?new VU:new _xe}())}createSyncEngine(e,r){return function(a,s,i,l,c,u,d){const f=new Zxe(a,s,i,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=nn(a);lr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await $b(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}NE.provider={build:()=>new NE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ol("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new dr(Qt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=nn(a),l={documents:s.map(f=>D2(i.serializer,f))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Yn.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const h=Fge(i.serializer,f);u.set(h.key.toString(),h)});const d=[];return s.forEach(f=>{const h=u.get(f.toString());Ur(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new _v(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=br.fromPath(n);this.mutations.push(new FO(a,this.precondition(a)))}),await async function(n,a){const s=nn(n),i={writes:a.map(l=>R2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,Yn.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Fr();r=$r.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new dr(Qt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($r.min())?ds.exists(!1):ds.updateTime(r):ds.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($r.min()))throw new dr(Qt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ds.updateTime(r)}return ds.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new KO(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Ave(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Lb(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!jY(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=jo.UNAUTHENTICATED,this.clientId=EO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{lr("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(lr("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=YO(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function j5(t,e){t.asyncQueue.verifyOperationInProgress(),lr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await iJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function WU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await pve(t);lr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>HU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>HU(e.remoteStore,a)),t._onlineComponents=e}async function pve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lr("FirestoreClient","Using user provided OfflineComponentProvider");try{await j5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Qt.FAILED_PRECONDITION||a.code===Qt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;N0("Error using user provided cache. Falling back to memory cache: "+r),await j5(t,new M2)}}else lr("FirestoreClient","Using default OfflineComponentProvider"),await j5(t,new M2);return t._offlineComponents}async function a6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lr("FirestoreClient","Using user provided OnlineComponentProvider"),await WU(t,t._uninitializedComponentsProvider._online)):(lr("FirestoreClient","Using default OnlineComponentProvider"),await WU(t,new NE))),t._onlineComponents}function gve(t){return a6(t).then(e=>e.syncEngine)}function xve(t){return a6(t).then(e=>e.datastore)}async function CE(t){const e=await a6(t),r=e.eventManager;return r.onListen=eve.bind(null,e.syncEngine),r.onUnlisten=nve.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=tve.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=ave.bind(null,e.syncEngine),r}function vve(t,e,r={}){const n=new vd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new n6({next:h=>{d.Za(),i.enqueueAndForget(()=>ZO(s,f));const A=h.docs.has(l);!A&&h.fromCache?u.reject(new dr(Qt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&h.fromCache&&c&&c.source==="server"?u.reject(new dr(Qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new t6(Qb(l.path),d,{includeMetadataChanges:!0,_a:!0});return JO(s,f)}(await CE(t),t.asyncQueue,e,r,n)),n.promise}function yve(t,e,r={}){const n=new vd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new n6({next:h=>{d.Za(),i.enqueueAndForget(()=>ZO(s,f)),h.fromCache&&c.source==="server"?u.reject(new dr(Qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new t6(l,d,{includeMetadataChanges:!0,_a:!0});return JO(s,f)}(await CE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t,e,r){if(!r)throw new dr(Qt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SJ(t,e,r,n){if(e===!0&&n===!0)throw new dr(Qt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function YU(t){if(!br.isDocumentKey(t))throw new dr(Qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JU(t){if(br.isDocumentKey(t))throw new dr(Qt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function DI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fr()}function fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dr(Qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=DI(t);throw new dr(Qt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new dr(Qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new dr(Qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_J((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RI{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZU({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dr(Qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dr(Qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZU(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new XX;switch(n.type){case"firstParty":return new vpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new dr(Qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=XU.get(r);n&&(lr("ComponentProvider","Removing Datastore"),XU.delete(r),n.terminate())}(this),Promise.resolve()}}function IJ(t,e,r,n={}){var a;const s=(t=fo(t,RI))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&N0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=jo.MOCK_USER;else{l=DAe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new dr(Qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new jo(u)}t._authCredentials=new ppe(new WX(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bf(this.firestore,e,this._query)}}class Ao{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ao(this.firestore,e,this._key)}}class dA extends bf{constructor(e,r,n){super(e,r,Qb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ao(this.firestore,null,new br(e))}withConverter(e){return new dA(this.firestore,e,this._path)}}function At(t,e,...r){if(t=Is(t),EJ("collection","path",e),t instanceof RI){const n=Yn.fromString(e,...r);return JU(n),new dA(t,null,n)}{if(!(t instanceof Ao||t instanceof dA))throw new dr(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yn.fromString(e,...r));return JU(n),new dA(t.firestore,null,n)}}function $t(t,e,...r){if(t=Is(t),arguments.length===1&&(e=EO.newId()),EJ("doc","path",e),t instanceof RI){const n=Yn.fromString(e,...r);return YU(n),new Ao(t,null,new br(n))}{if(!(t instanceof Ao||t instanceof dA))throw new dr(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yn.fromString(e,...r));return YU(n),new Ao(t.firestore,t instanceof dA?t.converter:null,new br(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KO(this,"async_queue_retry"),this.Vu=()=>{const n=y_();n&&lr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=y_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=y_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new vd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$0(e))throw e;lr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw Ol("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=XO.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Fr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function t7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Kc extends RI{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new e7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e7(e),this._firestoreClient=void 0,await e}}}function BJ(t,e){const r=typeof t=="object"?t:hO(),n=typeof t=="string"?t:"(default)",a=fO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=FAe("firestore");s&&IJ(a,...s)}return a}function Kp(t){if(t._terminated)throw new dr(Qt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PJ(t),t._firestoreClient}function PJ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Xpe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_J(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new mve(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function jJ(t,e){N0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return bve(t,NE.provider,{build:n=>new fve(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function bve(t,e,r){if((t=fo(t,Kc))._firestoreClient||t._terminated)throw new dr(Qt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new dr(Qt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},PJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new I0(ni.fromBase64String(e))}catch(r){throw new dr(Qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new I0(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new dr(Qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new dr(Qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new dr(Qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wve=/^__.*__$/;class Nve{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new LA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Cv(e,this.data,r,this.fieldTransforms)}}class TJ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new LA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function kJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fr()}}class s6{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new s6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _E(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(kJ(this.Cu)&&wve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Cve{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||FI(e)}Qu(e,r,n,a=!1){return new s6({Cu:e,methodName:r,qu:n,path:us.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sv(t){const e=t._freezeSettings(),r=FI(t._databaseId);return new Cve(t._databaseId,!!e.ignoreUndefinedProperties,r)}function QI(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);l6("Data must be an object, but it was:",i,n);const l=FJ(n,i);let c,u;if(s.merge)c=new sc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=nT(e,f,r);if(!i.contains(h))throw new dr(Qt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);DJ(d,h)||d.push(h)}c=new sc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Nve(new Oo(l),c,u)}class VI extends MI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof VI}}function i6(t,e,r,n){const a=t.Qu(1,e,r);l6("Data must be an object, but it was:",a,n);const s=[],i=Oo.empty();Hp(n,(c,u)=>{const d=c6(e,c,r);u=Is(u);const f=a.Nu(d);if(u instanceof VI)s.push(d);else{const h=qb(u,f);h!=null&&(s.push(d),i.set(d,h))}});const l=new sc(s);return new TJ(i,l,a.fieldTransforms)}function o6(t,e,r,n,a,s){const i=t.Qu(1,e,r),l=[nT(e,n,r)],c=[a];if(s.length%2!=0)throw new dr(Qt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(nT(e,s[h])),c.push(s[h+1]);const u=[],d=Oo.empty();for(let h=l.length-1;h>=0;--h)if(!DJ(u,l[h])){const A=l[h];let m=c[h];m=Is(m);const p=i.Nu(A);if(m instanceof VI)u.push(A);else{const g=qb(m,p);g!=null&&(u.push(A),d.set(A,g))}}const f=new sc(u);return new TJ(d,f,i.fieldTransforms)}function _ve(t,e,r,n=!1){return qb(r,t.Qu(n?4:3,e))}function qb(t,e){if(OJ(t=Is(t)))return l6("Unsupported field value:",e,t),FJ(t,e);if(t instanceof MI)return function(n,a){if(!kJ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=qb(l,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Is(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=tr.fromDate(n);return{timestampValue:Jx(a.serializer,s)}}if(n instanceof tr){const s=new tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jx(a.serializer,s)}}if(n instanceof LI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof I0)return{bytesValue:OY(a.serializer,n._byteString)};if(n instanceof Ao){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:LO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof UI)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return kO(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${DI(n)}`)}(t,e)}function FJ(t,e){const r={};return iY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hp(t,(n,a)=>{const s=qb(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function OJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tr||t instanceof LI||t instanceof I0||t instanceof Ao||t instanceof MI||t instanceof UI)}function l6(t,e,r){if(!OJ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=DI(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function nT(t,e,r){if((e=Is(e))instanceof Gp)return e._internalPath;if(typeof e=="string")return c6(t,e);throw _E("Field path arguments must be of type string or ",t,!1,void 0,r)}const Eve=new RegExp("[~\\*/\\[\\]]");function c6(t,e,r){if(e.search(Eve)>=0)throw _E(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Gp(...e.split("."))._internalPath}catch{throw _E(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function _E(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new dr(Qt.INVALID_ARGUMENT,l+t+c)}function DJ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ao(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(HI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Sve extends EE{data(){return super.data()}}function HI(t,e){return typeof e=="string"?c6(t,e):e instanceof Gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new dr(Qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u6{}class $I extends u6{}function Wt(t,e,...r){let n=[];e instanceof u6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof KI).length,l=s.filter(c=>c instanceof zb).length;if(i>1||i>0&&l>0)throw new dr(Qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class zb extends $I{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new zb(e,r,n)}_apply(e){const r=this._parse(e);return LJ(e._query,r),new bf(e.firestore,e.converter,Gj(e._query,r))}_parse(e){const r=Sv(e.firestore);return function(s,i,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new dr(Qt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){n7(f,d);const A=[];for(const m of f)A.push(r7(c,s,m));h={arrayValue:{values:A}}}else h=r7(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||n7(f,d),h=_ve(l,i,f,d==="in"||d==="not-in");return kn.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function sr(t,e,r){const n=e,a=HI("where",t);return zb._create(a,n,r)}class KI extends u6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new KI(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:va.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)LJ(i,c),i=Gj(i,c)}(e._query,r),new bf(e.firestore,e.converter,Gj(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GI extends $I{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new GI(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new k2(s,i)}(e._query,this._field,this._direction);return new bf(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Nv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function ln(t,e="asc"){const r=e,n=HI("orderBy",t);return GI._create(n,r)}class qI extends $I{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new qI(e,r,n)}_apply(e){return new bf(e.firestore,e.converter,xE(e._query,this._limit,this._limitType))}}function MJ(t){return qI._create("limit",t,"F")}function r7(t,e,r){if(typeof(r=Is(r))=="string"){if(r==="")throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xY(e)&&r.indexOf("/")!==-1)throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Yn.fromString(r));if(!br.isDocumentKey(n))throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return j2(t,new br(n))}if(r instanceof Ao)return j2(t,r._key);throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${DI(r)}.`)}function n7(t,e){if(!Array.isArray(t)||t.length===0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LJ(t,e){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new dr(Qt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new dr(Qt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class d6{convertValue(e,r="none"){switch(gp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return os(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(C0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Fr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Hp(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>os(i.doubleValue));return new UI(s)}convertGeoPoint(e){return new LI(os(e.latitude),os(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=jO(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(B2(e));default:return null}}convertTimestamp(e){const r=_A(e);return new tr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Yn.fromString(e);Ur(KY(n));const a=new _0(n.get(1),n.get(3)),s=new br(n.popFirst(5));return a.isEqual(r)||Ol(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Ive extends d6{constructor(e){super(),this.firestore=e}convertBytes(e){return new I0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ao(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WI extends EE{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(HI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ry extends WI{data(e={}){return super.data(e)}}class f6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Dm(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ry(this._firestore,this._userDataWriter,n.key,n,new Dm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new dr(Qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new Ry(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Dm(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Ry(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Dm(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:Bve(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Bve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){t=fo(t,Ao);const e=fo(t.firestore,Kc);return vve(Kp(e),t._key).then(r=>QJ(e,t,r))}class XI extends d6{constructor(e){super(),this.firestore=e}convertBytes(e){return new I0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ao(this.firestore,null,r)}}function Dt(t){t=fo(t,bf);const e=fo(t.firestore,Kc),r=Kp(e),n=new XI(e);return RJ(t._query),yve(r,t._query).then(a=>new f6(e,n,t,a))}function UJ(t,e,r){t=fo(t,Ao);const n=fo(t.firestore,Kc),a=zI(t.converter,e,r);return Iv(n,[QI(Sv(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ds.none())])}function Jr(t,e,r,...n){t=fo(t,Ao);const a=fo(t.firestore,Kc),s=Sv(a);let i;return i=typeof(e=Is(e))=="string"||e instanceof Gp?o6(s,"updateDoc",t._key,e,r,n):i6(s,"updateDoc",t._key,e),Iv(a,[i.toMutation(t._key,ds.exists(!0))])}function Qn(t){return Iv(fo(t.firestore,Kc),[new _v(t._key,ds.none())])}function Nn(t,e){const r=fo(t.firestore,Kc),n=$t(t),a=zI(t.converter,e);return Iv(r,[QI(Sv(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ds.exists(!1))]).then(()=>n)}function Ed(t,...e){var r,n,a;t=Is(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||t7(e[i])||(s=e[i],i++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(t7(e[i])){const f=e[i];e[i]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[i+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[i+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof Ao)u=fo(t.firestore,Kc),d=Qb(t._key.path),c={next:f=>{e[i]&&e[i](QJ(u,t,f))},error:e[i+1],complete:e[i+2]};else{const f=fo(t,bf);u=fo(f.firestore,Kc),d=f._query;const h=new XI(u);c={next:A=>{e[i]&&e[i](new f6(u,h,f,A))},error:e[i+1],complete:e[i+2]},RJ(t._query)}return function(h,A,m,p){const g=new n6(p),x=new t6(A,g,m);return h.asyncQueue.enqueueAndForget(async()=>JO(await CE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>ZO(await CE(h),x))}}(Kp(u),d,l,c)}function Iv(t,e){return function(n,a){const s=new vd;return n.asyncQueue.enqueueAndForget(async()=>sve(await gve(n),a,s)),s.promise}(Kp(t),e)}function QJ(t,e,r){const n=r.docs.get(e._key),a=new XI(t);return new WI(t,a,e._key,n,new Dm(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Sv(e)}set(e,r,n){this._verifyNotCommitted();const a=$h(e,this._firestore),s=zI(a.converter,r,n),i=QI(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,ds.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=$h(e,this._firestore);let i;return i=typeof(r=Is(r))=="string"||r instanceof Gp?o6(this._dataReader,"WriteBatch.update",s._key,r,n,a):i6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,ds.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=$h(e,this._firestore);return this._mutations=this._mutations.concat(new _v(r._key,ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dr(Qt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(t,e){if((t=Is(t)).firestore!==e)throw new dr(Qt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Sv(r)}get(r){const n=$h(r,this._firestore),a=new Ive(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Fr();const i=s[0];if(i.isFoundDocument())return new EE(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new EE(this._firestore,a,n._key,null,n.converter);throw Fr()})}set(r,n,a){const s=$h(r,this._firestore),i=zI(s.converter,n,a),l=QI(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const i=$h(r,this._firestore);let l;return l=typeof(n=Is(n))=="string"||n instanceof Gp?o6(this._dataReader,"Transaction.update",i._key,n,a,s):i6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=$h(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=$h(e,this._firestore),n=new XI(this._firestore);return super.get(e).then(a=>new WI(this._firestore,n,r._key,a._document,new Dm(!1,!1),r.converter))}}function Di(t,e,r){t=fo(t,Kc);const n=Object.assign(Object.assign({},Pve),r);return function(s){if(s.maxAttempts<1)throw new dr(Qt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,l){const c=new vd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await xve(s);new hve(s.asyncQueue,u,l,i,c).au()}),c.promise}(Kp(t),a=>e(new HJ(t,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){return Kp(t=fo(t,Kc)),new VJ(t,e=>Iv(t,e))}(function(e,r=!0){(function(a){wv=a})(yv),Kx(new Ap("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new Kc(new gpe(n.getProvider("auth-internal")),new bpe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new dr(Qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),A0(WL,"4.7.3",e),A0(WL,"4.7.3","esm2017")})();const jve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:d6,Bytes:I0,CollectionReference:dA,DocumentReference:Ao,DocumentSnapshot:WI,FieldPath:Gp,FieldValue:MI,Firestore:Kc,FirestoreError:dr,GeoPoint:LI,Query:bf,QueryCompositeFilterConstraint:KI,QueryConstraint:$I,QueryDocumentSnapshot:Ry,QueryFieldFilterConstraint:zb,QueryLimitConstraint:qI,QueryOrderByConstraint:GI,QuerySnapshot:f6,SnapshotMetadata:Dm,Timestamp:tr,Transaction:HJ,VectorValue:UI,WriteBatch:VJ,_AutoId:EO,_ByteString:ni,_DatabaseId:_0,_DocumentKey:br,_EmptyAuthCredentialsProvider:XX,_FieldPath:us,_cast:fo,_logWarn:N0,_validateIsNotUsedTogether:SJ,addDoc:Nn,collection:At,connectFirestoreEmulator:IJ,deleteDoc:Qn,doc:$t,enableIndexedDbPersistence:jJ,ensureFirestoreConfigured:Kp,executeWrite:Iv,getDoc:Li,getDocs:Dt,getFirestore:BJ,limit:MJ,onSnapshot:Ed,orderBy:ln,query:Wt,runTransaction:Di,setDoc:UJ,updateDoc:Jr,where:sr,writeBatch:G0},Symbol.toStringTag,{value:"Module"})),Tve={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},$J=AO(Tve),je=BJ($J),B0=VX($J);jJ(je).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function kve(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState(!1),d=jb(),f=A=>{if(localStorage.setItem("role",A),A==="admin")return d("/admin");if(A==="vendedor_pollo")return d("/admin/salesV2");if(A==="vendedor_ropa")return d("/admin/salesClothes");if(A==="vendedor_dulces")return d("/admin/salesCandies")},h=async A=>{if(A.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),await tme(B0,kX);const m=await eme(B0,t,r),p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await Li($t(je,"users",p));if(!g.exists()){l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data(),y=x.role||"",b=x.name||"";if(!["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].includes(y)){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),b&&localStorage.setItem("user_name",b),f(y)}catch(m){const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas.":p==="auth/user-not-found"?"Usuario no encontrado.":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(m==null?void 0:m.message)||"Error al iniciar sesin.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:A=>e(A.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:A=>n(A.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(A=>!A),children:a?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&o.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function xn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=wO(B0,async l=>{if(l){const c=$t(je,"users",l.uid),u=await Li(c);if(u.exists()){const d=u.data().role;s(e.includes(d))}}n(!1)});return()=>i()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:o.jsx(xm,{to:"/"})}function Fve({role:t}){const e="/admin",r=({isActive:Y})=>`block rounded px-3 py-2 text-sm ${Y?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=jb(),[a,s]=v.useState(!1),[i,l]=v.useState(!1),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[h,A]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(!1),[y,b]=v.useState(!1),[w,B]=v.useState(!1),[P,_]=v.useState(!1),[E,I]=v.useState(!1),[O,S]=v.useState(!1),[j,D]=v.useState(!1),[J,ge]=v.useState(!1),[se,he]=v.useState(!1),[me,Z]=v.useState(!1),ve=async()=>{await wI(B0),n("/")},Se=({open:Y,onClick:R,children:z})=>o.jsxs("button",{type:"button",onClick:R,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:z}),o.jsx("span",{className:"text-xs",children:Y?"":""})]}),k=({open:Y,onClick:R,title:z})=>o.jsxs("button",{type:"button",onClick:R,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:z}),o.jsx("span",{className:"text-xs",children:Y?"":""})]}),F=t==="admin",H=t==="vendedor_pollo"||t==="vendedor",Q=t==="vendedor_ropa",V=t==="vendedor_dulces";return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${a?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>s(!a),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":a?"Expandir men":"Colapsar men",children:a?o.jsx("span",{title:"Expandir men",children:"Menu "}):o.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!a&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[F&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:i,onClick:()=>l(Y=>!Y),children:"Pollos Bea"}),i&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:c,onClick:()=>u(Y=>!Y),title:"Inventarios"}),c&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),o.jsx(on,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),o.jsx(k,{open:d,onClick:()=>f(Y=>!Y),title:"Finanzas"}),d&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),o.jsx(on,{to:`${e}/billing`,className:r,children:"Facturacion"}),o.jsx(on,{to:`${e}/expenses`,className:r,children:"Gastos"}),o.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),o.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"}),o.jsx(on,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),o.jsx(k,{open:h,onClick:()=>A(Y=>!Y),title:"Productos"}),h&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:m,onClick:()=>p(Y=>!Y),children:"Gonper"}),m&&o.jsx("div",{className:"pb-2",children:g&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/notebooksInventory`,className:r,children:"Productos y Precios"})})})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:O,onClick:()=>S(Y=>!Y),children:"CandyShop"}),O&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:J,onClick:()=>ge(Y=>!Y),title:"Vendedores"}),J&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),J&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsVendorsCandies`,className:r,children:"Sub ordenes"})}),J&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsPricesCandies`,className:r,children:"Precios Venta"})}),o.jsx(k,{open:j,onClick:()=>D(Y=>!Y),title:"Inventario"}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/mainordersCandies`,className:r,children:"Ordenes Maestras"})}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/inventoryMainOrderCandies`,className:r,children:"Lista de Ordenes"})}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/inventoryCandies`,className:r,children:"Lista Productos"})}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsCandies`,className:r,children:"Productos"})}),o.jsx(k,{open:se,onClick:()=>he(Y=>!Y),title:"Finanzas"}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/datacenter`,className:r,children:"Data Center"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cashDeliveries`,className:r,children:"Entregas Cash"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/transactionCandies`,className:r,children:"Transacciones"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierres"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/reporteCierresCandies`,className:r,children:"Reporte Cierres"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/billingsCandies`,className:r,children:"Facturas"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/consolidatedVendors`,className:r,children:"Consolidado Vendedores"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/dashboardCandies`,className:r,children:"Dashboard"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/customersCandies`,className:r,children:"Clientes"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/vendorsCandies`,className:r,children:"Vendedores"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/expensesCandies`,className:r,children:"Gastos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:me,onClick:()=>Z(Y=>!Y),children:"Operaciones Otras"}),me&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/users`,className:r,children:"Usuarios"}),o.jsx(on,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),o.jsx(on,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),H&&o.jsxs("div",{className:"border rounded",children:[o.jsx(Se,{open:d,onClick:()=>f(Y=>!Y),children:"Finanzas (Pollo)"}),d&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),o.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),V&&o.jsxs("div",{className:"border rounded",children:[o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/transactionCandies`,className:r,children:"Ventas del dia"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierre de Ventas"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsVendorsCandies`,className:r,children:"Pedidos"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/customersCandies`,className:r,children:"Clientes"})})]}),Q&&o.jsxs("div",{className:"border rounded",children:[o.jsx(Se,{open:m,onClick:()=>p(Y=>!Y),children:"Operaciones Ropa"}),m&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:P,onClick:()=>_(Y=>!Y),title:"Ventas"}),P&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),o.jsx(on,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),o.jsx(k,{open:y,onClick:()=>b(Y=>!Y),title:"Productos"}),y&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),o.jsx(k,{open:w,onClick:()=>B(Y=>!Y),title:"Clientes"}),w&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:ve,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(VW,{})})]})}function C1(...t){return t.filter(Boolean).join(" ")}function Ove({role:t}){const e=jb(),r=RA(),n="/admin",a=t==="admin",s=t==="vendedor_pollo",i=t==="vendedor_dulces",[l,c]=v.useState(()=>s?"POLLO":i?"DULCES":"POLLO"),[u,d]=v.useState(!1),f=v.useMemo(()=>a?l==="POLLO"?[{key:"venta",label:"Venta",to:`${n}/salesV2`},{key:"dash",label:"Dashboard",to:`${n}/financialDashboard`},{key:"inv",label:"Inventario",to:`${n}/batches`},{key:"invPag",label:"Factura",to:`${n}/paidBatches`},{key:"gastos",label:"Gastos",to:`${n}/expenses`}]:[{key:"dc",label:"Data Center Reporte",to:`${n}/datacenter`},{key:"maes",label:"Inventario Global",to:`${n}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${n}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${n}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${n}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${n}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${n}/cashDeliveries`},{key:"items",label:"Productos",to:`${n}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${n}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${n}/notebooksInventory`}]:s?[{key:"venta",label:"Venta",to:`${n}/salesV2`},{key:"inv",label:"Inventario",to:`${n}/batches`},{key:"cierre",label:"Cierre",to:`${n}/bills`}]:i?[{key:"venta",label:"Vender",to:`${n}/salesCandies`},{key:"precios",label:"Precios",to:`${n}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${n}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${n}/customersCandies`},{key:"trx",label:"Ventas",to:`${n}/transactionCandies`},{key:"cier",label:"Cierre",to:`${n}/cierreVentasCandies`}]:[{key:"home",label:"Inicio",to:`${n}`}],[a,s,i,l]);v.useEffect(()=>{a&&f.length&&e(f[0].to,{replace:!0})},[l]),v.useEffect(()=>{u&&d(!1)},[r.pathname]),v.useEffect(()=>{const g=x=>{x.key==="Escape"&&d(!1)};return u&&window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[u]);const h=async()=>{await wI(B0),d(!1),e("/")},A=({isActive:g})=>C1("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",g?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),m=f.length<=4,p=({isActive:g})=>C1("w-full flex items-center justify-between px-4 py-3 rounded-xl border",g?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return o.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[a?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>c("POLLO"),className:C1("px-3 py-2 rounded-2xl text-sm font-semibold",l==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),o.jsx("button",{type:"button",onClick:()=>c("DULCES"),className:C1("px-3 py-2 rounded-2xl text-sm font-semibold",l==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:s?"Pollos Bea":i?"CandyShop":"Posys"}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),u&&o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>d(!1),"aria-label":"Cerrar men"}),o.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[o.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),o.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:f.map(g=>o.jsxs(on,{to:g.to,className:p,children:[o.jsx("span",{className:"font-semibold",children:g.label}),o.jsx("span",{className:"text-sm opacity-80",children:""})]},g.key))}),o.jsx("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:o.jsx("button",{onClick:h,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"})})]})]}),o.jsx("main",{className:C1("flex-1 overflow-y-auto px-3 pt-3",m?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:o.jsx(VW,{})}),m&&o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:o.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:f.map(g=>o.jsx(on,{to:g.to,className:A,children:g.label},g.key))})})]})}const KJ=6048e5,Dve=864e5,a7=Symbol.for("constructDateFrom");function Sd(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&a7 in t?t[a7](e):t instanceof Date?new t.constructor(e):new Date(e)}function $l(t,e){return Sd(e||t,t)}function Rve(t,e,r){const n=$l(t,r==null?void 0:r.in);return isNaN(e)?Sd(t,NaN):(n.setDate(n.getDate()+e),n)}function Mve(t,e,r){const n=$l(t,r==null?void 0:r.in);if(isNaN(e))return Sd(t,NaN);const a=n.getDate(),s=Sd(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Lve={};function YI(){return Lve}function L2(t,e){var l,c,u,d;const r=YI(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=$l(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function SE(t,e){return L2(t,{...e,weekStartsOn:1})}function GJ(t,e){const r=$l(t,e==null?void 0:e.in),n=r.getFullYear(),a=Sd(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=SE(a),i=Sd(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=SE(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function s7(t){const e=$l(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Uve(t,...e){const r=Sd.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function i7(t,e){const r=$l(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Qve(t,e,r){const[n,a]=Uve(r==null?void 0:r.in,t,e),s=i7(n),i=i7(a),l=+s-s7(s),c=+i-s7(i);return Math.round((l-c)/Dve)}function Vve(t,e){const r=GJ(t,e),n=Sd(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),SE(n)}function Hve(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $ve(t){return!(!Hve(t)&&typeof t!="number"||isNaN(+$l(t)))}function Td(t,e){const r=$l(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function kd(t,e){const r=$l(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Kve(t,e){const r=$l(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Gve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qve=(t,e,r)=>{let n;const a=Gve[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function T5(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const zve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yve={date:T5({formats:zve,defaultWidth:"full"}),time:T5({formats:Wve,defaultWidth:"full"}),dateTime:T5({formats:Xve,defaultWidth:"full"})},Jve={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zve=(t,e,r,n)=>Jve[t];function _1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const e1e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t1e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},r1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},a1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},s1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},i1e=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},o1e={ordinalNumber:i1e,era:_1({values:e1e,defaultWidth:"wide"}),quarter:_1({values:t1e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_1({values:r1e,defaultWidth:"wide"}),day:_1({values:n1e,defaultWidth:"wide"}),dayPeriod:_1({values:a1e,defaultWidth:"wide",formattingValues:s1e,defaultFormattingWidth:"wide"})};function E1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?c1e(l,f=>f.test(i)):l1e(l,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function l1e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function c1e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function u1e(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(a.length);return{value:i,rest:l}}}const d1e=/^(\d+)(th|st|nd|rd)?/i,f1e=/\d+/i,A1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},h1e={any:[/^b/i,/^(a|c)/i]},m1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},p1e={any:[/1/i,/2/i,/3/i,/4/i]},g1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},x1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},y1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},w1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},N1e={ordinalNumber:u1e({matchPattern:d1e,parsePattern:f1e,valueCallback:t=>parseInt(t,10)}),era:E1({matchPatterns:A1e,defaultMatchWidth:"wide",parsePatterns:h1e,defaultParseWidth:"any"}),quarter:E1({matchPatterns:m1e,defaultMatchWidth:"wide",parsePatterns:p1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:E1({matchPatterns:g1e,defaultMatchWidth:"wide",parsePatterns:x1e,defaultParseWidth:"any"}),day:E1({matchPatterns:v1e,defaultMatchWidth:"wide",parsePatterns:y1e,defaultParseWidth:"any"}),dayPeriod:E1({matchPatterns:b1e,defaultMatchWidth:"any",parsePatterns:w1e,defaultParseWidth:"any"})},C1e={code:"en-US",formatDistance:qve,formatLong:Yve,formatRelative:Zve,localize:o1e,match:N1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _1e(t,e){const r=$l(t,e==null?void 0:e.in);return Qve(r,Kve(r))+1}function E1e(t,e){const r=$l(t,e==null?void 0:e.in),n=+SE(r)-+Vve(r);return Math.round(n/KJ)+1}function qJ(t,e){var d,f,h,A;const r=$l(t,e==null?void 0:e.in),n=r.getFullYear(),a=YI(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((A=(h=a.locale)==null?void 0:h.options)==null?void 0:A.firstWeekContainsDate)??1,i=Sd((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const l=L2(i,e),c=Sd((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=L2(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function S1e(t,e){var l,c,u,d;const r=YI(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=qJ(t,e),s=Sd((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),L2(s,e)}function I1e(t,e){const r=$l(t,e==null?void 0:e.in),n=+L2(r,e)-+S1e(r,e);return Math.round(n/KJ)+1}function ma(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const vh={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return ma(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ma(r+1,2)},d(t,e){return ma(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ma(t.getHours()%12||12,e.length)},H(t,e){return ma(t.getHours(),e.length)},m(t,e){return ma(t.getMinutes(),e.length)},s(t,e){return ma(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ma(a,e.length)}},xg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},o7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return vh.y(t,e)},Y:function(t,e,r,n){const a=qJ(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return ma(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):ma(s,e.length)},R:function(t,e){const r=GJ(t);return ma(r,e.length)},u:function(t,e){const r=t.getFullYear();return ma(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return ma(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return ma(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return vh.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return ma(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=I1e(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):ma(a,e.length)},I:function(t,e,r){const n=E1e(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):ma(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):vh.d(t,e)},D:function(t,e,r){const n=_1e(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ma(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ma(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ma(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return ma(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=xg.noon:n===0?a=xg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=xg.evening:n>=12?a=xg.afternoon:n>=4?a=xg.morning:a=xg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return vh.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):vh.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ma(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):ma(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):vh.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):vh.s(t,e)},S:function(t,e){return vh.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return c7(n);case"XXXX":case"XX":return bm(n);case"XXXXX":case"XXX":default:return bm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return c7(n);case"xxxx":case"xx":return bm(n);case"xxxxx":case"xxx":default:return bm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l7(n,":");case"OOOO":default:return"GMT"+bm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l7(n,":");case"zzzz":default:return"GMT"+bm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return ma(n,e.length)},T:function(t,e,r){return ma(+t,e.length)}};function l7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+ma(s,2)}function c7(t,e){return t%60===0?(t>0?"-":"+")+ma(Math.abs(t)/60,2):bm(t,e)}function bm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=ma(Math.trunc(n/60),2),s=ma(n%60,2);return r+a+e+s}const u7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},B1e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return u7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",u7(n,e)).replace("{{time}}",zJ(a,e))},P1e={p:zJ,P:B1e},j1e=/^D+$/,T1e=/^Y+$/,k1e=["D","DD","YY","YYYY"];function F1e(t){return j1e.test(t)}function O1e(t){return T1e.test(t)}function D1e(t,e,r){const n=R1e(t,e,r);if(console.warn(n),k1e.includes(t))throw new RangeError(n)}function R1e(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L1e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,U1e=/^'([^]*?)'?$/,Q1e=/''/g,V1e=/[a-zA-Z]/;function wr(t,e,r){var d,f,h,A;const n=YI(),a=n.locale??C1e,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((A=(h=n.locale)==null?void 0:h.options)==null?void 0:A.weekStartsOn)??0,l=$l(t,r==null?void 0:r.in);if(!$ve(l))throw new RangeError("Invalid time value");let c=e.match(L1e).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=P1e[p];return g(m,a.formatLong)}return m}).join("").match(M1e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:H1e(m)};if(o7[p])return{isToken:!0,value:m};if(p.match(V1e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(O1e(p)||F1e(p))&&D1e(p,e,String(t));const g=o7[p[0]];return g(l,p,a.localize,u)}).join("")}function H1e(t){const e=t.match(U1e);return e?e[1].replace(Q1e,"'"):t}function WJ(t,e,r){return Rve(t,-14,r)}function $1e(t,e,r){return Mve(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aT=function(t,e){return aT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},aT(t,e)};function Fd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");aT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var sT=function(){return sT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},sT.apply(this,arguments)};function Il(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function nl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function bN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var EA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),JI=function(t,e){return EA.fromClientRect(t,e.getBoundingClientRect())},K1e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new EA(0,0,n,a)},ZI=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Xs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},d7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wN=0;wN<d7.length;wN++)G1e[d7.charCodeAt(wN)]=wN;var f7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var NN=0;NN<f7.length;NN++)iy[f7.charCodeAt(NN)]=NN;var q1e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=iy[t.charCodeAt(n)],i=iy[t.charCodeAt(n+1)],l=iy[t.charCodeAt(n+2)],c=iy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},z1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},W1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},qm=5,A6=11,k5=2,X1e=A6-qm,XJ=65536>>qm,Y1e=1<<qm,F5=Y1e-1,J1e=1024>>qm,Z1e=XJ+J1e,eye=Z1e,tye=32,rye=eye+tye,nye=65536>>A6,aye=1<<X1e,sye=aye-1,A7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},iye=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},oye=function(t,e){var r=q1e(t),n=Array.isArray(r)?W1e(r):new Uint32Array(r),a=Array.isArray(r)?z1e(r):new Uint16Array(r),s=24,i=A7(a,s/2,n[4]/2),l=n[5]===2?A7(a,(s+n[4])/2):iye(n,Math.ceil((s+n[4])/4));return new lye(n[0],n[1],n[2],n[3],i,l)},lye=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>qm],r=(r<<k5)+(e&F5),this.data[r];if(e<=65535)return r=this.index[XJ+(e-55296>>qm)],r=(r<<k5)+(e&F5),this.data[r];if(e<this.highStart)return r=rye-nye+(e>>A6),r=this.index[r],r+=e>>qm&sye,r=this.index[r],r=(r<<k5)+(e&F5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),h7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var CN=0;CN<h7.length;CN++)cye[h7.charCodeAt(CN)]=CN;var uye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",m7=50,dye=1,YJ=2,JJ=3,fye=4,Aye=5,p7=7,ZJ=8,g7=9,Xh=10,iT=11,x7=12,oT=13,hye=14,oy=15,lT=16,_N=17,S1=18,mye=19,v7=20,cT=21,I1=22,O5=23,vg=24,Bc=25,ly=26,cy=27,yg=28,pye=29,jm=30,gye=31,EN=32,SN=33,uT=34,dT=35,fT=36,U2=37,AT=38,b_=39,w_=40,D5=41,eZ=42,xye=43,vye=[9001,65288],tZ="!",jn="",IN="",hT=oye(uye),Df=[jm,fT],mT=[dye,YJ,JJ,Aye],rZ=[Xh,ZJ],y7=[cy,ly],yye=mT.concat(rZ),b7=[AT,b_,w_,uT,dT],bye=[oy,oT],wye=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var l=hT.get(s);if(l>m7?(a.push(!0),l-=m7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(lT);if(l===fye||l===iT){if(i===0)return n.push(i),r.push(jm);var c=r[i-1];return yye.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(jm))}if(n.push(i),l===gye)return r.push(e==="strict"?cT:U2);if(l===eZ||l===pye)return r.push(jm);if(l===xye)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(U2):r.push(jm);r.push(l)}),[n,r,a]},R5=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==Xh)break}if(a===Xh)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==Xh)break}if(l!==Xh)break}return!1},w7=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Xh)r--;else return n}return 0},Nye=function(t,e,r,n,a){if(r[n]===0)return jn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return jn;var i=s-1,l=s+1,c=e[s],u=i>=0?e[i]:0,d=e[l];if(c===YJ&&d===JJ)return jn;if(mT.indexOf(c)!==-1)return tZ;if(mT.indexOf(d)!==-1||rZ.indexOf(d)!==-1)return jn;if(w7(s,e)===ZJ)return IN;if(hT.get(t[s])===iT||(c===EN||c===SN)&&hT.get(t[l])===iT||c===p7||d===p7||c===g7||[Xh,oT,oy].indexOf(c)===-1&&d===g7||[_N,S1,mye,vg,yg].indexOf(d)!==-1||w7(s,e)===I1||R5(O5,I1,s,e)||R5([_N,S1],cT,s,e)||R5(x7,x7,s,e))return jn;if(c===Xh)return IN;if(c===O5||d===O5)return jn;if(d===lT||c===lT)return IN;if([oT,oy,cT].indexOf(d)!==-1||c===hye||u===fT&&bye.indexOf(c)!==-1||c===yg&&d===fT||d===v7||Df.indexOf(d)!==-1&&c===Bc||Df.indexOf(c)!==-1&&d===Bc||c===cy&&[U2,EN,SN].indexOf(d)!==-1||[U2,EN,SN].indexOf(c)!==-1&&d===ly||Df.indexOf(c)!==-1&&y7.indexOf(d)!==-1||y7.indexOf(c)!==-1&&Df.indexOf(d)!==-1||[cy,ly].indexOf(c)!==-1&&(d===Bc||[I1,oy].indexOf(d)!==-1&&e[l+1]===Bc)||[I1,oy].indexOf(c)!==-1&&d===Bc||c===Bc&&[Bc,yg,vg].indexOf(d)!==-1)return jn;if([Bc,yg,vg,_N,S1].indexOf(d)!==-1)for(var f=s;f>=0;){var h=e[f];if(h===Bc)return jn;if([yg,vg].indexOf(h)!==-1)f--;else break}if([cy,ly].indexOf(d)!==-1)for(var f=[_N,S1].indexOf(c)!==-1?i:s;f>=0;){var h=e[f];if(h===Bc)return jn;if([yg,vg].indexOf(h)!==-1)f--;else break}if(AT===c&&[AT,b_,uT,dT].indexOf(d)!==-1||[b_,uT].indexOf(c)!==-1&&[b_,w_].indexOf(d)!==-1||[w_,dT].indexOf(c)!==-1&&d===w_||b7.indexOf(c)!==-1&&[v7,ly].indexOf(d)!==-1||b7.indexOf(d)!==-1&&c===cy||Df.indexOf(c)!==-1&&Df.indexOf(d)!==-1||c===vg&&Df.indexOf(d)!==-1||Df.concat(Bc).indexOf(c)!==-1&&d===I1&&vye.indexOf(t[l])===-1||Df.concat(Bc).indexOf(d)!==-1&&c===S1)return jn;if(c===D5&&d===D5){for(var A=r[s],m=1;A>0&&(A--,e[A]===D5);)m++;if(m%2!==0)return jn}return c===EN&&d===SN?jn:IN},Cye=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=wye(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Bc,jm,eZ].indexOf(l)!==-1?U2:l}));var i=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},_ye=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===tZ,this.start=n,this.end=a}return t.prototype.slice=function(){return Xs.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Eye=function(t,e){var r=ZI(t),n=Cye(r,e),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=jn;u<l&&(d=Nye(r,s,a,++u,i))===jn;);if(d!==jn||u===l){var f=new _ye(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Sye=1,Iye=2,Wb=4,N7=8,IE=10,C7=47,My=92,Bye=9,Pye=32,BN=34,B1=61,jye=35,Tye=36,kye=37,PN=39,jN=40,P1=41,Fye=95,tc=45,Oye=33,Dye=60,Rye=62,Mye=64,Lye=91,Uye=93,Qye=61,Vye=123,TN=63,Hye=125,_7=124,$ye=126,Kye=128,E7=65533,M5=42,Rm=43,Gye=44,qye=58,zye=59,Q2=46,Wye=0,Xye=8,Yye=11,Jye=14,Zye=31,e2e=127,Gd=-1,nZ=48,aZ=97,sZ=101,t2e=102,r2e=117,n2e=122,iZ=65,oZ=69,lZ=70,a2e=85,s2e=90,il=function(t){return t>=nZ&&t<=57},i2e=function(t){return t>=55296&&t<=57343},bg=function(t){return il(t)||t>=iZ&&t<=lZ||t>=aZ&&t<=t2e},o2e=function(t){return t>=aZ&&t<=n2e},l2e=function(t){return t>=iZ&&t<=s2e},c2e=function(t){return o2e(t)||l2e(t)},u2e=function(t){return t>=Kye},kN=function(t){return t===IE||t===Bye||t===Pye},BE=function(t){return c2e(t)||u2e(t)||t===Fye},S7=function(t){return BE(t)||il(t)||t===tc},d2e=function(t){return t>=Wye&&t<=Xye||t===Yye||t>=Jye&&t<=Zye||t===e2e},kh=function(t,e){return t!==My?!1:e!==IE},FN=function(t,e,r){return t===tc?BE(e)||kh(e,r):BE(t)?!0:!!(t===My&&kh(t,e))},L5=function(t,e,r){return t===Rm||t===tc?il(e)?!0:e===Q2&&il(r):il(t===Q2?e:t)},f2e=function(t){var e=0,r=1;(t[e]===Rm||t[e]===tc)&&(t[e]===tc&&(r=-1),e++);for(var n=[];il(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Xs.apply(void 0,n),10):0;t[e]===Q2&&e++;for(var s=[];il(t[e]);)s.push(t[e++]);var i=s.length,l=i?parseInt(Xs.apply(void 0,s),10):0;(t[e]===oZ||t[e]===sZ)&&e++;var c=1;(t[e]===Rm||t[e]===tc)&&(t[e]===tc&&(c=-1),e++);for(var u=[];il(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Xs.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},A2e={type:2},h2e={type:3},m2e={type:4},p2e={type:13},g2e={type:8},x2e={type:21},v2e={type:9},y2e={type:10},b2e={type:11},w2e={type:12},N2e={type:14},ON={type:23},C2e={type:1},_2e={type:25},E2e={type:24},S2e={type:26},I2e={type:27},B2e={type:28},P2e={type:29},j2e={type:31},pT={type:32},cZ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(ZI(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==pT;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case BN:return this.consumeStringToken(BN);case jye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(S7(r)||kh(n,a)){var s=FN(r,n,a)?Iye:Sye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Tye:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),p2e;break;case PN:return this.consumeStringToken(PN);case jN:return A2e;case P1:return h2e;case M5:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),N2e;break;case Rm:if(L5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Gye:return m2e;case tc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(L5(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(FN(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===tc&&u===Rye)return this.consumeCodePoint(),this.consumeCodePoint(),E2e;break;case Q2:if(L5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case C7:if(this.peekCodePoint(0)===M5)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===M5&&(d=this.consumeCodePoint(),d===C7))return this.consumeToken();if(d===Gd)return this.consumeToken()}break;case qye:return S2e;case zye:return I2e;case Dye:if(this.peekCodePoint(0)===Oye&&this.peekCodePoint(1)===tc&&this.peekCodePoint(2)===tc)return this.consumeCodePoint(),this.consumeCodePoint(),_2e;break;case Mye:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),A=this.peekCodePoint(2);if(FN(f,h,A)){var i=this.consumeName();return{type:7,value:i}}break;case Lye:return B2e;case My:if(kh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Uye:return P2e;case Qye:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),g2e;break;case Vye:return b2e;case Hye:return w2e;case r2e:case a2e:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Rm&&(bg(p)||p===TN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _7:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),v2e;if(this.peekCodePoint(0)===_7)return this.consumeCodePoint(),x2e;break;case $ye:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),y2e;break;case Gd:return pT}return kN(e)?(this.consumeWhiteSpace(),j2e):il(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):BE(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Xs(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();bg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===TN&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Xs.apply(void 0,e.map(function(c){return c===TN?nZ:c})),16),s=parseInt(Xs.apply(void 0,e.map(function(c){return c===TN?lZ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Xs.apply(void 0,e),16);if(this.peekCodePoint(0)===tc&&bg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];bg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Xs.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===jN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===jN?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gd)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===PN||r===BN){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Gd||this.peekCodePoint(0)===P1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ON)}for(;;){var a=this.consumeCodePoint();if(a===Gd||a===P1)return{type:22,value:Xs.apply(void 0,e)};if(kN(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Gd||this.peekCodePoint(0)===P1?(this.consumeCodePoint(),{type:22,value:Xs.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ON);if(a===BN||a===PN||a===jN||d2e(a))return this.consumeBadUrlRemnants(),ON;if(a===My)if(kh(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ON;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;kN(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===P1||e===Gd)return;kh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Xs.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===Gd||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===IE)return this._value.splice(0,n),C2e;if(a===My){var s=this._value[n+1];s!==Gd&&s!==void 0&&(s===IE?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):kh(a,s)&&(r+=this.consumeStringSlice(n),r+=Xs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Wb,n=this.peekCodePoint(0);for((n===Rm||n===tc)&&e.push(this.consumeCodePoint());il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Q2&&il(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=N7;il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===oZ||n===sZ)&&((a===Rm||a===tc)&&il(s)||il(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=N7;il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[f2e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(FN(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===kye?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(bg(e)){for(var r=Xs(e);bg(this.peekCodePoint(0))&&r.length<6;)r+=Xs(this.consumeCodePoint());kN(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||i2e(n)||n>1114111?E7:n}return e===Gd?E7:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(S7(r))e+=Xs(r);else if(kh(r,this.peekCodePoint(0)))e+=Xs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),uZ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new cZ;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||k2e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?pT:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Xb=function(t){return t.type===15},Bv=function(t){return t.type===17},Ea=function(t){return t.type===20},T2e=function(t){return t.type===0},gT=function(t,e){return Ea(t)&&t.value===e},dZ=function(t){return t.type!==31},ev=function(t){return t.type!==31&&t.type!==4},wf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},k2e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},P0=function(t){return t.type===17||t.type===15},di=function(t){return t.type===16||P0(t)},fZ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Ro={type:17,number:0,flags:Wb},h6={type:16,number:50,flags:Wb},Yh={type:16,number:100,flags:Wb},uy=function(t,e,r){var n=t[0],a=t[1];return[La(n,e),La(typeof a<"u"?a:n,r)]},La=function(t,e){if(t.type===16)return t.number/100*e;if(Xb(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},AZ="deg",hZ="grad",mZ="rad",pZ="turn",e4={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case AZ:return Math.PI*e.number/180;case hZ:return Math.PI/200*e.number;case mZ:return e.number;case pZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},gZ=function(t){return t.type===15&&(t.unit===AZ||t.unit===hZ||t.unit===mZ||t.unit===pZ)},xZ=function(t){var e=t.filter(Ea).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ro,Ro];case"to top":case"bottom":return Su(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ro,Yh];case"to right":case"left":return Su(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yh,Yh];case"to bottom":case"top":return Su(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yh,Ro];case"to left":case"right":return Su(270)}return 0},Su=function(t){return Math.PI*t/180},m0={name:"color",parse:function(t,e){if(e.type===18){var r=F2e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Jh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Jh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Jh(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Jh(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var l=fA[e.value.toUpperCase()];if(typeof l<"u")return l}return fA.TRANSPARENT}},p0=function(t){return(255&t)===0},Xi=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Jh=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},I7=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},B7=function(t,e){var r=e.filter(ev);if(r.length===3){var n=r.map(I7),a=n[0],s=n[1],i=n[2];return Jh(a,s,i,1)}if(r.length===4){var l=r.map(I7),a=l[0],s=l[1],i=l[2],c=l[3];return Jh(a,s,i,c)}return 0};function U5(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var P7=function(t,e){var r=e.filter(ev),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Su(n.number):e4.parse(t,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?La(i,1):1;if(c===0)return Jh(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,A=U5(h,f,l+1/3),m=U5(h,f,l),p=U5(h,f,l-1/3);return Jh(A*255,m*255,p*255,d)},F2e={hsl:P7,hsla:P7,rgb:B7,rgba:B7},Ly=function(t,e){return m0.parse(t,uZ.create(e).parseComponentValue())},fA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},O2e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},D2e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},t4=function(t,e){var r=m0.parse(t,e[0]),n=e[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},j7=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Ro),n.stop===null&&(n.stop=Yh);for(var a=[],s=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var c=La(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],A=(d-h)/(f+1),m=1;m<=f;m++)a[u+m-1]=A*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},R2e=function(t,e,r){var n=e/2,a=r/2,s=La(t[0],e)-n,i=a-La(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},M2e=function(t,e,r){var n=typeof t=="number"?t:R2e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},sd=function(t,e){return Math.sqrt(t*t+e*e)},T7=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=sd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},L2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(sd(e,r),sd(e,r-a),sd(e-n,r),sd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=T7(n,a,e,r,!0),u=c[0],d=c[1];s=sd(u-e,(d-r)/l),i=l*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(sd(e,r),sd(e,r-a),sd(e-n,r),sd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=T7(n,a,e,r,!1),u=f[0],d=f[1];s=sd(u-e,(d-r)/l),i=l*s}break}return Array.isArray(t.size)&&(s=La(t.size[0],n),i=t.size.length===2?La(t.size[1],a):s),[s,i]},U2e=function(t,e){var r=Su(180),n=[];return wf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=xZ(a);return}else if(gZ(i)){r=e4.parse(t,i);return}}var l=t4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},DN=function(t,e){var r=Su(180),n=[];return wf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=xZ(a);return}else if(gZ(i)){r=(e4.parse(t,i)+Su(270))%Su(360);return}}var l=t4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},Q2e=function(t,e){var r=Su(180),n=[],a=1,s=0,i=3,l=[];return wf(e).forEach(function(c,u){var d=c[0];if(u===0){if(Ea(d)&&d.value==="linear"){a=1;return}else if(Ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=m0.parse(t,d.values[0]);n.push({stop:Ro,color:f})}else if(d.name==="to"){var f=m0.parse(t,d.values[0]);n.push({stop:Yh,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(ev);if(h.length===2){var f=m0.parse(t,h[1]),A=h[0];Bv(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:f})}}}}),a===1?{angle:(r+Su(180))%Su(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},vZ="closest-side",yZ="farthest-side",bZ="closest-corner",wZ="farthest-corner",NZ="circle",CZ="ellipse",_Z="cover",EZ="contain",V2e=function(t,e){var r=0,n=3,a=[],s=[];return wf(e).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(f,h){if(u)if(Ea(h))switch(h.value){case"center":return s.push(h6),f;case"top":case"left":return s.push(Ro),f;case"right":case"bottom":return s.push(Yh),f}else(di(h)||P0(h))&&s.push(h);else if(Ea(h))switch(h.value){case NZ:return r=0,!1;case CZ:return r=1,!1;case"at":return u=!0,!1;case vZ:return n=0,!1;case _Z:case yZ:return n=1,!1;case EZ:case bZ:return n=2,!1;case wZ:return n=3,!1}else if(P0(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=t4(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},RN=function(t,e){var r=0,n=3,a=[],s=[];return wf(e).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,f){if(Ea(f))switch(f.value){case"center":return s.push(h6),!1;case"top":case"left":return s.push(Ro),!1;case"right":case"bottom":return s.push(Yh),!1}else if(di(f)||P0(f))return s.push(f),!1;return d},c):l===1&&(c=i.reduce(function(d,f){if(Ea(f))switch(f.value){case NZ:return r=0,!1;case CZ:return r=1,!1;case EZ:case vZ:return n=0,!1;case yZ:return n=1,!1;case bZ:return n=2,!1;case _Z:case wZ:return n=3,!1}else if(P0(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=t4(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},H2e=function(t){return t.type===1},$2e=function(t){return t.type===2},m6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=SZ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function K2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!SZ[t.name])}var SZ={"linear-gradient":U2e,"-moz-linear-gradient":DN,"-ms-linear-gradient":DN,"-o-linear-gradient":DN,"-webkit-linear-gradient":DN,"radial-gradient":V2e,"-moz-radial-gradient":RN,"-ms-radial-gradient":RN,"-o-radial-gradient":RN,"-webkit-radial-gradient":RN,"-webkit-gradient":Q2e},G2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return ev(n)&&K2e(n)}).map(function(n){return m6.parse(t,n)})}},q2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},z2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return wf(e).map(function(r){return r.filter(di)}).map(fZ)}},W2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return wf(e).map(function(r){return r.filter(Ea).map(function(n){return n.value}).join(" ")}).map(X2e)}},X2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Px;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Px||(Px={}));var Y2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return wf(e).map(function(r){return r.filter(J2e)})}},J2e=function(t){return Ea(t)||di(t)},r4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Z2e=r4("top"),ebe=r4("right"),tbe=r4("bottom"),rbe=r4("left"),n4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return fZ(r.filter(di))}}},nbe=n4("top-left"),abe=n4("top-right"),sbe=n4("bottom-right"),ibe=n4("bottom-left"),a4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},obe=a4("top"),lbe=a4("right"),cbe=a4("bottom"),ube=a4("left"),s4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Xb(r)?r.number:0}}},dbe=s4("top"),fbe=s4("right"),Abe=s4("bottom"),hbe=s4("left"),mbe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pbe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},gbe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).reduce(function(r,n){return r|xbe(n.value)},0)}},xbe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},vbe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ybe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},PE;(function(t){t.NORMAL="normal",t.STRICT="strict"})(PE||(PE={}));var bbe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return PE.STRICT;case"normal":default:return PE.NORMAL}}},wbe={name:"line-height",initialValue:"normal",prefix:!1,type:4},k7=function(t,e){return Ea(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:di(t)?La(t,e):e},Nbe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:m6.parse(t,e)}},Cbe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},xT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},i4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},_be=i4("top"),Ebe=i4("right"),Sbe=i4("bottom"),Ibe=i4("left"),Bbe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Pbe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},o4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jbe=o4("top"),Tbe=o4("right"),kbe=o4("bottom"),Fbe=o4("left"),Obe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Dbe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Rbe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&gT(e[0],"none")?[]:wf(e).map(function(r){for(var n={color:fA.TRANSPARENT,offsetX:Ro,offsetY:Ro,blur:Ro},a=0,s=0;s<r.length;s++){var i=r[s];P0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=m0.parse(t,i)}return n})}},Mbe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Lbe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Vbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Ube=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Qbe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,l]:null},Vbe={matrix:Ube,matrix3d:Qbe},F7={type:16,number:50,flags:Wb},Hbe=[F7,F7],$be={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(di);return r.length!==2?Hbe:[r[0],r[1]]}},Kbe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Uy;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Uy||(Uy={}));var Gbe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Uy.BREAK_ALL;case"keep-all":return Uy.KEEP_ALL;case"normal":default:return Uy.NORMAL}}},qbe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Bv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},IZ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},zbe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Bv(e)?e.number:1}},Wbe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xbe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Ybe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Jbe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Zbe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Bv(e))return e.number;if(Ea(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},ewe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ea).map(function(r){return r.value})}},twe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ji=function(t,e){return(t&e)!==0},rwe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},nwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(dZ),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&Bv(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},awe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(dZ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ea(s)&&s.value!=="none"){var l=i&&Bv(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},swe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Xb).map(function(r){return IZ.parse(t,r)})}},iwe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(T2e);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},O7=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},owe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&gT(e[0],"none")?[]:wf(e).map(function(r){for(var n={color:255,offsetX:Ro,offsetY:Ro,blur:Ro,spread:Ro,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];gT(i,"inset")?n.inset=!0:P0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=m0.parse(t,i)}return n})}},lwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},cwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},uwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Xb(e)?e.number:0}},dwe=function(){function t(e,r){var n,a;this.animationDuration=Sr(e,swe,r.animationDuration),this.backgroundClip=Sr(e,O2e,r.backgroundClip),this.backgroundColor=Sr(e,D2e,r.backgroundColor),this.backgroundImage=Sr(e,G2e,r.backgroundImage),this.backgroundOrigin=Sr(e,q2e,r.backgroundOrigin),this.backgroundPosition=Sr(e,z2e,r.backgroundPosition),this.backgroundRepeat=Sr(e,W2e,r.backgroundRepeat),this.backgroundSize=Sr(e,Y2e,r.backgroundSize),this.borderTopColor=Sr(e,Z2e,r.borderTopColor),this.borderRightColor=Sr(e,ebe,r.borderRightColor),this.borderBottomColor=Sr(e,tbe,r.borderBottomColor),this.borderLeftColor=Sr(e,rbe,r.borderLeftColor),this.borderTopLeftRadius=Sr(e,nbe,r.borderTopLeftRadius),this.borderTopRightRadius=Sr(e,abe,r.borderTopRightRadius),this.borderBottomRightRadius=Sr(e,sbe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Sr(e,ibe,r.borderBottomLeftRadius),this.borderTopStyle=Sr(e,obe,r.borderTopStyle),this.borderRightStyle=Sr(e,lbe,r.borderRightStyle),this.borderBottomStyle=Sr(e,cbe,r.borderBottomStyle),this.borderLeftStyle=Sr(e,ube,r.borderLeftStyle),this.borderTopWidth=Sr(e,dbe,r.borderTopWidth),this.borderRightWidth=Sr(e,fbe,r.borderRightWidth),this.borderBottomWidth=Sr(e,Abe,r.borderBottomWidth),this.borderLeftWidth=Sr(e,hbe,r.borderLeftWidth),this.boxShadow=Sr(e,owe,r.boxShadow),this.color=Sr(e,mbe,r.color),this.direction=Sr(e,pbe,r.direction),this.display=Sr(e,gbe,r.display),this.float=Sr(e,vbe,r.cssFloat),this.fontFamily=Sr(e,Ybe,r.fontFamily),this.fontSize=Sr(e,Jbe,r.fontSize),this.fontStyle=Sr(e,twe,r.fontStyle),this.fontVariant=Sr(e,ewe,r.fontVariant),this.fontWeight=Sr(e,Zbe,r.fontWeight),this.letterSpacing=Sr(e,ybe,r.letterSpacing),this.lineBreak=Sr(e,bbe,r.lineBreak),this.lineHeight=Sr(e,wbe,r.lineHeight),this.listStyleImage=Sr(e,Nbe,r.listStyleImage),this.listStylePosition=Sr(e,Cbe,r.listStylePosition),this.listStyleType=Sr(e,xT,r.listStyleType),this.marginTop=Sr(e,_be,r.marginTop),this.marginRight=Sr(e,Ebe,r.marginRight),this.marginBottom=Sr(e,Sbe,r.marginBottom),this.marginLeft=Sr(e,Ibe,r.marginLeft),this.opacity=Sr(e,zbe,r.opacity);var s=Sr(e,Bbe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Sr(e,Pbe,r.overflowWrap),this.paddingTop=Sr(e,jbe,r.paddingTop),this.paddingRight=Sr(e,Tbe,r.paddingRight),this.paddingBottom=Sr(e,kbe,r.paddingBottom),this.paddingLeft=Sr(e,Fbe,r.paddingLeft),this.paintOrder=Sr(e,lwe,r.paintOrder),this.position=Sr(e,Dbe,r.position),this.textAlign=Sr(e,Obe,r.textAlign),this.textDecorationColor=Sr(e,Wbe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Sr(e,Xbe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Sr(e,Rbe,r.textShadow),this.textTransform=Sr(e,Mbe,r.textTransform),this.transform=Sr(e,Lbe,r.transform),this.transformOrigin=Sr(e,$be,r.transformOrigin),this.visibility=Sr(e,Kbe,r.visibility),this.webkitTextStrokeColor=Sr(e,cwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Sr(e,uwe,r.webkitTextStrokeWidth),this.wordBreak=Sr(e,Gbe,r.wordBreak),this.zIndex=Sr(e,qbe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return p0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return ji(this.display,4)||ji(this.display,33554432)||ji(this.display,268435456)||ji(this.display,536870912)||ji(this.display,67108864)||ji(this.display,134217728)},t}(),fwe=function(){function t(e,r){this.content=Sr(e,rwe,r.content),this.quotes=Sr(e,iwe,r.quotes)}return t}(),D7=function(){function t(e,r){this.counterIncrement=Sr(e,nwe,r.counterIncrement),this.counterReset=Sr(e,awe,r.counterReset)}return t}(),Sr=function(t,e,r){var n=new cZ,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new uZ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Ea(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return e4.parse(t,s.parseComponentValue());case"color":return m0.parse(t,s.parseComponentValue());case"image":return m6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return P0(l)?l:Ro;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:Ro;case"time":return IZ.parse(t,s.parseComponentValue())}break}},Awe="data-html2canvas-debug",hwe=function(t){var e=t.getAttribute(Awe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},vT=function(t,e){var r=hwe(t);return r===1||e===r},Nf=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,vT(r,3))debugger;this.styles=new dwe(e,window.getComputedStyle(r,null)),wT(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=JI(this.context,r),vT(r,4)&&(this.flags|=16)}return t}(),mwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",R7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var MN=0;MN<R7.length;MN++)dy[R7.charCodeAt(MN)]=MN;var pwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=dy[t.charCodeAt(n)],i=dy[t.charCodeAt(n+1)],l=dy[t.charCodeAt(n+2)],c=dy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},gwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},xwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},zm=5,p6=11,Q5=2,vwe=p6-zm,BZ=65536>>zm,ywe=1<<zm,V5=ywe-1,bwe=1024>>zm,wwe=BZ+bwe,Nwe=wwe,Cwe=32,_we=Nwe+Cwe,Ewe=65536>>p6,Swe=1<<vwe,Iwe=Swe-1,M7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Bwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Pwe=function(t,e){var r=pwe(t),n=Array.isArray(r)?xwe(r):new Uint32Array(r),a=Array.isArray(r)?gwe(r):new Uint16Array(r),s=24,i=M7(a,s/2,n[4]/2),l=n[5]===2?M7(a,(s+n[4])/2):Bwe(n,Math.ceil((s+n[4])/4));return new jwe(n[0],n[1],n[2],n[3],i,l)},jwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>zm],r=(r<<Q5)+(e&V5),this.data[r];if(e<=65535)return r=this.index[BZ+(e-55296>>zm)],r=(r<<Q5)+(e&V5),this.data[r];if(e<this.highStart)return r=_we-Ewe+(e>>p6),r=this.index[r],r+=e>>zm&Iwe,r=this.index[r],r=(r<<Q5)+(e&V5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),L7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Twe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var LN=0;LN<L7.length;LN++)Twe[L7.charCodeAt(LN)]=LN;var kwe=1,H5=2,$5=3,U7=4,Q7=5,Fwe=7,V7=8,K5=9,G5=10,H7=11,$7=12,K7=13,G7=14,q5=15,Owe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Dwe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Rwe=Pwe(mwe),vu="",z5="",Mwe=function(t){return Rwe.get(t)},Lwe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===H5&&i===$5)return vu;if(s===H5||s===$5||s===U7||i===H5||i===$5||i===U7)return z5;if(s===V7&&[V7,K5,H7,$7].indexOf(i)!==-1||(s===H7||s===K5)&&(i===K5||i===G5)||(s===$7||s===G5)&&i===G5||i===K7||i===Q7||i===Fwe||s===kwe)return vu;if(s===K7&&i===G7){for(;a===Q7;)a=e[--n];if(a===G7)return vu}if(s===q5&&i===q5){for(var l=0;a===q5;)l++,a=e[--n];if(l%2===0)return vu}return z5},Uwe=function(t){var e=Owe(t),r=e.length,n=0,a=0,s=e.map(Mwe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=vu;n<r&&(i=Lwe(e,s,++n))===vu;);if(i!==vu||n===r){var l=Dwe.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},Qwe=function(t){for(var e=Uwe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Vwe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},Hwe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=ZI(n.data).map(function(c){return Xs(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return t.body.removeChild(e),l},$we=function(){return typeof new Image().crossOrigin<"u"},Kwe=function(){return typeof new XMLHttpRequest().responseType=="string"},Gwe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},q7=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},qwe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=yT(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),z7(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",q7(c)?z7(yT(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),q7(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},yT=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},z7=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Po={get SUPPORT_RANGE_BOUNDS(){var t=Vwe(document);return Object.defineProperty(Po,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Po.SUPPORT_RANGE_BOUNDS&&Hwe(document);return Object.defineProperty(Po,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Gwe(document);return Object.defineProperty(Po,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?qwe(document):Promise.resolve(!1);return Object.defineProperty(Po,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=$we();return Object.defineProperty(Po,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Kwe();return Object.defineProperty(Po,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Po,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Po,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Qy=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),zwe=function(t,e,r,n){var a=Ywe(e,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Po.SUPPORT_RANGE_BOUNDS){var c=W7(n,i,l.length).getClientRects();if(c.length>1){var u=g6(l),d=0;u.forEach(function(h){s.push(new Qy(h,EA.fromDOMRectList(t,W7(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Qy(l,EA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new Qy(l,Wwe(t,n))),n=f}else Po.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},Wwe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=JI(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return EA.EMPTY},W7=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},g6=function(t){if(Po.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Qwe(t)},Xwe=function(t,e){if(Po.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Zwe(t,e)},Ywe=function(t,e){return e.letterSpacing!==0?g6(t):Xwe(t,e)},Jwe=[32,160,4961,65792,65793,4153,4241],Zwe=function(t,e){for(var r=Eye(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=ZI(i),c="";l.forEach(function(u){Jwe.indexOf(u)===-1?c+=Xs(u):(c.length&&n.push(c),n.push(Xs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},eNe=function(){function t(e,r,n){this.text=tNe(r.data,n.textTransform),this.textBounds=zwe(e,this.text,n,r)}return t}(),tNe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(rNe,nNe);case 2:return t.toUpperCase();default:return t}},rNe=/(^|\s|:|-|\(|\))([a-z])/g,nNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},PZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Nf),jZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Nf),TZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=JI(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Nf),kZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Nf),bT=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Nf),aNe=[{type:15,flags:0,unit:"px",number:3}],sNe=[{type:16,flags:0,number:50}],iNe=function(t){return t.width>t.height?new EA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new EA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},oNe=function(t){var e=t.type===lNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},jE="checkbox",TE="radio",lNe="password",X7=707406591,x6=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=oNe(n),(a.type===jE||a.type===TE)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=iNe(a.bounds)),a.type){case jE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=aNe;break;case TE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=sNe;break}return a}return e}(Nf),FZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Nf),OZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Nf),DZ=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=MZ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Ly(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):fA.TRANSPARENT,i=n.contentWindow.document.body?Ly(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):fA.TRANSPARENT;a.backgroundColor=p0(s)?p0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Nf),cNe=["OL","UL","MENU"],N_=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,LZ(a)&&a.data.trim().length>0)r.textNodes.push(new eNe(t,a,r.styles));else if(fx(a))if(HZ(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return N_(t,l,r,n)});else{var i=RZ(t,a);i.styles.isVisible()&&(uNe(a,i,n)?i.flags|=4:dNe(i.styles)&&(i.flags|=2),cNe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?N_(t,a.shadowRoot,i,n):!kE(a)&&!UZ(a)&&!FE(a)&&N_(t,a,i,n))}},RZ=function(t,e){return NT(e)?new PZ(t,e):QZ(e)?new jZ(t,e):UZ(e)?new TZ(t,e):fNe(e)?new kZ(t,e):ANe(e)?new bT(t,e):hNe(e)?new x6(t,e):FE(e)?new FZ(t,e):kE(e)?new OZ(t,e):VZ(e)?new DZ(t,e):new Nf(t,e)},MZ=function(t,e){var r=RZ(t,e);return r.flags|=4,N_(t,e,r,r),r},uNe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||v6(t)&&r.styles.isTransparent()},dNe=function(t){return t.isPositioned()||t.isFloating()},LZ=function(t){return t.nodeType===Node.TEXT_NODE},fx=function(t){return t.nodeType===Node.ELEMENT_NODE},wT=function(t){return fx(t)&&typeof t.style<"u"&&!C_(t)},C_=function(t){return typeof t.className=="object"},fNe=function(t){return t.tagName==="LI"},ANe=function(t){return t.tagName==="OL"},hNe=function(t){return t.tagName==="INPUT"},mNe=function(t){return t.tagName==="HTML"},UZ=function(t){return t.tagName==="svg"},v6=function(t){return t.tagName==="BODY"},QZ=function(t){return t.tagName==="CANVAS"},Y7=function(t){return t.tagName==="VIDEO"},NT=function(t){return t.tagName==="IMG"},VZ=function(t){return t.tagName==="IFRAME"},J7=function(t){return t.tagName==="STYLE"},pNe=function(t){return t.tagName==="SCRIPT"},kE=function(t){return t.tagName==="TEXTAREA"},FE=function(t){return t.tagName==="SELECT"},HZ=function(t){return t.tagName==="SLOT"},Z7=function(t){return t.tagName.indexOf("-")>0},gNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},t}(),e9={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},t9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},vNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},wg=function(t,e,r,n,a,s){return t<e||t>r?V2(t,a,s.length>0):n.integers.reduce(function(i,l,c){for(;t>=l;)t-=l,i+=n.values[c];return i},"")+s},$Z=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Gs=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+($Z(Math.abs(t),s,n,function(i){return Xs(Math.floor(i%s)+e)})+a)},cm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return $Z(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},qg=1,Bh=2,Ph=4,fy=8,Rf=function(t,e,r,n,a,s){if(t<-9999||t>9999)return V2(t,4,a.length>0);var i=Math.abs(t),l=a;if(i===0)return e[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&ji(s,qg)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ji(s,Bh)||u===1&&c===1&&ji(s,Ph)&&t>100||u===1&&c>1&&ji(s,fy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},r9="",n9="",a9="",W5="",V2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=Gs(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return cm(t,"",a);case 6:return wg(t,1,3999,e9,3,n).toLowerCase();case 7:return wg(t,1,3999,e9,3,n);case 8:return Gs(t,945,969,!1,n);case 9:return Gs(t,97,122,!1,n);case 10:return Gs(t,65,90,!1,n);case 11:return Gs(t,1632,1641,!0,n);case 12:case 49:return wg(t,1,9999,t9,3,n);case 35:return wg(t,1,9999,t9,3,n).toLowerCase();case 13:return Gs(t,2534,2543,!0,n);case 14:case 30:return Gs(t,6112,6121,!0,n);case 15:return cm(t,"",a);case 16:return cm(t,"",a);case 17:case 48:return Rf(t,"",r9,"",a,Bh|Ph|fy);case 47:return Rf(t,"",n9,"",a,qg|Bh|Ph|fy);case 42:return Rf(t,"",r9,"",a,Bh|Ph|fy);case 41:return Rf(t,"",n9,"",a,qg|Bh|Ph|fy);case 26:return Rf(t,"","",a9,a,0);case 25:return Rf(t,"","",a9,a,qg|Bh|Ph);case 31:return Rf(t,"","",W5,s,qg|Bh|Ph);case 33:return Rf(t,"","",W5,s,0);case 32:return Rf(t,"","",W5,s,qg|Bh|Ph);case 18:return Gs(t,2406,2415,!0,n);case 20:return wg(t,1,19999,vNe,3,n);case 21:return Gs(t,2790,2799,!0,n);case 22:return Gs(t,2662,2671,!0,n);case 22:return wg(t,1,10999,xNe,3,n);case 23:return cm(t,"");case 24:return cm(t,"");case 27:return Gs(t,3302,3311,!0,n);case 28:return cm(t,"",a);case 29:return cm(t,"",a);case 34:return Gs(t,3792,3801,!0,n);case 37:return Gs(t,6160,6169,!0,n);case 38:return Gs(t,4160,4169,!0,n);case 39:return Gs(t,2918,2927,!0,n);case 40:return Gs(t,1776,1785,!0,n);case 43:return Gs(t,3046,3055,!0,n);case 44:return Gs(t,3174,3183,!0,n);case 45:return Gs(t,3664,3673,!0,n);case 46:return Gs(t,3872,3881,!0,n);case 3:default:return Gs(t,48,57,!0,n)}},KZ="data-html2canvas-ignore",s9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new gNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=yNe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=NNe(a).then(function(){return Il(n,void 0,void 0,function(){var d,f;return nl(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(SNe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wNe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(_Ne(document.doctype)+"<html></html>"),ENe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(vT(e,2))debugger;if(QZ(e))return this.createCanvasClone(e);if(Y7(e))return this.createVideoClone(e);if(J7(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return NT(r)&&(NT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Z7(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return X5(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!fx(r)||!pNe(r)&&!r.hasAttribute(KZ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!fx(r)||!J7(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(fx(s)&&HZ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(LZ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&fx(e)&&(wT(e)||C_(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&wT(a)&&(this.clonedReferenceElement=a),v6(a)&&PNe(a);var c=this.counters.parse(new D7(this.context,s)),u=this.resolvePseudoContent(e,a,i,Vy.BEFORE);Z7(e)&&(r=!0),Y7(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,Vy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||C_(e))&&!VZ(e)||r)&&X5(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(kE(e)||FE(e))&&(kE(a)||FE(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new D7(this.context,n));var c=new fwe(this.context,n),u=l.createElement("html2canvaspseudoelement");X5(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var A=f.values.filter(Ea);A.length&&u.appendChild(l.createTextNode(e.getAttribute(A[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(ev),p=m[0],g=m[1];if(p&&Ea(p)){var x=s.counters.getCounterValue(p.value),y=g&&Ea(g)?xT.parse(s.context,g.value):3;u.appendChild(l.createTextNode(V2(x,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(ev),p=b[0],w=b[1],g=b[2];if(p&&Ea(p)){var B=s.counters.getCounterValues(p.value),P=g&&Ea(g)?xT.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",E=B.map(function(S){return V2(S,P,!1)}).join(_);u.appendChild(l.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(O7(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(O7(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=CT+" "+_T;var d=a===Vy.BEFORE?" "+CT:" "+_T;return C_(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Vy;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Vy||(Vy={}));var yNe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(KZ,"true"),t.body.appendChild(r),r},bNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},wNe=function(t){return Promise.all([].slice.call(t.images,0).map(bNe))},NNe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},CNe=["all","d","content"],X5=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);CNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},_Ne=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ENe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},SNe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},INe=":before",BNe=":after",CT="___html2canvas___pseudoelement_before",_T="___html2canvas___pseudoelement_after",i9=`{
    content: "" !important;
    display: none !important;
}`,PNe=function(t){jNe(t,"."+CT+INe+i9+`
         .`+_T+BNe+i9)},jNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},GZ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),TNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(J5(e)||DNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Il(this,void 0,void 0,function(){var r,n,a,s,i=this;return nl(this,function(l){switch(l.label){case 0:return r=GZ.isSameOrigin(e),n=!Y5(e)&&this._options.useCORS===!0&&Po.SUPPORT_CORS_IMAGES&&!r,a=!Y5(e)&&!r&&!J5(e)&&typeof this._options.proxy=="string"&&Po.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Y5(e)&&!J5(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(RNe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var l=Po.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),kNe=/^data:image\/svg\+xml/i,FNe=/^data:image\/.*;base64,/i,ONe=/^data:image\/.*/i,DNe=function(t){return Po.SUPPORT_SVG_DRAWING||!MNe(t)},Y5=function(t){return ONe.test(t)},RNe=function(t){return FNe.test(t)},J5=function(t){return t.substr(0,4)==="blob"},MNe=function(t){return t.substr(-3).toLowerCase()==="svg"||kNe.test(t)},_r=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Ng=function(t,e,r){return new _r(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},UN=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=Ng(this.start,this.startControl,e),a=Ng(this.startControl,this.endControl,e),s=Ng(this.endControl,this.end,e),i=Ng(n,a,e),l=Ng(a,s,e),c=Ng(i,l,e);return r?new t(this.start,n,i,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Cu=function(t){return t.type===1},LNe=function(){function t(e){var r=e.styles,n=e.bounds,a=uy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=uy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=uy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],A=uy(r.borderBottomLeftRadius,n.width,n.height),m=A[0],p=A[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,f/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-f,B=n.height-p,P=r.borderTopWidth,_=r.borderRightWidth,E=r.borderBottomWidth,I=r.borderLeftWidth,O=La(r.paddingTop,e.bounds.width),S=La(r.paddingRight,e.bounds.width),j=La(r.paddingBottom,e.bounds.width),D=La(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?rs(n.left+I/3,n.top+P/3,s-I/3,i-P/3,oa.TOP_LEFT):new _r(n.left+I/3,n.top+P/3),this.topRightBorderDoubleOuterBox=s>0||i>0?rs(n.left+y,n.top+P/3,c-_/3,u-P/3,oa.TOP_RIGHT):new _r(n.left+n.width-_/3,n.top+P/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?rs(n.left+w,n.top+b,f-_/3,h-E/3,oa.BOTTOM_RIGHT):new _r(n.left+n.width-_/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?rs(n.left+I/3,n.top+B,m-I/3,p-E/3,oa.BOTTOM_LEFT):new _r(n.left+I/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?rs(n.left+I*2/3,n.top+P*2/3,s-I*2/3,i-P*2/3,oa.TOP_LEFT):new _r(n.left+I*2/3,n.top+P*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?rs(n.left+y,n.top+P*2/3,c-_*2/3,u-P*2/3,oa.TOP_RIGHT):new _r(n.left+n.width-_*2/3,n.top+P*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?rs(n.left+w,n.top+b,f-_*2/3,h-E*2/3,oa.BOTTOM_RIGHT):new _r(n.left+n.width-_*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?rs(n.left+I*2/3,n.top+B,m-I*2/3,p-E*2/3,oa.BOTTOM_LEFT):new _r(n.left+I*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=s>0||i>0?rs(n.left+I/2,n.top+P/2,s-I/2,i-P/2,oa.TOP_LEFT):new _r(n.left+I/2,n.top+P/2),this.topRightBorderStroke=s>0||i>0?rs(n.left+y,n.top+P/2,c-_/2,u-P/2,oa.TOP_RIGHT):new _r(n.left+n.width-_/2,n.top+P/2),this.bottomRightBorderStroke=f>0||h>0?rs(n.left+w,n.top+b,f-_/2,h-E/2,oa.BOTTOM_RIGHT):new _r(n.left+n.width-_/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=m>0||p>0?rs(n.left+I/2,n.top+B,m-I/2,p-E/2,oa.BOTTOM_LEFT):new _r(n.left+I/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||i>0?rs(n.left,n.top,s,i,oa.TOP_LEFT):new _r(n.left,n.top),this.topRightBorderBox=c>0||u>0?rs(n.left+y,n.top,c,u,oa.TOP_RIGHT):new _r(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?rs(n.left+w,n.top+b,f,h,oa.BOTTOM_RIGHT):new _r(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?rs(n.left,n.top+B,m,p,oa.BOTTOM_LEFT):new _r(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?rs(n.left+I,n.top+P,Math.max(0,s-I),Math.max(0,i-P),oa.TOP_LEFT):new _r(n.left+I,n.top+P),this.topRightPaddingBox=c>0||u>0?rs(n.left+Math.min(y,n.width-_),n.top+P,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-P),oa.TOP_RIGHT):new _r(n.left+n.width-_,n.top+P),this.bottomRightPaddingBox=f>0||h>0?rs(n.left+Math.min(w,n.width-I),n.top+Math.min(b,n.height-E),Math.max(0,f-_),Math.max(0,h-E),oa.BOTTOM_RIGHT):new _r(n.left+n.width-_,n.top+n.height-E),this.bottomLeftPaddingBox=m>0||p>0?rs(n.left+I,n.top+Math.min(B,n.height-E),Math.max(0,m-I),Math.max(0,p-E),oa.BOTTOM_LEFT):new _r(n.left+I,n.top+n.height-E),this.topLeftContentBox=s>0||i>0?rs(n.left+I+D,n.top+P+O,Math.max(0,s-(I+D)),Math.max(0,i-(P+O)),oa.TOP_LEFT):new _r(n.left+I+D,n.top+P+O),this.topRightContentBox=c>0||u>0?rs(n.left+Math.min(y,n.width+I+D),n.top+P+O,y>n.width+I+D?0:c-I+D,u-(P+O),oa.TOP_RIGHT):new _r(n.left+n.width-(_+S),n.top+P+O),this.bottomRightContentBox=f>0||h>0?rs(n.left+Math.min(w,n.width-(I+D)),n.top+Math.min(b,n.height+P+O),Math.max(0,f-(_+S)),h-(E+j),oa.BOTTOM_RIGHT):new _r(n.left+n.width-(_+S),n.top+n.height-(E+j)),this.bottomLeftContentBox=m>0||p>0?rs(n.left+I+D,n.top+B,Math.max(0,m-(I+D)),p-(E+j),oa.BOTTOM_LEFT):new _r(n.left+I+D,n.top+n.height-(E+j))}return t}(),oa;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(oa||(oa={}));var rs=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=t+r,u=e+n;switch(a){case oa.TOP_LEFT:return new UN(new _r(t,u),new _r(t,u-l),new _r(c-i,e),new _r(c,e));case oa.TOP_RIGHT:return new UN(new _r(t,e),new _r(t+i,e),new _r(c,u-l),new _r(c,u));case oa.BOTTOM_RIGHT:return new UN(new _r(c,e),new _r(c,e+l),new _r(t+i,u),new _r(t,u));case oa.BOTTOM_LEFT:default:return new UN(new _r(c,u),new _r(c-i,u),new _r(t,e+l),new _r(t,e))}},OE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},UNe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},DE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},QNe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),QN=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),VNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),HNe=function(t){return t.type===0},qZ=function(t){return t.type===1},$Ne=function(t){return t.type===2},o9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},KNe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},zZ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),WZ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new LNe(this.container),this.container.styles.opacity<1&&this.effects.push(new VNe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new QNe(n,a,s))}if(this.container.styles.overflowX!==0){var i=OE(this.curves),l=DE(this.curves);o9(i,l)?this.effects.push(new QN(i,6)):(this.effects.push(new QN(i,2)),this.effects.push(new QN(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!qZ(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=OE(n.curves),l=DE(n.curves);o9(i,l)||a.unshift(new QN(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ji(c.target,e)})},t}(),ET=function(t,e,r,n){t.container.elements.forEach(function(a){var s=ji(a.flags,4),i=ji(a.flags,2),l=new WZ(a,t);ji(a.styles.display,2048)&&n.push(l);var c=ji(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new zZ(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var A=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),u.positiveZIndex.splice(A,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);ET(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),ET(l,e,r,c);ji(a.flags,8)&&XZ(a,c)})},XZ=function(t,e){for(var r=t instanceof bT?t.start:1,n=t instanceof bT?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof kZ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=V2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},GNe=function(t){var e=new WZ(t,null),r=new zZ(e),n=[];return ET(e,r,r,n),XZ(e.container,n),r},l9=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Iu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Iu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Iu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},qNe=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Iu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Iu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Iu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},zNe=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Iu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Iu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Iu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},WNe=function(t,e){switch(e){case 0:return VN(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return VN(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return VN(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return VN(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},VN=function(t,e){var r=[];return Cu(t)?r.push(t.subdivide(.5,!1)):r.push(t),Cu(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Iu=function(t,e,r,n){var a=[];return Cu(t)?a.push(t.subdivide(.5,!1)):a.push(t),Cu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Cu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Cu(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},YZ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},RE=function(t){var e=t.styles,r=t.bounds,n=La(e.paddingLeft,r.width),a=La(e.paddingRight,r.width),s=La(e.paddingTop,r.width),i=La(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},XNe=function(t,e){return t===0?e.bounds:t===2?RE(e):YZ(e)},YNe=function(t,e){return t===0?e.bounds:t===2?RE(e):YZ(e)},Z5=function(t,e,r){var n=XNe(zg(t.styles.backgroundOrigin,e),t),a=YNe(zg(t.styles.backgroundClip,e),t),s=JNe(zg(t.styles.backgroundSize,e),r,n),i=s[0],l=s[1],c=uy(zg(t.styles.backgroundPosition,e),n.width-i,n.height-l),u=ZNe(zg(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,l]},Cg=function(t){return Ea(t)&&t.value===Px.AUTO},HN=function(t){return typeof t=="number"},JNe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(di(i)&&l&&di(l))return[La(i,r.width),La(l,r.height)];var c=HN(s);if(Ea(i)&&(i.value===Px.CONTAIN||i.value===Px.COVER)){if(HN(s)){var u=r.width/r.height;return u<s!=(i.value===Px.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=HN(n),f=HN(a),h=d||f;if(Cg(i)&&(!l||Cg(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var A=d?n:a*s,m=f?a:n/s;return[A,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var x=0,y=0;return di(i)?x=La(i,r.width):di(l)&&(y=La(l,r.height)),Cg(i)?x=y*s:(!l||Cg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(di(i)?b=La(i,r.width):l&&di(l)&&(w=La(l,r.height)),b!==null&&(!l||Cg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&Cg(i)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},zg=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},ZNe=function(t,e,r,n,a){var s=e[0],i=e[1],l=r[0],c=r[1];switch(t){case 2:return[new _r(Math.round(n.left),Math.round(n.top+i)),new _r(Math.round(n.left+n.width),Math.round(n.top+i)),new _r(Math.round(n.left+n.width),Math.round(c+n.top+i)),new _r(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new _r(Math.round(n.left+s),Math.round(n.top)),new _r(Math.round(n.left+s+l),Math.round(n.top)),new _r(Math.round(n.left+s+l),Math.round(n.height+n.top)),new _r(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new _r(Math.round(n.left+s),Math.round(n.top+i)),new _r(Math.round(n.left+s+l),Math.round(n.top+i)),new _r(Math.round(n.left+s+l),Math.round(n.top+i+c)),new _r(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new _r(Math.round(a.left),Math.round(a.top)),new _r(Math.round(a.left+a.width),Math.round(a.top)),new _r(Math.round(a.left+a.width),Math.round(a.height+a.top)),new _r(Math.round(a.left),Math.round(a.height+a.top))]}},eCe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",c9="Hidden Text",tCe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=eCe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(c9)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(c9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),JZ=function(){function t(e,r){this.context=e,this.options=r}return t}(),rCe=1e4,nCe=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new tCe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),$Ne(r)&&(this.ctx.globalAlpha=r.opacity),HNe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),qZ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Il(this,void 0,void 0,function(){var n;return nl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Il(this,void 0,void 0,function(){return nl(this,function(n){switch(n.label){case 0:if(ji(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=g6(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=lCe(r.fontFamily).join(", "),s=Xb(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Il(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h=this;return nl(this,function(A){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=Xi(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=Xi(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Xi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=Xi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=RE(r),i=DE(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c,y,y,u,d,f,h,w,A,m,B,p,g,x,y,b,w,B;return nl(this,function(P){switch(P.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,P.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:P.sent(),P.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof PZ))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=P.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof jZ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof TZ))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=P.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof DZ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=P.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),P.label=14;case 14:if(n instanceof x6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===jE?n.checked&&(this.ctx.save(),this.path([new _r(n.bounds.left+f*.39363,n.bounds.top+f*.79),new _r(n.bounds.left+f*.16,n.bounds.top+f*.5549),new _r(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new _r(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new _r(n.bounds.left+f*.72983,n.bounds.top+f*.23),new _r(n.bounds.left+f*.84,n.bounds.top+f*.34085),new _r(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Xi(X7),this.ctx.fill(),this.ctx.restore()):n.type===TE&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Xi(X7),this.ctx.fill(),this.ctx.restore())),aCe(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],A=h[1],m=this.fontMetrics.getMetrics(w,A).baseline,this.ctx.font=w,this.ctx.fillStyle=Xi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=iCe(n.styles.textAlign),B=RE(n),p=0,n.styles.textAlign){case 1:p+=B.width/2;break;case 2:p+=B.width;break}g=B.add(p,0,0,-B.height/2+1),this.ctx.save(),this.path([new _r(B.left,B.top),new _r(B.left+B.width,B.top),new _r(B.left+B.width,B.top+B.height),new _r(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Qy(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ji(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=P.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Xi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new EA(n.bounds.left,n.bounds.top+La(n.styles.paddingTop,n.bounds.width),n.bounds.width,k7(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Qy(r.listValue,B),s.letterSpacing,k7(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Il(this,void 0,void 0,function(){var n,a,x,s,i,x,l,c,x,u,d,x,f,h,x,A,m,x,p,g,x;return nl(this,function(y){switch(y.label){case 0:if(ji(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,y.label=19;case 19:return f<h.length?(x=h[f],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:A=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return A<m.length?(x=m[A],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return A++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Cu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Cu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c;return nl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,A,O,se,he,D,J,E,m,O,se,he,D,J,p,g,x,y,b,w,B,P,_,E,I,O,S,j,D,J,ge,se,he,me,Z,ve,Se,k,F,H,Q;return nl(this,function(V){switch(V.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=V.sent(),[3,4];case 3:return V.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(A=Z5(r,n,[f.width,f.height,f.width/f.height]),O=A[0],se=A[1],he=A[2],D=A[3],J=A[4],E=s.ctx.createPattern(s.resizeImage(f,D,J),"repeat"),s.renderRepeat(O,E,se,he)),[3,6];case 5:H2e(d)?(m=Z5(r,n,[null,null,null]),O=m[0],se=m[1],he=m[2],D=m[3],J=m[4],p=M2e(d.angle,D,J),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],B=document.createElement("canvas"),B.width=D,B.height=J,P=B.getContext("2d"),_=P.createLinearGradient(x,b,y,w),j7(d.stops,g).forEach(function(Y){return _.addColorStop(Y.stop,Xi(Y.color))}),P.fillStyle=_,P.fillRect(0,0,D,J),D>0&&J>0&&(E=s.ctx.createPattern(B,"repeat"),s.renderRepeat(O,E,se,he))):$2e(d)&&(I=Z5(r,n,[null,null,null]),O=I[0],S=I[1],j=I[2],D=I[3],J=I[4],ge=d.position.length===0?[h6]:d.position,se=La(ge[0],D),he=La(ge[ge.length-1],J),me=L2e(d,se,he,D,J),Z=me[0],ve=me[1],Z>0&&ve>0&&(Se=s.ctx.createRadialGradient(S+se,j+he,0,S+se,j+he,Z),j7(d.stops,Z*2).forEach(function(Y){return Se.addColorStop(Y.stop,Xi(Y.color))}),s.path(O),s.ctx.fillStyle=Se,Z!==ve?(k=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,H=ve/Z,Q=1/H,s.ctx.save(),s.ctx.translate(k,F),s.ctx.transform(1,0,0,H,0,0),s.ctx.translate(-k,-F),s.ctx.fillRect(S,Q*(j-F)+F,D,J*Q),s.ctx.restore()):s.ctx.fill())),V.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Il(this,void 0,void 0,function(){return nl(this,function(s){return this.path(l9(a,n)),this.ctx.fillStyle=Xi(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Il(this,void 0,void 0,function(){var i,l;return nl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=qNe(s,a),this.path(i),this.ctx.fillStyle=Xi(r),this.ctx.fill(),l=zNe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,f=this;return nl(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!p0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=sCe(zg(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),p0(n.backgroundColor)||(this.ctx.fillStyle=Xi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){f.ctx.save();var m=OE(r.curves),p=A.inset?0:rCe,g=KNe(m,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=A.offsetX.number+p,f.ctx.shadowOffsetY=A.offsetY.number,f.ctx.shadowColor=Xi(A.color),f.ctx.shadowBlur=A.blur.number,f.ctx.fillStyle=A.inset?Xi(A.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!p0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Il(this,void 0,void 0,function(){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,B,P,B,P;return nl(this,function(_){return this.ctx.save(),l=WNe(s,a),c=l9(s,a),i===2&&(this.path(c),this.ctx.clip()),Cu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Cu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?A=Math.abs(u-f):A=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,A<=m*2?g=!1:A<=m*2+p?(x=A/(2*m+p),m*=x,p*=x):(y=Math.floor((A+p)/(m+p)),b=(A-y*m)/(y-1),w=(A-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Xi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Cu(c[0])&&(B=c[3],P=c[0],this.ctx.beginPath(),this.formatPath([new _r(B.end.x,B.end.y),new _r(P.start.x,P.start.y)]),this.ctx.stroke()),Cu(c[1])&&(B=c[1],P=c[2],this.ctx.beginPath(),this.formatPath([new _r(B.end.x,B.end.y),new _r(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Il(this,void 0,void 0,function(){var n;return nl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Xi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=GNe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(JZ),aCe=function(t){return t instanceof OZ||t instanceof FZ?!0:t instanceof x6&&t.type!==TE&&t.type!==jE},sCe=function(t,e){switch(t){case 0:return OE(e);case 2:return UNe(e);case 1:default:return DE(e)}},iCe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},oCe=["-apple-system","system-ui"],lCe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return oCe.indexOf(e)===-1}):t},cCe=function(t){Fd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Il(this,void 0,void 0,function(){var n,a;return nl(this,function(s){switch(s.label){case 0:return n=yT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,uCe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Xi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(JZ),uCe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},dCe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,bN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,bN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,bN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,bN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),fCe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new dCe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new TNe(this,e)}return t.instanceCount=1,t}(),q0=function(t,e){return e===void 0&&(e={}),ACe(t,e)};typeof window<"u"&&GZ.setContext(window);var ACe=function(t,e){return Il(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,B,_,P,_,E,I,O,S,j,D,J,ge,se,he,me,Z,ve,Se,k,F,H;return nl(this,function(Q){switch(Q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(I=e.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=sT({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},a),i={windowWidth:(j=e.windowWidth)!==null&&j!==void 0?j:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(J=e.scrollX)!==null&&J!==void 0?J:n.pageXOffset,scrollY:(ge=e.scrollY)!==null&&ge!==void 0?ge:n.pageYOffset},l=new EA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new fCe(s,l),u=(se=e.foreignObjectRendering)!==null&&se!==void 0?se:!1,d={allowTaint:(he=e.allowTaint)!==null&&he!==void 0?he:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new s9(c,t,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=Q.sent(),m=v6(h)||mNe(h)?K1e(h.ownerDocument):JI(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=hCe(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(Z=(me=e.scale)!==null&&me!==void 0?me:n.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((ve=e.x)!==null&&ve!==void 0?ve:0)+x,y:((Se=e.y)!==null&&Se!==void 0?Se:0)+y,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(p),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new cCe(c,w),[4,_.render(h)]):[3,3];case 2:return B=Q.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),P=MZ(c,h),b===P.styles.backgroundColor&&(P.styles.backgroundColor=fA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new nCe(c,w),[4,_.render(P)];case 4:B=Q.sent(),Q.label=5;case 5:return(!((H=e.removeContainer)!==null&&H!==void 0)||H)&&(s9.destroy(A)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,B]}})})},hCe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?Ly(t,getComputedStyle(n.documentElement).backgroundColor):fA.TRANSPARENT,s=n.body?Ly(t,getComputedStyle(n.body).backgroundColor):fA.TRANSPARENT,i=typeof r=="string"?Ly(t,r):r===null?fA.TRANSPARENT:4294967295;return e===n.documentElement?p0(a)?p0(s)?i:s:a:i};const y6=Object.freeze(Object.defineProperty({__proto__:null,default:q0},Symbol.toStringTag,{value:"Module"})),mCe="modulepreload",pCe=function(t){return"/"+t},u9={},AA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=pCe(c),c in u9)return;u9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":mCe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,A)=>{f.addEventListener("load",h),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function xa(t){"@babel/helpers - typeof";return xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xa(t)}var Id=Uint8Array,Lc=Uint16Array,b6=Int32Array,w6=new Id([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N6=new Id([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d9=new Id([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZZ=function(t,e){for(var r=new Lc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new b6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},eee=ZZ(w6,2),gCe=eee.b,ST=eee.r;gCe[28]=258,ST[258]=28;var xCe=ZZ(N6,0),f9=xCe.r,IT=new Lc(32768);for(var Ya=0;Ya<32768;++Ya){var yh=(Ya&43690)>>1|(Ya&21845)<<1;yh=(yh&52428)>>2|(yh&13107)<<2,yh=(yh&61680)>>4|(yh&3855)<<4,IT[Ya]=((yh&65280)>>8|(yh&255)<<8)>>1}var Hy=function(t,e,r){for(var n=t.length,a=0,s=new Lc(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Lc(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Lc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=i[t[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[IT[f]>>c]=u}else for(l=new Lc(n),a=0;a<n;++a)t[a]&&(l[a]=IT[i[t[a]-1]++]>>15-t[a]);return l},wp=new Id(288);for(var Ya=0;Ya<144;++Ya)wp[Ya]=8;for(var Ya=144;Ya<256;++Ya)wp[Ya]=9;for(var Ya=256;Ya<280;++Ya)wp[Ya]=7;for(var Ya=280;Ya<288;++Ya)wp[Ya]=8;var ME=new Id(32);for(var Ya=0;Ya<32;++Ya)ME[Ya]=5;var vCe=Hy(wp,9,0),yCe=Hy(ME,5,0),tee=function(t){return(t+7)/8|0},bCe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Id(t.subarray(e,r))},Mf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},j1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},eB=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:nee,l:0};if(a==1){var i=new Id(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(B,P){return B.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var A=new Lc(h+1),m=BT(r[d-1],A,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(P,_){return A[_.s]-A[P.s]||P.f-_.f});n<a;++n){var y=s[n].s;if(A[y]>e)p+=x-(1<<m-A[y]),A[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;A[b]<e?p-=1<<e-A[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;A[w]==e&&(--A[w],++p)}m=e}return{t:new Id(A),l:m}},BT=function(t,e,r){return t.s==-1?Math.max(BT(t.l,e,r+1),BT(t.r,e,r+1)):e[t.s]=r},A9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Lc(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},T1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},ree=function(t,e,r){var n=r.length,a=tee(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},h9=function(t,e,r,n,a,s,i,l,c,u,d){Mf(e,d++,r),++a[256];for(var f=eB(a,15),h=f.t,A=f.l,m=eB(s,15),p=m.t,g=m.l,x=A9(h),y=x.c,b=x.n,w=A9(p),B=w.c,P=w.n,_=new Lc(19),E=0;E<y.length;++E)++_[y[E]&31];for(var E=0;E<B.length;++E)++_[B[E]&31];for(var I=eB(_,7),O=I.t,S=I.l,j=19;j>4&&!O[d9[j-1]];--j);var D=u+5<<3,J=T1(a,wp)+T1(s,ME)+i,ge=T1(a,h)+T1(s,p)+i+14+3*j+T1(_,O)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&D<=J&&D<=ge)return ree(e,d,t.subarray(c,c+u));var se,he,me,Z;if(Mf(e,d,1+(ge<J)),d+=2,ge<J){se=Hy(h,A,0),he=h,me=Hy(p,g,0),Z=p;var ve=Hy(O,S,0);Mf(e,d,b-257),Mf(e,d+5,P-1),Mf(e,d+10,j-4),d+=14;for(var E=0;E<j;++E)Mf(e,d+3*E,O[d9[E]]);d+=3*j;for(var Se=[y,B],k=0;k<2;++k)for(var F=Se[k],E=0;E<F.length;++E){var H=F[E]&31;Mf(e,d,ve[H]),d+=O[H],H>15&&(Mf(e,d,F[E]>>5&127),d+=F[E]>>12)}}else se=vCe,he=wp,me=yCe,Z=ME;for(var E=0;E<l;++E){var Q=n[E];if(Q>255){var H=Q>>18&31;j1(e,d,se[H+257]),d+=he[H+257],H>7&&(Mf(e,d,Q>>23&31),d+=w6[H]);var V=Q&31;j1(e,d,me[V]),d+=Z[V],V>3&&(j1(e,d,Q>>5&8191),d+=N6[V])}else j1(e,d,se[Q]),d+=he[Q]}return j1(e,d,se[256]),d+he[256]},wCe=new b6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nee=new Id(0),NCe=function(t,e,r,n,a,s){var i=s.z||t.length,l=new Id(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=wCe[e-1],h=f>>13,A=f&8191,m=(1<<r)-1,p=s.p||new Lc(32768),g=s.h||new Lc(m+1),x=Math.ceil(r/3),y=2*x,b=function(X){return(t[X]^t[X+1]<<x^t[X+2]<<y)&m},w=new b6(25e3),B=new Lc(288),P=new Lc(32),_=0,E=0,I=s.i||0,O=0,S=s.w||0,j=0;I+2<i;++I){var D=b(I),J=I&32767,ge=g[D];if(p[J]=ge,g[D]=J,S<=I){var se=i-I;if((_>7e3||O>24576)&&(se>423||!u)){d=h9(t,c,0,w,B,P,E,O,j,I-j,d),O=_=E=0,j=I;for(var he=0;he<286;++he)B[he]=0;for(var he=0;he<30;++he)P[he]=0}var me=2,Z=0,ve=A,Se=J-ge&32767;if(se>2&&D==b(I-Se))for(var k=Math.min(h,se)-1,F=Math.min(32767,I),H=Math.min(258,se);Se<=F&&--ve&&J!=ge;){if(t[I+me]==t[I+me-Se]){for(var Q=0;Q<H&&t[I+Q]==t[I+Q-Se];++Q);if(Q>me){if(me=Q,Z=Se,Q>k)break;for(var V=Math.min(Se,Q-2),Y=0,he=0;he<V;++he){var R=I-Se+he&32767,z=p[R],le=R-z&32767;le>Y&&(Y=le,ge=R)}}}J=ge,ge=p[J],Se+=J-ge&32767}if(Z){w[O++]=268435456|ST[me]<<18|f9[Z];var K=ST[me]&31,M=f9[Z]&31;E+=w6[K]+N6[M],++B[257+K],++P[M],S=I+me,++_}else w[O++]=t[I],++B[t[I]]}}for(I=Math.max(I,S);I<i;++I)w[O++]=t[I],++B[t[I]];d=h9(t,c,u,w,B,P,E,O,j,I-j,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=I,s.w=S)}else{for(var I=s.w||0;I<i+u;I+=65535){var pe=I+65535;pe>=i&&(c[d/8|0]=u,pe=i),d=ree(c,d+1,t.subarray(I,pe))}s.i=i}return bCe(l,0,n+tee(d)+a)},aee=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},CCe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Id(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return NCe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},see=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},_Ce=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=aee();a.p(e.dictionary),see(t,2,a.d())}};function PT(t,e){e||(e={});var r=aee();r.p(t);var n=CCe(t,e,e.dictionary?6:2,4);return _Ce(n,e),see(n,n.length-4,r.d()),n}var ECe=typeof TextDecoder<"u"&&new TextDecoder,SCe=0;try{ECe.decode(nee,{stream:!0}),SCe=1}catch{}function ICe(t){if(Array.isArray(t))return t}function BCe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function m9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function PCe(t,e){if(t){if(typeof t=="string")return m9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m9(t,e):void 0}}function jCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p9(t,e){return ICe(t)||BCe(t,e)||PCe(t,e)||jCe()}function g9(t,e="utf8"){return new TextDecoder(e).decode(t)}const TCe=new TextEncoder;function kCe(t){return TCe.encode(t)}const FCe=1024*8,OCe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),tB={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class C6{constructor(e=FCe,r={}){ta(this,"buffer");ta(this,"byteLength");ta(this,"byteOffset");ta(this,"length");ta(this,"offset");ta(this,"lastWrittenByte");ta(this,"littleEndian");ta(this,"_data");ta(this,"_mark");ta(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof C6)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=tB[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===OCe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new tB[r](l.buffer);return this.offset+=n,c.reverse(),c}const i=new tB[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return g9(this.readBytes(e))}decodeText(e=1,r="utf8"){return g9(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(kCe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Pv(t){let e=t.length;for(;--e>=0;)t[e]=0}const DCe=3,RCe=258,iee=29,MCe=256,LCe=MCe+1+iee,oee=30,UCe=512,QCe=new Array((LCe+2)*2);Pv(QCe);const VCe=new Array(oee*2);Pv(VCe);const HCe=new Array(UCe);Pv(HCe);const $Ce=new Array(RCe-DCe+1);Pv($Ce);const KCe=new Array(iee);Pv(KCe);const GCe=new Array(oee);Pv(GCe);const qCe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var jT=qCe;const zCe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},WCe=new Uint32Array(zCe()),XCe=(t,e,r,n)=>{const a=WCe,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var qd=XCe,TT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const YCe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var JCe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)YCe(r,n)&&(t[n]=r[n])}}return t},ZCe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},cee={assign:JCe,flattenChunks:ZCe};let uee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{uee=!1}const H2=new Uint8Array(256);for(let t=0;t<256;t++)H2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;H2[254]=H2[254]=1;var e_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,l=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const t_e=(t,e)=>{if(e<65534&&t.subarray&&uee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var r_e=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let l=H2[i];if(l>4){s[a++]=65533,n+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&n<r;)i=i<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return t_e(s,a)},n_e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+H2[t[r]]>e?r:e},kT={string2buf:e_e,buf2string:r_e,utf8border:n_e};function a_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var s_e=a_e;const $N=16209,i_e=16191;var o_e=function(e,r){let n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,B,P,_,E,I,O;const S=e.state;n=e.next_in,I=e.input,a=n+(e.avail_in-5),s=e.next_out,O=e.output,i=s-(r-e.avail_out),l=s+(e.avail_out-257),c=S.dmax,u=S.wsize,d=S.whave,f=S.wnext,h=S.window,A=S.hold,m=S.bits,p=S.lencode,g=S.distcode,x=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;e:do{m<15&&(A+=I[n++]<<m,m+=8,A+=I[n++]<<m,m+=8),b=p[A&x];t:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w===0)O[s++]=b&65535;else if(w&16){B=b&65535,w&=15,w&&(m<w&&(A+=I[n++]<<m,m+=8),B+=A&(1<<w)-1,A>>>=w,m-=w),m<15&&(A+=I[n++]<<m,m+=8,A+=I[n++]<<m,m+=8),b=g[A&y];r:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w&16){if(P=b&65535,w&=15,m<w&&(A+=I[n++]<<m,m+=8,m<w&&(A+=I[n++]<<m,m+=8)),P+=A&(1<<w)-1,P>c){e.msg="invalid distance too far back",S.mode=$N;break e}if(A>>>=w,m-=w,w=s-i,P>w){if(w=P-w,w>d&&S.sane){e.msg="invalid distance too far back",S.mode=$N;break e}if(_=0,E=h,f===0){if(_+=u-w,w<B){B-=w;do O[s++]=h[_++];while(--w);_=s-P,E=O}}else if(f<w){if(_+=u+f-w,w-=f,w<B){B-=w;do O[s++]=h[_++];while(--w);if(_=0,f<B){w=f,B-=w;do O[s++]=h[_++];while(--w);_=s-P,E=O}}}else if(_+=f-w,w<B){B-=w;do O[s++]=h[_++];while(--w);_=s-P,E=O}for(;B>2;)O[s++]=E[_++],O[s++]=E[_++],O[s++]=E[_++],B-=3;B&&(O[s++]=E[_++],B>1&&(O[s++]=E[_++]))}else{_=s-P;do O[s++]=O[_++],O[s++]=O[_++],O[s++]=O[_++],B-=3;while(B>2);B&&(O[s++]=O[_++],B>1&&(O[s++]=O[_++]))}}else if(w&64){e.msg="invalid distance code",S.mode=$N;break e}else{b=g[(b&65535)+(A&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){S.mode=i_e;break e}else{e.msg="invalid literal/length code",S.mode=$N;break e}else{b=p[(b&65535)+(A&(1<<w)-1)];continue t}break}}while(n<a&&s<l);B=m>>3,n-=B,m-=B<<3,A&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),S.hold=A,S.bits=m};const _g=15,x9=852,v9=592,y9=0,rB=1,b9=2,l_e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),c_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),u_e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),d_e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),f_e=(t,e,r,n,a,s,i,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=0,b,w,B,P,_,E=null,I;const O=new Uint16Array(_g+1),S=new Uint16Array(_g+1);let j=null,D,J,ge;for(u=0;u<=_g;u++)O[u]=0;for(d=0;d<n;d++)O[e[r+d]]++;for(A=c,h=_g;h>=1&&O[h]===0;h--);if(A>h&&(A=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&O[f]===0;f++);for(A<f&&(A=f),g=1,u=1;u<=_g;u++)if(g<<=1,g-=O[u],g<0)return-1;if(g>0&&(t===y9||h!==1))return-1;for(S[1]=0,u=1;u<_g;u++)S[u+1]=S[u]+O[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[S[e[r+d]]++]=d);if(t===y9?(E=j=i,I=20):t===rB?(E=l_e,j=c_e,I=257):(E=u_e,j=d_e,I=0),y=0,d=0,u=f,_=s,m=A,p=0,B=-1,x=1<<A,P=x-1,t===rB&&x>x9||t===b9&&x>v9)return 1;for(;;){D=u-p,i[d]+1<I?(J=0,ge=i[d]):i[d]>=I?(J=j[i[d]-I],ge=E[i[d]-I]):(J=96,ge=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=D<<24|J<<16|ge|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--O[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>A&&(y&P)!==B){for(p===0&&(p=A),_+=f,m=u-p,g=1<<m;m+p<h&&(g-=O[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===rB&&x>x9||t===b9&&x>v9)return 1;B=y&P,a[B]=A<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=A,0};var $y=f_e;const A_e=0,dee=1,fee=2,{Z_FINISH:w9,Z_BLOCK:h_e,Z_TREES:KN,Z_OK:Np,Z_STREAM_END:m_e,Z_NEED_DICT:p_e,Z_STREAM_ERROR:Ru,Z_DATA_ERROR:Aee,Z_MEM_ERROR:hee,Z_BUF_ERROR:g_e,Z_DEFLATED:N9}=lee,l4=16180,C9=16181,_9=16182,E9=16183,S9=16184,I9=16185,B9=16186,P9=16187,j9=16188,T9=16189,LE=16190,Lf=16191,nB=16192,k9=16193,aB=16194,F9=16195,O9=16196,D9=16197,R9=16198,GN=16199,qN=16200,M9=16201,L9=16202,U9=16203,Q9=16204,V9=16205,sB=16206,H9=16207,$9=16208,ns=16209,mee=16210,pee=16211,x_e=852,v_e=592,y_e=15,b_e=y_e,K9=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function w_e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<l4||e.mode>pee?1:0},gee=t=>{if(qp(t))return Ru;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=l4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(x_e),e.distcode=e.distdyn=new Int32Array(v_e),e.sane=1,e.back=-1,Np},xee=t=>{if(qp(t))return Ru;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,gee(t)},vee=(t,e)=>{let r;if(qp(t))return Ru;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ru:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,xee(t))},yee=(t,e)=>{if(!t)return Ru;const r=new w_e;t.state=r,r.strm=t,r.window=null,r.mode=l4;const n=vee(t,e);return n!==Np&&(t.state=null),n},N_e=t=>yee(t,b_e);let G9=!0,iB,oB;const C_e=t=>{if(G9){iB=new Int32Array(512),oB=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for($y(dee,t.lens,0,288,iB,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;$y(fee,t.lens,0,32,oB,0,t.work,{bits:5}),G9=!1}t.lencode=iB,t.lenbits=9,t.distcode=oB,t.distbits=5},bee=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},__e=(t,e)=>{let r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=0,x,y,b,w,B,P,_,E;const I=new Uint8Array(4);let O,S;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qp(t)||!t.output||!t.input&&t.avail_in!==0)return Ru;r=t.state,r.mode===Lf&&(r.mode=nB),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,h=c,E=Np;e:for(;;)switch(r.mode){case l4:if(r.wrap===0){r.mode=nB;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=u&255,I[1]=u>>>8&255,r.check=qd(r.check,I,2,0),u=0,d=0,r.mode=C9;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ns;break}if((u&15)!==N9){t.msg="unknown compression method",r.mode=ns;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=ns;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?T9:Lf,u=0,d=0;break;case C9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==N9){t.msg="unknown compression method",r.mode=ns;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ns;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=qd(r.check,I,2,0)),u=0,d=0,r.mode=_9;case _9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=qd(r.check,I,4,0)),u=0,d=0,r.mode=E9;case E9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=qd(r.check,I,2,0)),u=0,d=0,r.mode=S9;case S9:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=qd(r.check,I,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=I9;case I9:if(r.flags&1024&&(A=r.length,A>l&&(A=l),A&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+A),_)),r.flags&512&&r.wrap&4&&(r.check=qd(r.check,n,A,s)),l-=A,s+=A,r.length-=A),r.length))break e;r.length=0,r.mode=B9;case B9:if(r.flags&2048){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=qd(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=P9;case P9:if(r.flags&4096){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=qd(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.comment=null);r.mode=j9;case j9:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ns;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Lf;break;case T9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=K9(u),u=0,d=0,r.mode=LE;case LE:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,p_e;t.adler=r.check=1,r.mode=Lf;case Lf:if(e===h_e||e===KN)break e;case nB:if(r.last){u>>>=d&7,d-=d&7,r.mode=sB;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=k9;break;case 1:if(C_e(r),r.mode=GN,e===KN){u>>>=2,d-=2;break e}break;case 2:r.mode=O9;break;case 3:t.msg="invalid block type",r.mode=ns}u>>>=2,d-=2;break;case k9:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ns;break}if(r.length=u&65535,u=0,d=0,r.mode=aB,e===KN)break e;case aB:r.mode=F9;case F9:if(A=r.length,A){if(A>l&&(A=l),A>c&&(A=c),A===0)break e;a.set(n.subarray(s,s+A),i),l-=A,s+=A,c-=A,i+=A,r.length-=A;break}r.mode=Lf;break;case O9:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ns;break}r.have=0,r.mode=D9;case D9:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[j[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},E=$y(A_e,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid code lengths set",r.mode=ns;break}r.have=0,r.mode=R9;case R9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(S=x+2;d<S;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=ns;break}_=r.lens[r.have-1],A=3+(u&3),u>>>=2,d-=2}else if(b===17){for(S=x+3;d<S;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=3+(u&7),u>>>=3,d-=3}else{for(S=x+7;d<S;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=11+(u&127),u>>>=7,d-=7}if(r.have+A>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ns;break}for(;A--;)r.lens[r.have++]=_}}if(r.mode===ns)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ns;break}if(r.lenbits=9,O={bits:r.lenbits},E=$y(dee,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid literal/lengths set",r.mode=ns;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},E=$y(fee,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,E){t.msg="invalid distances set",r.mode=ns;break}if(r.mode=GN,e===KN)break e;case GN:r.mode=qN;case qN:if(l>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,o_e(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Lf&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,B=y,P=b;g=r.lencode[P+((u&(1<<w+B)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=V9;break}if(y&32){r.back=-1,r.mode=Lf;break}if(y&64){t.msg="invalid literal/length code",r.mode=ns;break}r.extra=y&15,r.mode=M9;case M9:if(r.extra){for(S=r.extra;d<S;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=L9;case L9:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,B=y,P=b;g=r.distcode[P+((u&(1<<w+B)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=ns;break}r.offset=b,r.extra=y&15,r.mode=U9;case U9:if(r.extra){for(S=r.extra;d<S;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ns;break}r.mode=Q9;case Q9:if(c===0)break e;if(A=h-c,r.offset>A){if(A=r.offset-A,A>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ns;break}A>r.wnext?(A-=r.wnext,m=r.wsize-A):m=r.wnext-A,A>r.length&&(A=r.length),p=r.window}else p=a,m=i-r.offset,A=r.length;A>c&&(A=c),c-=A,r.length-=A;do a[i++]=p[m++];while(--A);r.length===0&&(r.mode=qN);break;case V9:if(c===0)break e;a[i++]=r.length,c--,r.mode=qN;break;case sB:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?qd(r.check,a,h,i-h):jT(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:K9(u))!==r.check){t.msg="incorrect data check",r.mode=ns;break}u=0,d=0}r.mode=H9;case H9:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ns;break}u=0,d=0}r.mode=$9;case $9:E=m_e;break e;case ns:E=Aee;break e;case mee:return hee;case pee:default:return Ru}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<ns&&(r.mode<sB||e!==w9))&&bee(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?qd(r.check,a,h,t.next_out-h):jT(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Lf?128:0)+(r.mode===GN||r.mode===aB?256:0),(f===0&&h===0||e===w9)&&E===Np&&(E=g_e),E},E_e=t=>{if(qp(t))return Ru;let e=t.state;return e.window&&(e.window=null),t.state=null,Np},S_e=(t,e)=>{if(qp(t))return Ru;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Np):Ru},I_e=(t,e)=>{const r=e.length;let n,a,s;return qp(t)||(n=t.state,n.wrap!==0&&n.mode!==LE)?Ru:n.mode===LE&&(a=1,a=jT(a,e,r,0),a!==n.check)?Aee:(s=bee(t,e,r,r),s?(n.mode=mee,hee):(n.havedict=1,Np))};var B_e=xee,P_e=vee,j_e=gee,T_e=N_e,k_e=yee,F_e=__e,O_e=E_e,D_e=S_e,R_e=I_e,M_e="pako inflate (from Nodeca project)",zf={inflateReset:B_e,inflateReset2:P_e,inflateResetKeep:j_e,inflateInit:T_e,inflateInit2:k_e,inflate:F_e,inflateEnd:O_e,inflateGetHeader:D_e,inflateSetDictionary:R_e,inflateInfo:M_e};function L_e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var U_e=L_e;const wee=Object.prototype.toString,{Z_NO_FLUSH:Q_e,Z_FINISH:V_e,Z_OK:$2,Z_STREAM_END:lB,Z_NEED_DICT:cB,Z_STREAM_ERROR:H_e,Z_DATA_ERROR:q9,Z_MEM_ERROR:$_e}=lee;function Yb(t){this.options=cee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s_e,this.strm.avail_out=0;let r=zf.inflateInit2(this.strm,e.windowBits);if(r!==$2)throw new Error(TT[r]);if(this.header=new U_e,zf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=kT.string2buf(e.dictionary):wee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=zf.inflateSetDictionary(this.strm,e.dictionary),r!==$2)))throw new Error(TT[r])}Yb.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,l;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?V_e:Q_e,wee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=zf.inflate(r,i),s===cB&&a&&(s=zf.inflateSetDictionary(r,a),s===$2?s=zf.inflate(r,i):s===q9&&(s=cB));r.avail_in>0&&s===lB&&r.state.wrap>0&&t[r.next_in]!==0;)zf.inflateReset(r),s=zf.inflate(r,i);switch(s){case H_e:case q9:case cB:case $_e:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===lB))if(this.options.to==="string"){let c=kT.utf8border(r.output,r.next_out),u=r.next_out-c,d=kT.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===$2&&l===0)){if(s===lB)return s=zf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Yb.prototype.onData=function(t){this.chunks.push(t)};Yb.prototype.onEnd=function(t){t===$2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function K_e(t,e){const r=new Yb(e);if(r.push(t),r.err)throw r.msg||TT[r.err];return r.result}var G_e=Yb,q_e=K_e,z_e={Inflate:G_e,inflate:q_e};const{Inflate:W_e,inflate:X_e}=z_e;var z9=W_e,Y_e=X_e;const Nee=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Nee[t]=e}const W9=4294967295;function J_e(t,e,r){let n=t;for(let a=0;a<r;a++)n=Nee[(n^e[a])&255]^n>>>8;return n}function Z_e(t,e){return(J_e(W9,t,e)^W9)>>>0}function X9(t,e,r){const n=t.readUint32(),a=Z_e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Cee(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function _ee(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Eee(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function See(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Iee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+eEe(e[s-a],r[s],r[s-a])&255}}function eEe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function tEe(t,e,r,n,a,s){switch(t){case 0:Cee(e,r,a);break;case 1:_ee(e,r,a,s);break;case 2:Eee(e,r,n,a);break;case 3:See(e,r,n,a,s);break;case 4:Iee(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const rEe=new Uint16Array([255]),nEe=new Uint8Array(rEe.buffer),aEe=nEe[0]===255;function sEe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=i[d],h=Math.ceil((r-f.x)/f.xStep),A=Math.ceil((n-f.y)/f.yStep);if(h<=0||A<=0)continue;const m=h*l,p=new Uint8Array(m);for(let g=0;g<A;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);tEe(x,y,b,p,m,l),p.set(b);for(let w=0;w<h;w++){const B=f.x+w*f.xStep,P=f.y+g*f.yStep;if(!(B>=r||P>=n))for(let _=0;_<l;_++)c[(P*r+B)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(aEe)for(let f=0;f<d.length;f++)d[f]=iEe(d[f]);return d}else return c}function iEe(t){return(t&255)<<8|t>>8&255}const oEe=new Uint16Array([255]),lEe=new Uint8Array(oEe.buffer),cEe=lEe[0]===255,uEe=new Uint8Array(0);function Y9(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=uEe,d=0,f,h;for(let A=0;A<n;A++){switch(f=e.subarray(d+1,d+1+l),h=c.subarray(A*l,(A+1)*l),e[d]){case 0:Cee(f,h,l);break;case 1:_ee(f,h,l,i);break;case 2:Eee(f,h,u,l);break;case 3:See(f,h,u,l,i);break;case 4:Iee(f,h,u,l,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=l+1}if(s===16){const A=new Uint16Array(c.buffer);if(cEe)for(let m=0;m<A.length;m++)A[m]=dEe(A[m]);return A}else return c}function dEe(t){return(t&255)<<8|t>>8&255}const __=Uint8Array.of(137,80,78,71,13,10,26,10);function J9(t){if(!fEe(t.readBytes(__.length)))throw new Error("wrong PNG signature")}function fEe(t){if(t.length<__.length)return!1;for(let e=0;e<__.length;e++)if(t[e]!==__[e])return!1;return!0}const AEe="tEXt",hEe=0,Bee=new TextDecoder("latin1");function mEe(t){if(gEe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const pEe=/^[\u0000-\u00FF]*$/;function gEe(t){if(!pEe.test(t))throw new Error("invalid latin1 text")}function xEe(t,e,r){const n=Pee(e);t[n]=vEe(e,r-n.length-1)}function Pee(t){for(t.mark();t.readByte()!==hEe;);const e=t.offset;t.reset();const r=Bee.decode(t.readBytes(e-t.offset-1));return t.skip(1),mEe(r),r}function vEe(t,e){return Bee.decode(t.readBytes(e))}const Ec={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},uB={UNKNOWN:-1,DEFLATE:0},Z9={UNKNOWN:-1,ADAPTIVE:0},dB={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},zN={NONE:0,BACKGROUND:1,PREVIOUS:2},fB={SOURCE:0,OVER:1};class yEe extends C6{constructor(r,n={}){super(r);ta(this,"_checkCrc");ta(this,"_inflator");ta(this,"_png");ta(this,"_apng");ta(this,"_end");ta(this,"_hasPalette");ta(this,"_palette");ta(this,"_hasTransparency");ta(this,"_transparency");ta(this,"_compressionMethod");ta(this,"_filterMethod");ta(this,"_interlaceMethod");ta(this,"_colorType");ta(this,"_isAnimated");ta(this,"_numberOfFrames");ta(this,"_numberOfPlays");ta(this,"_frames");ta(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new z9,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=uB.UNKNOWN,this._filterMethod=Z9.UNKNOWN,this._interlaceMethod=dB.UNKNOWN,this._colorType=Ec.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(J9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(J9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case AEe:xEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?X9(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?X9(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=bEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Ec.GREYSCALE:a=1;break;case Ec.TRUECOLOUR:a=3;break;case Ec.INDEXED_COLOUR:a=1;break;case Ec.GREYSCALE_ALPHA:a=2;break;case Ec.TRUECOLOUR_ALPHA:a=4;break;case Ec.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==uB.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ec.GREYSCALE:case Ec.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ec.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ec.UNKNOWN:case Ec.GREYSCALE_ALPHA:case Ec.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Pee(this),a=this.readUint8();if(a!==uB.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Y_e(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=Y9({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case zN.NONE:break;case zN.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case zN.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,l)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(i*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case fB.SOURCE:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case fB.OVER:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],A=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Z9.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===dB.NO_INTERLACE)this._png.data=Y9({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===dB.ADAM7)this._png.data=sEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:zN.NONE,blendOp:fB.SOURCE,data:r}),this._inflator=new z9,this._writingDataChunks=!1}}function bEe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var eQ;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(eQ||(eQ={}));function wEe(t,e){return new yEe(t,e).decode()}var rn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function AB(){rn.console&&typeof rn.console.log=="function"&&rn.console.log.apply(rn.console,arguments)}var Ta={log:AB,warn:function(t){rn.console&&(typeof rn.console.warn=="function"?rn.console.warn.apply(rn.console,arguments):AB.call(null,arguments))},error:function(t){rn.console&&(typeof rn.console.error=="function"?rn.console.error.apply(rn.console,arguments):AB(t))}};function hB(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){wm(n.response,e,r)},n.onerror=function(){Ta.error("could not download file")},n.send()}function tQ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function WN(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var wm=rn.saveAs||((typeof window>"u"?"undefined":xa(window))!=="object"||window!==rn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=rn.URL||rn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?tQ(a.href)?hB(t,e,r):WN(a,a.target="_blank"):WN(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){WN(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(tQ(t))hB(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){WN(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:xa(s)!=="object"&&(Ta.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return hB(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(rn.HTMLElement)||rn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":xa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=rn.URL||rn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var E_=rn.atob.bind(rn),rQ=rn.btoa.bind(rn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function mB(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Wo(r,n,a,s,e[0],7,-680876936),s=Wo(s,r,n,a,e[1],12,-389564586),a=Wo(a,s,r,n,e[2],17,606105819),n=Wo(n,a,s,r,e[3],22,-1044525330),r=Wo(r,n,a,s,e[4],7,-176418897),s=Wo(s,r,n,a,e[5],12,1200080426),a=Wo(a,s,r,n,e[6],17,-1473231341),n=Wo(n,a,s,r,e[7],22,-45705983),r=Wo(r,n,a,s,e[8],7,1770035416),s=Wo(s,r,n,a,e[9],12,-1958414417),a=Wo(a,s,r,n,e[10],17,-42063),n=Wo(n,a,s,r,e[11],22,-1990404162),r=Wo(r,n,a,s,e[12],7,1804603682),s=Wo(s,r,n,a,e[13],12,-40341101),a=Wo(a,s,r,n,e[14],17,-1502002290),r=Xo(r,n=Wo(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Xo(s,r,n,a,e[6],9,-1069501632),a=Xo(a,s,r,n,e[11],14,643717713),n=Xo(n,a,s,r,e[0],20,-373897302),r=Xo(r,n,a,s,e[5],5,-701558691),s=Xo(s,r,n,a,e[10],9,38016083),a=Xo(a,s,r,n,e[15],14,-660478335),n=Xo(n,a,s,r,e[4],20,-405537848),r=Xo(r,n,a,s,e[9],5,568446438),s=Xo(s,r,n,a,e[14],9,-1019803690),a=Xo(a,s,r,n,e[3],14,-187363961),n=Xo(n,a,s,r,e[8],20,1163531501),r=Xo(r,n,a,s,e[13],5,-1444681467),s=Xo(s,r,n,a,e[2],9,-51403784),a=Xo(a,s,r,n,e[7],14,1735328473),r=Yo(r,n=Xo(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Yo(s,r,n,a,e[8],11,-2022574463),a=Yo(a,s,r,n,e[11],16,1839030562),n=Yo(n,a,s,r,e[14],23,-35309556),r=Yo(r,n,a,s,e[1],4,-1530992060),s=Yo(s,r,n,a,e[4],11,1272893353),a=Yo(a,s,r,n,e[7],16,-155497632),n=Yo(n,a,s,r,e[10],23,-1094730640),r=Yo(r,n,a,s,e[13],4,681279174),s=Yo(s,r,n,a,e[0],11,-358537222),a=Yo(a,s,r,n,e[3],16,-722521979),n=Yo(n,a,s,r,e[6],23,76029189),r=Yo(r,n,a,s,e[9],4,-640364487),s=Yo(s,r,n,a,e[12],11,-421815835),a=Yo(a,s,r,n,e[15],16,530742520),r=Jo(r,n=Yo(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Jo(s,r,n,a,e[7],10,1126891415),a=Jo(a,s,r,n,e[14],15,-1416354905),n=Jo(n,a,s,r,e[5],21,-57434055),r=Jo(r,n,a,s,e[12],6,1700485571),s=Jo(s,r,n,a,e[3],10,-1894986606),a=Jo(a,s,r,n,e[10],15,-1051523),n=Jo(n,a,s,r,e[1],21,-2054922799),r=Jo(r,n,a,s,e[8],6,1873313359),s=Jo(s,r,n,a,e[15],10,-30611744),a=Jo(a,s,r,n,e[6],15,-1560198380),n=Jo(n,a,s,r,e[13],21,1309151649),r=Jo(r,n,a,s,e[4],6,-145523070),s=Jo(s,r,n,a,e[11],10,-1120210379),a=Jo(a,s,r,n,e[2],15,718787259),n=Jo(n,a,s,r,e[9],21,-343485551),t[0]=Zh(r,t[0]),t[1]=Zh(n,t[1]),t[2]=Zh(a,t[2]),t[3]=Zh(s,t[3])}function c4(t,e,r,n,a,s){return e=Zh(Zh(e,t),Zh(n,s)),Zh(e<<a|e>>>32-a,r)}function Wo(t,e,r,n,a,s,i){return c4(e&r|~e&n,t,e,a,s,i)}function Xo(t,e,r,n,a,s,i){return c4(e&n|r&~n,t,e,a,s,i)}function Yo(t,e,r,n,a,s,i){return c4(e^r^n,t,e,a,s,i)}function Jo(t,e,r,n,a,s,i){return c4(r^(e|~n),t,e,a,s,i)}function Tee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)mB(n,NEe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(mB(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,mB(n,a),n}function NEe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var nQ="0123456789abcdef".split("");function CEe(t){for(var e="",r=0;r<4;r++)e+=nQ[t>>8*r+4&15]+nQ[t>>8*r&15];return e}function _Ee(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function FT(t){return Tee(t).map(_Ee).join("")}var EEe=function(t){for(var e=0;e<t.length;e++)t[e]=CEe(t[e]);return t.join("")}(Tee("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zh(t,e){if(EEe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function OT(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,h=0,A=0,m="";for(c=0;c<f;c++)A=(A+(d=l[h=(h+1)%256]))%256,l[h]=l[A],l[A]=d,i=l[(l[h]+l[A])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var aQ={print:4,modify:8,copy:16,"annot-forms":32};function Wg(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(aQ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=aQ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=FT(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=OT(this.encryptionKey,this.padding)}function Xg(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function sQ(t){if(xa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(l){rn.console&&Ta.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function K2(t){if(!(this instanceof K2))return new K2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function kee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Kh(t,e,r,n,a){if(!(this instanceof Kh))return new Kh(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,kee.call(this,n,a)}function Mm(t,e,r,n,a){if(!(this instanceof Mm))return new Mm(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,kee.call(this,n,a)}function Br(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;xa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,h={},A={internal:{},__private__:{}};A.__private__.PubSub=sQ;var m="1.3",p=A.__private__.getPdfVersion=function(){return m};A.__private__.setPdfVersion=function(U){m=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return g};var x=A.__private__.getPageFormat=function(U){return g[U]};a=a||"a4";var y="compat",b="advanced",w=y;function B(){this.saveGraphicsState(),G(new te(fe,0,0,-fe,0,ru()*fe).toString()+" cm"),this.setFontSize(this.getFontSize()/fe),u="n",w=b}function P(){this.restoreGraphicsState(),u="S",w=y}var _=A.__private__.combineFontStyleAndFontWeight=function(U,ye){if(U=="bold"&&ye=="normal"||U=="bold"&&ye==400||U=="normal"&&ye=="italic"||U=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(U=ye==400||ye==="normal"?U==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||U!=="normal"?(ye==700?"bold":ye)+""+U:"bold"),U};A.advancedAPI=function(U){var ye=w===y;return ye&&B.call(this),typeof U!="function"||(U(this),ye&&P.call(this)),this},A.compatAPI=function(U){var ye=w===b;return ye&&P.call(this),typeof U!="function"||(U(this),ye&&B.call(this)),this},A.isAdvancedAPI=function(){return w===b};var E,I=function(U){if(w!==b)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=A.roundToPrecision=A.__private__.roundToPrecision=function(U,ye){var Ke=e||ye;if(isNaN(U)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ke).replace(/0+$/,"")};E=A.hpf=A.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,16)};var S=A.f2=A.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return O(U,2)},j=A.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return O(U,3)},D=A.scale=A.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?U*fe:w===b?U:void 0},J=function(U){return D(function(ye){return w===y?ru()-ye:w===b?ye:void 0}(U))};A.__private__.setPrecision=A.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var ge,se="00000000000000000000000000000000",he=A.__private__.getFileId=function(){return se},me=A.__private__.setFileId=function(U){return se=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(or=new Wg(d.userPermissions,d.userPassword,d.ownerPassword,se)),se};A.setFileId=function(U){return me(U),this},A.getFileId=function(){return he()};var Z=A.__private__.convertDateToPDFDate=function(U){var ye=U.getTimezoneOffset(),Ke=ye<0?"+":"-",it=Math.floor(Math.abs(ye/60)),xt=Math.abs(ye%60),Kt=[Ke,H(it),"'",H(xt),"'"].join("");return["D:",U.getFullYear(),H(U.getMonth()+1),H(U.getDate()),H(U.getHours()),H(U.getMinutes()),H(U.getSeconds()),Kt].join("")},ve=A.__private__.convertPDFDateToDate=function(U){var ye=parseInt(U.substr(2,4),10),Ke=parseInt(U.substr(6,2),10)-1,it=parseInt(U.substr(8,2),10),xt=parseInt(U.substr(10,2),10),Kt=parseInt(U.substr(12,2),10),Xt=parseInt(U.substr(14,2),10);return new Date(ye,Ke,it,xt,Kt,Xt,0)},Se=A.__private__.setCreationDate=function(U){var ye;if(U===void 0&&(U=new Date),U instanceof Date)ye=Z(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=U}return ge=ye},k=A.__private__.getCreationDate=function(U){var ye=ge;return U==="jsDate"&&(ye=ve(ge)),ye};A.setCreationDate=function(U){return Se(U),this},A.getCreationDate=function(U){return k(U)};var F,H=A.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},Q=A.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},V=0,Y=[],R=[],z=0,le=[],K=[],M=!1,pe=R;A.__private__.setCustomOutputDestination=function(U){M=!0,pe=U};var X=function(U){M||(pe=U)};A.__private__.resetCustomOutputDestination=function(){M=!1,pe=R};var G=A.__private__.out=function(U){return U=U.toString(),z+=U.length+1,pe.push(U),pe},ie=A.__private__.write=function(U){return G(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},Ie=A.__private__.getArrayBuffer=function(U){for(var ye=U.length,Ke=new ArrayBuffer(ye),it=new Uint8Array(Ke);ye--;)it[ye]=U.charCodeAt(ye);return Ke},Re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return Re};var ze=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(U){return ze=w===b?U/fe:U,this};var st,lt=A.__private__.getFontSize=A.getFontSize=function(){return w===y?ze:ze*fe},_t=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(U){return _t=U,this},A.__private__.getR2L=A.getR2L=function(){return _t};var bt,St=A.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))st=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');st=U}else st=parseInt(U,10)};A.__private__.getZoomMode=function(){return st};var kt,et=A.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');bt=U};A.__private__.getPageMode=function(){return bt};var ce=A.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');kt=U};A.__private__.getLayoutMode=function(){return kt},A.__private__.setDisplayMode=A.setDisplayMode=function(U,ye,Ke){return St(U),ce(ye),et(Ke),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(U){if(Object.keys(Qe).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[U]},A.__private__.getDocumentProperties=function(){return Qe},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(U){for(var ye in Qe)Qe.hasOwnProperty(ye)&&U[ye]&&(Qe[ye]=U[ye]);return this},A.__private__.setDocumentProperty=function(U,ye){if(Object.keys(Qe).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[U]=ye};var xe,fe,oe,Be,Me,Ze={},Je={},nt=[],ke={},ae={},De={},We={},pt=null,ct=0,Xe=[],Rt=new sQ(A),er=t.hotfixes||[],L={},we={},Ue=[],te=function U(ye,Ke,it,xt,Kt,Xt){if(!(this instanceof U))return new U(ye,Ke,it,xt,Kt,Xt);isNaN(ye)&&(ye=1),isNaN(Ke)&&(Ke=0),isNaN(it)&&(it=0),isNaN(xt)&&(xt=1),isNaN(Kt)&&(Kt=0),isNaN(Xt)&&(Xt=0),this._matrix=[ye,Ke,it,xt,Kt,Xt]};Object.defineProperty(te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(te.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(te.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(te.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(te.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(te.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(te.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(te.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),te.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(U)},te.prototype.multiply=function(U){var ye=U.sx*this.sx+U.shy*this.shx,Ke=U.sx*this.shy+U.shy*this.sy,it=U.shx*this.sx+U.sy*this.shx,xt=U.shx*this.shy+U.sy*this.sy,Kt=U.tx*this.sx+U.ty*this.shx+this.tx,Xt=U.tx*this.shy+U.ty*this.sy+this.ty;return new te(ye,Ke,it,xt,Kt,Xt)},te.prototype.decompose=function(){var U=this.sx,ye=this.shy,Ke=this.shx,it=this.sy,xt=this.tx,Kt=this.ty,Xt=Math.sqrt(U*U+ye*ye),Ir=(U/=Xt)*Ke+(ye/=Xt)*it;Ke-=U*Ir,it-=ye*Ir;var Dr=Math.sqrt(Ke*Ke+it*it);return Ir/=Dr,U*(it/=Dr)<ye*(Ke/=Dr)&&(U=-U,ye=-ye,Ir=-Ir,Xt=-Xt),{scale:new te(Xt,0,0,Dr,0,0),translate:new te(1,0,0,1,xt,Kt),rotate:new te(U,ye,-ye,U,0,0),skew:new te(1,0,Ir,1,0,0)}},te.prototype.toString=function(U){return this.join(" ")},te.prototype.inversed=function(){var U=this.sx,ye=this.shy,Ke=this.shx,it=this.sy,xt=this.tx,Kt=this.ty,Xt=1/(U*it-ye*Ke),Ir=it*Xt,Dr=-ye*Xt,Xr=-Ke*Xt,sn=U*Xt;return new te(Ir,Dr,Xr,sn,-Ir*xt-Xr*Kt,-Dr*xt-sn*Kt)},te.prototype.applyToPoint=function(U){var ye=U.x*this.sx+U.y*this.shx+this.tx,Ke=U.x*this.shy+U.y*this.sy+this.ty;return new eu(ye,Ke)},te.prototype.applyToRectangle=function(U){var ye=this.applyToPoint(U),Ke=this.applyToPoint(new eu(U.x+U.w,U.y+U.h));return new eh(ye.x,ye.y,Ke.x-ye.x,Ke.y-ye.y)},te.prototype.clone=function(){var U=this.sx,ye=this.shy,Ke=this.shx,it=this.sy,xt=this.tx,Kt=this.ty;return new te(U,ye,Ke,it,xt,Kt)},A.Matrix=te;var Ce=A.matrixMult=function(U,ye){return ye.multiply(U)},$e=new te(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=$e;var He=function(U,ye){if(!ae[U]){var Ke=(ye instanceof Kh?"Sh":"P")+(Object.keys(ke).length+1).toString(10);ye.id=Ke,ae[U]=Ke,ke[Ke]=ye,Rt.publish("addPattern",ye)}};A.ShadingPattern=Kh,A.TilingPattern=Mm,A.addShadingPattern=function(U,ye){return I("addShadingPattern()"),He(U,ye),this},A.beginTilingPattern=function(U){I("beginTilingPattern()"),Ud(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},A.endTilingPattern=function(U,ye){I("endTilingPattern()"),ye.stream=K[F].join(`
`),He(U,ye),Rt.publish("endTilingPattern",ye),Ue.pop().restore()};var Ye,mt=A.__private__.newObject=function(){var U=rt();return re(U,!0),U},rt=A.__private__.newObjectDeferred=function(){return V++,Y[V]=function(){return z},V},re=function(U,ye){return ye=typeof ye=="boolean"&&ye,Y[U]=z,ye&&G(U+" 0 obj"),U},ne=A.__private__.newAdditionalObject=function(){var U={objId:rt(),content:""};return le.push(U),U},Ae=rt(),ue=rt(),Ne=A.__private__.decodeColorString=function(U){var ye=U.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Ke=parseFloat(ye[0]);ye=[Ke,Ke,Ke,"r"]}for(var it="#",xt=0;xt<3;xt++)it+=("0"+Math.floor(255*parseFloat(ye[xt])).toString(16)).slice(-2);return it},Te=A.__private__.encodeColorString=function(U){var ye;typeof U=="string"&&(U={ch1:U});var Ke=U.ch1,it=U.ch2,xt=U.ch3,Kt=U.ch4,Xt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var Ir=new jee(Ke);if(Ir.ok)Ke=Ir.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var Dr=parseInt(Ke.substr(1),16);Ke=Dr>>16&255,it=Dr>>8&255,xt=255&Dr}if(it===void 0||Kt===void 0&&Ke===it&&it===xt)ye=typeof Ke=="string"?Ke+" "+Xt[0]:U.precision===2?S(Ke/255)+" "+Xt[0]:j(Ke/255)+" "+Xt[0];else if(Kt===void 0||xa(Kt)==="object"){if(Kt&&!isNaN(Kt.a)&&Kt.a===0)return["1.","1.","1.",Xt[1]].join(" ");ye=typeof Ke=="string"?[Ke,it,xt,Xt[1]].join(" "):U.precision===2?[S(Ke/255),S(it/255),S(xt/255),Xt[1]].join(" "):[j(Ke/255),j(it/255),j(xt/255),Xt[1]].join(" ")}else ye=typeof Ke=="string"?[Ke,it,xt,Kt,Xt[2]].join(" "):U.precision===2?[S(Ke),S(it),S(xt),S(Kt),Xt[2]].join(" "):[j(Ke),j(it),j(xt),j(Kt),Xt[2]].join(" ");return ye},tt=A.__private__.getFilters=function(){return i},ot=A.__private__.putStream=function(U){var ye=(U=U||{}).data||"",Ke=U.filters||tt(),it=U.alreadyAppliedFilters||[],xt=U.addLength1||!1,Kt=ye.length,Xt=U.objectId,Ir=function(js){return js};if(d!==null&&Xt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ir=or.encryptor(Xt,0));var Dr={};Ke===!0&&(Ke=["FlateEncode"]);var Xr=U.additionalKeyValues||[],sn=(Dr=Br.API.processDataByFilters!==void 0?Br.API.processDataByFilters(ye,Ke):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(it)?it.join(" "):it.toString());if(Dr.data.length!==0&&(Xr.push({key:"Length",value:Dr.data.length}),xt===!0&&Xr.push({key:"Length1",value:Kt})),sn.length!=0)if(sn.split("/").length-1==1)Xr.push({key:"Filter",value:sn});else{Xr.push({key:"Filter",value:"["+sn+"]"});for(var Bn=0;Bn<Xr.length;Bn+=1)if(Xr[Bn].key==="DecodeParms"){for(var ea=[],ps=0;ps<Dr.reverseChain.split("/").length-1;ps+=1)ea.push("null");ea.push(Xr[Bn].value),Xr[Bn].value="["+ea.join(" ")+"]"}}G("<<");for(var la=0;la<Xr.length;la++)G("/"+Xr[la].key+" "+Xr[la].value);G(">>"),Dr.data.length!==0&&(G("stream"),G(Ir(Dr.data)),G("endstream"))},vt=A.__private__.putPage=function(U){var ye=U.number,Ke=U.data,it=U.objId,xt=U.contentsObjId;re(it,!0),G("<</Type /Page"),G("/Parent "+U.rootDictionaryObjId+" 0 R"),G("/Resources "+U.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(E(U.mediaBox.bottomLeftX))+" "+parseFloat(E(U.mediaBox.bottomLeftY))+" "+E(U.mediaBox.topRightX)+" "+E(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&G("/CropBox ["+E(U.cropBox.bottomLeftX)+" "+E(U.cropBox.bottomLeftY)+" "+E(U.cropBox.topRightX)+" "+E(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&G("/BleedBox ["+E(U.bleedBox.bottomLeftX)+" "+E(U.bleedBox.bottomLeftY)+" "+E(U.bleedBox.topRightX)+" "+E(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&G("/TrimBox ["+E(U.trimBox.bottomLeftX)+" "+E(U.trimBox.bottomLeftY)+" "+E(U.trimBox.topRightX)+" "+E(U.trimBox.topRightY)+"]"),U.artBox!==null&&G("/ArtBox ["+E(U.artBox.bottomLeftX)+" "+E(U.artBox.bottomLeftY)+" "+E(U.artBox.topRightX)+" "+E(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&G("/UserUnit "+U.userUnit),Rt.publish("putPage",{objId:it,pageContext:Xe[ye],pageNumber:ye,page:Ke}),G("/Contents "+xt+" 0 R"),G(">>"),G("endobj");var Kt=Ke.join(`
`);return w===b&&(Kt+=`
Q`),re(xt,!0),ot({data:Kt,filters:tt(),objectId:xt}),G("endobj"),it},yt=A.__private__.putPages=function(){var U,ye,Ke=[];for(U=1;U<=ct;U++)Xe[U].objId=rt(),Xe[U].contentsObjId=rt();for(U=1;U<=ct;U++)Ke.push(vt({number:U,data:K[U],objId:Xe[U].objId,contentsObjId:Xe[U].contentsObjId,mediaBox:Xe[U].mediaBox,cropBox:Xe[U].cropBox,bleedBox:Xe[U].bleedBox,trimBox:Xe[U].trimBox,artBox:Xe[U].artBox,userUnit:Xe[U].userUnit,rootDictionaryObjId:Ae,resourceDictionaryObjId:ue}));re(Ae,!0),G("<</Type /Pages");var it="/Kids [";for(ye=0;ye<ct;ye++)it+=Ke[ye]+" 0 R ";G(it+"]"),G("/Count "+ct),G(">>"),G("endobj"),Rt.publish("postPutPages")},Et=function(U){Rt.publish("putFont",{font:U,out:G,newObject:mt,putStream:ot}),U.isAlreadyPutted!==!0&&(U.objectNumber=mt(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Xg(U.postScriptName)),G("/Subtype /Type1"),typeof U.encoding=="string"&&G("/Encoding /"+U.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Ee=function(U){U.objectNumber=mt();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[E(U.x),E(U.y),E(U.x+U.width),E(U.y+U.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ke=U.pages[1].join(`
`);ot({data:Ke,additionalKeyValues:ye,objectId:U.objectNumber}),G("endobj")},ut=function(U,ye){ye||(ye=21);var Ke=mt(),it=function(Xt,Ir){var Dr,Xr=[],sn=1/(Ir-1);for(Dr=0;Dr<1;Dr+=sn)Xr.push(Dr);if(Xr.push(1),Xt[0].offset!=0){var Bn={offset:0,color:Xt[0].color};Xt.unshift(Bn)}if(Xt[Xt.length-1].offset!=1){var ea={offset:1,color:Xt[Xt.length-1].color};Xt.push(ea)}for(var ps="",la=0,js=0;js<Xr.length;js++){for(Dr=Xr[js];Dr>Xt[la+1].offset;)la++;var gs=Xt[la].offset,Ts=(Dr-gs)/(Xt[la+1].offset-gs),xs=Xt[la].color,Gl=Xt[la+1].color;ps+=Q(Math.round((1-Ts)*xs[0]+Ts*Gl[0]).toString(16))+Q(Math.round((1-Ts)*xs[1]+Ts*Gl[1]).toString(16))+Q(Math.round((1-Ts)*xs[2]+Ts*Gl[2]).toString(16))}return ps.trim()}(U.colors,ye),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+ye+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot({data:it,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),G("endobj"),U.objectNumber=mt(),G("<< /ShadingType "+U.type),G("/ColorSpace /DeviceRGB");var Kt="/Coords ["+E(parseFloat(U.coords[0]))+" "+E(parseFloat(U.coords[1]))+" ";U.type===2?Kt+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3])):Kt+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3]))+" "+E(parseFloat(U.coords[4]))+" "+E(parseFloat(U.coords[5])),G(Kt+="]"),U.matrix&&G("/Matrix ["+U.matrix.toString()+"]"),G("/Function "+Ke+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Nt=function(U,ye){var Ke=rt(),it=mt();ye.push({resourcesOid:Ke,objectOid:it}),U.objectNumber=it;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+U.boundingBox.map(E).join(" ")+"]"}),xt.push({key:"XStep",value:E(U.xStep)}),xt.push({key:"YStep",value:E(U.yStep)}),xt.push({key:"Resources",value:Ke+" 0 R"}),U.matrix&&xt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),ot({data:U.stream,additionalKeyValues:xt,objectId:U.objectNumber}),G("endobj")},gt=function(U){for(var ye in U.objectNumber=mt(),G("<<"),U)switch(ye){case"opacity":G("/ca "+S(U[ye]));break;case"stroke-opacity":G("/CA "+S(U[ye]))}G(">>"),G("endobj")},at=function(U){re(U.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ye in G("/Font <<"),Ze)Ze.hasOwnProperty(ye)&&(f===!1||f===!0&&h.hasOwnProperty(ye))&&G("/"+ye+" "+Ze[ye].objectNumber+" 0 R");G(">>")}(),function(){if(Object.keys(ke).length>0){for(var ye in G("/Shading <<"),ke)ke.hasOwnProperty(ye)&&ke[ye]instanceof Kh&&ke[ye].objectNumber>=0&&G("/"+ye+" "+ke[ye].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),G(">>")}}(),function(ye){if(Object.keys(ke).length>0){for(var Ke in G("/Pattern <<"),ke)ke.hasOwnProperty(Ke)&&ke[Ke]instanceof A.TilingPattern&&ke[Ke].objectNumber>=0&&ke[Ke].objectNumber<ye&&G("/"+Ke+" "+ke[Ke].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),G(">>")}}(U.objectOid),function(){if(Object.keys(De).length>0){var ye;for(ye in G("/ExtGState <<"),De)De.hasOwnProperty(ye)&&De[ye].objectNumber>=0&&G("/"+ye+" "+De[ye].objectNumber+" 0 R");Rt.publish("putGStateDict"),G(">>")}}(),function(){for(var ye in G("/XObject <<"),L)L.hasOwnProperty(ye)&&L[ye].objectNumber>=0&&G("/"+ye+" "+L[ye].objectNumber+" 0 R");Rt.publish("putXobjectDict"),G(">>")}(),G(">>"),G("endobj")},zt=function(U){Je[U.fontName]=Je[U.fontName]||{},Je[U.fontName][U.fontStyle]=U.id},Jt=function(U,ye,Ke,it,xt){var Kt={id:"F"+(Object.keys(Ze).length+1).toString(10),postScriptName:U,fontName:ye,fontStyle:Ke,encoding:it,isStandardFont:xt||!1,metadata:{}};return Rt.publish("addFont",{font:Kt,instance:this}),Ze[Kt.id]=Kt,zt(Kt),Kt.id},Ot=A.__private__.pdfEscape=A.pdfEscape=function(U,ye){return function(Ke,it){var xt,Kt,Xt,Ir,Dr,Xr,sn,Bn,ea;if(Xt=(it=it||{}).sourceEncoding||"Unicode",Dr=it.outputEncoding,(it.autoencode||Dr)&&Ze[xe].metadata&&Ze[xe].metadata[Xt]&&Ze[xe].metadata[Xt].encoding&&(Ir=Ze[xe].metadata[Xt].encoding,!Dr&&Ze[xe].encoding&&(Dr=Ze[xe].encoding),!Dr&&Ir.codePages&&(Dr=Ir.codePages[0]),typeof Dr=="string"&&(Dr=Ir[Dr]),Dr)){for(sn=!1,Xr=[],xt=0,Kt=Ke.length;xt<Kt;xt++)(Bn=Dr[Ke.charCodeAt(xt)])?Xr.push(String.fromCharCode(Bn)):Xr.push(Ke[xt]),Xr[xt].charCodeAt(0)>>8&&(sn=!0);Ke=Xr.join("")}for(xt=Ke.length;sn===void 0&&xt!==0;)Ke.charCodeAt(xt-1)>>8&&(sn=!0),xt--;if(!sn)return Ke;for(Xr=it.noBOM?[]:[254,255],xt=0,Kt=Ke.length;xt<Kt;xt++){if((ea=(Bn=Ke.charCodeAt(xt))>>8)>>8)throw new Error("Character at position "+xt+" of string '"+Ke+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xr.push(ea),Xr.push(Bn-(ea<<8))}return String.fromCharCode.apply(void 0,Xr)}(U,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vt=A.__private__.beginPage=function(U){K[++ct]=[],Xe[ct]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Nr(ct),X(K[F])},nr=function(U,ye){var Ke,it,xt;switch(r=ye||r,typeof U=="string"&&(Ke=x(U.toLowerCase()),Array.isArray(Ke)&&(it=Ke[0],xt=Ke[1])),Array.isArray(U)&&(it=U[0]*fe,xt=U[1]*fe),isNaN(it)&&(it=a[0],xt=a[1]),(it>14400||xt>14400)&&(Ta.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),it=Math.min(14400,it),xt=Math.min(14400,xt)),a=[it,xt],r.substr(0,1)){case"l":xt>it&&(a=[xt,it]);break;case"p":it>xt&&(a=[xt,it])}Vt(a),Wr(YA),G(qu),Ca!==0&&G(Ca+" J"),tm!==0&&G(tm+" j"),Rt.publish("addPage",{pageNumber:ct})},Ht=function(U){U>0&&U<=ct&&(K.splice(U,1),Xe.splice(U,1),ct--,F>ct&&(F=ct),this.setPage(F))},Nr=function(U){U>0&&U<=ct&&(F=U)},Or=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return K.length-1},Fn=function(U,ye,Ke){var it,xt=void 0;return Ke=Ke||{},U=U!==void 0?U:Ze[xe].fontName,ye=ye!==void 0?ye:Ze[xe].fontStyle,it=U.toLowerCase(),Je[it]!==void 0&&Je[it][ye]!==void 0?xt=Je[it][ye]:Je[U]!==void 0&&Je[U][ye]!==void 0?xt=Je[U][ye]:Ke.disableWarning===!1&&Ta.warn("Unable to look up font label for font '"+U+"', '"+ye+"'. Refer to getFontList() for available fonts."),xt||Ke.noFallback||(xt=Je.times[ye])==null&&(xt=Je.times.normal),xt},vn=A.__private__.putInfo=function(){var U=mt(),ye=function(it){return it};for(var Ke in d!==null&&(ye=or.encryptor(U,0)),G("<<"),G("/Producer ("+Ot(ye("jsPDF "+Br.version))+")"),Qe)Qe.hasOwnProperty(Ke)&&Qe[Ke]&&G("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+Ot(ye(Qe[Ke]))+")");G("/CreationDate ("+Ot(ye(ge))+")"),G(">>"),G("endobj")},Na=A.__private__.putCatalog=function(U){var ye=(U=U||{}).rootDictionaryObjId||Ae;switch(mt(),G("<<"),G("/Type /Catalog"),G("/Pages "+ye+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+st;Ke.substr(Ke.length-1)==="%"&&(st=parseInt(st)/100),typeof st=="number"&&G("/OpenAction [3 0 R /XYZ null null "+S(st)+"]")}switch(kt||(kt="continuous"),kt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}bt&&G("/PageMode /"+bt),Rt.publish("putCatalog"),G(">>"),G("endobj")},Ku=A.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(V+1)),G("/Root "+V+" 0 R"),G("/Info "+(V-1)+" 0 R"),d!==null&&G("/Encrypt "+or.oid+" 0 R"),G("/ID [ <"+se+"> <"+se+"> ]"),G(">>")},Rn=A.__private__.putHeader=function(){G("%PDF-"+m),G("%")},ft=A.__private__.putXRef=function(){var U="0000000000";G("xref"),G("0 "+(V+1)),G("0000000000 65535 f ");for(var ye=1;ye<=V;ye++)typeof Y[ye]=="function"?G((U+Y[ye]()).slice(-10)+" 00000 n "):Y[ye]!==void 0?G((U+Y[ye]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},xr=A.__private__.buildDocument=function(){var U;V=0,z=0,R=[],Y=[],le=[],Ae=rt(),ue=rt(),X(R),Rt.publish("buildDocument"),Rn(),yt(),function(){Rt.publish("putAdditionalObjects");for(var Ke=0;Ke<le.length;Ke++){var it=le[Ke];re(it.objId,!0),G(it.content),G("endobj")}Rt.publish("postPutAdditionalObjects")}(),U=[],function(){for(var Ke in Ze)Ze.hasOwnProperty(Ke)&&(f===!1||f===!0&&h.hasOwnProperty(Ke))&&Et(Ze[Ke])}(),function(){var Ke;for(Ke in De)De.hasOwnProperty(Ke)&&gt(De[Ke])}(),function(){for(var Ke in L)L.hasOwnProperty(Ke)&&Ee(L[Ke])}(),function(Ke){var it;for(it in ke)ke.hasOwnProperty(it)&&(ke[it]instanceof Kh?ut(ke[it]):ke[it]instanceof Mm&&Nt(ke[it],Ke))}(U),Rt.publish("putResources"),U.forEach(at),at({resourcesOid:ue,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources"),d!==null&&(or.oid=mt(),G("<<"),G("/Filter /Standard"),G("/V "+or.v),G("/R "+or.r),G("/U <"+or.toHexString(or.U)+">"),G("/O <"+or.toHexString(or.O)+">"),G("/P "+or.P),G(">>"),G("endobj")),vn(),Na();var ye=z;return ft(),Ku(),G("startxref"),G(""+ye),G("%%EOF"),X(K[F]),R.join(`
`)},vr=A.__private__.getBlob=function(U){return new Blob([Ie(U)],{type:"application/pdf"})},fr=A.output=A.__private__.output=(Ye=function(U,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",U){case void 0:return xr();case"save":A.save(ye.filename);break;case"arraybuffer":return Ie(xr());case"blob":return vr(xr());case"bloburi":case"bloburl":if(rn.URL!==void 0&&typeof rn.URL.createObjectURL=="function")return rn.URL&&rn.URL.createObjectURL(vr(xr()))||void 0;Ta.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",it=xr();try{Ke=rQ(it)}catch{Ke=rQ(unescape(encodeURIComponent(it)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(rn)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(xt=ye.pdfObjectUrl,Kt="");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",Ir=rn.open();return Ir!==null&&Ir.document.write(Xt),Ir}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(rn)==="[object Window]"){var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',Xr=rn.open();if(Xr!==null){Xr.document.write(Dr);var sn=this;Xr.document.documentElement.querySelector("#pdfViewer").onload=function(){Xr.document.title=ye.filename,Xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(sn.output("bloburl"))}}return Xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(rn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',ea=rn.open();if(ea!==null&&(ea.document.write(Bn),ea.document.title=ye.filename),ea||typeof safari>"u")return ea;break;case"datauri":case"dataurl":return rn.document.location.href=this.output("datauristring",ye);default:return null}},Ye.foo=function(){try{return Ye.apply(this,arguments)}catch(Ke){var U=Ke.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ye="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ke.message;if(!rn.console)throw new Error(ye);rn.console.error(ye,Ke),rn.alert&&alert(ye)}},Ye.foo.bar=Ye,Ye.foo),ir=function(U){return Array.isArray(er)===!0&&er.indexOf(U)>-1};switch(n){case"pt":fe=1;break;case"mm":fe=72/25.4;break;case"cm":fe=72/2.54;break;case"in":fe=72;break;case"px":fe=ir("px_scaling")==1?.75:96/72;break;case"pc":case"em":fe=12;break;case"ex":fe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);fe=n}var or=null;Se(),me();var rr=A.__private__.getPageInfo=A.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Xe[U].objId,pageNumber:U,pageContext:Xe[U]}},gr=A.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in Xe)if(Xe[ye].objId===U)break;return rr(ye)},Vr=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Xe[F].objId,pageNumber:F,pageContext:Xe[F]}};A.addPage=function(){return nr.apply(this,arguments),this},A.setPage=function(){return Nr.apply(this,arguments),X.call(this,K[F]),this},A.insertPage=function(U){return this.addPage(),this.movePage(F,U),this},A.movePage=function(U,ye){var Ke,it;if(U>ye){Ke=K[U],it=Xe[U];for(var xt=U;xt>ye;xt--)K[xt]=K[xt-1],Xe[xt]=Xe[xt-1];K[ye]=Ke,Xe[ye]=it,this.setPage(ye)}else if(U<ye){Ke=K[U],it=Xe[U];for(var Kt=U;Kt<ye;Kt++)K[Kt]=K[Kt+1],Xe[Kt]=Xe[Kt+1];K[ye]=Ke,Xe[ye]=it,this.setPage(ye)}return this},A.deletePage=function(){return Ht.apply(this,arguments),this},A.__private__.text=A.text=function(U,ye,Ke,it,xt){var Kt,Xt,Ir,Dr,Xr,sn,Bn,ea,ps,la=(it=it||{}).scope||this;if(typeof U=="number"&&typeof ye=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var js=Ke;Ke=ye,ye=U,U=js}if(arguments[3]instanceof te==0?(Ir=arguments[4],Dr=arguments[5],xa(Bn=arguments[3])==="object"&&Bn!==null||(typeof Ir=="string"&&(Dr=Ir,Ir=null),typeof Bn=="string"&&(Dr=Bn,Bn=null),typeof Bn=="number"&&(Ir=Bn,Bn=null),it={flags:Bn,angle:Ir,align:Dr})):(I("The transform parameter of text() with a Matrix value"),ps=xt),isNaN(ye)||isNaN(Ke)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return la;var gs,Ts="",xs=typeof it.lineHeightFactor=="number"?it.lineHeightFactor:Ld,Gl=la.internal.scaleFactor;function nu(sa){return sa=sa.split("	").join(Array(it.TabLen||9).join(" ")),Ot(sa,Bn)}function au(sa){for(var Ba,Hs=sa.concat(),gi=[],Tf=Hs.length;Tf--;)typeof(Ba=Hs.shift())=="string"?gi.push(Ba):Array.isArray(sa)&&(Ba.length===1||Ba[1]===void 0&&Ba[2]===void 0)?gi.push(Ba[0]):gi.push([Ba[0],Ba[1],Ba[2]]);return gi}function C(sa,Ba){var Hs;if(typeof sa=="string")Hs=Ba(sa)[0];else if(Array.isArray(sa)){for(var gi,Tf,n1=sa.concat(),dg=[],kw=n1.length;kw--;)typeof(gi=n1.shift())=="string"?dg.push(Ba(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(Tf=Ba(gi[0],gi[1],gi[2]),dg.push([Tf[0],Tf[1],Tf[2]]));Hs=dg}return Hs}var W=!1,de=!0;if(typeof U=="string")W=!0;else if(Array.isArray(U)){var Oe=U.concat();Xt=[];for(var wt,Ft=Oe.length;Ft--;)(typeof(wt=Oe.shift())!="string"||Array.isArray(wt)&&typeof wt[0]!="string")&&(de=!1);W=de}if(W===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var ur=ze/la.internal.scaleFactor,On=ur*(xs-1);switch(it.baseline){case"bottom":Ke-=On;break;case"top":Ke+=ur-On;break;case"hanging":Ke+=ur-2*On;break;case"middle":Ke+=ur/2-On}if((sn=it.maxWidth||0)>0&&(typeof U=="string"?U=la.splitTextToSize(U,sn):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(sa,Ba){return sa.concat(la.splitTextToSize(Ba,sn))},[]))),Kt={text:U,x:ye,y:Ke,options:it,mutex:{pdfEscape:Ot,activeFontKey:xe,fonts:Ze,activeFontSize:ze}},Rt.publish("preProcessText",Kt),U=Kt.text,Ir=(it=Kt.options).angle,ps instanceof te==0&&Ir&&typeof Ir=="number"){Ir*=Math.PI/180,it.rotationDirection===0&&(Ir=-Ir),w===b&&(Ir=-Ir);var vs=Math.cos(Ir),Cn=Math.sin(Ir);ps=new te(vs,Cn,-Cn,vs,0,0)}else Ir&&Ir instanceof te&&(ps=Ir);w!==b||ps||(ps=$e),(Xr=it.charSpace||Zc)!==void 0&&(Ts+=E(D(Xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ea=it.horizontalScale)!==void 0&&(Ts+=E(100*ea)+` Tz
`),it.lang;var zn=-1,Oa=it.renderingMode!==void 0?it.renderingMode:it.stroke,gc=la.internal.getCurrentPageInfo().pageContext;switch(Oa){case 0:case!1:case"fill":zn=0;break;case 1:case!0:case"stroke":zn=1;break;case 2:case"fillThenStroke":zn=2;break;case 3:case"invisible":zn=3;break;case 4:case"fillAndAddForClipping":zn=4;break;case 5:case"strokeAndAddPathForClipping":zn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zn=6;break;case 7:case"addToPathForClipping":zn=7}var $o=gc.usedRenderingMode!==void 0?gc.usedRenderingMode:-1;zn!==-1?Ts+=zn+` Tr
`:$o!==-1&&(Ts+=`0 Tr
`),zn!==-1&&(gc.usedRenderingMode=zn),Dr=it.align||"left";var go,zu=ze*xs,Xv=la.internal.pageSize.getWidth(),Yv=Ze[xe];Xr=it.charSpace||Zc,sn=it.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},it.flags);var rh=[],am=function(sa){return la.getStringUnitWidth(sa,{font:Yv,charSpace:Xr,fontSize:ze,doKerning:!1})*ze/Gl};if(Object.prototype.toString.call(U)==="[object Array]"){var xc;Xt=au(U),Dr!=="left"&&(go=Xt.map(am));var vc,nh=0;if(Dr==="right"){ye-=go[0],U=[],Ft=Xt.length;for(var jf=0;jf<Ft;jf++)jf===0?(vc=Gi(ye),xc=Gu(Ke)):(vc=D(nh-go[jf]),xc=-zu),U.push([Xt[jf],vc,xc]),nh=go[jf]}else if(Dr==="center"){ye-=go[0]/2,U=[],Ft=Xt.length;for(var ah=0;ah<Ft;ah++)ah===0?(vc=Gi(ye),xc=Gu(Ke)):(vc=D((nh-go[ah])/2),xc=-zu),U.push([Xt[ah],vc,xc]),nh=go[ah]}else if(Dr==="left"){U=[],Ft=Xt.length;for(var Jv=0;Jv<Ft;Jv++)U.push(Xt[Jv])}else if(Dr==="justify"&&Yv.encoding==="Identity-H"){U=[],Ft=Xt.length,sn=sn!==0?sn:Xv;for(var ug=0,Vs=0;Vs<Ft;Vs++)if(xc=Vs===0?Gu(Ke):-zu,vc=Vs===0?Gi(ye):ug,Vs<Ft-1){var Tw=D((sn-go[Vs])/(Xt[Vs].split(" ").length-1)),Vd=Xt[Vs].split(" ");U.push([Vd[0]+" ",vc,xc]),ug=0;for(var Hd=1;Hd<Vd.length;Hd++){var Zv=(am(Vd[Hd-1]+" "+Vd[Hd])-am(Vd[Hd]))*Gl+Tw;Hd==Vd.length-1?U.push([Vd[Hd],Zv,0]):U.push([Vd[Hd]+" ",Zv,0]),ug-=Zv}}else U.push([Xt[Vs],vc,xc]);U.push(["",ug,0])}else{if(Dr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Ft=Xt.length,sn=sn!==0?sn:Xv,Vs=0;Vs<Ft;Vs++){xc=Vs===0?Gu(Ke):-zu,vc=Vs===0?Gi(ye):0;var e1=Xt[Vs].split(" ").length-1,t1=e1>0?(sn-go[Vs])/e1:0;Vs<Ft-1?rh.push(E(D(t1))):rh.push(0),U.push([Xt[Vs],vc,xc])}}}(typeof it.R2L=="boolean"?it.R2L:_t)===!0&&(U=C(U,function(sa,Ba,Hs){return[sa.split("").reverse().join(""),Ba,Hs]})),Kt={text:U,x:ye,y:Ke,options:it,mutex:{pdfEscape:Ot,activeFontKey:xe,fonts:Ze,activeFontSize:ze}},Rt.publish("postProcessText",Kt),U=Kt.text,gs=Kt.mutex.isHex||!1;var r1=Ze[xe].encoding;r1!=="WinAnsiEncoding"&&r1!=="StandardEncoding"||(U=C(U,function(sa,Ba,Hs){return[nu(sa),Ba,Hs]})),Xt=au(U),U=[];for(var sh,ih,oh,sm=Array.isArray(Xt[0])?1:0,lh="",im=function(sa,Ba,Hs){var gi="";return Hs instanceof te?(Hs=typeof it.angle=="number"?Ce(Hs,new te(1,0,0,1,sa,Ba)):Ce(new te(1,0,0,1,sa,Ba),Hs),w===b&&(Hs=Ce(new te(1,0,0,-1,0,0),Hs)),gi=Hs.join(" ")+` Tm
`):gi=E(sa)+" "+E(Ba)+` Td
`,gi},su=0;su<Xt.length;su++){switch(lh="",sm){case 1:oh=(gs?"<":"(")+Xt[su][0]+(gs?">":")"),sh=parseFloat(Xt[su][1]),ih=parseFloat(Xt[su][2]);break;case 0:oh=(gs?"<":"(")+Xt[su]+(gs?">":")"),sh=Gi(ye),ih=Gu(Ke)}rh!==void 0&&rh[su]!==void 0&&(lh=rh[su]+` Tw
`),su===0?U.push(lh+im(sh,ih,ps)+oh):sm===0?U.push(lh+oh):sm===1&&U.push(lh+im(sh,ih,ps)+oh)}U=sm===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var $d=`BT
/`;return $d+=xe+" "+ze+` Tf
`,$d+=E(ze*xs)+` TL
`,$d+=pc+`
`,$d+=Ts,$d+=U,G($d+="ET"),h[xe]=!0,la};var gn=A.__private__.clip=A.clip=function(U){return G(U==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return gn("evenodd")},A.__private__.discardPath=A.discardPath=function(){return G("n"),this};var an=A.__private__.isValidStyle=function(U){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ye=!0),ye};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(U){return an(U)&&(u=U),this};var Ho=A.__private__.getStyle=A.getStyle=function(U){var ye=u;switch(U){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=U}return ye},si=A.close=function(){return G("h"),this};A.stroke=function(){return G("S"),this},A.fill=function(U){return pi("f",U),this},A.fillEvenOdd=function(U){return pi("f*",U),this},A.fillStroke=function(U){return pi("B",U),this},A.fillStrokeEvenOdd=function(U){return pi("B*",U),this};var pi=function(U,ye){xa(ye)==="object"?XA(ye,U):G(U)},Kl=function(U){U===null||w===b&&U===void 0||(U=Ho(U),G(U))};function If(U,ye,Ke,it,xt){var Kt=new Mm(ye||this.boundingBox,Ke||this.xStep,it||this.yStep,this.gState,xt||this.matrix);Kt.stream=this.stream;var Xt=U+"$$"+this.cloneIndex+++"$$";return He(Xt,Kt),Kt}var XA=function(U,ye){var Ke=ae[U.key],it=ke[Ke];if(it instanceof Kh)G("q"),G(Z0(ye)),it.gState&&A.setGState(it.gState),G(U.matrix.toString()+" cm"),G("/"+Ke+" sh"),G("Q");else if(it instanceof Mm){var xt=new te(1,0,0,-1,0,ru());U.matrix&&(xt=xt.multiply(U.matrix||$e),Ke=If.call(it,U.key,U.boundingBox,U.xStep,U.yStep,xt).id),G("q"),G("/Pattern cs"),G("/"+Ke+" scn"),it.gState&&A.setGState(it.gState),G(ye),G("Q")}},Z0=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Md=A.moveTo=function(U,ye){return G(E(D(U))+" "+E(J(ye))+" m"),this},ig=A.lineTo=function(U,ye){return G(E(D(U))+" "+E(J(ye))+" l"),this},po=A.curveTo=function(U,ye,Ke,it,xt,Kt){return G([E(D(U)),E(J(ye)),E(D(Ke)),E(J(it)),E(D(xt)),E(J(Kt)),"c"].join(" ")),this};A.__private__.line=A.line=function(U,ye,Ke,it,xt){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||isNaN(it)||!an(xt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[Ke-U,it-ye]],U,ye,[1,1],xt||"S"):this.lines([[Ke-U,it-ye]],U,ye,[1,1]).stroke()},A.__private__.lines=A.lines=function(U,ye,Ke,it,xt,Kt){var Xt,Ir,Dr,Xr,sn,Bn,ea,ps,la,js,gs,Ts;if(typeof U=="number"&&(Ts=Ke,Ke=ye,ye=U,U=Ts),it=it||[1,1],Kt=Kt||!1,isNaN(ye)||isNaN(Ke)||!Array.isArray(U)||!Array.isArray(it)||!an(xt)||typeof Kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Md(ye,Ke),Xt=it[0],Ir=it[1],Xr=U.length,js=ye,gs=Ke,Dr=0;Dr<Xr;Dr++)(sn=U[Dr]).length===2?(js=sn[0]*Xt+js,gs=sn[1]*Ir+gs,ig(js,gs)):(Bn=sn[0]*Xt+js,ea=sn[1]*Ir+gs,ps=sn[2]*Xt+js,la=sn[3]*Ir+gs,js=sn[4]*Xt+js,gs=sn[5]*Ir+gs,po(Bn,ea,ps,la,js,gs));return Kt&&si(),Kl(xt),this},A.path=function(U){for(var ye=0;ye<U.length;ye++){var Ke=U[ye],it=Ke.c;switch(Ke.op){case"m":Md(it[0],it[1]);break;case"l":ig(it[0],it[1]);break;case"c":po.apply(this,it);break;case"h":si()}}return this},A.__private__.rect=A.rect=function(U,ye,Ke,it,xt){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||isNaN(it)||!an(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(it=-it),G([E(D(U)),E(J(ye)),E(D(Ke)),E(D(it)),"re"].join(" ")),Kl(xt),this},A.__private__.triangle=A.triangle=function(U,ye,Ke,it,xt,Kt,Xt){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||isNaN(it)||isNaN(xt)||isNaN(Kt)||!an(Xt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-U,it-ye],[xt-Ke,Kt-it],[U-xt,ye-Kt]],U,ye,[1,1],Xt,!0),this},A.__private__.roundedRect=A.roundedRect=function(U,ye,Ke,it,xt,Kt,Xt){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||isNaN(it)||isNaN(xt)||isNaN(Kt)||!an(Xt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ir=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Ke),Kt=Math.min(Kt,.5*it),this.lines([[Ke-2*xt,0],[xt*Ir,0,xt,Kt-Kt*Ir,xt,Kt],[0,it-2*Kt],[0,Kt*Ir,-xt*Ir,Kt,-xt,Kt],[2*xt-Ke,0],[-xt*Ir,0,-xt,-Kt*Ir,-xt,-Kt],[0,2*Kt-it],[0,-Kt*Ir,xt*Ir,-Kt,xt,-Kt]],U+xt,ye,[1,1],Xt,!0),this},A.__private__.ellipse=A.ellipse=function(U,ye,Ke,it,xt){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||isNaN(it)||!an(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kt=4/3*(Math.SQRT2-1)*Ke,Xt=4/3*(Math.SQRT2-1)*it;return Md(U+Ke,ye),po(U+Ke,ye-Xt,U+Kt,ye-it,U,ye-it),po(U-Kt,ye-it,U-Ke,ye-Xt,U-Ke,ye),po(U-Ke,ye+Xt,U-Kt,ye+it,U,ye+it),po(U+Kt,ye+it,U+Ke,ye+Xt,U+Ke,ye),Kl(xt),this},A.__private__.circle=A.circle=function(U,ye,Ke,it){if(isNaN(U)||isNaN(ye)||isNaN(Ke)||!an(it))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ye,Ke,Ke,it)},A.setFont=function(U,ye,Ke){return Ke&&(ye=_(ye,Ke)),xe=Fn(U,ye,{disableWarning:!1}),this};var Jc=A.__private__.getFont=A.getFont=function(){return Ze[Fn.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var U,ye,Ke={};for(U in Je)if(Je.hasOwnProperty(U))for(ye in Ke[U]=[],Je[U])Je[U].hasOwnProperty(ye)&&Ke[U].push(ye);return Ke},A.addFont=function(U,ye,Ke,it,xt){var Kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Kt.indexOf(arguments[3])==-1&&(Ke=_(Ke,it)),Jt.call(this,U,ye,Ke,xt=xt||"Identity-H")};var Ld,YA=t.lineWidth||.200025,og=A.__private__.getLineWidth=A.getLineWidth=function(){return YA},Wr=A.__private__.setLineWidth=A.setLineWidth=function(U){return YA=U,G(E(D(U))+" w"),this};A.__private__.setLineDash=Br.API.setLineDash=Br.API.setLineDashPattern=function(U,ye){if(U=U||[],ye=ye||0,isNaN(ye)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ke){return E(D(Ke))}).join(" "),ye=E(D(ye)),G("["+U+"] "+ye+" d"),this};var Gv=A.__private__.getLineHeight=A.getLineHeight=function(){return ze*Ld};A.__private__.getLineHeight=A.getLineHeight=function(){return ze*Ld};var qv=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Ld=U),this},zv=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return Ld};qv(t.lineHeight);var Gi=A.__private__.getHorizontalCoordinate=function(U){return D(U)},Gu=A.__private__.getVerticalCoordinate=function(U){return w===b?U:Xe[F].mediaBox.topRightY-Xe[F].mediaBox.bottomLeftY-D(U)},Wv=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(U){return E(Gi(U))},JA=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(U){return E(Gu(U))},qu=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Ne(qu)},A.__private__.setStrokeColor=A.setDrawColor=function(U,ye,Ke,it){return qu=Te({ch1:U,ch2:ye,ch3:Ke,ch4:it,pdfColorType:"draw",precision:2}),G(qu),this};var ZA=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Ne(ZA)},A.__private__.setFillColor=A.setFillColor=function(U,ye,Ke,it){return ZA=Te({ch1:U,ch2:ye,ch3:Ke,ch4:it,pdfColorType:"fill",precision:2}),G(ZA),this};var pc=t.textColor||"0 g",Bf=A.__private__.getTextColor=A.getTextColor=function(){return Ne(pc)};A.__private__.setTextColor=A.setTextColor=function(U,ye,Ke,it){return pc=Te({ch1:U,ch2:ye,ch3:Ke,ch4:it,pdfColorType:"text",precision:3}),this};var Zc=t.charSpace,em=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Zc||0)};A.__private__.setCharSpace=A.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zc=U,this};var Ca=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(U){var ye=A.CapJoinStyles[U];if(ye===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ca=ye,G(ye+" J"),this};var tm=0;A.__private__.setLineJoin=A.setLineJoin=function(U){var ye=A.CapJoinStyles[U];if(ye===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tm=ye,G(ye+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(E(D(U))+" M"),this},A.GState=K2,A.setGState=function(U){(U=typeof U=="string"?De[We[U]]:lg(null,U)).equals(pt)||(G("/"+U.id+" gs"),pt=U)};var lg=function(U,ye){if(!U||!We[U]){var Ke=!1;for(var it in De)if(De.hasOwnProperty(it)&&De[it].equals(ye)){Ke=!0;break}if(Ke)ye=De[it];else{var xt="GS"+(Object.keys(De).length+1).toString(10);De[xt]=ye,ye.id=xt}return U&&(We[U]=ye.id),Rt.publish("addGState",ye),ye}};A.addGState=function(U,ye){return lg(U,ye),this},A.saveGraphicsState=function(){return G("q"),nt.push({key:xe,size:ze,color:pc}),this},A.restoreGraphicsState=function(){G("Q");var U=nt.pop();return xe=U.key,ze=U.size,pc=U.color,pt=null,this},A.setCurrentTransformationMatrix=function(U){return G(U.toString()+" cm"),this},A.comment=function(U){return G("#"+U),this};var eu=function(U,ye){var Ke=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function(Kt){isNaN(Kt)||(Ke=parseFloat(Kt))}});var it=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return it},set:function(Kt){isNaN(Kt)||(it=parseFloat(Kt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Kt){xt=Kt.toString()}}),this},eh=function(U,ye,Ke,it){eu.call(this,U,ye),this.type="rect";var xt=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(Xt){isNaN(Xt)||(xt=parseFloat(Xt))}});var Kt=it||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kt},set:function(Xt){isNaN(Xt)||(Kt=parseFloat(Xt))}}),this},Pf=function(){this.page=ct,this.currentPage=F,this.pages=K.slice(0),this.pagesContext=Xe.slice(0),this.x=oe,this.y=Be,this.matrix=Me,this.width=xl(F),this.height=cg(F),this.outputDestination=pe,this.id="",this.objectNumber=-1};Pf.prototype.restore=function(){ct=this.page,F=this.currentPage,Xe=this.pagesContext,K=this.pages,oe=this.x,Be=this.y,Me=this.matrix,rm(F,this.width),vl(F,this.height),pe=this.outputDestination};var Ud=function(U,ye,Ke,it,xt){Ue.push(new Pf),ct=F=0,K=[],oe=U,Be=ye,Me=xt,Vt([Ke,it])};for(var Qd in A.beginFormObject=function(U,ye,Ke,it,xt){return Ud(U,ye,Ke,it,xt),this},A.endFormObject=function(U){return function(ye){if(we[ye])Ue.pop().restore();else{var Ke=new Pf,it="Xo"+(Object.keys(L).length+1).toString(10);Ke.id=it,we[ye]=it,L[it]=Ke,Rt.publish("addFormObject",Ke),Ue.pop().restore()}}(U),this},A.doFormObject=function(U,ye){var Ke=L[we[U]];return G("q"),G(ye.toString()+" cm"),G("/"+Ke.id+" Do"),G("Q"),this},A.getFormObject=function(U){var ye=L[we[U]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},A.save=function(U,ye){return U=U||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(wm(vr(xr()),U),typeof wm.unload=="function"&&rn.setTimeout&&setTimeout(wm.unload,911),this):new Promise(function(Ke,it){try{var xt=wm(vr(xr()),U);typeof wm.unload=="function"&&rn.setTimeout&&setTimeout(wm.unload,911),Ke(xt)}catch(Kt){it(Kt.message)}})},Br.API)Br.API.hasOwnProperty(Qd)&&(Qd==="events"&&Br.API.events.length?function(U,ye){var Ke,it,xt;for(xt=ye.length-1;xt!==-1;xt--)Ke=ye[xt][0],it=ye[xt][1],U.subscribe.apply(U,[Ke].concat(typeof it=="function"?[it]:it))}(Rt,Br.API.events):A[Qd]=Br.API[Qd]);function xl(U){return Xe[U].mediaBox.topRightX-Xe[U].mediaBox.bottomLeftX}function rm(U,ye){Xe[U].mediaBox.topRightX=ye+Xe[U].mediaBox.bottomLeftX}function cg(U){return Xe[U].mediaBox.topRightY-Xe[U].mediaBox.bottomLeftY}function vl(U,ye){Xe[U].mediaBox.topRightY=ye+Xe[U].mediaBox.bottomLeftY}var tu=A.getPageWidth=function(U){return xl(U=U||F)/fe},th=A.setPageWidth=function(U,ye){rm(U,ye*fe)},ru=A.getPageHeight=function(U){return cg(U=U||F)/fe},nm=A.setPageHeight=function(U,ye){vl(U,ye*fe)};return A.internal={pdfEscape:Ot,getStyle:Ho,getFont:Jc,getFontSize:lt,getCharSpace:em,getTextColor:Bf,getLineHeight:Gv,getLineHeightFactor:zv,getLineWidth:og,write:ie,getHorizontalCoordinate:Gi,getVerticalCoordinate:Gu,getCoordinateString:Wv,getVerticalCoordinateString:JA,collections:{},newObject:mt,newAdditionalObject:ne,newObjectDeferred:rt,newObjectDeferredBegin:re,getFilters:tt,putStream:ot,events:Rt,scaleFactor:fe,pageSize:{getWidth:function(){return tu(F)},setWidth:function(U){th(F,U)},getHeight:function(){return ru(F)},setHeight:function(U){nm(F,U)}},encryptionOptions:d,encryption:or,getEncryptor:function(U){return d!==null?or.encryptor(U,0):function(ye){return ye}},output:fr,getNumberOfPages:Or,get pages(){return K},out:G,f2:S,f3:j,getPageInfo:rr,getPageInfoByObjId:gr,getCurrentPageInfo:Vr,getPDFVersion:p,Point:eu,Rectangle:eh,Matrix:te,hasHotfix:ir},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return tu(F)},set:function(U){th(F,U)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return ru(F)},set:function(U){nm(F,U)},enumerable:!0,configurable:!0}),(function(U){for(var ye=0,Ke=Re.length;ye<Ke;ye++){var it=Jt.call(this,U[ye][0],U[ye][1],U[ye][2],Re[ye][3],!0);f===!1&&(h[it]=!0);var xt=U[ye][0].split("-");zt({id:it,fontName:xt[0],fontStyle:xt[1]||""})}Rt.publish("addFonts",{fonts:Ze,dictionary:Je})}).call(A,Re),xe="F1",nr(a,r),Rt.publish("initialized"),A}Wg.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Wg.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wg.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Wg.prototype.processOwnerPassword=function(t,e){return OT(FT(e).substr(0,5),t)},Wg.prototype.encryptor=function(t,e){var r=FT(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return OT(r,n)}},K2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||xa(t)!==xa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Br.API={events:[]},Br.version="3.0.4";var Os=Br.API,_6=1,zp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},un=function(t){return t.toFixed(2)},bh=function(t){return t.toFixed(5)};Os.__acroform__={};var fc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},iQ=function(t){return t*_6},Yd=function(t){var e=new Oee,r=kr.internal.getHeight(t)||0,n=kr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(un(n)),Number(un(r))],e},SEe=Os.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},IEe=Os.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},BEe=Os.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Zs=Os.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BEe(t,e-1)},ei=Os.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SEe(t,e-1)},ti=Os.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return IEe(t,e-1)},PEe=Os.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(un(c.lowerLeft_X)),Number(un(c.lowerLeft_Y)),Number(un(c.upperRight_X)),Number(un(c.upperRight_Y))]},jEe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=DT(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+un(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Yd(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},DT=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(S){return S.split(`
`)}):a.map(function(S){return[S]});var s=r,i=kr.internal.getHeight(t)||0;i=i<0?-i:i;var l=kr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(S,j,D){if(S+1<a.length){var J=j+" "+a[S+1][0];return XN(J,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=XN("3",t,s).height,h=t.multiline?i-s:(i-f)/2,A=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+XN(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var B=parseInt(b),P=c(B,x,s),_=b>=a.length-1;if(P&&!_){x+=" ",g=0;continue}if(P||_){if(_)p=B;else if(t.multiline&&(f+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>i)continue e;p=B}}for(var E="",I=m;I<=p;I++){var O=a[I];if(t.multiline){if(I===p){E+=O[g]+" ",g=(g+1)%O.length;continue}if(I===m){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=XN(E,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=un(u)+" "+un(A)+` Td
`,e+="("+zp(E)+`) Tj
`,e+=-un(u)+` 0 Td
`,A=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},XN=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},TEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kEe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},FEe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Od.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(TEe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Dee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&kEe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=PEe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=kr.createDefaultAppearanceStream(l),xa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=jEe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var A=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var i in A)if(A.hasOwnProperty(i)){var m=A[i];typeof m=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=A)=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),xa(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Fee=Os.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),xa(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+zp(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},pB=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+zp(n(t))+")"},sf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sf.prototype.toString=function(){return this.objId+" 0 R"},sf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},sf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:Fee(a,this.objId,this.scope)}):a instanceof sf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var Oee=function(){sf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};fc(Oee,sf);var Dee=function(){sf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zp(r(t))+")"}},set:function(r){t=r}})};fc(Dee,sf);var Od=function t(){sf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zs(e,3)},set:function(x){x?this.F=ei(e,3):this.F=ti(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof UE)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+zp(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/_6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof UE||this instanceof g0))return pB(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Si==0?pB(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Si==0?x.substr(0,1)==="("?Eg(x.substr(1,x.length-2)):Eg(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Si==1?Eg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Si==1?"/"+x:x}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Si==0?pB(A,this.objId,this.scope):A},set:function(x){x=x.toString(),A=this instanceof Si==0?x.substr(0,1)==="("?Eg(x.substr(1,x.length-2)):Eg(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Si==1?Eg(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof Si==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,1)},set:function(x){x?this.Ff=ei(this.Ff,1):this.Ff=ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,2)},set:function(x){x?this.Ff=ei(this.Ff,2):this.Ff=ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,3)},set:function(x){x?this.Ff=ei(this.Ff,3):this.Ff=ti(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};fc(Od,sf);var Wm=function(){Od.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Fee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,18)},set:function(r){r?this.Ff=ei(this.Ff,18):this.Ff=ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ei(this.Ff,19):this.Ff=ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,20)},set:function(r){r?(this.Ff=ei(this.Ff,20),e.sort()):this.Ff=ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,22)},set:function(r){r?this.Ff=ei(this.Ff,22):this.Ff=ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,23)},set:function(r){r?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,27)},set:function(r){r?this.Ff=ei(this.Ff,27):this.Ff=ti(this.Ff,27)}}),this.hasAppearanceStream=!1};fc(Wm,Od);var Xm=function(){Wm.call(this),this.fontName="helvetica",this.combo=!1};fc(Xm,Wm);var Ym=function(){Xm.call(this),this.combo=!0};fc(Ym,Xm);var Ky=function(){Ym.call(this),this.edit=!0};fc(Ky,Ym);var Si=function(){Od.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,15)},set:function(r){r?this.Ff=ei(this.Ff,15):this.Ff=ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,16)},set:function(r){r?this.Ff=ei(this.Ff,16):this.Ff=ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,17)},set:function(r){r?this.Ff=ei(this.Ff,17):this.Ff=ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,26)},set:function(r){r?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+zp(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){xa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};fc(Si,Od);var Gy=function(){Si.call(this),this.pushButton=!0};fc(Gy,Si);var Jm=function(){Si.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};fc(Jm,Si);var UE=function(){var t,e;Od.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+zp(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){xa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fc(UE,Od),Jm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Jm.prototype.createOption=function(t){var e=new UE;return e.Parent=this,e.optionName=t,this.Kids.push(e),OEe.call(this.scope,e),e};var qy=function(){Si.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kr.CheckBox.createAppearanceStream()};fc(qy,Si);var g0=function(){Od.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,13)},set:function(e){e?this.Ff=ei(this.Ff,13):this.Ff=ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,21)},set:function(e){e?this.Ff=ei(this.Ff,21):this.Ff=ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,23)},set:function(e){e?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,24)},set:function(e){e?this.Ff=ei(this.Ff,24):this.Ff=ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,25)},set:function(e){e?this.Ff=ei(this.Ff,25):this.Ff=ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,26)},set:function(e){e?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fc(g0,Od);var zy=function(){g0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,14)},set:function(t){t?this.Ff=ei(this.Ff,14):this.Ff=ti(this.Ff,14)}}),this.password=!0};fc(zy,g0);var kr={CheckBox:{createAppearanceStream:function(){return{N:{On:kr.CheckBox.YesNormal},D:{On:kr.CheckBox.YesPushDown,Off:kr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=DT(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+un(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Yd(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=kr.internal.getHeight(t),i=kr.internal.getWidth(t),l=DT(t,t.caption);return a.push("1 g"),a.push("0 0 "+un(i)+" "+un(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+un(i-1)+" "+un(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+un(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:kr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=kr.RadioButton.Circle.YesNormal,e.D[t]=kr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Yd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=kr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+bh(kr.internal.getWidth(t)/2)+" "+bh(kr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*kr.internal.Bezier_C).toFixed(5)),i=Number((n*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+bh(kr.internal.getWidth(t)/2)+" "+bh(kr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+bh(kr.internal.getWidth(t)/2)+" "+bh(kr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+bh(kr.internal.getWidth(t)/2)+" "+bh(kr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:kr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=kr.RadioButton.Cross.YesNormal,e.D[t]=kr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Yd(t);e.scope=t.scope;var r=[],n=kr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+un(kr.internal.getWidth(t)-2)+" "+un(kr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(un(n.x1.x)+" "+un(n.x1.y)+" m"),r.push(un(n.x2.x)+" "+un(n.x2.y)+" l"),r.push(un(n.x4.x)+" "+un(n.x4.y)+" m"),r.push(un(n.x3.x)+" "+un(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=kr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+un(kr.internal.getWidth(t)-2)+" "+un(kr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(un(r.x1.x)+" "+un(r.x1.y)+" m"),n.push(un(r.x2.x)+" "+un(r.x2.y)+" l"),n.push(un(r.x4.x)+" "+un(r.x4.y)+" m"),n.push(un(r.x3.x)+" "+un(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Yd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};kr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=kr.internal.getWidth(t),r=kr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},kr.internal.getWidth=function(t){var e=0;return xa(t)==="object"&&(e=iQ(t.Rect[2])),e},kr.internal.getHeight=function(t){var e=0;return xa(t)==="object"&&(e=iQ(t.Rect[3])),e};var OEe=Os.addField=function(t){if(FEe(this,t),!(t instanceof Od))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Os.AcroFormChoiceField=Wm,Os.AcroFormListBox=Xm,Os.AcroFormComboBox=Ym,Os.AcroFormEditBox=Ky,Os.AcroFormButton=Si,Os.AcroFormPushButton=Gy,Os.AcroFormRadioButton=Jm,Os.AcroFormCheckBox=qy,Os.AcroFormTextField=g0,Os.AcroFormPasswordField=zy,Os.AcroFormAppearance=kr,Os.AcroForm={ChoiceField:Wm,ListBox:Xm,ComboBox:Ym,EditBox:Ky,Button:Si,PushButton:Gy,RadioButton:Jm,CheckBox:qy,TextField:g0,PasswordField:zy,Appearance:kr},Br.AcroForm={ChoiceField:Wm,ListBox:Xm,ComboBox:Ym,EditBox:Ky,Button:Si,PushButton:Gy,RadioButton:Jm,CheckBox:qy,TextField:g0,PasswordField:zy,Appearance:kr};var DEe=Br.AcroForm;function Ree(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(S,j){var D,J,ge,se,he,me=r;if((j=j||r)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(P(S))for(he in n)for(ge=n[he],D=0;D<ge.length;D+=1){for(se=!0,J=0;J<ge[D].length;J+=1)if(ge[D][J]!==void 0&&ge[D][J]!==S[J]){se=!1;break}if(se===!0){me=he;break}}else for(he in n)for(ge=n[he],D=0;D<ge.length;D+=1){for(se=!0,J=0;J<ge[D].length;J+=1)if(ge[D][J]!==void 0&&ge[D][J]!==S.charCodeAt(J)){se=!1;break}if(se===!0){me=he;break}}return me===r&&j!==r&&(me=j),me},s=function S(j){for(var D=this.internal.write,J=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:j.width}),se.push({key:"Height",value:j.height}),j.colorSpace===x.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===x.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)&&j.transparency.length>0){for(var he="",me=0,Z=j.transparency.length;me<Z;me++)he+=j.transparency[me]+" "+j.transparency[me]+" ";se.push({key:"Mask",value:"["+he+"]"})}j.sMask!==void 0&&se.push({key:"SMask",value:j.objectId+1+" 0 R"});var ve=j.filter!==void 0?["/"+j.filter]:void 0;if(J({data:j.data,additionalKeyValues:se,alreadyAppliedFilters:ve,objectId:j.objectId}),D("endobj"),"sMask"in j&&j.sMask!==void 0){var Se,k=(Se=j.sMaskBitsPerComponent)!==null&&Se!==void 0?Se:j.bitsPerComponent,F={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:j.sMask};"filter"in j&&(F.decodeParameters="/Predictor ".concat(j.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(j.width),F.filter=j.filter),S.call(this,F)}if(j.colorSpace===x.INDEXED){var H=this.internal.newObject();J({data:E(new Uint8Array(j.palette)),objectId:H}),D("endobj")}},i=function(){var S=this.internal.collections[e+"images"];for(var j in S)s.call(this,S[j])},l=function(){var S,j=this.internal.collections[e+"images"],D=this.internal.write;for(var J in j)D("/I"+(S=j[J]).index,S.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var S=this.internal.collections[e+"images"];return c.call(this),S},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(S){return typeof t["process"+S.toUpperCase()]=="function"},h=function(S){return xa(S)==="object"&&S.nodeType===1},A=function(S,j){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var D=""+S.getAttribute("src");if(D.indexOf("data:image/")===0)return E_(unescape(D).split("base64,").pop());var J=t.loadFile(D,!0);if(J!==void 0)return J}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ge;switch(j){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return E_(S.toDataURL(ge,1).split("base64,").pop())}},m=function(S){var j=this.internal.collections[e+"images"];if(j){for(var D in j)if(S===j[D].alias)return j[D]}},p=function(S,j,D){return S||j||(S=-96,j=-96),S<0&&(S=-1*D.width*72/S/this.internal.scaleFactor),j<0&&(j=-1*D.height*72/j/this.internal.scaleFactor),S===0&&(S=j*D.width/D.height),j===0&&(j=S*D.height/D.width),[S,j]},g=function(S,j,D,J,ge,se){var he=p.call(this,D,J,ge),me=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,ve=u.call(this);if(D=he[0],J=he[1],ve[ge.index]=ge,se){se*=Math.PI/180;var Se=Math.cos(se),k=Math.sin(se),F=function(Q){return Q.toFixed(4)},H=[F(Se),F(k),F(-1*k),F(Se),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,me(S),Z(j+J),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([me(D),"0","0",me(J),"0","0","cm"].join(" "))):this.internal.write([me(D),"0","0",me(J),me(S),Z(j+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(S){var j,D,J=0;if(typeof S=="string")for(D=S.length,j=0;j<D;j++)J=(J<<5)-J+S.charCodeAt(j),J|=0;else if(P(S))for(D=S.byteLength/2,j=0;j<D;j++)J=(J<<5)-J+S[j],J|=0;return J},w=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var j=!0;return S.length===0&&(j=!1),S.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(j=!1),j},B=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var j=S.indexOf(",");return j<0?null:S.substring(0,j).trim().endsWith("base64")?S.substring(j+1):null};t.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(S){for(var j=S.length,D=new Uint8Array(j),J=0;J<j;J++)D[J]=S.charCodeAt(J);return D},E=t.__addimage__.arrayBufferToBinaryString=function(S){for(var j="",D=P(S)?S:new Uint8Array(S),J=0;J<D.length;J+=8192)j+=String.fromCharCode.apply(null,D.subarray(J,J+8192));return j};t.addImage=function(){var S,j,D,J,ge,se,he,me,Z;if(typeof arguments[1]=="number"?(j=r,D=arguments[1],J=arguments[2],ge=arguments[3],se=arguments[4],he=arguments[5],me=arguments[6],Z=arguments[7]):(j=arguments[1],D=arguments[2],J=arguments[3],ge=arguments[4],se=arguments[5],he=arguments[6],me=arguments[7],Z=arguments[8]),xa(S=arguments[0])==="object"&&!h(S)&&"imageData"in S){var ve=S;S=ve.imageData,j=ve.format||j||r,D=ve.x||D||0,J=ve.y||J||0,ge=ve.w||ve.width||ge,se=ve.h||ve.height||se,he=ve.alias||he,me=ve.compression||me,Z=ve.rotation||ve.angle||Z}var Se=this.internal.getFilters();if(me===void 0&&Se.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(D)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=I.call(this,S,j,he,me);return g.call(this,D,J,ge,se,k,Z),this};var I=function(S,j,D,J){var ge,se,he;if(typeof S=="string"&&a(S)===r){S=unescape(S);var me=O(S,!1);(me!==""||(me=t.loadFile(S,!0))!==void 0)&&(S=me)}if(h(S)&&(S=A(S,j)),j=a(S,j),!f(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((he=D)==null||he.length===0)&&(D=function(Z){return typeof Z=="string"||P(Z)?b(Z):P(Z.data)?b(Z.data):null}(S)),(ge=m.call(this,D))||(S instanceof Uint8Array||j==="RGBA"||(se=S,S=_(S)),ge=this["process"+j.toUpperCase()](S,d.call(this),D,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in t.image_compression?Z:y.NONE}(J),se)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},O=t.__addimage__.convertBase64ToBinaryString=function(S,j){j=typeof j!="boolean"||j;var D,J="";if(typeof S=="string"){var ge;D=(ge=B(S))!==null&&ge!==void 0?ge:S;try{J=E_(D)}catch(se){if(j)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(S){var j,D,J="";if(h(S)&&(S=A(S)),typeof S=="string"&&a(S)===r&&((J=O(S,!1))===""&&(J=t.loadFile(S)||""),S=J),D=a(S),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(S instanceof Uint8Array||(S=_(S)),!(j=this["process"+D.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=D,j}})(Br.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Br.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var A=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+A(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+A(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+A(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+A(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var P=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Br.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&l(g)||l(p)&&!i(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&i(g)&&!l(g)&&i(x)&&u(x)?3:l(p)||!i(x)?1:2:-1},A=function(p){var g=0,x=0,y=0,b="",w="",B="",P=(p=p||"").split("\\s+"),_=[];for(g=0;g<P.length;g+=1){for(_.push(""),x=0;x<P[g].length;x+=1)b=P[g][x],w=P[g][x-1],B=P[g][x+1],i(b)?(y=h(b,w,B),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([A(g[y][0]),g[y][1],g[y][2]]):x.push([A(g[y])]);p=x}else p=A(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Br.API),Br.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Br.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,A=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)A<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(A=p);return A!==0&&(m=c.length),{w:A/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,A&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var A,m,p,g,x=[],y=[],b=[],w={},B={},P=[],_=[],E=(h=h||{}).autoSize||!1,I=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,S=h.margins||Object.assign({width:this.getPageWidth()},e),j=typeof h.padding=="number"?h.padding:3,D=h.headerBackgroundColor||"#c8c8c8",J=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=J,this.setFontSize(O),f==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&xa(f[0])==="object")for(x=f.map(function(ve){return ve.name}),y=f.map(function(ve){return ve.prompt||ve.name||""}),b=f.map(function(ve){return ve.align||"left"}),A=0;A<f.length;A+=1)B[f[A].name]=.7499990551181103*f[A].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=x=f,b=x.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(A=0;A<x.length;A+=1){for(w[g=x[A]]=d.map(function(ve){return ve[g]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(y[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)P.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[g]=Math.max.apply(null,P)+j+j,P=[]}if(I){var ge={};for(A=0;A<x.length;A+=1)ge[x[A]]={},ge[x[A]].text=y[A],ge[x[A]].align=b[A];var se=l.call(this,ge,B);_=x.map(function(ve){return new s(c,u,B[ve],se,ge[ve].text,void 0,ge[ve].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var he=f.reduce(function(ve,Se){return ve[Se.name]=Se.align,ve},{});for(A=0;A<d.length;A+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:A,data:d[A]},this);var me=l.call(this,d[A],B);for(p=0;p<x.length;p+=1){var Z=d[A][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:A,col:p,data:Z},this),i.call(this,new s(c,u,B[x[p]],me,Z,A+2,he[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(A){var m=c[A];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[A]-d-d)},this).map(function(A){return this.getLineHeightFactor()*A.length*f/h+d+d},this).reduce(function(A,m){return Math.max(A,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){d=this.internal.__cell__.tableHeaderRow[A].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Br.API);var Mee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Lee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],RT=Ree(Lee),Uee=[100,200,300,400,500,600,700,800,900],REe=Ree(Uee);function gB(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Mee[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof RT[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function oQ(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var MEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function uQ(t){return t.trimLeft()}function LEe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function UEe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var YN,dQ,fQ,Sg,JN,AQ,hQ,mQ,xB=["times"];function pQ(t,e,r,n,a){var s=4,i=xQ;switch(a){case Br.API.image_compression.FAST:s=1,i=gQ;break;case Br.API.image_compression.MEDIUM:s=6,i=vQ;break;case Br.API.image_compression.SLOW:s=9,i=yQ}t=function(c,u,d,f){for(var h,A=c.length/u,m=new Uint8Array(c.length+A),p=[QEe,gQ,xQ,vQ,yQ],g=0;g<A;g+=1){var x=g*u,y=c.subarray(x,x+u);if(f)m.set(f(y,d,h),x+g);else{for(var b=p.length,w=[],B=0;B<b;B+=1)w[B]=p[B](y,d,h);var P=HEe(w.concat());m.set(w[P],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var l=PT(t,{level:s});return Br.API.__addimage__.arrayBufferToBinaryString(l)}function QEe(t){var e=Array.apply([],t);return e.unshift(0),e}function gQ(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function xQ(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function vQ(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(i+l>>>1)&255}return a}function yQ(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=VEe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function VEe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function HEe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function vB(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return Qee(t,a)>>s&i}function bQ(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<i;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(t,s,Qee(t,s)&~(l<<i)&65535|c)}function Qee(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function $Ee(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=i,e+=3*i);var u=!0,d=[],f=0,h=null,A=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],B=w>>6&1,P=1<<1+(7&w),_=l,E=c,I=!1;w>>7&&(I=!0,_=e,E=P,e+=3*P);var O=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}d.push({x:g,y:x,width:y,height:b,has_local_palette:I,palette_offset:_,palette_size:E,data_offset:O,data_length:e-O,transparent_index:h,interlaced:!!B,delay:f,disposal:A});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(j){if(j<0||j>=d.length)throw new Error("Frame index out of range.");return d[j]},this.decodeAndBlitFrameBGRA=function(j,D){var J=this.frameInfo(j),ge=J.width*J.height,se=new Uint8Array(ge);wQ(t,J.data_offset,se,ge);var he=J.palette_offset,me=J.transparent_index;me===null&&(me=256);var Z=J.width,ve=r-Z,Se=Z,k=4*(J.y*r+J.x),F=4*((J.y+J.height)*r+J.x),H=k,Q=4*ve;J.interlaced===!0&&(Q+=4*r*7);for(var V=8,Y=0,R=se.length;Y<R;++Y){var z=se[Y];if(Se===0&&(Se=Z,(H+=Q)>=F&&(Q=4*ve+4*r*(V-1),H=k+(Z+ve)*(V<<1),V>>=1)),z===me)H+=4;else{var le=t[he+3*z],K=t[he+3*z+1],M=t[he+3*z+2];D[H++]=M,D[H++]=K,D[H++]=le,D[H++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(j,D){var J=this.frameInfo(j),ge=J.width*J.height,se=new Uint8Array(ge);wQ(t,J.data_offset,se,ge);var he=J.palette_offset,me=J.transparent_index;me===null&&(me=256);var Z=J.width,ve=r-Z,Se=Z,k=4*(J.y*r+J.x),F=4*((J.y+J.height)*r+J.x),H=k,Q=4*ve;J.interlaced===!0&&(Q+=4*r*7);for(var V=8,Y=0,R=se.length;Y<R;++Y){var z=se[Y];if(Se===0&&(Se=Z,(H+=Q)>=F&&(Q=4*ve+4*r*(V-1),H=k+(Z+ve)*(V<<1),V>>=1)),z===me)H+=4;else{var le=t[he+3*z],K=t[he+3*z+1],M=t[he+3*z+2];D[H++]=le,D[H++]=K,D[H++]=M,D[H++]=255}--Se}}}function wQ(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,A=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&A!==0;)f|=t[e++]<<d,d+=8,A===1?A=t[e++]:--A;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void Ta.log("Warning, gif stream longer than expected.");r[h++]=w;var B=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--B]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&Ta.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yB(t){var e,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),A=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),B=new Array(256),P=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(k,F){for(var H=0,Q=0,V=new Array,Y=1;Y<=16;Y++){for(var R=1;R<=k[Y];R++)V[F[Q]]=[],V[F[Q]][0]=H,V[F[Q]][1]=Y,Q++,H++;H*=2}return V}function he(k){for(var F=k[0],H=k[1]-1;H>=0;)F&1<<H&&(g|=1<<x),H--,--x<0&&(g==255?(me(255),me(0)):me(g),x=7,g=0)}function me(k){p.push(k)}function Z(k){me(k>>8&255),me(255&k)}function ve(k,F,H,Q,V){for(var Y,R=V[0],z=V[240],le=function(ze,st){var lt,_t,bt,St,kt,et,ce,Qe,xe,fe,oe=0;for(xe=0;xe<8;++xe){lt=ze[oe],_t=ze[oe+1],bt=ze[oe+2],St=ze[oe+3],kt=ze[oe+4],et=ze[oe+5],ce=ze[oe+6];var Be=lt+(Qe=ze[oe+7]),Me=lt-Qe,Ze=_t+ce,Je=_t-ce,nt=bt+et,ke=bt-et,ae=St+kt,De=St-kt,We=Be+ae,pt=Be-ae,ct=Ze+nt,Xe=Ze-nt;ze[oe]=We+ct,ze[oe+4]=We-ct;var Rt=.707106781*(Xe+pt);ze[oe+2]=pt+Rt,ze[oe+6]=pt-Rt;var er=.382683433*((We=De+ke)-(Xe=Je+Me)),L=.5411961*We+er,we=1.306562965*Xe+er,Ue=.707106781*(ct=ke+Je),te=Me+Ue,Ce=Me-Ue;ze[oe+5]=Ce+L,ze[oe+3]=Ce-L,ze[oe+1]=te+we,ze[oe+7]=te-we,oe+=8}for(oe=0,xe=0;xe<8;++xe){lt=ze[oe],_t=ze[oe+8],bt=ze[oe+16],St=ze[oe+24],kt=ze[oe+32],et=ze[oe+40],ce=ze[oe+48];var $e=lt+(Qe=ze[oe+56]),He=lt-Qe,Ye=_t+ce,mt=_t-ce,rt=bt+et,re=bt-et,ne=St+kt,Ae=St-kt,ue=$e+ne,Ne=$e-ne,Te=Ye+rt,tt=Ye-rt;ze[oe]=ue+Te,ze[oe+32]=ue-Te;var ot=.707106781*(tt+Ne);ze[oe+16]=Ne+ot,ze[oe+48]=Ne-ot;var vt=.382683433*((ue=Ae+re)-(tt=mt+He)),yt=.5411961*ue+vt,Et=1.306562965*tt+vt,Ee=.707106781*(Te=re+mt),ut=He+Ee,Nt=He-Ee;ze[oe+40]=Nt+yt,ze[oe+24]=Nt-yt,ze[oe+8]=ut+Et,ze[oe+56]=ut-Et,oe++}for(xe=0;xe<64;++xe)fe=ze[xe]*st[xe],A[xe]=fe>0?fe+.5|0:fe-.5|0;return A}(k,F),K=0;K<64;++K)m[_[K]]=le[K];var M=m[0]-H;H=m[0],M==0?he(Q[0]):(he(Q[h[Y=32767+M]]),he(f[Y]));for(var pe=63;pe>0&&m[pe]==0;)pe--;if(pe==0)return he(R),H;for(var X,G=1;G<=pe;){for(var ie=G;m[G]==0&&G<=pe;)++G;var Ie=G-ie;if(Ie>=16){X=Ie>>4;for(var Re=1;Re<=X;++Re)he(z);Ie&=15}Y=32767+m[G],he(V[(Ie<<4)+h[Y]]),he(f[Y]),G++}return pe!=63&&he(R),H}function Se(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(F){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var V=i((H[Q]*F+50)/100);V=Math.min(Math.max(V,1),255),l[_[Q]]=V}for(var Y=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var z=i((Y[R]*F+50)/100);z=Math.min(Math.max(z,1),255),c[_[R]]=z}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],K=0,M=0;M<8;M++)for(var pe=0;pe<8;pe++)u[K]=1/(l[_[K]]*le[M]*le[pe]*8),d[K]=1/(c[_[K]]*le[M]*le[pe]*8),K++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,F){F&&Se(F),p=new Array,g=0,x=7,Z(65496),Z(65504),Z(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Z(1),Z(1),me(0),me(0),function(){Z(65499),Z(132),me(0);for(var _t=0;_t<64;_t++)me(l[_t]);me(1);for(var bt=0;bt<64;bt++)me(c[bt])}(),function(_t,bt){Z(65472),Z(17),me(8),Z(bt),Z(_t),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)}(k.width,k.height),function(){Z(65476),Z(418),me(0);for(var _t=0;_t<16;_t++)me(E[_t+1]);for(var bt=0;bt<=11;bt++)me(I[bt]);me(16);for(var St=0;St<16;St++)me(O[St+1]);for(var kt=0;kt<=161;kt++)me(S[kt]);me(1);for(var et=0;et<16;et++)me(j[et+1]);for(var ce=0;ce<=11;ce++)me(D[ce]);me(17);for(var Qe=0;Qe<16;Qe++)me(J[Qe+1]);for(var xe=0;xe<=161;xe++)me(ge[xe])}(),Z(65498),Z(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var H=0,Q=0,V=0;g=0,x=7,this.encode.displayName="_encode_";for(var Y,R,z,le,K,M,pe,X,G,ie=k.data,Ie=k.width,Re=k.height,ze=4*Ie,st=0;st<Re;){for(Y=0;Y<ze;){for(K=ze*st+Y,pe=-1,X=0,G=0;G<64;G++)M=K+(X=G>>3)*ze+(pe=4*(7&G)),st+X>=Re&&(M-=ze*(st+1+X-Re)),Y+pe>=ze&&(M-=Y+pe-ze+4),R=ie[M++],z=ie[M++],le=ie[M++],y[G]=(P[R]+P[z+256|0]+P[le+512|0]>>16)-128,b[G]=(P[R+768|0]+P[z+1024|0]+P[le+1280|0]>>16)-128,w[G]=(P[R+1280|0]+P[z+1536|0]+P[le+1792|0]>>16)-128;H=ve(y,u,H,e,n),Q=ve(b,d,Q,r,a),V=ve(w,d,V,r,a),Y+=32}st+=8}if(x>=0){var lt=[];lt[1]=x+1,lt[0]=(1<<x+1)-1,he(lt)}return Z(65497),new Uint8Array(p)},t=t||50,function(){for(var k=String.fromCharCode,F=0;F<256;F++)B[F]=k(F)}(),e=se(E,I),r=se(j,D),n=se(O,S),a=se(J,ge),function(){for(var k=1,F=2,H=1;H<=15;H++){for(var Q=k;Q<F;Q++)h[32767+Q]=H,f[32767+Q]=[],f[32767+Q][1]=H,f[32767+Q][0]=Q;for(var V=-(F-1);V<=-k;V++)h[32767+V]=H,f[32767+V]=[],f[32767+V][1]=H,f[32767+V][0]=F-1+V;k<<=1,F<<=1}}(),function(){for(var k=0;k<256;k++)P[k]=19595*k,P[k+256|0]=38470*k,P[k+512|0]=7471*k+32768,P[k+768|0]=-11059*k,P[k+1024|0]=-21709*k,P[k+1280|0]=32768*k+8421375,P[k+1536|0]=-27439*k,P[k+1792|0]=-5329*k}(),Se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function NQ(t){function e(I){if(!I)throw Error("assert :P")}function r(I,O,S){for(var j=0;4>j;j++)if(I[O+j]!=S.charCodeAt(j))return!0;return!1}function n(I,O,S,j,D){for(var J=0;J<D;J++)I[O+J]=S[j+J]}function a(I,O,S,j){for(var D=0;D<j;D++)I[O+D]=S}function s(I){return new Int32Array(I)}function i(I,O){for(var S=[],j=0;j<I;j++)S.push(new O);return S}function l(I,O){var S=[];return function j(D,J,ge){for(var se=ge[J],he=0;he<se&&(D.push(ge.length>J+1?[]:new O),!(ge.length<J+1));he++)j(D[he],J+1,ge)}(S,0,I),S}var c=function(){var I=this;function O(N,T){for(var q=1<<T-1>>>0;N&q;)q>>>=1;return q?(N&q-1)+q:N}function S(N,T,q,ee,be){e(!(ee%q));do N[T+(ee-=q)]=be;while(0<ee)}function j(N,T,q,ee,be){if(e(2328>=be),512>=be)var _e=s(512);else if((_e=s(be))==null)return 0;return function(Pe,Fe,Le,Ge,dt,Pt){var qe,ht,Ct=Fe,Ut=1<<Le,Bt=s(16),Gt=s(16);for(e(dt!=0),e(Ge!=null),e(Pe!=null),e(0<Le),ht=0;ht<dt;++ht){if(15<Ge[ht])return 0;++Bt[Ge[ht]]}if(Bt[0]==dt)return 0;for(Gt[1]=0,qe=1;15>qe;++qe){if(Bt[qe]>1<<qe)return 0;Gt[qe+1]=Gt[qe]+Bt[qe]}for(ht=0;ht<dt;++ht)qe=Ge[ht],0<Ge[ht]&&(Pt[Gt[qe]++]=ht);if(Gt[15]==1)return(Ge=new D).g=0,Ge.value=Pt[0],S(Pe,Ct,1,Ut,Ge),Ut;var qt,ar=-1,Zt=Ut-1,Hr=0,Tr=1,hn=1,Mr=1<<Le;for(ht=0,qe=1,dt=2;qe<=Le;++qe,dt<<=1){if(Tr+=hn<<=1,0>(hn-=Bt[qe]))return 0;for(;0<Bt[qe];--Bt[qe])(Ge=new D).g=qe,Ge.value=Pt[ht++],S(Pe,Ct+Hr,dt,Mr,Ge),Hr=O(Hr,qe)}for(qe=Le+1,dt=2;15>=qe;++qe,dt<<=1){if(Tr+=hn<<=1,0>(hn-=Bt[qe]))return 0;for(;0<Bt[qe];--Bt[qe]){if(Ge=new D,(Hr&Zt)!=ar){for(Ct+=Mr,qt=1<<(ar=qe)-Le;15>ar&&!(0>=(qt-=Bt[ar]));)++ar,qt<<=1;Ut+=Mr=1<<(qt=ar-Le),Pe[Fe+(ar=Hr&Zt)].g=qt+Le,Pe[Fe+ar].value=Ct-Fe-ar}Ge.g=qe-Le,Ge.value=Pt[ht++],S(Pe,Ct+(Hr>>Le),dt,Mr,Ge),Hr=O(Hr,qe)}}return Tr!=2*Gt[15]-1?0:Ut}(N,T,q,ee,be,_e)}function D(){this.value=this.g=0}function J(){this.value=this.g=0}function ge(){this.G=i(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(am,J)}function se(N,T,q,ee){e(N!=null),e(T!=null),e(2147483648>ee),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=T,N.pa=q,N.Jd=T,N.Yc=q+ee,N.Zc=4<=ee?q+ee-4+1:q,R(N)}function he(N,T){for(var q=0;0<T--;)q|=le(N,128)<<T;return q}function me(N,T){var q=he(N,T);return z(N)?-q:q}function Z(N,T,q,ee){var be,_e=0;for(e(N!=null),e(T!=null),e(4294967288>ee),N.Sb=ee,N.Ra=0,N.u=0,N.h=0,4<ee&&(ee=4),be=0;be<ee;++be)_e+=T[q+be]<<8*be;N.Ra=_e,N.bb=ee,N.oa=T,N.pa=q}function ve(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<nh-8>>>0,++N.bb,N.u-=8;Q(N)&&(N.h=1,N.u=0)}function Se(N,T){if(e(0<=T),!N.h&&T<=vc){var q=H(N)&xc[T];return N.u+=T,ve(N),q}return N.h=1,N.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(N){return N.Ra>>>(N.u&nh-1)>>>0}function Q(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>nh}function V(N,T){N.u=T,N.h=Q(N)}function Y(N){N.u>=jf&&(e(N.u>=jf),ve(N))}function R(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function z(N){return he(N,1)}function le(N,T){var q=N.Ca;0>N.b&&R(N);var ee=N.b,be=q*T>>>8,_e=(N.I>>>ee>be)+0;for(_e?(q-=be,N.I-=be+1<<ee>>>0):q=be+1,ee=q,be=0;256<=ee;)be+=8,ee>>=8;return ee=7^be+ah[ee],N.b-=ee,N.Ca=(q<<ee)-1,_e}function K(N,T,q){N[T+0]=q>>24&255,N[T+1]=q>>16&255,N[T+2]=q>>8&255,N[T+3]=255&q}function M(N,T){return N[T+0]|N[T+1]<<8}function pe(N,T){return M(N,T)|N[T+2]<<16}function X(N,T){return M(N,T)|M(N,T+2)<<16}function G(N,T){var q=1<<T;return e(N!=null),e(0<T),N.X=s(q),N.X==null?0:(N.Mb=32-T,N.Xa=T,1)}function ie(N,T){e(N!=null),e(T!=null),e(N.Xa==T.Xa),n(T.X,0,N.X,0,1<<T.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function Re(N,T,q,ee){e(q!=null),e(ee!=null);var be=q[0],_e=ee[0];return be==0&&(be=(N*_e+T/2)/T),_e==0&&(_e=(T*be+N/2)/N),0>=be||0>=_e?0:(q[0]=be,ee[0]=_e,1)}function ze(N,T){return N+(1<<T)-1>>>T}function st(N,T){return((4278255360&N)+(4278255360&T)>>>0&4278255360)+((16711935&N)+(16711935&T)>>>0&16711935)>>>0}function lt(N,T){I[T]=function(q,ee,be,_e,Pe,Fe,Le){var Ge;for(Ge=0;Ge<Pe;++Ge){var dt=I[N](Fe[Le+Ge-1],be,_e+Ge);Fe[Le+Ge]=st(q[ee+Ge],dt)}}}function _t(){this.ud=this.hd=this.jd=0}function bt(N,T){return((4278124286&(N^T))>>>1)+(N&T)>>>0}function St(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function kt(N,T){return St(N+(N-T+.5>>1))}function et(N,T,q){return Math.abs(T-q)-Math.abs(N-q)}function ce(N,T,q,ee,be,_e,Pe){for(ee=_e[Pe-1],q=0;q<be;++q)_e[Pe+q]=ee=st(N[T+q],ee)}function Qe(N,T,q,ee,be){var _e;for(_e=0;_e<q;++_e){var Pe=N[T+_e],Fe=Pe>>8&255,Le=16711935&(Le=(Le=16711935&Pe)+((Fe<<16)+Fe));ee[be+_e]=(4278255360&Pe)+Le>>>0}}function xe(N,T){T.jd=255&N,T.hd=N>>8&255,T.ud=N>>16&255}function fe(N,T,q,ee,be,_e){var Pe;for(Pe=0;Pe<ee;++Pe){var Fe=T[q+Pe],Le=Fe>>>8,Ge=Fe,dt=255&(dt=(dt=Fe>>>16)+((N.jd<<24>>24)*(Le<<24>>24)>>>5));Ge=255&(Ge=(Ge+=(N.hd<<24>>24)*(Le<<24>>24)>>>5)+((N.ud<<24>>24)*(dt<<24>>24)>>>5)),be[_e+Pe]=(4278255360&Fe)+(dt<<16)+Ge}}function oe(N,T,q,ee,be){I[T]=function(_e,Pe,Fe,Le,Ge,dt,Pt,qe,ht){for(Le=Pt;Le<qe;++Le)for(Pt=0;Pt<ht;++Pt)Ge[dt++]=be(Fe[ee(_e[Pe++])])},I[N]=function(_e,Pe,Fe,Le,Ge,dt,Pt){var qe=8>>_e.b,ht=_e.Ea,Ct=_e.K[0],Ut=_e.w;if(8>qe)for(_e=(1<<_e.b)-1,Ut=(1<<qe)-1;Pe<Fe;++Pe){var Bt,Gt=0;for(Bt=0;Bt<ht;++Bt)Bt&_e||(Gt=ee(Le[Ge++])),dt[Pt++]=be(Ct[Gt&Ut]),Gt>>=qe}else I["VP8LMapColor"+q](Le,Ge,Ct,Ut,dt,Pt,Pe,Fe,ht)}}function Be(N,T,q,ee,be){for(q=T+q;T<q;){var _e=N[T++];ee[be++]=_e>>16&255,ee[be++]=_e>>8&255,ee[be++]=255&_e}}function Me(N,T,q,ee,be){for(q=T+q;T<q;){var _e=N[T++];ee[be++]=_e>>16&255,ee[be++]=_e>>8&255,ee[be++]=255&_e,ee[be++]=_e>>24&255}}function Ze(N,T,q,ee,be){for(q=T+q;T<q;){var _e=(Pe=N[T++])>>16&240|Pe>>12&15,Pe=240&Pe|Pe>>28&15;ee[be++]=_e,ee[be++]=Pe}}function Je(N,T,q,ee,be){for(q=T+q;T<q;){var _e=(Pe=N[T++])>>16&248|Pe>>13&7,Pe=Pe>>5&224|Pe>>3&31;ee[be++]=_e,ee[be++]=Pe}}function nt(N,T,q,ee,be){for(q=T+q;T<q;){var _e=N[T++];ee[be++]=255&_e,ee[be++]=_e>>8&255,ee[be++]=_e>>16&255}}function ke(N,T,q,ee,be,_e){if(_e==0)for(q=T+q;T<q;)K(ee,((_e=N[T++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),be+=32;else n(ee,be,N,T,q)}function ae(N,T){I[T][0]=I[N+"0"],I[T][1]=I[N+"1"],I[T][2]=I[N+"2"],I[T][3]=I[N+"3"],I[T][4]=I[N+"4"],I[T][5]=I[N+"5"],I[T][6]=I[N+"6"],I[T][7]=I[N+"7"],I[T][8]=I[N+"8"],I[T][9]=I[N+"9"],I[T][10]=I[N+"10"],I[T][11]=I[N+"11"],I[T][12]=I[N+"12"],I[T][13]=I[N+"13"],I[T][14]=I[N+"0"],I[T][15]=I[N+"0"]}function De(N){return N==k3||N==F3||N==Lw||N==O3}function We(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ct(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new We,this.f.kb=new pt,this.sd=null}function Xe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function er(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function L(N,T){var q=N.T,ee=T.ba.f.RGBA,be=ee.eb,_e=ee.fb+N.ka*ee.A,Pe=ou[T.ba.S],Fe=N.y,Le=N.O,Ge=N.f,dt=N.N,Pt=N.ea,qe=N.W,ht=T.cc,Ct=T.dc,Ut=T.Mc,Bt=T.Nc,Gt=N.ka,qt=N.ka+N.T,ar=N.U,Zt=ar+1>>1;for(Gt==0?Pe(Fe,Le,null,null,Ge,dt,Pt,qe,Ge,dt,Pt,qe,be,_e,null,null,ar):(Pe(T.ec,T.fc,Fe,Le,ht,Ct,Ut,Bt,Ge,dt,Pt,qe,be,_e-ee.A,be,_e,ar),++q);Gt+2<qt;Gt+=2)ht=Ge,Ct=dt,Ut=Pt,Bt=qe,dt+=N.Rc,qe+=N.Rc,_e+=2*ee.A,Pe(Fe,(Le+=2*N.fa)-N.fa,Fe,Le,ht,Ct,Ut,Bt,Ge,dt,Pt,qe,be,_e-ee.A,be,_e,ar);return Le+=N.fa,N.j+qt<N.o?(n(T.ec,T.fc,Fe,Le,ar),n(T.cc,T.dc,Ge,dt,Zt),n(T.Mc,T.Nc,Pt,qe,Zt),q--):1&qt||Pe(Fe,Le,null,null,Ge,dt,Pt,qe,Ge,dt,Pt,qe,be,_e+ee.A,null,null,ar),q}function we(N,T,q){var ee=N.F,be=[N.J];if(ee!=null){var _e=N.U,Pe=T.ba.S,Fe=Pe==Mw||Pe==Lw;T=T.ba.f.RGBA;var Le=[0],Ge=N.ka;Le[0]=N.T,N.Kb&&(Ge==0?--Le[0]:(--Ge,be[0]-=N.width),N.j+N.ka+N.T==N.o&&(Le[0]=N.o-N.j-Ge));var dt=T.eb;Ge=T.fb+Ge*T.A,N=B8(ee,be[0],N.width,_e,Le,dt,Ge+(Fe?0:3),T.A),e(q==Le),N&&De(Pe)&&a1(dt,Ge,Fe,_e,Le,T.A)}return 0}function Ue(N){var T=N.ma,q=T.ba.S,ee=11>q,be=q==Dw||q==Rw||q==Mw||q==T3||q==12||De(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Xv(T.Oa,N,be?11:12))return 0;if(be&&De(q)&&au(),N.da)alert("todo:use_scaling");else{if(ee){if(T.Ib=er,N.Kb){if(q=N.U+1>>1,T.memory=s(N.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+N.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=L,au()}}else alert("todo:EmitYUV");be&&(T.Jb=we,ee&&Gl())}if(ee&&!K8){for(N=0;256>N;++N)uce[N]=89858*(N-128)+Qw>>Uw,Ace[N]=-22014*(N-128)+Qw,fce[N]=-45773*(N-128),dce[N]=113618*(N-128)+Qw>>Uw;for(N=i1;N<M3;++N)T=76283*(N-16)+Qw>>Uw,hce[N-i1]=vn(T,255),mce[N-i1]=vn(T+8>>4,15);K8=1}return 1}function te(N){var T=N.ma,q=N.U,ee=N.T;return e(!(1&N.ka)),0>=q||0>=ee?0:(q=T.Ib(N,T),T.Jb!=null&&T.Jb(N,T,q),T.Dc+=q,1)}function Ce(N){N.ma.memory=null}function $e(N,T,q,ee){return Se(N,8)!=47?0:(T[0]=Se(N,14)+1,q[0]=Se(N,14)+1,ee[0]=Se(N,1),Se(N,3)!=0?0:!N.h)}function He(N,T){if(4>N)return N+1;var q=N-2>>1;return(2+(1&N)<<q)+Se(T,q)+1}function Ye(N,T){return 120<T?T-120:1<=(q=((q=Xle[T-1])>>4)*N+(8-(15&q)))?q:1;var q}function mt(N,T,q){var ee=H(q),be=N[T+=255&ee].g-8;return 0<be&&(V(q,q.u+8),ee=H(q),T+=N[T].value,T+=ee&(1<<be)-1),V(q,q.u+N[T].g),N[T].value}function rt(N,T,q){return q.g+=N.g,q.value+=N.value<<T>>>0,e(8>=q.g),N.g}function re(N,T,q){var ee=N.xc;return e((T=ee==0?0:N.vc[N.md*(q>>ee)+(T>>ee)])<N.Wb),N.Ya[T]}function ne(N,T,q,ee){var be=N.ab,_e=N.c*T,Pe=N.C;T=Pe+T;var Fe=q,Le=ee;for(ee=N.Ta,q=N.Ua;0<be--;){var Ge=N.gc[be],dt=Pe,Pt=T,qe=Fe,ht=Le,Ct=(Le=ee,Fe=q,Ge.Ea);switch(e(dt<Pt),e(Pt<=Ge.nc),Ge.hc){case 2:Vs(qe,ht,(Pt-dt)*Ct,Le,Fe);break;case 0:var Ut=dt,Bt=Pt,Gt=Le,qt=Fe,ar=(Mr=Ge).Ea;Ut==0&&(Jv(qe,ht,null,null,1,Gt,qt),ce(qe,ht+1,0,0,ar-1,Gt,qt+1),ht+=ar,qt+=ar,++Ut);for(var Zt=1<<Mr.b,Hr=Zt-1,Tr=ze(ar,Mr.b),hn=Mr.K,Mr=Mr.w+(Ut>>Mr.b)*Tr;Ut<Bt;){var Dn=hn,xi=Mr,mn=1;for(ug(qe,ht,Gt,qt-ar,1,Gt,qt);mn<ar;){var Lr=(mn&~Hr)+Zt;Lr>ar&&(Lr=ar),(0,e1[Dn[xi++]>>8&15])(qe,ht+ +mn,Gt,qt+mn-ar,Lr-mn,Gt,qt+mn),mn=Lr}ht+=ar,qt+=ar,++Ut&Hr||(Mr+=Tr)}Pt!=Ge.nc&&n(Le,Fe-Ct,Le,Fe+(Pt-dt-1)*Ct,Ct);break;case 1:for(Ct=qe,Bt=ht,ar=(qe=Ge.Ea)-(qt=qe&~(Gt=(ht=1<<Ge.b)-1)),Ut=ze(qe,Ge.b),Zt=Ge.K,Ge=Ge.w+(dt>>Ge.b)*Ut;dt<Pt;){for(Hr=Zt,Tr=Ge,hn=new _t,Mr=Bt+qt,Dn=Bt+qe;Bt<Mr;)xe(Hr[Tr++],hn),t1(hn,Ct,Bt,ht,Le,Fe),Bt+=ht,Fe+=ht;Bt<Dn&&(xe(Hr[Tr++],hn),t1(hn,Ct,Bt,ar,Le,Fe),Bt+=ar,Fe+=ar),++dt&Gt||(Ge+=Ut)}break;case 3:if(qe==Le&&ht==Fe&&0<Ge.b){for(Bt=Le,qe=Ct=Fe+(Pt-dt)*Ct-(qt=(Pt-dt)*ze(Ge.Ea,Ge.b)),ht=Le,Gt=Fe,Ut=[],qt=(ar=qt)-1;0<=qt;--qt)Ut[qt]=ht[Gt+qt];for(qt=ar-1;0<=qt;--qt)Bt[qe+qt]=Ut[qt];Tw(Ge,dt,Pt,Le,Ct,Le,Fe)}else Tw(Ge,dt,Pt,qe,ht,Le,Fe)}Fe=ee,Le=q}Le!=q&&n(ee,q,Fe,Le,_e)}function Ae(N,T){var q=N.V,ee=N.Ba+N.c*N.C,be=T-N.C;if(e(T<=N.l.o),e(16>=be),0<be){var _e=N.l,Pe=N.Ta,Fe=N.Ua,Le=_e.width;if(ne(N,be,q,ee),be=Fe=[Fe],e((q=N.C)<(ee=T)),e(_e.v<_e.va),ee>_e.o&&(ee=_e.o),q<_e.j){var Ge=_e.j-q;q=_e.j,be[0]+=Ge*Le}if(q>=ee?q=0:(be[0]+=4*_e.v,_e.ka=q-_e.j,_e.U=_e.va-_e.v,_e.T=ee-q,q=1),q){if(Fe=Fe[0],11>(q=N.ca).S){var dt=q.f.RGBA,Pt=(ee=q.S,be=_e.U,_e=_e.T,Ge=dt.eb,dt.A),qe=_e;for(dt=dt.fb+N.Ma*dt.A;0<qe--;){var ht=Pe,Ct=Fe,Ut=be,Bt=Ge,Gt=dt;switch(ee){case Ow:r1(ht,Ct,Ut,Bt,Gt);break;case Dw:sh(ht,Ct,Ut,Bt,Gt);break;case k3:sh(ht,Ct,Ut,Bt,Gt),a1(Bt,Gt,0,Ut,1,0);break;case D8:sm(ht,Ct,Ut,Bt,Gt);break;case Rw:ke(ht,Ct,Ut,Bt,Gt,1);break;case F3:ke(ht,Ct,Ut,Bt,Gt,1),a1(Bt,Gt,0,Ut,1,0);break;case Mw:ke(ht,Ct,Ut,Bt,Gt,0);break;case Lw:ke(ht,Ct,Ut,Bt,Gt,0),a1(Bt,Gt,1,Ut,1,0);break;case T3:ih(ht,Ct,Ut,Bt,Gt);break;case O3:ih(ht,Ct,Ut,Bt,Gt),I8(Bt,Gt,Ut,1,0);break;case R8:oh(ht,Ct,Ut,Bt,Gt);break;default:e(0)}Fe+=Le,dt+=Pt}N.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=q.height)}}N.C=T,e(N.C<=N.i)}function ue(N){var T;if(0<N.ua)return 0;for(T=0;T<N.Wb;++T){var q=N.Ya[T].G,ee=N.Ya[T].H;if(0<q[1][ee[1]+0].g||0<q[2][ee[2]+0].g||0<q[3][ee[3]+0].g)return 0}return 1}function Ne(N,T,q,ee,be,_e){if(N.Z!=0){var Pe=N.qd,Fe=N.rd;for(e(uh[N.Z]!=null);T<q;++T)uh[N.Z](Pe,Fe,ee,be,ee,be,_e),Pe=ee,Fe=be,be+=_e;N.qd=Pe,N.rd=Fe}}function Te(N,T){var q=N.l.ma,ee=q.Z==0||q.Z==1?N.l.j:N.C;if(ee=N.C<ee?ee:N.C,e(T<=N.l.o),T>ee){var be=N.l.width,_e=q.ca,Pe=q.tb+be*ee,Fe=N.V,Le=N.Ba+N.c*ee,Ge=N.gc;e(N.ab==1),e(Ge[0].hc==3),Hd(Ge[0],ee,T,Fe,Le,_e,Pe),Ne(q,ee,T,_e,Pe,be)}N.C=N.Ma=T}function tt(N,T,q,ee,be,_e,Pe){var Fe=N.$/ee,Le=N.$%ee,Ge=N.m,dt=N.s,Pt=q+N.$,qe=Pt;be=q+ee*be;var ht=q+ee*_e,Ct=280+dt.ua,Ut=N.Pb?Fe:16777216,Bt=0<dt.ua?dt.Wa:null,Gt=dt.wc,qt=Pt<ht?re(dt,Le,Fe):null;e(N.C<_e),e(ht<=be);var ar=!1;e:for(;;){for(;ar||Pt<ht;){var Zt=0;if(Fe>=Ut){var Hr=Pt-q;e((Ut=N).Pb),Ut.wd=Ut.m,Ut.xd=Hr,0<Ut.s.ua&&ie(Ut.s.Wa,Ut.s.vb),Ut=Fe+Jle}if(Le&Gt||(qt=re(dt,Le,Fe)),e(qt!=null),qt.Qb&&(T[Pt]=qt.qb,ar=!0),!ar)if(Y(Ge),qt.jc){Zt=Ge,Hr=T;var Tr=Pt,hn=qt.pd[H(Zt)&am-1];e(qt.jc),256>hn.g?(V(Zt,Zt.u+hn.g),Hr[Tr]=hn.value,Zt=0):(V(Zt,Zt.u+hn.g-256),e(256<=hn.value),Zt=hn.value),Zt==0&&(ar=!0)}else Zt=mt(qt.G[0],qt.H[0],Ge);if(Ge.h)break;if(ar||256>Zt){if(!ar)if(qt.nd)T[Pt]=(qt.qb|Zt<<8)>>>0;else{if(Y(Ge),ar=mt(qt.G[1],qt.H[1],Ge),Y(Ge),Hr=mt(qt.G[2],qt.H[2],Ge),Tr=mt(qt.G[3],qt.H[3],Ge),Ge.h)break;T[Pt]=(Tr<<24|ar<<16|Zt<<8|Hr)>>>0}if(ar=!1,++Pt,++Le>=ee&&(Le=0,++Fe,Pe!=null&&Fe<=_e&&!(Fe%16)&&Pe(N,Fe),Bt!=null))for(;qe<Pt;)Zt=T[qe++],Bt.X[(506832829*Zt&4294967295)>>>Bt.Mb]=Zt}else if(280>Zt){if(Zt=He(Zt-256,Ge),Hr=mt(qt.G[4],qt.H[4],Ge),Y(Ge),Hr=Ye(ee,Hr=He(Hr,Ge)),Ge.h)break;if(Pt-q<Hr||be-Pt<Zt)break e;for(Tr=0;Tr<Zt;++Tr)T[Pt+Tr]=T[Pt+Tr-Hr];for(Pt+=Zt,Le+=Zt;Le>=ee;)Le-=ee,++Fe,Pe!=null&&Fe<=_e&&!(Fe%16)&&Pe(N,Fe);if(e(Pt<=be),Le&Gt&&(qt=re(dt,Le,Fe)),Bt!=null)for(;qe<Pt;)Zt=T[qe++],Bt.X[(506832829*Zt&4294967295)>>>Bt.Mb]=Zt}else{if(!(Zt<Ct))break e;for(ar=Zt-280,e(Bt!=null);qe<Pt;)Zt=T[qe++],Bt.X[(506832829*Zt&4294967295)>>>Bt.Mb]=Zt;Zt=Pt,e(!(ar>>>(Hr=Bt).Xa)),T[Zt]=Hr.X[ar],ar=!0}ar||e(Ge.h==Q(Ge))}if(N.Pb&&Ge.h&&Pt<be)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&ie(N.s.vb,N.s.Wa);else{if(Ge.h)break e;Pe!=null&&Pe(N,Fe>_e?_e:Fe),N.a=0,N.$=Pt-q}return 1}return N.a=3,0}function ot(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var T=N.Wa;T!=null&&(T.X=null),N.vb=null,e(N!=null)}function vt(){var N=new Xr;return N==null?null:(N.a=0,N.xb=U8,ae("Predictor","VP8LPredictors"),ae("Predictor","VP8LPredictors_C"),ae("PredictorAdd","VP8LPredictorsAdd"),ae("PredictorAdd","VP8LPredictorsAdd_C"),Vs=Qe,t1=fe,r1=Be,sh=Me,ih=Ze,oh=Je,sm=nt,I.VP8LMapColor32b=Vd,I.VP8LMapColor8b=Zv,N)}function yt(N,T,q,ee,be){var _e=1,Pe=[N],Fe=[T],Le=ee.m,Ge=ee.s,dt=null,Pt=0;e:for(;;){if(q)for(;_e&&Se(Le,1);){var qe=Pe,ht=Fe,Ct=ee,Ut=1,Bt=Ct.m,Gt=Ct.gc[Ct.ab],qt=Se(Bt,2);if(Ct.Oc&1<<qt)_e=0;else{switch(Ct.Oc|=1<<qt,Gt.hc=qt,Gt.Ea=qe[0],Gt.nc=ht[0],Gt.K=[null],++Ct.ab,e(4>=Ct.ab),qt){case 0:case 1:Gt.b=Se(Bt,3)+2,Ut=yt(ze(Gt.Ea,Gt.b),ze(Gt.nc,Gt.b),0,Ct,Gt.K),Gt.K=Gt.K[0];break;case 3:var ar,Zt=Se(Bt,8)+1,Hr=16<Zt?0:4<Zt?1:2<Zt?2:3;if(qe[0]=ze(Gt.Ea,Hr),Gt.b=Hr,ar=Ut=yt(Zt,1,0,Ct,Gt.K)){var Tr,hn=Zt,Mr=Gt,Dn=1<<(8>>Mr.b),xi=s(Dn);if(xi==null)ar=0;else{var mn=Mr.K[0],Lr=Mr.w;for(xi[0]=Mr.K[0][0],Tr=1;Tr<1*hn;++Tr)xi[Tr]=st(mn[Lr+Tr],xi[Tr-1]);for(;Tr<4*Dn;++Tr)xi[Tr]=0;Mr.K[0]=null,Mr.K[0]=xi,ar=1}}Ut=ar;break;case 2:break;default:e(0)}_e=Ut}}if(Pe=Pe[0],Fe=Fe[0],_e&&Se(Le,1)&&!(_e=1<=(Pt=Se(Le,4))&&11>=Pt)){ee.a=3;break e}var yr;if(yr=_e)t:{var $s,dn,Mn,$a=ee,xo=Pe,yl=Fe,ks=Pt,Ko=q,bl=$a.m,vi=$a.s,Vn=[null],ca=1,Fs=0,ua=Yle[ks];r:for(;;){if(Ko&&Se(bl,1)){var vo=Se(bl,3)+2,Xu=ze(xo,vo),Ks=ze(yl,vo),ql=Xu*Ks;if(!yt(Xu,Ks,0,$a,Vn))break r;for(Vn=Vn[0],vi.xc=vo,$s=0;$s<ql;++$s){var Pa=Vn[$s]>>8&65535;Vn[$s]=Pa,Pa>=ca&&(ca=Pa+1)}}if(bl.h)break r;for(dn=0;5>dn;++dn){var yi=M8[dn];!dn&&0<ks&&(yi+=1<<ks),Fs<yi&&(Fs=yi)}var bc=i(ca*ua,D),wl=ca,wc=i(wl,ge);if(wc==null)var Nc=null;else e(65536>=wl),Nc=wc;var zl=s(Fs);if(Nc==null||zl==null||bc==null){$a.a=1;break r}var Cc=bc;for($s=Mn=0;$s<ca;++$s){var Da=Nc[$s],_c=Da.G,Yu=Da.H,om=0,Ff=1,yo=0;for(dn=0;5>dn;++dn){yi=M8[dn],_c[dn]=Cc,Yu[dn]=Mn,!dn&&0<ks&&(yi+=1<<ks);a:{var Hw,L3=yi,$w=$a,o1=zl,xce=Cc,vce=Mn,U3=0,dh=$w.m,yce=Se(dh,1);if(a(o1,0,0,L3),yce){var bce=Se(dh,1)+1,wce=Se(dh,1),z8=Se(dh,wce==0?1:8);o1[z8]=1,bce==2&&(o1[z8=Se(dh,8)]=1);var Kw=1}else{var W8=s(19),X8=Se(dh,4)+4;if(19<X8){$w.a=3;var Gw=0;break a}for(Hw=0;Hw<X8;++Hw)W8[Wle[Hw]]=Se(dh,3);var Q3=void 0,l1=void 0,Y8=$w,Nce=W8,qw=L3,J8=o1,V3=0,fh=Y8.m,Z8=8,eM=i(128,D);n:for(;j(eM,0,7,Nce,19);){if(Se(fh,1)){var Cce=2+2*Se(fh,3);if((Q3=2+Se(fh,Cce))>qw)break n}else Q3=qw;for(l1=0;l1<qw&&Q3--;){Y(fh);var tM=eM[0+(127&H(fh))];V(fh,fh.u+tM.g);var fg=tM.value;if(16>fg)J8[l1++]=fg,fg!=0&&(Z8=fg);else{var _ce=fg==16,rM=fg-16,Ece=qle[rM],nM=Se(fh,Gle[rM])+Ece;if(l1+nM>qw)break n;for(var Sce=_ce?Z8:0;0<nM--;)J8[l1++]=Sce}}V3=1;break n}V3||(Y8.a=3),Kw=V3}(Kw=Kw&&!dh.h)&&(U3=j(xce,vce,8,o1,L3)),Kw&&U3!=0?Gw=U3:($w.a=3,Gw=0)}if(Gw==0)break r;if(Ff&&zle[dn]==1&&(Ff=Cc[Mn].g==0),om+=Cc[Mn].g,Mn+=Gw,3>=dn){var c1,H3=zl[0];for(c1=1;c1<yi;++c1)zl[c1]>H3&&(H3=zl[c1]);yo+=H3}}if(Da.nd=Ff,Da.Qb=0,Ff&&(Da.qb=(_c[3][Yu[3]+0].value<<24|_c[1][Yu[1]+0].value<<16|_c[2][Yu[2]+0].value)>>>0,om==0&&256>_c[0][Yu[0]+0].value&&(Da.Qb=1,Da.qb+=_c[0][Yu[0]+0].value<<8)),Da.jc=!Da.Qb&&6>yo,Da.jc){var zw,Of=Da;for(zw=0;zw<am;++zw){var Ah=zw,hh=Of.pd[Ah],Ww=Of.G[0][Of.H[0]+Ah];256<=Ww.value?(hh.g=Ww.g+256,hh.value=Ww.value):(hh.g=0,hh.value=0,Ah>>=rt(Ww,8,hh),Ah>>=rt(Of.G[1][Of.H[1]+Ah],16,hh),Ah>>=rt(Of.G[2][Of.H[2]+Ah],0,hh),rt(Of.G[3][Of.H[3]+Ah],24,hh))}}}vi.vc=Vn,vi.Wb=ca,vi.Ya=Nc,vi.yc=bc,yr=1;break t}yr=0}if(!(_e=yr)){ee.a=3;break e}if(0<Pt){if(Ge.ua=1<<Pt,!G(Ge.Wa,Pt)){ee.a=1,_e=0;break e}}else Ge.ua=0;var $3=ee,aM=Pe,Ice=Fe,K3=$3.s,G3=K3.xc;if($3.c=aM,$3.i=Ice,K3.md=ze(aM,G3),K3.wc=G3==0?-1:(1<<G3)-1,q){ee.xb=sce;break e}if((dt=s(Pe*Fe))==null){ee.a=1,_e=0;break e}_e=(_e=tt(ee,dt,0,Pe,Fe,Fe,null))&&!Le.h;break e}return _e?(be!=null?be[0]=dt:(e(dt==null),e(q)),ee.$=0,q||ot(Ge)):ot(Ge),_e}function Et(N,T){var q=N.c*N.i,ee=q+T+16*T;return e(N.c<=T),N.V=s(ee),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+q+T,1)}function Ee(N,T){var q=N.C,ee=T-q,be=N.V,_e=N.Ba+N.c*q;for(e(T<=N.l.o);0<ee;){var Pe=16<ee?16:ee,Fe=N.l.ma,Le=N.l.width,Ge=Le*Pe,dt=Fe.ca,Pt=Fe.tb+Le*q,qe=N.Ta,ht=N.Ua;ne(N,Pe,be,_e),P8(qe,ht,dt,Pt,Ge),Ne(Fe,q,q+Pe,dt,Pt,Le),ee-=Pe,be+=Pe*N.c,q+=Pe}e(q==T),N.C=N.Ma=T}function ut(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function at(){this.Yb=function(){var N=[];return function T(q,ee,be){for(var _e=be[ee],Pe=0;Pe<_e&&(q.push(be.length>ee+1?[]:0),!(be.length<ee+1));Pe++)T(q[Pe],ee+1,be)}(N,0,[3,11]),N}()}function zt(){this.jb=s(3),this.Wc=l([4,8],at),this.Xc=l([4,17],at)}function Jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ot(){this.ld=this.La=this.dd=this.tc=0}function Vt(){this.Na=this.la=0}function nr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ht(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ot),this.Y=0,this.ya=Array(new Ht),this.aa=0,this.l=new Na}function Or(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fn(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new ut,this.Kc=new Nt,this.ed=new Jt,this.Qa=new gt,this.Ic=this.$c=this.Aa=0,this.D=new Nr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,k),this.ia=0,this.pb=i(4,nr),this.Pa=new zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Or),this.Hd=0,this.rb=Array(new Vt),this.sb=0,this.wa=Array(new Ot),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ht),this.L=this.aa=0,this.gd=l([4,2],Ot),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vn(N,T){return 0>N?0:N>T?T:N}function Na(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ku(){var N=new Fn;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,s1||(s1=vr)),N}function Rn(N,T,q){return N.a==0&&(N.a=T,N.sc=q,N.cb=0),0}function ft(N,T,q){return 3<=q&&N[T+0]==157&&N[T+1]==1&&N[T+2]==42}function xr(N,T){if(N==null)return 0;if(N.a=0,N.sc="OK",T==null)return Rn(N,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,ee=T.w,be=T.ha;if(4>be)return Rn(N,7,"Truncated header.");var _e=q[ee+0]|q[ee+1]<<8|q[ee+2]<<16,Pe=N.Od;if(Pe.Rb=!(1&_e),Pe.td=_e>>1&7,Pe.yd=_e>>4&1,Pe.ub=_e>>5,3<Pe.td)return Rn(N,3,"Incorrect keyframe parameters.");if(!Pe.yd)return Rn(N,4,"Frame not displayable.");ee+=3,be-=3;var Fe=N.Kc;if(Pe.Rb){if(7>be)return Rn(N,7,"cannot parse picture header");if(!ft(q,ee,be))return Rn(N,3,"Bad code word");Fe.c=16383&(q[ee+4]<<8|q[ee+3]),Fe.Td=q[ee+4]>>6,Fe.i=16383&(q[ee+6]<<8|q[ee+5]),Fe.Ud=q[ee+6]>>6,ee+=7,be-=7,N.za=Fe.c+15>>4,N.Ub=Fe.i+15>>4,T.width=Fe.c,T.height=Fe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((_e=N.Pa).jb,0,255,_e.jb.length),e((_e=N.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,a(_e.Zb,0,0,_e.Zb.length),a(_e.Lb,0,0,_e.Lb)}if(Pe.ub>be)return Rn(N,7,"bad partition length");se(_e=N.m,q,ee,Pe.ub),ee+=Pe.ub,be-=Pe.ub,Pe.Rb&&(Fe.Ld=z(_e),Fe.Kd=z(_e)),Fe=N.Qa;var Le,Ge=N.Pa;if(e(_e!=null),e(Fe!=null),Fe.Cb=z(_e),Fe.Cb){if(Fe.Bb=z(_e),z(_e)){for(Fe.Fb=z(_e),Le=0;4>Le;++Le)Fe.Zb[Le]=z(_e)?me(_e,7):0;for(Le=0;4>Le;++Le)Fe.Lb[Le]=z(_e)?me(_e,6):0}if(Fe.Bb)for(Le=0;3>Le;++Le)Ge.jb[Le]=z(_e)?he(_e,8):255}else Fe.Bb=0;if(_e.Ka)return Rn(N,3,"cannot parse segment header");if((Fe=N.ed).zd=z(_e),Fe.Tb=he(_e,6),Fe.wb=he(_e,3),Fe.Pc=z(_e),Fe.Pc&&z(_e)){for(Ge=0;4>Ge;++Ge)z(_e)&&(Fe.vd[Ge]=me(_e,6));for(Ge=0;4>Ge;++Ge)z(_e)&&(Fe.od[Ge]=me(_e,6))}if(N.L=Fe.Tb==0?0:Fe.zd?1:2,_e.Ka)return Rn(N,3,"cannot parse filter header");var dt=be;if(be=Le=ee,ee=Le+dt,Fe=dt,N.Xb=(1<<he(N.m,2))-1,dt<3*(Ge=N.Xb))q=7;else{for(Le+=3*Ge,Fe-=3*Ge,dt=0;dt<Ge;++dt){var Pt=q[be+0]|q[be+1]<<8|q[be+2]<<16;Pt>Fe&&(Pt=Fe),se(N.Jc[+dt],q,Le,Pt),Le+=Pt,Fe-=Pt,be+=3}se(N.Jc[+Ge],q,Le,Fe),q=Le<ee?0:5}if(q!=0)return Rn(N,q,"cannot parse partitions");for(q=he(Le=N.m,7),be=z(Le)?me(Le,4):0,ee=z(Le)?me(Le,4):0,Fe=z(Le)?me(Le,4):0,Ge=z(Le)?me(Le,4):0,Le=z(Le)?me(Le,4):0,dt=N.Qa,Pt=0;4>Pt;++Pt){if(dt.Cb){var qe=dt.Zb[Pt];dt.Fb||(qe+=q)}else{if(0<Pt){N.pb[Pt]=N.pb[0];continue}qe=q}var ht=N.pb[Pt];ht.Sc[0]=D3[vn(qe+be,127)],ht.Sc[1]=R3[vn(qe+0,127)],ht.Eb[0]=2*D3[vn(qe+ee,127)],ht.Eb[1]=101581*R3[vn(qe+Fe,127)]>>16,8>ht.Eb[1]&&(ht.Eb[1]=8),ht.Qc[0]=D3[vn(qe+Ge,117)],ht.Qc[1]=R3[vn(qe+Le,127)],ht.lc=qe+Le}if(!Pe.Rb)return Rn(N,4,"Not a key frame.");for(z(_e),Pe=N.Pa,q=0;4>q;++q){for(be=0;8>be;++be)for(ee=0;3>ee;++ee)for(Fe=0;11>Fe;++Fe)Ge=le(_e,nce[q][be][ee][Fe])?he(_e,8):tce[q][be][ee][Fe],Pe.Wc[q][be].Yb[ee][Fe]=Ge;for(be=0;17>be;++be)Pe.Xc[q][be]=Pe.Wc[q][ace[be]]}return N.kc=z(_e),N.kc&&(N.Bd=he(_e,8)),N.cb=1}function vr(N,T,q,ee,be,_e,Pe){var Fe=T[be].Yb[q];for(q=0;16>be;++be){if(!le(N,Fe[q+0]))return be;for(;!le(N,Fe[q+1]);)if(Fe=T[++be].Yb[0],q=0,be==16)return 16;var Le=T[be+1].Yb;if(le(N,Fe[q+2])){var Ge=N,dt=0;if(le(Ge,(qe=Fe)[(Pt=q)+3]))if(le(Ge,qe[Pt+6])){for(Fe=0,Pt=2*(dt=le(Ge,qe[Pt+8]))+(qe=le(Ge,qe[Pt+9+dt])),dt=0,qe=Zle[Pt];qe[Fe];++Fe)dt+=dt+le(Ge,qe[Fe]);dt+=3+(8<<Pt)}else le(Ge,qe[Pt+7])?(dt=7+2*le(Ge,165),dt+=le(Ge,145)):dt=5+le(Ge,159);else dt=le(Ge,qe[Pt+4])?3+le(Ge,qe[Pt+5]):2;Fe=Le[2]}else dt=1,Fe=Le[1];Le=Pe+ece[be],0>(Ge=N).b&&R(Ge);var Pt,qe=Ge.b,ht=(Pt=Ge.Ca>>1)-(Ge.I>>qe)>>31;--Ge.b,Ge.Ca+=ht,Ge.Ca|=1,Ge.I-=(Pt+1&ht)<<qe,_e[Le]=((dt^ht)-ht)*ee[(0<be)+0]}return 16}function fr(N){var T=N.rb[N.sb-1];T.la=0,T.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function ir(N,T,q,ee,be){be=N[T+q+32*ee]+(be>>3),N[T+q+32*ee]=-256&be?0>be?0:255:be}function or(N,T,q,ee,be,_e){ir(N,T,0,q,ee+be),ir(N,T,1,q,ee+_e),ir(N,T,2,q,ee-_e),ir(N,T,3,q,ee-be)}function rr(N){return(20091*N>>16)+N}function gr(N,T,q,ee){var be,_e=0,Pe=s(16);for(be=0;4>be;++be){var Fe=N[T+0]+N[T+8],Le=N[T+0]-N[T+8],Ge=(35468*N[T+4]>>16)-rr(N[T+12]),dt=rr(N[T+4])+(35468*N[T+12]>>16);Pe[_e+0]=Fe+dt,Pe[_e+1]=Le+Ge,Pe[_e+2]=Le-Ge,Pe[_e+3]=Fe-dt,_e+=4,T++}for(be=_e=0;4>be;++be)Fe=(N=Pe[_e+0]+4)+Pe[_e+8],Le=N-Pe[_e+8],Ge=(35468*Pe[_e+4]>>16)-rr(Pe[_e+12]),ir(q,ee,0,0,Fe+(dt=rr(Pe[_e+4])+(35468*Pe[_e+12]>>16))),ir(q,ee,1,0,Le+Ge),ir(q,ee,2,0,Le-Ge),ir(q,ee,3,0,Fe-dt),_e++,ee+=32}function Vr(N,T,q,ee){var be=N[T+0]+4,_e=35468*N[T+4]>>16,Pe=rr(N[T+4]),Fe=35468*N[T+1]>>16;or(q,ee,0,be+Pe,N=rr(N[T+1]),Fe),or(q,ee,1,be+_e,N,Fe),or(q,ee,2,be-_e,N,Fe),or(q,ee,3,be-Pe,N,Fe)}function gn(N,T,q,ee,be){gr(N,T,q,ee),be&&gr(N,T+16,q,ee+4)}function an(N,T,q,ee){im(N,T+0,q,ee,1),im(N,T+32,q,ee+128,1)}function Ho(N,T,q,ee){var be;for(N=N[T+0]+4,be=0;4>be;++be)for(T=0;4>T;++T)ir(q,ee,T,be,N)}function si(N,T,q,ee){N[T+0]&&sa(N,T+0,q,ee),N[T+16]&&sa(N,T+16,q,ee+4),N[T+32]&&sa(N,T+32,q,ee+128),N[T+48]&&sa(N,T+48,q,ee+128+4)}function pi(N,T,q,ee){var be,_e=s(16);for(be=0;4>be;++be){var Pe=N[T+0+be]+N[T+12+be],Fe=N[T+4+be]+N[T+8+be],Le=N[T+4+be]-N[T+8+be],Ge=N[T+0+be]-N[T+12+be];_e[0+be]=Pe+Fe,_e[8+be]=Pe-Fe,_e[4+be]=Ge+Le,_e[12+be]=Ge-Le}for(be=0;4>be;++be)Pe=(N=_e[0+4*be]+3)+_e[3+4*be],Fe=_e[1+4*be]+_e[2+4*be],Le=_e[1+4*be]-_e[2+4*be],Ge=N-_e[3+4*be],q[ee+0]=Pe+Fe>>3,q[ee+16]=Ge+Le>>3,q[ee+32]=Pe-Fe>>3,q[ee+48]=Ge-Le>>3,ee+=64}function Kl(N,T,q){var ee,be=T-32,_e=yc,Pe=255-N[be-1];for(ee=0;ee<q;++ee){var Fe,Le=_e,Ge=Pe+N[T-1];for(Fe=0;Fe<q;++Fe)N[T+Fe]=Le[Ge+N[be+Fe]];T+=32}}function If(N,T){Kl(N,T,4)}function XA(N,T){Kl(N,T,8)}function Z0(N,T){Kl(N,T,16)}function Md(N,T){var q;for(q=0;16>q;++q)n(N,T+32*q,N,T-32,16)}function ig(N,T){var q;for(q=16;0<q;--q)a(N,T,N[T-1],16),T+=32}function po(N,T,q){var ee;for(ee=0;16>ee;++ee)a(T,q+32*ee,N,16)}function Jc(N,T){var q,ee=16;for(q=0;16>q;++q)ee+=N[T-1+32*q]+N[T+q-32];po(ee>>5,N,T)}function Ld(N,T){var q,ee=8;for(q=0;16>q;++q)ee+=N[T-1+32*q];po(ee>>4,N,T)}function YA(N,T){var q,ee=8;for(q=0;16>q;++q)ee+=N[T+q-32];po(ee>>4,N,T)}function og(N,T){po(128,N,T)}function Wr(N,T,q){return N+2*T+q+2>>2}function Gv(N,T){var q,ee=T-32;for(ee=new Uint8Array([Wr(N[ee-1],N[ee+0],N[ee+1]),Wr(N[ee+0],N[ee+1],N[ee+2]),Wr(N[ee+1],N[ee+2],N[ee+3]),Wr(N[ee+2],N[ee+3],N[ee+4])]),q=0;4>q;++q)n(N,T+32*q,ee,0,ee.length)}function qv(N,T){var q=N[T-1],ee=N[T-1+32],be=N[T-1+64],_e=N[T-1+96];K(N,T+0,16843009*Wr(N[T-1-32],q,ee)),K(N,T+32,16843009*Wr(q,ee,be)),K(N,T+64,16843009*Wr(ee,be,_e)),K(N,T+96,16843009*Wr(be,_e,_e))}function zv(N,T){var q,ee=4;for(q=0;4>q;++q)ee+=N[T+q-32]+N[T-1+32*q];for(ee>>=3,q=0;4>q;++q)a(N,T+32*q,ee,4)}function Gi(N,T){var q=N[T-1+0],ee=N[T-1+32],be=N[T-1+64],_e=N[T-1-32],Pe=N[T+0-32],Fe=N[T+1-32],Le=N[T+2-32],Ge=N[T+3-32];N[T+0+96]=Wr(ee,be,N[T-1+96]),N[T+1+96]=N[T+0+64]=Wr(q,ee,be),N[T+2+96]=N[T+1+64]=N[T+0+32]=Wr(_e,q,ee),N[T+3+96]=N[T+2+64]=N[T+1+32]=N[T+0+0]=Wr(Pe,_e,q),N[T+3+64]=N[T+2+32]=N[T+1+0]=Wr(Fe,Pe,_e),N[T+3+32]=N[T+2+0]=Wr(Le,Fe,Pe),N[T+3+0]=Wr(Ge,Le,Fe)}function Gu(N,T){var q=N[T+1-32],ee=N[T+2-32],be=N[T+3-32],_e=N[T+4-32],Pe=N[T+5-32],Fe=N[T+6-32],Le=N[T+7-32];N[T+0+0]=Wr(N[T+0-32],q,ee),N[T+1+0]=N[T+0+32]=Wr(q,ee,be),N[T+2+0]=N[T+1+32]=N[T+0+64]=Wr(ee,be,_e),N[T+3+0]=N[T+2+32]=N[T+1+64]=N[T+0+96]=Wr(be,_e,Pe),N[T+3+32]=N[T+2+64]=N[T+1+96]=Wr(_e,Pe,Fe),N[T+3+64]=N[T+2+96]=Wr(Pe,Fe,Le),N[T+3+96]=Wr(Fe,Le,Le)}function Wv(N,T){var q=N[T-1+0],ee=N[T-1+32],be=N[T-1+64],_e=N[T-1-32],Pe=N[T+0-32],Fe=N[T+1-32],Le=N[T+2-32],Ge=N[T+3-32];N[T+0+0]=N[T+1+64]=_e+Pe+1>>1,N[T+1+0]=N[T+2+64]=Pe+Fe+1>>1,N[T+2+0]=N[T+3+64]=Fe+Le+1>>1,N[T+3+0]=Le+Ge+1>>1,N[T+0+96]=Wr(be,ee,q),N[T+0+64]=Wr(ee,q,_e),N[T+0+32]=N[T+1+96]=Wr(q,_e,Pe),N[T+1+32]=N[T+2+96]=Wr(_e,Pe,Fe),N[T+2+32]=N[T+3+96]=Wr(Pe,Fe,Le),N[T+3+32]=Wr(Fe,Le,Ge)}function JA(N,T){var q=N[T+0-32],ee=N[T+1-32],be=N[T+2-32],_e=N[T+3-32],Pe=N[T+4-32],Fe=N[T+5-32],Le=N[T+6-32],Ge=N[T+7-32];N[T+0+0]=q+ee+1>>1,N[T+1+0]=N[T+0+64]=ee+be+1>>1,N[T+2+0]=N[T+1+64]=be+_e+1>>1,N[T+3+0]=N[T+2+64]=_e+Pe+1>>1,N[T+0+32]=Wr(q,ee,be),N[T+1+32]=N[T+0+96]=Wr(ee,be,_e),N[T+2+32]=N[T+1+96]=Wr(be,_e,Pe),N[T+3+32]=N[T+2+96]=Wr(_e,Pe,Fe),N[T+3+64]=Wr(Pe,Fe,Le),N[T+3+96]=Wr(Fe,Le,Ge)}function qu(N,T){var q=N[T-1+0],ee=N[T-1+32],be=N[T-1+64],_e=N[T-1+96];N[T+0+0]=q+ee+1>>1,N[T+2+0]=N[T+0+32]=ee+be+1>>1,N[T+2+32]=N[T+0+64]=be+_e+1>>1,N[T+1+0]=Wr(q,ee,be),N[T+3+0]=N[T+1+32]=Wr(ee,be,_e),N[T+3+32]=N[T+1+64]=Wr(be,_e,_e),N[T+3+64]=N[T+2+64]=N[T+0+96]=N[T+1+96]=N[T+2+96]=N[T+3+96]=_e}function ZA(N,T){var q=N[T-1+0],ee=N[T-1+32],be=N[T-1+64],_e=N[T-1+96],Pe=N[T-1-32],Fe=N[T+0-32],Le=N[T+1-32],Ge=N[T+2-32];N[T+0+0]=N[T+2+32]=q+Pe+1>>1,N[T+0+32]=N[T+2+64]=ee+q+1>>1,N[T+0+64]=N[T+2+96]=be+ee+1>>1,N[T+0+96]=_e+be+1>>1,N[T+3+0]=Wr(Fe,Le,Ge),N[T+2+0]=Wr(Pe,Fe,Le),N[T+1+0]=N[T+3+32]=Wr(q,Pe,Fe),N[T+1+32]=N[T+3+64]=Wr(ee,q,Pe),N[T+1+64]=N[T+3+96]=Wr(be,ee,q),N[T+1+96]=Wr(_e,be,ee)}function pc(N,T){var q;for(q=0;8>q;++q)n(N,T+32*q,N,T-32,8)}function Bf(N,T){var q;for(q=0;8>q;++q)a(N,T,N[T-1],8),T+=32}function Zc(N,T,q){var ee;for(ee=0;8>ee;++ee)a(T,q+32*ee,N,8)}function em(N,T){var q,ee=8;for(q=0;8>q;++q)ee+=N[T+q-32]+N[T-1+32*q];Zc(ee>>4,N,T)}function Ca(N,T){var q,ee=4;for(q=0;8>q;++q)ee+=N[T+q-32];Zc(ee>>3,N,T)}function tm(N,T){var q,ee=4;for(q=0;8>q;++q)ee+=N[T-1+32*q];Zc(ee>>3,N,T)}function lg(N,T){Zc(128,N,T)}function eu(N,T,q){var ee=N[T-q],be=N[T+0],_e=3*(be-ee)+j3[1020+N[T-2*q]-N[T+q]],Pe=Fw[112+(_e+4>>3)];N[T-q]=yc[255+ee+Fw[112+(_e+3>>3)]],N[T+0]=yc[255+be-Pe]}function eh(N,T,q,ee){var be=N[T+0],_e=N[T+q];return iu[255+N[T-2*q]-N[T-q]]>ee||iu[255+_e-be]>ee}function Pf(N,T,q,ee){return 4*iu[255+N[T-q]-N[T+0]]+iu[255+N[T-2*q]-N[T+q]]<=ee}function Ud(N,T,q,ee,be){var _e=N[T-3*q],Pe=N[T-2*q],Fe=N[T-q],Le=N[T+0],Ge=N[T+q],dt=N[T+2*q],Pt=N[T+3*q];return 4*iu[255+Fe-Le]+iu[255+Pe-Ge]>ee?0:iu[255+N[T-4*q]-_e]<=be&&iu[255+_e-Pe]<=be&&iu[255+Pe-Fe]<=be&&iu[255+Pt-dt]<=be&&iu[255+dt-Ge]<=be&&iu[255+Ge-Le]<=be}function Qd(N,T,q,ee){var be=2*ee+1;for(ee=0;16>ee;++ee)Pf(N,T+ee,q,be)&&eu(N,T+ee,q)}function xl(N,T,q,ee){var be=2*ee+1;for(ee=0;16>ee;++ee)Pf(N,T+ee*q,1,be)&&eu(N,T+ee*q,1)}function rm(N,T,q,ee){var be;for(be=3;0<be;--be)Qd(N,T+=4*q,q,ee)}function cg(N,T,q,ee){var be;for(be=3;0<be;--be)xl(N,T+=4,q,ee)}function vl(N,T,q,ee,be,_e,Pe,Fe){for(_e=2*_e+1;0<be--;){if(Ud(N,T,q,_e,Pe))if(eh(N,T,q,Fe))eu(N,T,q);else{var Le=N,Ge=T,dt=q,Pt=Le[Ge-2*dt],qe=Le[Ge-dt],ht=Le[Ge+0],Ct=Le[Ge+dt],Ut=Le[Ge+2*dt],Bt=27*(qt=j3[1020+3*(ht-qe)+j3[1020+Pt-Ct]])+63>>7,Gt=18*qt+63>>7,qt=9*qt+63>>7;Le[Ge-3*dt]=yc[255+Le[Ge-3*dt]+qt],Le[Ge-2*dt]=yc[255+Pt+Gt],Le[Ge-dt]=yc[255+qe+Bt],Le[Ge+0]=yc[255+ht-Bt],Le[Ge+dt]=yc[255+Ct-Gt],Le[Ge+2*dt]=yc[255+Ut-qt]}T+=ee}}function tu(N,T,q,ee,be,_e,Pe,Fe){for(_e=2*_e+1;0<be--;){if(Ud(N,T,q,_e,Pe))if(eh(N,T,q,Fe))eu(N,T,q);else{var Le=N,Ge=T,dt=q,Pt=Le[Ge-dt],qe=Le[Ge+0],ht=Le[Ge+dt],Ct=Fw[112+(4+(Ut=3*(qe-Pt))>>3)],Ut=Fw[112+(Ut+3>>3)],Bt=Ct+1>>1;Le[Ge-2*dt]=yc[255+Le[Ge-2*dt]+Bt],Le[Ge-dt]=yc[255+Pt+Ut],Le[Ge+0]=yc[255+qe-Ct],Le[Ge+dt]=yc[255+ht-Bt]}T+=ee}}function th(N,T,q,ee,be,_e){vl(N,T,q,1,16,ee,be,_e)}function ru(N,T,q,ee,be,_e){vl(N,T,1,q,16,ee,be,_e)}function nm(N,T,q,ee,be,_e){var Pe;for(Pe=3;0<Pe;--Pe)tu(N,T+=4*q,q,1,16,ee,be,_e)}function U(N,T,q,ee,be,_e){var Pe;for(Pe=3;0<Pe;--Pe)tu(N,T+=4,1,q,16,ee,be,_e)}function ye(N,T,q,ee,be,_e,Pe,Fe){vl(N,T,be,1,8,_e,Pe,Fe),vl(q,ee,be,1,8,_e,Pe,Fe)}function Ke(N,T,q,ee,be,_e,Pe,Fe){vl(N,T,1,be,8,_e,Pe,Fe),vl(q,ee,1,be,8,_e,Pe,Fe)}function it(N,T,q,ee,be,_e,Pe,Fe){tu(N,T+4*be,be,1,8,_e,Pe,Fe),tu(q,ee+4*be,be,1,8,_e,Pe,Fe)}function xt(N,T,q,ee,be,_e,Pe,Fe){tu(N,T+4,1,be,8,_e,Pe,Fe),tu(q,ee+4,1,be,8,_e,Pe,Fe)}function Kt(){this.ba=new ct,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dr(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new D}function Xr(){this.xb=this.a=0,this.l=new Na,this.ca=new ct,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dr,this.ab=0,this.gc=i(4,Ir),this.Oc=0}function sn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Na,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bn(N,T,q,ee,be,_e,Pe){for(N=N==null?0:N[T+0],T=0;T<Pe;++T)be[_e+T]=N+q[ee+T]&255,N=be[_e+T]}function ea(N,T,q,ee,be,_e,Pe){var Fe;if(N==null)Bn(null,null,q,ee,be,_e,Pe);else for(Fe=0;Fe<Pe;++Fe)be[_e+Fe]=N[T+Fe]+q[ee+Fe]&255}function ps(N,T,q,ee,be,_e,Pe){if(N==null)Bn(null,null,q,ee,be,_e,Pe);else{var Fe,Le=N[T+0],Ge=Le,dt=Le;for(Fe=0;Fe<Pe;++Fe)Ge=dt+(Le=N[T+Fe])-Ge,dt=q[ee+Fe]+(-256&Ge?0>Ge?0:255:Ge)&255,Ge=Le,be[_e+Fe]=dt}}function la(N,T,q,ee){var be=T.width,_e=T.o;if(e(N!=null&&T!=null),0>q||0>=ee||q+ee>_e)return null;if(!N.Cc){if(N.ga==null){var Pe;if(N.ga=new sn,(Pe=N.ga==null)||(Pe=T.width*T.o,e(N.Gb.length==0),N.Gb=s(Pe),N.Uc=0,N.Gb==null?Pe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Pe=1),Pe=!Pe),!Pe){Pe=N.ga;var Fe=N.Fa,Le=N.P,Ge=N.qc,dt=N.mb,Pt=N.nb,qe=Le+1,ht=Ge-1,Ct=Pe.l;if(e(Fe!=null&&dt!=null&&T!=null),uh[0]=null,uh[1]=Bn,uh[2]=ea,uh[3]=ps,Pe.ca=dt,Pe.tb=Pt,Pe.c=T.width,Pe.i=T.height,e(0<Pe.c&&0<Pe.i),1>=Ge)T=0;else if(Pe.$a=3&Fe[Le+0],Pe.Z=Fe[Le+0]>>2&3,Pe.Lc=Fe[Le+0]>>4&3,Le=Fe[Le+0]>>6&3,0>Pe.$a||1<Pe.$a||4<=Pe.Z||1<Pe.Lc||Le)T=0;else if(Ct.put=te,Ct.ac=Ue,Ct.bc=Ce,Ct.ma=Pe,Ct.width=T.width,Ct.height=T.height,Ct.Da=T.Da,Ct.v=T.v,Ct.va=T.va,Ct.j=T.j,Ct.o=T.o,Pe.$a)e:{e(Pe.$a==1),T=vt();t:for(;;){if(T==null){T=0;break e}if(e(Pe!=null),Pe.mc=T,T.c=Pe.c,T.i=Pe.i,T.l=Pe.l,T.l.ma=Pe,T.l.width=Pe.c,T.l.height=Pe.i,T.a=0,Z(T.m,Fe,qe,ht),!yt(Pe.c,Pe.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&ue(T.s)?(Pe.ic=1,Fe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Fe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Pe.ic=0,T=Et(T,Pe.c)),!T))break t;T=1;break e}Pe.mc=null,T=0}else T=ht>=Pe.c*Pe.i;Pe=!T}if(Pe)return null;N.ga.Lc!=1?N.Ga=0:ee=_e-q}e(N.ga!=null),e(q+ee<=_e);e:{if(T=(Fe=N.ga).c,_e=Fe.l.o,Fe.$a==0){if(qe=N.rc,ht=N.Vc,Ct=N.Fa,Le=N.P+1+q*T,Ge=N.mb,dt=N.nb+q*T,e(Le<=N.P+N.qc),Fe.Z!=0)for(e(uh[Fe.Z]!=null),Pe=0;Pe<ee;++Pe)uh[Fe.Z](qe,ht,Ct,Le,Ge,dt,T),qe=Ge,ht=dt,dt+=T,Le+=T;else for(Pe=0;Pe<ee;++Pe)n(Ge,dt,Ct,Le,T),qe=Ge,ht=dt,dt+=T,Le+=T;N.rc=qe,N.Vc=ht}else{if(e(Fe.mc!=null),T=q+ee,e((Pe=Fe.mc)!=null),e(T<=Pe.i),Pe.C>=T)T=1;else if(Fe.ic||Gl(),Fe.ic){Fe=Pe.V,qe=Pe.Ba,ht=Pe.c;var Ut=Pe.i,Bt=(Ct=1,Le=Pe.$/ht,Ge=Pe.$%ht,dt=Pe.m,Pt=Pe.s,Pe.$),Gt=ht*Ut,qt=ht*T,ar=Pt.wc,Zt=Bt<qt?re(Pt,Ge,Le):null;e(Bt<=Gt),e(T<=Ut),e(ue(Pt));t:for(;;){for(;!dt.h&&Bt<qt;){if(Ge&ar||(Zt=re(Pt,Ge,Le)),e(Zt!=null),Y(dt),256>(Ut=mt(Zt.G[0],Zt.H[0],dt)))Fe[qe+Bt]=Ut,++Bt,++Ge>=ht&&(Ge=0,++Le<=T&&!(Le%16)&&Te(Pe,Le));else{if(!(280>Ut)){Ct=0;break t}Ut=He(Ut-256,dt);var Hr,Tr=mt(Zt.G[4],Zt.H[4],dt);if(Y(dt),!(Bt>=(Tr=Ye(ht,Tr=He(Tr,dt)))&&Gt-Bt>=Ut)){Ct=0;break t}for(Hr=0;Hr<Ut;++Hr)Fe[qe+Bt+Hr]=Fe[qe+Bt+Hr-Tr];for(Bt+=Ut,Ge+=Ut;Ge>=ht;)Ge-=ht,++Le<=T&&!(Le%16)&&Te(Pe,Le);Bt<qt&&Ge&ar&&(Zt=re(Pt,Ge,Le))}e(dt.h==Q(dt))}Te(Pe,Le>T?T:Le);break t}!Ct||dt.h&&Bt<Gt?(Ct=0,Pe.a=dt.h?5:3):Pe.$=Bt,T=Ct}else T=tt(Pe,Pe.V,Pe.Ba,Pe.c,Pe.i,T,Ee);if(!T){ee=0;break e}}q+ee>=_e&&(N.Cc=1),ee=1}if(!ee)return null;if(N.Cc&&((ee=N.ga)!=null&&(ee.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+q*be}function js(N,T,q,ee,be,_e){for(;0<be--;){var Pe,Fe=N,Le=T+(q?1:0),Ge=N,dt=T+(q?0:3);for(Pe=0;Pe<ee;++Pe){var Pt=Ge[dt+4*Pe];Pt!=255&&(Pt*=32897,Fe[Le+4*Pe+0]=Fe[Le+4*Pe+0]*Pt>>23,Fe[Le+4*Pe+1]=Fe[Le+4*Pe+1]*Pt>>23,Fe[Le+4*Pe+2]=Fe[Le+4*Pe+2]*Pt>>23)}T+=_e}}function gs(N,T,q,ee,be){for(;0<ee--;){var _e;for(_e=0;_e<q;++_e){var Pe=N[T+2*_e+0],Fe=15&(Ge=N[T+2*_e+1]),Le=4369*Fe,Ge=(240&Ge|Ge>>4)*Le>>16;N[T+2*_e+0]=(240&Pe|Pe>>4)*Le>>16&240|(15&Pe|Pe<<4)*Le>>16>>4&15,N[T+2*_e+1]=240&Ge|Fe}T+=be}}function Ts(N,T,q,ee,be,_e,Pe,Fe){var Le,Ge,dt=255;for(Ge=0;Ge<be;++Ge){for(Le=0;Le<ee;++Le){var Pt=N[T+Le];_e[Pe+4*Le]=Pt,dt&=Pt}T+=q,Pe+=Fe}return dt!=255}function xs(N,T,q,ee,be){var _e;for(_e=0;_e<be;++_e)q[ee+_e]=N[T+_e]>>8}function Gl(){a1=js,I8=gs,B8=Ts,P8=xs}function nu(N,T,q){I[N]=function(ee,be,_e,Pe,Fe,Le,Ge,dt,Pt,qe,ht,Ct,Ut,Bt,Gt,qt,ar){var Zt,Hr=ar-1>>1,Tr=Fe[Le+0]|Ge[dt+0]<<16,hn=Pt[qe+0]|ht[Ct+0]<<16;e(ee!=null);var Mr=3*Tr+hn+131074>>2;for(T(ee[be+0],255&Mr,Mr>>16,Ut,Bt),_e!=null&&(Mr=3*hn+Tr+131074>>2,T(_e[Pe+0],255&Mr,Mr>>16,Gt,qt)),Zt=1;Zt<=Hr;++Zt){var Dn=Fe[Le+Zt]|Ge[dt+Zt]<<16,xi=Pt[qe+Zt]|ht[Ct+Zt]<<16,mn=Tr+Dn+hn+xi+524296,Lr=mn+2*(Dn+hn)>>3;Mr=Lr+Tr>>1,Tr=(mn=mn+2*(Tr+xi)>>3)+Dn>>1,T(ee[be+2*Zt-1],255&Mr,Mr>>16,Ut,Bt+(2*Zt-1)*q),T(ee[be+2*Zt-0],255&Tr,Tr>>16,Ut,Bt+(2*Zt-0)*q),_e!=null&&(Mr=mn+hn>>1,Tr=Lr+xi>>1,T(_e[Pe+2*Zt-1],255&Mr,Mr>>16,Gt,qt+(2*Zt-1)*q),T(_e[Pe+2*Zt+0],255&Tr,Tr>>16,Gt,qt+(2*Zt+0)*q)),Tr=Dn,hn=xi}1&ar||(Mr=3*Tr+hn+131074>>2,T(ee[be+ar-1],255&Mr,Mr>>16,Ut,Bt+(ar-1)*q),_e!=null&&(Mr=3*hn+Tr+131074>>2,T(_e[Pe+ar-1],255&Mr,Mr>>16,Gt,qt+(ar-1)*q)))}}function au(){ou[Ow]=ice,ou[Dw]=Q8,ou[D8]=oce,ou[Rw]=V8,ou[Mw]=H8,ou[T3]=$8,ou[R8]=lce,ou[k3]=Q8,ou[F3]=V8,ou[Lw]=H8,ou[O3]=$8}function C(N){return N&-16384?0>N?0:255:N>>cce}function W(N,T){return C((19077*N>>8)+(26149*T>>8)-14234)}function de(N,T,q){return C((19077*N>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function Oe(N,T){return C((19077*N>>8)+(33050*T>>8)-17685)}function wt(N,T,q,ee,be){ee[be+0]=W(N,q),ee[be+1]=de(N,T,q),ee[be+2]=Oe(N,T)}function Ft(N,T,q,ee,be){ee[be+0]=Oe(N,T),ee[be+1]=de(N,T,q),ee[be+2]=W(N,q)}function ur(N,T,q,ee,be){var _e=de(N,T,q);T=_e<<3&224|Oe(N,T)>>3,ee[be+0]=248&W(N,q)|_e>>5,ee[be+1]=T}function On(N,T,q,ee,be){var _e=240&Oe(N,T)|15;ee[be+0]=240&W(N,q)|de(N,T,q)>>4,ee[be+1]=_e}function vs(N,T,q,ee,be){ee[be+0]=255,wt(N,T,q,ee,be+1)}function Cn(N,T,q,ee,be){Ft(N,T,q,ee,be),ee[be+3]=255}function zn(N,T,q,ee,be){wt(N,T,q,ee,be),ee[be+3]=255}function Oa(N,T,q){I[N]=function(ee,be,_e,Pe,Fe,Le,Ge,dt,Pt){for(var qe=dt+(-2&Pt)*q;dt!=qe;)T(ee[be+0],_e[Pe+0],Fe[Le+0],Ge,dt),T(ee[be+1],_e[Pe+0],Fe[Le+0],Ge,dt+q),be+=2,++Pe,++Le,dt+=2*q;1&Pt&&T(ee[be+0],_e[Pe+0],Fe[Le+0],Ge,dt)}}function gc(N,T,q){return q==0?N==0?T==0?6:5:T==0?4:0:q}function $o(N,T,q,ee,be){switch(N>>>30){case 3:im(T,q,ee,be,0);break;case 2:su(T,q,ee,be);break;case 1:sa(T,q,ee,be)}}function go(N,T){var q,ee,be=T.M,_e=T.Nb,Pe=N.oc,Fe=N.pc+40,Le=N.oc,Ge=N.pc+584,dt=N.oc,Pt=N.pc+600;for(q=0;16>q;++q)Pe[Fe+32*q-1]=129;for(q=0;8>q;++q)Le[Ge+32*q-1]=129,dt[Pt+32*q-1]=129;for(0<be?Pe[Fe-1-32]=Le[Ge-1-32]=dt[Pt-1-32]=129:(a(Pe,Fe-32-1,127,21),a(Le,Ge-32-1,127,9),a(dt,Pt-32-1,127,9)),ee=0;ee<N.za;++ee){var qe=T.ya[T.aa+ee];if(0<ee){for(q=-1;16>q;++q)n(Pe,Fe+32*q-4,Pe,Fe+32*q+12,4);for(q=-1;8>q;++q)n(Le,Ge+32*q-4,Le,Ge+32*q+4,4),n(dt,Pt+32*q-4,dt,Pt+32*q+4,4)}var ht=N.Gd,Ct=N.Hd+ee,Ut=qe.ad,Bt=qe.Hc;if(0<be&&(n(Pe,Fe-32,ht[Ct].y,0,16),n(Le,Ge-32,ht[Ct].f,0,8),n(dt,Pt-32,ht[Ct].ea,0,8)),qe.Za){var Gt=Pe,qt=Fe-32+16;for(0<be&&(ee>=N.za-1?a(Gt,qt,ht[Ct].y[15],4):n(Gt,qt,ht[Ct+1].y,0,4)),q=0;4>q;q++)Gt[qt+128+q]=Gt[qt+256+q]=Gt[qt+384+q]=Gt[qt+0+q];for(q=0;16>q;++q,Bt<<=2)Gt=Pe,qt=Fe+G8[q],Wu[qe.Ob[q]](Gt,qt),$o(Bt,Ut,16*+q,Gt,qt)}else if(Gt=gc(ee,be,qe.Ob[0]),ch[Gt](Pe,Fe),Bt!=0)for(q=0;16>q;++q,Bt<<=2)$o(Bt,Ut,16*+q,Pe,Fe+G8[q]);for(q=qe.Gc,Gt=gc(ee,be,qe.Dd),kf[Gt](Le,Ge),kf[Gt](dt,Pt),Bt=Ut,Gt=Le,qt=Ge,255&(qe=0|q)&&(170&qe?$d(Bt,256,Gt,qt):Ba(Bt,256,Gt,qt)),qe=dt,Bt=Pt,255&(q>>=8)&&(170&q?$d(Ut,320,qe,Bt):Ba(Ut,320,qe,Bt)),be<N.Ub-1&&(n(ht[Ct].y,0,Pe,Fe+480,16),n(ht[Ct].f,0,Le,Ge+224,8),n(ht[Ct].ea,0,dt,Pt+224,8)),q=8*_e*N.B,ht=N.sa,Ct=N.ta+16*ee+16*_e*N.R,Ut=N.qa,qe=N.ra+8*ee+q,Bt=N.Ha,Gt=N.Ia+8*ee+q,q=0;16>q;++q)n(ht,Ct+q*N.R,Pe,Fe+32*q,16);for(q=0;8>q;++q)n(Ut,qe+q*N.B,Le,Ge+32*q,8),n(Bt,Gt+q*N.B,dt,Pt+32*q,8)}}function zu(N,T,q,ee,be,_e,Pe,Fe,Le){var Ge=[0],dt=[0],Pt=0,qe=Le!=null?Le.kd:0,ht=Le??new Xt;if(N==null||12>q)return 7;ht.data=N,ht.w=T,ht.ha=q,T=[T],q=[q],ht.gb=[ht.gb];e:{var Ct=T,Ut=q,Bt=ht.gb;if(e(N!=null),e(Ut!=null),e(Bt!=null),Bt[0]=0,12<=Ut[0]&&!r(N,Ct[0],"RIFF")){if(r(N,Ct[0]+8,"WEBP")){Bt=3;break e}var Gt=X(N,Ct[0]+4);if(12>Gt||4294967286<Gt){Bt=3;break e}if(qe&&Gt>Ut[0]-8){Bt=7;break e}Bt[0]=Gt,Ct[0]+=12,Ut[0]-=12}Bt=0}if(Bt!=0)return Bt;for(Gt=0<ht.gb[0],q=q[0];;){e:{var qt=N;Ut=T,Bt=q;var ar=Ge,Zt=dt,Hr=Ct=[0];if((Mr=Pt=[Pt])[0]=0,8>Bt[0])Bt=7;else{if(!r(qt,Ut[0],"VP8X")){if(X(qt,Ut[0]+4)!=10){Bt=3;break e}if(18>Bt[0]){Bt=7;break e}var Tr=X(qt,Ut[0]+8),hn=1+pe(qt,Ut[0]+12);if(2147483648<=hn*(qt=1+pe(qt,Ut[0]+15))){Bt=3;break e}Hr!=null&&(Hr[0]=Tr),ar!=null&&(ar[0]=hn),Zt!=null&&(Zt[0]=qt),Ut[0]+=18,Bt[0]-=18,Mr[0]=1}Bt=0}}if(Pt=Pt[0],Ct=Ct[0],Bt!=0)return Bt;if(Ut=!!(2&Ct),!Gt&&Pt)return 3;if(_e!=null&&(_e[0]=!!(16&Ct)),Pe!=null&&(Pe[0]=Ut),Fe!=null&&(Fe[0]=0),Pe=Ge[0],Ct=dt[0],Pt&&Ut&&Le==null){Bt=0;break}if(4>q){Bt=7;break}if(Gt&&Pt||!Gt&&!Pt&&!r(N,T[0],"ALPH")){q=[q],ht.na=[ht.na],ht.P=[ht.P],ht.Sa=[ht.Sa];e:{Tr=N,Bt=T,Gt=q;var Mr=ht.gb;ar=ht.na,Zt=ht.P,Hr=ht.Sa,hn=22,e(Tr!=null),e(Gt!=null),qt=Bt[0];var Dn=Gt[0];for(e(ar!=null),e(Hr!=null),ar[0]=null,Zt[0]=null,Hr[0]=0;;){if(Bt[0]=qt,Gt[0]=Dn,8>Dn){Bt=7;break e}var xi=X(Tr,qt+4);if(4294967286<xi){Bt=3;break e}var mn=8+xi+1&-2;if(hn+=mn,0<Mr&&hn>Mr){Bt=3;break e}if(!r(Tr,qt,"VP8 ")||!r(Tr,qt,"VP8L")){Bt=0;break e}if(Dn[0]<mn){Bt=7;break e}r(Tr,qt,"ALPH")||(ar[0]=Tr,Zt[0]=qt+8,Hr[0]=xi),qt+=mn,Dn-=mn}}if(q=q[0],ht.na=ht.na[0],ht.P=ht.P[0],ht.Sa=ht.Sa[0],Bt!=0)break}q=[q],ht.Ja=[ht.Ja],ht.xa=[ht.xa];e:if(Mr=N,Bt=T,Gt=q,ar=ht.gb[0],Zt=ht.Ja,Hr=ht.xa,Tr=Bt[0],qt=!r(Mr,Tr,"VP8 "),hn=!r(Mr,Tr,"VP8L"),e(Mr!=null),e(Gt!=null),e(Zt!=null),e(Hr!=null),8>Gt[0])Bt=7;else{if(qt||hn){if(Mr=X(Mr,Tr+4),12<=ar&&Mr>ar-12){Bt=3;break e}if(qe&&Mr>Gt[0]-8){Bt=7;break e}Zt[0]=Mr,Bt[0]+=8,Gt[0]-=8,Hr[0]=hn}else Hr[0]=5<=Gt[0]&&Mr[Tr+0]==47&&!(Mr[Tr+4]>>5),Zt[0]=Gt[0];Bt=0}if(q=q[0],ht.Ja=ht.Ja[0],ht.xa=ht.xa[0],T=T[0],Bt!=0)break;if(4294967286<ht.Ja)return 3;if(Fe==null||Ut||(Fe[0]=ht.xa?2:1),Pe=[Pe],Ct=[Ct],ht.xa){if(5>q){Bt=7;break}Fe=Pe,qe=Ct,Ut=_e,N==null||5>q?N=0:5<=q&&N[T+0]==47&&!(N[T+4]>>5)?(Gt=[0],Mr=[0],ar=[0],Z(Zt=new F,N,T,q),$e(Zt,Gt,Mr,ar)?(Fe!=null&&(Fe[0]=Gt[0]),qe!=null&&(qe[0]=Mr[0]),Ut!=null&&(Ut[0]=ar[0]),N=1):N=0):N=0}else{if(10>q){Bt=7;break}Fe=Ct,N==null||10>q||!ft(N,T+3,q-3)?N=0:(qe=N[T+0]|N[T+1]<<8|N[T+2]<<16,Ut=16383&(N[T+7]<<8|N[T+6]),N=16383&(N[T+9]<<8|N[T+8]),1&qe||3<(qe>>1&7)||!(qe>>4&1)||qe>>5>=ht.Ja||!Ut||!N?N=0:(Pe&&(Pe[0]=Ut),Fe&&(Fe[0]=N),N=1))}if(!N||(Pe=Pe[0],Ct=Ct[0],Pt&&(Ge[0]!=Pe||dt[0]!=Ct)))return 3;Le!=null&&(Le[0]=ht,Le.offset=T-Le.w,e(4294967286>T-Le.w),e(Le.offset==Le.ha-q));break}return Bt==0||Bt==7&&Pt&&Le==null?(_e!=null&&(_e[0]|=ht.na!=null&&0<ht.na.length),ee!=null&&(ee[0]=Pe),be!=null&&(be[0]=Ct),0):Bt}function Xv(N,T,q){var ee=T.width,be=T.height,_e=0,Pe=0,Fe=ee,Le=be;if(T.Da=N!=null&&0<N.Da,T.Da&&(Fe=N.cd,Le=N.bd,_e=N.v,Pe=N.j,11>q||(_e&=-2,Pe&=-2),0>_e||0>Pe||0>=Fe||0>=Le||_e+Fe>ee||Pe+Le>be))return 0;if(T.v=_e,T.j=Pe,T.va=_e+Fe,T.o=Pe+Le,T.U=Fe,T.T=Le,T.da=N!=null&&0<N.da,T.da){if(!Re(Fe,Le,q=[N.ib],_e=[N.hb]))return 0;T.ib=q[0],T.hb=_e[0]}return T.ob=N!=null&&N.ob,T.Kb=N==null||!N.Sd,T.da&&(T.ob=T.ib<3*ee/4&&T.hb<3*be/4,T.Kb=0),1}function Yv(N){if(N==null)return 2;if(11>N.S){var T=N.f.RGBA;T.fb+=(N.height-1)*T.A,T.A=-T.A}else T=N.f.kb,N=N.height,T.O+=(N-1)*T.fa,T.fa=-T.fa,T.N+=(N-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(N-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(N-1)*T.lb,T.lb=-T.lb);return 0}function rh(N,T,q,ee){if(ee==null||0>=N||0>=T)return 2;if(q!=null){if(q.Da){var be=q.cd,_e=q.bd,Pe=-2&q.v,Fe=-2&q.j;if(0>Pe||0>Fe||0>=be||0>=_e||Pe+be>N||Fe+_e>T)return 2;N=be,T=_e}if(q.da){if(!Re(N,T,be=[q.ib],_e=[q.hb]))return 2;N=be[0],T=_e[0]}}ee.width=N,ee.height=T;e:{var Le=ee.width,Ge=ee.height;if(N=ee.S,0>=Le||0>=Ge||!(N>=Ow&&13>N))N=2;else{if(0>=ee.Rd&&ee.sd==null){Pe=_e=be=T=0;var dt=(Fe=Le*q8[N])*Ge;if(11>N||(_e=(Ge+1)/2*(T=(Le+1)/2),N==12&&(Pe=(be=Le)*Ge)),(Ge=s(dt+2*_e+Pe))==null){N=1;break e}ee.sd=Ge,11>N?((Le=ee.f.RGBA).eb=Ge,Le.fb=0,Le.A=Fe,Le.size=dt):((Le=ee.f.kb).y=Ge,Le.O=0,Le.fa=Fe,Le.Fd=dt,Le.f=Ge,Le.N=0+dt,Le.Ab=T,Le.Cd=_e,Le.ea=Ge,Le.W=0+dt+_e,Le.Db=T,Le.Ed=_e,N==12&&(Le.F=Ge,Le.J=0+dt+2*_e),Le.Tc=Pe,Le.lb=be)}if(T=1,be=ee.S,_e=ee.width,Pe=ee.height,be>=Ow&&13>be)if(11>be)N=ee.f.RGBA,T&=(Fe=Math.abs(N.A))*(Pe-1)+_e<=N.size,T&=Fe>=_e*q8[be],T&=N.eb!=null;else{N=ee.f.kb,Fe=(_e+1)/2,dt=(Pe+1)/2,Le=Math.abs(N.fa),Ge=Math.abs(N.Ab);var Pt=Math.abs(N.Db),qe=Math.abs(N.lb),ht=qe*(Pe-1)+_e;T&=Le*(Pe-1)+_e<=N.Fd,T&=Ge*(dt-1)+Fe<=N.Cd,T=(T&=Pt*(dt-1)+Fe<=N.Ed)&Le>=_e&Ge>=Fe&Pt>=Fe,T&=N.y!=null,T&=N.f!=null,T&=N.ea!=null,be==12&&(T&=qe>=_e,T&=ht<=N.Tc,T&=N.F!=null)}else T=0;N=T?0:2}}return N!=0||q!=null&&q.fd&&(N=Yv(ee)),N}var am=64,xc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vc=24,nh=32,jf=8,ah=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(N){return N},I.Predictor2=function(N,T,q){return T[q+0]},I.Predictor3=function(N,T,q){return T[q+1]},I.Predictor4=function(N,T,q){return T[q-1]},I.Predictor5=function(N,T,q){return bt(bt(N,T[q+1]),T[q+0])},I.Predictor6=function(N,T,q){return bt(N,T[q-1])},I.Predictor7=function(N,T,q){return bt(N,T[q+0])},I.Predictor8=function(N,T,q){return bt(T[q-1],T[q+0])},I.Predictor9=function(N,T,q){return bt(T[q+0],T[q+1])},I.Predictor10=function(N,T,q){return bt(bt(N,T[q-1]),bt(T[q+0],T[q+1]))},I.Predictor11=function(N,T,q){var ee=T[q+0];return 0>=et(ee>>24&255,N>>24&255,(T=T[q-1])>>24&255)+et(ee>>16&255,N>>16&255,T>>16&255)+et(ee>>8&255,N>>8&255,T>>8&255)+et(255&ee,255&N,255&T)?ee:N},I.Predictor12=function(N,T,q){var ee=T[q+0];return(St((N>>24&255)+(ee>>24&255)-((T=T[q-1])>>24&255))<<24|St((N>>16&255)+(ee>>16&255)-(T>>16&255))<<16|St((N>>8&255)+(ee>>8&255)-(T>>8&255))<<8|St((255&N)+(255&ee)-(255&T)))>>>0},I.Predictor13=function(N,T,q){var ee=T[q-1];return(kt((N=bt(N,T[q+0]))>>24&255,ee>>24&255)<<24|kt(N>>16&255,ee>>16&255)<<16|kt(N>>8&255,ee>>8&255)<<8|kt(255&N,255&ee))>>>0};var Jv=I.PredictorAdd0;I.PredictorAdd1=ce,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var ug=I.PredictorAdd2;oe("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),oe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Vs,Tw=I.ColorIndexInverseTransform,Vd=I.MapARGB,Hd=I.VP8LColorIndexInverseTransformAlpha,Zv=I.MapAlpha,e1=I.VP8LPredictorsAdd=[];e1.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var t1,r1,sh,ih,oh,sm,lh,im,su,$d,sa,Ba,Hs,gi,Tf,n1,dg,kw,w8,N8,C8,_8,E8,S8,a1,I8,B8,P8,j8=s(511),T8=s(2041),k8=s(225),F8=s(767),O8=0,j3=T8,Fw=k8,yc=F8,iu=j8,Ow=0,Dw=1,D8=2,Rw=3,Mw=4,T3=5,R8=6,k3=7,F3=8,Lw=9,O3=10,Gle=[2,3,7],qle=[3,3,11],M8=[280,256,256,256,40],zle=[0,1,1,1,0],Wle=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xle=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yle=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jle=8,D3=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],R3=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],s1=null,Zle=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ece=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],L8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tce=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rce=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nce=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ace=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ch=[],Wu=[],kf=[],sce=1,U8=2,uh=[],ou=[];nu("UpsampleRgbLinePair",wt,3),nu("UpsampleBgrLinePair",Ft,3),nu("UpsampleRgbaLinePair",zn,4),nu("UpsampleBgraLinePair",Cn,4),nu("UpsampleArgbLinePair",vs,4),nu("UpsampleRgba4444LinePair",On,2),nu("UpsampleRgb565LinePair",ur,2);var ice=I.UpsampleRgbLinePair,oce=I.UpsampleBgrLinePair,Q8=I.UpsampleRgbaLinePair,V8=I.UpsampleBgraLinePair,H8=I.UpsampleArgbLinePair,$8=I.UpsampleRgba4444LinePair,lce=I.UpsampleRgb565LinePair,Uw=16,Qw=1<<Uw-1,i1=-227,M3=482,cce=6,K8=0,uce=s(256),dce=s(256),fce=s(256),Ace=s(256),hce=s(M3-i1),mce=s(M3-i1);Oa("YuvToRgbRow",wt,3),Oa("YuvToBgrRow",Ft,3),Oa("YuvToRgbaRow",zn,4),Oa("YuvToBgraRow",Cn,4),Oa("YuvToArgbRow",vs,4),Oa("YuvToRgba4444Row",On,2),Oa("YuvToRgb565Row",ur,2);var G8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vw=[0,2,8],pce=[8,7,6,4,4,2,2,2,1,1,1,1],gce=1;this.WebPDecodeRGBA=function(N,T,q,ee,be){var _e=Dw,Pe=new Kt,Fe=new ct;Pe.ba=Fe,Fe.S=_e,Fe.width=[Fe.width],Fe.height=[Fe.height];var Le=Fe.width,Ge=Fe.height,dt=new Xe;if(dt==null||N==null)var Pt=2;else e(dt!=null),Pt=zu(N,T,q,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(Pt!=0?Le=0:(Le!=null&&(Le[0]=dt.width[0]),Ge!=null&&(Ge[0]=dt.height[0]),Le=1),Le){Fe.width=Fe.width[0],Fe.height=Fe.height[0],ee!=null&&(ee[0]=Fe.width),be!=null&&(be[0]=Fe.height);e:{if(ee=new Na,(be=new Xt).data=N,be.w=T,be.ha=q,be.kd=1,T=[0],e(be!=null),((N=zu(be.data,be.w,be.ha,null,null,null,T,null,be))==0||N==7)&&T[0]&&(N=4),(T=N)==0){if(e(Pe!=null),ee.data=be.data,ee.w=be.w+be.offset,ee.ha=be.ha-be.offset,ee.put=te,ee.ac=Ue,ee.bc=Ce,ee.ma=Pe,be.xa){if((N=vt())==null){Pe=1;break e}if(function(qe,ht){var Ct=[0],Ut=[0],Bt=[0];t:for(;;){if(qe==null)return 0;if(ht==null)return qe.a=2,0;if(qe.l=ht,qe.a=0,Z(qe.m,ht.data,ht.w,ht.ha),!$e(qe.m,Ct,Ut,Bt)){qe.a=3;break t}if(qe.xb=U8,ht.width=Ct[0],ht.height=Ut[0],!yt(Ct[0],Ut[0],1,qe,null))break t;return 1}return e(qe.a!=0),0}(N,ee)){if(ee=(T=rh(ee.width,ee.height,Pe.Oa,Pe.ba))==0){t:{ee=N;r:for(;;){if(ee==null){ee=0;break t}if(e(ee.s.yc!=null),e(ee.s.Ya!=null),e(0<ee.s.Wb),e((q=ee.l)!=null),e((be=q.ma)!=null),ee.xb!=0){if(ee.ca=be.ba,ee.tb=be.tb,e(ee.ca!=null),!Xv(be.Oa,q,Rw)){ee.a=2;break r}if(!Et(ee,q.width)||q.da)break r;if((q.da||De(ee.ca.S))&&Gl(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&Gl()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!G(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!tt(ee,ee.V,ee.Ba,ee.c,ee.i,q.o,Ae))break r;be.Dc=ee.Ma,ee=1;break t}e(ee.a!=0),ee=0}ee=!ee}ee&&(T=N.a)}else T=N.a}else{if((N=new Ku)==null){Pe=1;break e}if(N.Fa=be.na,N.P=be.P,N.qc=be.Sa,xr(N,ee)){if((T=rh(ee.width,ee.height,Pe.Oa,Pe.ba))==0){if(N.Aa=0,q=Pe.Oa,e((be=N)!=null),q!=null){if(0<(Le=0>(Le=q.Md)?0:100<Le?255:255*Le/100)){for(Ge=dt=0;4>Ge;++Ge)12>(Pt=be.pb[Ge]).lc&&(Pt.ia=Le*pce[0>Pt.lc?0:Pt.lc]>>3),dt|=Pt.ia;dt&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=q.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}(function(qe,ht){if(qe==null)return 0;if(ht==null)return Rn(qe,2,"NULL VP8Io parameter in VP8Decode().");if(!qe.cb&&!xr(qe,ht))return 0;if(e(qe.cb),ht.ac==null||ht.ac(ht)){ht.ob&&(qe.L=0);var Ct=Vw[qe.L];if(qe.L==2?(qe.yb=0,qe.zb=0):(qe.yb=ht.v-Ct>>4,qe.zb=ht.j-Ct>>4,0>qe.yb&&(qe.yb=0),0>qe.zb&&(qe.zb=0)),qe.Va=ht.o+15+Ct>>4,qe.Hb=ht.va+15+Ct>>4,qe.Hb>qe.za&&(qe.Hb=qe.za),qe.Va>qe.Ub&&(qe.Va=qe.Ub),0<qe.L){var Ut=qe.ed;for(Ct=0;4>Ct;++Ct){var Bt;if(qe.Qa.Cb){var Gt=qe.Qa.Lb[Ct];qe.Qa.Fb||(Gt+=Ut.Tb)}else Gt=Ut.Tb;for(Bt=0;1>=Bt;++Bt){var qt=qe.gd[Ct][Bt],ar=Gt;if(Ut.Pc&&(ar+=Ut.vd[0],Bt&&(ar+=Ut.od[0])),0<(ar=0>ar?0:63<ar?63:ar)){var Zt=ar;0<Ut.wb&&(Zt=4<Ut.wb?Zt>>2:Zt>>1)>9-Ut.wb&&(Zt=9-Ut.wb),1>Zt&&(Zt=1),qt.dd=Zt,qt.tc=2*ar+Zt,qt.ld=40<=ar?2:15<=ar?1:0}else qt.tc=0;qt.La=Bt}}}Ct=0}else Rn(qe,6,"Frame setup failed"),Ct=qe.a;if(Ct=Ct==0){if(Ct){qe.$c=0,0<qe.Aa||(qe.Ic=gce);t:{Ct=qe.Ic,Ut=4*(Zt=qe.za);var Hr=32*Zt,Tr=Zt+1,hn=0<qe.L?Zt*(0<qe.Aa?2:1):0,Mr=(qe.Aa==2?2:1)*Zt;if((qt=Ut+832+(Bt=3*(16*Ct+Vw[qe.L])/2*Hr)+(Gt=qe.Fa!=null&&0<qe.Fa.length?qe.Kc.c*qe.Kc.i:0))!=qt)Ct=0;else{if(qt>qe.Vb){if(qe.Vb=0,qe.Ec=s(qt),qe.Fc=0,qe.Ec==null){Ct=Rn(qe,1,"no memory during frame initialization.");break t}qe.Vb=qt}qt=qe.Ec,ar=qe.Fc,qe.Ac=qt,qe.Bc=ar,ar+=Ut,qe.Gd=i(Hr,Or),qe.Hd=0,qe.rb=i(Tr+1,Vt),qe.sb=1,qe.wa=hn?i(hn,Ot):null,qe.Y=0,qe.D.Nb=0,qe.D.wa=qe.wa,qe.D.Y=qe.Y,0<qe.Aa&&(qe.D.Y+=Zt),e(!0),qe.oc=qt,qe.pc=ar,ar+=832,qe.ya=i(Mr,Ht),qe.aa=0,qe.D.ya=qe.ya,qe.D.aa=qe.aa,qe.Aa==2&&(qe.D.aa+=Zt),qe.R=16*Zt,qe.B=8*Zt,Zt=(Hr=Vw[qe.L])*qe.R,Hr=Hr/2*qe.B,qe.sa=qt,qe.ta=ar+Zt,qe.qa=qe.sa,qe.ra=qe.ta+16*Ct*qe.R+Hr,qe.Ha=qe.qa,qe.Ia=qe.ra+8*Ct*qe.B+Hr,qe.$c=0,ar+=Bt,qe.mb=Gt?qt:null,qe.nb=Gt?ar:null,e(ar+Gt<=qe.Fc+qe.Vb),fr(qe),a(qe.Ac,qe.Bc,0,Ut),Ct=1}}if(Ct){if(ht.ka=0,ht.y=qe.sa,ht.O=qe.ta,ht.f=qe.qa,ht.N=qe.ra,ht.ea=qe.Ha,ht.Vd=qe.Ia,ht.fa=qe.R,ht.Rc=qe.B,ht.F=null,ht.J=0,!O8){for(Ct=-255;255>=Ct;++Ct)j8[255+Ct]=0>Ct?-Ct:Ct;for(Ct=-1020;1020>=Ct;++Ct)T8[1020+Ct]=-128>Ct?-128:127<Ct?127:Ct;for(Ct=-112;112>=Ct;++Ct)k8[112+Ct]=-16>Ct?-16:15<Ct?15:Ct;for(Ct=-255;510>=Ct;++Ct)F8[255+Ct]=0>Ct?0:255<Ct?255:Ct;O8=1}lh=pi,im=gn,$d=an,sa=Ho,Ba=si,su=Vr,Hs=th,gi=ru,Tf=ye,n1=Ke,dg=nm,kw=U,w8=it,N8=xt,C8=Qd,_8=xl,E8=rm,S8=cg,Wu[0]=zv,Wu[1]=If,Wu[2]=Gv,Wu[3]=qv,Wu[4]=Gi,Wu[5]=Wv,Wu[6]=Gu,Wu[7]=JA,Wu[8]=ZA,Wu[9]=qu,ch[0]=Jc,ch[1]=Z0,ch[2]=Md,ch[3]=ig,ch[4]=Ld,ch[5]=YA,ch[6]=og,kf[0]=em,kf[1]=XA,kf[2]=pc,kf[3]=Bf,kf[4]=tm,kf[5]=Ca,kf[6]=lg,Ct=1}else Ct=0}Ct&&(Ct=function(Dn,xi){for(Dn.M=0;Dn.M<Dn.Va;++Dn.M){var mn,Lr=Dn.Jc[Dn.M&Dn.Xb],yr=Dn.m,$s=Dn;for(mn=0;mn<$s.za;++mn){var dn=yr,Mn=$s,$a=Mn.Ac,xo=Mn.Bc+4*mn,yl=Mn.zc,ks=Mn.ya[Mn.aa+mn];if(Mn.Qa.Bb?ks.$b=le(dn,Mn.Pa.jb[0])?2+le(dn,Mn.Pa.jb[2]):le(dn,Mn.Pa.jb[1]):ks.$b=0,Mn.kc&&(ks.Ad=le(dn,Mn.Bd)),ks.Za=!le(dn,145)+0,ks.Za){var Ko=ks.Ob,bl=0;for(Mn=0;4>Mn;++Mn){var vi,Vn=yl[0+Mn];for(vi=0;4>vi;++vi){Vn=rce[$a[xo+vi]][Vn];for(var ca=L8[le(dn,Vn[0])];0<ca;)ca=L8[2*ca+le(dn,Vn[ca])];Vn=-ca,$a[xo+vi]=Vn}n(Ko,bl,$a,xo,4),bl+=4,yl[0+Mn]=Vn}}else Vn=le(dn,156)?le(dn,128)?1:3:le(dn,163)?2:0,ks.Ob[0]=Vn,a($a,xo,Vn,4),a(yl,0,Vn,4);ks.Dd=le(dn,142)?le(dn,114)?le(dn,183)?1:3:2:0}if($s.m.Ka)return Rn(Dn,7,"Premature end-of-partition0 encountered.");for(;Dn.ja<Dn.za;++Dn.ja){if($s=Lr,dn=(yr=Dn).rb[yr.sb-1],$a=yr.rb[yr.sb+yr.ja],mn=yr.ya[yr.aa+yr.ja],xo=yr.kc?mn.Ad:0)dn.la=$a.la=0,mn.Za||(dn.Na=$a.Na=0),mn.Hc=0,mn.Gc=0,mn.ia=0;else{var Fs,ua;if(dn=$a,$a=$s,xo=yr.Pa.Xc,yl=yr.ya[yr.aa+yr.ja],ks=yr.pb[yl.$b],Mn=yl.ad,Ko=0,bl=yr.rb[yr.sb-1],Vn=vi=0,a(Mn,Ko,0,384),yl.Za)var vo=0,Xu=xo[3];else{ca=s(16);var Ks=dn.Na+bl.Na;if(Ks=s1($a,xo[1],Ks,ks.Eb,0,ca,0),dn.Na=bl.Na=(0<Ks)+0,1<Ks)lh(ca,0,Mn,Ko);else{var ql=ca[0]+3>>3;for(ca=0;256>ca;ca+=16)Mn[Ko+ca]=ql}vo=1,Xu=xo[0]}var Pa=15&dn.la,yi=15&bl.la;for(ca=0;4>ca;++ca){var bc=1&yi;for(ql=ua=0;4>ql;++ql)Pa=Pa>>1|(bc=(Ks=s1($a,Xu,Ks=bc+(1&Pa),ks.Sc,vo,Mn,Ko))>vo)<<7,ua=ua<<2|(3<Ks?3:1<Ks?2:Mn[Ko+0]!=0),Ko+=16;Pa>>=4,yi=yi>>1|bc<<7,vi=(vi<<8|ua)>>>0}for(Xu=Pa,vo=yi>>4,Fs=0;4>Fs;Fs+=2){for(ua=0,Pa=dn.la>>4+Fs,yi=bl.la>>4+Fs,ca=0;2>ca;++ca){for(bc=1&yi,ql=0;2>ql;++ql)Ks=bc+(1&Pa),Pa=Pa>>1|(bc=0<(Ks=s1($a,xo[2],Ks,ks.Qc,0,Mn,Ko)))<<3,ua=ua<<2|(3<Ks?3:1<Ks?2:Mn[Ko+0]!=0),Ko+=16;Pa>>=2,yi=yi>>1|bc<<5}Vn|=ua<<4*Fs,Xu|=Pa<<4<<Fs,vo|=(240&yi)<<Fs}dn.la=Xu,bl.la=vo,yl.Hc=vi,yl.Gc=Vn,yl.ia=43690&Vn?0:ks.ia,xo=!(vi|Vn)}if(0<yr.L&&(yr.wa[yr.Y+yr.ja]=yr.gd[mn.$b][mn.Za],yr.wa[yr.Y+yr.ja].La|=!xo),$s.Ka)return Rn(Dn,7,"Premature end-of-file encountered.")}if(fr(Dn),yr=xi,$s=1,mn=(Lr=Dn).D,dn=0<Lr.L&&Lr.M>=Lr.zb&&Lr.M<=Lr.Va,Lr.Aa==0)t:{if(mn.M=Lr.M,mn.uc=dn,go(Lr,mn),$s=1,mn=(ua=Lr.D).Nb,dn=(Vn=Vw[Lr.L])*Lr.R,$a=Vn/2*Lr.B,ca=16*mn*Lr.R,ql=8*mn*Lr.B,xo=Lr.sa,yl=Lr.ta-dn+ca,ks=Lr.qa,Mn=Lr.ra-$a+ql,Ko=Lr.Ha,bl=Lr.Ia-$a+ql,yi=(Pa=ua.M)==0,vi=Pa>=Lr.Va-1,Lr.Aa==2&&go(Lr,ua),ua.uc)for(bc=(Ks=Lr).D.M,e(Ks.D.uc),ua=Ks.yb;ua<Ks.Hb;++ua){vo=ua,Xu=bc;var wl=(wc=(yo=Ks).D).Nb;Fs=yo.R;var wc=wc.wa[wc.Y+vo],Nc=yo.sa,zl=yo.ta+16*wl*Fs+16*vo,Cc=wc.dd,Da=wc.tc;if(Da!=0)if(e(3<=Da),yo.L==1)0<vo&&_8(Nc,zl,Fs,Da+4),wc.La&&S8(Nc,zl,Fs,Da),0<Xu&&C8(Nc,zl,Fs,Da+4),wc.La&&E8(Nc,zl,Fs,Da);else{var _c=yo.B,Yu=yo.qa,om=yo.ra+8*wl*_c+8*vo,Ff=yo.Ha,yo=yo.Ia+8*wl*_c+8*vo;wl=wc.ld,0<vo&&(gi(Nc,zl,Fs,Da+4,Cc,wl),n1(Yu,om,Ff,yo,_c,Da+4,Cc,wl)),wc.La&&(kw(Nc,zl,Fs,Da,Cc,wl),N8(Yu,om,Ff,yo,_c,Da,Cc,wl)),0<Xu&&(Hs(Nc,zl,Fs,Da+4,Cc,wl),Tf(Yu,om,Ff,yo,_c,Da+4,Cc,wl)),wc.La&&(dg(Nc,zl,Fs,Da,Cc,wl),w8(Yu,om,Ff,yo,_c,Da,Cc,wl))}}if(Lr.ia&&alert("todo:DitherRow"),yr.put!=null){if(ua=16*Pa,Pa=16*(Pa+1),yi?(yr.y=Lr.sa,yr.O=Lr.ta+ca,yr.f=Lr.qa,yr.N=Lr.ra+ql,yr.ea=Lr.Ha,yr.W=Lr.Ia+ql):(ua-=Vn,yr.y=xo,yr.O=yl,yr.f=ks,yr.N=Mn,yr.ea=Ko,yr.W=bl),vi||(Pa-=Vn),Pa>yr.o&&(Pa=yr.o),yr.F=null,yr.J=null,Lr.Fa!=null&&0<Lr.Fa.length&&ua<Pa&&(yr.J=la(Lr,yr,ua,Pa-ua),yr.F=Lr.mb,yr.F==null&&yr.F.length==0)){$s=Rn(Lr,3,"Could not decode alpha data.");break t}ua<yr.j&&(Vn=yr.j-ua,ua=yr.j,e(!(1&Vn)),yr.O+=Lr.R*Vn,yr.N+=Lr.B*(Vn>>1),yr.W+=Lr.B*(Vn>>1),yr.F!=null&&(yr.J+=yr.width*Vn)),ua<Pa&&(yr.O+=yr.v,yr.N+=yr.v>>1,yr.W+=yr.v>>1,yr.F!=null&&(yr.J+=yr.v),yr.ka=ua-yr.j,yr.U=yr.va-yr.v,yr.T=Pa-ua,$s=yr.put(yr))}mn+1!=Lr.Ic||vi||(n(Lr.sa,Lr.ta-dn,xo,yl+16*Lr.R,dn),n(Lr.qa,Lr.ra-$a,ks,Mn+8*Lr.B,$a),n(Lr.Ha,Lr.Ia-$a,Ko,bl+8*Lr.B,$a))}if(!$s)return Rn(Dn,6,"Output aborted.")}return 1}(qe,ht)),ht.bc!=null&&ht.bc(ht),Ct&=1}return Ct?(qe.cb=0,Ct):0})(N,ee)||(T=N.a)}}else T=N.a}T==0&&Pe.Oa!=null&&Pe.Oa.fd&&(T=Yv(Pe.ba))}Pe=T}_e=Pe!=0?null:11>_e?Fe.f.RGBA.eb:Fe.f.kb.y}else _e=null;return _e};var q8=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,O){for(var S="",j=0;j<4;j++)S+=String.fromCharCode(I[O++]);return S}function d(I,O){return I[O+0]|I[O+1]<<8}function f(I,O){return(I[O+0]|I[O+1]<<8|I[O+2]<<16)>>>0}function h(I,O){return(I[O+0]|I[O+1]<<8|I[O+2]<<16|I[O+3]<<24)>>>0}new c;var A=[0],m=[0],p=[],g=new c,x=t,y=function(I,O){var S={},j=0,D=!1,J=0,ge=0;if(S.frames=[],!function(k,F){for(var H=0;H<4;H++)if(k[F+H]!="RIFF".charCodeAt(H))return!0;return!1}(I,O)){for(h(I,O+=4),O+=8;O<I.length;){var se=u(I,O),he=h(I,O+=4);O+=4;var me=he+(1&he);switch(se){case"VP8 ":case"VP8L":S.frames[j]===void 0&&(S.frames[j]={}),(Se=S.frames[j]).src_off=D?ge:O-8,Se.src_size=J+he+8,j++,D&&(D=!1,J=0,ge=0);break;case"VP8X":(Se=S.header={}).feature_flags=I[O];var Z=O+4;Se.canvas_width=1+f(I,Z),Z+=3,Se.canvas_height=1+f(I,Z),Z+=3;break;case"ALPH":D=!0,J=me+8,ge=O-8;break;case"ANIM":(Se=S.header).bgcolor=h(I,O),Z=O+4,Se.loop_count=d(I,Z),Z+=2;break;case"ANMF":var ve,Se;(Se=S.frames[j]={}).offset_x=2*f(I,O),O+=3,Se.offset_y=2*f(I,O),O+=3,Se.width=1+f(I,O),O+=3,Se.height=1+f(I,O),O+=3,Se.duration=f(I,O),O+=3,ve=I[O++],Se.dispose=1&ve,Se.blend=ve>>1&1}se!="ANMF"&&(O+=me)}return S}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,A=[b.canvas_height],m=[b.canvas_width];for(var B=0;B<w.length&&w[B].blend!=0;B++);}var P=w[0],_=g.WebPDecodeRGBA(x,P.src_off,P.src_size,m,A);P.rgba=_,P.imgwidth=m[0],P.imgheight=A[0];for(var E=0;E<m[0]*A[0]*4;E++)p[E]=_[E];return this.width=m,this.height=A,this.data=p,this}(function(t){var e,r,n,a,s,i,l,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new i,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new i,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=k;Object.defineProperty(this,"pdf",{get:function(){return F}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(G){H=!!G}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(G){Q=!!G}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(G){isNaN(G)||(V=G)}});var Y=0;Object.defineProperty(this,"posY",{get:function(){return Y},set:function(G){isNaN(G)||(Y=G)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(G){var ie;typeof G=="number"?ie=[G,G,G,G]:((ie=new Array(4))[0]=G[0],ie[1]=G.length>=2?G[1]:ie[0],ie[2]=G.length>=3?G[2]:ie[0],ie[3]=G.length>=4?G[3]:ie[1]),u.margin=ie}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(G){R=G}});var z=0;Object.defineProperty(this,"lastBreak",{get:function(){return z},set:function(G){z=G}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(G){le=G}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(G){G instanceof d&&(u=G)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(G){u.path=G}});var K=[];Object.defineProperty(this,"ctxStack",{get:function(){return K},set:function(G){K=G}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(G){var ie;ie=h(G),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(G){var ie=h(G);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(G){["butt","round","square"].indexOf(G)!==-1&&(this.ctx.lineCap=G,this.pdf.setLineCap(G))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(G){isNaN(G)||(this.ctx.lineWidth=G,this.pdf.setLineWidth(G))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(G){["bevel","round","miter"].indexOf(G)!==-1&&(this.ctx.lineJoin=G,this.pdf.setLineJoin(G))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(G){isNaN(G)||(this.ctx.miterLimit=G,this.pdf.setMiterLimit(G))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(G){this.ctx.textBaseline=G}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(G){["right","end","center","left","start"].indexOf(G)!==-1&&(this.ctx.textAlign=G)}});var M=null,pe=null,X=null;Object.defineProperty(this,"fontFaces",{get:function(){return X},set:function(G){M=null,pe=null,X=G}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(G){var ie;if(this.ctx.font=G,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(G))!==null){var Ie=ie[1];ie[2];var Re=ie[3],ze=ie[4];ie[5];var st=ie[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(lt==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var _t=function(oe){var Be,Me,Ze=[],Je=oe.trim();if(Je==="")return xB;if(Je in lQ)return[lQ[Je]];for(;Je!=="";){switch(Me=null,Be=(Je=uQ(Je)).charAt(0)){case'"':case"'":Me=LEe(Je.substring(1),Be);break;default:Me=UEe(Je)}if(Me===null||(Ze.push(Me[0]),(Je=uQ(Me[1]))!==""&&Je.charAt(0)!==","))return xB;Je=Je.replace(/^,/,"")}return Ze}(st);if(this.fontFaces){var bt=function(oe,Be){var Me=oe.getFontList(),Ze=JSON.stringify(Me);if(M===null||pe!==Ze){var Je=function(nt){var ke=[];return Object.keys(nt).forEach(function(ae){nt[ae].forEach(function(De){var We=null;switch(De){case"bold":We={family:ae,weight:"bold"};break;case"italic":We={family:ae,style:"italic"};break;case"bolditalic":We={family:ae,weight:"bold",style:"italic"};break;case"":case"normal":We={family:ae}}We!==null&&(We.ref={name:ae,style:De},ke.push(We))})}),ke}(Me);M=function(nt){for(var ke={},ae=0;ae<nt.length;++ae){var De=gB(nt[ae]),We=De.family,pt=De.stretch,ct=De.style,Xe=De.weight;ke[We]=ke[We]||{},ke[We][pt]=ke[We][pt]||{},ke[We][pt][ct]=ke[We][pt][ct]||{},ke[We][pt][ct][Xe]=De}return ke}(Je.concat(Be)),pe=Ze}return M}(this.pdf,this.fontFaces),St=_t.map(function(oe){return{family:oe,stretch:"normal",weight:Re,style:Ie}}),kt=function(oe,Be,Me){for(var Ze=(Me=Me||{}).defaultFontFamily||"times",Je=Object.assign({},MEe,Me.genericFontFamilies||{}),nt=null,ke=null,ae=0;ae<Be.length;++ae)if(Je[(nt=gB(Be[ae])).family]&&(nt.family=Je[nt.family]),oe.hasOwnProperty(nt.family)){ke=oe[nt.family];break}if(!(ke=ke||oe[Ze]))throw new Error("Could not find a font-family for the rule '"+cQ(nt)+"' and default family '"+Ze+"'.");if(ke=function(De,We){if(We[De])return We[De];var pt=RT[De],ct=pt<=RT.normal?-1:1,Xe=oQ(We,Lee,pt,ct);if(!Xe)throw new Error("Could not find a matching font-stretch value for "+De);return Xe}(nt.stretch,ke),ke=function(De,We){if(We[De])return We[De];for(var pt=Mee[De],ct=0;ct<pt.length;++ct)if(We[pt[ct]])return We[pt[ct]];throw new Error("Could not find a matching font-style for "+De)}(nt.style,ke),!(ke=function(De,We){if(We[De])return We[De];if(De===400&&We[500])return We[500];if(De===500&&We[400])return We[400];var pt=REe[De],ct=oQ(We,Uee,pt,De<400?-1:1);if(!ct)throw new Error("Could not find a matching font-weight for value "+De);return ct}(nt.weight,ke)))throw new Error("Failed to resolve a font for the rule '"+cQ(nt)+"'.");return ke}(bt,St);this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var et="";(Re==="bold"||parseInt(Re,10)>=700||Ie==="bold")&&(et="bold"),Ie==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ce="",Qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xe=0;xe<_t.length;xe++){if(this.pdf.internal.getFont(_t[xe],et,{noFallback:!0,disableWarning:!0})!==void 0){ce=_t[xe];break}if(et==="bolditalic"&&this.pdf.internal.getFont(_t[xe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ce=_t[xe],et="bold";else if(this.pdf.internal.getFont(_t[xe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ce=_t[xe],et="normal";break}}if(ce===""){for(var fe=0;fe<_t.length;fe++)if(Qe[_t[fe]]){ce=Qe[_t[fe]];break}}ce=ce===""?"Times":ce,this.pdf.setFont(ce,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(G){this.ctx.globalCompositeOperation=G}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(G){this.ctx.globalAlpha=G}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(G){this.ctx.lineDashOffset=G,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(G){this.ctx.lineDash=G,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(G){this.ctx.ignoreClearRect=!!G}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,F){if(isNaN(k)||isNaN(F))throw Ta.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(k,F)},f.prototype.closePath=function(){var k=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&xa(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){k=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(k.x,k.y)},f.prototype.lineTo=function(k,F){if(isNaN(k)||isNaN(F))throw Ta.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(H.x,H.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,F,H,Q){if(isNaN(H)||isNaN(Q)||isNaN(k)||isNaN(F))throw Ta.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new i(H,Q)),Y=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"qct",x1:Y.x,y1:Y.y,x:V.x,y:V.y}),this.ctx.lastPoint=new i(V.x,V.y)},f.prototype.bezierCurveTo=function(k,F,H,Q,V,Y){if(isNaN(V)||isNaN(Y)||isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q))throw Ta.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new i(V,Y)),z=this.ctx.transform.applyToPoint(new i(k,F)),le=this.ctx.transform.applyToPoint(new i(H,Q));this.path.push({type:"bct",x1:z.x,y1:z.y,x2:le.x,y2:le.y,x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},f.prototype.arc=function(k,F,H,Q,V,Y){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q)||isNaN(V))throw Ta.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Y=!!Y,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new i(k,F));k=R.x,F=R.y;var z=this.ctx.transform.applyToPoint(new i(0,H)),le=this.ctx.transform.applyToPoint(new i(0,0));H=Math.sqrt(Math.pow(z.x-le.x,2)+Math.pow(z.y-le.y,2))}Math.abs(V-Q)>=2*Math.PI&&(Q=0,V=2*Math.PI),this.path.push({type:"arc",x:k,y:F,radius:H,startAngle:Q,endAngle:V,counterclockwise:Y})},f.prototype.arcTo=function(k,F,H,Q,V){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,F,H,Q){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q))throw Ta.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,F),this.lineTo(k+H,F),this.lineTo(k+H,F+Q),this.lineTo(k,F+Q),this.lineTo(k,F),this.lineTo(k+H,F),this.lineTo(k,F)},f.prototype.fillRect=function(k,F,H,Q){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q))throw Ta.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,F,H,Q),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},f.prototype.strokeRect=function(k,F,H,Q){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q))throw Ta.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(k,F,H,Q),this.stroke())},f.prototype.clearRect=function(k,F,H,Q){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q))throw Ta.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,F,H,Q))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(F),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(k){var F,H,Q,V;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))F=0,H=0,Q=0,V=0;else{var Y=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(Y!==null)F=parseInt(Y[1]),H=parseInt(Y[2]),Q=parseInt(Y[3]),V=1;else if((Y=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)F=parseInt(Y[1]),H=parseInt(Y[2]),Q=parseInt(Y[3]),V=parseFloat(Y[4]);else{if(V=1,typeof k=="string"&&k.charAt(0)!=="#"){var R=new jee(k);k=R.ok?R.toHex():"#000000"}k.length===4?(F=k.substring(1,2),F+=F,H=k.substring(2,3),H+=H,Q=k.substring(3,4),Q+=Q):(F=k.substring(1,3),H=k.substring(3,5),Q=k.substring(5,7)),F=parseInt(F,16),H=parseInt(H,16),Q=parseInt(Q,16)}}return{r:F,g:H,b:Q,a:V,style:k}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,F,H,Q){if(isNaN(F)||isNaN(H)||typeof k!="string")throw Ta.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!A.call(this)){var V=me(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;j.call(this,{text:k,x:F,y:H,scale:Y,angle:V,align:this.textAlign,maxWidth:Q})}},f.prototype.strokeText=function(k,F,H,Q){if(isNaN(F)||isNaN(H)||typeof k!="string")throw Ta.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){Q=isNaN(Q)?void 0:Q;var V=me(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;j.call(this,{text:k,x:F,y:H,scale:Y,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:Q})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Ta.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,H=this.pdf.internal.scaleFactor,Q=F.internal.getFontSize(),V=F.getStringUnitWidth(k)*Q/F.internal.scaleFactor;return new function(Y){var R=(Y=Y||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return R}}),this}({width:V*=Math.round(96*H/72*1e4)/1e4})},f.prototype.scale=function(k,F){if(isNaN(k)||isNaN(F))throw Ta.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(k,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.rotate=function(k){if(isNaN(k))throw Ta.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(k,F){if(isNaN(k)||isNaN(F))throw Ta.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,k,F);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.transform=function(k,F,H,Q,V,Y){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(Q)||isNaN(V)||isNaN(Y))throw Ta.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new c(k,F,H,Q,V,Y);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.setTransform=function(k,F,H,Q,V,Y){k=isNaN(k)?1:k,F=isNaN(F)?0:F,H=isNaN(H)?0:H,Q=isNaN(Q)?1:Q,V=isNaN(V)?0:V,Y=isNaN(Y)?0:Y,this.ctx.transform=new c(k,F,H,Q,V,Y)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,F,H,Q,V,Y,R,z,le){var K=this.pdf.getImageProperties(k),M=1,pe=1,X=1,G=1;Q!==void 0&&z!==void 0&&(X=z/Q,G=le/V,M=K.width/Q*z/Q,pe=K.height/V*le/V),Y===void 0&&(Y=F,R=H,F=0,H=0),Q!==void 0&&z===void 0&&(z=Q,le=V),Q===void 0&&z===void 0&&(z=K.width,le=K.height);var ie=this.ctx.transform.decompose(),Ie=me(ie.rotate.shx),Re=new c,ze=(Re=(Re=(Re=Re.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale)).applyToRectangle(new l(Y-F*X,R-H*G,Q*M,V*pe));if(this.autoPaging){for(var st,lt=g.call(this,ze),_t=[],bt=0;bt<lt.length;bt+=1)_t.indexOf(lt[bt])===-1&&_t.push(lt[bt]);b(_t);for(var St=_t[0],kt=_t[_t.length-1],et=St;et<kt+1;et++){this.pdf.setPage(et);var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=et===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=et===1?0:xe+(et-2)*fe;if(this.ctx.clip_path.length!==0){var Be=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(st,this.posX+this.margin[3],-oe+Qe+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Be}var Me=JSON.parse(JSON.stringify(ze));Me=y([Me],this.posX+this.margin[3],-oe+Qe+this.ctx.prevPageLastElemOffset)[0];var Ze=(et>St||et<kt)&&p.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,fe,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Ie),Ze&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Ie)};var g=function(k,F,H){var Q=[];F=F||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":Q.push(Math.floor((k.y+V)/H)+1);break;case"arc":Q.push(Math.floor((k.y+V-k.radius)/H)+1),Q.push(Math.floor((k.y+V+k.radius)/H)+1);break;case"qct":var Y=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);Q.push(Math.floor((Y.y+V)/H)+1),Q.push(Math.floor((Y.y+Y.h+V)/H)+1);break;case"bct":var R=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);Q.push(Math.floor((R.y+V)/H)+1),Q.push(Math.floor((R.y+R.h+V)/H)+1);break;case"rect":Q.push(Math.floor((k.y+V)/H)+1),Q.push(Math.floor((k.y+k.h+V)/H)+1)}for(var z=0;z<Q.length;z+=1)for(;this.pdf.internal.getNumberOfPages()<Q[z];)x.call(this);return Q},x=function(){var k=this.fillStyle,F=this.strokeStyle,H=this.font,Q=this.lineCap,V=this.lineWidth,Y=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=F,this.font=H,this.lineCap=Q,this.lineWidth=V,this.lineJoin=Y},y=function(k,F,H){for(var Q=0;Q<k.length;Q++)switch(k[Q].type){case"bct":k[Q].x2+=F,k[Q].y2+=H;case"qct":k[Q].x1+=F,k[Q].y1+=H;default:k[Q].x+=F,k[Q].y+=H}return k},b=function(k){return k.sort(function(F,H){return F-H})},w=function(k,F){var H=this.fillStyle,Q=this.strokeStyle,V=this.lineCap,Y=this.lineWidth,R=Math.abs(Y*this.ctx.transform.scaleX),z=this.lineJoin;if(this.autoPaging){for(var le,K,M=JSON.parse(JSON.stringify(this.path)),pe=JSON.parse(JSON.stringify(this.path)),X=[],G=0;G<pe.length;G++)if(pe[G].x!==void 0)for(var ie=g.call(this,pe[G]),Ie=0;Ie<ie.length;Ie+=1)X.indexOf(ie[Ie])===-1&&X.push(ie[Ie]);for(var Re=0;Re<X.length;Re++)for(;this.pdf.internal.getNumberOfPages()<X[Re];)x.call(this);b(X);for(var ze=X[0],st=X[X.length-1],lt=ze;lt<st+1;lt++){this.pdf.setPage(lt),this.fillStyle=H,this.strokeStyle=Q,this.lineCap=V,this.lineWidth=R,this.lineJoin=z;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=lt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=lt===1?0:St+(lt-2)*kt;if(this.ctx.clip_path.length!==0){var ce=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(le,this.posX+this.margin[3],-et+bt+this.ctx.prevPageLastElemOffset),B.call(this,k,!0),this.path=ce}if(K=JSON.parse(JSON.stringify(M)),this.path=y(K,this.posX+this.margin[3],-et+bt+this.ctx.prevPageLastElemOffset),F===!1||lt===0){var Qe=(lt>ze||lt<st)&&p.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,kt,null).clip().discardPath()),B.call(this,k,F),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=Y}this.path=M}else this.lineWidth=R,B.call(this,k,F),this.lineWidth=Y},B=function(k,F){if((k!=="stroke"||F||!m.call(this))&&(k==="stroke"||F||!A.call(this))){for(var H,Q,V=[],Y=this.path,R=0;R<Y.length;R++){var z=Y[R];switch(z.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:z,deltas:[],abs:[]});break;case"lt":var le=V.length;if(Y[R-1]&&!isNaN(Y[R-1].x)&&(H=[z.x-Y[R-1].x,z.y-Y[R-1].y],le>0)){for(;le>=0;le--)if(V[le-1].close!==!0&&V[le-1].begin!==!0){V[le-1].deltas.push(H),V[le-1].abs.push(z);break}}break;case"bct":H=[z.x1-Y[R-1].x,z.y1-Y[R-1].y,z.x2-Y[R-1].x,z.y2-Y[R-1].y,z.x-Y[R-1].x,z.y-Y[R-1].y],V[V.length-1].deltas.push(H);break;case"qct":var K=Y[R-1].x+2/3*(z.x1-Y[R-1].x),M=Y[R-1].y+2/3*(z.y1-Y[R-1].y),pe=z.x+2/3*(z.x1-z.x),X=z.y+2/3*(z.y1-z.y),G=z.x,ie=z.y;H=[K-Y[R-1].x,M-Y[R-1].y,pe-Y[R-1].x,X-Y[R-1].y,G-Y[R-1].x,ie-Y[R-1].y],V[V.length-1].deltas.push(H);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(z)}}Q=F?null:k==="stroke"?"stroke":"fill";for(var Ie=!1,Re=0;Re<V.length;Re++)if(V[Re].arc)for(var ze=V[Re].abs,st=0;st<ze.length;st++){var lt=ze[st];lt.type==="arc"?E.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,F,!Ie):D.call(this,lt.x,lt.y),Ie=!0}else if(V[Re].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(V[Re].begin!==!0){var _t=V[Re].start.x,bt=V[Re].start.y;J.call(this,V[Re].deltas,_t,bt),Ie=!0}Q&&I.call(this,Q),F&&O.call(this)}},P=function(k){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-H;case"top":return k+F-H;case"hanging":return k+F-2*H;case"middle":return k+F/2-H;default:return k}},_=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(F,H){this.colorStops.push([F,H])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,F,H,Q,V,Y,R,z,le){for(var K=se.call(this,H,Q,V,Y),M=0;M<K.length;M++){var pe=K[M];M===0&&(le?S.call(this,pe.x1+k,pe.y1+F):D.call(this,pe.x1+k,pe.y1+F)),ge.call(this,k,F,pe.x2,pe.y2,pe.x3,pe.y3,pe.x4,pe.y4)}z?O.call(this):I.call(this,R)},I=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(k,F){this.pdf.internal.out(r(k)+" "+n(F)+" m")},j=function(k){var F;switch(k.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var H,Q,V,Y=this.pdf.getTextDimensions(k.text),R=P.call(this,k.y),z=_.call(this,R)-Y.h,le=this.ctx.transform.applyToPoint(new i(k.x,R));if(this.autoPaging){var K=this.ctx.transform.decompose(),M=new c;M=(M=(M=M.multiply(K.translate)).multiply(K.skew)).multiply(K.scale);for(var pe=this.ctx.transform.applyToRectangle(new l(k.x,R,Y.w,Y.h)),X=M.applyToRectangle(new l(k.x,z,Y.w,Y.h)),G=g.call(this,X),ie=[],Ie=0;Ie<G.length;Ie+=1)ie.indexOf(G[Ie])===-1&&ie.push(G[Ie]);b(ie);for(var Re=ie[0],ze=ie[ie.length-1],st=Re;st<ze+1;st++){this.pdf.setPage(st);var lt=st===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],St=bt-this.margin[0],kt=this.pdf.internal.pageSize.width-this.margin[1],et=kt-this.margin[3],ce=st===1?0:_t+(st-2)*St;if(this.ctx.clip_path.length!==0){var Qe=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(H,this.posX+this.margin[3],-1*ce+lt),B.call(this,"fill",!0),this.path=Qe}var xe=y([JSON.parse(JSON.stringify(X))],this.posX+this.margin[3],-ce+lt+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*k.scale),V=this.lineWidth,this.lineWidth=V*k.scale);var fe=this.autoPaging!=="text";if(fe||xe.y+xe.h<=bt){if(fe||xe.y>=lt&&xe.x<=kt){var oe=fe?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||kt-xe.x)[0],Be=y([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-ce+lt+this.ctx.prevPageLastElemOffset)[0],Me=fe&&(st>Re||st<ze)&&p.call(this);Me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,St,null).clip().discardPath()),this.pdf.text(oe,Be.x,Be.y,{angle:k.angle,align:F,renderingMode:k.renderingMode}),Me&&this.pdf.restoreGraphicsState()}}else xe.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-xe.y);k.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=V)}}else k.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*k.scale),V=this.lineWidth,this.lineWidth=V*k.scale),this.pdf.text(k.text,le.x+this.posX,le.y+this.posY,{angle:k.angle,align:F,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=V)},D=function(k,F,H,Q){H=H||0,Q=Q||0,this.pdf.internal.out(r(k+H)+" "+n(F+Q)+" l")},J=function(k,F,H){return this.pdf.lines(k,F,H,null,null)},ge=function(k,F,H,Q,V,Y,R,z){this.pdf.internal.out([e(a(H+k)),e(s(Q+F)),e(a(V+k)),e(s(Y+F)),e(a(R+k)),e(s(z+F)),"c"].join(" "))},se=function(k,F,H,Q){for(var V=2*Math.PI,Y=Math.PI/2;F>H;)F-=V;var R=Math.abs(H-F);R<V&&Q&&(R=V-R);for(var z=[],le=Q?-1:1,K=F;R>1e-5;){var M=K+le*Math.min(R,Y);z.push(he.call(this,k,K,M)),R-=Math.abs(M-K),K=M}return z},he=function(k,F,H){var Q=(H-F)/2,V=k*Math.cos(Q),Y=k*Math.sin(Q),R=V,z=-Y,le=R*R+z*z,K=le+R*V+z*Y,M=4/3*(Math.sqrt(2*le*K)-K)/(R*Y-z*V),pe=R-M*z,X=z+M*R,G=pe,ie=-X,Ie=Q+F,Re=Math.cos(Ie),ze=Math.sin(Ie);return{x1:k*Math.cos(F),y1:k*Math.sin(F),x2:pe*Re-X*ze,y2:pe*ze+X*Re,x3:G*Re-ie*ze,y3:G*ze+ie*Re,x4:k*Math.cos(H),y4:k*Math.sin(H)}},me=function(k){return 180*k/Math.PI},Z=function(k,F,H,Q,V,Y){var R=k+.5*(H-k),z=F+.5*(Q-F),le=V+.5*(H-V),K=Y+.5*(Q-Y),M=Math.min(k,V,R,le),pe=Math.max(k,V,R,le),X=Math.min(F,Y,z,K),G=Math.max(F,Y,z,K);return new l(M,X,pe-M,G-X)},ve=function(k,F,H,Q,V,Y,R,z){var le,K,M,pe,X,G,ie,Ie,Re,ze,st,lt,_t,bt,St=H-k,kt=Q-F,et=V-H,ce=Y-Q,Qe=R-V,xe=z-Y;for(K=0;K<41;K++)Re=(ie=(M=k+(le=K/40)*St)+le*((X=H+le*et)-M))+le*(X+le*(V+le*Qe-X)-ie),ze=(Ie=(pe=F+le*kt)+le*((G=Q+le*ce)-pe))+le*(G+le*(Y+le*xe-G)-Ie),K==0?(st=Re,lt=ze,_t=Re,bt=ze):(st=Math.min(st,Re),lt=Math.min(lt,ze),_t=Math.max(_t,Re),bt=Math.max(bt,ze));return new l(Math.round(st),Math.round(lt),Math.round(_t-st),Math.round(bt-lt))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,F,H=(k=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:F}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Br.API),function(t){var e=function(i){var l,c,u,d,f,h,A,m,p,g;for(c=[],u=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(f=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(A=f%85))/85)%85,c.push(h+33,A+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var l,c,u,d,f,h=String,A="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(i+=l="uuuuu"[g](i[A]%5||5))[A];f>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[A]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var l=new Uint8Array(i.length),c=i.length;c--;)l[c]=i.charCodeAt(c);return(l=PT(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var c=0,u=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Br.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,A=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(A(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return A(f.responseText)}(a,s,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Br.API),function(t){function e(){return(rn.html2canvas?Promise.resolve(rn.html2canvas):AA(()=>Promise.resolve().then(()=>y6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(rn.DOMPurify?Promise.resolve(rn.DOMPurify):AA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=xa(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,c){return l.__proto__=c||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var A=0;A<d.length;++A){var m=d[A],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},i.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(l,c){return this.then(function(){var u=l in i.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},i.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return i.convert(c,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Br.getPageSize=function(l,c,u){if(xa(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(A.hasOwnProperty(h))p=A[h][1]/f,g=A[h][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(gB):null;var u=new i(c);return c.worker?u:u.from(l).doCallback()}}(Br.API),Br.API.addJS=function(t){return fQ=t,this.internal.events.subscribe("postPutResources",function(){YN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(YN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),dQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){YN!==void 0&&dQ!==void 0&&this.internal.out("/Names <</JavaScript "+YN+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var A=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+A+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Br.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,A=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=A,e.indexOf(f.charCodeAt(g+1))!==-1){h=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:h,numcomponents:f.charCodeAt(g+9)};break}A=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Br.API),Br.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=wEe(t,{checkCrc:!0}),i=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(E){for(var I=E.width,O=E.height,S=E.data,j=E.palette,D=E.depth,J=!1,ge=[],se=[],he=void 0,me=!1,Z=0,ve=0;ve<j.length;ve++){var Se=p9(j[ve],4),k=Se[0],F=Se[1],H=Se[2],Q=Se[3];ge.push(k,F,H),Q!=null&&(Q===0?(Z++,se.length<1&&se.push(ve)):Q<255&&(me=!0))}if(me||Z>1){J=!0,se=void 0;var V=I*O;he=new Uint8Array(V);for(var Y=new DataView(S.buffer),R=0;R<V;R++){var z=vB(Y,R,D),le=p9(j[z],4)[3];he[R]=le}}else Z===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:S,alphaBytes:he,needSMask:J,palette:ge,mask:se}}(s):c===2||c===4?function(E){for(var I=E.data,O=E.width,S=E.height,j=E.channels,D=E.depth,J=j===2?"DeviceGray":"DeviceRGB",ge=j-1,se=O*S,he=ge,me=se*he,Z=1*se,ve=Math.ceil(me*D/8),Se=Math.ceil(Z*D/8),k=new Uint8Array(ve),F=new Uint8Array(Se),H=new DataView(I.buffer),Q=new DataView(k.buffer),V=new DataView(F.buffer),Y=!1,R=0;R<se;R++){for(var z=R*j,le=0;le<he;le++)bQ(Q,vB(H,z+le,D),R*he+le,D);var K=vB(H,z+he,D);K<(1<<D)-1&&(Y=!0),bQ(V,K,1*R,D)}return{colorSpace:J,colorsPerPixel:ge,sMaskBitsPerComponent:Y?D:void 0,colorBytes:k,alphaBytes:F,needSMask:Y}}(s):function(E){var I=E.data,O=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(S){for(var j=S.length,D=new Uint8Array(2*j),J=new DataView(D.buffer,D.byteOffset,D.byteLength),ge=0;ge<j;ge++)J.setUint16(2*ge,S[ge],!1);return D}(I):I,needSMask:!1}}(s);var f,h,A,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,B=m.palette,P=m.mask,_=null;return n!==Br.API.image_compression.NONE&&typeof PT=="function"?(_=function(E){var I;switch(E){case Br.API.image_compression.FAST:I=11;break;case Br.API.image_compression.MEDIUM:I=13;break;case Br.API.image_compression.SLOW:I=14;break;default:I=12}return I}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=pQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(A=pQ(b,Math.ceil(i*x/8),1,x,n))):(f=void 0,h=void 0,t=y,w&&(A=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:r,data:t,index:e,filter:f,decodeParameters:h,transparency:P,palette:B,sMask:A,predictor:_,width:i,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new $Ee(e),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new yB(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Br.API),Zu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ta.log("bit decode error:"+r)}},Zu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Zu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Zu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Zu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},Zu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Zu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Zu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},Zu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Zu(e,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new yB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),NQ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new NQ(e),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new yB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),Br.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],A=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,i[c++]=A}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Br.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Sg=Br.API,JN=Sg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,h=0,A=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<A;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&xa(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+h)),m=n;return g},AQ=Sg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Sg.processArabic&&(t=Sg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:JN.apply(this,arguments).reduce(function(s,i){return s+i},0)},hQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,l=0;s!==i&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==i;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},mQ=function(t,e,r){r||(r={});var n,a,s,i,l,c,u,d=[],f=[d],h=r.textIndent||0,A=0,m=0,p=t.split(" "),g=JN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(B,P){return(P&&B.length?`
`:"")+B})):y.push(w[0])}),p=y,c=AQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+A+(m=(a=JN.apply(this,[n,r])).reduce(function(w,B){return w+B},0))>e||b){if(m>e){for(l=hQ.apply(this,[n,a,e-(h+A),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,B){return w+B},0)}else d=[n];f.push(d),h=m+c,A=g}else d.push(n),h+=A+m,A=g}return u=c?function(w,B){return(B?x:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},Sg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(mQ.apply(this,[n[l],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},l=t.__fontmetrics__.compress=function(h){var A,m,p,g,x=["{"];for(var y in h){if(A=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof A=="number")A<0?(p=i(A).slice(3),g="-"):(p=i(A).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(xa(A)!=="object")throw new Error("Don't know what to do with value type "+xa(A)+".");p=l(A)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,p,g,x={},y=1,b=x,w=[],B="",P="",_=h.length-1,E=1;E<_;E+=1)(g=h[E])=="'"?A?(p=A.join(""),A=void 0):A=[]:A?A.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(B+=n[g],p=parseInt(B,16)*y,y=1,B=""):B+=g:n.hasOwnProperty(g)?(P+=n[g],b[p]=parseInt(P,16)*y,y=1,p=void 0,P=""):P+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var A=h.font,m=f.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[A.postScriptName];p&&(A.metadata.Unicode.encoding=p,A.encoding=p.codePages[0])}])}(Br.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(E_(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(Br),Br.API.addSvgAsImage=function(t,e,r,n,a,s,i,l){if(isNaN(e)||isNaN(r))throw Ta.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Ta.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(rn.canvg?Promise.resolve(rn.canvg):AA(()=>import("./index.es-DVZrEQ0j.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,l)})},Br.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Br.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,f=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var A=l.length;for(f=0;f<A;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(xa(t)==="object"){for(a in t)if(s=t[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Br.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(A,m){return A-m})).length;f<h;f++)i=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),A="",m=0;m<h.length;m++)A+=String.fromCharCode(h[m]);var p=u();d({data:A,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Xg(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Xg(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Xg(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",A=0;A<f.length;A++)h+=String.fromCharCode(f[A]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Xg(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Xg(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,A=f.activeFontKey,m=f.fonts,p=A,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=A,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(Br),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Br.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,f=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(S){var j=S.charCodeAt(),D=j>>8,J=p[D];return J!==void 0?f[256*J+(255&j)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},B=function(S){for(var j,D=0;D<S.length;D++){if((j=w(S.charAt(D)))==="L")return!1;if(j==="R")return!0}return!1},P=function(S,j,D,J){var ge,se,he,me,Z=j[J];switch(Z){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(Z="AN");break;case"AL":y=!0,Z="R";break;case"WS":case"BN":Z="N";break;case"CS":J<1||J+1>=j.length||(ge=D[J-1])!=="EN"&&ge!=="AN"||(se=j[J+1])!=="EN"&&se!=="AN"?Z="N":y&&(se="AN"),Z=se===ge?se:"N";break;case"ES":Z=(ge=J>0?D[J-1]:"B")==="EN"&&J+1<j.length&&j[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&D[J-1]==="EN"){Z="EN";break}if(y){Z="N";break}for(he=J+1,me=j.length;he<me&&j[he]==="ET";)he++;Z=he<me&&j[he]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(me=j.length,he=J+1;he<me&&j[he]==="NSM";)he++;if(he<me){var ve=S[J],Se=ve>=1425&&ve<=2303||ve===64286;if(ge=j[he],Se&&(ge==="R"||ge==="AL")){Z="R";break}}}Z=J<1||(ge=j[J-1])==="B"?"N":D[J-1];break;case"B":y=!1,a=!0,Z=b;break;case"S":s=!0,Z="N"}return Z},_=function(S,j,D){var J=S.split("");return D&&E(J,D,{hiLevel:b}),J.reverse(),j&&j.reverse(),J.join("")},E=function(S,j,D){var J,ge,se,he,me,Z=-1,ve=S.length,Se=0,k=[],F=b?A:h,H=[];for(y=!1,a=!1,s=!1,ge=0;ge<ve;ge++)H[ge]=w(S[ge]);for(se=0;se<ve;se++){if(me=Se,k[se]=P(S,H,k,se),J=240&(Se=F[me][m[k[se]]]),Se&=15,j[se]=he=F[Se][5],J>0)if(J===16){for(ge=Z;ge<se;ge++)j[ge]=1;Z=-1}else Z=-1;if(F[Se][6])Z===-1&&(Z=se);else if(Z>-1){for(ge=Z;ge<se;ge++)j[ge]=he;Z=-1}H[se]==="B"&&(j[se]=0),D.hiLevel|=he}s&&function(Q,V,Y){for(var R=0;R<Y;R++)if(Q[R]==="S"){V[R]=b;for(var z=R-1;z>=0&&Q[z]==="WS";z--)V[z]=b}}(H,j,ve)},I=function(S,j,D,J,ge){if(!(ge.hiLevel<S)){if(S===1&&b===1&&!a)return j.reverse(),void(D&&D.reverse());for(var se,he,me,Z,ve=j.length,Se=0;Se<ve;){if(J[Se]>=S){for(me=Se+1;me<ve&&J[me]>=S;)me++;for(Z=Se,he=me-1;Z<he;Z++,he--)se=j[Z],j[Z]=j[he],j[he]=se,D&&(se=D[Z],D[Z]=D[he],D[he]=se);Se=me}Se++}}},O=function(S,j,D){var J=S.split(""),ge={hiLevel:b};return D||(D=[]),E(J,D,ge),function(se,he,me){if(me.hiLevel!==0&&d)for(var Z,ve=0;ve<se.length;ve++)he[ve]===1&&(Z=g.indexOf(se[ve]))>=0&&(se[ve]=g[Z+1])}(J,D,ge),I(2,J,j,D,ge),I(1,J,j,D,ge),J.join("")};return this.__bidiEngine__.doBidiReorder=function(S,j,D){if(function(ge,se){if(se)for(var he=0;he<ge.length;he++)se[he]=he;l===void 0&&(l=B(ge)),u===void 0&&(u=B(ge))}(S,j),i||!c||u)if(i&&c&&l^u)b=l?1:0,S=_(S,j,D);else if(!i&&c&&u)b=l?1:0,S=O(S,j,D),S=_(S,j);else if(!i||l||c||u){if(i&&!c&&l^u)S=_(S,j),l?(b=0,S=O(S,j,D)):(b=1,S=O(S,j,D),S=_(S,j));else if(i&&l&&!c&&u)b=1,S=O(S,j,D),S=_(S,j);else if(!i&&!c&&l^u){var J=d;l?(b=1,S=O(S,j,D),b=0,d=!1,S=O(S,j,D),d=J):(b=0,S=O(S,j,D),S=_(S,j),b=1,d=!1,S=O(S,j,D),d=J,S=_(S,j))}}else b=0,S=O(S,j,D);else b=l?1:0,S=O(S,j,D);return S},this.__bidiEngine__.setOptions=function(S){S&&(i=S.isInputVisual,c=S.isOutputVisual,l=S.isInputRtl,u=S.isOutputRtl,d=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Br),Br.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new j0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new sSe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KEe(this.contents),this.head=new qEe(this),this.name=new JEe(this),this.cmap=new Vee(this),this.toUnicode={},this.hhea=new zEe(this),this.maxp=new ZEe(this),this.hmtx=new eSe(this),this.post=new XEe(this),this.os2=new WEe(this),this.loca=new aSe(this),this.glyf=new tSe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,l;for(i=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Dd,j0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),KEe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,l,c,u,d,f,h,A,m,p;for(p in A=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(A)/c),i=Math.floor(f/c),d=16*A-f,(a=new j0).writeInt(this.scalarType),a.writeShort(A),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*A,u=a.pos+s,l=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=Hee.call(r);r.length%4;)r.push(0);for(s=new j0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),GEe={}.hasOwnProperty,Cf=function(t,e){for(var r in e)GEe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Dd=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var qEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new j0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),CQ=function(){function t(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(A=e.readUInt16(),h=A/2,e.pos+=6,s=function(){var w,B;for(B=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)B.push(e.readUInt16());return B}(),e.pos+=2,p=function(){var w,B;for(B=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)B.push(e.readUInt16());return B}(),u=function(){var w,B;for(B=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)B.push(e.readUInt16());return B}(),d=function(){var w,B;for(B=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)B.push(e.readUInt16());return B}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,B;for(B=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)B.push(e.readUInt16());return B}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=f}return t.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,B,P,_,E,I,O,S,j,D,J,ge,se,he,me,Z,ve,Se,k,F,H,Q,V,Y,R,z,le,K,M;switch(J=new j0,i=Object.keys(e).sort(function(pe,X){return pe-X}),r){case"macroman":for(p=0,g=function(){var pe=[];for(m=0;m<256;++m)pe.push(0);return pe}(),y={0:0},s={},ge=0,Z=i.length;ge<Z;ge++)y[z=e[a=i[ge]]]==null&&(y[z]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(g),{charMap:s,subtable:J.data,maxGlyphID:p+1};case"unicode":for(j=[],f=[],b=0,y={},n={},x=u=null,se=0,ve=i.length;se<ve;se++)y[B=e[a=i[se]]]==null&&(y[B]=++b),n[a]={old:B,new:y[B]},l=y[B]-a,x!=null&&l===u||(x&&f.push(x),j.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),j.push(65535),O=2*(I=j.length),E=2*Math.pow(Math.log(I)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,_=2*I-E,c=[],P=[],A=[],m=he=0,Se=j.length;he<Se;m=++he){if(S=j[m],d=f[m],S===65535){c.push(0),P.push(0);break}if(S-(D=n[S].new)>=32768)for(c.push(0),P.push(2*(A.length+I-m)),a=me=S;S<=d?me<=d:me>=d;a=S<=d?++me:--me)A.push(n[a].new);else c.push(D-S),P.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*I+2*A.length),J.writeUInt16(0),J.writeUInt16(O),J.writeUInt16(E),J.writeUInt16(h),J.writeUInt16(_),Y=0,k=f.length;Y<k;Y++)a=f[Y],J.writeUInt16(a);for(J.writeUInt16(0),R=0,F=j.length;R<F;R++)a=j[R],J.writeUInt16(a);for(le=0,H=c.length;le<H;le++)l=c[le],J.writeUInt16(l);for(K=0,Q=P.length;K<Q;K++)w=P[K],J.writeUInt16(w);for(M=0,V=A.length;M<V;M++)p=A[M],J.writeUInt16(p);return{charMap:n,subtable:J.data,maxGlyphID:b+1}}},t}(),Vee=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new CQ(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=CQ.encode(e,r),(a=new j0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),zEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),WEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),XEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,l,c;for(c=[],s=i=0,l=this.file.maxp.numGlyphs;0<=l?i<l:i>l;s=0<=l?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),YEe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},JEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,l,c,u,d,f,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new YEe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),ZEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),eSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Hee=[].slice,tSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(l=new j0(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=i===-1?new nSe(l,u,f,c,d):new rSe(l,i,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,l,c;for(i=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),rSe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),nSe=function(){function t(e,r,n,a,s){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new j0(Hee.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),aSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cf(t,Dd),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var l=this.offsets[i],c=this.offsets[i+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),sSe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,l,c;for(a={},i=0,l=e.length;i<l;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x;for(a in n=Vee.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),A={0:0},x=n.charMap)A[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in A||(A[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(A),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(i,p,A),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Br.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const MT=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:DEe,AcroFormAppearance:kr,AcroFormButton:Si,AcroFormCheckBox:qy,AcroFormChoiceField:Wm,AcroFormComboBox:Ym,AcroFormEditBox:Ky,AcroFormListBox:Xm,AcroFormPasswordField:zy,AcroFormPushButton:Gy,AcroFormRadioButton:Jm,AcroFormTextField:g0,GState:K2,ShadingPattern:Kh,TilingPattern:Mm,default:Br,jsPDF:Br},Symbol.toStringTag,{value:"Module"}));async function _Q(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:tr.now()};return Nn(At(je,"inventory_batches"),e)}async function $ee(t,e){await Jr($t(je,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:tr.now()})}async function iSe(t,e){const r=Wt(At(je,"batch_allocations"),sr("saleDate",">=",t),sr("saleDate","<=",e)),n=await Dt(r),a={};return n.forEach(s=>{const i=s.data(),l=i.batchId;a[l]||(a[l]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(i.quantity||0),a[l].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function oSe(t){const e=$t(je,"salesV2",t),r=await Li(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Di(je,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let i=0;return await Di(je,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>$t(je,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,h],A)=>{const m=d[A];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));l.update(u[A],{remaining:x}),i+=Number(h||0)}),l.delete(e)}),{restored:i}}function Ac(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const fu=t=>Math.round((Number(t)||0)*100)/100,ZN=t=>Math.round((Number(t)||0)*1e3)/1e3,k1=t=>Number(t??0).toFixed(2),bB=t=>Number(t??0).toFixed(3),EQ=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((a,s)=>{const i=Number((a==null?void 0:a.qty)??0),l=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*i-Number((a==null?void 0:a.discount)||0));return{id:`${e}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:i,amount:fu(l),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:t.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function lSe({role:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[f,h]=v.useState("ALL"),[A,m]=v.useState(null),[p,g]=v.useState(0),[x,y]=v.useState(0),[b,w]=v.useState(""),[B,P]=v.useState(0),[_,E]=v.useState("0"),I=wr(new Date,"yyyy-MM-dd"),O=v.useRef(null),{refreshKey:S}=Ac();v.useEffect(()=>{const V=Wt(At(je,"salesV2"),sr("date","==",I)),Y=Ed(V,R=>{const z=[];R.forEach(le=>{const K=EQ(le.data(),le.id);z.push(...K)}),r(z),c(!1)});return()=>Y()},[I,S]),v.useEffect(()=>{const V=Wt(At(je,"salesV2"),sr("status","==","FLOTANTE")),Y=Ed(V,R=>{const z=[];R.forEach(le=>{const K=EQ(le.data(),le.id);z.push(...K)}),a(z)});return()=>Y()},[S]),v.useEffect(()=>{(async()=>{const Y=Wt(At(je,"daily_closures"),sr("date","==",I)),R=await Dt(Y);if(R.empty)i(null);else{const z=R.docs[0];i({id:z.id,...z.data()})}})()},[I,S]);const j=so.useMemo(()=>{if(f==="FLOTANTE"){const V=[...e,...n],Y=new Map;for(const R of V)R.status==="FLOTANTE"&&Y.set(R.id,R);return Array.from(Y.values())}if(f==="ALL"){const V=[...e,...n],Y=new Map;for(const R of V)Y.set(R.id,R);return Array.from(Y.values())}return e.filter(V=>V.status==="PROCESADA")},[f,e,n]);fu(j.reduce((V,Y)=>V+(Y.amountSuggested||0),0));const D=fu(j.reduce((V,Y)=>V+(Y.amount||0),0)),J=ZN(j.reduce((V,Y)=>V+(Y.quantity||0),0)),ge=fu(j.reduce((V,Y)=>V+Number(Y.cogsAmount??0),0)),se=fu(D-ge),he={};j.forEach(V=>{const Y=V.productName||"(sin nombre)";he[Y]||(he[Y]={totalQuantity:0,totalAmount:0}),he[Y].totalQuantity=ZN(he[Y].totalQuantity+(V.quantity||0)),he[Y].totalAmount=fu(he[Y].totalAmount+(V.amount||0))});const me=Object.entries(he).map(([V,Y])=>({productName:V,totalQuantity:Y.totalQuantity,totalAmount:Y.totalAmount})),Z=async()=>{try{const V=j.filter(pe=>pe.status==="FLOTANTE"),Y=V.length>0?V:e.filter(pe=>pe.status!=="PROCESADA");if(Y.length===0){d("No hay ventas para procesar.");return}const R={totalCharged:fu(Y.reduce((pe,X)=>pe+(X.amount||0),0)),totalSuggested:fu(Y.reduce((pe,X)=>pe+(X.amountSuggested||0),0)),totalUnits:ZN(Y.reduce((pe,X)=>pe+(X.quantity||0),0)),totalCOGS:fu(Y.reduce((pe,X)=>pe+Number(X.cogsAmount??0),0))},z=fu(R.totalCharged-R.totalSuggested),le=fu(R.totalCharged-R.totalCOGS),K=await Nn(At(je,"daily_closures"),{date:I,createdAt:tr.now(),totalCharged:R.totalCharged,totalSuggested:R.totalSuggested,totalDifference:z,totalUnits:R.totalUnits,totalCOGS:R.totalCOGS,grossProfit:le,products:Y.map(pe=>({productName:pe.productName,quantity:pe.quantity,amount:pe.amount})),salesV2:Y.map(pe=>({id:pe.id,productName:pe.productName,quantity:pe.quantity,amount:pe.amount,amountSuggested:pe.amountSuggested,userEmail:pe.userEmail,clientName:pe.clientName,amountReceived:pe.amountReceived,change:pe.change,status:pe.status,cogsAmount:pe.cogsAmount??0,avgUnitCost:pe.avgUnitCost??null,allocations:pe.allocations??[],date:pe.date})),productSummary:Object.entries(Y.reduce((pe,X)=>{const G=X.productName||"(sin nombre)";return pe[G]||(pe[G]={totalQuantity:0,totalAmount:0}),pe[G].totalQuantity=ZN(pe[G].totalQuantity+(X.quantity||0)),pe[G].totalAmount=fu(pe[G].totalAmount+(X.amount||0)),pe},{})).map(([pe,X])=>({productName:pe,totalQuantity:X.totalQuantity,totalAmount:X.totalAmount}))}),M=G0(je);Y.forEach(pe=>{M.update($t(je,"salesV2",pe.id.split("#")[0]),{status:"PROCESADA",closureId:K.id,closureDate:I})}),await M.commit(),d(` Cierre guardado. Ventas procesadas: ${Y.length}.`)}catch(V){console.error(V),d(" Error al guardar el cierre.")}},ve=async V=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Jr($t(je,"salesV2",V.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(Y){console.error(Y),d(" No se pudo revertir la venta.")}},Se=V=>{m(V),g(V.quantity),y(V.amount),w(V.clientName),P(V.amountReceived),E(V.change)},k=async()=>{if(A)try{await Jr($t(je,"salesV2",A.id.split("#")[0]),{quantity:p,amount:x,amountCharged:x,clientName:b,amountReceived:B,change:_}),m(null),d(" Venta actualizada.")}catch(V){console.error(V),d(" No se pudo actualizar la venta.")}},F=async V=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Y}=await oSe(V.split("#")[0]);d(` Venta eliminada. Stock restaurado: ${Number(Y).toFixed(2)}.`)}catch(Y){console.error(Y),d(" No se pudo eliminar la venta.")}},H=async()=>{if(O.current){O.current.classList.add("force-pdf-colors");try{const Y=(await q0(O.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),R=new Br;R.addImage(Y,"PNG",10,10,190,0),R.save(`cierre_${I}.pdf`)}finally{O.current.classList.remove("force-pdf-colors")}}},Q=!t||t==="admin";return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",I]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:V=>h(V.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),l?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:O,children:[o.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[j.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${V.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:V.status})}),o.jsx("td",{className:"border p-1",children:V.productName}),o.jsx("td",{className:"border p-1",children:bB(V.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",k1(V.amount)]}),o.jsx("td",{className:"border p-1",children:V.date}),o.jsx("td",{className:"border p-1",children:V.userEmail}),o.jsx("td",{className:"border p-1",children:V.status==="FLOTANTE"?o.jsxs("div",{className:"flex gap-2 justify-center",children:[Q&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Se(V),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>F(V.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!Q&&o.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):V.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:Q?o.jsx("button",{onClick:()=>ve(V.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},V.id)),j.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[o.jsxs("div",{children:[" ","Total Libras/Unidades: ",o.jsx("strong",{children:bB(J)})]}),o.jsxs("div",{children:[" ","Total cobrado: ",o.jsxs("strong",{children:["C$",k1(D)]})]})]}),(ge>0||se!==D)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",o.jsxs("strong",{children:["C$",k1(ge)]})]}),o.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",k1(se)]})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[me.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:V.productName}),o.jsx("td",{className:"border p-1",children:bB(V.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",k1(V.totalAmount)]})]},V.productName)),me.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Z,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:H,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),A&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[A.productName,"  ",A.userEmail]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:p,onChange:V=>g(parseFloat(V.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:x,onChange:V=>y(parseFloat(V.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:V=>w(V.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:B,onChange:V=>P(parseFloat(V.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:_,onChange:V=>E(V.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>m(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:k,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const lu=t=>Number(t??0).toFixed(2),Ig=t=>Number(t??0).toFixed(3);function cSe(){var y,b,w,B;const t=async P=>{if(!window.confirm(`Eliminar el cierre del ${P.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const E=await Dt(Wt(At(je,"salesV2"),sr("closureId","==",P.id)));if(!E.empty){const I=G0(je);E.forEach(O=>{I.update($t(je,"salesV2",O.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await I.commit()}}await Qn($t(je,"daily_closures",P.id)),(u==null?void 0:u.id)===P.id&&d(null),await m(),h(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(wr(WJ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(wr(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[f,h]=v.useState(""),A=v.useRef(null),m=async()=>{try{i(!0);const P=Wt(At(je,"daily_closures"),sr("date",">=",e),sr("date","<=",n)),_=await Dt(P),E=[];_.forEach(I=>E.push({id:I.id,...I.data()})),E.sort((I,O)=>I.date<O.date?1:I.date>O.date?-1:0),c(E)}catch(P){console.error(P),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async P=>{P.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const P=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),E=Number(u.totalCharged??0),I=Number(u.totalDifference??(isFinite(E-_)?E-_:0)),O=Number(u.totalCOGS??0),S=Number(u.grossProfit??(isFinite(E-O)?E-O:0));return{units:P,sug:_,chg:E,diff:I,cogs:O,profit:S}},[u]),x=async()=>{if(!A.current||!u)return;const P=A.current;P.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:E}]=await Promise.all([AA(()=>Promise.resolve().then(()=>y6),void 0),AA(()=>Promise.resolve().then(()=>MT),void 0)]),O=(await _(P,{backgroundColor:"#ffffff",onclone:D=>{const J=D.defaultView;D.body.querySelectorAll("*").forEach(se=>{const he=J.getComputedStyle(se);he.color&&(se.style.color=he.color),he.backgroundColor&&he.backgroundColor!=="rgba(0, 0, 0, 0)"&&(se.style.backgroundColor=he.backgroundColor),he.borderColor&&(se.style.borderColor=he.borderColor)})}})).toDataURL("image/png"),{jsPDF:S}=await AA(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>MT);return{jsPDF:D}},void 0),j=new S;j.addImage(O,"PNG",10,10,190,0),j.save(`cierre_${u.date}.pdf`)}finally{P.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:P=>r(P.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:P=>a(P.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?o.jsx("p",{children:"Cargando..."}):l.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:l.map(P=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:P.date}),o.jsx("td",{className:"border p-1",children:Ig(P.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.grossProfit??Number(P.totalCharged??0)-Number(P.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(P),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(P),children:"Eliminar"})]})})]},P.id))})]}),u&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),o.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:A,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:Ig(g.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",lu(g.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",lu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:u.salesV2.map((P,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:P.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Ig(P.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:P.date??""}),o.jsx("td",{className:"border p-1",children:P.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:u.sales.map((P,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:P.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Ig(P.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.amount)]}),o.jsx("td",{className:"border p-1",children:P.userEmail??""}),o.jsx("td",{className:"border p-1",children:P.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof P.change=="number"?lu(P.change):P.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:u.products.map((P,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:P.productName}),o.jsx("td",{className:"border p-1",children:Ig(P.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.amount)]})]},_))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(B=u.productSummary)!=null&&B.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:u.productSummary.map((P,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:P.productName}),o.jsx("td",{className:"border p-1",children:Ig(P.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(P.totalAmount)]})]},_))})]})]}):null]})]}),f&&o.jsx("p",{className:"mt-3 text-sm",children:f})]})}function uSe(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!1),[c,u]=v.useState("vendedor_pollo"),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,B]=v.useState("vendedor_pollo"),[P,_]=v.useState(""),[E,I]=v.useState(!1),[O,S]=v.useState([]),j=F=>!F||F==="vendedor"?"vendedor_pollo":F==="admin"||F==="vendedor_pollo"||F==="vendedor_ropa"||F==="vendedor_dulces"?F:"vendedor_pollo",D=async()=>{x(!0);const F=await Dt(At(je,"users")),H=[];F.forEach(Q=>{const V=Q.data();H.push({id:Q.id,email:V.email??"",name:V.name??"",role:j(V.role),sellerCandyId:V.sellerCandyId??""})}),p(H),x(!1)},J=async()=>{try{const F=await Dt(At(je,"sellers_candies")),H=[];F.forEach(Q=>{const V=Q.data();H.push({id:Q.id,name:V.name??"(sin nombre)",branchLabel:V.branch??"",commissionPercent:Number(V.commissionPercent??0)})}),S(H)}catch(F){console.error("Error cargando sellers_candies:",F)}};v.useEffect(()=>{D(),J()},[]);const ge=()=>{e(""),n(""),s(""),u("vendedor_pollo"),A("")},se=async F=>{if(F.preventDefault(),f(""),a.length<4){f(" La contrasea debe tener al menos 4 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{const H=hO(),Q=AO(H.options,"Secondary"),V=VX(Q),Y=await Z0e(V,r,a),R=j(c),z=R==="vendedor_dulces"&&h||"";await UJ($t(At(je,"users"),Y.user.uid),{email:r,name:t.trim(),role:R,sellerCandyId:z}),await wI(V),await zhe(Q),p(le=>[{id:Y.user.uid,email:r,name:t.trim(),role:R,sellerCandyId:z},...le]),f(" Usuario creado correctamente."),ge(),I(!1)}catch(H){console.error(H),f(" Error al crear el usuario: "+H.message)}},he=F=>{b(F.id),B(j(F.role)),_(F.sellerCandyId||"")},me=()=>{b(null),B("vendedor_pollo"),_("")},Z=async()=>{if(!y)return;const F=$t(je,"users",y),H=j(w),Q=H==="vendedor_dulces"&&P||"";await Jr(F,{role:H,sellerCandyId:Q}),p(V=>V.map(Y=>Y.id===y?{...Y,role:H,sellerCandyId:Q}:Y)),me()},ve=async F=>{confirm("Eliminar este usuario del listado?")&&(await Qn($t(je,"users",F)),p(Q=>Q.filter(V=>V.id!==F)))},Se=F=>{const H=F==="admin"?"admin":F==="vendedor_ropa"?"vendedor_ropa":F==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",Q=H==="admin"?"bg-blue-100 text-blue-700":H==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":H==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Q}`,children:H})},k=F=>`${F.name}  ${F.branchLabel||"Sin sucursal"}  ${F.commissionPercent.toFixed(2)}%`;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>I(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:g?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(F=>{const H=y===F.id,Q=(H?w:F.role)==="vendedor_dulces";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.name||""}),o.jsx("td",{className:"p-2 border",children:F.email}),o.jsx("td",{className:"p-2 border",children:H?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:V=>B(V.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),o.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]}),w==="vendedor_dulces"&&o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:P,onChange:V=>_(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),O.map(V=>o.jsx("option",{value:V.id,children:k(V)},V.id))]})]}):o.jsxs(o.Fragment,{children:[Se(F.role),Q&&F.sellerCandyId&&o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),o.jsx("td",{className:"p-2 border space-x-2",children:H?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Z,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:me,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>he(F),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ve(F.id),children:"Eliminar"})]})})]},F.id)})})]})}),d&&o.jsx("p",{className:"text-sm mt-2",children:d}),E&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:se,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:F=>e(F.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:F=>n(F.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:F=>s(F.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(F=>!F),children:i?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:F=>u(F.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),o.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]})]}),c==="vendedor_dulces"&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),o.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:F=>A(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),O.map(F=>o.jsx("option",{value:F.id,children:k(F)},F.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),d&&o.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const dSe=t=>`C$${(Number(t)||0).toFixed(2)}`;function fSe(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState([]),[h,A]=v.useState(!0),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,B]=v.useState(""),[P,_]=v.useState(""),[E,I]=v.useState(0),[O,S]=v.useState(!1),j=async()=>{A(!0);const ve=await Dt(At(je,"products")),Se=[];ve.forEach(k=>{const F=k.data();Se.push({id:k.id,name:F.name??"",price:Number(F.price??0),category:F.category??"",measurement:F.measurement??"",active:F.active!==!1})}),f(Se),A(!1)};v.useEffect(()=>{j()},[]);const D=async ve=>{if(ve.preventDefault(),s(""),!t||r<=0||!c){s(" Completa nombre, precio vlido y unidad de medida");return}try{const Se={name:t,price:parseFloat(r.toFixed(2)),category:i,measurement:c,active:!0},k=await Nn(At(je,"products"),Se);f(F=>[{id:k.id,...Se},...F]),s(" Producto registrado con exito."),e(""),n(0),u(""),l(""),S(!1)}catch(Se){s(" Error: "+Se.message)}},J=ve=>{x(ve.id),b(ve.name),B(ve.category),_(ve.measurement),I(ve.price)},ge=()=>{x(null),b(""),B(""),_(""),I(0)},se=async()=>{if(!g)return;const ve=$t(je,"products",g);await Jr(ve,{name:y,category:w,measurement:P,price:parseFloat((E||0).toFixed(2))}),f(Se=>Se.map(k=>k.id===g?{...k,name:y,category:w,measurement:P,price:parseFloat((E||0).toFixed(2))}:k)),ge()},he=async ve=>{const Se=$t(je,"products",ve.id),k=ve.active===!1;await Jr(Se,{active:k}),f(F=>F.map(H=>H.id===ve.id?{...H,active:k}:H))},me=async ve=>{const Se=Wt(At(je,"inventory_batches"),sr("productId","==",ve),MJ(1));if(!(await Dt(Se)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Qn($t(je,"products",ve)),f(H=>H.filter(Q=>Q.id!==ve)))},Z=m?d:d.filter(ve=>ve.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{s(""),S(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),O&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:i,onChange:ve=>l(ve.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:ve=>e(ve.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:c,onChange:ve=>u(ve.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:ve=>n(parseFloat(ve.target.value)),onFocus:ve=>ve.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),a&&o.jsx("p",{className:"text-sm mt-2",children:a})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:ve=>p(ve.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:h?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Z.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):Z.map(ve=>{const Se=g===ve.id,k=ve.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:F=>b(F.target.value)}):ve.name}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:F=>B(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):ve.category}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:P,onChange:F=>_(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):ve.measurement}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:F=>I(parseFloat(F.target.value))}):dSe(ve.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:k?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:Se?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:se,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ge,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>J(ve),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${k?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>he(ve),children:k?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>me(ve.id),children:"Eliminar"})]})})]},ve.id)})})]})})]})}const No=[];for(let t=0;t<256;++t)No.push((t+256).toString(16).slice(1));function ASe(t,e=0){return(No[t[e+0]]+No[t[e+1]]+No[t[e+2]]+No[t[e+3]]+"-"+No[t[e+4]]+No[t[e+5]]+"-"+No[t[e+6]]+No[t[e+7]]+"-"+No[t[e+8]]+No[t[e+9]]+"-"+No[t[e+10]]+No[t[e+11]]+No[t[e+12]]+No[t[e+13]]+No[t[e+14]]+No[t[e+15]]).toLowerCase()}let wB;const hSe=new Uint8Array(16);function mSe(){if(!wB){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wB=crypto.getRandomValues.bind(crypto)}return wB(hSe)}const pSe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SQ={randomUUID:pSe};function gSe(t,e,r){var a;if(SQ.randomUUID&&!t)return SQ.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??mSe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ASe(n)}async function xSe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=At(t,"inventory_batches"),s=Wt(a,sr("productName","==",e)),c=(await Dt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",h=d.data.date??"";if(f!==h)return f<h?-1:1;const A=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return A-m}).map(u=>$t(t,"inventory_batches",u.id));return Di(t,async u=>{let d=Number(r);const f=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),B=Number(b.remaining??w??0),P=Number(b.purchasePrice??0);if(B<=0)continue;const _=Math.min(B,d),E=Number((B-_).toFixed(3));u.update(x,{remaining:E}),f.push({batchId:x.id,qty:_,unitCost:P,lineCost:Number((_*P).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const A=Number(f.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=f.reduce((g,x)=>g+x.qty,0),p=m>0?Number((A/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:A}})}const Kee=3,vSe=.5*10**-Kee;function ss(t){const e=Number(t??0);return Number(e.toFixed(Kee))}function NB(t,e){return ss((t??0)+(e??0))}function eC(t,e){return ss(t)+vSe>=ss(e)}async function ySe(t,e){const r=await Dt(At(je,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await Jr($t(je,"inventory_batches",s.id),{productId:e}),a++)}return a}function IQ({user:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(""),[l,c]=v.useState(wr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(""),[f,h]=v.useState(""),[A,m]=v.useState([]),[p,g]=v.useState(0),[x,y]=v.useState(0),[b,w]=v.useState("0"),[B,P]=v.useState(""),[_,E]=v.useState(!1),[I,O]=v.useState({}),S=K=>Math.round(K*100)/100,j=K=>ss(K).toFixed(3),D=K=>{const M=Number(K.specialPrice||0);return M>0?M:Number(K.price||0)},J=async K=>{if(!K)return 0;const M=Wt(At(je,"inventory_batches"),sr("productId","==",K)),pe=await Dt(M);let X=0;return pe.forEach(G=>{const ie=G.data();X=NB(X,Number(ie.remaining||0))}),ss(X)},ge=async K=>{if(!K)return 0;const M=await Dt(At(je,"inventory_batches"));let pe=0;return M.forEach(X=>{const G=X.data();(G.productName||"").trim().toLowerCase()===K.trim().toLowerCase()&&(pe=NB(pe,Number(G.remaining||0)))}),ss(pe)};v.useEffect(()=>{(async()=>{const K=await Dt(At(je,"products")),M=[];K.forEach(pe=>{const X=pe.data();(X==null?void 0:X.active)!==!1&&M.push({id:pe.id,productName:X.name??X.productName??"(sin nombre)",price:Number(X.price??0),measurement:X.measurement??"(sin unidad)",category:X.category??"(sin categora)"})}),r(M)})()},[]),v.useEffect(()=>{(async()=>{const K=await Dt(At(je,"inventory_batches")),M={};K.forEach(pe=>{const X=pe.data(),G=X.productId,ie=Number(X.remaining||0);G&&(M[G]=NB(M[G]||0,ie))}),Object.keys(M).forEach(pe=>M[pe]=ss(M[pe])),O(M)})()},[]),v.useEffect(()=>{(async()=>{const K=await Dt(At(je,"users")),M=[];K.forEach(pe=>{const X=pe.data();M.push({id:pe.id,email:X.email??"(sin email)",role:X.role??"USER"})}),a(M)})()},[]);const se=async()=>{if(!s)return;const K=e.find(pe=>pe.id===s);if(!K)return;if(A.some(pe=>pe.productId===K.id)){i("");return}const M=await J(K.id);m(pe=>[...pe,{productId:K.id,productName:K.productName,measurement:K.measurement,price:Number(K.price||0),specialPrice:0,stock:M,qty:0,discount:0}]),i("")},he=async K=>{if(!K)return;const M=e.find(X=>X.id===K);if(!M||A.some(X=>X.productId===M.id))return;const pe=await J(M.id);m(X=>[...X,{productId:M.id,productName:M.productName,measurement:M.measurement,price:Number(M.price||0),specialPrice:0,stock:pe,qty:0,discount:0}]),i("")},me=K=>{m(M=>M.filter(pe=>pe.productId!==K))},Z=async(K,M)=>{m(pe=>pe.map(X=>{if(X.productId!==K)return X;const G=(X.measurement||"").toLowerCase()!=="lb",ie=M===""?0:Number(M),Ie=G?Math.max(0,Math.round(ie)):ss(ie);return{...X,qty:Ie}}))},ve=(K,M)=>{m(pe=>pe.map(X=>{if(X.productId!==K)return X;const G=(M||"").replace(",","."),ie=G.trim()===""?0:Number(G),Ie=Number.isFinite(ie)?Math.max(0,S(ie)):0;return{...X,specialPrice:Ie}}))},Se=(K,M)=>{m(pe=>pe.map(X=>{if(X.productId!==K)return X;const G=Math.max(0,Math.floor(Number(M||0)));return{...X,discount:G}}))},k=v.useMemo(()=>{let K=0;for(const M of A){const pe=D(M),X=Number(pe||0)*Number(M.qty||0),G=Math.max(0,X-Math.max(0,Number(M.discount||0)));K+=G}return S(K)},[A]);v.useEffect(()=>{g(k)},[k]),v.useEffect(()=>{const K=Number(x)||0,M=Number(p)||0;w((K-M).toFixed(2))},[x,p]);const F=K=>{K.key===","&&(K.preventDefault(),K.target.value+=".")},[H,Q]=v.useState(!1);v.useEffect(()=>{var pe;const K=window.matchMedia("(max-width: 900px)"),M=()=>Q(K.matches);return M(),(pe=K.addEventListener)==null||pe.call(K,"change",M),()=>{var X;return(X=K.removeEventListener)==null?void 0:X.call(K,"change",M)}},[]);const V=async()=>{if(A.length===0)return"Agrega al menos un producto.";for(const K of A){if(!K.qty||K.qty<=0)return`Cantidad invlida para "${K.productName}".`;const M=await J(K.productId);if(!eC(M,K.qty)){const pe=await ge(K.productName);if(eC(pe,0)&&!eC(M,0)){const X=await ySe(K.productName,K.productId),G=await J(K.productId);if(!eC(G,K.qty))return`Stock insuficiente tras corregir ${X} lote(s) para "${K.productName}".`}else return`Stock insuficiente para "${K.productName}". Disponible: ${M}`}}return null},Y=async K=>{var pe,X;K.preventDefault(),P("");const M=await V();if(M){P(" "+M);return}try{E(!0);const G=[];for(const Re of A){const ze=Re.qty,{allocations:st,avgUnitCost:lt,cogsAmount:_t}=await xSe(je,Re.productName,ze,!1),bt=D(Re),St=Number(bt||0)*Number(ze||0),kt=Math.max(0,Number(Re.discount||0)),et=Math.max(0,St-kt);G.push({productId:Re.productId,productName:Re.productName,measurement:Re.measurement,unitPrice:Number(bt||0),regularPrice:Number(Re.price||0),specialPrice:Number(Re.specialPrice||0)>0?Number(Re.specialPrice):null,qty:ze,discount:kt,lineTotal:S(St),lineFinal:S(et),allocations:st,avgUnitCost:lt,cogsAmount:_t})}const ie=G.reduce((Re,ze)=>Re+ze.lineFinal,0),Ie=G.reduce((Re,ze)=>Re+Number(ze.qty||0),0);await Nn(At(je,"salesV2"),{id:gSe(),quantity:Ie,amount:ie,amountCharged:ie,amountReceived:Number(x)||0,change:b,clientName:u.trim(),timestamp:tr.now(),date:l,userEmail:((pe=n[0])==null?void 0:pe.email)??"sin usuario",vendor:((X=n[0])==null?void 0:X.role)??"sin usuario",status:"FLOTANTE",items:G,itemsTotal:ie}),P(" Venta registrada y asignada a inventario (FIFO)."),m([]),i(""),g(0),y(0),w("0"),d(""),c(wr(new Date,"yyyy-MM-dd"))}catch(G){console.error(G),P(` ${(G==null?void 0:G.message)||"Error al registrar la venta."}`)}finally{E(!1)}},R=v.useMemo(()=>new Set(A.map(K=>K.productId)),[A]),z=v.useMemo(()=>e.filter(K=>(I[K.id]||0)>0),[e,I]),le=v.useMemo(()=>{const K=String(f||"").trim().toLowerCase();return K?z.filter(M=>`${M.productName||""}`.toLowerCase().includes(K)):z},[z,f]);return H?o.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),o.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:l,onChange:K=>c(K.target.value),"aria-label":"Fecha de la venta"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:u,onChange:K=>d(K.target.value),placeholder:"Opcional"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:f,onChange:K=>h(K.target.value)}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{className:"flex-1 border rounded px-2 py-2",value:s,onChange:async K=>{const M=K.target.value;i(M),await he(M)},children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),le.map(K=>o.jsxs("option",{value:K.id,disabled:R.has(K.id),children:[K.productName,"  ",K.measurement,"  C$ ",K.price]},K.id))]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Items"}),A.length===0?o.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):o.jsx("div",{className:"space-y-2",children:A.map(K=>{const M=D(K),pe=Number(M||0)*Number(K.qty||0),X=Math.max(0,pe-Math.max(0,Number(K.discount||0))),G=(K.measurement||"").toLowerCase()!=="lb";return o.jsxs("div",{className:"border rounded p-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-semibold",children:K.productName}),o.jsxs("div",{className:"text-sm",children:["C$ ",S(M).toFixed(2)]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:G?"numeric":"decimal",step:G?1:.01,value:K.qty===0?"":K.qty,onChange:ie=>Z(K.productId,ie.target.value),placeholder:G?"Unid":"Libras",title:G?"Unidades":"Libras"}),o.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:K.discount===0?"":K.discount,onChange:ie=>Se(K.productId,ie.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:K.specialPrice===0?"":K.specialPrice,onChange:ie=>ve(K.productId,ie.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",ss(Number(K.stock)-Number(K.qty||0)).toFixed(3)]}),o.jsxs("div",{className:"font-semibold",children:["C$ ",S(X).toFixed(2)]})]}),o.jsx("div",{className:"mt-2 text-right",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>me(K.productId),children:"Quitar"})})]},K.productId)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:" Monto total"}),o.jsxs("div",{className:"text-xl font-bold",children:["C$ ",p.toFixed(2)]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:x===0?"":x,onChange:K=>y(Number(K.target.value||0)),placeholder:"Monto recibido"}),o.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",b]})]}),o.jsx("button",{onClick:Y,disabled:A.length===0||_,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:_?"Guardando...":"Guardar venta"}),B&&o.jsx("div",{className:`text-sm ${B.startsWith("")?"text-green-600":B.startsWith("")?"text-yellow-600":"text-red-600"}`,children:B})]})}):o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:Y,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:s,onChange:K=>i(K.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),z.map(K=>o.jsxs("option",{value:K.id,disabled:R.has(K.id),title:R.has(K.id)?"Ya est en la lista":`Disponible: ${j(I[K.id]||0)}`,children:[K.productName,"  ",K.measurement,"  C$ ",K.price," (disp:"," ",j(I[K.id]||0),")"]},K.id))]}),o.jsx("button",{type:"button",onClick:se,disabled:!s||R.has(s),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:K=>c(K.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:u,onChange:K=>d(K.target.value),placeholder:"Opcional"})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):A.map(K=>{const M=D(K),pe=Number(M||0)*Number(K.qty||0),X=Math.max(0,pe-Math.max(0,Number(K.discount||0))),G=(K.measurement||"").toLowerCase()!=="lb",ie=ss(Number(K.stock)-Number(K.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[K.productName,"  ",K.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(K.price).toFixed(2)]}),o.jsxs("td",{className:"p-2 border",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:K.specialPrice===0?"":K.specialPrice,onKeyDown:F,onChange:Ie=>ve(K.productId,Ie.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),o.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",S(M).toFixed(2)]})]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ie.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:G?1:.01,inputMode:G?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:K.qty===0?"":K.qty,onKeyDown:F,onChange:Ie=>Z(K.productId,Ie.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:K.discount===0?"":K.discount,onChange:Ie=>Se(K.productId,Ie.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(X).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>me(K.productId),title:"Quitar",children:""})})]},K.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${p.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:x===0?"":x,onChange:K=>y(Number(K.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${b}`,readOnly:!0})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:A.length===0||_,children:_?"Guardando...":"Guardar venta"}),B&&o.jsx("p",{className:`text-sm mt-2 ${B.startsWith("")?"text-green-600":B.startsWith("")?"text-yellow-600":"text-red-600"}`,children:B})]}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var Gee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},BQ=so.createContext&&so.createContext(Gee),bSe=["attr","size","title"];function wSe(t,e){if(t==null)return{};var r=NSe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function QE(){return QE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QE.apply(this,arguments)}function PQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PQ(Object(r),!0).forEach(function(n){CSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CSe(t,e,r){return e=_Se(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Se(t){var e=ESe(t,"string");return typeof e=="symbol"?e:e+""}function ESe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qee(t){return t&&t.map((e,r)=>so.createElement(e.tag,VE({key:r},e.attr),qee(e.child)))}function SSe(t){return e=>so.createElement(ISe,QE({attr:VE({},t.attr)},e),qee(t.child))}function ISe(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=wSe(t,bSe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),so.createElement("svg",QE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:VE(VE({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&so.createElement("title",null,s),t.children)};return BQ!==void 0?so.createElement(BQ.Consumer,null,r=>e(r)):e(Gee)}function BSe(t){return SSe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Xc({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(BSe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const qi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function CB(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function PSe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState(!0),[u,d]=v.useState(""),{refreshKey:f,refresh:h}=Ac(),A=t==="admin",[m,p]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[g,x]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[y,b]=v.useState(""),[w,B]=v.useState(!1),[P,_]=v.useState(""),[E,I]=v.useState(wr(new Date,"yyyy-MM-dd")),[O,S]=v.useState("lb"),[j,D]=v.useState(""),[J,ge]=v.useState(0),[se,he]=v.useState(0),[me,Z]=v.useState(0),[ve,Se]=v.useState([]),[k,F]=v.useState(null),[H,Q]=v.useState([]),[V,Y]=v.useState(!1),[R,z]=v.useState(null),[le,K]=v.useState(!1),[M,pe]=v.useState(null),X=oe=>{const Be=(oe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Be)||Be==="lb"};v.useEffect(()=>{(async()=>{c(!0),d("");const oe=await Dt(At(je,"products")),Be=[];oe.forEach(nt=>{const ke=nt.data();ke.active===!0&&Be.push({id:nt.id,name:ke.name??ke.productName??"(sin nombre)",category:ke.category??"(sin categora)",measurement:ke.measurement??"lb",price:Number(ke.price??0)})}),a(Be);const Me=Wt(At(je,"inventory_batches"),ln("date","desc")),Ze=await Dt(Me),Je=[];Ze.forEach(nt=>{const ke=nt.data(),ae=ss(Number(ke.quantity||0)),De=Number(ke.purchasePrice||0),We=Number(ke.salePrice||0),pt=Number((ae*De).toFixed(2)),ct=Number((ae*We).toFixed(2));Je.push({id:nt.id,productId:ke.productId,productName:ke.productName,category:ke.category,unit:ke.unit,quantity:ae,remaining:ss(Number(ke.remaining||0)),purchasePrice:De,salePrice:We,invoiceTotal:ke.invoiceTotal!=null?Number(ke.invoiceTotal):pt,expectedTotal:ke.expectedTotal!=null?Number(ke.expectedTotal):ct,date:ke.date,createdAt:ke.createdAt,status:ke.status,notes:ke.notes,paidAmount:Number(ke.paidAmount||0),paidAt:ke.paidAt,batchGroupId:ke.batchGroupId,orderName:ke.orderName})}),i(Je),c(!1)})()},[f]);const G=v.useMemo(()=>s.filter(oe=>!(m&&oe.date<m||g&&oe.date>g||y&&oe.productId!==y)),[s,m,g,y]),ie=v.useMemo(()=>{const oe=G.reduce((De,We)=>De+Number(We.invoiceTotal||0),0),Be=G.reduce((De,We)=>De+Number(We.expectedTotal||0),0);let Me=0,Ze=0,Je=0,nt=0;for(const De of G)X(De.unit)?(Me+=De.quantity,Ze+=De.remaining):(Je+=De.quantity,nt+=De.remaining);const ke=G.reduce((De,We)=>De+We.quantity,0),ae=G.reduce((De,We)=>De+We.remaining,0);return{lbsIng:Me,lbsRem:Ze,udsIng:Je,udsRem:nt,qty:ke,rem:ae,totalFacturado:oe,totalEsperado:Be}},[G]),Ie=v.useMemo(()=>{var Me,Ze;const oe=new Map;for(const Je of G){const nt=Je.batchGroupId&&String(Je.batchGroupId).trim()||Je.id;oe.has(nt)||oe.set(nt,[]),oe.get(nt).push(Je)}const Be=[];for(const[Je,nt]of oe.entries()){const ke=[...nt].sort((Ue,te)=>{var He,Ye;const Ce=((He=Ue.createdAt)==null?void 0:He.seconds)??0;return(((Ye=te.createdAt)==null?void 0:Ye.seconds)??0)-Ce}),ae=((Me=ke[0])==null?void 0:Me.date)||"",De=String(((Ze=ke[0])==null?void 0:Ze.orderName)||"").trim()||`Pedido ${ae||""}`.trim()||"Pedido",We=new Set(ke.map(Ue=>String(Ue.category||"").trim()).filter(Boolean)),pt=We.size===1?Array.from(We)[0].toUpperCase():"MIXTO",ct=ke.some(Ue=>Ue.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Xe=ss(ke.reduce((Ue,te)=>Ue+(X(te.unit)?Number(te.quantity||0):0),0)),Rt=ss(ke.reduce((Ue,te)=>Ue+(X(te.unit)?Number(te.remaining||0):0),0)),er=Number(ke.reduce((Ue,te)=>Ue+Number(te.invoiceTotal||0),0).toFixed(2)),L=Number(ke.reduce((Ue,te)=>Ue+Number(te.expectedTotal||0),0).toFixed(2)),we=Number((L-er).toFixed(2));Be.push({groupId:Je,orderName:De,date:ae,typeLabel:pt,status:ct,lbsIn:Xe,lbsRem:Rt,totalFacturado:er,totalEsperado:L,utilidadBruta:we,items:ke})}return Be.sort((Je,nt)=>Je.date===nt.date?Je.groupId<nt.groupId?1:-1:Je.date<nt.date?1:-1),Be},[G]),Re=v.useMemo(()=>{const oe=String(O||"").toLowerCase().trim();return n.filter(Me=>String(Me.measurement||"").toLowerCase().trim()===oe).sort((Me,Ze)=>Me.name.localeCompare(Ze.name,"es"))},[n,O]);v.useEffect(()=>{const oe=n.find(Be=>Be.id===j);oe&&Z(Number(oe.price||0))},[j,n,f]);const ze=()=>{d("");const oe=n.find(ae=>ae.id===j);if(!oe)return d("Selecciona un producto.");if(J<=0||se<=0)return d("Completa libras a ingresar y precio proveedor.");const Be=ss(J),Me=oe.measurement,Ze=Number((Be*Number(se||0)).toFixed(2)),Je=Number((Be*Number(me||0)).toFixed(2)),nt=Number((Je-Ze).toFixed(2)),ke=ve.findIndex(ae=>ae.productId===oe.id);ke>=0?Se(ae=>ae.map((De,We)=>We!==ke?De:{...De,quantity:Be,remaining:Be,purchasePrice:Number(se||0),salePrice:Number(me||0),invoiceTotal:Ze,expectedTotal:Je,utilidadBruta:nt})):Se(ae=>[...ae,{tempId:CB("IT"),productId:oe.id,productName:oe.name,category:oe.category,unit:Me,quantity:Be,remaining:Be,purchasePrice:Number(se||0),salePrice:Number(me||0),invoiceTotal:Ze,expectedTotal:Je,utilidadBruta:nt}]),D(""),ge(0),he(0),Z(0)},st=oe=>{Se(Be=>Be.filter(Me=>Me.tempId!==oe))},lt=(oe,Be,Me)=>{Se(Ze=>Ze.map(Je=>{if(Je.tempId!==oe)return Je;const nt={...Je};return Be==="quantity"&&(nt.quantity=ss(Math.max(0,Me)),k||(nt.remaining=nt.quantity)),Be==="purchasePrice"&&(nt.purchasePrice=Math.max(0,Number(Me||0))),Be==="salePrice"&&(nt.salePrice=Math.max(0,Number(Me||0))),nt.invoiceTotal=Number((nt.quantity*nt.purchasePrice).toFixed(2)),nt.expectedTotal=Number((nt.quantity*nt.salePrice).toFixed(2)),nt.utilidadBruta=Number((nt.expectedTotal-nt.invoiceTotal).toFixed(2)),nt}))},_t=v.useMemo(()=>{const oe=ss(ve.reduce((nt,ke)=>nt+(X(ke.unit)?Number(ke.quantity||0):0),0)),Be=ss(ve.reduce((nt,ke)=>nt+(X(ke.unit)?Number(ke.remaining||0):0),0)),Me=Number(ve.reduce((nt,ke)=>nt+Number(ke.invoiceTotal||0),0).toFixed(2)),Ze=Number(ve.reduce((nt,ke)=>nt+Number(ke.expectedTotal||0),0).toFixed(2)),Je=Number((Ze-Me).toFixed(2));return{lbsIn:oe,lbsRem:Be,totalFacturado:Me,totalEsperado:Ze,utilidadBruta:Je}},[ve]),bt=()=>{F(null),Q([]),_(""),I(wr(new Date,"yyyy-MM-dd")),S("lb"),D(""),ge(0),he(0),Z(0),Se([])},St=async()=>{if(d(""),!ve.length)return d("Agrega al menos un producto al pedido.");const oe=E||wr(new Date,"yyyy-MM-dd"),Be=String(P||"").trim()||`Pedido ${oe}`,Me=k||CB("BATCH");try{if(!k){for(const ke of ve)await _Q({productId:ke.productId,productName:ke.productName,category:ke.category,unit:ke.unit,quantity:ss(ke.quantity),purchasePrice:Number(ke.purchasePrice||0),salePrice:Number(ke.salePrice||0),invoiceTotal:Number(ke.invoiceTotal||0),expectedTotal:Number(ke.expectedTotal||0),date:oe,notes:"",batchGroupId:Me,orderName:Be});d(" Pedido creado"),B(!1),bt(),h();return}const Ze=H,Je=new Map;for(const ke of Ze)Je.set(ke.productId,ke);const nt=new Set(ve.map(ke=>ke.productId));for(const ke of ve){const ae=Je.get(ke.productId),De=ss(ke.quantity);if(ae){const We=ss(ae.quantity-ae.remaining),pt=Math.max(0,ss(De-We));await Jr($t(je,"inventory_batches",ae.id),{date:oe,orderName:Be,batchGroupId:Me,quantity:De,purchasePrice:Number(ke.purchasePrice||0),salePrice:Number(ke.salePrice||0),invoiceTotal:Number(ke.invoiceTotal||0),expectedTotal:Number(ke.expectedTotal||0),remaining:pt})}else await _Q({productId:ke.productId,productName:ke.productName,category:ke.category,unit:ke.unit,quantity:De,purchasePrice:Number(ke.purchasePrice||0),salePrice:Number(ke.salePrice||0),invoiceTotal:Number(ke.invoiceTotal||0),expectedTotal:Number(ke.expectedTotal||0),date:oe,notes:"",batchGroupId:Me,orderName:Be})}for(const ke of Ze)nt.has(ke.productId)||await Qn($t(je,"inventory_batches",ke.id));d(" Pedido actualizado"),B(!1),bt(),h()}catch(Ze){console.error(Ze),d(" Error al guardar pedido")}},kt=oe=>{z(oe),Y(!0)},et=oe=>{F(oe.groupId),Q(oe.items),_(oe.orderName),I(oe.date||wr(new Date,"yyyy-MM-dd"));const Be=oe.items.map(Me=>{const Ze=Number(Me.invoiceTotal||0),Je=Number(Me.expectedTotal||0);return{tempId:CB("IT"),productId:Me.productId,productName:Me.productName,category:Me.category,unit:Me.unit,quantity:ss(Me.quantity),remaining:ss(Me.remaining),purchasePrice:Number(Me.purchasePrice||0),salePrice:Number(Me.salePrice||0),invoiceTotal:Ze,expectedTotal:Je,utilidadBruta:Number((Je-Ze).toFixed(2))}});Se(Be),B(!0)},ce=async oe=>{if(confirm(`Eliminar el pedido "${oe.orderName}" del ${oe.date}?`))try{for(const Me of oe.items)await Qn($t(je,"inventory_batches",Me.id));d(" Pedido eliminado"),h()}catch(Me){console.error(Me),d(" Error al eliminar pedido")}},Qe=oe=>{pe(oe),K(!0)},xe=async()=>{if(M)try{for(const oe of M.items){if(oe.status!=="PENDIENTE")continue;await $ee(oe.id),await Jr($t(je,"inventory_batches",oe.id),{remaining:0});const Be={date:oe.date,productName:oe.productName,quantity:oe.quantity,amount:Number((oe.expectedTotal??oe.salePrice*oe.quantity).toFixed(2)),allocations:[{batchId:oe.id,qty:oe.quantity,unitCost:oe.purchasePrice,lineCost:Number((oe.purchasePrice*oe.quantity).toFixed(2))}],avgUnitCost:oe.purchasePrice,measurement:oe.unit,createdAt:tr.now(),autoGeneratedFromInventory:!0};await Nn(At(je,"salesV2"),Be)}d(" Pedido pagado y reflejado como venta"),h()}catch(oe){console.error(oe),d(" Error al pagar pedido")}finally{K(!1),pe(null)}},fe=()=>{K(!1),pe(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),A&&o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{bt(),B(!0)},children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:oe=>p(oe.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:oe=>x(oe.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:oe=>b(oe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),n.map(oe=>o.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category]},oe.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{p(""),x(""),b("")},children:"Quitar filtro"}),o.jsx("div",{className:"ml-auto",children:o.jsx(Xc,{onClick:()=>h(),loading:l})})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ie.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ie.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ie.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ie.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",ie.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",ie.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(ie.totalEsperado-ie.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",G.length.toLocaleString()]})]})}),o.jsx("div",{className:"md:hidden space-y-3",children:l?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):Ie.length===0?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):Ie.map(oe=>o.jsxs("div",{className:"bg-white border rounded-2xl p-4 shadow",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold text-lg",children:oe.date}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:oe.orderName})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),o.jsx("div",{className:"font-semibold",children:oe.typeLabel})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),o.jsx("div",{className:"font-semibold",children:qi(oe.utilidadBruta)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),o.jsx("div",{className:"font-semibold",children:oe.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),o.jsx("div",{className:"font-semibold",children:oe.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[o.jsx("span",{children:"Total facturado"}),o.jsx("span",{children:"Total esperado"})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:qi(oe.totalFacturado)}),o.jsx("span",{children:qi(oe.totalEsperado)})]})]})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>kt(oe),children:"Ver detalle"}),A?o.jsxs(o.Fragment,{children:[oe.status==="PENDIENTE"&&o.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Qe(oe),children:"Pagar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>et(oe),children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>ce(oe),children:"Borrar"})]}):null]})]},oe.groupId))}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Total Facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):Ie.map(oe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border",children:[o.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>kt(oe),title:oe.orderName,children:oe.date}),o.jsx("div",{className:"text-[11px] text-gray-500",children:oe.orderName})]}),o.jsx("td",{className:"p-2 border",children:oe.typeLabel}),o.jsx("td",{className:"p-2 border",children:oe.lbsIn.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:oe.lbsRem.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:qi(oe.totalFacturado)}),o.jsx("td",{className:"p-2 border",children:qi(oe.totalEsperado)}),o.jsx("td",{className:"p-2 border",children:qi(oe.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})}),o.jsx("td",{className:"p-2 border",children:A?o.jsxs("div",{className:"flex gap-2 justify-center",children:[oe.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>Qe(oe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>et(oe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ce(oe),children:"Borrar"})]}):o.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},oe.groupId))})]})}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),w&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>B(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:k?"Editar pedido":"Crear pedido"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>B(!1),type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:P,onChange:oe=>_(oe.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:E,onChange:oe=>I(oe.target.value)})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:oe=>{S(oe.target.value),D(""),ge(0),he(0),Z(0)},children:[o.jsx("option",{value:"lb",children:"lb"}),o.jsx("option",{value:"unidad",children:"unidad"}),o.jsx("option",{value:"kg",children:"kg"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:j,onChange:oe=>D(oe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),Re.map(oe=>o.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category,"  ",oe.measurement]},oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:oe=>{const Be=oe.target.value.replace(",","."),Me=parseFloat(Be),Ze=Number.isFinite(Me)?parseFloat(Me.toFixed(3)):0;ge(Math.max(0,Ze))},disabled:!j})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:se===0?"":se,onChange:oe=>{const Be=oe.target.value.replace(",","."),Me=parseFloat(Be),Ze=Number.isFinite(Me)?parseFloat(Me.toFixed(2)):0;he(Math.max(0,Ze))},disabled:!j})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:me===0?"":me,onChange:oe=>{const Be=oe.target.value.replace(",","."),Me=parseFloat(Be),Ze=Number.isFinite(Me)?parseFloat(Me.toFixed(2)):0;Z(Math.max(0,Ze))},disabled:!j})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:ze,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ve.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):ve.map(oe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border text-left",children:[oe.productName,o.jsxs("div",{className:"text-[11px] text-gray-500",children:[oe.category,"  ",oe.unit]})]}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.quantity,onChange:Be=>{const Me=Be.target.value.replace(",","."),Ze=parseFloat(Me),Je=Number.isFinite(Ze)?parseFloat(Ze.toFixed(3)):0;lt(oe.tempId,"quantity",Je)}})}),o.jsx("td",{className:"p-2 border",children:Number(oe.remaining||0).toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.purchasePrice,onChange:Be=>{const Me=Be.target.value.replace(",","."),Ze=parseFloat(Me),Je=Number.isFinite(Ze)?parseFloat(Ze.toFixed(2)):0;lt(oe.tempId,"purchasePrice",Je)}})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.salePrice,onChange:Be=>{const Me=Be.target.value.replace(",","."),Ze=parseFloat(Me),Je=Number.isFinite(Ze)?parseFloat(Ze.toFixed(2)):0;lt(oe.tempId,"salePrice",Je)}})}),o.jsx("td",{className:"p-2 border",children:qi(oe.invoiceTotal)}),o.jsx("td",{className:"p-2 border",children:qi(oe.expectedTotal)}),o.jsx("td",{className:"p-2 border",children:qi(oe.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>st(oe.tempId),children:"Quitar"})})]},oe.tempId))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:_t.lbsIn.toFixed(3)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:_t.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),o.jsx("div",{className:"text-lg font-semibold",children:qi(_t.totalFacturado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:qi(_t.totalEsperado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:qi(_t.utilidadBruta)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>B(!1),children:"Cancelar"}),o.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:St,disabled:ve.length===0,children:k?"Editar pedido":"Crear pedido"})]})]})]}),document.body),V&&R&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{Y(!1),z(null)}}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:R.orderName})," "," ",R.date]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Y(!1),z(null)},type:"button",children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:R.items.map(oe=>{const Be=Number(oe.invoiceTotal||0),Me=Number(oe.expectedTotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:oe.productName}),o.jsx("td",{className:"p-2 border",children:(oe.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:oe.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:oe.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:qi(oe.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:qi(oe.salePrice)}),o.jsx("td",{className:"p-2 border",children:qi(Be)}),o.jsx("td",{className:"p-2 border",children:qi(Me)}),o.jsx("td",{className:"p-2 border",children:qi(Me-Be)}),o.jsx("td",{className:"p-2 border",children:oe.status})]},oe.id)})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:R.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:R.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:qi(R.utilidadBruta)})]})]})]})]}),document.body),le&&M&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:fe}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",o.jsx("br",{}),o.jsx("strong",{children:M.orderName})," "," ",M.date,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:xe,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:fe,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Uf=t=>`C$${(Number(t)||0).toFixed(2)}`;function jSe(){const t=$1e(new Date),[e,r]=v.useState(wr(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=wr(kd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=wr(Td(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{i(!0);try{const g=await iSe(d.from,d.to),x=[];for(const y of g){const b=$t(je,"inventory_batches",y.batchId),w=await Li(b);if(!w.exists())continue;const B=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:B.status??"PENDIENTE",purchasePrice:Number(B.purchasePrice||0),salePrice:Number(B.salePrice||0),supplier:B.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{f()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await $ee(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},A=v.useMemo(()=>{const g=n.reduce((w,B)=>w+B.soldQty,0),x=n.reduce((w,B)=>w+B.soldAmount,0),y=n.reduce((w,B)=>w+B.soldQty*B.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([AA(()=>Promise.resolve().then(()=>y6),void 0),AA(()=>Promise.resolve().then(()=>MT),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),B=new y("p","mm","a4"),P=190,_=B.getImageProperties(w),E=P,I=_.height*E/_.width;B.addImage(w,"PNG",10,10,E,I),B.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),o.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:u,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",A.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Uf(A.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Uf(A.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Uf(A.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.batchDate}),o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:g.soldQty}),o.jsx("td",{className:"p-2 border",children:Uf(g.soldAmount)}),o.jsx("td",{className:"p-2 border",children:Uf(x)}),o.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Uf(y)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),o.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.qty}),o.jsx("td",{className:"p-2 border",children:Uf(g.revenue)}),o.jsx("td",{className:"p-2 border",children:Uf(g.cogs)}),o.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:Uf(g.profit)})]},g.productName))})]})})]}),l&&o.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Nl=t=>`C$${Number(t??0).toFixed(2)}`,TSe=()=>wr(new Date,"yyyy-MM-dd"),Bg=t=>Number(t||0).toFixed(3);function kSe(){const[t,e]=v.useState(()=>{const S=new Date,j=new Date(S.getFullYear(),S.getMonth(),1);return wr(j,"yyyy-MM-dd")}),[r,n]=v.useState(TSe()),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:f}=Ac(),[h,A]=v.useState({}),[m,p]=v.useState({});v.useEffect(()=>{(async()=>{s(!0);const j=Wt(At(je,"salesV2"),sr("date",">=",t),sr("date","<=",r)),D=await Dt(j),J=[];D.forEach(me=>{const Z=me.data(),ve=Z.date??"";if(Array.isArray(Z.items)&&Z.items.length>0){Z.items.forEach((Se,k)=>{const F=String(Se.productName??"(sin nombre)"),H=Number(Se.qty??0),Q=Number(Se.lineFinal??0)||Math.max(0,Number(Se.unitPrice||0)*H-Number(Se.discount||0));J.push({id:`${me.id}#${k}`,date:ve,productName:F,quantity:H,amount:Q,allocations:Array.isArray(Se.allocations)?Se.allocations:Z.allocations,avgUnitCost:Number(Se.avgUnitCost??Z.avgUnitCost??0),measurement:Se.measurement??Z.measurement??""})});return}J.push({id:me.id,date:ve,productName:Z.productName??"(sin nombre)",quantity:Number(Z.quantity??0),amount:Number(Z.amount??Z.amountCharged??0),allocations:Array.isArray(Z.allocations)?Z.allocations:[],avgUnitCost:Number(Z.avgUnitCost??0),measurement:Z.measurement??""})}),l(J);const ge=Wt(At(je,"expenses"),sr("date",">=",t),sr("date","<=",r)),se=await Dt(ge),he=[];se.forEach(me=>{const Z=me.data();he.push({id:me.id,date:Z.date??"",category:Z.category??"(sin categora)",description:Z.description??"",amount:Number(Z.amount??0),status:Z.status??"PAGADO",createdAt:Z.createdAt})}),u(he),s(!1)})()},[t,r,d]);const g=v.useMemo(()=>{const S=i.reduce((se,he)=>se+(he.amount||0),0);let j=0;i.forEach(se=>{var he;(he=se.allocations)!=null&&he.length?j+=se.allocations.reduce((me,Z)=>me+Number(Z.lineCost||0),0):se.avgUnitCost&&se.quantity&&(j+=Number(se.avgUnitCost)*Number(se.quantity))});const D=S-j,J=c.reduce((se,he)=>se+(he.amount||0),0),ge=D-J;return{revenue:S,cogsReal:j,grossProfit:D,expensesSum:J,netProfit:ge}},[i,c]),x=S=>String(S??"").toLowerCase().trim(),y=S=>Number(S.qty??S.quantity??0),b=S=>["lb","lbs","libra","libras"].includes(x(S)),w=S=>["unidad","unidades","ud","uds","pieza","piezas"].includes(x(S)),B=v.useMemo(()=>i.reduce((S,j)=>b(j.measurement)?S+y(j):S,0),[i]),P=v.useMemo(()=>i.reduce((S,j)=>w(j.measurement)?S+y(j):S,0),[i]),_=v.useMemo(()=>{var j;const S=new Map;for(const D of i){const J=D.productName||"(sin nombre)";S.has(J)||S.set(J,{productName:J,units:0,revenue:0,cogs:0,profit:0,firstDate:D.date||"",lastDate:D.date||""});const ge=S.get(J);ge.units+=Number(D.quantity||0),ge.revenue+=Number(D.amount||0),(!ge.firstDate||D.date<(ge.firstDate||D.date))&&(ge.firstDate=D.date),(!ge.lastDate||D.date>(ge.lastDate||D.date))&&(ge.lastDate=D.date);let se=0;(j=D.allocations)!=null&&j.length?se=D.allocations.reduce((he,me)=>he+Number(me.lineCost||0),0):D.avgUnitCost&&(se=Number(D.avgUnitCost)*Number(D.quantity||0)),ge.cogs+=se,ge.profit=ge.revenue-ge.cogs}return Array.from(S.values()).sort((D,J)=>D.productName.localeCompare(J.productName))},[i]),E=v.useMemo(()=>[..._].sort((S,j)=>j.units-S.units).slice(0,3).map((S,j)=>({idx:j+1,name:S.productName,units:S.units})),[_]),I=S=>A(j=>({...j,[S]:!j[S]})),O=S=>p(j=>({...j,[S]:!j[S]}));return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),o.jsx(Xc,{onClick:f,loading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:S=>e(S.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:S=>n(S.target.value)})]})]}),a?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(F1,{title:"Ventas",value:Nl(g.revenue)}),o.jsx(F1,{title:"Costo",value:Nl(g.cogsReal)}),o.jsx(F1,{title:"Ganancia Bruta",value:Nl(g.grossProfit),positive:!0}),o.jsx(F1,{title:"Gastos",value:Nl(g.expensesSum)}),o.jsx(F1,{title:"Ganancia Neta",value:Nl(g.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(jQ,{title:"Libras Vendidas",value:Bg(B)}),o.jsx(jQ,{title:"Unidades Vendidas",value:Bg(P)}),o.jsx(FSe,{title:"Productos ms vendidos",items:E.map(S=>({key:`${S.idx}`,label:`${S.idx}. ${S.name}`,value:`(${Bg(S.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[_.map(S=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:S.productName}),o.jsx("td",{className:"border p-1",children:S.firstDate&&S.lastDate?S.firstDate===S.lastDate?S.firstDate:`${S.firstDate}  ${S.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:Bg(S.units)}),o.jsx("td",{className:"border p-1",children:Nl(S.revenue)}),o.jsx("td",{className:"border p-1",children:Nl(S.cogs)}),o.jsx("td",{className:`border p-1 ${S.profit>=0?"text-green-700":"text-red-700"}`,children:Nl(S.profit)})]},S.productName)),_.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:_.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):_.map(S=>{const j=!!h[S.productName],D=S.firstDate&&S.lastDate?S.firstDate===S.lastDate?S.firstDate:`${S.firstDate}  ${S.lastDate}`:"";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>I(S.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:S.productName}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",o.jsx("b",{children:Bg(S.units)}),"  Utilidad:"," ",o.jsx("b",{className:S.profit>=0?"text-green-700":"text-red-700",children:Nl(S.profit)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:j?"":""})]}),j&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(zd,{label:"Fechas",value:D}),o.jsx(zd,{label:"Total",value:Bg(S.units)}),o.jsx(zd,{label:"Ingreso",value:Nl(S.revenue)}),o.jsx(zd,{label:"Costo",value:Nl(S.cogs)}),o.jsx(zd,{label:"Utilidad",value:Nl(S.profit),valueClass:S.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},S.productName)})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[c.map(S=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:S.date}),o.jsx("td",{className:"border p-1",children:S.category}),o.jsx("td",{className:"border p-1",children:S.description}),o.jsx("td",{className:"border p-1",children:Nl(S.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${S.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:S.status})})]},S.id)),c.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),o.jsx("div",{className:"md:hidden space-y-2",children:c.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(S=>{const j=!!m[S.id],D=S.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>O(S.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:S.category}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${D}`,children:S.status})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[S.date,"  ",o.jsx("b",{children:Nl(S.amount)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:j?"":""})]}),j&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsx(zd,{label:"Fecha",value:S.date}),o.jsx(zd,{label:"Categora",value:S.category}),o.jsx(zd,{label:"Descripcin",value:S.description||""}),o.jsx(zd,{label:"Monto",value:Nl(S.amount)}),o.jsx(zd,{label:"Estado",value:S.status||""})]})})]},S.id)})})]})]})}function F1({title:t,value:e,positive:r}){return o.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function jQ({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function FSe({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function zd({label:t,value:e,valueClass:r}){return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:t}),o.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const _B=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],O1=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function OSe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState(wr(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,B]=v.useState(!0),[P,_]=v.useState(""),[E,I]=v.useState(null),[O,S]=v.useState(""),[j,D]=v.useState(""),[J,ge]=v.useState(""),[se,he]=v.useState(0),[me,Z]=v.useState("PENDIENTE"),[ve,Se]=v.useState("");v.useEffect(()=>{(async()=>{B(!0),_("");try{const K=Wt(At(je,"expenses"),ln("date","desc")),M=await Dt(K),pe=[];M.forEach(X=>{const G=X.data();pe.push({id:X.id,date:G.date||wr(new Date,"yyyy-MM-dd"),category:G.category||"",description:G.description||"",amount:Number(G.amount||0),status:G.status||"PENDIENTE",notes:G.notes||"",createdAt:G.createdAt??tr.now()})}),b(pe)}catch(K){console.error(K),_(" Error al cargar gastos")}finally{B(!1)}})()},[t]);const k=v.useMemo(()=>y.filter(K=>!(r&&K.date<r||a&&K.date>a)),[y,r,a]),F=v.useMemo(()=>{const K=k.reduce((X,G)=>X+(G.amount||0),0),M=k.filter(X=>X.status==="PAGADO").reduce((X,G)=>X+(G.amount||0),0),pe=K-M;return{total:K,pagado:M,pendiente:pe}},[k]),H=()=>{l(wr(new Date,"yyyy-MM-dd")),u(""),f(""),A(0),p("PENDIENTE"),x("")},Q=async K=>{if(K.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!h||h<=0)return _("Ingresa un monto vlido.");try{const M={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:tr.now()},pe=await Nn(At(je,"expenses"),M);b(X=>[{id:pe.id,...M},...X]),H(),_(" Gasto registrado")}catch(M){console.error(M),_(" Error al guardar gasto")}},V=K=>{_(""),I(K.id),S(K.date),D(K.category||""),ge(K.description||""),he(Number(K.amount||0)),Z(K.status||"PENDIENTE"),Se(K.notes||"")},Y=()=>{I(null),S(""),D(""),ge(""),he(0),Z("PENDIENTE"),Se("")},R=async()=>{if(E){if(!j)return _("Selecciona una categora.");if(!J.trim())return _("Ingresa una descripcin.");if(!se||se<=0)return _("Ingresa un monto vlido.");try{const K={date:O,category:j,description:J.trim(),amount:Number(Number(se||0).toFixed(2)),status:me,notes:ve||""};await Jr($t(je,"expenses",E),K),b(M=>M.map(pe=>pe.id===E?{...pe,...K}:pe)),Y(),_(" Gasto actualizado")}catch(K){console.error(K),_(" Error al actualizar gasto")}}},z=async K=>{if(confirm(`Eliminar el gasto "${K.description}"?`))try{await Qn($t(je,"expenses",K.id)),b(pe=>pe.filter(X=>X.id!==K.id)),_(" Gasto borrado")}catch(pe){console.error(pe),_(" Error al borrar gasto")}},le=K=>K==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),o.jsx(Xc,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:K=>n(K.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:K=>s(K.target.value)})]})]}),o.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",O1(F.total)]}),o.jsxs("div",{children:["Pagado: ",O1(F.pagado)]}),o.jsxs("div",{children:["Pendiente: ",O1(F.pendiente)]})]})]}),o.jsxs("form",{onSubmit:Q,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:K=>l(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:K=>u(K.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:K=>f(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:K=>{const M=String(K.target.value||"").replace(",","."),pe=parseFloat(M);A(Number.isFinite(pe)?Math.max(0,pe):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:K=>p(K.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:K=>x(K.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:H,children:"Limpiar"})]})]}),o.jsx("div",{className:"block md:hidden space-y-3",children:w?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):k.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):k.map(K=>{const M=E===K.id;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:K.description}),o.jsxs("div",{className:"text-xs text-gray-500",children:[K.category||"","  ",K.date]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-bold",children:O1(K.amount)}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${le(K.status)}`,children:K.status})]})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:K.notes?K.notes:""}),M?o.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:pe=>S(pe.target.value)}),o.jsxs("select",{className:"w-full border p-2 rounded",value:j,onChange:pe=>D(pe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(pe=>o.jsx("option",{value:pe,children:pe},pe))]}),o.jsx("input",{className:"w-full border p-2 rounded",value:J,onChange:pe=>ge(pe.target.value)}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(se)?"":se,onChange:pe=>{const X=String(pe.target.value||"").replace(",","."),G=parseFloat(X);he(Number.isFinite(G)?Math.max(0,G):0)}}),o.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:pe=>Z(pe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ve,onChange:pe=>Se(pe.target.value),maxLength:500}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Y,children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(K),children:"Editar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(K),children:"Borrar"})]})]},K.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):k.map(K=>{const M=E===K.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:O,onChange:pe=>S(pe.target.value)}):K.date}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:pe=>D(pe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(pe=>o.jsx("option",{value:pe,children:pe},pe))]}):K.category||""}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{className:"w-full border p-1 rounded",value:J,onChange:pe=>ge(pe.target.value)}):o.jsx("span",{title:K.description,children:K.description.length>45?K.description.slice(0,45)+"":K.description})}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(se)?"":se,onChange:pe=>{const X=String(pe.target.value||"").replace(",","."),G=parseFloat(X);he(Number.isFinite(G)?Math.max(0,G):0)}}):O1(K.amount)}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:pe=>Z(pe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${le(K.status)}`,children:K.status})}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ve,onChange:pe=>Se(pe.target.value),maxLength:500}):o.jsx("span",{title:K.notes||"",children:(K.notes||"").length>45?(K.notes||"").slice(0,45)+"":K.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:M?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Y,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(K),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(K),children:"Borrar"})]})})})]},K.id)})})]})}),P&&o.jsx("p",{className:"mt-2 text-sm",children:P})]})}function HE(t){return(t||"").trim().toLowerCase()}async function zee(){const t=await Dt(At(je,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=HE(n.name??n.productName);a&&e.set(a,r.id)}),e}async function DSe(t=!1){const e=await zee(),r=await Dt(At(je,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=HE(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(i);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await Jr($t(je,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function RSe(t,e=!1){const r=HE(t),a=(await zee()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Dt(At(je,"inventory_batches"));let i=0;for(const l of s.docs){const c=l.data();HE(c.productName)===r&&c.productId!==a&&(e||await Jr($t(je,"inventory_batches",l.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function MSe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await DSe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await RSe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),o.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Ka=t=>`C$ ${Number(t??0).toFixed(2)}`,um=t=>Number(t??0).toFixed(3);async function LSe(t){const e=new Set;for(const n of t)for(const a of n.batches||[]){const s=(a.batchId||a.id||"").trim();if(!s)continue;(a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)&&e.add(s)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const a=await Li($t(je,"inventory_batches",n));if(a.exists()){const s=a.data();r.set(n,Number(s.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(a=>{if((a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)){const s=(a.batchId||a.id||"").trim(),i=s?r.get(s):void 0;if(i!==void 0)return{...a,purchasePrice:i}}return a})}))}function EB(t){var p,g;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],a=Number(((p=t.totals)==null?void 0:p.lbs)??t.totalLbs??0),s=Number(((g=t.totals)==null?void 0:g.units)??t.totalUnits??0);let i=0,l=0;for(const x of e){const y=Number(x.quantity??0);let b=x.expectedTotal!==void 0&&x.expectedTotal!==null?Number(x.expectedTotal):y*Number(x.salePrice??0);isFinite(b)||(b=0);let w=y*Number(x.purchasePrice??Number.NaN);isFinite(w)||(w=x.invoiceTotal!==void 0&&x.invoiceTotal!==null?Number(x.invoiceTotal):0),i+=b,l+=w}const c=r.reduce((x,y)=>x+Number(y.amount||0),0),u=n.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=n.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,A=i-l,m=i-c-f+h;return{lbs:a,units:s,expectedSum:i,invoicedSum:l,expenses:c,debits:f,credits:h,grossProfit:A,finalAmount:m}}function USe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null);v.useEffect(()=>{(async()=>{n(!0);const d=Wt(At(je,"invoices"),ln("date","desc")),f=await Dt(d),h=[];f.forEach(m=>{const p=m.data();h.push({id:m.id,...p,batches:p.batches||[],expenses:p.expenses||[],adjustments:p.adjustments||[],totals:p.totals||{lbs:p.totalLbs||0,units:p.totalUnits||0,amount:p.totalAmount||0,expenses:p.totalExpenses||0,finalAmount:p.finalAmount||0,invoiceTotal:p.invoiceTotal||0},totalDebits:p.totalDebits||0,totalCredits:p.totalCredits||0})});const A=await LSe(h);e(A),n(!1)})()},[]);const l=async d=>{const f=d.status==="PAGADA"?"PENDIENTE":"PAGADA";await Jr($t(je,"invoices",d.id),{status:f}),e(h=>h.map(A=>A.id===d.id?{...A,status:f}:A)),(a==null?void 0:a.id)===d.id&&s({...d,status:f})},c=async d=>{if(window.confirm(`Eliminar factura del ${d.date}?`))try{const f=$t(je,"invoices",d.id),h=await Li(f),A=h.exists()?h.data():null,m=G0(je),p=(A==null?void 0:A.batches)||[];for(const g of p){const x=g.batchId||g.id;if(!x)continue;const y=$t(je,"inventory_batches",x);m.update(y,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}m.delete(f),await m.commit(),e(g=>g.filter(x=>x.id!==d.id)),(a==null?void 0:a.id)===d.id&&s(null)}catch(f){console.error(f),alert("No se pudo eliminar la factura por completo.")}},u=async()=>{if(!i.current||!a)return;const d=i.current,f=await q0(d,{backgroundColor:"#ffffff",onclone:g=>{const x=g.body;x.style.background="#ffffff",x.querySelectorAll("*").forEach(y=>{const b=g.defaultView.getComputedStyle(y);b.boxShadow&&b.boxShadow!=="none"&&(y.style.boxShadow="none")})},scale:2}),h=f.toDataURL("image/png"),A=new Br("p","mm","a4"),m=A.internal.pageSize.getWidth(),p=f.height*m/f.width;A.addImage(h,"PNG",0,0,m,p),A.save(`factura_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:o.jsxs("table",{className:"min-w-full w-full- text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"N factura"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Unidades"}),o.jsx("th",{className:"p-2 border",children:"Facturado"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),o.jsx("th",{className:"p-2 border",children:"Gastos"}),o.jsx("th",{className:"p-2 border",children:"Dbitos"}),o.jsx("th",{className:"p-2 border",children:"Crditos"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(d=>{const f=EB(d);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.date}),o.jsx("td",{className:"p-2 border",children:d.number||""}),o.jsx("td",{className:"p-2 border",children:d.description||""}),o.jsx("td",{className:"p-2 border",children:um(f.lbs)}),o.jsx("td",{className:"p-2 border",children:um(f.units)}),o.jsx("td",{className:"p-2 border",children:Ka(f.invoicedSum)}),o.jsx("td",{className:"p-2 border",children:Ka(f.expectedSum)}),o.jsx("td",{className:"p-2 border",children:Ka(f.expenses)}),o.jsx("td",{className:"p-2 border",children:Ka(f.debits)}),o.jsx("td",{className:"p-2 border",children:Ka(f.credits)}),o.jsx("td",{className:"p-2 border",children:Ka(f.finalAmount)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:d.status})}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(d),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>l(d),children:d.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>c(d),children:"Eliminar"})]})})]},d.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:u,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const d=EB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras:"})," ",um(d.lbs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",um(d.units)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Ka(d.invoicedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Ka(d.expectedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Ka(d.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Ka(d.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Ka(d.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Ka(d.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),o.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),o.jsx("tbody",{children:(a.batches||[]).map((d,f)=>{const h=Number(d.quantity??0),A=d.expectedTotal!==void 0&&d.expectedTotal!==null?Number(d.expectedTotal):h*Number(d.salePrice??0);let m=h*Number(d.purchasePrice??Number.NaN);isFinite(m)||(m=d.invoiceTotal!==void 0&&d.invoiceTotal!==null?Number(d.invoiceTotal):0);const p=A-m;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.productName||"(sin nombre)"}),o.jsx("td",{className:"p-2 border",children:(d.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:um(d.quantity)}),o.jsx("td",{className:"p-2 border",children:Ka(d.salePrice)}),o.jsx("td",{className:"p-2 border",children:Ka(m)}),o.jsx("td",{className:"p-2 border",children:Ka(A)}),o.jsx("td",{className:"p-2 border",children:Ka(p)})]},f)})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((d,f)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.date}),o.jsx("td",{className:"p-2 border",children:d.description}),o.jsx("td",{className:"p-2 border",children:Ka(d.amount)})]},f)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((d,f)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.description}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.type})}),o.jsx("td",{className:"p-2 border",children:Ka(d.amount)}),o.jsx("td",{className:"p-2 border",children:a.date})]},f)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const d=EB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:um(d.lbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:um(d.units)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Ka(d.invoicedSum)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Ka(d.expectedSum)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Ka(d.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Ka(d.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Ka(d.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Ka(d.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Ka(d.finalAmount)})]})})]})})()]})]})}const Sc=t=>`C$${Number(t||0).toFixed(2)}`,Pg=t=>Number(t||0).toFixed(3),QSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),SB=()=>{const t=new Date;return wr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},tC=()=>wr(new Date,"yyyy-MM-dd");function VSe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(SB()),[i,l]=v.useState(tC()),[c,u]=v.useState(""),d=v.useMemo(()=>{const fe=new Map;return n.forEach(oe=>fe.set(oe.productId,{id:oe.productId,name:oe.productName})),Array.from(fe.values()).sort((oe,Be)=>oe.name.localeCompare(Be.name))},[n]),f=v.useMemo(()=>n.filter(fe=>!(a&&fe.date<a||i&&fe.date>i||c&&fe.productId!==c)),[n,a,i,c]),[h,A]=v.useState(tC()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(fe=>{const oe=fe.filter(Be=>f.some(Me=>Me.id===Be));return oe.length===0&&f.length>0?f.map(Be=>Be.id):oe})},[f]);const[w,B]=v.useState([]),[P,_]=v.useState([]),[E,I]=v.useState(!1),[O,S]=v.useState(SB()),[j,D]=v.useState(tC());v.useEffect(()=>{(async()=>{try{I(!0);const fe=Wt(At(je,"expenses"),ln("date","desc")),oe=await Dt(fe),Be=[];oe.forEach(Me=>{const Ze=Me.data();Be.push({id:Me.id,date:Ze.date,description:Ze.description,amount:Number(Ze.amount||0)})}),B(Be)}catch(fe){console.error(fe)}finally{I(!1)}})()},[]);const J=v.useMemo(()=>w.filter(fe=>!(!fe.date||O&&fe.date<O||j&&fe.date>j)),[w,O,j]),[ge,se]=v.useState([]),[he,me]=v.useState(!1),[Z,ve]=v.useState(""),[Se,k]=v.useState("DEBITO"),[F,H]=v.useState(""),Q=()=>{const fe=Number(F);!Z.trim()||!isFinite(fe)||fe<=0||(se(oe=>[...oe,{id:`${Date.now()}_${oe.length+1}`,description:Z.trim(),type:Se,amount:Number(fe.toFixed(2))}]),ve(""),H(""))},[V,Y]=v.useState(null),[R,z]=v.useState(""),[le,K]=v.useState("DEBITO"),[M,pe]=v.useState(""),X=fe=>{Y(fe.id),z(fe.description),K(fe.type),pe(fe.amount.toFixed(2))},G=()=>{Y(null),z(""),K("DEBITO"),pe("")},ie=()=>{if(!V)return;const fe=Number(M);!isFinite(fe)||fe<=0||(se(oe=>oe.map(Be=>Be.id===V?{...Be,description:R.trim(),type:le,amount:Number(fe.toFixed(2))}:Be)),G())},Ie=fe=>{se(oe=>oe.filter(Be=>Be.id!==fe)),V===fe&&G()},Re=(fe,oe)=>{b(Be=>oe?[...new Set([...Be,fe])]:Be.filter(Me=>Me!==fe))},ze=fe=>{b(fe?f.map(oe=>oe.id):[])},st=(fe,oe)=>{_(Be=>oe?[...new Set([...Be,fe])]:Be.filter(Me=>Me!==fe))},lt=v.useMemo(()=>f.filter(fe=>y.includes(fe.id)),[f,y]),_t=v.useMemo(()=>ge.filter(fe=>fe.type==="DEBITO").reduce((fe,oe)=>fe+oe.amount,0),[ge]),bt=v.useMemo(()=>ge.filter(fe=>fe.type==="CREDITO").reduce((fe,oe)=>fe+oe.amount,0),[ge]),St=v.useMemo(()=>{let fe=0,oe=0,Be=0,Me=0;for(const nt of lt){QSe(nt.unit)?fe+=Number(nt.quantity||0):oe+=Number(nt.quantity||0);const ke=nt.expectedTotal??Number((Number(nt.quantity||0)*Number(nt.salePrice||0)).toFixed(2)),ae=nt.invoiceTotal!==void 0&&nt.invoiceTotal!==null?Number(nt.invoiceTotal):Number((Number(nt.quantity||0)*Number(nt.purchasePrice||0)).toFixed(2));Be+=Number(ke||0),Me+=Number(ae||0)}const Ze=J.filter(nt=>P.includes(nt.id)).reduce((nt,ke)=>nt+Number(ke.amount||0),0),Je=Be-Ze-_t+bt;return{totalLbs:fe,totalUnits:oe,totalExpected:Number(Be.toFixed(2)),totalInvoiced:Number(Me.toFixed(2)),totalGastos:Number(Ze.toFixed(2)),debits:Number(_t.toFixed(2)),credits:Number(bt.toFixed(2)),finalAmount:Number(Je.toFixed(2)),grossProfit:Number((Be-Me).toFixed(2))}},[lt,J,P,_t,bt]),[kt,et]=v.useState(!1),[ce,Qe]=v.useState(""),xe=async()=>{if(Qe(""),lt.length===0){Qe("Selecciona al menos 1 lote pagado.");return}try{et(!0);const fe={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:tr.now(),totalLbs:Number(Pg(St.totalLbs)),totalUnits:Number(Pg(St.totalUnits)),totalAmount:St.totalExpected,invoiceTotal:St.totalInvoiced,totalExpenses:St.totalGastos,totalDebits:St.debits,totalCredits:St.credits,finalAmount:St.finalAmount,batches:lt.map(oe=>{var Be;return{id:oe.id,productId:oe.productId,productName:oe.productName,unit:oe.unit,quantity:Number(Pg(oe.quantity)),salePrice:Number(Number(oe.salePrice||0).toFixed(2)),purchasePrice:Number(Number(oe.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(oe.quantity||0)*Number(oe.salePrice||0)).toFixed(2)),invoiceTotal:oe.invoiceTotal!==void 0&&oe.invoiceTotal!==null?Number(oe.invoiceTotal):Number((Number(oe.quantity||0)*Number(oe.purchasePrice||0)).toFixed(2)),batchDate:oe.date,paidAt:(Be=oe.paidAt)!=null&&Be.toDate?wr(oe.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:J.filter(oe=>P.includes(oe.id)).map(oe=>({id:oe.id,date:oe.date||null,description:oe.description||"",amount:Number(Number(oe.amount||0).toFixed(2))})),adjustments:ge.map(oe=>({id:oe.id,description:oe.description,type:oe.type,amount:Number(oe.amount.toFixed(2))}))};await Nn(At(je,"invoices"),fe),Qe(" Factura creada."),r()}catch(fe){console.error(fe),Qe(` Error al crear factura: ${(fe==null?void 0:fe.message)||"desconocido"}`)}finally{et(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:fe=>A(fe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:fe=>p(fe.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:fe=>x(fe.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:fe=>s(fe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:fe=>l(fe.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:fe=>u(fe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),d.map(fe=>o.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(SB()),l(tC()),u("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:fe=>ze(fe.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:f.map(fe=>{var Je;const oe=y.includes(fe.id),Be=fe.expectedTotal??Number((Number(fe.quantity||0)*Number(fe.salePrice||0)).toFixed(2)),Me=fe.invoiceTotal!==void 0&&fe.invoiceTotal!==null?Number(fe.invoiceTotal):Number((Number(fe.quantity||0)*Number(fe.purchasePrice||0)).toFixed(2)),Ze=Be-Me;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:oe,onChange:nt=>Re(fe.id,nt.target.checked)})}),o.jsx("td",{className:"p-2 border",children:fe.date}),o.jsx("td",{className:"p-2 border",children:fe.productName}),o.jsx("td",{className:"p-2 border",children:(fe.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Pg(fe.quantity)}),o.jsx("td",{className:"p-2 border",children:Sc(fe.salePrice)}),o.jsx("td",{className:"p-2 border",children:Sc(Me)}),o.jsx("td",{className:"p-2 border",children:Sc(Be)}),o.jsx("td",{className:"p-2 border",children:Sc(Ze)}),o.jsx("td",{className:"p-2 border",children:(Je=fe.paidAt)!=null&&Je.toDate?wr(fe.paidAt.toDate(),"yyyy-MM-dd"):""})]},fe.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:O,onChange:fe=>S(fe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:j,onChange:fe=>D(fe.target.value)})]})]})]}),J.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:J.map(fe=>{const oe=P.includes(fe.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:oe,onChange:Be=>st(fe.id,Be.target.checked)})}),o.jsx("td",{className:"p-2 border",children:fe.date||""}),o.jsx("td",{className:"p-2 border",children:fe.description||""}),o.jsx("td",{className:"p-2 border",children:Sc(Number(fe.amount||0))})]},fe.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>me(!0),children:"Crear Cargo"})]}),ge.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ge.map(fe=>{const oe=V===fe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:R,onChange:Be=>z(Be.target.value)}):o.jsx("span",{title:fe.description,children:fe.description.length>60?`${fe.description.slice(0,60)}`:fe.description})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:le,onChange:Be=>K(Be.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${fe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:fe.type})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:M,onChange:Be=>pe(Be.target.value)}):Sc(fe.amount)}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:ie,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:G,children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ie(fe.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>X(fe),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ie(fe.id),children:"Eliminar"})]})})]},fe.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Pg(St.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Pg(St.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Sc(St.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Sc(St.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Sc(St.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Sc(St.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Sc(St.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Sc(St.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:Sc(St.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:kt,onClick:xe,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:kt?"Creando":"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),ce&&o.jsx("span",{className:"text-sm ml-2",children:ce})]}),kt&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),he&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>me(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:Z,onChange:fe=>ve(fe.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Se,onChange:fe=>k(fe.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:fe=>H(fe.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Q,children:"Agregar"})})]})]})})]})}const Qf=t=>`C$ ${Number(t||0).toFixed(2)}`,wh=t=>Number(t||0).toFixed(3),HSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function $Se(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(wr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=v.useState(wr(new Date,"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=Ac();v.useEffect(()=>{(async()=>{n(!0);const _=Wt(At(je,"inventory_batches"),sr("status","==","PAGADO"),ln("date","desc")),E=await Dt(_),I=[];E.forEach(O=>{const S=O.data(),j=Number(S.quantity||0),D=Number(S.remaining||0),J=Number(S.purchasePrice||0),ge=Number(S.salePrice||0),se=Number((j*J).toFixed(2)),he=Number((j*ge).toFixed(2));I.push({id:O.id,productId:S.productId,productName:S.productName,category:S.category,unit:S.unit,quantity:j,remaining:D,purchasePrice:J,salePrice:ge,invoiceTotal:S.invoiceTotal!=null?Number(S.invoiceTotal):se,expectedTotal:S.expectedTotal!=null?Number(S.expectedTotal):he,date:S.date,status:S.status,paidAt:S.paidAt})}),e(I),n(!1)})()},[g]);const y=v.useMemo(()=>t.filter(_=>!(c&&_.date<c||d&&_.date>d||h&&_.productId!==h)),[t,c,d,h]),b=v.useMemo(()=>{let _=0,E=0,I=0,O=0,S=0,j=0;for(const D of y)HSe(D.unit)?(_+=D.quantity,E+=D.remaining):(I+=D.quantity,O+=D.remaining),S+=Number(D.expectedTotal||0),j+=Number(D.invoiceTotal||0);return{lbsIng:_,lbsRem:E,udsIng:I,udsRem:O,totalEsperado:S,totalFact:j,gross:S-j}},[y]),w=_=>{l(_),s(!0)},B=async()=>{if(i)try{const _=$t(je,"inventory_batches",i.id);await Jr(_,{status:"PENDIENTE",remaining:i.quantity});const E=At(je,"salesV2"),I=await Dt(Wt(E,sr("batchId","==",i.id))),O=await Dt(Wt(E,sr("productName","==",i.productName),sr("date","==",i.date))),S=[...I.docs,...O.docs];for(const j of S)await Qn($t(je,"salesV2",j.id));s(!1),l(null),x()}catch(_){console.error("Error al marcar pendiente:",_)}},P=v.useMemo(()=>{const _=new Map;return t.forEach(E=>_.set(E.productId,{id:E.productId,name:E.productName})),Array.from(_.values()).sort((E,I)=>E.name.localeCompare(I.name))},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(Xc,{onClick:x,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:_=>u(_.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:_=>f(_.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:_=>A(_.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),P.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"})]}),o.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",wh(b.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",wh(b.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Qf(b.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",wh(b.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",wh(b.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Qf(b.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Qf(b.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",y.length.toLocaleString()]})]})}),o.jsx("div",{className:"block md:hidden space-y-3",children:r?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):y.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):y.map(_=>{var E;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:_.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[(_.category||"").toUpperCase(),"  ",_.date," "," ",(_.unit||"").toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold",children:Qf(_.expectedTotal||0)}),o.jsx("div",{className:"text-[11px] text-gray-500",children:"Esperado"})]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),o.jsx("div",{className:"font-semibold",children:wh(_.quantity)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:wh(_.remaining)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:Qf(_.invoiceTotal||0)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),o.jsx("div",{className:"font-semibold",children:(E=_.paidAt)!=null&&E.toDate?wr(_.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(_),children:"Marcar PENDIENTE"})})]},_.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):y.map(_=>{var E;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:_.date}),o.jsx("td",{className:"p-2 border",children:(_.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:_.productName}),o.jsx("td",{className:"p-2 border",children:(_.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:wh(_.quantity)}),o.jsx("td",{className:"p-2 border",children:wh(_.remaining)}),o.jsx("td",{className:"p-2 border",children:Qf(_.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Qf(_.salePrice)}),o.jsx("td",{className:"p-2 border",children:Qf(_.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:Qf(_.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(E=_.paidAt)!=null&&E.toDate?wr(_.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(_),children:"Marcar PENDIENTE"})})]},_.id)})})]})}),m&&o.jsx(VSe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const zi=t=>`C$ ${(Number(t)||0).toFixed(2)}`,KSe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function rC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function GSe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function qSe(t){const e="ROP",r=rC(t.subcat).slice(0,3)||"GEN",n=GSe(t.gender),a=rC(t.color).slice(0,3)||"COL",s=rC(t.size)||"TLL",i=rC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${l}`}const D1=/^[A-Za-z0-9._-]{0,32}$/;function zSe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(wr(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,B]=v.useState(0),[P,_]=v.useState(0),[E,I]=v.useState(0),[O,S]=v.useState(0),[j,D]=v.useState(""),[J,ge]=v.useState(""),[se,he]=v.useState(""),[me,Z]=v.useState(""),[ve,Se]=v.useState(""),[k,F]=v.useState(""),[H,Q]=v.useState(""),[V,Y]=v.useState(!1),[R,z]=v.useState(""),[le,K]=v.useState("Camisa"),[M,pe]=v.useState(null),[X,G]=v.useState(""),[ie,Ie]=v.useState(0),[Re,ze]=v.useState(0),[st,lt]=v.useState(0),[_t,bt]=v.useState(0),[St,kt]=v.useState(0),[et,ce]=v.useState(""),[Qe,xe]=v.useState(""),[fe,oe]=v.useState(""),[Be,Me]=v.useState(""),[Ze,Je]=v.useState(""),[nt,ke]=v.useState(""),[ae,De]=v.useState(""),[We,pt]=v.useState(null),[ct,Xe]=v.useState({x:0,y:0}),[Rt,er]=v.useState(!1);v.useEffect(()=>{const ne=()=>pt(null),Ae=ue=>ue.key==="Escape"&&pt(null);return document.addEventListener("click",ne),document.addEventListener("keydown",Ae),()=>{document.removeEventListener("click",ne),document.removeEventListener("keydown",Ae)}},[]);const L=(ne,Ae,ue=192,Ne=160)=>{let tt=ne;ne+ue+8>window.innerWidth&&(tt=ne-ue),tt=Math.max(8,Math.min(tt,window.innerWidth-ue-8));let ot=Ae;return Ae+Ne+8>window.innerHeight&&(ot=window.innerHeight-Ne-8),ot=Math.max(8,Math.min(ot,window.innerHeight-Ne-8)),{x:tt,y:ot}},we=(ne,Ae)=>{ne.stopPropagation();const ue=ne.currentTarget.getBoundingClientRect(),Ne=ue.right,Te=ue.bottom,tt=L(Ne,Te);Xe(tt),pt(ot=>ot===Ae?null:Ae)};v.useEffect(()=>{const ne=()=>pt(null),Ae=ue=>{ue.key==="Escape"&&pt(null)};return document.addEventListener("click",ne),document.addEventListener("keydown",Ae),()=>{document.removeEventListener("click",ne),document.removeEventListener("keydown",Ae)}},[]),v.useEffect(()=>{if(!We)return;const ne=()=>pt(null);return window.addEventListener("scroll",ne,!0),window.addEventListener("resize",ne),()=>{window.removeEventListener("scroll",ne,!0),window.removeEventListener("resize",ne)}},[We]),v.useEffect(()=>{(async()=>{const ne=await Dt(At(je,"products_clothes")),Ae=[];ne.forEach(tt=>{const ot=tt.data();Ae.push({id:tt.id,name:ot.name??"(sin nombre)",category:ot.category??"(sin categora)",measurement:ot.measurement??"unidad",price:Number(ot.price??0),sku:ot.sku||"",size:ot.size||"",color:ot.color||"",gender:ot.gender||"",brand:ot.brand||""})}),e(Ae);const ue=Wt(At(je,"inventory_clothes_batches"),ln("date","desc")),Ne=await Dt(ue),Te=[];Ne.forEach(tt=>{const ot=tt.data();Te.push({id:tt.id,productId:ot.productId,productName:ot.productName,category:ot.category,unit:ot.unit,quantity:Number(ot.quantity||0),remaining:Number(ot.remaining??ot.quantity??0),purchasePrice:Number(ot.purchasePrice||0),salePrice:Number(ot.salePrice||0),invoiceTotal:Number(ot.invoiceTotal??Number(ot.quantity||0)*Number(ot.purchasePrice||0)),expectedTotal:Number(ot.expectedTotal??Number(ot.quantity||0)*Number(ot.salePrice||0)),date:ot.date,createdAt:ot.createdAt,status:ot.status,notes:ot.notes||"",sku:ot.sku||"",size:ot.size||"",color:ot.color||"",gender:ot.gender||"",brand:ot.brand||"",clientCode:ot.clientCode||""})}),n(Te),s(!1)})()},[]),v.useEffect(()=>{const ne=t.find(Ae=>Ae.id===m);ne&&(_(Number(ne.price||0)),ne.sku&&ge(ne.sku),ne.size&&he(Ae=>Ae||ne.size),ne.color&&Z(Ae=>Ae||ne.color),ne.gender&&Se(Ae=>Ae||ne.gender),ne.brand&&F(Ae=>Ae||ne.brand))},[m,t]),v.useEffect(()=>{I(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{S(Math.floor(y*P*100)/100)},[y,P]),v.useEffect(()=>{const ne=t.find(Ne=>Ne.id===m);if(ne!=null&&ne.sku){ge(ne.sku);return}const Ae=V&&le?le:(ne==null?void 0:ne.category)||"";if(!Ae&&!ve&&!me&&!se&&!k){ge("");return}const ue=qSe({subcat:Ae,gender:ve||"",color:me||"",size:se||"",brand:k||""});ge(ue)},[V,le,m,ve,me,se,k,t]);const Ue=v.useMemo(()=>r.filter(ne=>!(c&&ne.date<c||d&&ne.date>d||h&&ne.productId!==h)),[r,c,d,h]),te=v.useMemo(()=>{const ne=Ue.reduce((Te,tt)=>Te+(tt.invoiceTotal||0),0),Ae=Ue.reduce((Te,tt)=>Te+(tt.expectedTotal||0),0),ue=Ue.reduce((Te,tt)=>Te+tt.quantity,0),Ne=Ue.reduce((Te,tt)=>Te+tt.remaining,0);return{udsIng:ue,udsRem:Ne,totalFacturado:ne,totalEsperado:Ae}},[Ue]),Ce=async ne=>{ne.preventDefault(),l("");const Ae=!!m&&!V,ue=t.find(ot=>ot.id===m),Ne=Ae?(ue==null?void 0:ue.name)||"":R||"",Te=Ae?(ue==null?void 0:ue.category)||"":le||"General",tt=Ae&&(ue==null?void 0:ue.measurement)||"unidad";if(!Ne||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(H&&!D1.test(H)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const ot=await Nn(At(je,"inventory_clothes_batches"),{productId:Ae?ue.id:"",productName:Ne,category:Te,unit:tt,quantity:y,remaining:y,purchasePrice:w,salePrice:P,invoiceTotal:E,expectedTotal:O,date:g,createdAt:tr.now(),status:"PENDIENTE",notes:j||"",sku:J||"",size:se||"",color:me||"",gender:ve||"",brand:k||"",clientCode:H||""});n(vt=>[{id:ot.id,productId:Ae?ue.id:"",productName:Ne,category:Te,unit:tt,quantity:y,remaining:y,purchasePrice:w,salePrice:P,invoiceTotal:E,expectedTotal:O,date:g,createdAt:tr.now(),status:"PENDIENTE",notes:j||"",sku:J||"",size:se||"",color:me||"",gender:ve||"",brand:k||"",clientCode:H||""},...vt]),l(" Lote de ropa creado"),p(""),x(wr(new Date,"yyyy-MM-dd")),b(0),B(0),_(0),I(0),S(0),D(""),ge(""),he(""),Z(""),Se(""),F(""),Q(""),Y(!1),z(""),K("Camisa")}catch(ot){console.error(ot),l(" Error al crear lote")}},$e=async ne=>{confirm(`Marcar PAGADO el lote del ${ne.date} (${ne.productName})?`)&&(await Jr($t(je,"inventory_clothes_batches",ne.id),{status:"PAGADO"}),n(ue=>ue.map(Ne=>Ne.id===ne.id?{...Ne,status:"PAGADO"}:Ne)))},He=ne=>{pe(ne.id),G(ne.date),Ie(ne.quantity),ze(ne.purchasePrice),lt(ne.salePrice),bt(Number((ne.quantity*ne.purchasePrice).toFixed(2))),kt(Number((ne.quantity*ne.salePrice).toFixed(2))),ce(ne.notes||""),xe(ne.sku||""),oe(ne.size||""),Me(ne.color||""),Je(ne.gender||""),ke(ne.brand||""),De(ne.clientCode||"")},Ye=()=>{pe(null),G(""),Ie(0),ze(0),lt(0),bt(0),kt(0),ce(""),xe(""),oe(""),Me(""),Je(""),ke(""),De("")};v.useEffect(()=>{M&&bt(Math.floor(ie*Re*100)/100)},[M,ie,Re]),v.useEffect(()=>{M&&kt(Math.floor(ie*st*100)/100)},[M,ie,st]);const mt=async()=>{if(!M)return;const ne=r.find(Te=>Te.id===M);if(!ne)return;const Ae=Math.max(0,ne.quantity-ne.remaining),ue=Math.max(0,ie-Ae);if(ae&&!D1.test(ae)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Ne=$t(je,"inventory_clothes_batches",M);await Jr(Ne,{date:X,quantity:ie,purchasePrice:Re,salePrice:st,invoiceTotal:_t,expectedTotal:St,notes:et,remaining:ue,sku:Qe,size:fe,color:Be,gender:Ze||"",brand:nt||"",clientCode:ae||""}),n(Te=>Te.map(tt=>tt.id===M?{...tt,date:X,quantity:ie,purchasePrice:Re,salePrice:st,invoiceTotal:_t,expectedTotal:St,notes:et,remaining:ue,sku:Qe,size:fe,color:Be,gender:Ze||"",brand:nt||"",clientCode:ae||""}:tt)),Ye(),l(" Lote actualizado")},rt=async ne=>{confirm(`Eliminar el lote del ${ne.date} (${ne.productName})?`)&&(await Qn($t(je,"inventory_clothes_batches",ne.id)),n(ue=>ue.filter(Ne=>Ne.id!==ne.id)),l(" Lote eliminado"))},re=()=>{const ne=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),Ae=tt=>(tt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ue=Ue.map(tt=>`
      <tr>
        <td>${tt.date}</td>
        <td>${(tt.category||"").toUpperCase()}</td>
        <td>${Ae(tt.productName)}</td>
        <td>${Ae(tt.sku||"")}</td>
        <td>${Ae(tt.size||"")}</td>
        <td>${Ae(tt.color||"")}</td>
        <td>${Ae(tt.clientCode||"")}</td>
        <td>${Ae(tt.gender||"")}</td>
        <td>${(tt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${tt.quantity.toFixed(0)}</td>
        <td style="text-align:right">${tt.remaining.toFixed(0)}</td>
        <td style="text-align:right">${zi(tt.purchasePrice)}</td>
        <td style="text-align:right">${zi(tt.salePrice)}</td>
        <td style="text-align:right">${zi(tt.invoiceTotal||0)}</td>
        <td style="text-align:right">${zi(tt.expectedTotal||0)}</td>
        <td>${Ae((tt.notes||"").slice(0,120))}</td>
        <td>${tt.status}</td>
      </tr>`).join(""),Ne=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${ne}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${te.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${te.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${zi(te.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${zi(te.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${zi(Number((te.totalEsperado-te.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${ue||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Te=window.open("","_blank");Te&&(Te.document.open(),Te.document.write(Ne),Te.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>er(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:ne=>u(ne.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:ne=>f(ne.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:ne=>A(ne.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(ne=>o.jsxs("option",{value:ne.id,children:[ne.name,"  ",ne.category]},ne.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:re,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",te.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",te.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",zi(te.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",zi(te.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",zi(Number((te.totalEsperado-te.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):Ue.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):Ue.map(ne=>{const Ae=M===ne.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:Ae?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:X,onChange:ue=>G(ue.target.value)}):ne.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(ne.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:ne.productName,children:ne.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:Ae?o.jsx("input",{className:"w-full border p-1 rounded",value:Qe,onChange:ue=>xe(ue.target.value)}):o.jsx("span",{className:"block truncate",title:ne.sku||"",children:ne.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:Ae?o.jsx("input",{className:"w-full border p-1 rounded",value:fe,onChange:ue=>oe(ue.target.value)}):ne.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:Ae?o.jsx("input",{className:"w-full border p-1 rounded",value:Be,onChange:ue=>Me(ue.target.value)}):ne.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:Ae?o.jsx("input",{className:"w-full border p-1 rounded",value:ae,onChange:ue=>{const Ne=ue.target.value;D1.test(Ne)&&De(Ne)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:ne.clientCode||"",children:ne.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:Ae?o.jsx("select",{className:"w-full border p-1 rounded",value:Ze,onChange:ue=>Je(ue.target.value),children:KSe.map(ue=>o.jsx("option",{value:ue,children:ue||""},ue))}):ne.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(ne.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:Ae?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(ie)?"":ie,onChange:ue=>Ie(Math.max(0,parseInt(ue.target.value||"0",10)))}):ne.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:Ae?ne.remaining:ne.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:Ae?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Re)?"":Re,onChange:ue=>ze(Math.max(0,parseFloat(ue.target.value||"0")))}):zi(ne.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:Ae?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(st)?"":st,onChange:ue=>lt(Math.max(0,parseFloat(ue.target.value||"0")))}):zi(ne.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:zi(Ae?_t:ne.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:zi(Ae?St:ne.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:Ae?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:et,onChange:ue=>ce(ue.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:ne.notes||"",children:ne.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${ne.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ne.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:Ae?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:mt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ye,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:ue=>we(ue,ne.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},ne.id)})})]})})}),We&&xd.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>pt(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:ct.x,top:ct.y},onClick:ne=>ne.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const ne=Ue.find(Ae=>Ae.id===We);return(ne==null?void 0:ne.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{pt(null),$e(ne)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const ne=Ue.find(Ae=>Ae.id===We);ne&&(pt(null),He(ne))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const ne=Ue.find(Ae=>Ae.id===We);ne&&(pt(null),rt(ne))},children:" Borrar"})]})})]}),document.body),Rt&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>er(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>er(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Ce,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ne=>p(ne.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(ne=>o.jsxs("option",{value:ne.id,children:[ne.name,"  ",ne.category,"  ",ne.sku?`SKU: ${ne.sku}`:""]},ne.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:ne=>x(ne.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:ne=>b(Math.max(0,parseInt(ne.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:ne=>B(Math.max(0,parseFloat(ne.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:P===0?"":P,onChange:ne=>_(Math.max(0,parseFloat(ne.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:J,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:se,readOnly:!0,onChange:ne=>he(ne.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0,onChange:ne=>Z(ne.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ve,readOnly:!0,onChange:ne=>Se(ne.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:ne=>F(ne.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:H,onChange:ne=>{const Ae=ne.target.value;D1.test(Ae)&&Q(Ae)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!D1.test(H)&&H.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:j,onChange:ne=>D(ne.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[j.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:zi(E),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:zi(O),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>er(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const WSe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],XSe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],YSe=["XS","S","M","L","XL","2XL"],JSe=["2","4","6","8","10","12","14"],ZSe=["26","28","30","32","34","36","38"],eIe=["Shein","Usado","Otro"],tIe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function nC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function rIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function nIe(t){const e="ROP",r=nC(t.subcat).slice(0,3)||"GEN",n=rIe(t.gender),a=nC(t.color).slice(0,3)||"COL",s=nC(t.size)||"TLL",i=nC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const aIe=/^[A-Za-z0-9._-]{0,32}$/;function sIe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,B]=v.useState("0"),[P,_]=v.useState(""),[E,I]=v.useState(""),O=v.useMemo(()=>{const Q=Number(w||0),V=Number(y||0);return Math.floor(Q*V*100)/100},[w,y]),[S,j]=v.useState([]),[D,J]=v.useState(!0),[ge,se]=v.useState(""),{refreshKey:he,refresh:me}=Ac(),[Z,ve]=v.useState(!1),Se=v.useMemo(()=>r.toLowerCase()==="jean"?ZSe:d==="NINO"||d==="NINA"?JSe:YSe,[r,d]);v.useEffect(()=>{p(nIe({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{J(!0);const Q=Wt(At(je,"products_clothes"),ln("createdAt","desc")),V=await Dt(Q),Y=[];V.forEach(R=>{const z=R.data();Y.push({id:R.id,name:z.name??"(sin nombre)",category:z.category??"",measurement:z.measurement??"unidad",sku:z.sku??"",size:z.size||"",color:z.color||"",brand:z.brand||"",gender:z.gender||"",clientCode:z.clientCode||"",notes:z.notes||"",createdAt:z.createdAt??tr.now()})}),j(Y),J(!1)})()},[he]);const k=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),A(""),x(""),b(""),B("0"),_(""),I("")},F=async Q=>{if(Q.preventDefault(),se(""),!t.trim()){se("Ingresa el nombre del producto.");return}if(h&&!aIe.test(h)){se("Cdigo del cliente invlido");return}const V=Number(w||0),Y=Number(y||0);if(V<0){se("La cantidad de piezas debe ser 0 o mayor.");return}if(Y<0){se("El precio de venta no puede ser negativo.");return}try{const R=await Nn(At(je,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:tr.now(),price:Y||0});if(j(z=>[{id:R.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:tr.now()},...z]),V>0){const z=new Date().toISOString().slice(0,10),le=P||z;await Nn(At(je,"inventory_clothes_batches"),{productId:R.id,productName:t.trim(),category:r,unit:"unidad",quantity:V,remaining:V,purchasePrice:0,salePrice:Y||0,invoiceTotal:0,expectedTotal:O||0,date:le,createdAt:tr.now(),status:"PENDIENTE",notes:E||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}se(V>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),k()}catch(R){console.error(R),se(" Error al crear producto")}},H=async Q=>{confirm(`Eliminar el producto "${Q.name}"?`)&&(await Qn($t(je,"products_clothes",Q.id)),j(Y=>Y.filter(R=>R.id!==Q.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:me,loading:D}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{ve(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:Q=>e(Q.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:Q=>n(Q.target.value),children:WSe.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:Q=>f(Q.target.value),children:tIe.map(Q=>o.jsx("option",{value:Q,children:Q||""},Q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:Q=>s(Q.target.value),children:[o.jsx("option",{value:"",children:""}),Se.map(Q=>o.jsx("option",{value:Q,children:Q},Q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:Q=>l(Q.target.value),children:[o.jsx("option",{value:"",children:""}),XSe.map(Q=>o.jsx("option",{value:Q,children:Q},Q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:Q=>u(Q.target.value),children:eIe.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:Q=>A(Q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:Q=>b(Q.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:Q=>B(Q.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:P,onChange:Q=>_(Q.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(O)?"":O.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>ve(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:D?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):S.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):S.map(Q=>{var V;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(V=Q.createdAt)!=null&&V.toDate?Q.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:Q.category}),o.jsx("td",{className:"p-2 border",children:Q.name}),o.jsx("td",{className:"p-2 border",children:Q.sku}),o.jsx("td",{className:"p-2 border",children:Q.size||""}),o.jsx("td",{className:"p-2 border",children:Q.color||""}),o.jsx("td",{className:"p-2 border",children:Q.brand||""}),o.jsx("td",{className:"p-2 border",children:Q.gender||""}),o.jsx("td",{className:"p-2 border",children:Q.clientCode||""}),o.jsx("td",{className:"p-2 border",children:Q.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>H(Q),children:"Borrar"})})]},Q.id)})})]})}),ge&&o.jsx("p",{className:"mt-2 text-sm",children:ge})]})}async function iIe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",e)),u=(await Dt(i)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,h)=>{var x,y;const A=String(f.data.date||""),m=String(h.data.date||"");if(A!==m)return A<m?-1:1;const p=((x=f.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>$t(je,"inventory_clothes_batches",f.id)),d=[];return await Di(je,async f=>{const h=await Promise.all(u.map(m=>f.get(m)));let A=s;for(let m=0;m<u.length&&A>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,A),B=Math.max(0,b-w);f.update(p,{remaining:B}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),A-=w}if(A>0)throw new Error(`Inventario insuficiente. Faltan ${A} unidades.`);if(a)for(const m of d)await Nn(At(je,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:tr.now()})}),{allocations:d}}async function LT(t){const e=$t(je,"sales_clothes",t),r=await Li(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Di(je,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Di(je,async c=>{const u=[];for(const f of a)for(const h of f.allocations||[])u.push({ref:$t(je,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const h=d[f];if(!h.exists())continue;const A=h.data(),m=Math.max(0,Math.floor(Number(A.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Di(je,async l=>{const c={};for(const A of a){if(!A.productId||A.qty<=0)continue;const m=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",A.productId)),g=(await Dt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[A.productId]=g}const u=[];for(const A of a){if(!A.productId||A.qty<=0)continue;if(Array.isArray(A.allocations)&&A.allocations.length>0){for(const g of A.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[A.productId]||[];let p=A.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,A.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const A of u)d[A.id]=(d[A.id]||0)+Math.max(0,Math.floor(Number(A.addBack||0)));const f=Object.keys(d).map(A=>$t(je,"inventory_clothes_batches",A)),h=await Promise.all(f.map(A=>l.get(A)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[f[A].id]||0)));l.update(f[A],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const TQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Vf=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function aC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function kQ(t){const e=Wt(At(je,"ar_movements"),sr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn($t(je,"ar_movements",n.id))))}function oIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async te=>{e(!0),n(!0),s(te),l([]);try{const $e=(await Dt(Wt(At(je,"sales_clothes"),sr("__name__","==",te)))).docs[0],He=$e==null?void 0:$e.data(),mt=(Array.isArray(He==null?void 0:He.items)?He.items:He!=null&&He.item?[He.item]:[]).map(rt=>({productName:String(rt.productName||""),qty:Number(rt.qty||0),unitPrice:Number(rt.unitPrice||0),discount:Number(rt.discount||0),total:Number(rt.total||0)}));l(mt)}catch(Ce){console.error(Ce)}finally{n(!1)}},[u,d]=v.useState(""),[f,h]=v.useState("+505 "),[A,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[B,P]=v.useState([]),[_,E]=v.useState(!0),[I,O]=v.useState(""),[S,j]=v.useState(null),[D,J]=v.useState(""),[ge,se]=v.useState("+505 "),[he,me]=v.useState(""),[Z,ve]=v.useState(""),[Se,k]=v.useState("ACTIVO"),[F,H]=v.useState(0),[Q,V]=v.useState(!1),[Y,R]=v.useState(null),[z,le]=v.useState(!1),[K,M]=v.useState([]),[pe,X]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[G,ie]=v.useState(!1),[Ie,Re]=v.useState(0),[ze,st]=v.useState(new Date().toISOString().slice(0,10)),[lt,_t]=v.useState(""),[bt,St]=v.useState(!1),[kt,et]=v.useState(null),[ce,Qe]=v.useState(""),[xe,fe]=v.useState(0),[oe,Be]=v.useState(""),[Me,Ze]=v.useState(!1);v.useEffect(()=>{(async()=>{const te=Wt(At(je,"customers_clothes"),ln("createdAt","desc")),Ce=await Dt(te),$e=[];Ce.forEach(He=>{const Ye=He.data();$e.push({id:He.id,name:Ye.name??"",phone:Ye.phone??"+505 ",place:Ye.place??"",notes:Ye.notes??"",status:Ye.status??"ACTIVO",creditLimit:Number(Ye.creditLimit??0),createdAt:Ye.createdAt??tr.now(),balance:0})});for(const He of $e)try{const Ye=Wt(At(je,"ar_movements"),sr("customerId","==",He.id)),mt=await Dt(Ye);let rt=0;mt.forEach(re=>rt+=Number(re.data().amount||0)),He.balance=rt}catch{He.balance=0}P($e),E(!1)})()},[]);const Je=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},nt=async te=>{if(te.preventDefault(),O(""),!u.trim()){O("Ingresa el nombre.");return}const Ce=aC(f);if(Ce.length<6){O("Telfono incompleto.");return}try{const $e=await Nn(At(je,"customers_clothes"),{name:u.trim(),phone:Ce,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:tr.now()});P(He=>[{id:$e.id,name:u.trim(),phone:Ce,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:tr.now(),balance:0},...He]),Je(),Ze(!1),O(" Cliente creado")}catch($e){console.error($e),O(" Error al crear cliente")}},ke=te=>{j(te.id),J(te.name),se(te.phone||"+505 "),me(te.place||""),ve(te.notes||""),k(te.status||"ACTIVO"),H(Number(te.creditLimit||0))},ae=()=>{j(null),J(""),se("+505 "),me(""),ve(""),k("ACTIVO"),H(0)},De=async()=>{if(!S)return;const te=aC(ge);if(!D.trim()){O("Ingresa el nombre.");return}try{await Jr($t(je,"customers_clothes",S),{name:D.trim(),phone:te,place:he||"",notes:Z||"",status:Se,creditLimit:Number(F||0)}),P(Ce=>Ce.map($e=>$e.id===S?{...$e,name:D.trim(),phone:te,place:he||"",notes:Z||"",status:Se,creditLimit:Number(F||0)}:$e)),ae(),O(" Cliente actualizado")}catch(Ce){console.error(Ce),O(" Error al actualizar")}},We=async te=>{if(confirm(`Eliminar al cliente "${te.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const $e=Wt(At(je,"sales_clothes"),sr("customerId","==",te.id)),He=await Dt($e);for(const rt of He.docs){const re=rt.id;try{await LT(re)}catch(ne){console.warn("restoreSaleAndDeleteClothes error",ne);try{await Qn($t(je,"sales_clothes",re))}catch{}}await kQ(re)}const Ye=Wt(At(je,"ar_movements"),sr("customerId","==",te.id)),mt=await Dt(Ye);await Promise.all(mt.docs.map(rt=>Qn($t(je,"ar_movements",rt.id)))),await Qn($t(je,"customers_clothes",te.id)),P(rt=>rt.filter(re=>re.id!==te.id)),O(" Cliente eliminado y prendas devueltas al inventario")}catch($e){console.error($e),O(" No se pudo eliminar el cliente.")}finally{E(!1)}},pt=async te=>{R(te),M([]),X({saldoActual:0,totalAbonado:0,totalCargos:0}),V(!0),ie(!1),Re(0),st(new Date().toISOString().slice(0,10)),_t(""),et(null),le(!0);try{const Ce=Wt(At(je,"ar_movements"),sr("customerId","==",te.id)),$e=await Dt(Ce),He=[];$e.forEach(Ye=>{var rt,re;const mt=Ye.data();He.push({id:Ye.id,date:mt.date??((re=(rt=mt.createdAt)==null?void 0:rt.toDate)!=null&&re.call(rt)?mt.createdAt.toDate().toISOString().slice(0,10):""),type:mt.type??"CARGO",amount:Number(mt.amount||0),ref:mt.ref||{},comment:mt.comment||"",createdAt:mt.createdAt})}),He.sort((Ye,mt)=>{var ne,Ae;if(Ye.date!==mt.date)return Ye.date.localeCompare(mt.date);const rt=((ne=Ye.createdAt)==null?void 0:ne.seconds)||0,re=((Ae=mt.createdAt)==null?void 0:Ae.seconds)||0;return rt-re}),M(He),ct(He)}catch(Ce){console.error(Ce),O(" No se pudo cargar el estado de cuenta")}finally{le(!1)}},ct=te=>{const Ce=te.reduce((Ye,mt)=>Ye+(Number(mt.amount)||0),0),$e=te.filter(Ye=>Number(Ye.amount)<0).reduce((Ye,mt)=>Ye+Math.abs(Number(mt.amount)||0),0),He=te.filter(Ye=>Number(Ye.amount)>0).reduce((Ye,mt)=>Ye+Number(mt.amount)||0,0);X({saldoActual:Ce,totalAbonado:$e,totalCargos:He})},Xe=async()=>{if(!Y)return;O("");const te=Number(Ie||0);if(!(te>0)){O("Ingresa un monto de abono mayor a 0.");return}const Ce=parseFloat(te.toFixed(2));if(!ze){O("Selecciona la fecha del abono.");return}try{St(!0);const $e={customerId:Y.id,type:"ABONO",amount:-Ce,date:ze,comment:lt||"",createdAt:tr.now()},Ye={id:(await Nn(At(je,"ar_movements"),$e)).id,date:ze,type:"ABONO",amount:-Ce,comment:lt||"",createdAt:tr.now()},mt=[...K,Ye].sort((rt,re)=>{var ue,Ne;if(rt.date!==re.date)return rt.date.localeCompare(re.date);const ne=((ue=rt.createdAt)==null?void 0:ue.seconds)||0,Ae=((Ne=re.createdAt)==null?void 0:Ne.seconds)||0;return ne-Ae});M(mt),ct(mt),P(rt=>rt.map(re=>re.id===Y.id?{...re,balance:(re.balance||0)-Ce}:re)),R(rt=>rt&&{...rt,balance:(rt.balance||0)-Ce}),Re(0),_t(""),st(new Date().toISOString().slice(0,10)),ie(!1),O(" Abono registrado")}catch($e){console.error($e),O(" Error al registrar el abono")}finally{St(!1)}},Rt=te=>{et(te.id),Qe(te.date||new Date().toISOString().slice(0,10)),fe(Math.abs(Number(te.amount||0))),Be(te.comment||"")},er=()=>{et(null),Qe(""),fe(0),Be("")},L=async()=>{if(!kt)return;const te=K.findIndex(Ye=>Ye.id===kt);if(te===-1)return;const Ce=K[te],$e=Number(xe||0);if(!($e>0)){O("El monto debe ser mayor a 0.");return}const He=Ce.type==="ABONO"?-parseFloat($e.toFixed(2)):+parseFloat($e.toFixed(2));try{await Jr($t(je,"ar_movements",kt),{date:ce,amount:He,comment:oe||""});const Ye=[...K];Ye[te]={...Ce,date:ce,amount:He,comment:oe||""},Ye.sort((rt,re)=>{var ue,Ne;if(rt.date!==re.date)return rt.date.localeCompare(re.date);const ne=((ue=rt.createdAt)==null?void 0:ue.seconds)||0,Ae=((Ne=re.createdAt)==null?void 0:Ne.seconds)||0;return ne-Ae}),M(Ye),ct(Ye);const mt=Ye.reduce((rt,re)=>rt+(Number(re.amount)||0),0);P(rt=>rt.map(re=>re.id===(Y==null?void 0:Y.id)?{...re,balance:mt}:re)),R(rt=>rt&&{...rt,balance:mt}),er(),O(" Movimiento actualizado")}catch(Ye){console.error(Ye),O(" Error al actualizar movimiento")}},we=async te=>{var $e,He;if(confirm(`Eliminar este movimiento (${te.type==="ABONO"?"Abono":"Compra"}) del ${te.date}?${te.type==="CARGO"&&(($e=te.ref)!=null&&$e.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),te.type==="CARGO"&&((He=te.ref)!=null&&He.saleId)){try{await LT(te.ref.saleId)}catch(rt){console.warn("restoreSaleAndDeleteClothes error",rt),E(!1),O(" No se pudo devolver inventario de la venta.");return}await kQ(te.ref.saleId)}else await Qn($t(je,"ar_movements",te.id));const Ye=K.filter(rt=>{var re,ne;return te.type==="CARGO"&&((re=te.ref)!=null&&re.saleId)?((ne=rt.ref)==null?void 0:ne.saleId)!==te.ref.saleId:rt.id!==te.id});M(Ye),ct(Ye);const mt=Ye.reduce((rt,re)=>rt+(Number(re.amount)||0),0);P(rt=>rt.map(re=>re.id===(Y==null?void 0:Y.id)?{...re,balance:mt}:re)),R(rt=>rt&&{...rt,balance:mt}),O(" Movimiento eliminado")}catch(Ye){console.error(Ye),O(" Error al eliminar movimiento")}finally{E(!1)}},Ue=v.useMemo(()=>[...B].sort((te,Ce)=>{var $e,He;return te.status!==Ce.status?te.status==="BLOQUEADO"?1:-1:((($e=Ce.createdAt)==null?void 0:$e.seconds)||0)-(((He=te.createdAt)==null?void 0:He.seconds)||0)}),[B]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ze(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Ue.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):Ue.map(te=>{var $e;const Ce=S===te.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:($e=te.createdAt)!=null&&$e.toDate?te.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:He=>J(He.target.value)}):te.name}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("input",{className:"w-full border p-1 rounded",value:ge,onChange:He=>se(aC(He.target.value))}):te.phone}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsxs("select",{className:"w-full border p-1 rounded",value:he,onChange:He=>me(He.target.value),children:[o.jsx("option",{value:"",children:""}),TQ.map(He=>o.jsx("option",{value:He,children:He},He))]}):te.place||""}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsxs("select",{className:"w-full border p-1 rounded",value:Se,onChange:He=>k(He.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${te.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.status})}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:He=>H(Math.max(0,Number(He.target.value||0)))}):Vf(te.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:Vf(te.balance||0)}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Z,onChange:He=>ve(He.target.value),maxLength:500}):o.jsx("span",{title:te.notes||"",children:(te.notes||"").length>40?(te.notes||"").slice(0,40)+"":te.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Ce?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:De,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ae,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ke(te),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>We(te),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>pt(te),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},te.id)})})]})}),I&&o.jsx("p",{className:"mt-2 text-sm",children:I}),Me&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ze(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ze(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:nt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:te=>d(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:te=>h(aC(te.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:te=>m(te.target.value),children:[o.jsx("option",{value:"",children:""}),TQ.map(te=>o.jsx("option",{value:te,children:te},te))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:te=>y(te.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:te=>w(Math.max(0,Number(te.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:te=>g(te.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ze(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Q&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Y==null?void 0:Y.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Re(0),st(new Date().toISOString().slice(0,10)),_t(""),ie(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>V(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Vf(pe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:Vf(pe.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:Vf(pe.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:z?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):K.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):K.map(te=>{var $e,He;const Ce=kt===te.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ce,onChange:Ye=>Qe(Ye.target.value)}):te.date||""}),o.jsx("td",{className:"p-2 border",children:te.amount>=0?($e=te.ref)!=null&&$e.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(te.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(He=te.ref)!=null&&He.saleId?`Venta #${te.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsx("input",{className:"w-full border p-1 rounded",value:oe,onChange:Ye=>Be(Ye.target.value),placeholder:"Comentario"}):o.jsx("span",{title:te.comment||"",children:(te.comment||"").length>40?(te.comment||"").slice(0,40)+"":te.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:Ce?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(xe)?"":xe,onChange:Ye=>{const mt=Number(Ye.target.value||0),rt=Number.isFinite(mt)?Math.max(0,parseFloat(mt.toFixed(2))):0;fe(rt)},placeholder:"0.00",title:te.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Vf(te.amount)}),o.jsx("td",{className:"p-2 border",children:Ce?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:L,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:er,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Rt(te),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>we(te),children:"Borrar"})]})})]},te.id)})})]})})]})}),G&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Y==null?void 0:Y.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ze,onChange:te=>st(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Ie===0?"":Ie,onChange:te=>{const Ce=Number(te.target.value||0),$e=Number.isFinite(Ce)?Math.max(0,parseFloat(Ce.toFixed(2))):0;Re($e)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:lt,onChange:te=>_t(te.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[lt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ie(!1),disabled:bt,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Xe,disabled:bt,children:bt?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((te,Ce)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:te.productName}),o.jsx("td",{className:"p-2 border text-right",children:te.qty}),o.jsx("td",{className:"p-2 border text-right",children:Vf(te.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Vf(te.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Vf(te.total)})]},Ce))})]})})]})})]})}const jg=t=>`C$ ${(Number(t)||0).toFixed(2)}`,lIe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function cIe(t){if(!t)return 0;const e=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",t)),r=await Dt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const l=i.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function FQ(t){if(!t)return 0;const e=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",t)),r=await Dt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function OQ(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function uIe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState({}),[i,l]=v.useState("CONTADO"),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(new Date().toISOString().slice(0,10)),[m,p]=v.useState(""),[g,x]=v.useState([]),y=v.useMemo(()=>g.reduce((X,G)=>X+(G.qty||0),0),[g]),b=v.useMemo(()=>{const X=g.reduce((G,ie)=>{const Ie=Math.max(0,(Number(ie.unitPrice)||0)*(ie.qty||0)-(Number(ie.discount)||0));return G+Ie},0);return Math.floor(X*100)/100},[g]),[w,B]=v.useState(0),[P,_]=v.useState(""),[E,I]=v.useState(!1),[O,S]=v.useState(!1),[j,D]=v.useState(""),[J,ge]=v.useState("+505 "),[se,he]=v.useState(""),[me,Z]=v.useState(""),[ve,Se]=v.useState("ACTIVO"),[k,F]=v.useState(0),H=()=>{D(""),ge("+505 "),he(""),Z(""),Se("ACTIVO"),F(0)};v.useEffect(()=>{(async()=>{const X=Wt(At(je,"customers_clothes"),ln("createdAt","desc")),G=await Dt(X),ie=[];G.forEach(bt=>{const St=bt.data();ie.push({id:bt.id,name:St.name??"",phone:St.phone??"+505 ",place:St.place??"",status:St.status??"ACTIVO",creditLimit:Number(St.creditLimit??0),balance:0})});for(const bt of ie)try{const St=Wt(At(je,"ar_movements"),sr("customerId","==",bt.id)),kt=await Dt(St);let et=0;kt.forEach(ce=>et+=Number(ce.data().amount||0)),bt.balance=et}catch{bt.balance=0}e(ie);const Ie=Wt(At(je,"products_clothes"),ln("createdAt","desc")),Re=await Dt(Ie),ze=[];Re.forEach(bt=>{const St=bt.data();ze.push({id:bt.id,name:St.name??"(sin nombre)",sku:St.sku??""})}),n(ze);const st=Wt(At(je,"inventory_clothes_batches"),sr("remaining",">",0)),lt=await Dt(st),_t={};lt.forEach(bt=>{const St=bt.data(),kt=St.productId||"",et=Number(St.remaining||0);kt&&(_t[kt]=(_t[kt]||0)+et)}),s(_t)})()},[]);const Q=v.useMemo(()=>t.find(X=>X.id===c),[t,c]),V=(Q==null?void 0:Q.balance)||0,Y=i==="CREDITO"?V+Math.max(0,Number(b||0))-Math.max(0,Number(w||0)):0,R=async X=>{if(!X)return;if(g.some(ze=>ze.productId===X)){p("");return}const G=r.find(ze=>ze.id===X);if(!G){p("");return}let ie=await cIe(X);ie||(ie=Number((G==null?void 0:G.price)||0));const Ie=await FQ(X),Re={productId:X,productName:G.name||"",sku:G.sku||"",unitPrice:Number(ie)||0,available:Number(Ie)||0,qty:0,discount:0};x(ze=>[...ze,Re]),p("")},z=(X,G)=>{x(ie=>ie.map(Ie=>{if(Ie.productId!==X)return Ie;if(G==="")return{...Ie,qty:0};const Re=Math.max(0,Math.floor(Number(G)));return{...Ie,qty:Re}}))},le=(X,G)=>{x(ie=>ie.map(Ie=>{if(Ie.productId!==X)return Ie;if(G==="")return{...Ie,discount:0};const Re=Math.max(0,Math.floor(Number(G)));return{...Ie,discount:Re}}))},K=X=>x(G=>G.filter(ie=>ie.productId!==X)),M=async()=>{if(!h)return"Selecciona la fecha.";if(g.length===0)return"Agrega al menos un producto.";const X=g.filter(G=>(G.qty||0)>0);if(X.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(b>0))return"El total debe ser mayor a cero.";if(i==="CONTADO"){if(!d.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!c)return"Selecciona un cliente (crdito).";if(w<0)return"El pago inicial no puede ser negativo.";if(w>b)return"El pago inicial no puede superar el total.";if((Q==null?void 0:Q.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const G of X){const ie=await FQ(G.productId);if(G.qty>ie)return`Inventario insuficiente para "${G.productName}". Disponible: ${ie} unidades.`;const Ie=(Number(G.unitPrice)||0)*(G.qty||0),Re=Number(G.discount)||0;if(!Number.isInteger(Re)||Re<0)return`El descuento en "${G.productName}" debe ser entero y  0.`;if(Re>Ie)return`El descuento en "${G.productName}" no puede exceder C$ ${Ie.toFixed(2)}.`}return null},pe=async X=>{X.preventDefault(),_("");const G=await M();if(G){_(" "+G);return}try{I(!0);const ie=g.filter(st=>(st.qty||0)>0).map(st=>{const lt=(Number(st.unitPrice)||0)*(st.qty||0),_t=Math.max(0,Math.floor(Number(st.discount)||0)),bt=Math.max(0,lt-_t);return{productId:st.productId,productName:st.productName,sku:st.sku||"",qty:st.qty,unitPrice:Number(st.unitPrice)||0,discount:_t,total:Math.floor(bt*100)/100}}),Ie={type:i,date:h,createdAt:tr.now(),itemsTotal:Number(b)||0,total:Number(b)||0,quantity:Number(y)||0,items:ie};i==="CONTADO"?Ie.customerName=d.trim():(Ie.customerId=c,Ie.downPayment=Number(w)||0);const Re=await Nn(At(je,"sales_clothes"),Ie);if(i==="CREDITO"&&c){const st={customerId:c,date:h,createdAt:tr.now(),ref:{saleId:Re.id}};await Nn(At(je,"ar_movements"),{...st,type:"CARGO",amount:Number(b)||0}),Number(w)>0&&await Nn(At(je,"ar_movements"),{...st,type:"ABONO",amount:-Number(w)})}const ze={};for(const st of ie)if(st.qty>0){const{allocations:lt}=await iIe({productId:st.productId,quantity:st.qty,saleDate:h,saleId:Re.id});ze[st.productId]={productId:st.productId,allocations:lt}}await Jr($t(je,"sales_clothes",Re.id),{allocationsByItem:ze}),l("CONTADO"),u(""),f(""),A(new Date().toISOString().slice(0,10)),x([]),B(0),i==="CREDITO"&&c&&e(st=>st.map(lt=>lt.id===c?{...lt,balance:(lt.balance||0)+(Number(b)||0)-(Number(w)||0)}:lt)),_(" Venta registrada"),(async()=>{const st=Wt(At(je,"inventory_clothes_batches"),sr("remaining",">",0)),lt=await Dt(st),_t={};lt.forEach(bt=>{const St=bt.data(),kt=St.productId||"",et=Number(St.remaining||0);kt&&(_t[kt]=(_t[kt]||0)+et)}),s(_t)})()}catch(ie){console.error(ie),_(" Error al guardar la venta")}finally{I(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:pe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:X=>l(X.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:d,onChange:X=>f(X.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:c,onChange:X=>u(X.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(X=>o.jsxs("option",{value:X.status==="ACTIVO"?X.id:"",disabled:X.status==="BLOQUEADO",children:[X.name," | ",X.phone," | Saldo: ",jg(X.balance||0)]},X.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>S(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:jg(V)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:X=>B(Math.max(0,Number(X.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:jg(Y)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:h,onChange:X=>A(X.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:async X=>{const G=X.target.value;p(G),await R(G)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(X=>{const G=g.some(Re=>Re.productId===X.id),ie=a[X.id]||0,Ie=G||ie<=0;return o.jsxs("option",{value:Ie?"":X.id,disabled:Ie,children:[X.name," ",X.sku?` ${X.sku}`:""," ",ie>0?`(disp: ${ie})`:"(sin stock)",G?" (seleccionado)":""]},X.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),g.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):g.map(X=>{const G=Math.max(0,(X.available||0)-(X.qty||0)),ie=(Number(X.unitPrice)||0)*(X.qty||0),Ie=Math.max(0,ie-(Number(X.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[X.productName,X.sku?`  ${X.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:jg(X.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:G}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(X.qty)||X.qty===0?"":X.qty,onChange:Re=>z(X.productId,Re.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(X.discount)||X.discount===0?"":X.discount,onChange:Re=>le(X.productId,Re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:jg(Ie)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>K(X.productId),title:"Quitar producto",children:""})})]},X.productId)})]}),g.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:y})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:jg(b)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:E,children:E?"Guardando...":"Registrar venta"})})]}),P&&o.jsx("p",{className:"mt-2 text-sm",children:P}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:j,onChange:X=>D(X.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:J,onChange:X=>ge(OQ(X.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:se,onChange:X=>he(X.target.value),children:[o.jsx("option",{value:"",children:""}),lIe.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ve,onChange:X=>Se(X.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:X=>F(Math.max(0,Number(X.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:me,onChange:X=>Z(X.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{H(),S(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(_(""),!j.trim()){_("Ingresa el nombre del nuevo cliente.");return}const X=OQ(J);try{const G=await Nn(At(je,"customers_clothes"),{name:j.trim(),phone:X,place:se||"",notes:me||"",status:ve,creditLimit:Number(k||0),createdAt:tr.now()}),ie={id:G.id,name:j.trim(),phone:X,place:se||"",status:ve,creditLimit:Number(k||0),balance:0};e(Ie=>[ie,...Ie]),u(G.id),H(),S(!1),_(" Cliente creado")}catch(G){console.error(G),_(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),E&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const bi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function S_(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function dIe(t,e){const r=S_(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function fIe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}function AIe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,B]=v.useState(""),[P,_]=v.useState(!1),[E,I]=v.useState(null),[O,S]=v.useState([]),[j,D]=v.useState(!1),[J,ge]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),B("");try{const k=await Dt(At(je,"sales_clothes")),F=[],H=[];k.forEach(X=>{const G=X.data(),ie=dIe(G,X.id);ie&&(ie.date<=a&&F.push(ie),ie.date>=r&&ie.date<=a&&H.push(ie))}),u(F),l(H);const Q=await Dt(At(je,"inventory_clothes_batches")),V=[];Q.forEach(X=>{const G=X.data(),ie=S_(G);!ie||ie>a||V.push({id:X.id,productId:G.productId,productName:G.productName||"",date:ie,quantity:Number(G.quantity||0),remaining:Number(G.remaining||0),purchasePrice:Number(G.purchasePrice||0)})}),f(V);const Y=await Dt(At(je,"expenses_clothes")),R=[];Y.forEach(X=>{const G=X.data(),ie=S_(G);ie&&ie>=r&&ie<=a&&R.push({id:X.id,date:ie,category:G.category||"",description:G.description||"",amount:Number(G.amount||0),status:G.status||""})}),A(R);const z=await Dt(At(je,"ar_movements")),le=[],K={};z.forEach(X=>{const G=X.data(),ie=S_(G);if(!ie)return;const Ie=G.customerId,Re=Number(G.amount||0);Ie&&(K[Ie]=(K[Ie]||0)+Re),G.type==="ABONO"&&ie>=r&&ie<=a&&le.push({id:X.id,customerId:Ie,type:"ABONO",amount:Re,date:ie})}),p(le);const M=await Dt(At(je,"customers_clothes")),pe=[];M.forEach(X=>{const G=X.data();pe.push({id:X.id,name:G.name||"",balance:K[X.id]||0})}),x(pe)}catch(k){console.error(k),B(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const se=v.useMemo(()=>{try{return fIe(d,c,r,a)}catch(k){return console.error(k),0}},[d,c,r,a]),he=v.useMemo(()=>{const k=i.reduce((K,M)=>K+(M.total||0),0),F=h.reduce((K,M)=>K+(M.amount||0),0),H=k-se,Q=H-F,V=m.reduce((K,M)=>K+Math.abs(M.amount||0),0),Y=g.filter(K=>(K.balance||0)>0),R=Y.reduce((K,M)=>K+(M.balance||0),0);let z=0,le=0;for(const K of i){const M=(K.items||[]).reduce((pe,X)=>pe+(Number(X.qty)||0),0);K.type==="CONTADO"?z+=M:le+=M}return{ventasTotales:k,costoMercaderia:se,gastosPeriodo:F,gananciaAntes:H,gananciaDespues:Q,abonosRecibidos:V,saldosPendientes:R,clientesConSaldo:Y.length,prendasCash:z,prendasCredito:le}},[i,h,m,g,se]),me=v.useMemo(()=>{const k={};for(const F of i){if(F.type!=="CREDITO"||!F.customerId)continue;const H=(F.items||[]).reduce((Q,V)=>Q+(Number(V.qty)||0),0);k[F.customerId]=(k[F.customerId]||0)+H}return g.filter(F=>(F.balance||0)>0).map(F=>({customerId:F.id,name:F.name,prendasCredito:k[F.id]||0,saldo:F.balance||0})).sort((F,H)=>H.saldo-F.saldo)},[g,i]),Z=v.useMemo(()=>{const k={};return g.forEach(F=>k[F.id]=F.name),k},[g]),ve=v.useMemo(()=>[...i].sort((k,F)=>F.date.localeCompare(k.date)).map(k=>{var Q;const F=(k.items||[]).reduce((V,Y)=>V+(Number(Y.qty)||0),0);let H="Cash";return k.type==="CREDITO"&&k.customerId?H=Z[k.customerId]||"":k.type==="CONTADO"&&(H=((Q=k.customerName)==null?void 0:Q.trim())||"Cash"),{id:k.id,date:k.date,type:k.type==="CREDITO"?"Crdito":"Cash",customer:H,piezas:F,total:Number(k.total||0)}}),[i,Z]),Se=async k=>{_(!0),I({id:k.customerId,name:k.name}),S([]),D(!0),ge({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const F=[];let H=0,Q=0,V=0;for(const le of i)if(!(le.type!=="CREDITO"||le.customerId!==k.customerId))for(const K of le.items||[]){const M=Number(K.qty||0),pe=Number(K.unitPrice||0),X=M*pe,G=Math.max(0,Number(K.discount||0)),ie=Math.max(0,X-G);F.push({saleId:le.id,date:le.date,productName:K.productName,sku:K.sku||"",qty:M,unitPrice:pe,lineTotal:X,discount:G,lineFinal:ie}),H+=X,Q+=G,V+=ie}let Y=0;for(const le of m)le.customerId===k.customerId&&(Y+=Math.abs(le.amount||0));const R=g.find(le=>le.id===k.customerId),z=(R==null?void 0:R.balance)||0;S(F),ge({totalBruto:H,totalDescuento:Q,totalFiado:V,saldoActual:z,abonadoPeriodo:Y})}catch(F){console.error(F),B(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(Xc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:k=>n(k.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:k=>s(k.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(he.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(he.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:bi(he.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(he.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:bi(he.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(he.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(he.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:he.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:he.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:he.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):me.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):me.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Se({customerId:k.customerId,name:k.name}),title:"Ver piezas fiadas del periodo",children:k.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:bi(k.saldo)})]},k.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):ve.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):ve.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.customer}),o.jsx("td",{className:"p-2 border",children:k.type}),o.jsx("td",{className:"p-2 border",children:k.piezas}),o.jsx("td",{className:"p-2 border",children:bi(k.total)})]},k.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((k,F)=>k.date.localeCompare(F.date)).map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.category||""}),o.jsx("td",{className:"p-2 border",children:k.description?o.jsx("span",{title:k.description,children:k.description.length>40?k.description.slice(0,40)+"":k.description}):""}),o.jsx("td",{className:"p-2 border",children:bi(k.amount)}),o.jsx("td",{className:"p-2 border",children:k.status||""})]},k.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(J.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(J.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(J.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(J.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(J.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:j?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):O.sort((k,F)=>k.date.localeCompare(F.date)).map((k,F)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.productName}),o.jsx("td",{className:"p-2 border",children:k.sku||""}),o.jsx("td",{className:"p-2 border",children:k.qty}),o.jsx("td",{className:"p-2 border",children:bi(k.unitPrice)}),o.jsx("td",{className:"p-2 border",children:bi(k.lineTotal)}),o.jsx("td",{className:"p-2 border",children:bi(k.discount)}),o.jsx("td",{className:"p-2 border",children:bi(k.lineFinal)})]},`${k.saleId}-${F}`))})]})})]})})]})}const DQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],sC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hIe(){const[t,e]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,B]=v.useState(""),[P,_]=v.useState(null),[E,I]=v.useState(""),[O,S]=v.useState(""),[j,D]=v.useState(""),[J,ge]=v.useState(0),[se,he]=v.useState("PENDIENTE"),[me,Z]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Wt(At(je,"expenses_clothes"),ln("date","desc")),z=await Dt(R),le=[];z.forEach(K=>{const M=K.data();le.push({id:K.id,date:M.date||wr(new Date,"yyyy-MM-dd"),category:M.category||"",description:M.description||"",amount:Number(M.amount||0),status:M.status||"PENDIENTE",notes:M.notes||"",createdAt:M.createdAt??tr.now()})}),x(le)}catch(R){console.error(R),B(" Error al cargar gastos")}finally{b(!1)}})()},[]);const ve=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=ve.reduce((K,M)=>K+(M.amount||0),0),z=ve.filter(K=>K.status==="PAGADO").reduce((K,M)=>K+(M.amount||0),0),le=R-z;return{total:R,pagado:z,pendiente:le}},[ve]),k=()=>{s(wr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),B(""),!i){B("Selecciona una categora.");return}if(!c.trim()){B("Ingresa una descripcin.");return}if(!d||d<=0){B("Ingresa un monto vlido.");return}try{const z=await Nn(At(je,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:tr.now()});x(le=>[{id:z.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:tr.now()},...le]),k(),B(" Gasto registrado")}catch(z){console.error(z),B(" Error al guardar gasto")}},H=R=>{_(R.id),I(R.date),S(R.category||""),D(R.description||""),ge(Number(R.amount||0)),he(R.status||"PENDIENTE"),Z(R.notes||"")},Q=()=>{_(null),I(""),S(""),D(""),ge(0),he("PENDIENTE"),Z("")},V=async()=>{if(P){if(!O){B("Selecciona una categora.");return}if(!j.trim()){B("Ingresa una descripcin.");return}if(!J||J<=0){B("Ingresa un monto vlido.");return}try{await Jr($t(je,"expenses_clothes",P),{date:E,category:O,description:j.trim(),amount:Number(J.toFixed(2)),status:se,notes:me||""}),x(R=>R.map(z=>z.id===P?{...z,date:E,category:O,description:j.trim(),amount:Number(J.toFixed(2)),status:se,notes:me||""}:z)),Q(),B(" Gasto actualizado")}catch(R){console.error(R),B(" Error al actualizar gasto")}}},Y=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Qn($t(je,"expenses_clothes",R.id)),x(le=>le.filter(K=>K.id!==R.id)),B(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",sC(Se.total)]}),o.jsxs("div",{children:["Pagado: ",sC(Se.pagado)]}),o.jsxs("div",{children:["Pendiente: ",sC(Se.pendiente)]})]})]}),o.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>l(R.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),DQ.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>A(R.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ve.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ve.slice().sort((R,z)=>R.date.localeCompare(z.date)).map(R=>{const z=P===R.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:le=>I(le.target.value)}):R.date}),o.jsx("td",{className:"p-2 border",children:z?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:le=>S(le.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),DQ.map(le=>o.jsx("option",{value:le,children:le},le))]}):R.category||""}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:le=>D(le.target.value)}):o.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:le=>ge(Math.max(0,Number(le.target.value||0)))}):sC(R.amount)}),o.jsx("td",{className:"p-2 border",children:z?o.jsxs("select",{className:"w-full border p-1 rounded",value:se,onChange:le=>he(le.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:le=>Z(le.target.value),maxLength:500}):o.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:z?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:V,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Q,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(R),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Y(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const ed=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function mIe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function pIe(t,e){const r=mIe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function gIe(t,e){if(e<=0)return;const r=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",t)),n=await Dt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const l=Math.min(i.remaining,s);s-=l,await Jr($t(je,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function xIe(t,e){if(e<=0)return;const r=Wt(At(je,"inventory_clothes_batches"),sr("productId","==",t)),n=await Dt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;const l=Math.max(0,i.quantity-i.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await Jr($t(je,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function Wee(t){const e=Wt(At(je,"ar_movements"),sr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn($t(je,"ar_movements",n.id))))}async function vIe(t,e,r){if(await Wee(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:tr.now(),ref:{saleId:t.id}},{addDoc:a}=await AA(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>jve);return{addDoc:i}},void 0);await a(At(je,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(At(je,"ar_movements"),{...n,type:"ABONO",amount:-s})}function yIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async X=>{e(!0),n(!0),s(X),l([]);try{const ie=(await Dt(Wt(At(je,"sales_clothes"),sr("__name__","==",X)))).docs[0],Ie=ie==null?void 0:ie.data(),ze=(Array.isArray(Ie==null?void 0:Ie.items)?Ie.items:Ie!=null&&Ie.item?[Ie.item]:[]).map(st=>({productName:String(st.productName||""),qty:Number(st.qty||0),unitPrice:Number(st.unitPrice||0),discount:Number(st.discount||0),total:Number(st.total||0)}));l(ze)}catch(G){console.error(G)}finally{n(!1)}},[u,d]=v.useState(wr(new Date,"yyyy-MM-01")),[f,h]=v.useState(wr(new Date,"yyyy-MM-dd")),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[B,P]=v.useState(""),[_,E]=v.useState(""),[I,O]=v.useState(null),[S,j]=v.useState(!1),[D,J]=v.useState(null),[ge,se]=v.useState(0),he=15,[me,Z]=v.useState(1),ve=v.useMemo(()=>{const X={};return A.forEach(G=>X[G.id]=G.name),X},[A]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const X=await Dt(At(je,"customers_clothes")),G=[];X.forEach(Re=>G.push({id:Re.id,name:Re.data().name||""})),m(G);const ie=await Dt(Wt(At(je,"sales_clothes"),ln("createdAt","desc"))),Ie=[];ie.forEach(Re=>{const ze=pIe(Re.data(),Re.id);ze&&ze.date>=u&&ze.date<=f&&Ie.push(ze)}),g(Ie.sort((Re,ze)=>ze.date.localeCompare(Re.date))),Z(1)}catch(X){console.error(X),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Se=v.useMemo(()=>p.filter(X=>!(B&&X.customerId!==B||_&&X.type!==_)),[p,B,_]),k=v.useMemo(()=>{let X=0,G=0,ie=0,Ie=0;for(const Re of Se)Re.type==="CONTADO"?(X+=Re.item.qty,ie+=Re.total):(G+=Re.item.qty,Ie+=Re.total);return{piezasCash:X,piezasCredito:G,montoCash:ie,montoCredito:Ie}},[Se]),F=Math.max(1,Math.ceil(Se.length/he)),H=v.useMemo(()=>{const X=(me-1)*he;return Se.slice(X,X+he)},[Se,me]),Q=X=>{O(null),J(X),se(X.item.qty||0),j(!0)},V=async X=>{if(O(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await LT(X.id),await Wee(X.id),g(G=>G.filter(ie=>ie.id!==X.id)),w(" Venta eliminada")}catch(G){console.error(G),w(" No se pudo eliminar la venta.")}finally{y(!1)}},Y=async()=>{if(!D)return;const X=Number(D.item.qty||0),G=Math.max(1,Math.floor(Number(ge)||0));if(G===X){j(!1);return}const ie=Number(D.item.unitPrice||0),Ie=Number((ie*G).toFixed(2));try{y(!0);const Re=G-X;Re>0?await gIe(D.item.productId,Re):Re<0&&await xIe(D.item.productId,-Re);const ze=$t(je,"sales_clothes",D.id);await Jr(ze,{quantity:G,total:Ie,itemsTotal:Ie,"item.qty":G,"item.total":Ie,updatedAt:tr.now()});const st=Math.min(Number(D.downPayment||0),Ie);await vIe(D,Ie,st),g(lt=>lt.map(_t=>_t.id===D.id?{..._t,quantity:G,total:Ie,item:{..._t.item,qty:G,total:Ie},downPayment:st}:_t)),w(" Venta actualizada"),j(!1)}catch(Re){console.error(Re),w(" No se pudo actualizar la venta.")}finally{y(!1)}},R=()=>{const X=`Reporte de transacciones (Ropa)  ${u} a ${f}`,G=ze=>(ze||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ie=Se.map(ze=>{const st=ze.customerName||(ze.customerId?ve[ze.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${ze.date}</td>
          <td>${G(st)}</td>
          <td>${ze.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ze.item.qty}</td>
          <td style="text-align:right">${ed(ze.total)}</td>
        </tr>`}).join(""),Ie=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${G(X)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${G(X)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${k.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${k.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${ed(k.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${ed(k.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${ie||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Re=window.open("","_blank");Re&&(Re.document.open(),Re.document.write(Ie),Re.document.close())},z=()=>Z(1),le=()=>Z(X=>Math.max(1,X-1)),K=()=>Z(X=>Math.min(F,X+1)),M=()=>Z(F),pe=()=>{const X=[];if(F<=7)for(let ie=1;ie<=F;ie++)X.push(ie);else{const ie=Math.max(1,me-2),Ie=Math.min(F,me+2);X.push(1),ie>2&&X.push(-1);for(let Re=ie;Re<=Ie;Re++)Re!==1&&Re!==F&&X.push(Re);Ie<F-1&&X.push(-2),X.push(F)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:z,disabled:me===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:le,disabled:me===1,children:" Anterior"}),X.map((ie,Ie)=>typeof ie=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${ie===me?"bg-blue-600 text-white":""}`,onClick:()=>Z(ie),children:ie},Ie):o.jsx("span",{className:"px-2",children:""},Ie)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:K,disabled:me===F,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:M,disabled:me===F,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",me," de ",F,"  ",Se.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:X=>{d(X.target.value),Z(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:X=>{h(X.target.value),Z(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:B,onChange:X=>{P(X.target.value),Z(1)},children:[o.jsx("option",{value:"",children:"Todos"}),A.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:X=>{E(X.target.value),Z(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:ed(k.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:ed(k.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:x?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):H.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):H.map(X=>{const G=X.customerName||(X.customerId?ve[X.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:X.date}),o.jsx("td",{className:"p-2 border",children:G}),o.jsx("td",{className:"p-2 border",children:X.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(X.id),children:X.item.qty})}),o.jsx("td",{className:"p-2 border",children:ed(X.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>O(ie=>ie===X.id?null:X.id),title:"Acciones",children:""}),I===X.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>Q(X),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>V(X),children:"Eliminar"})]})]})]},X.id)})})]}),pe()]}),b&&o.jsx("p",{className:"mt-2 text-sm",children:b}),S&&D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:ge,onChange:X=>se(Math.max(1,Math.floor(Number(X.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:ed(D.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:ed(Number(D.item.unitPrice)*Number(ge||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{j(!1),J(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Y,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((X,G)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:X.productName}),o.jsx("td",{className:"p-2 border text-right",children:X.qty}),o.jsx("td",{className:"p-2 border text-right",children:ed(X.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:ed(X.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:ed(X.total)})]},G))})]})})]})})]})}function bIe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function wIe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var NIe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CIe=function(t){NIe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),bIe(s,a.prototype),wIe(s),s}return e}(Error),_Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hc=function(t){_Ie(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(CIe),EIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=function(t){EIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(hc),SIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=function(t){SIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(hc),Xee=function(){function t(e){if(this.binarizer=e,e===null)throw new zr("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),IIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ai=function(t){IIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(hc),BIe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Qa=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),PIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E6=function(t){PIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(hc),jIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RQ=function(t){jIe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(E6),TIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ki=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new zr("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new RQ(r);if(n>e)throw new RQ(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=TIe(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=31*a+l}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Qa.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,l=n(r,e[i]);if(l>0)a=i+1;else if(l<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),_n=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),oo=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Qa.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var l=a*32+_n.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var l=a*32+_n.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new zr;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var l=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<l);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new zr;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new zr("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new zr("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,l=0;l<8;l++)this.get(e)&&(i|=1<<7-l),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ki.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ki.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),UT;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(UT||(UT={}));const Va=UT;var kIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pr=function(t){kIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(hc),FIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fa;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(fa||(fa={}));var Ti=function(){function t(e,r,n){for(var a,s,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=FIe(i),A=h.next();!A.done;A=h.next()){var m=A.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new pr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new pr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new pr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(fa.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(fa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(fa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(fa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(fa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(fa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(fa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(fa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(fa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(fa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(fa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(fa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(fa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(fa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(fa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(fa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(fa.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(fa.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(fa.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(fa.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(fa.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(fa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(fa.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(fa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(fa.Big5,28,"Big5"),t.GB18030=new t(fa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(fa.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),OIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I_=function(t){OIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(hc),ku=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ti?e:Ti.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Ti.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new I_("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ti.UTF8)||e.equals(Ti.ISO8859_1)||e.equals(Ti.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Un=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return ku.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Va.CHARACTER_SET)!==void 0)return r.get(Va.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,l=0,c=0,u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(l>0?w&128?l--:i=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,A++,A>p&&(p=A)):w>127?(f++,A=0,m++,m>g&&(g=m)):(A=0,m=0))}return i&&l>0&&(i=!1),s&&f>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,h){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var A=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(A||16);break;case"d":m=parseFloat(parseInt(r[a],A||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(A);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return ku.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ti.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ti.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ti.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),yn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Un.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),pf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new zr("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],l=0;l<n;l++)i[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new zr("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new zr("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new zr("illegal character encountered: "+e.substring(u));if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new zr("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new zr("input matrix dimensions do not match");for(var r=new oo(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new zr("Left and top must be nonnegative");if(a<1||n<1)throw new zr("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new zr("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new oo(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Qa.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new oo(e),a=new oo(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>l){for(var h=31;!(f>>>h);)h--;d*32+h>l&&(l=d*32+h)}}}return l<s||c<i?null:Int32Array.from([s,i,l-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],l=0;!(i<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],l=31;!(i>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ki.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ki.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new yn,s=0,i=this.height;s<i;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),DIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mt=function(t){DIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(hc),RIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MIe=function(t){RIe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new oo(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,f=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(f*4-d-h)/2<u&&n.set(c),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new pf(n,a);this.initArrays(n);for(var i=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var A=e.estimateBlackPoint(i),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var h=m[p+f]&255;h<A&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,l=0;l<n;l++)r[l]>i&&(s=l,i=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new Mt;for(var A=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(A=l,m=f)}return A<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(BIe),LIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yee=function(t){LIe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,i,l,n,a),u=new pf(n,a);e.calculateThresholdForBlock(s,i,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,l,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var A=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[A+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,l){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var l=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var h=0;h<n;h++){var A=h<<e.BLOCK_SIZE_POWER;A>c&&(A=c);for(var m=0,p=255,g=0,x=0,y=f*s+A;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var B=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(B=p/2,d>0&&h>0)){var P=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<P&&(B=P)}u[d][h]=B}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(MIe),Jb=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new I_("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new I_("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new I_("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new yn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,l=void 0;i<64?l="#":i<128?l="+":i<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),UIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u4=function(t){UIe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Jb),QIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VIe=function(t){QIe(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new u4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Jb),HIe=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Cl=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},_l=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$Ie=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jv=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Cl(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return _l(this,function(A){switch(A.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=$Ie(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Cl(this,void 0,void 0,function(){var e;return _l(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new HIe(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Cl(this,void 0,void 0,function(){var r;return _l(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Cl(this,void 0,void 0,function(){return _l(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Cl(this,void 0,void 0,function(){var n,a;return _l(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Cl(this,void 0,void 0,function(){var n;return _l(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Cl(this,void 0,void 0,function(){var n,a;return _l(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Cl(this,void 0,void 0,function(){return _l(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Cl(this,void 0,void 0,function(){var a,s;return _l(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Cl(this,void 0,void 0,function(){var a;return _l(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Cl(this,void 0,void 0,function(){var a;return _l(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Cl(this,void 0,void 0,function(){var n;return _l(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Cl(this,void 0,void 0,function(){return _l(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ys("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ys("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ys("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ys("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ys("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ys("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ys("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ys("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ys("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ys("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Cl(this,void 0,void 0,function(){return _l(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Cl(this,void 0,void 0,function(){return _l(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,l){if(a._stopAsyncDecode){l(new Mt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof Mt,d=h instanceof Ai||h instanceof pr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,i,l);l(h)}};return new Promise(function(i,l){return s(i,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof Ai||c instanceof pr,l=c instanceof Mt;(i||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new VIe(n,r),s=new Yee(a);return new Xee(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),pl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Qa.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Qa.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Qa.arraycopy(r,0,n,0,r.length),Qa.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),QT;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(QT||(QT={}));const qr=QT;var VT;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(VT||(VT={}));const Mo=VT;var d4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Ay=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new zr;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),x0=function(){function t(e,r){if(r.length===0)throw new zr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Qa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=Ay.addOrSubtract(n,i)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Ay.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Qa.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=Ay.addOrSubtract(r[l-i],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=Ay.addOrSubtract(i[c+d],l.multiply(u,a[d]));return new t(l,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new zr;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,l=0;l<a;l++)s[l]=i.multiply(n[l],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new zr("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),KIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jee=function(t){KIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(hc),GIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nc=function(t){GIe(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),l=1,c=0;c<n;c++)i[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new x0(s,Int32Array.from([0])),s.one=new x0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new zr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new x0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Jee;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+_n.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ay),qIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iC=function(t){qIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(hc),zIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zb=function(t){zIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(hc),f4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new x0(n,e),s=new Int32Array(r),i=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(i=!1)}if(!i)for(var u=new x0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],A=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,A),l=0;l<A.length;l++){var p=e.length-1-n.log(A[l]);if(p<0)throw new iC("Bad error location");e[p]=nc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=i,f=c;if(i=l,c=u,i.isZero())throw new iC("r_{i-1} was zero");l=d;for(var h=s.getZero(),A=i.getCoefficient(i.getDegree()),m=s.inverse(A);l.getDegree()>=i.getDegree()&&!l.isZero();){var p=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(f),l.getDegree()>=i.getDegree())throw new Zb("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new iC("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new iC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var l=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[i]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],l))}return a},t}(),Co;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Co||(Co={}));var MQ=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),l=new d4(s,i,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Co.UPPER,a=Co.UPPER,s="",i=0;i<r;)if(a===Co.BINARY){if(r-i<5)break;var l=t.readCode(e,i,5);if(i+=5,l===0){if(r-i<11)break;l=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<l;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=Un.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===Co.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return Co.LOWER;case"P":return Co.PUNCT;case"M":return Co.MIXED;case"D":return Co.DIGIT;case"B":return Co.BINARY;case"U":default:return Co.UPPER}},t.getCharacter=function(e,r){switch(e){case Co.UPPER:return t.UPPER_TABLE[r];case Co.LOWER:return t.LOWER_TABLE[r];case Co.MIXED:return t.MIXED_TABLE[r];case Co.PUNCT:return t.PUNCT_TABLE[r];case Co.DIGIT:return t.DIGIT_TABLE[r];default:throw new Zb("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=nc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=nc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=nc.AZTEC_DATA_10):(n=12,r=nc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new pr;for(var i=e.length%n,l=new Int32Array(s),c=0;c<s;c++,i+=n)l[c]=t.readCode(e,i,n);try{var u=new f4(r);u.decode(l,s-a)}catch(g){throw new pr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var h=l[c];if(h===0||h===d)throw new pr;(h===1||h===d-1)&&f++}for(var A=new Array(a*n-f),m=0,c=0;c<a;c++){var h=l[c];if(h===1||h===d-1)A.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)A[m++]=(h&1<<p)!==0}return A},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*_n.truncDivision(_n.truncDivision(a,2)-1,15),u=a/2,d=_n.truncDivision(c,2),l=0;l<u;l++){var f=l+_n.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,h=0;l<n;l++){for(var A=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<A;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*A+x+y]=e.get(s[m+g],s[p-y]),i[h+4*A+x+y]=e.get(s[p-y],s[p-g]),i[h+6*A+x+y]=e.get(s[p-g],s[m+y]);h+=A*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Xn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),HT=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Rr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*HT.floatToIntBits(this.x)+HT.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,l;if(n>=r&&n>=a?(i=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],l=e[2]):(i=e[2],s=e[0],l=e[1]),this.crossProductZ(s,i,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=i,e[2]=l},t.distance=function(e,r){return Xn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),S6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),WIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XIe=function(t){WIe(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=i,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(S6),$T=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Mt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,l=!1,c=!1,u=!1,d=!1,f=!1,h=this.width,A=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<A;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=A){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,f=!0):f||n--;if(n<0){s=!0;break}i&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Mt;for(var B=null,w=1;B===null&&w<y;w++)B=this.getBlackPointOnSegment(e,n+w,e+w,n);if(B==null)throw new Mt;for(var P=null,w=1;P===null&&w<y;w++)P=this.getBlackPointOnSegment(r,n+w,r-w,n);if(P==null)throw new Mt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new Mt;return this.centerEdges(_,b,P,B)}else throw new Mt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=Xn.round(Xn.distance(e,r,n,a)),i=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=Xn.round(e+u*i),f=Xn.round(r+u*l);if(c.get(d,f))return new Rr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),h=a.getY(),A=t.CORR;return s<this.width/2?[new Rr(f-A,h+A),new Rr(l+A,c+A),new Rr(u-A,d-A),new Rr(s+A,i-A)]:[new Rr(f+A,h+A),new Rr(l+A,c-A),new Rr(u-A,d+A),new Rr(s-A,i-A)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),LQ=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Mt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Mt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),Zee=function(){function t(e,r,n,a,s,i,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,l,c,u,d,f,h,A,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,l,c),y=t.squareToQuadrilateral(u,d,f,h,A,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var A=e[h],m=e[h+1],p=s*A+c*m+f;e[h]=(n*A+i*m+u)/p,e[h+1]=(a*A+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,A=0;A<h;A++){var m=e[A],p=r[A],g=s*m+c*p+f;e[A]=(n*m+i*p+u)/g,r[A]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,l,c){var u=e-n+s-l,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var f=n-s,h=l-s,A=a-i,m=c-i,p=f*m-h*A,g=(u*m-h*d)/p,x=(f*d-u*A)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,l,c){return t.squareToQuadrilateral(e,r,n,a,s,i,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),YIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JIe=function(t){YIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w){var B=Zee.quadrilateralToQuadrilateral(s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,B)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Mt;for(var i=new pf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),LQ.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&i.set(f/2,c)}catch{throw new Mt}}return i},e}(LQ),I6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new JIe,t}(),Wl=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Rr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),ZIe=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new XIe(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Mt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(_n.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Mt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),l=n-1;l>=0;--l)i[l]=e&15,e>>=4;try{var c=new f4(nc.AZTEC_PARAM);c.decode(i,s)}catch{throw new Mt}for(var u=0,l=0;l<a;l++)u=(u<<4)+i[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Mt;this.compact=this.nbCenterLayers===5;var h=new Rr(r.getX()+.5,r.getY()-.5),A=new Rr(n.getX()+.5,n.getY()+.5),m=new Rr(a.getX()-.5,a.getY()+.5),p=new Rr(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,A,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new $T(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Wl(i+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wl(i+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Wl(i-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Wl(i-7,l-7),!1,-1,-1).toResultPoint()}var c=Xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new $T(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Wl(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wl(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Wl(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Wl(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Wl(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=I6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return i.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,l=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(Xn.round(l+f*u),Xn.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Wl(e.getX()-s,e.getY()+s),r=new Wl(r.getX()-s,r.getY()-s),n=new Wl(n.getX()+s,n.getY()-s),a=new Wl(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var l=this.getColor(e,r);return l!==i||(l=this.getColor(r,n),l!==i)?!1:(l=this.getColor(n,a),l===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(Xn.round(l),Xn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new Wl(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Rr(l+a*s,c+a*i),d=new Rr(l-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Rr(l+a*s,c+a*i),h=new Rr(l-a*s,c-a*i),A=[u,f,d,h];return A},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Xn.round(e.getX()),n=Xn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_n.truncDivision(this.nbLayers-4,8)+1)+15},t}(),$E=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new ZIe(e.getBlackMatrix()),s=null,i=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new MQ().decode(l)}catch(f){n=f}if(i==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new MQ().decode(l)}catch(f){throw n??f}var c=new pl(i.getText(),i.getRawBytes(),i.getNumBits(),s,qr.AZTEC,Qa.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata(Mo.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata(Mo.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Va.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),e4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){e4e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new $E,r)||this}return e})(jv);var Ri=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Va.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),l=270;i!==null&&i.get(Mo.ORIENTATION)===!0&&(l=l+i.get(Mo.ORIENTATION)%360),s.putMetadata(Mo.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Rr(u-c[d].getY()-1,c[d].getX());return s}else throw new Mt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new oo(n),i=r&&r.get(Va.TRY_HARDER)===!0,l=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,A=u+l*(h?f:-f);if(A<0||A>=a)break;try{s=e.getBlackRow(A,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Va.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(P,_){return b.set(_,P)}),b.delete(Va.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(A,s,r);if(y===1){w.putMetadata(Mo.ORIENTATION,180);var B=w.getResultPoints();B!==null&&(B[0]=new Rr(n-B[0].getX()-1,B[0].getY()),B[1]=new Rr(n-B[1].getX()-1,B[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Mt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new Mt;for(var l=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===i))throw new Mt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Mt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return Number.POSITIVE_INFINITY;u+=A}return u/s},t}(),t4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UQ=function(t){t4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,A=e.CODE_START_A;A<=e.CODE_START_C;A++){var m=Ri.patternMatchVariance(i,e.CODE_PATTERNS[A],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=A)}if(h>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,h]);l+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new Mt},e.decodeCode=function(r,n,a){Ri.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=l)}if(i>=0)return i;throw new Mt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Va.ASSUME_GS1)===!0,i=e.findStartPattern(n),l=i[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new pr}for(var f=!1,h=!1,A="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,B=!0,P=!1,_=!1;!f;){var E=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(B=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(he,me){return he+me},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new pr}switch(d){case e.CODE_CODE_A:if(y<64)_===P?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===P?A+=String.fromCharCode(y-64):A+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(B=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!P&&_?(P=!0,_=!1):P&&_?(P=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===P?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(B=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!P&&_?(P=!0,_=!1):P&&_?(P=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(A+="0"),A+=y;else switch(y!==e.CODE_STOP&&(B=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}E&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Mt;if(b-=w*x,b%103!==x)throw new Ai;var O=A.length;if(O===0)throw new Mt;O>0&&B&&(d===e.CODE_CODE_C?A=A.substring(0,O-2):A=A.substring(0,O-1));for(var S=(i[1]+i[0])/2,j=m+I/2,D=u.length,J=new Uint8Array(D),ge=0;ge<D;ge++)J[ge]=u[ge];var se=[new Rr(S,r),new Rr(j,r)];return new pl(A,J,0,se,qr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Ri),r4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QQ=function(t){r4e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),A,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Mt;A=e.patternToChar(p),this.decodeRowResult+=A,m=f;try{for(var g=(s=void 0,IB(u)),x=g.next();!x.done;x=g.next()){var y=x.value;f+=y}}catch(D){s={error:D}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=IB(u),B=w.next();!B.done;B=w.next()){var y=B.value;b+=y}}catch(D){l={error:D}}finally{try{B&&!B.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var P=f-m-b;if(f!==h&&P*2<b)throw new Mt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,E=0,I=0;I<_;I++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(E%43))throw new Ai;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new Mt;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var S=(d[1]+d[0])/2,j=m+b/2;return new pl(O,null,0,[new Rr(S,r),new Rr(j,r)],qr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new Mt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,l;do{var c=2147483647;try{for(var u=(n=void 0,IB(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>i&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,l=0;for(var h=0,A=0,m=0;m<s;m++){var f=r[m];f>i&&(A|=1<<s-1-m,l++,h+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>i&&(l--,f*2>=h))return-1}return A}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Mt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var l=r.charAt(s+1),c="\0";switch(i){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new pr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new pr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new pr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new pr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Ri),n4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VQ=function(t){n4e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var A,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new Mt;A=this.patternToChar(p),this.decodeRowResult+=A,m=d;try{for(var g=(s=void 0,BB(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(I){s={error:I}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=BB(h),B=w.next();!B.done;B=w.next()){var y=B.value;b+=y}}catch(I){l={error:I}}finally{try{B&&!B.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new Mt;if(this.decodeRowResult.length<2)throw new Mt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var P=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,E=m+b/2;return new pl(P,null,0,[new Rr(_,r),new Rr(E,r)],qr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Mt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=BB(r),l=i.next();!l.done;l=i.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/s);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var A=0;A<h;A++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Mt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new pr;var l=r.charAt(s+1),c="\0";switch(i){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new pr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new pr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new pr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new pr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,l=n-1;l>=0;l--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new Ai},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Ri),a4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HQ=function(t){a4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,l=this.decodeStart(n),c=this.decodeEnd(n),u=new yn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(Va.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,A=!1,m=0;try{for(var p=s4e(f),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){A=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!A&&h>m&&(A=!0),!A)throw new pr;var y=[new Rr(l[1],r),new Rr(c[0],r)],b=new pl(d,null,0,y,qr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),l.fill(0),c.fill(0);n<a;){Ri.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;l[u]=i[d],c[u]=i[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Mt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Mt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof Mt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)i[u]++;else{if(u===s-1){if(Ri.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=i[0]+i[1],Qa.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new Mt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var l=e.PATTERNS[i],c=Ri.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new Mt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Ri),i4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tv=function(t){i4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,h=n;h<l;h++)if(r.get(h)!==f)i[c]++;else{if(c===d-1){if(Ri.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var A=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=A[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new Mt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=Ri.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,l=u)}if(l>=0)return l;throw new Mt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Ri),o4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l4e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Rr((n[0]+n[1])/2,e),new Rr(s,e)],u=new pl(i,null,0,c,qr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=tv.decodeDigit(e,i,c,tv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,o4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Mt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Mt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Mt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Mo.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),c4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u4e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Rr((n[0]+n[1])/2,e),new Rr(s,e)],u=new pl(i,null,0,c,qr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=tv.decodeDigit(e,i,c,tv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,c4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Mt;if(parseInt(n.toString())%4!==u)throw new Mt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Mo.ISSUE_NUMBER,parseInt(e)]])},t}(),d4e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=tv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new l4e;return s.decodeRow(e,r,a)}catch{var i=new u4e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),f4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ii=function(t){f4e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get(Va.NEED_RESULT_POINT_CALLBACK);if(i!=null){var l=new Rr((s[0]+s[1])/2,r);i.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var f=new Rr(u,r);i.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(i!=null){var A=new Rr((h[0]+h[1])/2,r);i.foundPossibleResultPoint(A)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Mt;var g=d.toString();if(g.length<8)throw new pr;if(!e.checkChecksum(g))throw new Ai;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new Rr(x,r),new Rr(y,r)],B=new pl(g,null,0,w,b,new Date().getTime()),P=0;try{var _=d4e.decodeRow(r,n,h[1]);B.putMetadata(Mo.UPC_EAN_EXTENSION,_.getText()),B.putAllMetadata(_.getResultMetadata()),B.addResultPoints(_.getResultPoints()),P=_.getText().length}catch{}var E=a==null?null:a.get(Va.ALLOWED_EAN_EXTENSIONS);if(E!=null){var I=!1;for(var O in E)if(P.toString()===O){I=!0;break}if(!I)throw new Mt}return b===qr.EAN_13||qr.UPC_A,B},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(tv),A4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Q=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KT=function(t){A4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,A=0;A<6&&f<d;A++){var m=Ii.decodeDigit(r,u,f,Ii.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,$Q(u)),g=p.next();!g.done;g=p.next()){var x=g.value;f+=x}}catch(B){s={error:B}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-A)}a=e.determineFirstDigit(a,h);var y=Ii.findGuardPattern(r,f,!0,Ii.MIDDLE_PATTERN,new Int32Array(Ii.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var A=0;A<6&&f<d;A++){var m=Ii.decodeDigit(r,u,f,Ii.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,$Q(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return qr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Mt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ii),h4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GQ=function(t){h4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var A=Ii.decodeDigit(r,u,f,Ii.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var m=(s=void 0,KQ(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=Ii.findGuardPattern(r,f,!0,Ii.MIDDLE_PATTERN,new Int32Array(Ii.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var A=Ii.decodeDigit(r,u,f,Ii.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var y=(l=void 0,KQ(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(P){l={error:P}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return qr.EAN_8},e}(Ii),m4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qQ=function(t){m4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new KT,r}return e.prototype.getBarcodeFormat=function(){return qr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new pl(n.substring(1),null,null,r.getResultPoints(),qr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Mt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ii),p4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zQ=function(t){p4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var A=(s=void 0,g4e(l)),m=A.next();!m.done;m=A.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new yn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Ii.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Mt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return qr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new yn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ii),x4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PB=function(t){x4e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Va.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(qr.EAN_13)>-1&&s.push(new KT),a.indexOf(qr.UPC_A)>-1&&s.push(new qQ),a.indexOf(qr.EAN_8)>-1&&s.push(new GQ),a.indexOf(qr.UPC_E)>-1&&s.push(new zQ)),s.length===0&&(s.push(new KT),s.push(new qQ),s.push(new GQ),s.push(new zQ)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var l=WQ(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===qr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(Va.POSSIBLE_FORMATS),A=h==null||h.includes(qr.UPC_A);if(f&&A){var m=d.getRawBytes(),p=new pl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),qr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}throw new Mt},e.prototype.reset=function(){var r,n;try{for(var a=WQ(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Ri),v4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y4e=function(t){v4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Mt;var i=this.codaBarDecodeRow(s.row);if(!i)throw new Mt;return new pl(i,null,0,[new Rr(s.left,r),new Rr(s.right,r)],qr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Ri),b4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nm=function(t){b4e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Ri.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Mt},e.count=function(r){return Xn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],l=s/i;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=w4e(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Ri),KE=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),ete=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Rr(n,s)),this.resultPoints.push(new Rr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),N4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ax=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var l=N4e(e),c=l.next();!c.done;c=l.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,h=e.length,A=0;A<h-1;A++){var m=void 0;for(m=1,f|=1<<A;m<e[A];m++,f&=~(1<<A)){var p=t.combins(i-m-1,h-A-2);if(n&&f===0&&i-m-(h-A-1)>=h-A-1&&(p-=t.combins(i-m-(h-A),h-A-2)),h-A-1>1){for(var g=0,x=i-m-(h-A-2);x>r;x--)g+=t.combins(i-m-x-1,h-A-3);p-=g*(h-1-A)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,l=e;l>n;l--)s*=l,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),C4e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new oo(n),s=0,i=e[0],l=i.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&a.set(s),s++}return a},t}(),dm=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),B6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),_4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),td=function(t){_4e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(B6),E4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fm=function(t){E4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(B6),S4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tg=function(t){S4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new pr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(B6),oC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I4e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,l,c,u;if(!e)return null;if(e.length<2)throw new Mt;var d=e.substring(0,2);try{for(var f=oC(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var A=h.value;if(A[0]===d)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,A[2],e):t.processFixedAI(2,A[1],e)}}catch(P){r={error:P}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new Mt;var m=e.substring(0,3);try{for(var p=oC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var A=g.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,A[2],e):t.processFixedAI(3,A[1],e)}}catch(P){a={error:P}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=oC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var A=y.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(P){i={error:P}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new Mt;var b=e.substring(0,4);try{for(var w=oC(t.FOUR_DIGIT_DATA_LENGTH),B=w.next();!B.done;B=w.next()){var A=B.value;if(A[0]===b)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(P){c={error:P}}finally{try{B&&!B.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Mt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Mt;var a=n.substring(0,e);if(n.length<e+r)throw new Mt;var s=n.substring(e,e+r),i=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),l=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),B_=function(){function t(e){this.buffer=new yn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=I4e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Tg(this.information.getSize(),Tg.FNC1,Tg.FNC1):new Tg(this.information.getSize(),r-1,Tg.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Tg(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new fm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new fm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new fm(this.current.getPosition(),this.buffer.toString()):r=new fm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new dm(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new fm(this.current.getPosition(),this.buffer.toString());return new dm(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new dm(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new fm(this.current.getPosition(),this.buffer.toString());return new dm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new dm(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new fm(this.current.getPosition(),this.buffer.toString());return new dm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new dm(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new td(e+5,td.FNC1);if(r>=5&&r<15)return new td(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new td(e+7,""+(n+1));if(n>=90&&n<116)return new td(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new pr}return new td(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new td(e+5,td.FNC1);if(r>=5&&r<15)return new td(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new td(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Zb("Decoding invalid alphanumeric value: "+n)}return new td(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),tte=function(){function t(e){this.information=e,this.generalDecoder=new B_(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),B4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cd=function(t){B4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(tte),P4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j4e=function(t){P4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new yn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(cd),T4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k4e=function(t){T4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new yn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(tte),F4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P_=function(t){F4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),l=1e5,c=0;c<5;++c)i/l===0&&r.append("0"),l/=10;r.append(i)},e}(cd),O4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rte=function(t){O4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+P_.GTIN_SIZE+e.WEIGHT_SIZE)throw new Mt;var r=new yn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+P_.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(P_),D4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4e=function(t){D4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(rte),M4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L4e=function(t){M4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(rte),U4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q4e=function(t){U4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+cd.GTIN_SIZE)throw new Mt;var r=new yn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+cd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(cd),V4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H4e=function(t){V4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+cd.GTIN_SIZE)throw new Mt;var r=new yn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+cd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(cd),$4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nh=function(t){$4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Mt;var r=new yn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(P_);function K4e(t){try{if(t.get(1))return new j4e(t);if(!t.get(2))return new k4e(t);var e=B_.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new R4e(t);case 5:return new L4e(t)}var r=B_.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new Q4e(t);case 13:return new H4e(t)}var n=B_.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Nh(t,"310","11");case 57:return new Nh(t,"320","11");case 58:return new Nh(t,"310","13");case 59:return new Nh(t,"320","13");case 60:return new Nh(t,"310","15");case 61:return new Nh(t,"320","15");case 62:return new Nh(t,"310","17");case 63:return new Nh(t,"320","17")}}catch(a){throw console.log(a),new Zb("unknown decoder: "+t)}}var XQ=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),G4e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ch=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z4e=function(t){q4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Mt){if(!this.pairs.length)throw new Mt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Mt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var l=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,Ch(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,i+1)}catch(h){console.log(h)}}}throw new Mt},e.isValidSequence=function(r){var n,a;try{for(var s=Ch(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var l=i.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){i=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new G4e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,l,c,u;try{for(var d=Ch(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var A=!0;try{for(var m=(i=void 0,Ch(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Ch(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(XQ.equals(g,w)){x=!0;break}}}catch(B){c={error:B}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(A=!1)}}catch(B){i={error:B}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}}}}catch(B){a={error:B}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,l,c,u;try{for(var d=Ch(n),f=d.next();!f.done;f=d.next()){var h=f.value,A=!0;try{for(var m=(i=void 0,Ch(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Ch(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(B){c={error:B}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){A=!1;break}}}catch(B){i={error:B}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}if(A)return!0}}catch(B){a={error:B}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=C4e.buildBitArray(r),a=K4e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],l[0],l[1]];return new pl(s,null,null,c,qr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,l=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Mt;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(f){d=null,console.log(f)}return new XQ(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<i&&(d=!r.get(l),!!d);)l++;for(var f=0,h=l,A=l;A<i;A++)if(r.get(A)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=A;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new Mt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,l=this.startEnd[1]}else i=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Qa.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new ete(d,[i,l],i,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),l=0;l<i.length;l++)i[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var f=17,h=Xn.sum(new Int32Array(i))/f,A=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-A)/A>.3)throw new Mt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new Mt;b=1}else if(b>8){if(y>8.7)throw new Mt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var B=4*n.getValue()+(a?0:2)+(s?0:1)-1,P=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[B][2*c];_+=m[c]*E}P+=m[c]}for(var I=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[B][2*c+1];I+=p[c]*E}var O=_+I;if(P&1||P>13||P<4)throw new Mt;var S=(13-P)/2,j=e.SYMBOL_WIDEST[S],D=9-j,J=Ax.getRSSvalue(m,j,!0),ge=Ax.getRSSvalue(p,D,!1),se=e.EVEN_TOTAL_SUBSET[S],he=e.GSUM[S],me=J*se+ge+he;return new KE(me,O)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Xn.sum(new Int32Array(this.getOddCounts())),a=Xn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new Mt;i=!0}else{if(!f)throw new Mt;c=!0}else if(u===-1)if(d){if(f)throw new Mt;s=!0}else{if(!f)throw new Mt;l=!0}else if(u===0){if(d){if(!f)throw new Mt;n<a?(s=!0,c=!0):(i=!0,l=!0)}else if(f)throw new Mt}else throw new Mt;if(s){if(i)throw new Mt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Mt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Nm),W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X4e=function(t){W4e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(KE),Y4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YQ=function(t){Y4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=jB(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var A=h.value;if(A.getCount()>1)try{for(var m=(l=void 0,jB(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(A,g))return e.constructResult(A,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}throw new Mt},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var l=jB(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new yn,l=13-s.length;l>0;l--)i.append("0");i.append(s);for(var c=0,l=0;l<13;l++){var u=i.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new pl(i.toString(),null,0,[d[0],d[1],f[0],f[1]],qr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get(Va.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Rr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new X4e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)Ri.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Ri.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=Xn.sum(new Int32Array(s))/d,h=this.getOddCounts(),A=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(A[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=h.length-1;l>=0;l--)w*=9,w+=h[l],b+=h[l];for(var B=0,P=0,l=A.length-1;l>=0;l--)B*=9,B+=A[l],P+=A[l];var _=w+3*B;if(a){if(b&1||b>12||b<4)throw new Mt;var E=(12-b)/2,I=e.OUTSIDE_ODD_WIDEST[E],O=9-I,S=Ax.getRSSvalue(h,I,!1),j=Ax.getRSSvalue(A,O,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],J=e.OUTSIDE_GSUM[E];return new KE(S*D+j+J,_)}else{if(P&1||P>10||P<4)throw new Mt;var E=(10-P)/2,I=e.INSIDE_ODD_WIDEST[E],O=9-I,S=Ax.getRSSvalue(h,I,!0),j=Ax.getRSSvalue(A,O,!1),ge=e.INSIDE_ODD_TOTAL_SUBSET[E],J=e.INSIDE_GSUM[E];return new KE(j*ge+S+J,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,l=0;l<s&&(i=!r.get(l),n!==i);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(Nm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new Mt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),l=s[0]-1;l>=0&&i!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Qa.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=l,A=s[1];return a&&(h=r.getSize()-1-h,A=r.getSize()-1-A),new ete(f,[l,s[1]],h,A,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Xn.sum(new Int32Array(this.getOddCounts())),s=Xn.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(f){if(h)throw new Mt;l=!0}else{if(!h)throw new Mt;u=!0}else if(d===-1)if(f){if(h)throw new Mt;i=!0}else{if(!h)throw new Mt;c=!0}else if(d===0){if(f){if(!h)throw new Mt;a<s?(i=!0,u=!0):(l=!0,c=!0)}else if(h)throw new Mt}else throw new Mt;if(i){if(l)throw new Mt;Nm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Nm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Mt;Nm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Nm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Nm),J4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hx=function(t){J4e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Va.POSSIBLE_FORMATS):null,s=r&&r.get(Va.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(Va.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(qr.EAN_13)||a.includes(qr.UPC_A)||a.includes(qr.EAN_8)||a.includes(qr.UPC_E))&&n.readers.push(new PB(r)),a.includes(qr.CODE_39)&&n.readers.push(new QQ(s,i)),a.includes(qr.CODE_93)&&n.readers.push(new VQ),a.includes(qr.CODE_128)&&n.readers.push(new UQ),a.includes(qr.ITF)&&n.readers.push(new HQ),a.includes(qr.CODABAR)&&n.readers.push(new y4e),a.includes(qr.RSS_14)&&n.readers.push(new YQ),a.includes(qr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new z4e))),n.readers.length===0&&(n.readers.push(new PB(r)),n.readers.push(new QQ),n.readers.push(new VQ),n.readers.push(new PB(r)),n.readers.push(new UQ),n.readers.push(new HQ),n.readers.push(new YQ)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Mt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Ri),Z4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Z4e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new hx(n),r,n)||this}return e})(jv);var JQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ra=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),e3e=function(){function t(e,r,n,a,s,i){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),f=i.getECBlocks();try{for(var h=JQ(f),A=h.next();!A.done;A=h.next()){var m=A.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new pr;try{for(var s=JQ(t.VERSIONS),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new pr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ia(5,new ra(1,3))),new t(2,12,12,10,10,new ia(7,new ra(1,5))),new t(3,14,14,12,12,new ia(10,new ra(1,8))),new t(4,16,16,14,14,new ia(12,new ra(1,12))),new t(5,18,18,16,16,new ia(14,new ra(1,18))),new t(6,20,20,18,18,new ia(18,new ra(1,22))),new t(7,22,22,20,20,new ia(20,new ra(1,30))),new t(8,24,24,22,22,new ia(24,new ra(1,36))),new t(9,26,26,24,24,new ia(28,new ra(1,44))),new t(10,32,32,14,14,new ia(36,new ra(1,62))),new t(11,36,36,16,16,new ia(42,new ra(1,86))),new t(12,40,40,18,18,new ia(48,new ra(1,114))),new t(13,44,44,20,20,new ia(56,new ra(1,144))),new t(14,48,48,22,22,new ia(68,new ra(1,174))),new t(15,52,52,24,24,new ia(42,new ra(2,102))),new t(16,64,64,14,14,new ia(56,new ra(2,140))),new t(17,72,72,16,16,new ia(36,new ra(4,92))),new t(18,80,80,18,18,new ia(48,new ra(4,114))),new t(19,88,88,20,20,new ia(56,new ra(4,144))),new t(20,96,96,22,22,new ia(68,new ra(4,174))),new t(21,104,104,24,24,new ia(56,new ra(6,136))),new t(22,120,120,18,18,new ia(68,new ra(6,175))),new t(23,132,132,20,20,new ia(62,new ra(8,163))),new t(24,144,144,22,22,new ia(62,new ra(8,156),new ra(2,155))),new t(25,8,18,6,16,new ia(7,new ra(1,5))),new t(26,8,32,6,14,new ia(11,new ra(1,10))),new t(27,12,26,10,24,new ia(14,new ra(1,16))),new t(28,12,36,10,16,new ia(18,new ra(1,22))),new t(29,16,36,14,16,new ia(24,new ra(1,32))),new t(30,16,48,14,22,new ia(28,new ra(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),t3e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new pr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new pf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return e3e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new pr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new zr("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,l=n/s|0,c=i*a,u=l*s,d=new pf(u,c),f=0;f<i;++f)for(var h=f*a,A=0;A<l;++A)for(var m=A*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=A*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),ZQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=ZQ(u),f=d.next();!f.done;f=d.next()){var h=f.value;c+=h.getCount()}}catch(J){n={error:J}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var A=new Array(c),m=0;try{for(var p=ZQ(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=l.getECCodewords()+y;A[m++]=new t(y,new Uint8Array(b))}}catch(J){s={error:J}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=A[0].codewords.length,B=w-l.getECCodewords(),P=B-1,_=0,x=0;x<P;x++)for(var E=0;E<m;E++)A[E].codewords[x]=e[_++];for(var I=r.getVersionNumber()===24,O=I?8:m,E=0;E<O;E++)A[E].codewords[B-1]=e[_++];for(var S=A[0].codewords.length,x=B;x<S;x++)for(var E=0;E<m;E++){var j=I?(E+8)%m:E,D=I&&j>7?x-1:x;A[j].codewords[D]=e[_++]}if(_!==e.length)throw new zr;return A},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),nte=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new zr(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,l=e<i?e:i,c=i-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ni;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ni||(Ni={}));var n3e=function(){function t(){}return t.decode=function(e){var r=new nte(e),n=new yn,a=new yn,s=new Array,i=Ni.ASCII_ENCODE;do if(i===Ni.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case Ni.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ni.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ni.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ni.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ni.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new pr}i=Ni.ASCII_ENCODE}while(i!==Ni.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new d4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new pr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Ni.ASCII_ENCODE;if(s===129)return Ni.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return Ni.C40_ENCODE;case 231:return Ni.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ni.ANSIX12_ENCODE;case 239:return Ni.TEXT_ENCODE;case 240:return Ni.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new pr;break}}while(e.available()>0);return Ni.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new pr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new pr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new pr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new pr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new pr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new pr;break;default:throw new pr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new pr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new pr;for(var l=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new pr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(ku.decode(l,Un.ISO88591))}catch(u){throw new Zb("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),a3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s3e=function(){function t(){this.rsDecoder=new f4(nc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new t3e(e),s=a.getVersion(),i=a.readCodewords(),l=r3e.getDataBlocks(i,s),c=0;try{for(var u=a3e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),A=l.length,m=0;m<A;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*A+m]=g[y]}return n3e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Ai}for(var a=0;a<r;a++)e[a]=n[a]},t}(),i3e=function(){function t(e){this.image=e,this.rectangleDetector=new $T(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Mt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],l=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,i,l,c);return new S6(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Rr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Rr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Rr(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),f=new Rr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),A=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>A?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var h,A;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,l*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,i*4),A=t.shiftPoint(s,a,l*4),A=t.shiftPoint(A,r,i*4),[c,h,u,A]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,l){var c=I6.getInstance();return c.sampleGrid(e,i,l,.5,.5,i-.5,.5,i-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),l=Math.abs(i-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),f=-u/2,h=a<i?1:-1,A=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=A){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),f+=d,f>0){if(x===i)break;x+=h,f-=u}}return m},t}(),GE=function(){function t(){this.decoder=new s3e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Va.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new i3e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var l=n.getRawBytes(),c=new pl(n.getText(),l,8*l.length,a,qr.DATA_MATRIX,Qa.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Mo.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(Mo.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Mt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new Mt;var f=a/2;s+=f,l+=f;for(var h=new pf(u,d),A=0;A<d;A++)for(var m=s+A*a,p=0;p<u;p++)e.get(l+p*a,m)&&h.set(p,A);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Mt;var i=a-e[0];if(i===0)throw new Mt;return i},t.NO_POINTS=[],t}(),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){o3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new GE,r)||this}return e})(jv);var mx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(mx||(mx={}));var l3e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ys(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new zr;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(mx.L,"L",1),t.M=new t(mx.M,"M",0),t.Q=new t(mx.Q,"Q",3),t.H=new t(mx.H,"H",2),t}(),c3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ate=function(){function t(e){this.errorCorrectionLevel=l3e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return _n.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var l=c3e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(i=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(i=u[1],s=f))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),u3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},It=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=u3e(a),i=s.next();!i.done;i=s.next()){var l=i.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ve=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),d3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zm=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=d3e(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new pr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new pr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new zr;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=ate.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new pf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new It(7,new Ve(1,19)),new It(10,new Ve(1,16)),new It(13,new Ve(1,13)),new It(17,new Ve(1,9))),new t(2,Int32Array.from([6,18]),new It(10,new Ve(1,34)),new It(16,new Ve(1,28)),new It(22,new Ve(1,22)),new It(28,new Ve(1,16))),new t(3,Int32Array.from([6,22]),new It(15,new Ve(1,55)),new It(26,new Ve(1,44)),new It(18,new Ve(2,17)),new It(22,new Ve(2,13))),new t(4,Int32Array.from([6,26]),new It(20,new Ve(1,80)),new It(18,new Ve(2,32)),new It(26,new Ve(2,24)),new It(16,new Ve(4,9))),new t(5,Int32Array.from([6,30]),new It(26,new Ve(1,108)),new It(24,new Ve(2,43)),new It(18,new Ve(2,15),new Ve(2,16)),new It(22,new Ve(2,11),new Ve(2,12))),new t(6,Int32Array.from([6,34]),new It(18,new Ve(2,68)),new It(16,new Ve(4,27)),new It(24,new Ve(4,19)),new It(28,new Ve(4,15))),new t(7,Int32Array.from([6,22,38]),new It(20,new Ve(2,78)),new It(18,new Ve(4,31)),new It(18,new Ve(2,14),new Ve(4,15)),new It(26,new Ve(4,13),new Ve(1,14))),new t(8,Int32Array.from([6,24,42]),new It(24,new Ve(2,97)),new It(22,new Ve(2,38),new Ve(2,39)),new It(22,new Ve(4,18),new Ve(2,19)),new It(26,new Ve(4,14),new Ve(2,15))),new t(9,Int32Array.from([6,26,46]),new It(30,new Ve(2,116)),new It(22,new Ve(3,36),new Ve(2,37)),new It(20,new Ve(4,16),new Ve(4,17)),new It(24,new Ve(4,12),new Ve(4,13))),new t(10,Int32Array.from([6,28,50]),new It(18,new Ve(2,68),new Ve(2,69)),new It(26,new Ve(4,43),new Ve(1,44)),new It(24,new Ve(6,19),new Ve(2,20)),new It(28,new Ve(6,15),new Ve(2,16))),new t(11,Int32Array.from([6,30,54]),new It(20,new Ve(4,81)),new It(30,new Ve(1,50),new Ve(4,51)),new It(28,new Ve(4,22),new Ve(4,23)),new It(24,new Ve(3,12),new Ve(8,13))),new t(12,Int32Array.from([6,32,58]),new It(24,new Ve(2,92),new Ve(2,93)),new It(22,new Ve(6,36),new Ve(2,37)),new It(26,new Ve(4,20),new Ve(6,21)),new It(28,new Ve(7,14),new Ve(4,15))),new t(13,Int32Array.from([6,34,62]),new It(26,new Ve(4,107)),new It(22,new Ve(8,37),new Ve(1,38)),new It(24,new Ve(8,20),new Ve(4,21)),new It(22,new Ve(12,11),new Ve(4,12))),new t(14,Int32Array.from([6,26,46,66]),new It(30,new Ve(3,115),new Ve(1,116)),new It(24,new Ve(4,40),new Ve(5,41)),new It(20,new Ve(11,16),new Ve(5,17)),new It(24,new Ve(11,12),new Ve(5,13))),new t(15,Int32Array.from([6,26,48,70]),new It(22,new Ve(5,87),new Ve(1,88)),new It(24,new Ve(5,41),new Ve(5,42)),new It(30,new Ve(5,24),new Ve(7,25)),new It(24,new Ve(11,12),new Ve(7,13))),new t(16,Int32Array.from([6,26,50,74]),new It(24,new Ve(5,98),new Ve(1,99)),new It(28,new Ve(7,45),new Ve(3,46)),new It(24,new Ve(15,19),new Ve(2,20)),new It(30,new Ve(3,15),new Ve(13,16))),new t(17,Int32Array.from([6,30,54,78]),new It(28,new Ve(1,107),new Ve(5,108)),new It(28,new Ve(10,46),new Ve(1,47)),new It(28,new Ve(1,22),new Ve(15,23)),new It(28,new Ve(2,14),new Ve(17,15))),new t(18,Int32Array.from([6,30,56,82]),new It(30,new Ve(5,120),new Ve(1,121)),new It(26,new Ve(9,43),new Ve(4,44)),new It(28,new Ve(17,22),new Ve(1,23)),new It(28,new Ve(2,14),new Ve(19,15))),new t(19,Int32Array.from([6,30,58,86]),new It(28,new Ve(3,113),new Ve(4,114)),new It(26,new Ve(3,44),new Ve(11,45)),new It(26,new Ve(17,21),new Ve(4,22)),new It(26,new Ve(9,13),new Ve(16,14))),new t(20,Int32Array.from([6,34,62,90]),new It(28,new Ve(3,107),new Ve(5,108)),new It(26,new Ve(3,41),new Ve(13,42)),new It(30,new Ve(15,24),new Ve(5,25)),new It(28,new Ve(15,15),new Ve(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new It(28,new Ve(4,116),new Ve(4,117)),new It(26,new Ve(17,42)),new It(28,new Ve(17,22),new Ve(6,23)),new It(30,new Ve(19,16),new Ve(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new It(28,new Ve(2,111),new Ve(7,112)),new It(28,new Ve(17,46)),new It(30,new Ve(7,24),new Ve(16,25)),new It(24,new Ve(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new It(30,new Ve(4,121),new Ve(5,122)),new It(28,new Ve(4,47),new Ve(14,48)),new It(30,new Ve(11,24),new Ve(14,25)),new It(30,new Ve(16,15),new Ve(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new It(30,new Ve(6,117),new Ve(4,118)),new It(28,new Ve(6,45),new Ve(14,46)),new It(30,new Ve(11,24),new Ve(16,25)),new It(30,new Ve(30,16),new Ve(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new It(26,new Ve(8,106),new Ve(4,107)),new It(28,new Ve(8,47),new Ve(13,48)),new It(30,new Ve(7,24),new Ve(22,25)),new It(30,new Ve(22,15),new Ve(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new It(28,new Ve(10,114),new Ve(2,115)),new It(28,new Ve(19,46),new Ve(4,47)),new It(28,new Ve(28,22),new Ve(6,23)),new It(30,new Ve(33,16),new Ve(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new It(30,new Ve(8,122),new Ve(4,123)),new It(28,new Ve(22,45),new Ve(3,46)),new It(30,new Ve(8,23),new Ve(26,24)),new It(30,new Ve(12,15),new Ve(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new It(30,new Ve(3,117),new Ve(10,118)),new It(28,new Ve(3,45),new Ve(23,46)),new It(30,new Ve(4,24),new Ve(31,25)),new It(30,new Ve(11,15),new Ve(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new It(30,new Ve(7,116),new Ve(7,117)),new It(28,new Ve(21,45),new Ve(7,46)),new It(30,new Ve(1,23),new Ve(37,24)),new It(30,new Ve(19,15),new Ve(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new It(30,new Ve(5,115),new Ve(10,116)),new It(28,new Ve(19,47),new Ve(10,48)),new It(30,new Ve(15,24),new Ve(25,25)),new It(30,new Ve(23,15),new Ve(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new It(30,new Ve(13,115),new Ve(3,116)),new It(28,new Ve(2,46),new Ve(29,47)),new It(30,new Ve(42,24),new Ve(1,25)),new It(30,new Ve(23,15),new Ve(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new It(30,new Ve(17,115)),new It(28,new Ve(10,46),new Ve(23,47)),new It(30,new Ve(10,24),new Ve(35,25)),new It(30,new Ve(19,15),new Ve(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new It(30,new Ve(17,115),new Ve(1,116)),new It(28,new Ve(14,46),new Ve(21,47)),new It(30,new Ve(29,24),new Ve(19,25)),new It(30,new Ve(11,15),new Ve(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new It(30,new Ve(13,115),new Ve(6,116)),new It(28,new Ve(14,46),new Ve(23,47)),new It(30,new Ve(44,24),new Ve(7,25)),new It(30,new Ve(59,16),new Ve(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new It(30,new Ve(12,121),new Ve(7,122)),new It(28,new Ve(12,47),new Ve(26,48)),new It(30,new Ve(39,24),new Ve(14,25)),new It(30,new Ve(22,15),new Ve(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new It(30,new Ve(6,121),new Ve(14,122)),new It(28,new Ve(6,47),new Ve(34,48)),new It(30,new Ve(46,24),new Ve(10,25)),new It(30,new Ve(2,15),new Ve(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new It(30,new Ve(17,122),new Ve(4,123)),new It(28,new Ve(29,46),new Ve(14,47)),new It(30,new Ve(49,24),new Ve(10,25)),new It(30,new Ve(24,15),new Ve(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new It(30,new Ve(4,122),new Ve(18,123)),new It(28,new Ve(13,46),new Ve(32,47)),new It(30,new Ve(48,24),new Ve(14,25)),new It(30,new Ve(42,15),new Ve(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new It(30,new Ve(20,117),new Ve(4,118)),new It(28,new Ve(40,47),new Ve(7,48)),new It(30,new Ve(43,24),new Ve(22,25)),new It(30,new Ve(10,15),new Ve(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new It(30,new Ve(19,118),new Ve(6,119)),new It(28,new Ve(18,47),new Ve(31,48)),new It(30,new Ve(34,24),new Ve(34,25)),new It(30,new Ve(20,15),new Ve(61,16)))],t}(),Yi;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Yi||(Yi={}));var eV=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Yi.DATA_MASK_000,new t(Yi.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Yi.DATA_MASK_001,new t(Yi.DATA_MASK_001,function(e,r){return(e&1)===0})],[Yi.DATA_MASK_010,new t(Yi.DATA_MASK_010,function(e,r){return r%3===0})],[Yi.DATA_MASK_011,new t(Yi.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Yi.DATA_MASK_100,new t(Yi.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Yi.DATA_MASK_101,new t(Yi.DATA_MASK_101,function(e,r){return e*r%6===0})],[Yi.DATA_MASK_110,new t(Yi.DATA_MASK_110,function(e,r){return e*r%6<3})],[Yi.DATA_MASK_111,new t(Yi.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),f3e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new pr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=ate.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new pr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Zm.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var l=Zm.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(l=Zm.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new pr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=eV.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var A=i?a-1-h:h,m=0;m<2;m++)s.get(f-m,A)||(d++,u<<=1,this.bitMatrix.get(f-m,A)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new pr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=eV.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),tV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,l;if(e.length!==r.getTotalCodewords())throw new zr;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=tV(d),h=f.next();!h.done;h=f.next()){var A=h.value;u+=A.getCount()}}catch(D){a={error:D}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=tV(d),x=g.next();!x.done;x=g.next())for(var A=x.value,y=0;y<A.getCount();y++){var b=A.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){i={error:D}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}for(var B=m[0].codewords.length,P=m.length-1;P>=0;){var _=m[P].codewords.length;if(_===B)break;P--}P++;for(var E=B-c.getECCodewordsPerBlock(),I=0,y=0;y<E;y++)for(var O=0;O<p;O++)m[O].codewords[y]=e[I++];for(var O=P;O<p;O++)m[O].codewords[E]=e[I++];for(var S=m[0].codewords.length,y=E;y<S;y++)for(var O=0;O<p;O++){var j=O<P?y:y+1;m[O].codewords[j]=e[I++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),gu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(gu||(gu={}));var za=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new zr;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(gu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(gu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(gu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(gu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(gu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(gu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(gu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(gu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(gu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(gu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),h3e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new nte(e),i=new yn,l=new Array,c=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(s.available()<4)h=za.TERMINATOR;else{var A=s.readBits(4);h=za.forBits(A)}switch(h){case za.TERMINATOR:break;case za.FNC1_FIRST_POSITION:case za.FNC1_SECOND_POSITION:f=!0;break;case za.STRUCTURED_APPEND:if(s.available()<16)throw new pr;c=s.readBits(8),u=s.readBits(8);break;case za.ECI:var m=t.parseECIValue(s);if(d=Ti.getCharacterSetECIByValue(m),d===null)throw new pr;break;case za.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case za.NUMERIC:t.decodeNumericSegment(s,i,x);break;case za.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,f);break;case za.BYTE:t.decodeByteSegment(s,i,x,d,l,a);break;case za.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new pr}break}}while(h!==za.TERMINATOR)}catch{throw new pr}return new d4(e,i.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new pr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/96<<8&4294967295|i%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(ku.decode(a,Un.GB2312))}catch(c){throw new pr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new pr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/192<<8&4294967295|i%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(ku.decode(a,Un.SHIFT_JIS))}catch(c){throw new pr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new pr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Un.guessEncoding(l,i):u=a.getName();try{r.append(ku.decode(l,u))}catch(d){throw new pr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new pr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new pr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new pr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new pr;var a=e.readBits(10);if(a>=1e3)throw new pr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new pr;var s=e.readBits(7);if(s>=100)throw new pr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new pr;var i=e.readBits(4);if(i>=10)throw new pr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new pr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),ste=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),rV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m3e=function(){function t(){this.rsDecoder=new f4(nc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(pf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new f3e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new ste(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=A3e.getDataBlocks(u,l,c),f=0;try{for(var h=rV(d),A=h.next();!A.done;A=h.next()){var m=A.value;f+=m.getNumDataCodewords()}}catch(P){n={error:P}}finally{try{A&&!A.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var x=rV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var B=0;B<w;B++)p[g++]=b[B]}}catch(P){s={error:P}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return h3e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Ai}for(var a=0;a<r;a++)e[a]=n[a]},t}(),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g3e=function(t){p3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,i,l)},e}(Rr),x3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v3e=function(){function t(e,r,n,a,s,i,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)i[1]++;else if(f===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,f=1}else i[++f]++;else f===1&&f++,i[f]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Mt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===i||l[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=x3e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,c,l))return h.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var A=new g3e(l,c,u);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null},t}(),y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b3e=function(t){y3e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,l,c,s)},e}(Rr),w3e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),R1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N3e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Va.TRY_HARDER)!==void 0,n=e!=null&&e.get(Va.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<i;h++)if(a.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,h,n);if(A===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,i,n);A===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Rr.orderBestPatterns(p),new w3e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,l=this.image;e>=i&&r>=i&&l.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!l.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&l.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(i=1;e+i<c&&r+i<u&&l.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!l.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&l.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(l)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(l),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var A=d[f];if(A.aboutEquals(c,l,i)){d[f]=A.combineEstimate(l,i,c),u=!0;break}}if(!u){var m=new b3e(i,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=R1(this.possibleCenters),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,l=this.possibleCenters.length;try{for(var c=R1(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=i/l,h=0;try{for(var A=R1(this.possibleCenters),m=A.next();!m.done;m=A.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Mt;var i=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=R1(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,A=h.getEstimatedModuleSize();c+=A,u+=A*A}}catch(B){e={error:B}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);i.sort(function(B,P){var _=Math.abs(P.getEstimatedModuleSize()-l),E=Math.abs(B.getEstimatedModuleSize()-l);return _<E?-1:_>E?1:0});for(var p=Math.max(.2*l,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=R1(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(P){n={error:P}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/i.length,i.sort(function(P,_){if(_.getCount()===P.getCount()){var E=Math.abs(_.getEstimatedModuleSize()-l),I=Math.abs(P.getEstimatedModuleSize()-l);return E<I?1:E>I?-1:0}else return _.getCount()-P.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),C3e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Va.NEED_RESULT_POINT_CALLBACK);var r=new N3e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Mt("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),l=Zm.getProvisionalVersionForDimension(i),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/c,A=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,A,m,p);break}catch(b){if(!(b instanceof Mt))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new S6(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=i-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),Zee.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=I6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=Xn.round(Rr.distance(e,r)/a),i=Xn.round(Rr.distance(e,n)/a),l=Math.floor((s+i)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Mt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,l=e-(n-e);l<0?(i=e/(e-l),l=0):l>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,h=0,A=n+d,m=e,p=r;m!==A;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return Xn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return h===2?Xn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-i<e*3)throw new Mt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Mt("Alignment bottom exceeds estimated module size.");var d=new v3e(this.image,i,c,l-i,u-c,e,this.resultPointCallback);return d.find()},t}(),qE=function(){function t(){this.decoder=new m3e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Va.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new C3e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof ste&&n.getOther().applyMirroredCorrection(a);var l=new pl(n.getText(),n.getRawBytes(),void 0,a,qr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Mo.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(Mo.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Mo.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Mo.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Mt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0];if(l>=c||s>=i)throw new Mt;if(i-s!==c-l&&(c=l+(i-s),c>=e.getWidth()))throw new Mt;var u=Math.round((c-l+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new Mt;if(d!==u)throw new Mt;var f=Math.floor(a/2);s+=f,l+=f;var h=l+Math.floor((u-1)*a)-c;if(h>0){if(h>f)throw new Mt;l-=h}var A=s+Math.floor((d-1)*a)-i;if(A>0){if(A>f)throw new Mt;s-=A}for(var m=new pf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],l=!0,c=0;s<a&&i<n;){if(l!==r.get(s,i)){if(++c===5)break;l=!l}s++,i++}if(s===a||i===n)throw new Mt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),_3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$n=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Xn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=_3e(e),l=i.next();!l.done;l=i.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=ki.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),E3e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),S3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I3e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new E3e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,l=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,S3e(s)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var l=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,i,u);if(f!=null)d=f;else{a++;break}}l[0]=new Rr(d[0],a),l[1]=new Rr(d[1],a),c=!0;break}}var h=a+1;if(c){for(var A=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,i,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,A=0;else{if(A>t.SKIPPED_ROW_COUNT_MAX)break;A++}}h-=A+1,l[2]=new Rr(f[0],h),l[3]=new Rr(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&ki.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,i,l){ki.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,h=i.length,A=s;d<a;d++){var m=e.get(d,n);if(m!==A)l[f]++;else{if(f===h-1){if(t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Qa.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,A=!A}}return f===h-1&&t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return 1/0;u+=A}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),B3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lm=function(){function t(e,r){if(r.length===0)throw new zr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Qa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=B3e(this.coefficients),i=s.next();!i.done;i=s.next()){var l=i.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Qa.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=this.field.add(r[l-i],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)i[l+u]=this.field.add(i[l+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new zr;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new yn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),P3e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new zr;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Jee;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),j3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T3e=function(t){j3e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new Lm(a,new Int32Array([0])),a.one=new Lm(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new zr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Lm(this,a)},e.PDF417_GF=new e($n.NUMBER_OF_CODEWORDS,3),e}(P3e),k3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F3e=function(){function t(){this.field=T3e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new Lm(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=k3e(n),A=h.next();!A.done;A=h.next()){var m=A.value,p=this.field.exp(e.length-1-m),g=new Lm(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(E){a={error:E}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new Lm(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],B=this.findErrorLocations(b),P=this.findErrorMagnitudes(w,b,B),u=0;u<B.length;u++){var _=e.length-1-this.field.log(B[u]);if(_<0)throw Ai.getChecksumInstance();e[_]=this.field.subtract(e[_],P[u])}return B.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,l=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=i,l=c,s.isZero())throw Ai.getChecksumInstance();i=u;for(var f=this.field.getZero(),h=s.getCoefficient(s.getDegree()),A=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),A);f=f.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw Ai.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw Ai.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var l=new Lm(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(l.evaluateAt(d));u[i]=this.field.multiply(f,h)}return u},t}(),GT=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,l=a==null||s==null;if(i&&l)throw new Mt;i?(r=new Rr(0,a.getY()),n=new Rr(0,s.getY())):l&&(a=new Rr(e.getWidth()-1,r.getY()),s=new Rr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Rr(c.getX(),u);n?a=d:i=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var A=new Rr(f.getX(),h);n?s=A:l=A}return new t(this.image,a,s,i,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),O3e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),P6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,l,c,u,d,f){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,A;switch(f){case"s":A=r[n];break;case"c":A=r[n][0];break;case"f":A=parseFloat(r[n]).toFixed(i);break;case"p":A=parseFloat(r[n]).toPrecision(i);break;case"e":A=parseFloat(r[n]).toExponential(i);break;case"x":A=parseInt(r[n]).toString(h||16);break;case"d":A=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";A.length<m;)A=l!==void 0?A+p:p+A;return A}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),D3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ite=function(){function t(e){this.boundingBox=new GT(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new P6,a=0;try{for(var s=D3e(this.codewords),i=s.next();!i.done;i=s.next()){var l=i.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),R3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},hy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,h){var A={getKey:function(){return f},getValue:function(){return h}};A.getValue()>n?(n=A.getValue(),a=[],a.push(A.getKey())):A.getValue()===n&&a.push(A.getKey())};try{for(var i=R3e(this.values.entries()),l=i.next();!l.done;l=i.next()){var c=M3e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return $n.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),L3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nV=function(t){L3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=TB(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,f=0,h=l;h<c;h++)if(n[h]!=null){var A=n[h],m=A.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=A.getRowNumber();else if(m<0||A.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=A.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=TB(this.getCodewords()),l=i.next();!l.done;l=i.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new hy,i=new hy,l=new hy,c=new hy;try{for(var u=TB(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,A=f.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),l.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<$n.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>$n.MAX_ROWS_IN_BARCODE)return null;var m=new O3e(s.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(ite),U3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q3e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=$n.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=U3e(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(i,h))return}}catch(A){a={error:A}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new P6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),V3e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),H3e=function(){function t(){}return t.initialize=function(){for(var e=0;e<$n.SYMBOL_TABLE.length;e++)for(var r=$n.SYMBOL_TABLE[e],n=r&1,a=0;a<$n.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array($n.BARS_IN_MODULE)),t.RATIOS_TABLE[e][$n.BARS_IN_MODULE-a-1]=Math.fround(s/$n.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Xn.sum(e),n=new Int32Array($n.BARS_IN_MODULE),a=0,s=0,i=0;i<$n.MODULES_IN_CODEWORD;i++){var l=r/(2*$n.MODULES_IN_CODEWORD)+i*r/$n.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return $n.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Xn.sum(e),n=new Array($n.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=HT.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<$n.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,i=$n.SYMBOL_TABLE[l])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array($n.SYMBOL_TABLE.length).map(function(e){return new Array($n.BARS_IN_MODULE)}),t}(),$3e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),aV=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G3e=function(t){K3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(hc),q3e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new G3e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new E6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W3e=function(t){z3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(hc),X3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y3e=function(t){X3e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new zr("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new W3e;a=_n.MAX_VALUE}this.buf=ki.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new E6;this.ensureCapacity(this.count+a),Qa.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ki.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(q3e),_a;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(_a||(_a={}));function ote(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var lC;function Fh(t){if(typeof lC>"u"&&(lC=ote()),lC===null)throw new Error("BigInt is not supported!");return lC(t)}function J3e(){var t=[];t[0]=Fh(1);var e=Fh(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var Z3e=function(){function t(){}return t.decode=function(e,r){var n=new yn(""),a=Ti.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],l=new $3e;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Ti.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new pr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw pr.getFormatInstance()}if(n.length()===0)throw pr.getFormatInstance();var c=new d4(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw pr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(_n.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new yn;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new yn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new yn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new yn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new yn;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(_n.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new yn;r=t.numericCompaction(e,r+1,h),n.setTimestamp(aV.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var A=new yn;r=t.numericCompaction(e,r+1,A),n.setChecksum(_n.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new yn;r=t.numericCompaction(e,r+1,m),n.setFileSize(aV.parseLong(m.toString()));break;default:throw pr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw pr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(ki.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=_a.ALPHA,i=_a.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case _a.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=_a.LOWER;break;case t.ML:s=_a.MIXED;break;case t.PS:i=s,s=_a.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break;case _a.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=_a.ALPHA_SHIFT;break;case t.ML:s=_a.MIXED;break;case t.PS:i=s,s=_a.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break;case _a.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=_a.PUNCT;break;case 26:u=" ";break;case t.LL:s=_a.LOWER;break;case t.AL:s=_a.ALPHA;break;case t.PS:i=s,s=_a.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break;case _a.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=_a.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break;case _a.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break;case _a.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=_a.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=_a.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var i=new Y3e,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(Fh(c)>>Fh(8*(5-h))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var A=0;A<l;A++)i.write(d[A]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(Fh(c)>>Fh(8*(5-h))));c=0,l=0}}break}return s.append(ku.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Fh(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*Fh(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new pr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ote()?J3e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),M1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e5e=function(){function t(){}return t.decode=function(e,r,n,a,s,i,l){for(var c=new GT(e,r,n,a,s),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,l)),f=t.merge(u,d),f==null)throw Mt.getNotFoundInstance();var A=f.getBoundingBox();if(h&&A!=null&&(A.getMinY()<c.getMinY()||A.getMaxY()>c.getMaxY()))c=A;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new nV(c,x===0):y=new ite(c),f.setDetectionResultColumn(x,y);for(var b=-1,w=b,B=c.getMinY();B<=c.getMaxY();B++){if(b=t.getStartColumn(f,x,B,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var P=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,B,i,l);P!=null&&(y.setCodeword(B,P),w=b,i=Math.min(i,P.getWidth()),l=Math.max(l,P.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=GT.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Q3e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var l=M1(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;i>0&&d[f]==null;f++)i--;for(var h=0,f=a.length-1;f>=0&&(h+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=M1(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var l=new nV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,i);h!=null&&(l.setCodeword(f,h),a?d=h.getStartX():d=h.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>$n.MAX_CODEWORDS_IN_BARCODE)throw Mt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var f=new Array(s.length),h=0;h<f.length;h++)f[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,$n.toIntArray(n),$n.toIntArray(i),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof Ai;if(!u)throw d}if(i.length===0)throw Ai.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw Ai.getChecksumInstance()}throw Ai.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)i[l][c]=new hy;var u=0;try{for(var d=M1(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var A=(a=void 0,M1(h.getCodewords())),m=A.next();!m.done;m=A.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,M1(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX())}}catch(A){s={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,f=Xn.sum(u);if(a)d=s+f;else{for(var h=0;h<u.length/2;h++){var A=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=A}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=H3e.getDecodedValue(u),p=$n.getCodeword(m);return p===-1?null:new V3e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,i)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,i);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw pr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=Z3e.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Ai.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw pr.getFormatInstance();var n=e[0];if(n>e.length)throw pr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw pr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new P6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new F3e,t}(),t5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zE=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Mt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof pr||n instanceof Ai?Mt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,l=I3e.detectMultiple(e,r,n);try{for(var c=t5e(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=e5e.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new pl(f.getText(),f.getRawBytes(),void 0,d,qr.PDF_417);h.putMetadata(Mo.ERROR_CORRECTION_LEVEL,f.getECLevel());var A=f.getOther();A!=null&&h.putMetadata(Mo.PDF417_EXTRA_METADATA,A),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?_n.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sV=function(t){r5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(hc),iV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lte=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Va.TRY_HARDER)!==void 0,n=e==null?null:e.get(Va.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===qr.UPC_A||i===qr.UPC_E||i===qr.EAN_13||i===qr.EAN_8||i===qr.CODABAR||i===qr.CODE_39||i===qr.CODE_93||i===qr.CODE_128||i===qr.ITF||i===qr.RSS_14||i===qr.RSS_EXPANDED});s&&!r&&a.push(new hx(e)),n.includes(qr.QR_CODE)&&a.push(new qE),n.includes(qr.DATA_MATRIX)&&a.push(new GE),n.includes(qr.AZTEC)&&a.push(new $E),n.includes(qr.PDF_417)&&a.push(new zE),s&&r&&a.push(new hx(e))}a.length===0&&(r||a.push(new hx(e)),a.push(new qE),a.push(new GE),a.push(new $E),a.push(new zE),r&&a.push(new hx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=iV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new sV("No readers where selected, nothing can be read.");try{for(var a=iV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(l){if(l instanceof sV)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Mt("No MultiFormat Readers were able to detect the code.")},t}(),n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){n5e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new lte;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(jv);var a5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){a5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new zE,r)||this}return e})(jv);var s5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){s5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new qE,r)||this}return e})(jv);var qT;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(qT||(qT={}));const cC=qT;var cte=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new x0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new x0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new zr("No error correction bytes");var n=e.length-r;if(n<=0)throw new zr("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Qa.arraycopy(e,0,s,0,n);var i=new x0(this.field,s);i=i.multiplyByMonomial(r,1);for(var l=i.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Qa.arraycopy(c,0,e,n+u,c.length)},t}(),my=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var l=n[i],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=0;l<a;l++){var c=n[i];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,i+6<s&&n[i][l]===1&&n[i+1][l]===0&&n[i+2][l]===1&&n[i+3][l]===1&&n[i+4][l]===1&&n[i+5][l]===0&&n[i+6][l]===1&&(t.isWhiteVertical(n,l,i-4,i)||t.isWhiteVertical(n,l,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=n[i],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new zr("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?i[l][d]:i[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),i5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o5e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=i5e(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;ki.fill(i,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==i[l])return!1;return!0},t.prototype.toString=function(){for(var e=new yn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),zT=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new yn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),l5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qa=function(t){l5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(hc),oV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new oo;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,h=8;n.setBoolean(f,h,l)}else{var f=8,h=n.getHeight()-7+(s-8);n.setBoolean(f,h,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new oo;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,l),r.setBoolean(r.getHeight()-11+i,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,l=n.getHeight()-1;i>0;){for(i===6&&(i-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&my.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,i-=2}if(a!==e.getSize())throw new qa("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-_n.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new zr("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!zT.isValidMaskPattern(r))throw new qa("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new oo;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new qa("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new qa("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new qa;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new qa;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new qa;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var l=a[s];if(l>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),c5e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),lV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return my.applyMaskPenaltyRule1(e)+my.applyMaskPenaltyRule2(e)+my.applyMaskPenaltyRule3(e)+my.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(cC.CHARACTER_SET)!==void 0;s&&(a=n.get(cC.CHARACTER_SET).toString());var i=this.chooseMode(e,a),l=new oo;if(i===za.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Ti.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(i,l);var u=new oo;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(cC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(cC.QR_VERSION).toString(),10);d=Zm.getVersionForNumber(f);var h=this.calculateBitsNeeded(i,l,u,d);if(!this.willFit(h,d,r))throw new qa("Data too big for requested version")}else d=this.recommendVersion(r,i,l,u);var A=new oo;A.appendBitArray(l);var m=i===za.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,A),A.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,A);var x=this.interleaveWithECBytes(A,d.getTotalCodewords(),g,p.getNumBlocks()),y=new zT;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new o5e(b,b),B=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(B),oV.buildMatrix(x,r,d,B,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Zm.getVersionForNumber(1)),i=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Ti.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return za.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return za.BYTE}return a?za.ALPHANUMERIC:n?za.NUMERIC:za.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=ku.encode(e,Ti.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,l=0;l<zT.NUM_MASK_PATTERNS;l++){oV.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=l)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Zm.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new qa("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),l=a-i,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new qa("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new qa("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new qa("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,A=u-f,m=d-h;if(A!==m)throw new qa("EC bytes mismatch");if(n!==c+l)throw new qa("RS blocks mismatch");if(e!==(f+A)*c+(h+m)*l)throw new qa("Total bytes mismatch");a<c?(s[0]=f,i[0]=A):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,l,c;if(e.getSizeInBytes()!==n)throw new qa("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,A=0;A<a;++A){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,A,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new c5e(x,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new qa("Data bytes does not match offset");for(var b=new oo,A=0;A<d;++A)try{for(var w=(s=void 0,lV(h)),B=w.next();!B.done;B=w.next()){var P=B.value,x=P.getDataBytes();A<x.length&&b.appendBits(x[A],8)}}catch(O){s={error:O}}finally{try{B&&!B.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var A=0;A<f;++A)try{for(var _=(l=void 0,lV(h)),E=_.next();!E.done;E=_.next()){var P=E.value,y=P.getErrorCorrectionBytes();A<y.length&&b.appendBits(y[A],8)}}catch(O){l={error:O}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new qa("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new cte(nc.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new qa(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case za.NUMERIC:t.appendNumericBytes(e,n);break;case za.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case za.BYTE:t.append8BitBytes(e,n,a);break;case za.KANJI:t.appendKanjiBytes(e,n);break;default:throw new qa("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+l,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new qa;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new qa;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=ku.encode(e,n)}catch(c){throw new qa(c)}for(var s=0,i=a.length;s!==i;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=ku.encode(e,Ti.SJIS)}catch(f){throw new qa(f)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,l=n[s+1]&255,c=i<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new qa("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(za.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ti.UTF8.getName(),t})();var u5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){u5e(e,t);function e(r,n,a,s,i,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+l>n||i+c>a)throw new zr("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Qa.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Qa.arraycopy(this.yuvData,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Qa.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var l=i+r/2,c=i,u=i+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new u4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Jb);var d5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){d5e(e,t);function e(r,n,a,s,i,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),h=0;h<d;h++){var A=r[h],m=A>>16&255,p=A>>7&510,g=A&255;f[h]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new zr("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Qa.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Qa.arraycopy(this.luminances,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Qa.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new u4(this)},e})(Jb);var f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A5e=function(t){f5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Ti),h5e=function(){function t(){}return t.ISO_8859_1=Ti.ISO8859_1,t}(),WT,m5e=301,p5e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=m5e);return{LOG:t,ALOG:e}};WT=p5e([],[]),WT.LOG;WT.ALOG;var cV;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(cV||(cV={}));var uV=129,ute=230,g5e=231,x5e=235,v5e=236,y5e=237,b5e=238,w5e=239,N5e=240,kB=254,C5e=254,dV="[)>05",fV="[)>06",AV="",Aa=0,Eo=1,Sl=2,Ci=3,eo=4,rl=5,_5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Aa},t.prototype.encode=function(e){var r=ud.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=ud.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case rl:e.writeCodeword(g5e),e.signalEncoderChange(rl);return;case Eo:e.writeCodeword(ute),e.signalEncoderChange(Eo);return;case Ci:e.writeCodeword(b5e),e.signalEncoderChange(Ci);break;case Sl:e.writeCodeword(w5e),e.signalEncoderChange(Sl);break;case eo:e.writeCodeword(N5e),e.signalEncoderChange(eo);break;default:throw new Error("Illegal mode: "+a)}else ud.isExtendedASCII(n)?(e.writeCodeword(x5e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(ud.isDigit(e)&&ud.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),E5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return rl},t.prototype.encode=function(e){var r=new yn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=ud.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Aa);break}}var s=r.length()-1,i=1,l=e.getCodewordCount()+s+i;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Un.getCharAt(s));else if(s<=1555)r.setCharAt(0,Un.getCharAt(Math.floor(s/250)+249)),r.insert(1,Un.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),j6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Eo},t.prototype.encodeMaximal=function(e){for(var r=new yn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(ute),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new yn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var l=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new yn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=ud.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Aa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(kB)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(kB),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(kB)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Aa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new yn;return s.append(n),s.append(a),s.toString()},t}(),S5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return eo},t.prototype.encode=function(e){for(var r=new yn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=ud.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Aa);break}}}r.append(Un.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(l)}finally{e.signalEncoderChange(Aa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Un.getCharAt(e-64)):ud.illegalCharacter(Un.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+i,c=l>>16&255,u=l>>8&255,d=l&255,f=new yn;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),I5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aa=function(){function t(e,r,n,a,s,i,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=B5e(j5e),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){i={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),P5e=function(t){I5e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(aa),j5e=[new aa(!1,3,5,8,8,1),new aa(!1,5,7,10,10,1),new aa(!0,5,7,16,6,1),new aa(!1,8,10,12,12,1),new aa(!0,10,11,14,6,2),new aa(!1,12,12,14,14,1),new aa(!0,16,14,24,10,1),new aa(!1,18,14,16,16,1),new aa(!1,22,18,18,18,1),new aa(!0,22,18,16,10,2),new aa(!1,30,20,20,20,1),new aa(!0,32,24,16,14,2),new aa(!1,36,24,22,22,1),new aa(!1,44,28,24,24,1),new aa(!0,49,28,22,14,2),new aa(!1,62,36,14,14,4),new aa(!1,86,42,16,16,4),new aa(!1,114,48,18,18,4),new aa(!1,144,56,20,20,4),new aa(!1,174,68,22,22,4),new aa(!1,204,84,24,24,4,102,42),new aa(!1,280,112,14,14,16,140,56),new aa(!1,368,144,16,16,16,92,36),new aa(!1,456,192,18,18,16,114,48),new aa(!1,576,224,20,20,16,144,56),new aa(!1,696,272,22,22,16,174,68),new aa(!1,816,336,24,24,16,136,56),new aa(!1,1050,408,18,18,36,175,68),new aa(!1,1304,496,20,20,36,163,62),new P5e],T5e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new yn,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new yn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=aa.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),k5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F5e=function(t){k5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ci},e.prototype.encode=function(r){for(var n=new yn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=ud.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(Aa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):ud.illegalCharacter(Un.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(C5e),r.getNewEncoding()<0&&r.signalEncoderChange(Aa)},e}(j6),O5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D5e=function(t){O5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Sl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(j6),ud=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=uV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new j6,l=[new _5e,i,new D5e,new F5e,new S5e,new E5e],c=new T5e(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(dV)&&e.endsWith(AV)?(c.writeCodeword(v5e),c.setSkipAtEnd(2),c.pos+=dV.length):e.startsWith(fV)&&e.endsWith(AV)&&(c.writeCodeword(y5e),c.setSkipAtEnd(2),c.pos+=fV.length);var u=Aa;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Aa&&u!==rl&&u!==eo&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<f&&h.append(uV);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Ci&&a===Ci){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return Aa}else if(n===eo&&a===eo){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return Aa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Aa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),l=[];;){if(r+s===e.length){ki.fill(i,0),ki.fill(l,0);var c=this.findMinimums(a,l,_n.MAX_VALUE,i),u=this.getMinimumCount(i);if(l[Aa]===c)return Aa;if(u===1){if(i[rl]>0)return rl;if(i[eo]>0)return eo;if(i[Sl]>0)return Sl;if(i[Ci]>0)return Ci}return Eo}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Aa]+=.5:this.isExtendedASCII(d)?(a[Aa]=Math.ceil(a[Aa]),a[Aa]+=2):(a[Aa]=Math.ceil(a[Aa]),a[Aa]++),this.isNativeC40(d)?a[Eo]+=2/3:this.isExtendedASCII(d)?a[Eo]+=8/3:a[Eo]+=4/3,this.isNativeText(d)?a[Sl]+=2/3:this.isExtendedASCII(d)?a[Sl]+=8/3:a[Sl]+=4/3,this.isNativeX12(d)?a[Ci]+=2/3:this.isExtendedASCII(d)?a[Ci]+=13/3:a[Ci]+=10/3,this.isNativeEDIFACT(d)?a[eo]+=3/4:this.isExtendedASCII(d)?a[eo]+=17/4:a[eo]+=13/4,this.isSpecialB256(d)?a[rl]+=4:a[rl]++,s>=4){if(ki.fill(i,0),ki.fill(l,0),this.findMinimums(a,l,_n.MAX_VALUE,i),l[Aa]<this.min(l[rl],l[Eo],l[Sl],l[Ci],l[eo]))return Aa;if(l[rl]<l[Aa]||l[rl]+1<this.min(l[Eo],l[Sl],l[Ci],l[eo]))return rl;if(l[eo]+1<this.min(l[rl],l[Eo],l[Sl],l[Ci],l[Aa]))return eo;if(l[Sl]+1<this.min(l[rl],l[Eo],l[eo],l[Ci],l[Aa]))return Sl;if(l[Ci]+1<this.min(l[rl],l[Eo],l[eo],l[Sl],l[Aa]))return Ci;if(l[Eo]+1<this.min(l[Aa],l[rl],l[eo],l[Sl])){if(l[Eo]<l[Ci])return Eo;if(l[Eo]===l[Ci]){for(var f=r+s+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Ci;if(!this.isNativeX12(h))break;f++}return Eo}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,ki.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=_n.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),FB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hV=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return ku.encode(e,this.charset)!=null}catch{return!1}},t}(),R5e=function(){function t(e,r,n){var a,s,i,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new hV(A5e.forName(I))}),this.encoders=[];var d=[];d.push(new hV(h5e.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var A=!1;try{for(var m=(a=void 0,FB(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){A=!0;break}}}catch(I){a={error:I}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!A)try{for(var b=(i=void 0,FB(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),A=!0;break}}}catch(I){i={error:I}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(i)throw i.error}}A||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var B=0;try{for(var P=FB(d),_=P.next();!_.done;_=P.next()){var g=_.value;this.encoders[B++]=g}}catch(I){c={error:I}}finally{try{_&&!_.done&&(u=P.return)&&u.call(P)}finally{if(c)throw c.error}}}var E=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return ku.encode(Un.getCharAt(e),this.encoders[r].name)},t}(),M5e=3,L5e=function(){function t(e,r,n){this.fnc1=n;var a=new R5e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new yn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===i||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===i||r.canEncode(l,d))&&this.addEdge(n,a+1,new mV(l,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new mV[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var l=0;l<r.length();l++)s[i][l]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][l],n);for(var l=0;l<r.length();l++)s[i-1][l]=null}for(var c=-1,u=_n.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=s[a][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var A=r.encode(h.c,h.encoderIndex),i=A.length-1;i>=0;i--)f.unshift(A[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=f[i];return p},t}(),mV=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(i+=M5e),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),U5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var pV;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(pV||(pV={}));(function(t){U5e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=i,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(L5e);var Q5e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),gV=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),V5e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),H5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T6=function(t){H5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+_n.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(V5e),$5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K5e=function(t){$5e(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(T6);function G5e(t,e,r){return new K5e(t,e,r)}function L1(t,e,r){return new T6(t,e,r)}var q5e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],v0=0,WE=1,Bu=2,dte=3,of=4,z5e=new T6(null,0,0),OB=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],W5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function X5e(t){var e,r;try{for(var n=W5e(t),a=n.next();!a.done;a=n.next()){var s=a.value;ki.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[v0][of]=0,t[WE][of]=0,t[WE][v0]=28,t[dte][of]=0,t[Bu][of]=0,t[Bu][v0]=15,t}var fte=X5e(ki.createInt32Array(6,6)),Y5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J5e=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=OB[this.mode][e];a=L1(a,s&65535,s>>16),n+=s>>16}var i=e===Bu?4:5;return a=L1(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Bu?4:5;return n=L1(n,fte[this.mode][e],a),n=L1(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===of||this.mode===Bu){var s=OB[n][v0];r=L1(r,s&65535,s>>16),a+=s>>16,n=v0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+i);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=G5e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(OB[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new oo;try{for(var l=Y5e(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return Un.format("%s bits=%d bytes=%d",q5e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(z5e,v0,0,0),t}();function Z5e(t){var e=Un.getCharCode(" "),r=Un.getCharCode("."),n=Un.getCharCode(",");t[v0][e]=1;for(var a=Un.getCharCode("Z"),s=Un.getCharCode("A"),i=s;i<=a;i++)t[v0][i]=i-s+2;t[WE][e]=1;for(var l=Un.getCharCode("z"),c=Un.getCharCode("a"),i=c;i<=l;i++)t[WE][i]=i-c+2;t[Bu][e]=1;for(var u=Un.getCharCode("9"),d=Un.getCharCode("0"),i=d;i<=u;i++)t[Bu][i]=i-d+2;t[Bu][n]=12,t[Bu][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[dte][Un.getCharCode(f[h])]=h;for(var A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<A.length;h++)Un.getCharCode(A[h])>0&&(t[of][Un.getCharCode(A[h])]=h);return t}var DB=Z5e(ki.createInt32Array(5,256)),uC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eBe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Un.getCharCode(" "),r=Un.getCharCode(`
`),n=gV.singletonList(J5e.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Un.getCharCode("\r"):s=i===r?2:0;break;case Un.getCharCode("."):s=i===e?3:0;break;case Un.getCharCode(","):s=i===e?4:0;break;case Un.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=gV.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=uC(e),l=i.next();!l.done;l=i.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=DB[e.getMode()][a]>0,i=null,l=0;l<=of;l++){var c=DB[l][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||l===e.getMode()||l===Bu){var u=i.latchAndAppend(l,c);n.push(u)}if(!s&&fte[e.getMode()][l]>=0){var d=i.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||DB[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var l=uC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(of,n)),e.getMode()!==of&&a.push(s.shiftAndAppend(of,n)),n===3||n===4){var i=s.latchAndAppend(Bu,16-n).latchAndAppend(Bu,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var l=uC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,uC(i)),A=h.next();!A.done;A=h.next()){var m=A.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t}(),tBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new eBe(e).encode(),s=_n.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new zr(Un.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var h=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>h)throw new zr("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new zr("Data to large for user specified layer")}else{d=0,f=null;for(var A=0;;A++){if(A>t.MAX_NB_BITS)throw new zr("Data too large for an Aztec code");if(l=A<=3,c=l?A+1:A,u=t.totalBitsInLayer(c,l),!(i>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var h=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=h)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var A=0;A<y.length;A++)y[A]=A}else{b=x+1+2*_n.truncDivision(_n.truncDivision(x,2)-1,15);for(var w=_n.truncDivision(x,2),B=_n.truncDivision(b,2),A=0;A<w;A++){var P=A+_n.truncDivision(A,15);y[w-A-1]=B-P-1,y[w+A]=B+P+1}}for(var _=new pf(b),A=0,E=0;A<c;A++){for(var I=(c-A)*4+(l?9:12),O=0;O<I;O++)for(var S=O*2,j=0;j<2;j++)m.get(E+S+j)&&_.set(y[A*2+j],y[A*2+O]),m.get(E+I*2+S+j)&&_.set(y[A*2+O],y[x-1-A*2-j]),m.get(E+I*4+S+j)&&_.set(y[x-1-A*2-j],y[x-1-A*2-O]),m.get(E+I*6+S+j)&&_.set(y[x-1-A*2-O],y[A*2+j]);E+=I*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,_n.truncDivision(b,2),5);else{t.drawBullsEye(_,_n.truncDivision(b,2),7);for(var A=0,O=0;A<_n.truncDivision(x,2)-1;A+=15,O+=16)for(var j=_n.truncDivision(b,2)&1;j<b;j+=2)_.set(_n.truncDivision(b,2)-O,j),_.set(_n.truncDivision(b,2)+O,j),_.set(j,_n.truncDivision(b,2)-O),_.set(j,_n.truncDivision(b,2)+O)}var D=new Q5e;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(_),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new oo;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=_n.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var l=s-3+i;a.get(i)&&e.set(l,s-5),a.get(i+7)&&e.set(s+5,l),a.get(20-i)&&e.set(l,s+5),a.get(27-i)&&e.set(s-5,l)}else for(var i=0;i<10;i++){var l=s-5+i+_n.truncDivision(i,5);a.get(i)&&e.set(l,s-7),a.get(i+10)&&e.set(s+7,l),a.get(29-i)&&e.set(l,s+7),a.get(39-i)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,l=new cte(t.getGF(n)),c=_n.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-i);var d=r%n,f=new oo;f.appendBits(0,d);try{for(var h=tBe(Array.from(u)),A=h.next();!A.done;A=h.next()){var m=A.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return nc.AZTEC_PARAM;case 6:return nc.AZTEC_DATA_6;case 8:return nc.AZTEC_DATA_8;case 10:return nc.AZTEC_DATA_10;case 12:return nc.AZTEC_DATA_12;default:throw new zr("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new oo,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var l=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),i--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var rBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nBe=function(t){rBe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,l=0,c=r.length;i<c;i+=4,l++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var f=r[i],h=r[i+1],A=r[i+2];u=306*f+601*h+117*A+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new u4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Jb);function Ate(){return typeof navigator<"u"}function aBe(){return Ate()&&!!navigator.mediaDevices}function sBe(){return!!(aBe()&&navigator.mediaDevices.enumerateDevices)}var px=function(){return px=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},px.apply(this,arguments)},ys=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},bs=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},RB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iBe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Tv=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=px(px({},iBe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Va.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return ys(this,void 0,void 0,function(){return bs(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=RB(a),i=s.next();!i.done;i=s.next()){var l=i.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ys("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ys("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new nBe(e),n=new Yee(r);return new Xee(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Ys("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return ys(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return bs(this,function(A){switch(A.label){case 0:if(!Ate())throw new Error("Can't enumerate devices, navigator is not present.");if(!sBe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=RB(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return ys(this,void 0,void 0,function(){var n;return bs(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var l=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),ys(this,void 0,void 0,function(){var a;return bs(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Ys("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:if(!e)throw new Ys("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:if(!e)throw new Ys("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ys(this,void 0,void 0,function(){var a,s;return bs(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return ys(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h,A=this;return bs(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,i),c=e.getVideoTracks(),u=px(px({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return ys(this,void 0,void 0,function(){var x,y,b,w,B,P,_;return bs(this,function(E){switch(E.label){case 0:x=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),y=RB(x),b=y.next(),E.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:E.sent(),E.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return B=E.sent(),P={error:B},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(P)throw P.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return ys(A,void 0,void 0,function(){return bs(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return ys(A,void 0,void 0,function(){return bs(this,function(p){switch(p.label){case 0:return l.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ys(this,void 0,void 0,function(){var a,s;return bs(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return ys(this,void 0,void 0,function(){var n,a;return bs(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ys("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return ys(this,void 0,void 0,function(){var n,a,s,i;return bs(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ys("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ys(this,void 0,void 0,function(){var n;return bs(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ys(this,void 0,void 0,function(){var n,a,s;return bs(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ys(this,void 0,void 0,function(){var n,a;return bs(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return ys(this,void 0,void 0,function(){var r,n;return bs(this,function(a){switch(a.label){case 0:if(!e)throw new Ys("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return ys(this,void 0,void 0,function(){var r,n;return bs(this,function(a){switch(a.label){case 0:if(!e)throw new Ys("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,l){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof Mt&&r||u instanceof Ai&&n||u instanceof pr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var A=a.decodeFromCanvas(s);r(A,void 0,f),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var m=x instanceof Ai,p=x instanceof pr,g=x instanceof Mt;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return ys(this,void 0,void 0,function(){var r;return bs(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),oBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){oBe(e,t);function e(r,n){return t.call(this,new $E,r,n)||this}return e})(Tv);var lBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){lBe(e,t);function e(r,n){return t.call(this,new hx(r),r,n)||this}return e})(Tv);var cBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){cBe(e,t);function e(r,n){return t.call(this,new GE,r,n)||this}return e})(Tv);var uBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G2=function(t){uBe(e,t);function e(r,n){var a=this,s=new lte;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Va.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Tv),dBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){dBe(e,t);function e(r,n){return t.call(this,new zE,r,n)||this}return e})(Tv);var fBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){fBe(e,t);function e(r,n){return t.call(this,new qE,r,n)||this}return e})(Tv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XE={};XE.version="0.18.5";var hte=1252,ABe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],k6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},F6=function(t){ABe.indexOf(t)!=-1&&(hte=k6[0]=t)};function hBe(){F6(1252)}var hd=function(t){F6(t)};function O6(){hd(1200),hBe()}function xV(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function mBe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function mte(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var py=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?mBe(t.slice(2)):e==254&&r==255?mte(t.slice(2)):e==65279?t.slice(1):t},dC=function(e){return String.fromCharCode(e)},vV=function(e){return String.fromCharCode(e)},q2,e0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function z2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=e0.charAt(s)+e0.charAt(i)+e0.charAt(l)+e0.charAt(c);return e}function Gc(t){var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=e0.indexOf(t.charAt(u++)),i=e0.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),l=e0.indexOf(t.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=e0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var bn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),UA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function T0(t){return bn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function yV(t){return bn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Fc=function(e){return bn?UA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function A4(t){if(typeof ArrayBuffer>"u")return Fc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function z0(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function pBe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function D6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return D6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var io=bn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:UA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function gBe(t){for(var e=[],r=0,n=t.length+250,a=T0(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=T0(65535),n=65530)}return e.push(a.slice(0,r)),io(e)}var Ll=/\u0000/g,gy=/[\u0001-\u0006]/g;function jx(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function md(t,e){var r=""+t;return r.length>=e?r:Ms("0",e-r.length)+r}function R6(t,e){var r=""+t;return r.length>=e?r:Ms(" ",e-r.length)+r}function YE(t,e){var r=""+t;return r.length>=e?r:r+Ms(" ",e-r.length)}function xBe(t,e){var r=""+Math.round(t);return r.length>=e?r:Ms("0",e-r.length)+r}function vBe(t,e){var r=""+t;return r.length>=e?r:Ms("0",e-r.length)+r}var bV=Math.pow(2,32);function kg(t,e){if(t>bV||t<-bV)return xBe(t,e);var r=Math.round(t);return vBe(r,e)}function JE(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var wV=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],MB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function yBe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},NV={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bBe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ZE(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Um(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=SBe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var pte=new Date(1899,11,31,0,0,0),wBe=pte.getTime(),NBe=new Date(1900,2,1,0,0,0);function gte(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=NBe&&(r+=24*60*60*1e3),(r-(wBe+(t.getTimezoneOffset()-pte.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function M6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function CBe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _Be(t){var e=t<0?12:11,r=M6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function EBe(t){var e=M6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function W2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=_Be(t):e===10?r=t.toFixed(10).substr(0,12):r=EBe(t),M6(CBe(r.toUpperCase()))}function Cp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):W2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Mu(14,gte(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function SBe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function IBe(t,e,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return MB[r.m-1][1];case 5:return MB[r.m-1][0];default:return MB[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return wV[r.q][0];default:return wV[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?md(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=md(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?md(c,u):"";return d}function t0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var xte=/%/g;function BBe(t,e,r){var n=e.replace(xte,""),a=e.length-n.length;return hA(t,n,r*Math.pow(10,2*a))+Ms("%",a)}function PBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return hA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function vte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+vte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var yte=/# (\?+)( ?)\/( ?)(\d+)/;function jBe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Ms(" ",t[1].length+1+t[4].length):R6(i,t[1].length)+t[2]+"/"+t[3]+md(l,t[4].length))}function TBe(t,e,r){return r+(e===0?"":""+e)+Ms(" ",t[1].length+2+t[4].length)}var bte=/^#*0*\.([0#]+)/,wte=/\).*[0#]/,Nte=/\(###\) ###\\?-####/;function jl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function CV(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function _V(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function kBe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function FBe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Au(t,e,r){if(t.charCodeAt(0)===40&&!e.match(wte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Au("n",n,r):"("+Au("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return PBe(t,e,r);if(e.indexOf("%")!==-1)return BBe(t,e,r);if(e.indexOf("E")!==-1)return vte(e,r);if(e.charCodeAt(0)===36)return"$"+Au(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+kg(c,e.length);if(e.match(/^[#?]+$/))return a=kg(r,0),a==="0"&&(a=""),a.length>e.length?a:jl(e.substr(0,e.length-a.length))+a;if(s=e.match(yte))return jBe(s,c,u);if(e.match(/^#+0+$/))return u+kg(c,e.length-e.indexOf("0"));if(s=e.match(bte))return a=CV(r,s[1].length).replace(/^([^\.]+)$/,"$1."+jl(s[1])).replace(/\.$/,"."+jl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ms("0",jl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+CV(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+t0(kg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Au(t,e,-r):t0(""+(Math.floor(r)+kBe(r,s[1].length)))+"."+md(_V(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Au(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=jx(Au(t,e.replace(/[\\-]/g,""),r)),i=0,jx(jx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Nte))return a=Au(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=ZE(c,Math.pow(10,i)-1,!1),a=""+u,d=hA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=YE(l[2],i),d.length<s[4].length&&(d=jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=ZE(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?R6(l[1],i)+s[2]+"/"+s[3]+YE(l[2],i):Ms(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=kg(r,0),e.length<=a.length?a:jl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return jl(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=_V(r,s[1].length),r<0?"-"+Au(t,e,-r):t0(FBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?md(0,3-m.length):"")+m})+"."+md(i,s[1].length);switch(e){case"###,##0.00":return Au(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var A=t0(kg(c,0));return A!=="0"?u+A:"";case"###,###.00":return Au(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Au(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function OBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return hA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function DBe(t,e,r){var n=e.replace(xte,""),a=e.length-n.length;return hA(t,n,r*Math.pow(10,2*a))+Ms("%",a)}function Cte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Cte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Jd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(wte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Jd("n",n,r):"("+Jd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return OBe(t,e,r);if(e.indexOf("%")!==-1)return DBe(t,e,r);if(e.indexOf("E")!==-1)return Cte(e,r);if(e.charCodeAt(0)===36)return"$"+Jd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+md(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:jl(e.substr(0,e.length-a.length))+a;if(s=e.match(yte))return TBe(s,c,u);if(e.match(/^#+0+$/))return u+md(c,e.length-e.indexOf("0"));if(s=e.match(bte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+jl(s[1])).replace(/\.$/,"."+jl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Ms("0",jl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+t0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Jd(t,e,-r):t0(""+r)+"."+Ms("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Jd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=jx(Jd(t,e.replace(/[\\-]/g,""),r)),i=0,jx(jx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Nte))return a=Jd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=ZE(c,Math.pow(10,i)-1,!1),a=""+u,d=hA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=YE(l[2],i),d.length<s[4].length&&(d=jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=ZE(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?R6(l[1],i)+s[2]+"/"+s[3]+YE(l[2],i):Ms(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:jl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return jl(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Jd(t,e,-r):t0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?md(0,3-m.length):"")+m})+"."+md(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var A=t0(""+c);return A!=="0"?u+A:"";default:if(e.match(/\.[0#?]*$/))return Jd(t,e.slice(0,e.lastIndexOf(".")),r)+jl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function hA(t,e,r){return(r|0)===r?Jd(t,e,r):Au(t,e,r)}function RBe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var _te=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kv(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":JE(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(_te))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function MBe(t,e,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,f,h="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!JE(t,i))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var A=t.charAt(++i),m=A==="("||A===")"?A:"t";a[a.length]={t:m,v:A},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=Um(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Um(e,r),u==null))return"";for(s=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=Um(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(_te)){if(u==null&&(u=Um(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",kv(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<t.length&&(l=t.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=IBe(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=Cp(e,r);break}var B="",P,_;if(b.length>0){b.charCodeAt(0)==40?(P=e<0&&b.charCodeAt(0)===45?-e:e,_=hA("n",b,P)):(P=e<0&&n>1?-e:e,_=hA("n",b,P),P<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var E=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){E=i;break}var I=a.length;if(E===a.length&&_.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=_.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=_.substr(0,w+1),w=-1),a[i].t="t",I=i);w>=0&&I<a.length&&(a[I].v=_.substr(0,w+1)+a[I].v)}else if(E!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,i=E;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")-1:a[i].v.length-1,B=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(B=_.charAt(w--)+B);a[i].v=B,a[i].t="t",I=i}for(w>=0&&I<a.length&&(a[I].v=_.substr(0,w+1)+a[I].v),w=_.indexOf(".")+1,i=E;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==E)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")+1:0,B=a[i].v.substr(0,d);d<a[i].v.length;++d)w<_.length&&(B+=_.charAt(w++));a[i].v=B,a[i].t="t",I=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(P=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=hA(a[i].t,a[i].v,P),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var EV=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function SV(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function LBe(t,e){var r=RBe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(EV),l=r[1].match(EV);return SV(e,i)?[n,r[0]]:SV(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function Mu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Yr)[t],n==null&&(n=r.table&&r.table[NV[t]]||Yr[NV[t]]),n==null&&(n=bBe[t]||"General");break}if(JE(n,0))return Cp(e,r);e instanceof Date&&(e=gte(e,r.date1904));var a=LBe(n,e);if(JE(a[1]))return Cp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return MBe(a[1],e,r,a[0])}function mA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Yr[r]==null){e<0&&(e=r);continue}if(Yr[r]==t){e=r;break}}e<0&&(e=391)}return Yr[e]=t,e}function h4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&mA(t[e],e)}function Fv(){Yr=yBe()}var UBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Ete=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function QBe(t){var e=typeof t=="number"?Yr[t]:t;return e=e.replace(Ete,"(\\d+)"),new RegExp("^"+e+"$")}function VBe(t,e,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(e.match(Ete)||[]).forEach(function(f,h){var A=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=A;break;case"d":s=A;break;case"h":i=A;break;case"s":c=A;break;case"m":i>=0?l=A:a=A;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var HBe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,E=new Array(256),I=0;I!=256;++I)_=I,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,E[I]=_;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(_){var E=0,I=0,O=0,S=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)S[O]=_[O];for(O=0;O!=256;++O)for(I=_[O],E=256+O;E<4096;E+=256)I=S[E]=I>>>8^_[I&255];var j=[];for(O=1;O!=16;++O)j[O-1]=typeof Int32Array<"u"?S.subarray(O*256,O*256+256):S.slice(O*256,O*256+256);return j}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],A=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(_,E){for(var I=E^-1,O=0,S=_.length;O<S;)I=I>>>8^r[(I^_.charCodeAt(O++))&255];return~I}function B(_,E){for(var I=E^-1,O=_.length-15,S=0;S<O;)I=b[_[S++]^I&255]^y[_[S++]^I>>8&255]^x[_[S++]^I>>16&255]^g[_[S++]^I>>>24]^p[_[S++]]^m[_[S++]]^A[_[S++]]^h[_[S++]]^f[_[S++]]^d[_[S++]]^u[_[S++]]^c[_[S++]]^l[_[S++]]^i[_[S++]]^s[_[S++]]^r[_[S++]];for(O+=15;S<O;)I=I>>>8^r[(I^_[S++])&255];return~I}function P(_,E){for(var I=E^-1,O=0,S=_.length,j=0,D=0;O<S;)j=_.charCodeAt(O++),j<128?I=I>>>8^r[(I^j)&255]:j<2048?(I=I>>>8^r[(I^(192|j>>6&31))&255],I=I>>>8^r[(I^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,D=_.charCodeAt(O++)&1023,I=I>>>8^r[(I^(240|j>>8&7))&255],I=I>>>8^r[(I^(128|j>>2&63))&255],I=I>>>8^r[(I^(128|D>>6&15|(j&3)<<4))&255],I=I>>>8^r[(I^(128|D&63))&255]):(I=I>>>8^r[(I^(224|j>>12&15))&255],I=I>>>8^r[(I^(128|j>>6&63))&255],I=I>>>8^r[(I^(128|j&63))&255]);return~I}return t.table=r,t.bstr=w,t.buf=B,t.str=P,t}(),Gr=function(){var e={};e.version="1.2.1";function r(re,ne){for(var Ae=re.split("/"),ue=ne.split("/"),Ne=0,Te=0,tt=Math.min(Ae.length,ue.length);Ne<tt;++Ne){if(Te=Ae[Ne].length-ue[Ne].length)return Te;if(Ae[Ne]!=ue[Ne])return Ae[Ne]<ue[Ne]?-1:1}return Ae.length-ue.length}function n(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:n(re.slice(0,-1));var ne=re.lastIndexOf("/");return ne===-1?re:re.slice(0,ne+1)}function a(re){if(re.charAt(re.length-1)=="/")return a(re.slice(0,-1));var ne=re.lastIndexOf("/");return ne===-1?re:re.slice(ne+1)}function s(re,ne){typeof ne=="string"&&(ne=new Date(ne));var Ae=ne.getHours();Ae=Ae<<6|ne.getMinutes(),Ae=Ae<<5|ne.getSeconds()>>>1,re.write_shift(2,Ae);var ue=ne.getFullYear()-1980;ue=ue<<4|ne.getMonth()+1,ue=ue<<5|ne.getDate(),re.write_shift(2,ue)}function i(re){var ne=re.read_shift(2)&65535,Ae=re.read_shift(2)&65535,ue=new Date,Ne=Ae&31;Ae>>>=5;var Te=Ae&15;Ae>>>=4,ue.setMilliseconds(0),ue.setFullYear(Ae+1980),ue.setMonth(Te-1),ue.setDate(Ne);var tt=ne&31;ne>>>=5;var ot=ne&63;return ne>>>=6,ue.setHours(ne),ue.setMinutes(ot),ue.setSeconds(tt<<1),ue}function l(re){Fo(re,0);for(var ne={},Ae=0;re.l<=re.length-4;){var ue=re.read_shift(2),Ne=re.read_shift(2),Te=re.l+Ne,tt={};switch(ue){case 21589:Ae=re.read_shift(1),Ae&1&&(tt.mtime=re.read_shift(4)),Ne>5&&(Ae&2&&(tt.atime=re.read_shift(4)),Ae&4&&(tt.ctime=re.read_shift(4))),tt.mtime&&(tt.mt=new Date(tt.mtime*1e3));break}re.l=Te,ne[ue]=tt}return ne}var c;function u(){return c||(c={})}function d(re,ne){if(re[0]==80&&re[1]==75)return We(re,ne);if((re[0]|32)==109&&(re[1]|32)==105)return te(re,ne);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var Ae=3,ue=512,Ne=0,Te=0,tt=0,ot=0,vt=0,yt=[],Et=re.slice(0,512);Fo(Et,0);var Ee=f(Et);switch(Ae=Ee[0],Ae){case 3:ue=512;break;case 4:ue=4096;break;case 0:if(Ee[1]==0)return We(re,ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ae)}ue!==512&&(Et=re.slice(0,ue),Fo(Et,28));var ut=re.slice(0,ue);h(Et,Ae);var Nt=Et.read_shift(4,"i");if(Ae===3&&Nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Nt);Et.l+=4,tt=Et.read_shift(4,"i"),Et.l+=4,Et.chk("00100000","Mini Stream Cutoff Size: "),ot=Et.read_shift(4,"i"),Ne=Et.read_shift(4,"i"),vt=Et.read_shift(4,"i"),Te=Et.read_shift(4,"i");for(var gt=-1,at=0;at<109&&(gt=Et.read_shift(4,"i"),!(gt<0));++at)yt[at]=gt;var zt=A(re,ue);g(vt,Te,zt,ue,yt);var Jt=y(zt,tt,yt,ue);Jt[tt].name="!Directory",Ne>0&&ot!==D&&(Jt[ot].name="!MiniFAT"),Jt[yt[0]].name="!FAT",Jt.fat_addrs=yt,Jt.ssz=ue;var Ot={},Vt=[],nr=[],Ht=[];b(tt,Jt,zt,Vt,Ne,Ot,nr,ot),m(nr,Ht,Vt),Vt.shift();var Nr={FileIndex:nr,FullPaths:Ht};return ne&&ne.raw&&(Nr.raw={header:ut,sectors:zt}),Nr}function f(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(J,"Header Signature: "),re.l+=16;var ne=re.read_shift(2,"u");return[re.read_shift(2,"u"),ne]}function h(re,ne){var Ae=9;switch(re.l+=2,Ae=re.read_shift(2)){case 9:if(ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Ae);break;case 12:if(ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ae)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function A(re,ne){for(var Ae=Math.ceil(re.length/ne)-1,ue=[],Ne=1;Ne<Ae;++Ne)ue[Ne-1]=re.slice(Ne*ne,(Ne+1)*ne);return ue[Ae-1]=re.slice(Ae*ne),ue}function m(re,ne,Ae){for(var ue=0,Ne=0,Te=0,tt=0,ot=0,vt=Ae.length,yt=[],Et=[];ue<vt;++ue)yt[ue]=Et[ue]=ue,ne[ue]=Ae[ue];for(;ot<Et.length;++ot)ue=Et[ot],Ne=re[ue].L,Te=re[ue].R,tt=re[ue].C,yt[ue]===ue&&(Ne!==-1&&yt[Ne]!==Ne&&(yt[ue]=yt[Ne]),Te!==-1&&yt[Te]!==Te&&(yt[ue]=yt[Te])),tt!==-1&&(yt[tt]=ue),Ne!==-1&&ue!=yt[ue]&&(yt[Ne]=yt[ue],Et.lastIndexOf(Ne)<ot&&Et.push(Ne)),Te!==-1&&ue!=yt[ue]&&(yt[Te]=yt[ue],Et.lastIndexOf(Te)<ot&&Et.push(Te));for(ue=1;ue<vt;++ue)yt[ue]===ue&&(Te!==-1&&yt[Te]!==Te?yt[ue]=yt[Te]:Ne!==-1&&yt[Ne]!==Ne&&(yt[ue]=yt[Ne]));for(ue=1;ue<vt;++ue)if(re[ue].type!==0){if(ot=ue,ot!=yt[ot])do ot=yt[ot],ne[ue]=ne[ot]+"/"+ne[ue];while(ot!==0&&yt[ot]!==-1&&ot!=yt[ot]);yt[ue]=-1}for(ne[0]+="/",ue=1;ue<vt;++ue)re[ue].type!==2&&(ne[ue]+="/")}function p(re,ne,Ae){for(var ue=re.start,Ne=re.size,Te=[],tt=ue;Ae&&Ne>0&&tt>=0;)Te.push(ne.slice(tt*j,tt*j+j)),Ne-=j,tt=Tm(Ae,tt*4);return Te.length===0?Lt(0):io(Te).slice(0,re.size)}function g(re,ne,Ae,ue,Ne){var Te=D;if(re===D){if(ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var tt=Ae[re],ot=(ue>>>2)-1;if(!tt)return;for(var vt=0;vt<ot&&(Te=Tm(tt,vt*4))!==D;++vt)Ne.push(Te);g(Tm(tt,ue-4),ne-1,Ae,ue,Ne)}}function x(re,ne,Ae,ue,Ne){var Te=[],tt=[];Ne||(Ne=[]);var ot=ue-1,vt=0,yt=0;for(vt=ne;vt>=0;){Ne[vt]=!0,Te[Te.length]=vt,tt.push(re[vt]);var Et=Ae[Math.floor(vt*4/ue)];if(yt=vt*4&ot,ue<4+yt)throw new Error("FAT boundary crossed: "+vt+" 4 "+ue);if(!re[Et])break;vt=Tm(re[Et],yt)}return{nodes:Te,data:LV([tt])}}function y(re,ne,Ae,ue){var Ne=re.length,Te=[],tt=[],ot=[],vt=[],yt=ue-1,Et=0,Ee=0,ut=0,Nt=0;for(Et=0;Et<Ne;++Et)if(ot=[],ut=Et+ne,ut>=Ne&&(ut-=Ne),!tt[ut]){vt=[];var gt=[];for(Ee=ut;Ee>=0;){gt[Ee]=!0,tt[Ee]=!0,ot[ot.length]=Ee,vt.push(re[Ee]);var at=Ae[Math.floor(Ee*4/ue)];if(Nt=Ee*4&yt,ue<4+Nt)throw new Error("FAT boundary crossed: "+Ee+" 4 "+ue);if(!re[at]||(Ee=Tm(re[at],Nt),gt[Ee]))break}Te[ut]={nodes:ot,data:LV([vt])}}return Te}function b(re,ne,Ae,ue,Ne,Te,tt,ot){for(var vt=0,yt=ue.length?2:0,Et=ne[re].data,Ee=0,ut=0,Nt;Ee<Et.length;Ee+=128){var gt=Et.slice(Ee,Ee+128);Fo(gt,64),ut=gt.read_shift(2),Nt=K6(gt,0,ut-yt),ue.push(Nt);var at={name:Nt,type:gt.read_shift(1),color:gt.read_shift(1),L:gt.read_shift(4,"i"),R:gt.read_shift(4,"i"),C:gt.read_shift(4,"i"),clsid:gt.read_shift(16),state:gt.read_shift(4,"i"),start:0,size:0},zt=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);zt!==0&&(at.ct=w(gt,gt.l-8));var Jt=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Jt!==0&&(at.mt=w(gt,gt.l-8)),at.start=gt.read_shift(4,"i"),at.size=gt.read_shift(4,"i"),at.size<0&&at.start<0&&(at.size=at.type=0,at.start=D,at.name=""),at.type===5?(vt=at.start,Ne>0&&vt!==D&&(ne[vt].name="!StreamData")):at.size>=4096?(at.storage="fat",ne[at.start]===void 0&&(ne[at.start]=x(Ae,at.start,ne.fat_addrs,ne.ssz)),ne[at.start].name=at.name,at.content=ne[at.start].data.slice(0,at.size)):(at.storage="minifat",at.size<0?at.size=0:vt!==D&&at.start!==D&&ne[vt]&&(at.content=p(at,ne[vt].data,(ne[ot]||{}).data))),at.content&&Fo(at.content,0),Te[Nt]=at,tt.push(at)}}function w(re,ne){return new Date((kc(re,ne+4)/1e7*Math.pow(2,32)+kc(re,ne)/1e7-11644473600)*1e3)}function B(re,ne){return u(),d(c.readFileSync(re),ne)}function P(re,ne){var Ae=ne&&ne.type;switch(Ae||bn&&Buffer.isBuffer(re)&&(Ae="buffer"),Ae||"base64"){case"file":return B(re,ne);case"base64":return d(Fc(Gc(re)),ne);case"binary":return d(Fc(re),ne)}return d(re,ne)}function _(re,ne){var Ae=ne||{},ue=Ae.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=ue+"/",re.FileIndex[0]={name:ue,type:5}),Ae.CLSID&&(re.FileIndex[0].clsid=Ae.CLSID),E(re)}function E(re){var ne="Sh33tJ5";if(!Gr.find(re,"/"+ne)){var Ae=Lt(4);Ae[0]=55,Ae[1]=Ae[3]=50,Ae[2]=54,re.FileIndex.push({name:ne,type:2,content:Ae,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+ne),I(re)}}function I(re,ne){_(re);for(var Ae=!1,ue=!1,Ne=re.FullPaths.length-1;Ne>=0;--Ne){var Te=re.FileIndex[Ne];switch(Te.type){case 0:ue?Ae=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:ue=!0,isNaN(Te.R*Te.L*Te.C)&&(Ae=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ae=!0);break;default:Ae=!0;break}}if(!(!Ae&&!ne)){var tt=new Date(1987,1,19),ot=0,vt=Object.create?Object.create(null):{},yt=[];for(Ne=0;Ne<re.FullPaths.length;++Ne)vt[re.FullPaths[Ne]]=!0,re.FileIndex[Ne].type!==0&&yt.push([re.FullPaths[Ne],re.FileIndex[Ne]]);for(Ne=0;Ne<yt.length;++Ne){var Et=n(yt[Ne][0]);ue=vt[Et],ue||(yt.push([Et,{name:a(Et).replace("/",""),type:1,clsid:se,ct:tt,mt:tt,content:null}]),vt[Et]=!0)}for(yt.sort(function(Nt,gt){return r(Nt[0],gt[0])}),re.FullPaths=[],re.FileIndex=[],Ne=0;Ne<yt.length;++Ne)re.FullPaths[Ne]=yt[Ne][0],re.FileIndex[Ne]=yt[Ne][1];for(Ne=0;Ne<yt.length;++Ne){var Ee=re.FileIndex[Ne],ut=re.FullPaths[Ne];if(Ee.name=a(ut).replace("/",""),Ee.L=Ee.R=Ee.C=-(Ee.color=1),Ee.size=Ee.content?Ee.content.length:0,Ee.start=0,Ee.clsid=Ee.clsid||se,Ne===0)Ee.C=yt.length>1?1:-1,Ee.size=0,Ee.type=5;else if(ut.slice(-1)=="/"){for(ot=Ne+1;ot<yt.length&&n(re.FullPaths[ot])!=ut;++ot);for(Ee.C=ot>=yt.length?-1:ot,ot=Ne+1;ot<yt.length&&n(re.FullPaths[ot])!=n(ut);++ot);Ee.R=ot>=yt.length?-1:ot,Ee.type=1}else n(re.FullPaths[Ne+1]||"")==n(ut)&&(Ee.R=Ne+1),Ee.type=2}}}function O(re,ne){var Ae=ne||{};if(Ae.fileType=="mad")return Ce(re,Ae);switch(I(re),Ae.fileType){case"zip":return ct(re,Ae)}var ue=function(Nt){for(var gt=0,at=0,zt=0;zt<Nt.FileIndex.length;++zt){var Jt=Nt.FileIndex[zt];if(Jt.content){var Ot=Jt.content.length;Ot>0&&(Ot<4096?gt+=Ot+63>>6:at+=Ot+511>>9)}}for(var Vt=Nt.FullPaths.length+3>>2,nr=gt+7>>3,Ht=gt+127>>7,Nr=nr+at+Vt+Ht,Or=Nr+127>>7,Fn=Or<=109?0:Math.ceil((Or-109)/127);Nr+Or+Fn+127>>7>Or;)Fn=++Or<=109?0:Math.ceil((Or-109)/127);var vn=[1,Fn,Or,Ht,Vt,at,gt,0];return Nt.FileIndex[0].size=gt<<6,vn[7]=(Nt.FileIndex[0].start=vn[0]+vn[1]+vn[2]+vn[3]+vn[4]+vn[5])+(vn[6]+7>>3),vn}(re),Ne=Lt(ue[7]<<9),Te=0,tt=0;{for(Te=0;Te<8;++Te)Ne.write_shift(1,ge[Te]);for(Te=0;Te<8;++Te)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Te=0;Te<3;++Te)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,ue[2]),Ne.write_shift(4,ue[0]+ue[1]+ue[2]+ue[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,ue[3]?ue[0]+ue[1]+ue[2]-1:D),Ne.write_shift(4,ue[3]),Ne.write_shift(-4,ue[1]?ue[0]-1:D),Ne.write_shift(4,ue[1]),Te=0;Te<109;++Te)Ne.write_shift(-4,Te<ue[2]?ue[1]+Te:-1)}if(ue[1])for(tt=0;tt<ue[1];++tt){for(;Te<236+tt*127;++Te)Ne.write_shift(-4,Te<ue[2]?ue[1]+Te:-1);Ne.write_shift(-4,tt===ue[1]-1?D:tt+1)}var ot=function(Nt){for(tt+=Nt;Te<tt-1;++Te)Ne.write_shift(-4,Te+1);Nt&&(++Te,Ne.write_shift(-4,D))};for(tt=Te=0,tt+=ue[1];Te<tt;++Te)Ne.write_shift(-4,he.DIFSECT);for(tt+=ue[2];Te<tt;++Te)Ne.write_shift(-4,he.FATSECT);ot(ue[3]),ot(ue[4]);for(var vt=0,yt=0,Et=re.FileIndex[0];vt<re.FileIndex.length;++vt)Et=re.FileIndex[vt],Et.content&&(yt=Et.content.length,!(yt<4096)&&(Et.start=tt,ot(yt+511>>9)));for(ot(ue[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,he.ENDOFCHAIN);for(tt=Te=0,vt=0;vt<re.FileIndex.length;++vt)Et=re.FileIndex[vt],Et.content&&(yt=Et.content.length,!(!yt||yt>=4096)&&(Et.start=tt,ot(yt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,he.ENDOFCHAIN);for(Te=0;Te<ue[4]<<2;++Te){var Ee=re.FullPaths[Te];if(!Ee||Ee.length===0){for(vt=0;vt<17;++vt)Ne.write_shift(4,0);for(vt=0;vt<3;++vt)Ne.write_shift(4,-1);for(vt=0;vt<12;++vt)Ne.write_shift(4,0);continue}Et=re.FileIndex[Te],Te===0&&(Et.start=Et.size?Et.start-1:D);var ut=Te===0&&Ae.root||Et.name;if(yt=2*(ut.length+1),Ne.write_shift(64,ut,"utf16le"),Ne.write_shift(2,yt),Ne.write_shift(1,Et.type),Ne.write_shift(1,Et.color),Ne.write_shift(-4,Et.L),Ne.write_shift(-4,Et.R),Ne.write_shift(-4,Et.C),Et.clsid)Ne.write_shift(16,Et.clsid,"hex");else for(vt=0;vt<4;++vt)Ne.write_shift(4,0);Ne.write_shift(4,Et.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,Et.start),Ne.write_shift(4,Et.size),Ne.write_shift(4,0)}for(Te=1;Te<re.FileIndex.length;++Te)if(Et=re.FileIndex[Te],Et.size>=4096)if(Ne.l=Et.start+1<<9,bn&&Buffer.isBuffer(Et.content))Et.content.copy(Ne,Ne.l,0,Et.size),Ne.l+=Et.size+511&-512;else{for(vt=0;vt<Et.size;++vt)Ne.write_shift(1,Et.content[vt]);for(;vt&511;++vt)Ne.write_shift(1,0)}for(Te=1;Te<re.FileIndex.length;++Te)if(Et=re.FileIndex[Te],Et.size>0&&Et.size<4096)if(bn&&Buffer.isBuffer(Et.content))Et.content.copy(Ne,Ne.l,0,Et.size),Ne.l+=Et.size+63&-64;else{for(vt=0;vt<Et.size;++vt)Ne.write_shift(1,Et.content[vt]);for(;vt&63;++vt)Ne.write_shift(1,0)}if(bn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function S(re,ne){var Ae=re.FullPaths.map(function(vt){return vt.toUpperCase()}),ue=Ae.map(function(vt){var yt=vt.split("/");return yt[yt.length-(vt.slice(-1)=="/"?2:1)]}),Ne=!1;ne.charCodeAt(0)===47?(Ne=!0,ne=Ae[0].slice(0,-1)+ne):Ne=ne.indexOf("/")!==-1;var Te=ne.toUpperCase(),tt=Ne===!0?Ae.indexOf(Te):ue.indexOf(Te);if(tt!==-1)return re.FileIndex[tt];var ot=!Te.match(gy);for(Te=Te.replace(Ll,""),ot&&(Te=Te.replace(gy,"!")),tt=0;tt<Ae.length;++tt)if((ot?Ae[tt].replace(gy,"!"):Ae[tt]).replace(Ll,"")==Te||(ot?ue[tt].replace(gy,"!"):ue[tt]).replace(Ll,"")==Te)return re.FileIndex[tt];return null}var j=64,D=-2,J="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],se="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:J,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function me(re,ne,Ae){u();var ue=O(re,Ae);c.writeFileSync(ne,ue)}function Z(re){for(var ne=new Array(re.length),Ae=0;Ae<re.length;++Ae)ne[Ae]=String.fromCharCode(re[Ae]);return ne.join("")}function ve(re,ne){var Ae=O(re,ne);switch(ne&&ne.type||"buffer"){case"file":return u(),c.writeFileSync(ne.filename,Ae),Ae;case"binary":return typeof Ae=="string"?Ae:Z(Ae);case"base64":return z2(typeof Ae=="string"?Ae:Z(Ae));case"buffer":if(bn)return Buffer.isBuffer(Ae)?Ae:UA(Ae);case"array":return typeof Ae=="string"?Fc(Ae):Ae}return Ae}var Se;function k(re){try{var ne=re.InflateRaw,Ae=new ne;if(Ae._processChunk(new Uint8Array([3,0]),Ae._finishFlushFlag),Ae.bytesRead)Se=re;else throw new Error("zlib does not expose bytesRead")}catch(ue){console.error("cannot use native zlib: "+(ue.message||ue))}}function F(re,ne){if(!Se)return ae(re,ne);var Ae=Se.InflateRaw,ue=new Ae,Ne=ue._processChunk(re.slice(re.l),ue._finishFlushFlag);return re.l+=ue.bytesRead,Ne}function H(re){return Se?Se.deflateRawSync(re):fe(re)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function R(re){var ne=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(ne>>16|ne>>8|ne)&255}for(var z=typeof Uint8Array<"u",le=z?new Uint8Array(256):[],K=0;K<256;++K)le[K]=R(K);function M(re,ne){var Ae=le[re&255];return ne<=8?Ae>>>8-ne:(Ae=Ae<<8|le[re>>8&255],ne<=16?Ae>>>16-ne:(Ae=Ae<<8|le[re>>16&255],Ae>>>24-ne))}function pe(re,ne){var Ae=ne&7,ue=ne>>>3;return(re[ue]|(Ae<=6?0:re[ue+1]<<8))>>>Ae&3}function X(re,ne){var Ae=ne&7,ue=ne>>>3;return(re[ue]|(Ae<=5?0:re[ue+1]<<8))>>>Ae&7}function G(re,ne){var Ae=ne&7,ue=ne>>>3;return(re[ue]|(Ae<=4?0:re[ue+1]<<8))>>>Ae&15}function ie(re,ne){var Ae=ne&7,ue=ne>>>3;return(re[ue]|(Ae<=3?0:re[ue+1]<<8))>>>Ae&31}function Ie(re,ne){var Ae=ne&7,ue=ne>>>3;return(re[ue]|(Ae<=1?0:re[ue+1]<<8))>>>Ae&127}function Re(re,ne,Ae){var ue=ne&7,Ne=ne>>>3,Te=(1<<Ae)-1,tt=re[Ne]>>>ue;return Ae<8-ue||(tt|=re[Ne+1]<<8-ue,Ae<16-ue)||(tt|=re[Ne+2]<<16-ue,Ae<24-ue)||(tt|=re[Ne+3]<<24-ue),tt&Te}function ze(re,ne,Ae){var ue=ne&7,Ne=ne>>>3;return ue<=5?re[Ne]|=(Ae&7)<<ue:(re[Ne]|=Ae<<ue&255,re[Ne+1]=(Ae&7)>>8-ue),ne+3}function st(re,ne,Ae){var ue=ne&7,Ne=ne>>>3;return Ae=(Ae&1)<<ue,re[Ne]|=Ae,ne+1}function lt(re,ne,Ae){var ue=ne&7,Ne=ne>>>3;return Ae<<=ue,re[Ne]|=Ae&255,Ae>>>=8,re[Ne+1]=Ae,ne+8}function _t(re,ne,Ae){var ue=ne&7,Ne=ne>>>3;return Ae<<=ue,re[Ne]|=Ae&255,Ae>>>=8,re[Ne+1]=Ae&255,re[Ne+2]=Ae>>>8,ne+16}function bt(re,ne){var Ae=re.length,ue=2*Ae>ne?2*Ae:ne+5,Ne=0;if(Ae>=ne)return re;if(bn){var Te=yV(ue);if(re.copy)re.copy(Te);else for(;Ne<re.length;++Ne)Te[Ne]=re[Ne];return Te}else if(z){var tt=new Uint8Array(ue);if(tt.set)tt.set(re);else for(;Ne<Ae;++Ne)tt[Ne]=re[Ne];return tt}return re.length=ue,re}function St(re){for(var ne=new Array(re),Ae=0;Ae<re;++Ae)ne[Ae]=0;return ne}function kt(re,ne,Ae){var ue=1,Ne=0,Te=0,tt=0,ot=0,vt=re.length,yt=z?new Uint16Array(32):St(32);for(Te=0;Te<32;++Te)yt[Te]=0;for(Te=vt;Te<Ae;++Te)re[Te]=0;vt=re.length;var Et=z?new Uint16Array(vt):St(vt);for(Te=0;Te<vt;++Te)yt[Ne=re[Te]]++,ue<Ne&&(ue=Ne),Et[Te]=0;for(yt[0]=0,Te=1;Te<=ue;++Te)yt[Te+16]=ot=ot+yt[Te-1]<<1;for(Te=0;Te<vt;++Te)ot=re[Te],ot!=0&&(Et[Te]=yt[ot+16]++);var Ee=0;for(Te=0;Te<vt;++Te)if(Ee=re[Te],Ee!=0)for(ot=M(Et[Te],ue)>>ue-Ee,tt=(1<<ue+4-Ee)-1;tt>=0;--tt)ne[ot|tt<<Ee]=Ee&15|Te<<4;return ue}var et=z?new Uint16Array(512):St(512),ce=z?new Uint16Array(32):St(32);if(!z){for(var Qe=0;Qe<512;++Qe)et[Qe]=0;for(Qe=0;Qe<32;++Qe)ce[Qe]=0}(function(){for(var re=[],ne=0;ne<32;ne++)re.push(5);kt(re,ce,32);var Ae=[];for(ne=0;ne<=143;ne++)Ae.push(8);for(;ne<=255;ne++)Ae.push(9);for(;ne<=279;ne++)Ae.push(7);for(;ne<=287;ne++)Ae.push(8);kt(Ae,et,288)})();var xe=function(){for(var ne=z?new Uint8Array(32768):[],Ae=0,ue=0;Ae<Y.length-1;++Ae)for(;ue<Y[Ae+1];++ue)ne[ue]=Ae;for(;ue<32768;++ue)ne[ue]=29;var Ne=z?new Uint8Array(259):[];for(Ae=0,ue=0;Ae<V.length-1;++Ae)for(;ue<V[Ae+1];++ue)Ne[ue]=Ae;function Te(ot,vt){for(var yt=0;yt<ot.length;){var Et=Math.min(65535,ot.length-yt),Ee=yt+Et==ot.length;for(vt.write_shift(1,+Ee),vt.write_shift(2,Et),vt.write_shift(2,~Et&65535);Et-- >0;)vt[vt.l++]=ot[yt++]}return vt.l}function tt(ot,vt){for(var yt=0,Et=0,Ee=z?new Uint16Array(32768):[];Et<ot.length;){var ut=Math.min(65535,ot.length-Et);if(ut<10){for(yt=ze(vt,yt,+(Et+ut==ot.length)),yt&7&&(yt+=8-(yt&7)),vt.l=yt/8|0,vt.write_shift(2,ut),vt.write_shift(2,~ut&65535);ut-- >0;)vt[vt.l++]=ot[Et++];yt=vt.l*8;continue}yt=ze(vt,yt,+(Et+ut==ot.length)+2);for(var Nt=0;ut-- >0;){var gt=ot[Et];Nt=(Nt<<5^gt)&32767;var at=-1,zt=0;if((at=Ee[Nt])&&(at|=Et&-32768,at>Et&&(at-=32768),at<Et))for(;ot[at+zt]==ot[Et+zt]&&zt<250;)++zt;if(zt>2){gt=Ne[zt],gt<=22?yt=lt(vt,yt,le[gt+1]>>1)-1:(lt(vt,yt,3),yt+=5,lt(vt,yt,le[gt-23]>>5),yt+=3);var Jt=gt<8?0:gt-4>>2;Jt>0&&(_t(vt,yt,zt-V[gt]),yt+=Jt),gt=ne[Et-at],yt=lt(vt,yt,le[gt]>>3),yt-=3;var Ot=gt<4?0:gt-2>>1;Ot>0&&(_t(vt,yt,Et-at-Y[gt]),yt+=Ot);for(var Vt=0;Vt<zt;++Vt)Ee[Nt]=Et&32767,Nt=(Nt<<5^ot[Et])&32767,++Et;ut-=zt-1}else gt<=143?gt=gt+48:yt=st(vt,yt,1),yt=lt(vt,yt,le[gt]),Ee[Nt]=Et&32767,++Et}yt=lt(vt,yt,0)-1}return vt.l=(yt+7)/8|0,vt.l}return function(vt,yt){return vt.length<8?Te(vt,yt):tt(vt,yt)}}();function fe(re){var ne=Lt(50+Math.floor(re.length*1.1)),Ae=xe(re,ne);return ne.slice(0,Ae)}var oe=z?new Uint16Array(32768):St(32768),Be=z?new Uint16Array(32768):St(32768),Me=z?new Uint16Array(128):St(128),Ze=1,Je=1;function nt(re,ne){var Ae=ie(re,ne)+257;ne+=5;var ue=ie(re,ne)+1;ne+=5;var Ne=G(re,ne)+4;ne+=4;for(var Te=0,tt=z?new Uint8Array(19):St(19),ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],vt=1,yt=z?new Uint8Array(8):St(8),Et=z?new Uint8Array(8):St(8),Ee=tt.length,ut=0;ut<Ne;++ut)tt[Q[ut]]=Te=X(re,ne),vt<Te&&(vt=Te),yt[Te]++,ne+=3;var Nt=0;for(yt[0]=0,ut=1;ut<=vt;++ut)Et[ut]=Nt=Nt+yt[ut-1]<<1;for(ut=0;ut<Ee;++ut)(Nt=tt[ut])!=0&&(ot[ut]=Et[Nt]++);var gt=0;for(ut=0;ut<Ee;++ut)if(gt=tt[ut],gt!=0){Nt=le[ot[ut]]>>8-gt;for(var at=(1<<7-gt)-1;at>=0;--at)Me[Nt|at<<gt]=gt&7|ut<<3}var zt=[];for(vt=1;zt.length<Ae+ue;)switch(Nt=Me[Ie(re,ne)],ne+=Nt&7,Nt>>>=3){case 16:for(Te=3+pe(re,ne),ne+=2,Nt=zt[zt.length-1];Te-- >0;)zt.push(Nt);break;case 17:for(Te=3+X(re,ne),ne+=3;Te-- >0;)zt.push(0);break;case 18:for(Te=11+Ie(re,ne),ne+=7;Te-- >0;)zt.push(0);break;default:zt.push(Nt),vt<Nt&&(vt=Nt);break}var Jt=zt.slice(0,Ae),Ot=zt.slice(Ae);for(ut=Ae;ut<286;++ut)Jt[ut]=0;for(ut=ue;ut<30;++ut)Ot[ut]=0;return Ze=kt(Jt,oe,286),Je=kt(Ot,Be,30),ne}function ke(re,ne){if(re[0]==3&&!(re[1]&3))return[T0(ne),2];for(var Ae=0,ue=0,Ne=yV(ne||1<<18),Te=0,tt=Ne.length>>>0,ot=0,vt=0;!(ue&1);){if(ue=X(re,Ae),Ae+=3,ue>>>1)ue>>1==1?(ot=9,vt=5):(Ae=nt(re,Ae),ot=Ze,vt=Je);else{Ae&7&&(Ae+=8-(Ae&7));var yt=re[Ae>>>3]|re[(Ae>>>3)+1]<<8;if(Ae+=32,yt>0)for(!ne&&tt<Te+yt&&(Ne=bt(Ne,Te+yt),tt=Ne.length);yt-- >0;)Ne[Te++]=re[Ae>>>3],Ae+=8;continue}for(;;){!ne&&tt<Te+32767&&(Ne=bt(Ne,Te+32767),tt=Ne.length);var Et=Re(re,Ae,ot),Ee=ue>>>1==1?et[Et]:oe[Et];if(Ae+=Ee&15,Ee>>>=4,!(Ee>>>8&255))Ne[Te++]=Ee;else{if(Ee==256)break;Ee-=257;var ut=Ee<8?0:Ee-4>>2;ut>5&&(ut=0);var Nt=Te+V[Ee];ut>0&&(Nt+=Re(re,Ae,ut),Ae+=ut),Et=Re(re,Ae,vt),Ee=ue>>>1==1?ce[Et]:Be[Et],Ae+=Ee&15,Ee>>>=4;var gt=Ee<4?0:Ee-2>>1,at=Y[Ee];for(gt>0&&(at+=Re(re,Ae,gt),Ae+=gt),!ne&&tt<Nt&&(Ne=bt(Ne,Nt+100),tt=Ne.length);Te<Nt;)Ne[Te]=Ne[Te-at],++Te}}}return ne?[Ne,Ae+7>>>3]:[Ne.slice(0,Te),Ae+7>>>3]}function ae(re,ne){var Ae=re.slice(re.l||0),ue=ke(Ae,ne);return re.l+=ue[1],ue[0]}function De(re,ne){if(re)typeof console<"u"&&console.error(ne);else throw new Error(ne)}function We(re,ne){var Ae=re;Fo(Ae,0);var ue=[],Ne=[],Te={FileIndex:ue,FullPaths:Ne};_(Te,{root:ne.root});for(var tt=Ae.length-4;(Ae[tt]!=80||Ae[tt+1]!=75||Ae[tt+2]!=5||Ae[tt+3]!=6)&&tt>=0;)--tt;Ae.l=tt+4,Ae.l+=4;var ot=Ae.read_shift(2);Ae.l+=6;var vt=Ae.read_shift(4);for(Ae.l=vt,tt=0;tt<ot;++tt){Ae.l+=20;var yt=Ae.read_shift(4),Et=Ae.read_shift(4),Ee=Ae.read_shift(2),ut=Ae.read_shift(2),Nt=Ae.read_shift(2);Ae.l+=8;var gt=Ae.read_shift(4),at=l(Ae.slice(Ae.l+Ee,Ae.l+Ee+ut));Ae.l+=Ee+ut+Nt;var zt=Ae.l;Ae.l=gt+4,pt(Ae,yt,Et,Te,at),Ae.l=zt}return Te}function pt(re,ne,Ae,ue,Ne){re.l+=2;var Te=re.read_shift(2),tt=re.read_shift(2),ot=i(re);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var vt=re.read_shift(4),yt=re.read_shift(4),Et=re.read_shift(4),Ee=re.read_shift(2),ut=re.read_shift(2),Nt="",gt=0;gt<Ee;++gt)Nt+=String.fromCharCode(re[re.l++]);if(ut){var at=l(re.slice(re.l,re.l+ut));(at[21589]||{}).mt&&(ot=at[21589].mt),((Ne||{})[21589]||{}).mt&&(ot=Ne[21589].mt)}re.l+=ut;var zt=re.slice(re.l,re.l+yt);switch(tt){case 8:zt=F(re,Et);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+tt)}var Jt=!1;Te&8&&(vt=re.read_shift(4),vt==134695760&&(vt=re.read_shift(4),Jt=!0),yt=re.read_shift(4),Et=re.read_shift(4)),yt!=ne&&De(Jt,"Bad compressed size: "+ne+" != "+yt),Et!=Ae&&De(Jt,"Bad uncompressed size: "+Ae+" != "+Et),He(ue,Nt,zt,{unsafe:!0,mt:ot})}function ct(re,ne){var Ae=ne||{},ue=[],Ne=[],Te=Lt(1),tt=Ae.compression?8:0,ot=0,vt=0,yt=0,Et=0,Ee=0,ut=re.FullPaths[0],Nt=ut,gt=re.FileIndex[0],at=[],zt=0;for(vt=1;vt<re.FullPaths.length;++vt)if(Nt=re.FullPaths[vt].slice(ut.length),gt=re.FileIndex[vt],!(!gt.size||!gt.content||Nt=="Sh33tJ5")){var Jt=Et,Ot=Lt(Nt.length);for(yt=0;yt<Nt.length;++yt)Ot.write_shift(1,Nt.charCodeAt(yt)&127);Ot=Ot.slice(0,Ot.l),at[Ee]=HBe.buf(gt.content,0);var Vt=gt.content;tt==8&&(Vt=H(Vt)),Te=Lt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,ot),Te.write_shift(2,tt),gt.mt?s(Te,gt.mt):Te.write_shift(4,0),Te.write_shift(-4,at[Ee]),Te.write_shift(4,Vt.length),Te.write_shift(4,gt.content.length),Te.write_shift(2,Ot.length),Te.write_shift(2,0),Et+=Te.length,ue.push(Te),Et+=Ot.length,ue.push(Ot),Et+=Vt.length,ue.push(Vt),Te=Lt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,ot),Te.write_shift(2,tt),Te.write_shift(4,0),Te.write_shift(-4,at[Ee]),Te.write_shift(4,Vt.length),Te.write_shift(4,gt.content.length),Te.write_shift(2,Ot.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,Jt),zt+=Te.l,Ne.push(Te),zt+=Ot.length,Ne.push(Ot),++Ee}return Te=Lt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,Ee),Te.write_shift(2,Ee),Te.write_shift(4,zt),Te.write_shift(4,Et),Te.write_shift(2,0),io([io(ue),io(Ne),Te])}var Xe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Rt(re,ne){if(re.ctype)return re.ctype;var Ae=re.name||"",ue=Ae.match(/\.([^\.]+)$/);return ue&&Xe[ue[1]]||ne&&(ue=(Ae=ne).match(/[\.\\]([^\.\\])+$/),ue&&Xe[ue[1]])?Xe[ue[1]]:"application/octet-stream"}function er(re){for(var ne=z2(re),Ae=[],ue=0;ue<ne.length;ue+=76)Ae.push(ne.slice(ue,ue+76));return Ae.join(`\r
`)+`\r
`}function L(re){var ne=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(yt){var Et=yt.charCodeAt(0).toString(16).toUpperCase();return"="+(Et.length==1?"0"+Et:Et)});ne=ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ne.charAt(0)==`
`&&(ne="=0D"+ne.slice(1)),ne=ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ae=[],ue=ne.split(`\r
`),Ne=0;Ne<ue.length;++Ne){var Te=ue[Ne];if(Te.length==0){Ae.push("");continue}for(var tt=0;tt<Te.length;){var ot=76,vt=Te.slice(tt,tt+ot);vt.charAt(ot-1)=="="?ot--:vt.charAt(ot-2)=="="?ot-=2:vt.charAt(ot-3)=="="&&(ot-=3),vt=Te.slice(tt,tt+ot),tt+=ot,tt<Te.length&&(vt+="="),Ae.push(vt)}}return Ae.join(`\r
`)}function we(re){for(var ne=[],Ae=0;Ae<re.length;++Ae){for(var ue=re[Ae];Ae<=re.length&&ue.charAt(ue.length-1)=="=";)ue=ue.slice(0,ue.length-1)+re[++Ae];ne.push(ue)}for(var Ne=0;Ne<ne.length;++Ne)ne[Ne]=ne[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return Fc(ne.join(`\r
`))}function Ue(re,ne,Ae){for(var ue="",Ne="",Te="",tt,ot=0;ot<10;++ot){var vt=ne[ot];if(!vt||vt.match(/^\s*$/))break;var yt=vt.match(/^(.*?):\s*([^\s].*)$/);if(yt)switch(yt[1].toLowerCase()){case"content-location":ue=yt[2].trim();break;case"content-type":Te=yt[2].trim();break;case"content-transfer-encoding":Ne=yt[2].trim();break}}switch(++ot,Ne.toLowerCase()){case"base64":tt=Fc(Gc(ne.slice(ot).join("")));break;case"quoted-printable":tt=we(ne.slice(ot));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var Et=He(re,ue.slice(Ae.length),tt,{unsafe:!0});Te&&(Et.ctype=Te)}function te(re,ne){if(Z(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ae=ne&&ne.root||"",ue=(bn&&Buffer.isBuffer(re)?re.toString("binary"):Z(re)).split(`\r
`),Ne=0,Te="";for(Ne=0;Ne<ue.length;++Ne)if(Te=ue[Ne],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ae||(Ae=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ae.length)!=Ae))for(;Ae.length>0&&(Ae=Ae.slice(0,Ae.length-1),Ae=Ae.slice(0,Ae.lastIndexOf("/")+1),Te.slice(0,Ae.length)!=Ae););var tt=(ue[1]||"").match(/boundary="(.*?)"/);if(!tt)throw new Error("MAD cannot find boundary");var ot="--"+(tt[1]||""),vt=[],yt=[],Et={FileIndex:vt,FullPaths:yt};_(Et);var Ee,ut=0;for(Ne=0;Ne<ue.length;++Ne){var Nt=ue[Ne];Nt!==ot&&Nt!==ot+"--"||(ut++&&Ue(Et,ue.slice(Ee,Ne),Ae),Ee=Ne)}return Et}function Ce(re,ne){var Ae=ne||{},ue=Ae.boundary||"SheetJS";ue="------="+ue;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ue.slice(2)+'"',"","",""],Te=re.FullPaths[0],tt=Te,ot=re.FileIndex[0],vt=1;vt<re.FullPaths.length;++vt)if(tt=re.FullPaths[vt].slice(Te.length),ot=re.FileIndex[vt],!(!ot.size||!ot.content||tt=="Sh33tJ5")){tt=tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(zt){return"_x"+zt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(zt){return"_u"+zt.charCodeAt(0).toString(16)+"_"});for(var yt=ot.content,Et=bn&&Buffer.isBuffer(yt)?yt.toString("binary"):Z(yt),Ee=0,ut=Math.min(1024,Et.length),Nt=0,gt=0;gt<=ut;++gt)(Nt=Et.charCodeAt(gt))>=32&&Nt<128&&++Ee;var at=Ee>=ut*4/5;Ne.push(ue),Ne.push("Content-Location: "+(Ae.root||"file:///C:/SheetJS/")+tt),Ne.push("Content-Transfer-Encoding: "+(at?"quoted-printable":"base64")),Ne.push("Content-Type: "+Rt(ot,tt)),Ne.push(""),Ne.push(at?L(Et):er(Et))}return Ne.push(ue+`--\r
`),Ne.join(`\r
`)}function $e(re){var ne={};return _(ne,re),ne}function He(re,ne,Ae,ue){var Ne=ue&&ue.unsafe;Ne||_(re);var Te=!Ne&&Gr.find(re,ne);if(!Te){var tt=re.FullPaths[0];ne.slice(0,tt.length)==tt?tt=ne:(tt.slice(-1)!="/"&&(tt+="/"),tt=(tt+ne).replace("//","/")),Te={name:a(ne),type:2},re.FileIndex.push(Te),re.FullPaths.push(tt),Ne||Gr.utils.cfb_gc(re)}return Te.content=Ae,Te.size=Ae?Ae.length:0,ue&&(ue.CLSID&&(Te.clsid=ue.CLSID),ue.mt&&(Te.mt=ue.mt),ue.ct&&(Te.ct=ue.ct)),Te}function Ye(re,ne){_(re);var Ae=Gr.find(re,ne);if(Ae){for(var ue=0;ue<re.FileIndex.length;++ue)if(re.FileIndex[ue]==Ae)return re.FileIndex.splice(ue,1),re.FullPaths.splice(ue,1),!0}return!1}function mt(re,ne,Ae){_(re);var ue=Gr.find(re,ne);if(ue){for(var Ne=0;Ne<re.FileIndex.length;++Ne)if(re.FileIndex[Ne]==ue)return re.FileIndex[Ne].name=a(Ae),re.FullPaths[Ne]=Ae,!0}return!1}function rt(re){I(re,!0)}return e.find=S,e.read=P,e.parse=d,e.write=ve,e.writeFile=me,e.utils={cfb_new:$e,cfb_add:He,cfb_del:Ye,cfb_mov:mt,cfb_gc:rt,ReadShift:Wy,CheckField:zte,prep_blob:Fo,bconcat:io,use_zlib:k,_deflateRaw:fe,_inflateRaw:ae,consts:he},e}();function $Be(t){return typeof t=="string"?A4(t):Array.isArray(t)?pBe(t):t}function ew(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=A4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?lf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([$Be(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=z0(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function KBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Qs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function IV(t,e){for(var r=[],n=Qs(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function m4(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function p4(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function GBe(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var eS=new Date(1899,11,30,0,0,0);function Ui(t,e){var r=t.getTime(),n=eS.getTime()+(t.getTimezoneOffset()-eS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Ste=new Date,qBe=eS.getTime()+(Ste.getTimezoneOffset()-eS.getTimezoneOffset())*6e4,BV=Ste.getTimezoneOffset();function g4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+qBe),e.getTimezoneOffset()!==BV&&e.setTime(e.getTime()+(e.getTimezoneOffset()-BV)*6e4),e}function zBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var PV=new Date("2017-02-19T19:06:09.000Z"),Ite=isNaN(PV.getFullYear())?new Date("2/19/17"):PV,WBe=Ite.getFullYear()==2017;function es(t,e){var r=new Date(t);if(WBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Ite.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function _p(t,e){if(bn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return lf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return lf(mte(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return lf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return lf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ts(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ts(t[r]));return e}function Ms(t,e){for(var r="";r.length<e;)r+=t;return r}function yd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var XBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function rv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&XBe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var YBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function Bte(t){return t?t.content&&t.type?_p(t.content,!0):t.data?py(t.data):t.asNodeBuffer&&bn?py(t.asNodeBuffer().toString("binary")):t.asBinary?py(t.asBinary()):t._data&&t._data.getContent?py(_p(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Pte(t){if(!t)return null;if(t.data)return xV(t.data);if(t.asNodeBuffer&&bn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?xV(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function JBe(t){return t&&t.name.slice(-4)===".bin"?Pte(t):Bte(t)}function yu(t,e){for(var r=t.FullPaths||Qs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function L6(t,e){var r=yu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function li(t,e,r){if(!r)return JBe(L6(t,e));if(!e)return null;try{return li(t,e)}catch{return null}}function Oc(t,e,r){if(!r)return Bte(L6(t,e));if(!e)return null;try{return Oc(t,e)}catch{return null}}function ZBe(t,e,r){return Pte(L6(t,e))}function jV(t){for(var e=t.FullPaths||Qs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function pn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return bn?n=UA(r):n=gBe(r),Gr.utils.cfb_add(t,e,n)}Gr.utils.cfb_add(t,e,r)}else t.file(e,r)}function U6(){return Gr.utils.cfb_new()}function jte(t,e){switch(e.type){case"base64":return Gr.read(t,{type:"base64"});case"binary":return Gr.read(t,{type:"binary"});case"buffer":case"array":return Gr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function xy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ai=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ePe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,TV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tPe=/<[^>]*>/g,gl=ai.match(TV)?TV:tPe,rPe=/<\w*:/,nPe=/<(\/?)\w+:/;function en(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(ePe),l=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var A=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[A]&&d.slice(l-3,l)=="ext")continue;n[A]=c,n[A.toLowerCase()]=c}}return n}function _f(t){return t.replace(nPe,"<$1")}var Tte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Q6=m4(Tte),Gn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Tte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),V6=/[&<>'"]/g,aPe=/[\u0000-\u0008\u000b-\u001f]/g;function ya(t){var e=t+"";return e.replace(V6,function(r){return Q6[r]}).replace(aPe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function kV(t){return ya(t).replace(/ /g,"_x0020_")}var kte=/[\u0000-\u001f]/g;function H6(t){var e=t+"";return e.replace(V6,function(r){return Q6[r]}).replace(/\n/g,"<br/>").replace(kte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function sPe(t){var e=t+"";return e.replace(V6,function(r){return Q6[r]}).replace(kte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var FV=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function iPe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Xa(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function LB(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function OV(t){var e=T0(2*t.length),r,n,a=1,s=0,i=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function DV(t){return UA(t,"binary").toString("utf8")}var fC="foo bar baz",Sa=bn&&(DV(fC)==LB(fC)&&DV||OV(fC)==LB(fC)&&OV)||LB,lf=bn?function(t){return UA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},X2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Fte=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),oPe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),lPe=/<\/?(?:vt:)?variant>/g,cPe=/<(?:vt:)([^>]*)>([\s\S]*)</;function RV(t,e){var r=en(t),n=t.match(oPe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(lPe,"").match(cPe);i&&a.push({v:Sa(i[2]),t:i[1]})}),a}var Ote=/(^\s|\s$|\n)/;function Do(t,e){return"<"+t+(e.match(Ote)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Y2(t){return Qs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function hr(t,e,r){return"<"+t+(r!=null?Y2(r):"")+(e!=null?(e.match(Ote)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function XT(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function uPe(t,e){switch(typeof t){case"string":var r=hr("vt:lpwstr",ya(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return hr((t|0)==t?"vt:i4":"vt:r8",ya(String(t)));case"boolean":return hr("vt:bool",t?"true":"false")}if(t instanceof Date)return hr("vt:filetime",XT(t));throw new Error("Unable to serialize "+t)}function $6(t){if(bn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Sa(z0(D6(t)));throw new Error("Bad input format: expected Buffer or string")}var J2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Fi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Wp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Tc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function dPe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function fPe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var MV=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},LV=bn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:UA(e)})):MV(t)}:MV,UV=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(aA(t,a)));return n.join("").replace(Ll,"")},K6=bn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Ll,""):UV(t,e,r)}:UV,QV=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Dte=bn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):QV(t,e,r)}:QV,VV=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Yg(t,a)));return n.join("")},tw=bn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):VV(e,r,n)}:VV,Rte=function(t,e){var r=kc(t,e);return r>0?tw(t,e+4,e+4+r-1):""},Mte=Rte,Lte=function(t,e){var r=kc(t,e);return r>0?tw(t,e+4,e+4+r-1):""},Ute=Lte,Qte=function(t,e){var r=2*kc(t,e);return r>0?tw(t,e+4,e+4+r-1):""},Vte=Qte,Hte=function(e,r){var n=kc(e,r);return n>0?K6(e,r+4,r+4+n):""},$te=Hte,Kte=function(t,e){var r=kc(t,e);return r>0?tw(t,e+4,e+4+r):""},Gte=Kte,qte=function(t,e){return dPe(t,e)},tS=qte,G6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};bn&&(Mte=function(e,r){if(!Buffer.isBuffer(e))return Rte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Ute=function(e,r){if(!Buffer.isBuffer(e))return Lte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Vte=function(e,r){if(!Buffer.isBuffer(e))return Qte(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},$te=function(e,r){if(!Buffer.isBuffer(e))return Hte(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Gte=function(e,r){if(!Buffer.isBuffer(e))return Kte(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},tS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):qte(e,r)},G6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Yg=function(t,e){return t[e]},aA=function(t,e){return t[e+1]*256+t[e]},APe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},kc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Tm=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},hPe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Wy(t,e){var r="",n,a,s=[],i,l,c,u;switch(e){case"dbcs":if(u=this.l,bn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(aA(this,u)),u+=2;t*=2;break;case"utf8":r=tw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=K6(this,this.l,this.l+t);break;case"wstr":return Wy.call(this,t,"dbcs");case"lpstr-ansi":r=Mte(this,this.l),t=4+kc(this,this.l);break;case"lpstr-cp":r=Ute(this,this.l),t=4+kc(this,this.l);break;case"lpwstr":r=Vte(this,this.l),t=4+2*kc(this,this.l);break;case"lpp4":t=4+kc(this,this.l),r=$te(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+kc(this,this.l),r=Gte(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=Yg(this,this.l+t++))!==0;)s.push(dC(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=aA(this,this.l+t))!==0;)s.push(dC(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Yg(this,u),this.l=u+1,l=Wy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(dC(aA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Yg(this,u),this.l=u+1,l=Wy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(dC(Yg(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=Yg(this,this.l),this.l++,n;case 2:return n=(e==="i"?APe:aA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Tm:hPe)(this,this.l),this.l+=4,n):(a=kc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=tS(this,this.l):a=tS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Dte(this,this.l,t);break}}return this.l+=t,r}var mPe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},pPe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},gPe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function xPe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)gPe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,mPe(this,e,this.l);break;case 8:if(n=8,r==="f"){fPe(this,e,this.l);break}case 16:break;case-4:n=4,pPe(this,e,this.l);break}return this.l+=n,this}function zte(t,e){var r=Dte(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Fo(t,e){t.l=e,t.read_shift=Wy,t.chk=zte,t.write_shift=xPe}function ml(t,e){t.l+=e}function Lt(t){var e=T0(t);return Fo(e,0),e}function QA(t,e,r){if(t){var n,a,s;Fo(t,t.l||0);for(var i=t.length,l=0,c=0;t.l<i;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=ab[l]||ab[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function uc(){var t=[],e=bn?256:2048,r=function(u){var d=Lt(u);return Fo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),io(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:i,_bufs:t}}function Yt(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=ab[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&G6(r)&&t.push(r)}}function Xy(t,e,r){var n=ts(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function HV(t,e,r){var n=ts(t);return n.s=Xy(n.s,e.s,r),n.e=Xy(n.e,e.s,r),n}function Yy(t,e){if(t.cRel&&t.c<0)for(t=ts(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ts(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Zr(t);return!t.cRel&&t.cRel!=null&&(r=bPe(r)),!t.rRel&&t.rRel!=null&&(r=vPe(r)),r}function UB(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Cs(t.s.c)+":"+(t.e.cRel?"":"$")+Cs(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ri(t.s.r)+":"+(t.e.rRel?"":"$")+ri(t.e.r):Yy(t.s,e.biff)+":"+Yy(t.e,e.biff)}function q6(t){return parseInt(yPe(t),10)-1}function ri(t){return""+(t+1)}function vPe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yPe(t){return t.replace(/\$(\d+)$/,"$1")}function z6(t){for(var e=wPe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Cs(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function bPe(t){return t.replace(/^([A-Z])/,"$$$1")}function wPe(t){return t.replace(/^\$([A-Z])/,"$1")}function NPe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function _s(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Zr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function dc(t){var e=t.indexOf(":");return e==-1?{s:_s(t),e:_s(t)}:{s:_s(t.slice(0,e)),e:_s(t.slice(e+1))}}function An(t,e){return typeof e>"u"||typeof e=="number"?An(t.s,t.e):(typeof t!="string"&&(t=Zr(t)),typeof e!="string"&&(e=Zr(e)),t==e?t:t+":"+e)}function qn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function $V(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Mu(t.z,r?Ui(e):e)}catch{}try{return t.w=Mu((t.XF||{}).numFmtId||(r?14:0),r?Ui(e):e)}catch{return""+e}}function SA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?VA[t.v]||t.v:e==null?$V(t,t.v):$V(t,e))}function W0(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Wte(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?_s(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var A={v:e[f][h]},m=i+f,p=l+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))A=e[f][h];else if(Array.isArray(A.v)&&(A.f=e[f][h][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||Yr[14],n.cellDates?(A.t="d",A.w=Mu(A.z,Ui(A.v))):(A.t="n",A.v=Ui(A.v),A.w=Mu(A.z,A.v))):A.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(A.z=s[m][p].z),s[m][p]=A;else{var g=Zr({c:p,r:m});s[g]&&s[g].z&&(A.z=s[g].z),s[g]=A}}}return u.s.c<1e7&&(s["!ref"]=An(u)),s}function Ov(t,e){return Wte(null,t,e)}function CPe(t){return t.read_shift(4,"i")}function bd(t,e){return e||(e=Lt(4)),e.write_shift(4,t),e}function fl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function lo(t,e){var r=!1;return e==null&&(r=!0,e=Lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function _Pe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function EPe(t,e){return e||(e=Lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function W6(t,e){var r=t.l,n=t.read_shift(1),a=fl(t),s=[],i={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(_Pe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function SPe(t,e){var r=!1;return e==null&&(r=!0,e=Lt(15+4*t.t.length)),e.write_shift(1,0),lo(t.t,e),r?e.slice(0,e.l):e}var IPe=W6;function BPe(t,e){var r=!1;return e==null&&(r=!0,e=Lt(23+4*t.t.length)),e.write_shift(1,1),lo(t.t,e),e.write_shift(4,1),EPe({},e),r?e.slice(0,e.l):e}function Vu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Xp(t,e){return e==null&&(e=Lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Yp(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Jp(t,e){return e==null&&(e=Lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var PPe=fl,Xte=lo;function X6(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function rS(t,e){var r=!1;return e==null&&(r=!0,e=Lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var jPe=fl,YT=X6,Y6=rS;function J6(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?tS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Tm(e,0)>>2;return r?a/100:a}function Yte(t,e){e==null&&(e=Lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Jte(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function TPe(t,e){return e||(e=Lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Zp=Jte,Dv=TPe;function ul(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Ep(t,e){return(e||Lt(8)).write_shift(8,t,"f")}function kPe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=ep[a];u&&(e.rgb=eb(u));break;case 2:e.rgb=eb([i,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function nS(t,e){if(e||(e=Lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function FPe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function OPe(t,e){e||(e=Lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Zte(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function DPe(t){return Zte(t,1)}function RPe(t){return Zte(t,2)}var Z6=2,Zl=3,AC=11,KV=12,aS=19,hC=64,MPe=65,LPe=71,UPe=4108,QPe=4126,ro=80,ere=81,VPe=[ro,ere],JT={1:{n:"CodePage",t:Z6},2:{n:"Category",t:ro},3:{n:"PresentationFormat",t:ro},4:{n:"ByteCount",t:Zl},5:{n:"LineCount",t:Zl},6:{n:"ParagraphCount",t:Zl},7:{n:"SlideCount",t:Zl},8:{n:"NoteCount",t:Zl},9:{n:"HiddenCount",t:Zl},10:{n:"MultimediaClipCount",t:Zl},11:{n:"ScaleCrop",t:AC},12:{n:"HeadingPairs",t:UPe},13:{n:"TitlesOfParts",t:QPe},14:{n:"Manager",t:ro},15:{n:"Company",t:ro},16:{n:"LinksUpToDate",t:AC},17:{n:"CharacterCount",t:Zl},19:{n:"SharedDoc",t:AC},22:{n:"HyperlinksChanged",t:AC},23:{n:"AppVersion",t:Zl,p:"version"},24:{n:"DigSig",t:MPe},26:{n:"ContentType",t:ro},27:{n:"ContentStatus",t:ro},28:{n:"Language",t:ro},29:{n:"Version",t:ro},255:{},2147483648:{n:"Locale",t:aS},2147483651:{n:"Behavior",t:aS},1919054434:{}},ZT={1:{n:"CodePage",t:Z6},2:{n:"Title",t:ro},3:{n:"Subject",t:ro},4:{n:"Author",t:ro},5:{n:"Keywords",t:ro},6:{n:"Comments",t:ro},7:{n:"Template",t:ro},8:{n:"LastAuthor",t:ro},9:{n:"RevNumber",t:ro},10:{n:"EditTime",t:hC},11:{n:"LastPrinted",t:hC},12:{n:"CreatedDate",t:hC},13:{n:"ModifiedDate",t:hC},14:{n:"PageCount",t:Zl},15:{n:"WordCount",t:Zl},16:{n:"CharCount",t:Zl},17:{n:"Thumbnail",t:LPe},18:{n:"Application",t:ro},19:{n:"DocSecurity",t:Zl},255:{},2147483648:{n:"Locale",t:aS},2147483651:{n:"Behavior",t:aS},1919054434:{}},GV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},HPe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function $Pe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var KPe=$Pe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ep=ts(KPe),VA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},tre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ek={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},mC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function GPe(t){var e=eD();if(!t||!t.match)return e;var r={};if((t.match(gl)||[]).forEach(function(n){var a=en(n);switch(a[0].replace(rPe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[ek[a.ContentType]]!==void 0&&e[ek[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Fi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function rre(t,e){var r=GBe(ek),n=[],a;n[n.length]=ai,n[n.length]=hr("Types",null,{xmlns:Fi.CT,"xmlns:xsd":Fi.xsd,"xmlns:xsi":Fi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return hr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=hr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:mC[c][e.bookType]||mC[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:mC[c][e.bookType]||mC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Z2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Jy(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(gl)||[]).forEach(function(a){var s=en(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:xy(s.Target,e);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Tx(t){var e=[ai,hr("Relationships",null,{xmlns:Fi.RELS})];return Qs(t["!id"]).forEach(function(r){e[e.length]=hr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function pa(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var qPe="application/vnd.oasis.opendocument.spreadsheet";function zPe(t,e){for(var r=$6(t),n,a;n=J2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=en(n[0],!1),a.path=="/"&&a.type!==qPe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function WPe(t){var e=[ai];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function qV(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function XPe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function YPe(t){var e=[ai];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(qV(t[r][0],t[r][1])),e.push(XPe("",t[r][0]));return e.push(qV("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function nre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XE.version+"</meta:generator></office:meta></office:document-meta>"}var Fu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],JPe=function(){for(var t=new Array(Fu.length),e=0;e<Fu.length;++e){var r=Fu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function are(t){var e={};t=Sa(t);for(var r=0;r<Fu.length;++r){var n=Fu[r],a=t.match(JPe[r]);a!=null&&a.length>0&&(e[n[1]]=Gn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=es(e[n[1]]))}return e}function QB(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ya(e),n[n.length]=r?hr(t,e,r):Do(t,e))}function sre(t,e){var r=e||{},n=[ai,hr("cp:coreProperties",null,{"xmlns:cp":Fi.CORE_PROPS,"xmlns:dc":Fi.dc,"xmlns:dcterms":Fi.dcterms,"xmlns:dcmitype":Fi.dcmitype,"xmlns:xsi":Fi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&QB("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:XT(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&QB("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:XT(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Fu.length;++s){var i=Fu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&QB(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var tp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ire=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ore(t,e,r,n){var a=[];if(typeof t=="string")a=RV(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?RV(e,n).map(function(d){return d.v}):e,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function ZPe(t,e,r){var n={};return e||(e={}),t=Sa(t),tp.forEach(function(a){var s=(t.match(X2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=Gn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&ore(n.HeadingPairs,n.TitlesOfParts,e,r),e}function lre(t){var e=[],r=hr;return t||(t={}),t.Application="SheetJS",e[e.length]=ai,e[e.length]=hr("Properties",null,{xmlns:Fi.EXT_PROPS,"xmlns:vt":Fi.vt}),tp.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ya(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ya(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var eje=/<[^>]+>[^<]*/g;function tje(t,e){var r={},n="",a=t.match(eje);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=en(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Gn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Gn(d);break;case"bool":r[n]=Xa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=es(d);break;case"cy":case"error":r[n]=Gn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function cre(t){var e=[ai,hr("Properties",null,{xmlns:Fi.CUST_PROPS,"xmlns:vt":Fi.vt})];if(!t)return e.join("");var r=1;return Qs(t).forEach(function(a){++r,e[e.length]=hr("property",uPe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ya(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var tk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},VB;function rje(t,e,r){VB||(VB=m4(tk)),e=VB[e]||e,t[e]=r}function nje(t,e){var r=[];return Qs(tk).map(function(n){for(var a=0;a<Fu.length;++a)if(Fu[a][1]==n)return Fu[a];for(a=0;a<tp.length;++a)if(tp[a][1]==n)return tp[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Do(tk[n[1]]||n[1],a))}}),hr("DocumentProperties",r.join(""),{xmlns:Tc.o})}function aje(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Qs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Fu.length;++i)if(s==Fu[i][1])return;for(i=0;i<tp.length;++i)if(s==tp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(hr(kV(s),l,{"dt:dt":c}))}}),e&&Qs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(hr(kV(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Tc.o+'">'+a.join("")+"</"+n+">"}function tD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function sje(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function ure(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function dre(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function fre(t,e,r){return e===31?dre(t):ure(t,e,r)}function rk(t,e,r){return fre(t,e,r===!1?0:4)}function ije(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return fre(t,e,0)}function oje(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Ll,""),t.l-a&2&&(t.l+=2)}return r}function lje(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Ll,"");return r}function cje(t){var e=t.l,r=sS(t,ere);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=sS(t,Zl);return[r,n]}function uje(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(cje(t));return r}function zV(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Ll,"").replace(gy,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Are(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function dje(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function sS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==KV&&n!==e&&VPe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===KV?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return ure(t,n,4).replace(Ll,"");case 31:return dre(t);case 64:return tD(t);case 65:return Are(t);case 71:return dje(t);case 80:return rk(t,n,!s.raw).replace(Ll,"");case 81:return ije(t,n).replace(Ll,"");case 4108:return uje(t);case 4126:case 4127:return n==4127?oje(t):lje(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function WV(t,e){var r=Lt(4),n=Lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=sje(e);break;case 31:case 80:for(n=Lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return io([r,n])}function XV(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),f=t.read_shift(4);s[i]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var A=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,A=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(A=!1,t.l=s[i][1]),A)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=sS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:hd(l=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(l=h.CodePage=sS(t,Z6),hd(l),c!==-1){var p=t.l;t.l=s[c][1],u=zV(t,l),t.l=p}}else if(s[i][0]===0){if(l===0){c=i,t.l=s[i+1][1];continue}u=zV(t,l)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=Are(t);break;case 30:t.l+=4,x=rk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=rk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=zs(t,4);break;case 64:t.l+=4,x=es(tD(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var hre=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function fje(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function YV(t,e,r){var n=Lt(8),a=[],s=[],i=8,l=0,c=Lt(8),u=Lt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=Lt(8),u.write_shift(4,0),a.unshift(u);var d=[Lt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=Lt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=io(d),s.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(hre.indexOf(t[l][0])>-1||ire.indexOf(t[l][0])>-1)&&t[l][1]!=null){var h=t[l][1],A=0;if(e){A=+e[t[l][0]];var m=r[A];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=WV(m.t,h)}else{var g=fje(h);g==-1&&(g=31,h=String(h)),c=WV(g,h)}s.push(c),u=Lt(8),u.write_shift(4,e?A:2+l),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),io([n].concat(a).concat(s))}function JV(t,e,r){var n=t.content;if(!n)return{};Fo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Gr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=XV(n,e),h={SystemIdentifier:u};for(var A in f)h[A]=f[A];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=XV(n,null)}catch{}for(A in m)h[A]=m[A];return h.FMTID=[s,i],h}function ZV(t,e,r,n,a,s){var i=Lt(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Gr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=YV(t,r,n);if(l.push(c),a){var u=YV(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return io(l)}function _h(t,e){return t.read_shift(e),null}function Aje(t,e){e||(e=Lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function hje(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function zs(t,e){return t.read_shift(e)===1}function Tl(t,e){return e||(e=Lt(2)),e.write_shift(2,+!!t),e}function ci(t){return t.read_shift(2,"u")}function bu(t,e){return e||(e=Lt(2)),e.write_shift(2,t),e}function mre(t,e){return hje(t,e,ci)}function mje(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function pre(t,e,r){return r||(r=Lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function rw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function pje(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function gje(t){var e=t.t||"",r=Lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return io(a)}function Sp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function nw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Sp(t,n,r)}function eg(t,e,r){if(r.biff>5)return nw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function gre(t,e,r){return r||(r=Lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function xje(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function vje(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Ll,"");return n&&(t.l+=24),a}function yje(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Ll,"");return r+i}function bje(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return vje(t);case"0303000000000000c000000000000046":return yje(t);default:throw new Error("Unsupported Moniker "+r)}}function pC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Ll,""):"";return r}function eH(t,e){e||(e=Lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function wje(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,l,c,u="",d,f;a&16&&(s=pC(t,r-t.l)),a&128&&(i=pC(t,r-t.l)),(a&257)===257&&(l=pC(t,r-t.l)),(a&257)===1&&(c=bje(t,r-t.l)),a&8&&(u=pC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=tD(t)),t.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var A={Target:h};return d&&(A.guid=d),f&&(A.time=f),s&&(A.Tooltip=s),A}function Nje(t){var e=Lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),eH(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&eH(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function xre(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function vre(t,e){var r=xre(t);return r[3]=0,r}function Ef(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Ip(t,e,r,n){return n||(n=Lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Cje(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function _je(t,e,r){return e===0?"":eg(t,e,r)}function Eje(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function yre(t){var e=t.read_shift(2),r=J6(t);return[e,r]}function Sje(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=rw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function x4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function bre(t,e){return e||(e=Lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function wre(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var Ije=wre;function Nre(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function Bje(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Pje(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Zo(t){t.l+=2,t.l+=t.read_shift(2)}var jje={0:Zo,4:Zo,5:Zo,6:Zo,7:Pje,8:Zo,9:Zo,10:Zo,11:Zo,12:Zo,13:Bje,14:Zo,15:Zo,16:Zo,17:Zo,18:Zo,19:Zo,20:Zo,21:Nre};function Tje(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(jje[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function gC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function rD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function kje(t,e){return e===0||t.read_shift(2),1200}function Fje(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=eg(t,0,r);return t.read_shift(e+n-t.l),a}function Oje(t,e){var r=!e||e.biff==8,n=Lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Dje(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Rje(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=rw(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Mje(t,e){var r=!e||e.biff>=8?2:1,n=Lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Lje(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(pje(t));return s.Count=n,s.Unique=a,s}function Uje(t,e){var r=Lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=gje(t[a]);var s=io([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function Qje(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Vje(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Hje(t){var e=Cje(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function $je(t){return t.read_shift(2),t.read_shift(4)}function tH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Kje(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function Gje(){var t=Lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function qje(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function zje(t){var e=Lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Wje(){}function Xje(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=rw(t,0,r),n}function Yje(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Jje(t){var e=Ef(t);return e.isst=t.read_shift(4),e}function Zje(t,e,r,n){var a=Lt(10);return Ip(t,e,n,a),a.write_shift(4,r),a}function eTe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Ef(t);r.biff==2&&t.l++;var s=nw(t,n-t.l,r);return a.val=s,a}function tTe(t,e,r,n,a){var s=!a||a.biff==8,i=Lt(8+ +s+(1+s)*r.length);return Ip(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function rTe(t,e,r){var n=t.read_shift(2),a=eg(t,0,r);return[n,a]}function nTe(t,e,r,n){var a=r&&r.biff==5;n||(n=Lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var aTe=eg;function rH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:i,c}}}function sTe(t,e){var r=e.biff==8||!e.biff?4:2,n=Lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function iTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=yre(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function oTe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(yre(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function lTe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function cTe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=HPe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function uTe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=cTe(t,e,n.fStyle,r),n}function nH(t,e,r,n){var a=r&&r.biff==5;n||(n=Lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function dTe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function fTe(t){var e=Lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function aH(t,e,r){var n=Ef(t);(r.biff==2||e==9)&&++t.l;var a=mje(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function ATe(t,e,r,n,a,s){var i=Lt(8);return Ip(t,e,n,i),pre(r,s,i),i}function hTe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ef(t),a=ul(t);return n.val=a,n}function mTe(t,e,r,n){var a=Lt(14);return Ip(t,e,n,a),Ep(r,a),a}var sH=_je;function pTe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Sp(t,s),l=[];n>t.l;)l.push(nw(t));return[s,a,i,l]}function iH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=Sje(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var gTe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function oH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Sp(t,i,r);a&32&&(u=gTe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:T6e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Cre(t,e,r){if(r.biff<8)return xTe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(Eje(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function xTe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=rw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function vTe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Sp(t,n,r),i=Sp(t,a,r);return[s,i]}function yTe(t,e,r){var n=wre(t);t.l++;var a=t.read_shift(1);return e-=8,[k6e(t,e,r),a,n]}function lH(t,e,r){var n=Ije(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,P6e(t,e,r)]}function bTe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function wTe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=eg(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,i,s]}}function NTe(t,e,r){return wTe(t,e,r)}function CTe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(x4(t));return r}function _Te(t){var e=Lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)bre(t[r],e);return e}function ETe(t,e,r){if(r&&r.biff<8)return ITe(t,e,r);var n=Nre(t),a=Tje(t,e-22,n[1]);return{cmo:n,ft:a}}var STe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function ITe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((STe[n]||ml)(t,e,r)),{cmo:[a,n,s],ft:i}}function BTe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=xje(t,6,r);var l=t.read_shift(2);t.read_shift(2),ci(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=Sp(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function PTe(t,e){var r=x4(t);t.l+=16;var n=wje(t,e-24);return[r,n]}function jTe(t){var e=Lt(24),r=_s(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return io([e,Nje(t[1])])}function TTe(t,e){t.read_shift(2);var r=x4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Ll,""),[r,n]}function kTe(t){var e=t[1].Tooltip,r=Lt(10+2*(e.length+1));r.write_shift(2,2048);var n=_s(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function FTe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=GV[r]||r,r=t.read_shift(2),e[1]=GV[r]||r,e}function OTe(t){return t||(t=Lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function DTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vre(t));return r}function RTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(vre(t));return r}function MTe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function _re(t,e,r){if(!r.cellStyles)return ml(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function LTe(t,e){var r=Lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function UTe(t,e){var r={};return e<32||(t.l+=16,r.header=ul(t),r.footer=ul(t),t.l+=2),r}function QTe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function VTe(t){for(var e=Lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var HTe=Ef,$Te=mre,KTe=nw;function GTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function qTe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ef(t);++t.l;var a=eg(t,e-7,r);return n.t="str",n.val=a,n}function zTe(t){var e=Ef(t);++t.l;var r=ul(t);return e.t="n",e.val=r,e}function WTe(t,e,r){var n=Lt(15);return ow(n,t,e),n.write_shift(8,r,"f"),n}function XTe(t){var e=Ef(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function YTe(t,e,r){var n=Lt(9);return ow(n,t,e),n.write_shift(2,r),n}function JTe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function ZTe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function eke(t,e,r){var n=t.l+e,a=Ef(t),s=t.read_shift(2),i=Sp(t,s,r);return t.l=n,a.t="str",a.val=i,a}var tke=[2,3,48,49,131,139,140,245],nk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=m4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=T0(1);switch(c.type){case"base64":d=Fc(Gc(l));break;case"binary":d=Fc(l);break;case"buffer":case"array":d=l;break}Fo(d,0);var f=d.read_shift(1),h=!!(f&136),A=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:A=!0,h=!0;break;case 49:A=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},B=Math.min(d.length,f==2?521:g-10-(A?264:0)),P=m?32:11;d.l<B&&d[d.l]!=13;)switch(w={},w.name=q2.utils.decode(y,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!A||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++_]=[],E=0,E=0;E!=b.length;++E){var I=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,Fo(I,0);var O=q2.utils.decode(y,I);switch(b[E].type){case"C":O.trim().length&&(u[_][E]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[_][E]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[_][E]=O;break;case"F":u[_][E]=parseFloat(O.trim());break;case"+":case"I":u[_][E]=m?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[_][E]=!0;break;case"N":case"F":u[_][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][E]="##MEMO##"+(m?parseInt(O.trim(),10):I.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[_][E]=+O||0);break;case"@":u[_][E]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[_][E]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[_][E]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][E]=-I.read_shift(-8,"f");break;case"B":if(A&&b[E].len==8){u[_][E]=I.read_shift(8,"f");break}case"G":case"P":I.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ov(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return W0(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&hd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=uc(),f=lS(l,{header:1,raw:!0,cellDates:!0}),h=f[0],A=f.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=qn(l["!ref"]),w=[],B=[],P=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",E="",I=0,O=[];for(g=0;g<A.length;++g)A[g][p]!=null&&O.push(A[g][p]);if(O.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<O.length;++g){switch(typeof O[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=O[g]instanceof Date?"D":"C";break;default:E="C"}I=Math.max(I,String(O[g]).length),_=_&&_!=E?"C":E}I>250&&(I=250),E=((m[p]||{}).DBF||{}).type,E=="C"&&m[p].DBF.len>I&&(I=m[p].DBF.len),_=="B"&&E=="N"&&(_="N",P[p]=m[p].DBF.dec,I=m[p].DBF.len),B[p]=_=="C"||E=="N"?I:s[_]||0,y+=B[p],w[p]=_}var S=d.next(32);for(S.write_shift(4,318902576),S.write_shift(4,A.length),S.write_shift(2,296+32*x),S.write_shift(2,y),p=0;p<4;++p)S.write_shift(4,0);for(S.write_shift(4,0|(+e[hte]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var j=d.next(32),D=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,D,"sbcs"),j.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),j.write_shift(4,g),j.write_shift(1,B[p]||s[w[p]]||0),j.write_shift(1,P[p]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),g+=B[p]||s[w[p]]||0}var J=d.next(264);for(J.write_shift(4,13),p=0;p<65;++p)J.write_shift(4,0);for(p=0;p<A.length;++p){var ge=d.next(y);for(ge.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":ge.write_shift(1,A[p][g]==null?63:A[p][g]?84:70);break;case"B":ge.write_shift(8,A[p][g]||0,"f");break;case"N":var se="0";for(typeof A[p][g]=="number"&&(se=A[p][g].toFixed(P[g]||0)),x=0;x<B[g]-se.length;++x)ge.write_shift(1,32);ge.write_shift(1,se,"sbcs");break;case"D":A[p][g]?(ge.write_shift(4,("0000"+A[p][g].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(A[p][g].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+A[p][g].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var he=String(A[p][g]!=null?A[p][g]:"").slice(0,B[g]);for(ge.write_shift(1,he,"sbcs"),x=0;x<B[g]-he.length;++x)ge.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),Ere=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Qs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,A){var m=t[A];return typeof m=="number"?vV(m):m},n=function(h,A,m){var p=A.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:vV(p)};t["|"]=254;function a(h,A){switch(A.type){case"base64":return s(Gc(h),A);case"binary":return s(h,A);case"buffer":return s(bn&&Buffer.isBuffer(h)?h.toString("binary"):z0(h),A);case"array":return s(_p(h),A)}throw new Error("Unrecognized type "+A.type)}function s(h,A){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],B=null,P={},_=[],E=[],I=[],O=0,S;for(+A.codepage>=0&&hd(+A.codepage);x!==m.length;++x){O=0;var j=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=j.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),J=D[0],ge;if(j.length>0)switch(J){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(j.slice(3).replace(/;;/g,";"));break;case"C":var se=!1,he=!1,me=!1,Z=!1,ve=-1,Se=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":g=parseInt(D[y].slice(1))-1,he=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,he||(g=0),S=b.length;S<=p;++S)b[S]=[];break;case"K":ge=D[y].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(yd(ge))?isNaN(rv(ge).getDate())||(ge=es(ge)):(ge=yd(ge),B!==null&&kv(B)&&(ge=g4(ge))),se=!0;break;case"E":Z=!0;var k=kx(D[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],k];break;case"S":me=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":ve=parseInt(D[y].slice(1))-1;break;case"C":Se=parseInt(D[y].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+j)}if(se&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=ge:b[p][g]=ge,B=null),me){if(Z)throw new Error("SYLK shared formula cannot have own formula");var F=ve>-1&&b[ve][Se];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=$re(F[1],{r:p-ve,c:g-Se})}break;case"F":var H=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":g=parseInt(D[y].slice(1))-1,++H;break;case"Y":for(p=parseInt(D[y].slice(1))-1,S=b.length;S<=p;++S)b[S]=[];break;case"M":O=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":B=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=D[y].slice(1).split(" "),S=parseInt(I[0],10);S<=parseInt(I[1],10);++S)O=parseInt(I[2],10),E[S-1]=O===0?{hidden:!0}:{wch:O},k0(E[S-1]);break;case"C":g=parseInt(D[y].slice(1))-1,E[g]||(E[g]={});break;case"R":p=parseInt(D[y].slice(1))-1,_[p]||(_[p]={}),O>0?(_[p].hpt=O,_[p].hpx=av(O)):O===0&&(_[p].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+j)}H<1&&(B=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+j)}}return _.length>0&&(P["!rows"]=_),E.length>0&&(P["!cols"]=E),A&&A.sheetRows&&(b=b.slice(0,A.sheetRows)),[b,P]}function i(h,A){var m=a(h,A),p=m[0],g=m[1],x=Ov(p,A);return Qs(g).forEach(function(y){x[y]=g[y]}),x}function l(h,A){return W0(i(h,A),A)}function c(h,A,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+lD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,A){A.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=tb(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=rb(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,A){A.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*nb(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function f(h,A){var m=["ID;PWXL;N;E"],p=[],g=qn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var B=g.s.c;B<=g.e.c;++B){var P=Zr({r:w,c:B});x=y?(h[w]||[])[B]:h[P],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,B))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),Sre=function(){function t(s,i){switch(i.type){case"base64":return e(Gc(s),i);case"binary":return e(s,i);case"buffer":return e(bn&&Buffer.isBuffer(s)?s.toString("binary"):z0(s),i);case"array":return e(_p(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),A=h[0],m=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+A){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(yd(m))?isNaN(rv(m).getDate())?f[c][u]=m:f[c][u]=es(m):f[c][u]=yd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return Ov(t(s,i),i)}function n(s,i){return W0(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=qn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var A=d.s.r;A<=d.e.r;++A){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Zr({r:A,c:m});if(f=h?(c[A]||[])[m]:c[p],!f){i(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Mu(f.z||Yr[14],Ui(es(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Ire=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var A=f.split(`
`),m=-1,p=-1,g=0,x=[];g!==A.length;++g){var y=A[g].trim().split(":");if(y[0]==="cell"){var b=_s(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(f,h){return Ov(r(f,h),h)}function a(f,h){return W0(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],A=[],m,p="",g=dc(f["!ref"]),x=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=Zr({r:y,c:b}),m=x?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(A=["cell",p,"t"],m.t){case"s":case"str":A.push(e(m.v));break;case"n":m.f?(A[2]="vtf",A[3]="n",A[4]=m.v,A[5]=e(m.f)):(A[2]="v",A[3]=m.v);break;case"b":A[2]="vt"+(m.f?"f":"c"),A[3]="nl",A[4]=m.v?"1":"0",A[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Ui(es(m.v));A[2]="vtc",A[3]="nd",A[4]=""+w,A[5]=m.w||Mu(m.z||Yr[14],w);break;case"e":continue}h.push(A.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,l,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),nv=function(){function t(d,f,h,A,m){m.raw?f[h][A]=d:d===""||(d==="TRUE"?f[h][A]=!0:d==="FALSE"?f[h][A]=!1:isNaN(yd(d))?isNaN(rv(d).getDate())?f[h][A]=d:f[h][A]=es(d):f[h][A]=yd(d))}function e(d,f){var h=f||{},A=[];if(!d||d.length===0)return A;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){A[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),A,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),A,y,b,h)}return h.sheetRows&&(A=A.slice(0,h.sheetRows)),A}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,A=0,m=0;A<d.length;++A)(m=d.charCodeAt(A))==34?h=!h:!h&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A]);if(!m.length){f=n;for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var h=f||{},A="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(A=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(A=d.charAt(4),d=d.slice(6)):A=a(d.slice(0,1024)):h&&h.FS?A=h.FS:A=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,B=A.charCodeAt(0),P=!1,_=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var I=h.dateNF!=null?QBe(h.dateNF):null;function O(){var S=d.slice(b,w),j={};if(S.charAt(0)=='"'&&S.charAt(S.length-1)=='"'&&(S=S.slice(1,-1).replace(/""/g,'"')),S.length===0)j.t="z";else if(h.raw)j.t="s",j.v=S;else if(S.trim().length===0)j.t="s",j.v=S;else if(S.charCodeAt(0)==61)S.charCodeAt(1)==34&&S.charCodeAt(S.length-1)==34?(j.t="s",j.v=S.slice(2,-1).replace(/""/g,'"')):pOe(S)?(j.t="n",j.f=S.slice(1)):(j.t="s",j.v=S);else if(S=="TRUE")j.t="b",j.v=!0;else if(S=="FALSE")j.t="b",j.v=!1;else if(!isNaN(y=yd(S)))j.t="n",h.cellText!==!1&&(j.w=S),j.v=y;else if(!isNaN(rv(S).getDate())||I&&S.match(I)){j.z=h.dateNF||Yr[14];var D=0;I&&S.match(I)&&(S=VBe(S,h.dateNF,S.match(I)||[]),D=1),h.cellDates?(j.t="d",j.v=es(S,D)):(j.t="n",j.v=Ui(es(S,D))),h.cellText!==!1&&(j.w=Mu(j.z,j.v instanceof Date?Ui(j.v):j.v)),h.cellNF||delete j.z}else j.t="s",j.v=S;if(j.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=j):m[Zr({c:x,r:g})]=j),b=w+1,E=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),_==B)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:E===34&&(P=!P);break;case B:case 10:case 13:if(!P&&O())break e;break}return w-b>0&&O(),m["!ref"]=An(p),m}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Ov(e(d,f),f)}function l(d,f){var h="",A=f.type=="string"?[0,0,0,0]:pD(d,f);switch(f.type){case"base64":h=Gc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof q2<"u"||(h=bn&&Buffer.isBuffer(d)?d.toString("binary"):z0(d));break;case"array":h=_p(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return A[0]==239&&A[1]==187&&A[2]==191?h=Sa(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Sa(h):f.type=="binary"&&typeof q2<"u",h.slice(0,19)=="socialcalc:version:"?Ire.to_sheet(f.type=="string"?h:Sa(h),f):i(h,f)}function c(d,f){return W0(l(d,f),f)}function u(d){for(var f=[],h=qn(d["!ref"]),A,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=Zr({r:p,c:x});if(A=m?(d[p]||[])[x]:d[y],!A||A.v==null){g.push("          ");continue}for(var b=(A.w||(SA(A),A.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function rke(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=Ere.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return nv.to_workbook(t,e)}}var rp=function(){function t(k,F,H){if(k){Fo(k,k.l||0);for(var Q=H.Enum||ve;k.l<k.length;){var V=k.read_shift(2),Y=Q[V]||Q[65535],R=k.read_shift(2),z=k.l+R,le=Y.f&&Y.f(k,R,H);if(k.l=z,F(le,Y,V))return}}}function e(k,F){switch(F.type){case"base64":return r(Fc(Gc(k)),F);case"binary":return r(Fc(k),F);case"buffer":case"array":return r(k,F)}throw"Unsupported type "+F.type}function r(k,F){if(!k)return k;var H=F||{},Q=H.dense?[]:{},V="Sheet1",Y="",R=0,z={},le=[],K=[],M={s:{r:0,c:0},e:{r:0,c:0}},pe=H.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)H.Enum=ve,t(k,function(Ie,Re,ze){switch(ze){case 0:H.vers=Ie,Ie>=4096&&(H.qpro=!0);break;case 6:M=Ie;break;case 204:Ie&&(Y=Ie);break;case 222:Y=Ie;break;case 15:case 51:H.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:ze==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=H.dateNF||Yr[14],H.cellDates&&(Ie[1].t="d",Ie[1].v=g4(Ie[1].v))),H.qpro&&Ie[3]>R&&(Q["!ref"]=An(M),z[V]=Q,le.push(V),Q=H.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},R=Ie[3],V=Y||"Sheet"+(R+1),Y="");var st=H.dense?(Q[Ie[0].r]||[])[Ie[0].c]:Q[Zr(Ie[0])];if(st){st.t=Ie[1].t,st.v=Ie[1].v,Ie[1].z!=null&&(st.z=Ie[1].z),Ie[1].f!=null&&(st.f=Ie[1].f);break}H.dense?(Q[Ie[0].r]||(Q[Ie[0].r]=[]),Q[Ie[0].r][Ie[0].c]=Ie[1]):Q[Zr(Ie[0])]=Ie[1];break}},H);else if(k[2]==26||k[2]==14)H.Enum=Se,k[2]==14&&(H.qpro=!0,k.l=0),t(k,function(Ie,Re,ze){switch(ze){case 204:V=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>R&&(Q["!ref"]=An(M),z[V]=Q,le.push(V),Q=H.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},R=Ie[3],V="Sheet"+(R+1)),pe>0&&Ie[0].r>=pe)break;H.dense?(Q[Ie[0].r]||(Q[Ie[0].r]=[]),Q[Ie[0].r][Ie[0].c]=Ie[1]):Q[Zr(Ie[0])]=Ie[1],M.e.c<Ie[0].c&&(M.e.c=Ie[0].c),M.e.r<Ie[0].r&&(M.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(K[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:K[Ie[0]]=Ie[1],Ie[0]==R&&(V=Ie[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(Q["!ref"]=An(M),z[Y||V]=Q,le.push(Y||V),!K.length)return{SheetNames:le,Sheets:z};for(var X={},G=[],ie=0;ie<K.length;++ie)z[le[ie]]?(G.push(K[ie]||le[ie]),X[K[ie]]=z[K[ie]]||z[le[ie]]):(G.push(K[ie]),X[K[ie]]={"!ref":"A1"});return{SheetNames:G,Sheets:X}}function n(k,F){var H=F||{};if(+H.codepage>=0&&hd(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=uc(),V=qn(k["!ref"]),Y=Array.isArray(k),R=[];mr(Q,0,s(1030)),mr(Q,6,c(V));for(var z=Math.min(V.e.r,8191),le=V.s.r;le<=z;++le)for(var K=ri(le),M=V.s.c;M<=V.e.c;++M){le===V.s.r&&(R[M]=Cs(M));var pe=R[M]+K,X=Y?(k[le]||[])[M]:k[pe];if(!(!X||X.t=="z"))if(X.t=="n")(X.v|0)==X.v&&X.v>=-32768&&X.v<=32767?mr(Q,13,A(le,M,X.v)):mr(Q,14,p(le,M,X.v));else{var G=SA(X);mr(Q,15,f(le,M,G.slice(0,239)))}}return mr(Q,1),Q.end()}function a(k,F){var H=F||{};if(+H.codepage>=0&&hd(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=uc();mr(Q,0,i(k));for(var V=0,Y=0;V<k.SheetNames.length;++V)(k.Sheets[k.SheetNames[V]]||{})["!ref"]&&mr(Q,27,Z(k.SheetNames[V],Y++));var R=0;for(V=0;V<k.SheetNames.length;++V){var z=k.Sheets[k.SheetNames[V]];if(!(!z||!z["!ref"])){for(var le=qn(z["!ref"]),K=Array.isArray(z),M=[],pe=Math.min(le.e.r,8191),X=le.s.r;X<=pe;++X)for(var G=ri(X),ie=le.s.c;ie<=le.e.c;++ie){X===le.s.r&&(M[ie]=Cs(ie));var Ie=M[ie]+G,Re=K?(z[X]||[])[ie]:z[Ie];if(!(!Re||Re.t=="z"))if(Re.t=="n")mr(Q,23,O(X,ie,R,Re.v));else{var ze=SA(Re);mr(Q,22,_(X,ie,R,ze.slice(0,239)))}}++R}}return mr(Q,1),Q.end()}function s(k){var F=Lt(2);return F.write_shift(2,k),F}function i(k){var F=Lt(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var H=0,Q=0,V=0,Y=0;Y<k.SheetNames.length;++Y){var R=k.SheetNames[Y],z=k.Sheets[R];if(!(!z||!z["!ref"])){++V;var le=dc(z["!ref"]);H<le.e.r&&(H=le.e.r),Q<le.e.c&&(Q=le.e.c)}}return H>8191&&(H=8191),F.write_shift(2,H),F.write_shift(1,V),F.write_shift(1,Q),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(k,F,H){var Q={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&H.qpro?(Q.s.c=k.read_shift(1),k.l++,Q.s.r=k.read_shift(2),Q.e.c=k.read_shift(1),k.l++,Q.e.r=k.read_shift(2),Q):(Q.s.c=k.read_shift(2),Q.s.r=k.read_shift(2),F==12&&H.qpro&&(k.l+=2),Q.e.c=k.read_shift(2),Q.e.r=k.read_shift(2),F==12&&H.qpro&&(k.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function c(k){var F=Lt(8);return F.write_shift(2,k.s.c),F.write_shift(2,k.s.r),F.write_shift(2,k.e.c),F.write_shift(2,k.e.r),F}function u(k,F,H){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(Q[0].c=k.read_shift(1),Q[3]=k.read_shift(1),Q[0].r=k.read_shift(2),k.l+=2):(Q[2]=k.read_shift(1),Q[0].c=k.read_shift(2),Q[0].r=k.read_shift(2)),Q}function d(k,F,H){var Q=k.l+F,V=u(k,F,H);if(V[1].t="s",H.vers==20768){k.l++;var Y=k.read_shift(1);return V[1].v=k.read_shift(Y,"utf8"),V}return H.qpro&&k.l++,V[1].v=k.read_shift(Q-k.l,"cstr"),V}function f(k,F,H){var Q=Lt(7+H.length);Q.write_shift(1,255),Q.write_shift(2,F),Q.write_shift(2,k),Q.write_shift(1,39);for(var V=0;V<Q.length;++V){var Y=H.charCodeAt(V);Q.write_shift(1,Y>=128?95:Y)}return Q.write_shift(1,0),Q}function h(k,F,H){var Q=u(k,F,H);return Q[1].v=k.read_shift(2,"i"),Q}function A(k,F,H){var Q=Lt(7);return Q.write_shift(1,255),Q.write_shift(2,F),Q.write_shift(2,k),Q.write_shift(2,H,"i"),Q}function m(k,F,H){var Q=u(k,F,H);return Q[1].v=k.read_shift(8,"f"),Q}function p(k,F,H){var Q=Lt(13);return Q.write_shift(1,255),Q.write_shift(2,F),Q.write_shift(2,k),Q.write_shift(8,H,"f"),Q}function g(k,F,H){var Q=k.l+F,V=u(k,F,H);if(V[1].v=k.read_shift(8,"f"),H.qpro)k.l=Q;else{var Y=k.read_shift(2);w(k.slice(k.l,k.l+Y),V),k.l+=Y}return V}function x(k,F,H){var Q=F&32768;return F&=-32769,F=(Q?k:0)+(F>=8192?F-16384:F),(Q?"":"$")+(H?Cs(F):ri(F))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(k,F){Fo(k,0);for(var H=[],Q=0,V="",Y="",R="",z="";k.l<k.length;){var le=k[k.l++];switch(le){case 0:H.push(k.read_shift(8,"f"));break;case 1:Y=x(F[0].c,k.read_shift(2),!0),V=x(F[0].r,k.read_shift(2),!1),H.push(Y+V);break;case 2:{var K=x(F[0].c,k.read_shift(2),!0),M=x(F[0].r,k.read_shift(2),!1);Y=x(F[0].c,k.read_shift(2),!0),V=x(F[0].r,k.read_shift(2),!1),H.push(K+M+":"+Y+V)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(k.read_shift(2));break;case 6:{for(var pe="";le=k[k.l++];)pe+=String.fromCharCode(le);H.push('"'+pe.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:z=H.pop(),R=H.pop(),H.push(["AND","OR"][le-20]+"("+R+","+z+")");break;default:if(le<32&&b[le])z=H.pop(),R=H.pop(),H.push(R+b[le]+z);else if(y[le]){if(Q=y[le][1],Q==69&&(Q=k[k.l++]),Q>H.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+H.join("|")+"|");return}var X=H.slice(-Q);H.length-=Q,H.push(y[le][0]+"("+X.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}H.length==1?F[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function B(k){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=k.read_shift(2),F[3]=k[k.l++],F[0].c=k[k.l++],F}function P(k,F){var H=B(k);return H[1].t="s",H[1].v=k.read_shift(F-4,"cstr"),H}function _(k,F,H,Q){var V=Lt(6+Q.length);V.write_shift(2,k),V.write_shift(1,H),V.write_shift(1,F),V.write_shift(1,39);for(var Y=0;Y<Q.length;++Y){var R=Q.charCodeAt(Y);V.write_shift(1,R>=128?95:R)}return V.write_shift(1,0),V}function E(k,F){var H=B(k);H[1].v=k.read_shift(2);var Q=H[1].v>>1;if(H[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return H[1].v=Q,H}function I(k,F){var H=B(k),Q=k.read_shift(4),V=k.read_shift(4),Y=k.read_shift(2);if(Y==65535)return Q===0&&V===3221225472?(H[1].t="e",H[1].v=15):Q===0&&V===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var R=Y&32768;return Y=(Y&32767)-16446,H[1].v=(1-R*2)*(V*Math.pow(2,Y+32)+Q*Math.pow(2,Y)),H}function O(k,F,H,Q){var V=Lt(14);if(V.write_shift(2,k),V.write_shift(1,H),V.write_shift(1,F),Q==0)return V.write_shift(4,0),V.write_shift(4,0),V.write_shift(2,65535),V;var Y=0,R=0,z=0,le=0;return Q<0&&(Y=1,Q=-Q),R=Math.log2(Q)|0,Q/=Math.pow(2,R-31),le=Q>>>0,le&2147483648||(Q/=2,++R,le=Q>>>0),Q-=le,le|=2147483648,le>>>=0,Q*=Math.pow(2,32),z=Q>>>0,V.write_shift(4,z),V.write_shift(4,le),R+=16383+(Y?32768:0),V.write_shift(2,R),V}function S(k,F){var H=I(k);return k.l+=F-14,H}function j(k,F){var H=B(k),Q=k.read_shift(4);return H[1].v=Q>>6,H}function D(k,F){var H=B(k),Q=k.read_shift(8,"f");return H[1].v=Q,H}function J(k,F){var H=D(k);return k.l+=F-10,H}function ge(k,F){return k[k.l+F-1]==0?k.read_shift(F,"cstr"):""}function se(k,F){var H=k[k.l++];H>F-1&&(H=F-1);for(var Q="";Q.length<H;)Q+=String.fromCharCode(k[k.l++]);return Q}function he(k,F,H){if(!(!H.qpro||F<21)){var Q=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var V=k.read_shift(F-21,"cstr");return[Q,V]}}function me(k,F){for(var H={},Q=k.l+F;k.l<Q;){var V=k.read_shift(2);if(V==14e3){for(H[V]=[0,""],H[V][0]=k.read_shift(2);k[k.l];)H[V][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return H}function Z(k,F){var H=Lt(5+k.length);H.write_shift(2,14e3),H.write_shift(2,F);for(var Q=0;Q<k.length;++Q){var V=k.charCodeAt(Q);H[H.l++]=V>127?95:V}return H[H.l++]=0,H}var ve={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:se},65535:{n:""}},Se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:S},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:me},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:J},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function nke(t){var e={},r=t.match(gl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=en(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=k6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var ake=function(){var t=X2("t"),e=X2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var l={t:"s",v:Gn(i[1])},c=s.match(e);return c&&(l.s=nke(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),ske=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),ike=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,oke=/<(?:\w+:)?r>/,lke=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function nD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Gn(Sa(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Sa(t),r&&(n.h=H6(n.t))):t.match(oke)&&(n.r=Sa(t),n.t=Gn(Sa((t.replace(lke,"").match(ike)||[]).join("").replace(gl,""))),r&&(n.h=ske(ake(n.r)))),n):{t:""}}var cke=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,uke=/<(?:\w+:)?(?:si|sstItem)>/g,dke=/<\/(?:\w+:)?(?:si|sstItem)>/;function fke(t,e){var r=[],n="";if(!t)return r;var a=t.match(cke);if(a){n=a[2].replace(uke,"").split(dke);for(var s=0;s!=n.length;++s){var i=nD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=en(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var Ake=/^\s|\s$|[\t\n\r]/;function Bre(t,e){if(!e.bookSST)return"";var r=[ai];r[r.length]=hr("sst",null,{xmlns:Wp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Ake)&&(s+=' xml:space="preserve"'),s+=">"+ya(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function hke(t){return[t.read_shift(4),t.read_shift(4)]}function mke(t,e){var r=[],n=!1;return QA(t,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function pke(t,e){return e||(e=Lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var gke=SPe;function xke(t){var e=uc();Yt(e,159,pke(t));for(var r=0;r<t.length;++r)Yt(e,19,gke(t[r]));return Yt(e,160),e.end()}function Pre(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function pA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function vke(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=pA(t,4),e.U=pA(t,4),e.W=pA(t,4),e}function yke(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function bke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(yke(t));return e}function wke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Nke(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=pA(t,4),e.U=pA(t,4),e.W=pA(t,4),e}function Cke(t){var e=Nke(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function jre(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Tre(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function _ke(t){var e=pA(t);switch(e.Minor){case 2:return[e.Minor,Eke(t)];case 3:return[e.Minor,Ske()];case 4:return[e.Minor,Ike(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Eke(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=jre(t,r),a=Tre(t,t.length-t.l);return{t:"Std",h:n,v:a}}function Ske(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ike(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(gl,function(s){var i=en(s);switch(_f(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Bke(t,e){var r={},n=r.EncryptionVersionInfo=pA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=jre(t,a),e-=a,r.EncryptionVerifier=Tre(t,e),r}function Pke(t){var e={},r=e.EncryptionVersionInfo=pA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function aD(t){var e=0,r,n=Pre(t),a=n.length+1,s,i,l,c,u;for(r=T0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^i;return e^52811}var kre=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=Pre(i),c=s(l),u=l.length,d=T0(16),f=0;f!=16;++f)d[f]=0;var h,A,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,A=l[l.length-1],d[u]=a(A,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,m=15-l.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(l[u],h),--u,--m;return d}}(),jke=function(t,e,r,n,a){a||(a=e),n||(n=kre(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Tke=function(t){var e=0,r=kre(t);return function(n){var a=jke("",n,e,r);return e=a[1],a[0]}};function kke(t,e,r,n){var a={key:ci(t),verificationBytes:ci(t)};return r.password&&(a.verifier=aD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Tke(r.password)),a}function Fke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Pke(t):n.Data=Bke(t,e),n}function Oke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Fke(t,e-2,n):kke(t,r.biff>=8?e:e-2,r,n),n}var Fre=function(){function t(a,s){switch(s.type){case"base64":return e(Gc(a),s);case"binary":return e(a,s);case"buffer":return e(bn&&Buffer.isBuffer(a)?a.toString("binary"):z0(a),s);case"array":return e(_p(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,A=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(A,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[f][p]=x:l[Zr({r:f,c:p})]=x}break}A=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=An(u),l}function r(a,s){return W0(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=qn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Zr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(SA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Dke(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function eb(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Rke(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:l=((r-n)/i+6)%6;break;case r:l=(n-e)/i+2;break;case n:l=(e-r)/i+4;break}return[l/6,c,u/2]}function Mke(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function iS(t,e){if(e===0)return t;var r=Rke(Dke(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),eb(Mke(r))}var Ore=6,Lke=15,Uke=1,cl=Ore;function tb(t){return Math.floor((t+Math.round(128/cl)/256)*cl)}function rb(t){return Math.floor((t-5)/cl*100+.5)/100}function oS(t){return Math.round((t*cl+5)/cl*256)/256}function HB(t){return oS(rb(tb(t)))}function sD(t){var e=Math.abs(t-HB(t)),r=cl;if(e>.005)for(cl=Uke;cl<Lke;++cl)Math.abs(t-HB(t))<=e&&(e=Math.abs(t-HB(t)),r=cl);cl=r}function k0(t){t.width?(t.wpx=tb(t.width),t.wch=rb(t.wpx),t.MDW=cl):t.wpx?(t.wch=rb(t.wpx),t.width=oS(t.wch),t.MDW=cl):typeof t.wch=="number"&&(t.width=oS(t.wch),t.wpx=tb(t.width),t.MDW=cl),t.customWidth&&delete t.customWidth}var Qke=96,Dre=Qke;function nb(t){return t*96/Dre}function av(t){return t*Dre/96}var Vke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Hke(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=en(i);switch(_f(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Xa(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Xa(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function $ke(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=en(i);switch(_f(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function Kke(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=en(i);switch(_f(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Sa(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Xa(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Xa(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Xa(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Xa(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Xa(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Xa(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Xa(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=k6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Xa(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=ep[a.color.index];a.color.index==81&&(c=ep[1]),c||(c=ep[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=iS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Gke(t,e,r){e.NumberFmt=[];for(var n=Qs(Yr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=Yr[n[a]];var s=t[0].match(gl);if(s)for(a=0;a<s.length;++a){var i=en(s[a]);switch(_f(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Gn(Sa(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}mA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function qke(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=hr("numFmt",null,{numFmtId:n,formatCode:ya(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=hr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var xC=["numFmtId","fillId","fontId","borderId","xfId"],vC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function zke(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(gl)||[]).forEach(function(s){var i=en(s),l=0;switch(_f(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<xC.length;++l)n[xC[l]]&&(n[xC[l]]=parseInt(n[xC[l]],10));for(l=0;l<vC.length;++l)n[vC[l]]&&(n[vC[l]]=Xa(n[vC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Xa(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Wke(t){var e=[];return e[e.length]=hr("cellXfs",null),t.forEach(function(r){e[e.length]=hr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=hr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Xke=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&Gke(f,d,u),(f=l.match(a))&&Kke(f,d,c,u),(f=l.match(n))&&$ke(f,d,c,u),(f=l.match(s))&&Hke(f,d,c,u),(f=l.match(r))&&zke(f,d,u),d}}();function Rre(t,e){var r=[ai,hr("styleSheet",null,{xmlns:Wp[0],"xmlns:vt":Fi.vt})],n;return t.SSF&&(n=qke(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Wke(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Yke(t,e){var r=t.read_shift(2),n=fl(t);return[r,n]}function Jke(t,e,r){r||(r=Lt(6+4*e.length)),r.write_shift(2,t),lo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Zke(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=FPe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=kPe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=fl(t),n}function eFe(t,e){e||(e=Lt(25+4*32)),e.write_shift(2,t.sz*20),OPe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),nS(t.color,e);var n=0;return n=2,e.write_shift(1,n),lo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var tFe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],$B,rFe=ml;function cH(t,e){e||(e=Lt(4*3+8*7+16*1)),$B||($B=m4(tFe));var r=$B[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(nS({auto:1},e),nS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function nFe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Mre(t,e,r){r||(r=Lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function U1(t,e){return e||(e=Lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var aFe=ml;function sFe(t,e){return e||(e=Lt(51)),e.write_shift(1,0),U1(null,e),U1(null,e),U1(null,e),U1(null,e),U1(null,e),e.length>e.l?e.slice(0,e.l):e}function iFe(t,e){return e||(e=Lt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),rS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function oFe(t,e,r){var n=Lt(2052);return n.write_shift(4,t),rS(e,n),rS(r,n),n.length>n.l?n.slice(0,n.l):n}function lFe(t,e,r){var n={};n.NumberFmt=[];for(var a in Yr)n.NumberFmt[a]=Yr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return QA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],mA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=iS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function cFe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Yt(t,615,bd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Yt(t,44,Jke(a,e[a]))}),Yt(t,616))}}function uFe(t){var e=1;Yt(t,611,bd(e)),Yt(t,43,eFe({sz:12,color:{theme:1},name:"Calibri",family:2})),Yt(t,612)}function dFe(t){var e=2;Yt(t,603,bd(e)),Yt(t,45,cH({patternType:"none"})),Yt(t,45,cH({patternType:"gray125"})),Yt(t,604)}function fFe(t){var e=1;Yt(t,613,bd(e)),Yt(t,46,sFe()),Yt(t,614)}function AFe(t){var e=1;Yt(t,626,bd(e)),Yt(t,47,Mre({numFmtId:0},65535)),Yt(t,627)}function hFe(t,e){Yt(t,617,bd(e.length)),e.forEach(function(r){Yt(t,47,Mre(r,0))}),Yt(t,618)}function mFe(t){var e=1;Yt(t,619,bd(e)),Yt(t,48,iFe({xfId:0,name:"Normal"})),Yt(t,620)}function pFe(t){var e=0;Yt(t,505,bd(e)),Yt(t,506)}function gFe(t){var e=0;Yt(t,508,oFe(e,"TableStyleMedium9","PivotStyleMedium4")),Yt(t,509)}function xFe(t,e){var r=uc();return Yt(r,278),cFe(r,t.SSF),uFe(r),dFe(r),fFe(r),AFe(r),hFe(r,e.cellXfs),mFe(r),pFe(r),gFe(r),Yt(r,279),r.end()}var vFe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function yFe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(gl)||[]).forEach(function(a){var s=en(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[vFe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function bFe(){}function wFe(){}var NFe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,CFe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,_Fe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function EFe(t,e,r){e.themeElements={};var n;[["clrScheme",NFe,yFe],["fontScheme",CFe,bFe],["fmtScheme",_Fe,wFe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var SFe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Lre(t,e){(!t||t.length===0)&&(t=iD());var r,n={};if(!(r=t.match(SFe)))throw new Error("themeElements not found in theme");return EFe(r[0],n,e),n.raw=t,n}function iD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ai];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function IFe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=jte(s,{type:"array"})}catch{return}var l=Oc(i,"theme/theme/theme1.xml",!0);if(l)return Lre(l,r)}}function BFe(t){return t.read_shift(4)}function PFe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=jFe(t,4);break;case 2:e.xclrValue=xre(t);break;case 3:e.xclrValue=BFe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function jFe(t,e){return ml(t,e)}function TFe(t,e){return ml(t,e)}function kFe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=PFe(t);break;case 6:n[1]=TFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function FFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(kFe(t,r-t.l));return{ixfe:n,ext:s}}function OFe(t,e){e.forEach(function(r){switch(r[0]){}})}function DFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:fl(t)}}function RFe(t){var e=Lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),lo(t.name,e),e.slice(0,e.l)}function MFe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function LFe(t){var e=Lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function UFe(t,e){var r=Lt(8+2*e.length);return r.write_shift(4,t),lo(e,r),r.slice(0,r.l)}function QFe(t){return t.l+=4,t.read_shift(4)!=0}function VFe(t,e){var r=Lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function HFe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return QA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function $Fe(){var t=uc();return Yt(t,332),Yt(t,334,bd(1)),Yt(t,335,RFe({name:"XLDAPR",version:12e4,flags:3496657072})),Yt(t,336),Yt(t,339,UFe(1,"XLDAPR")),Yt(t,52),Yt(t,35,bd(514)),Yt(t,4096,bd(0)),Yt(t,4097,bu(1)),Yt(t,36),Yt(t,53),Yt(t,340),Yt(t,337,VFe(1)),Yt(t,51,LFe([[1,0]])),Yt(t,338),Yt(t,333),t.end()}function KFe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(gl,function(l){var c=en(l);switch(_f(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Ure(){var t=[ai];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function GFe(t){var e=[];if(!t)return e;var r=1;return(t.match(gl)||[]).forEach(function(n){var a=en(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function qFe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Zr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function zFe(t,e,r){var n=[];return QA(t,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function WFe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;QA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function XFe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var gx=1024;function Qre(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[hr("xml",null,{"xmlns:v":Tc.v,"xmlns:o":Tc.o,"xmlns:x":Tc.x,"xmlns:mv":Tc.mv}).replace(/\/>/,">"),hr("o:shapelayout",hr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),hr("v:shapetype",[hr("v:stroke",null,{joinstyle:"miter"}),hr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];gx<t*1e3;)gx+=1e3;return e.forEach(function(s){var i=_s(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?hr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=hr("v:fill",c,l),d={on:"t",obscured:"t"};++gx,a=a.concat(["<v:shape"+Y2({id:"_x0000_s"+gx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,hr("v:shadow",null,d),hr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Do("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Do("x:AutoFill","False"),Do("x:Row",String(i.r)),Do("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function uH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var l=_s(i.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[i.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[i.ref]=s;var c=qn(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=An(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function YFe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=en(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=_s(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&nD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Vre(t){var e=[ai,hr("comments",null,{xmlns:Wp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ya(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ya(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Do("t",ya(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;e.push(Do("t",ya(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function JFe(t,e){var r=[],n=!1,a={},s=0;return t.replace(gl,function(l,c){var u=en(l);switch(_f(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function ZFe(t,e,r){var n=[ai,hr("ThreadedComments",null,{xmlns:Fi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(hr("threadedComment",Do("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function eOe(t,e){var r=[],n=!1;return t.replace(gl,function(s){var i=en(s);switch(_f(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function tOe(t){var e=[ai,hr("personList",null,{xmlns:Fi.TCMNT,"xmlns:x":Wp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(hr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function rOe(t){var e={};e.iauthor=t.read_shift(4);var r=Zp(t);return e.rfx=r.s,e.ref=Zr(r.s),t.l+=16,e}function nOe(t,e){return e==null&&(e=Lt(36)),e.write_shift(4,t[1].iauthor),Dv(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var aOe=fl;function sOe(t){return lo(t.slice(0,54))}function iOe(t,e){var r=[],n=[],a={},s=!1;return QA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function oOe(t){var e=uc(),r=[];return Yt(e,628),Yt(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Yt(e,632,sOe(a.a)))})}),Yt(e,631),Yt(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:_s(n[0]),e:_s(n[0])};Yt(e,635,nOe([s,a])),a.t&&a.t.length>0&&Yt(e,637,BPe(a)),Yt(e,636),delete a.iauthor})}),Yt(e,634),Yt(e,629),e.end()}var lOe="application/vnd.ms-office.vbaProject";function cOe(t){var e=Gr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Gr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),Gr.write(e)}function uOe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Gr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Hre=["xlsb","xlsm","xlam","biff8","xla"];function dOe(){return{"!type":"dialog"}}function fOe(){return{"!type":"dialog"}}function AOe(){return{"!type":"macro"}}function hOe(){return{"!type":"macro"}}var kx=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Cs(d)+(c?"":"$")+ri(u)}return function(a,s){return e=s,a.replace(t,r)}}(),oD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,lD=function(){return function(e,r){return e.replace(oD,function(n,a,s,i,l,c){var u=z6(i)-(s?0:r.c),d=q6(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function $re(t,e){return t.replace(oD,function(r,n,a,s,i,l){return n+(a=="$"?a+s:Cs(z6(s)+e.c))+(i=="$"?i+l:ri(q6(l)+e.r))})}function mOe(t,e,r){var n=dc(e),a=n.s,s=_s(r),i={r:s.r-a.r,c:s.c-a.c};return $re(t,i)}function pOe(t){return t.length!=1}function dH(t){return t.replace(/_xlfn\./g,"")}function ii(t){t.l+=1}function F0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Kre(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Gre(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=F0(t),l=F0(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Gre(t){var e=F0(t),r=F0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function gOe(t,e,r){if(r.biff<8)return Gre(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=F0(t),i=F0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function qre(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return xOe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=F0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function xOe(t){var e=F0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function vOe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function yOe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return bOe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function bOe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function wOe(t,e,r){var n=(t[t.l++]&96)>>5,a=Kre(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function NOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=Kre(t,s,r);return[n,a,i]}function COe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function _Oe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function EOe(t,e,r){var n=(t[t.l++]&96)>>5,a=gOe(t,e-1,r);return[n,a]}function SOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function fH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function IOe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function BOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function POe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function jOe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function TOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function zre(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function kOe(t){return t.read_shift(2),zre(t)}function FOe(t){return t.read_shift(2),zre(t)}function OOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=qre(t,0,r);return[n,a]}function DOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=yOe(t,0,r);return[n,a]}function ROe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=qre(t,0,r);return[n,a,s]}function MOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[Q6e[a],Yre[a],n]}function LOe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:UOe(t);return[a,(s[0]===0?Yre:U6e)[s[1]]]}function UOe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function QOe(t,e,r){t.l+=r&&r.biff==2?3:4}function VOe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function HOe(t){return t.l++,VA[t.read_shift(1)]}function $Oe(t){return t.l++,t.read_shift(2)}function KOe(t){return t.l++,t.read_shift(1)!==0}function GOe(t){return t.l++,ul(t)}function qOe(t,e,r){return t.l++,rw(t,e-1,r)}function zOe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=VA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ul(t);break;case 2:r[1]=eg(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function WOe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Zp:x4)(t));return a}function XOe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=zOe(t,r.biff);return i}function YOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function JOe(t,e,r){if(r.biff==5)return ZOe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function ZOe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function e6e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function t6e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function r6e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function n6e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var a6e=ml,s6e=ml,i6e=ml;function aw(t,e,r){return t.l+=2,[vOe(t)]}function cD(t){return t.l+=6,[]}var o6e=aw,l6e=cD,c6e=cD,u6e=aw;function Wre(t){return t.l+=2,[ci(t),t.read_shift(2)&1]}var d6e=aw,f6e=Wre,A6e=cD,h6e=aw,m6e=aw,p6e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function g6e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=p6e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function x6e(t){return t.l+=2,[t.read_shift(4)]}function v6e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function y6e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function b6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function w6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function N6e(t){return t.l+=4,[0,0]}var AH={1:{n:"PtgExp",f:VOe},2:{n:"PtgTbl",f:i6e},3:{n:"PtgAdd",f:ii},4:{n:"PtgSub",f:ii},5:{n:"PtgMul",f:ii},6:{n:"PtgDiv",f:ii},7:{n:"PtgPower",f:ii},8:{n:"PtgConcat",f:ii},9:{n:"PtgLt",f:ii},10:{n:"PtgLe",f:ii},11:{n:"PtgEq",f:ii},12:{n:"PtgGe",f:ii},13:{n:"PtgGt",f:ii},14:{n:"PtgNe",f:ii},15:{n:"PtgIsect",f:ii},16:{n:"PtgUnion",f:ii},17:{n:"PtgRange",f:ii},18:{n:"PtgUplus",f:ii},19:{n:"PtgUminus",f:ii},20:{n:"PtgPercent",f:ii},21:{n:"PtgParen",f:ii},22:{n:"PtgMissArg",f:ii},23:{n:"PtgStr",f:qOe},26:{n:"PtgSheet",f:v6e},27:{n:"PtgEndSheet",f:y6e},28:{n:"PtgErr",f:HOe},29:{n:"PtgBool",f:KOe},30:{n:"PtgInt",f:$Oe},31:{n:"PtgNum",f:GOe},32:{n:"PtgArray",f:SOe},33:{n:"PtgFunc",f:MOe},34:{n:"PtgFuncVar",f:LOe},35:{n:"PtgName",f:YOe},36:{n:"PtgRef",f:OOe},37:{n:"PtgArea",f:wOe},38:{n:"PtgMemArea",f:e6e},39:{n:"PtgMemErr",f:a6e},40:{n:"PtgMemNoMem",f:s6e},41:{n:"PtgMemFunc",f:t6e},42:{n:"PtgRefErr",f:r6e},43:{n:"PtgAreaErr",f:COe},44:{n:"PtgRefN",f:DOe},45:{n:"PtgAreaN",f:EOe},46:{n:"PtgMemAreaN",f:b6e},47:{n:"PtgMemNoMemN",f:w6e},57:{n:"PtgNameX",f:JOe},58:{n:"PtgRef3d",f:ROe},59:{n:"PtgArea3d",f:NOe},60:{n:"PtgRefErr3d",f:n6e},61:{n:"PtgAreaErr3d",f:_Oe},255:{}},C6e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},_6e={1:{n:"PtgElfLel",f:Wre},2:{n:"PtgElfRw",f:h6e},3:{n:"PtgElfCol",f:o6e},6:{n:"PtgElfRwV",f:m6e},7:{n:"PtgElfColV",f:u6e},10:{n:"PtgElfRadical",f:d6e},11:{n:"PtgElfRadicalS",f:A6e},13:{n:"PtgElfColS",f:l6e},15:{n:"PtgElfColSV",f:c6e},16:{n:"PtgElfRadicalLel",f:f6e},25:{n:"PtgList",f:g6e},29:{n:"PtgSxName",f:x6e},255:{}},E6e={0:{n:"PtgAttrNoop",f:N6e},1:{n:"PtgAttrSemi",f:TOe},2:{n:"PtgAttrIf",f:POe},4:{n:"PtgAttrChoose",f:IOe},8:{n:"PtgAttrGoto",f:BOe},16:{n:"PtgAttrSum",f:QOe},32:{n:"PtgAttrBaxcel",f:fH},33:{n:"PtgAttrBaxcel",f:fH},64:{n:"PtgAttrSpace",f:kOe},65:{n:"PtgAttrSpaceSemi",f:FOe},128:{n:"PtgAttrIfError",f:jOe},255:{}};function sw(t,e,r,n){if(n.biff<8)return ml(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=XOe(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=WOe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(ml(t,e)),s}function iw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=AH[s]||AH[C6e[s]],(s===24||s===25)&&(a=(s===24?_6e:E6e)[t[t.l+1]]),!a||!a.f?ml(t,e):i.push([a.n,a.f(t,e,r)]);return i}function S6e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var I6e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function B6e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Xre(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hH(t,e,r){var n=Xre(t,e,r);return n=="#REF"?n:B6e(n,r)}function ol(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,A,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Ms(" ",t[0][p][1][1]);break;case 1:g=Ms("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+I6e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Xy(b[1][1],i,a),l.push(Yy(d,s));break;case"PtgRefN":d=r?Xy(b[1][1],r,a):b[1][1],l.push(Yy(d,s));break;case"PtgRef3d":f=b[1][1],d=Xy(b[1][2],i,a),m=hH(n,f,a),l.push(m+"!"+Yy(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],B=b[1][1];w||(w=0),w&=127;var P=w==0?[]:l.slice(-w);l.length-=w,B==="User"&&(B=P.shift()),l.push(B+"("+P.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":A=HV(b[1][1],r?{s:r}:i,a),l.push(UB(A,a));break;case"PtgArea":A=HV(b[1][1],i,a),l.push(UB(A,a));break;case"PtgArea3d":f=b[1][1],A=b[1][2],m=hH(n,f,a),l.push(m+"!"+UB(A,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var _=(n.names||[])[h-1]||(n[0]||[])[h],E=_?_.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var I=b[1][1];h=b[1][2];var O;if(a.biff<=5)I<0&&(I=-I),n[I]&&(O=n[I][h]);else{var S="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][h]&&n[I][h].itab>0&&(S=n.SheetNames[n[I][h].itab-1]+"!"):S=n.SheetNames[h-1]+"!"),n[I]&&n[I][h])S+=n[I][h].Name;else if(n[0]&&n[0][h])S+=n[0][h].Name;else{var j=(Xre(n,I,a)||"").split(";;");j[h-1]?S=j[h-1]:S+="SH33TJSERRX"}l.push(S);break}O||(O={Name:"SH33TJSERRY"}),l.push(O.Name);break;case"PtgParen":var D="(",J=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:D=Ms(" ",t[0][p][1][1])+D;break;case 3:D=Ms("\r",t[0][p][1][1])+D;break;case 4:J=Ms(" ",t[0][p][1][1])+J;break;case 5:J=Ms("\r",t[0][p][1][1])+J;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+J);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var ge={c:r.c,r:r.r};if(n.sharedf[Zr(d)]){var se=n.sharedf[Zr(d)];l.push(ol(se,i,ge,n,a))}else{var he=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(ol(u[1],i,ge,n,a)),he=!0;break}he||l.push(b[1])}break;case"PtgArray":l.push("{"+S6e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var me=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&me.indexOf(t[0][x][0])==-1){b=t[0][p];var Z=!0;switch(b[1][0]){case 4:Z=!1;case 0:g=Ms(" ",b[1][1]);break;case 5:Z=!1;case 1:g=Ms("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((Z?g:"")+l.pop()+(Z?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function P6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ml(t,e-2)];var l=iw(t,i,r);return e!==i+a&&(s=sw(t,e-i-a,l,r)),t.l=n,[l,s]}function j6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ml(t,e-2)];var l=iw(t,i,r);return e!==i+a&&(s=sw(t,e-i-a,l,r)),t.l=n,[l,s]}function T6e(t,e,r,n){var a=t.l+e,s=iw(t,n,r),i;return a!==t.l&&(i=sw(t,a-t.l,s,r)),[s,i]}function k6e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=iw(t,s,r);return s==65535?[[],ml(t,e-2)]:(e!==s+2&&(a=sw(t,n-s-2,i,r)),[i,a])}function F6e(t){var e;if(aA(t,t.l+6)!==65535)return[ul(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function O6e(t){if(t==null){var e=Lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Ep(t);return Ep(0)}function KB(t,e,r){var n=t.l+e,a=Ef(t);r.biff==2&&++t.l;var s=F6e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=j6e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function D6e(t,e,r,n,a){var s=Ip(e,r,a),i=O6e(t.v),l=Lt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=io([s,i,l,u]);return f}function v4(t,e,r){var n=t.read_shift(4),a=iw(t,n,r),s=t.read_shift(4),i=s>0?sw(t,s,a,r):null;return[a,i]}var R6e=v4,y4=v4,M6e=v4,L6e=v4,U6e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Yre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Q6e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mH(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function V6e(t){var e="of:="+t.replace(oD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function GB(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function H6e(t){return t.replace(/\./,"!")}var Zy={},Fx={},e2=typeof Map<"u";function uD(t,e,r){var n=0,a=t.length;if(r){if(e2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=e2?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(e2?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function b4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(cl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=rb(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=oS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function np(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function X0(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){mA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Jre(t,e,r,n,a,s){try{n.cellNF&&(t.z=Yr[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=es(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Yr[e]==null&&mA(UBe[e]||"General",e),t.t==="e")t.w=t.w||VA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=W2(t.v);else if(t.t==="d"){var i=Ui(t.v);(i|0)===i?t.w=i.toString(10):t.w=W2(i)}else{if(t.v===void 0)return"";t.w=Cp(t.v,Fx)}else t.t==="d"?t.w=Mu(e,Ui(t.v),Fx):t.w=Mu(e,t.v,Fx)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=iS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=iS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function $6e(t,e,r){if(t&&t["!ref"]){var n=qn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function K6e(t,e){var r=qn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=An(r))}var G6e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,q6e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,z6e=/<(?:\w:)?hyperlink [^>]*>/mg,W6e=/"(\w*:\w*)"/,X6e=/<(?:\w:)?col\b[^>]*[\/]?>/g,Y6e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,J6e=/<(?:\w:)?pageMargins[^>]*\/>/g,Zre=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Z6e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,eDe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function tDe(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(q6e);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var h=u.match(Zre);h?dD(h[0],l,a,r):(h=u.match(Z6e))&&nDe(h[0],h[1]||"",l,a,r);var A=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(A>0){var m=u.slice(A,A+50).match(W6e);m&&K6e(l,m[1])}var p=u.match(eDe);p&&p[1]&&pDe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(X6e);x&&dDe(g,x)}f&&vDe(f[1],l,e,c,s,i);var y=d.match(Y6e);y&&(l["!autofilter"]=ADe(y[0]));var b=[],w=d.match(G6e);if(w)for(A=0;A!=w.length;++A)b[A]=qn(w[A].slice(w[A].indexOf('"')+1));var B=d.match(z6e);B&&lDe(l,B,n);var P=d.match(J6e);if(P&&(l["!margins"]=cDe(en(P[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=An(c)),e.sheetRows>0&&l["!ref"]){var _=qn(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=An(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function rDe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+An(t[r])+'"/>';return e+"</mergeCells>"}function dD(t,e,r,n){var a=en(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Gn(Sa(a.codeName)))}function nDe(t,e,r,n,a){dD(t.slice(0,t.indexOf(">")),r,n,a)}function aDe(t,e,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=lf(ya(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+hr("outlinePr",null,u)}!s&&!l||(a[a.length]=hr("sheetPr",l,i))}var sDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],iDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function oDe(t){var e={sheet:1};return sDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),iDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=aD(t.password).toString(16).toUpperCase()),hr("sheetProtection",null,e)}function lDe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=en(Sa(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Gn(s.location))):(s.Target="#"+Gn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=qn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Zr({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function cDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function uDe(t){return np(t),hr("pageMargins",null,t)}function dDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=en(e[n],!0);a.hidden&&(a.hidden=Xa(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,sD(a.width)),k0(a);s<=i;)t[s++]=ts(a)}}function fDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=hr("col",null,b4(a,n)));return r[r.length]="</cols>",r.join("")}function ADe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function hDe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:An(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=dc(a);i.s.r==i.e.r&&(i.e.r=dc(e["!ref"]).e.r,a=An(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),hr("autoFilter",null,{ref:a})}var mDe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function pDe(t,e){e.Views||(e.Views=[{}]),(t.match(mDe)||[]).forEach(function(r,n){var a=en(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Xa(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function gDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),hr("sheetViews",hr("sheetView",null,a),{})}function xDe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=VA[t.v];break;case"d":n&&n.cellDates?a=es(t.v,-1).toISOString():(t=ts(t),t.t="n",a=""+(t.v=Ui(es(t.v)))),typeof t.z>"u"&&(t.z=Yr[14]);break;default:a=t.v;break}var l=Do("v",ya(a)),c={r:e},u=X0(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Do("v",""+uD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=hr("f",ya(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),hr("c",l,c)}var vDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=X2("v"),i=X2("f");return function(c,u,d,f,h,A){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,B="",P,_,E=0,I=0,O,S,j=0,D=0,J=Array.isArray(A.CellXf),ge,se=[],he=[],me=Array.isArray(u),Z=[],ve={},Se=!1,k=!!d.sheetStubs,F=c.split(e),H=0,Q=F.length;H!=Q;++H){p=F[H].trim();var V=p.length;if(V!==0){var Y=0;e:for(m=0;m<V;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=en(p.slice(Y,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,I=-1,d.sheetRows&&d.sheetRows<E)continue;ve={},Se=!1,_.ht&&(Se=!0,ve.hpt=parseFloat(_.ht),ve.hpx=av(ve.hpt)),_.hidden=="1"&&(Se=!0,ve.hidden=!0),_.outlineLevel!=null&&(Se=!0,ve.level=+_.outlineLevel),Se&&(Z[E-1]=ve)}break;case"<":Y=m;break}if(Y>=m)break;if(_=en(p.slice(Y,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,I=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(ve={},Se=!1,_.ht&&(Se=!0,ve.hpt=parseFloat(_.ht),ve.hpx=av(ve.hpt)),_.hidden=="1"&&(Se=!0,ve.hidden=!0),_.outlineLevel!=null&&(Se=!0,ve.level=+_.outlineLevel),Se&&(Z[E-1]=ve)),g=p.slice(m).split(t);for(var R=0;R!=g.length&&g[R].trim().charAt(0)=="<";++R);for(g=g.slice(R),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,B=x[1],b=0;b!=B.length&&!((w=B.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,I=y}else++I;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=en(p.slice(0,b),!0),_.r||(_.r=Zr({r:E-1,c:I})),B=p.slice(b),P={t:""},(x=B.match(s))!=null&&x[1]!==""&&(P.v=Gn(x[1])),d.cellFormula){if((x=B.match(i))!=null&&x[1]!==""){if(P.f=Gn(Sa(x[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=dH(P.f)),x[0].indexOf('t="array"')>-1)P.F=(B.match(a)||[])[1],P.F.indexOf(":")>-1&&se.push([qn(P.F),P.F]);else if(x[0].indexOf('t="shared"')>-1){S=en(x[0]);var z=Gn(Sa(x[1]));d.xlfn||(z=dH(z)),he[parseInt(S.si,10)]=[S,z,_.r]}}else(x=B.match(/<f[^>]*\/>/))&&(S=en(x[0]),he[S.si]&&(P.f=mOe(he[S.si][1],he[S.si][2],_.r)));var le=_s(_.r);for(b=0;b<se.length;++b)le.r>=se[b][0].s.r&&le.r<=se[b][0].e.r&&le.c>=se[b][0].s.c&&le.c<=se[b][0].e.c&&(P.F=se[b][1])}if(_.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(k)P.t="z";else continue;else P.t=_.t||"n";switch(f.s.c>I&&(f.s.c=I),f.e.c<I&&(f.e.c=I),P.t){case"n":if(P.v==""||P.v==null){if(!k)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!k)continue;P.t="z"}else O=Zy[parseInt(P.v,10)],P.v=O.t,P.r=O.r,d.cellHTML&&(P.h=O.h);break;case"str":P.t="s",P.v=P.v!=null?Sa(P.v):"",d.cellHTML&&(P.h=H6(P.v));break;case"inlineStr":x=B.match(n),P.t="s",x!=null&&(O=nD(x[1]))?(P.v=O.t,d.cellHTML&&(P.h=O.h)):P.v="";break;case"b":P.v=Xa(P.v);break;case"d":d.cellDates?P.v=es(P.v,1):(P.v=Ui(es(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=tre[P.v];break}if(j=D=0,ge=null,J&&_.s!==void 0&&(ge=A.CellXf[_.s],ge!=null&&(ge.numFmtId!=null&&(j=ge.numFmtId),d.cellStyles&&ge.fillId!=null&&(D=ge.fillId))),Jre(P,j,D,d,h,A),d.cellDates&&J&&P.t=="n"&&kv(Yr[j])&&(P.t="d",P.v=g4(P.v)),_.cm&&d.xlmeta){var K=(d.xlmeta.Cell||[])[+_.cm-1];K&&K.type=="XLDAPR"&&(P.D=!0)}if(me){var M=_s(_.r);u[M.r]||(u[M.r]=[]),u[M.r][M.c]=P}else u[_.r]=P}}}}Z.length>0&&(u["!rows"]=Z)}}();function yDe(t,e,r,n){var a=[],s=[],i=qn(t["!ref"]),l="",c,u="",d=[],f=0,h=0,A=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Cs(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=ri(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[f]||[])[h]:t[c];y!==void 0&&(l=xDe(y,c,t,e))!=null&&s.push(l)}(s.length>0||A&&A[f])&&(p={r:u},A&&A[f]&&(g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=nb(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=hr("row",s.join(""),p))}if(A)for(;f<A.length;++f)A&&A[f]&&(p={r:f+1},g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=nb(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=hr("row","",p));return a.join("")}function ene(t,e,r,n){var a=[ai,hr("worksheet",null,{xmlns:Wp[0],"xmlns:r":Fi.r})],s=r.SheetNames[t],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=qn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=An(d)}n||(n={}),c["!comments"]=[];var f=[];aDe(c,r,t,e,a),a[a.length]=hr("dimension",null,{ref:u}),a[a.length]=gDe(c,e,t,r),e.sheetFormat&&(a[a.length]=hr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=fDe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=yDe(c,e),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=oDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=hDe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=rDe(c["!merges"]));var h=-1,A,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(A={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=pa(n,-1,ya(p[1].Target).replace(/#.*$/,""),En.HLINK),A["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(A.location=ya(p[1].Target.slice(h+1))),p[1].Tooltip&&(A.tooltip=ya(p[1].Tooltip)),a[a.length]=hr("hyperlink",null,A))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=uDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Do("ignoredErrors",hr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=pa(n,-1,"../drawings/drawing"+(t+1)+".xml",En.DRAW),a[a.length]=hr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=pa(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",En.VML),a[a.length]=hr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function bDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function wDe(t,e,r){var n=Lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=nb(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,h=-1,A=d<<10;A<d+1<<10;++A){u.c=A;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Zr(u)];m&&(f<0&&(f=A),h=A)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function NDe(t,e,r,n){var a=wDe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Yt(t,0,a)}var CDe=Zp,_De=Dv;function EDe(){}function SDe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=PPe(t),r}function IDe(t,e,r){r==null&&(r=Lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return nS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Xte(t,r),r.slice(0,r.l)}function BDe(t){var e=Vu(t);return[e]}function PDe(t,e,r){return r==null&&(r=Lt(8)),Xp(e,r)}function jDe(t){var e=Yp(t);return[e]}function TDe(t,e,r){return r==null&&(r=Lt(4)),Jp(e,r)}function kDe(t){var e=Vu(t),r=t.read_shift(1);return[e,r,"b"]}function FDe(t,e,r){return r==null&&(r=Lt(9)),Xp(e,r),r.write_shift(1,t.v?1:0),r}function ODe(t){var e=Yp(t),r=t.read_shift(1);return[e,r,"b"]}function DDe(t,e,r){return r==null&&(r=Lt(5)),Jp(e,r),r.write_shift(1,t.v?1:0),r}function RDe(t){var e=Vu(t),r=t.read_shift(1);return[e,r,"e"]}function MDe(t,e,r){return r==null&&(r=Lt(9)),Xp(e,r),r.write_shift(1,t.v),r}function LDe(t){var e=Yp(t),r=t.read_shift(1);return[e,r,"e"]}function UDe(t,e,r){return r==null&&(r=Lt(8)),Jp(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function QDe(t){var e=Vu(t),r=t.read_shift(4);return[e,r,"s"]}function VDe(t,e,r){return r==null&&(r=Lt(12)),Xp(e,r),r.write_shift(4,e.v),r}function HDe(t){var e=Yp(t),r=t.read_shift(4);return[e,r,"s"]}function $De(t,e,r){return r==null&&(r=Lt(8)),Jp(e,r),r.write_shift(4,e.v),r}function KDe(t){var e=Vu(t),r=ul(t);return[e,r,"n"]}function GDe(t,e,r){return r==null&&(r=Lt(16)),Xp(e,r),Ep(t.v,r),r}function tne(t){var e=Yp(t),r=ul(t);return[e,r,"n"]}function qDe(t,e,r){return r==null&&(r=Lt(12)),Jp(e,r),Ep(t.v,r),r}function zDe(t){var e=Vu(t),r=J6(t);return[e,r,"n"]}function WDe(t,e,r){return r==null&&(r=Lt(12)),Xp(e,r),Yte(t.v,r),r}function XDe(t){var e=Yp(t),r=J6(t);return[e,r,"n"]}function YDe(t,e,r){return r==null&&(r=Lt(8)),Jp(e,r),Yte(t.v,r),r}function JDe(t){var e=Vu(t),r=W6(t);return[e,r,"is"]}function ZDe(t){var e=Vu(t),r=fl(t);return[e,r,"str"]}function eRe(t,e,r){return r==null&&(r=Lt(12+4*t.v.length)),Xp(e,r),lo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function tRe(t){var e=Yp(t),r=fl(t);return[e,r,"str"]}function rRe(t,e,r){return r==null&&(r=Lt(8+4*t.v.length)),Jp(e,r),lo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function nRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=y4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function aRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=y4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function sRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=ul(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=y4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function iRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=fl(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=y4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}var oRe=Zp,lRe=Dv;function cRe(t,e){return e==null&&(e=Lt(4)),e.write_shift(4,t),e}function uRe(t,e){var r=t.l+e,n=Zp(t),a=X6(t),s=fl(t),i=fl(t),l=fl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function dRe(t,e){var r=Lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Dv({s:_s(t[0]),e:_s(t[0])},r),Y6("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return lo(a||"",r),lo(t[1].Tooltip||"",r),lo("",r),r.slice(0,r.l)}function fRe(){}function ARe(t,e,r){var n=t.l+e,a=Jte(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=R6e(t,n-t.l,r);i[1]=l}else t.l=n;return i}function hRe(t,e,r){var n=t.l+e,a=Zp(t),s=[a];if(r.cellFormula){var i=L6e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function mRe(t,e,r){r==null&&(r=Lt(18));var n=b4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var rne=["left","right","top","bottom","header","footer"];function pRe(t){var e={};return rne.forEach(function(r){e[r]=ul(t)}),e}function gRe(t,e){return e==null&&(e=Lt(6*8)),np(t),rne.forEach(function(r){Ep(t[r],e)}),e}function xRe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function vRe(t,e,r){r==null&&(r=Lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function yRe(t){var e=Lt(24);return e.write_shift(4,4),e.write_shift(4,1),Dv(t,e),e}function bRe(t,e){return e==null&&(e=Lt(16*4+2)),e.write_shift(2,t.password?aD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function wRe(){}function NRe(){}function CRe(t,e,r,n,a,s,i){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,A,m,p,g,x,y,b,w,B,P=[];l.biff=12,l["!row"]=0;var _=0,E=!1,I=[],O={},S=l.supbooks||a.supbooks||[[]];if(S.sharedf=O,S.arrayf=I,S.SheetNames=a.SheetNames||a.Sheets.map(function(me){return me.name}),!l.supbooks&&(l.supbooks=S,a.Names))for(var j=0;j<a.Names.length;++j)S[0][j+1]=a.Names[j];var D=[],J=[],ge=!1;ab[16]={n:"BrtShortReal",f:tne};var se;if(QA(t,function(Z,ve,Se){if(!h)switch(Se){case 148:u=Z;break;case 0:A=Z,l.sheetRows&&l.sheetRows<=A.r&&(h=!0),w=ri(g=A.r),l["!row"]=A.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=av(Z.hpt)),J[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:Z[2]},Z[2]){case"n":m.v=Z[1];break;case"s":b=Zy[Z[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!Z[1];break;case"e":m.v=Z[1],l.cellText!==!1&&(m.w=VA[m.v]);break;case"str":m.t="s",m.v=Z[1];break;case"is":m.t="s",m.v=Z[1].t;break}if((p=i.CellXf[Z[0].iStyleRef])&&Jre(m,p.numFmtId,null,l,s,i),x=Z[0].c==-1?x+1:Z[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Cs(x)+w]=m,l.cellFormula){for(E=!1,_=0;_<I.length;++_){var k=I[_];A.r>=k[0].s.r&&A.r<=k[0].e.r&&x>=k[0].s.c&&x<=k[0].e.c&&(m.F=An(k[0]),E=!0)}!E&&Z.length>3&&(m.f=Z[3])}if(d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&kv(Yr[p.numFmtId])){var F=Um(m.v);F&&(m.t="d",m.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}se&&(se.type=="XLDAPR"&&(m.D=!0),se=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},x=Z[0].c==-1?x+1:Z[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Cs(x)+w]=m,d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),se&&(se.type=="XLDAPR"&&(m.D=!0),se=void 0);break;case 176:P.push(Z);break;case 49:se=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var H=n["!id"][Z.relId];for(H?(Z.Target=H.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=H):Z.relId==""&&(Z.Target="#"+Z.loc),g=Z.rfx.s.r;g<=Z.rfx.e.r;++g)for(x=Z.rfx.s.c;x<=Z.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=Z):(y=Zr({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=Z);break;case 426:if(!l.cellFormula)break;I.push(Z),B=l.dense?c[g][x]:c[Cs(x)+w],B.f=ol(Z[1],d,{r:A.r,c:x},S,l),B.F=An(Z[0]);break;case 427:if(!l.cellFormula)break;O[Zr(Z[0].s)]=Z[1],B=l.dense?c[g][x]:c[Cs(x)+w],B.f=ol(Z[1],d,{r:A.r,c:x},S,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)D[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},ge||(ge=!0,sD(Z.w/256)),k0(D[Z.e+1]);break;case 161:c["!autofilter"]={ref:An(Z)};break;case 476:c["!margins"]=Z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),Z.name&&(a.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),Z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ve.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Se.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=An(u||d)),l.sheetRows&&c["!ref"]){var he=qn(c["!ref"]);l.sheetRows<=+he.e.r&&(he.e.r=l.sheetRows-1,he.e.r>d.e.r&&(he.e.r=d.e.r),he.e.r<he.s.r&&(he.s.r=he.e.r),he.e.c>d.e.c&&(he.e.c=d.e.c),he.e.c<he.s.c&&(he.s.c=he.e.c),c["!fullref"]=c["!ref"],c["!ref"]=An(he))}return P.length>0&&(c["!merges"]=P),D.length>0&&(c["!cols"]=D),J.length>0&&(c["!rows"]=J),c}function _Re(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ts(e),e.z=e.z||Yr[14],e.v=Ui(es(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=X0(a.cellXfs,e,a),e.l&&s["!links"].push([Zr(c),e.l]),e.c&&s["!comments"].push([Zr(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=uD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,i?Yt(t,18,$De(e,c)):Yt(t,7,VDe(e,c))):(c.t="str",i?Yt(t,17,rRe(e,c)):Yt(t,6,eRe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Yt(t,13,YDe(e,c)):Yt(t,2,WDe(e,c)):i?Yt(t,16,qDe(e,c)):Yt(t,5,GDe(e,c)),!0;case"b":return c.t="b",i?Yt(t,15,DDe(e,c)):Yt(t,4,FDe(e,c)),!0;case"e":return c.t="e",i?Yt(t,14,UDe(e,c)):Yt(t,3,MDe(e,c)),!0}return i?Yt(t,12,TDe(e,c)):Yt(t,1,PDe(e,c)),!0}function ERe(t,e,r,n){var a=qn(e["!ref"]||"A1"),s,i="",l=[];Yt(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=ri(d),NDe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Cs(h)),s=l[h]+i;var A=c?(e[d]||[])[h]:e[s];if(!A){f=!1;continue}f=_Re(t,A,d,h,n,e,f)}}Yt(t,146)}function SRe(t,e){!e||!e["!merges"]||(Yt(t,177,cRe(e["!merges"].length)),e["!merges"].forEach(function(r){Yt(t,176,lRe(r))}),Yt(t,178))}function IRe(t,e){!e||!e["!cols"]||(Yt(t,390),e["!cols"].forEach(function(r,n){r&&Yt(t,60,mRe(n,r))}),Yt(t,391))}function BRe(t,e){!e||!e["!ref"]||(Yt(t,648),Yt(t,649,yRe(qn(e["!ref"]))),Yt(t,650))}function PRe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=pa(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Yt(t,494,dRe(n,a))}}),delete e["!links"]}function jRe(t,e,r,n){if(e["!comments"].length>0){var a=pa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Yt(t,551,Y6("rId"+a)),e["!legacy"]=a}}function TRe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:An(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=dc(s);l.s.r==l.e.r&&(l.e.r=dc(e["!ref"]).e.r,s=An(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Yt(t,161,Dv(qn(s))),Yt(t,162)}}function kRe(t,e,r){Yt(t,133),Yt(t,137,vRe(e,r)),Yt(t,138),Yt(t,134)}function FRe(t,e){e["!protect"]&&Yt(t,535,bRe(e["!protect"]))}function ORe(t,e,r,n){var a=uc(),s=r.SheetNames[t],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=qn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Yt(a,129),(r.vbaraw||i["!outline"])&&Yt(a,147,IDe(l,i["!outline"])),Yt(a,148,_De(c)),kRe(a,i,r.Workbook),IRe(a,i),ERe(a,i,t,e),FRe(a,i),TRe(a,i,r,t),SRe(a,i),PRe(a,i,n),i["!margins"]&&Yt(a,476,gRe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&BRe(a,i),jRe(a,i,t,n),Yt(a,130),a.end()}function DRe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=Gn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function RRe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=DRe(f);d.s.r=d.s.c=0,d.e.c=l,u=Cs(l),h[0].forEach(function(A,m){i[u+ri(m)]={t:"n",v:A,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=An(d)),i}function MRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=t.match(Zre);return l&&dD(l[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function LRe(t,e){t.l+=10;var r=fl(t);return{name:r}}function URe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return QA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var fD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],QRe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],VRe=[],HRe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function pH(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Xa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function gH(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Xa(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function nne(t){gH(t.WBProps,fD),gH(t.CalcPr,HRe),pH(t.WBView,QRe),pH(t.Sheets,VRe),Fx.date1904=Xa(t.WBProps.date1904)}function $Re(t){return!t.Workbook||!t.Workbook.WBProps?"false":Xa(t.Workbook.WBProps.date1904)?"true":"false"}var KRe="][*?/\\".split("");function ane(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return KRe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function GRe(t,e,r){t.forEach(function(n,a){ane(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function qRe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];GRe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)$6e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var zRe=/<\w+:workbook/;function WRe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(gl,function(c,u){var d=en(c);switch(_f(d[0])){case"<?xml":break;case"<workbook":c.match(zRe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":fD.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Xa(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Sa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Gn(Sa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Sa(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Xa(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Gn(Sa(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Wp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return nne(r),r}function sne(t){var e=[ai];e[e.length]=hr("workbook",null,{xmlns:Wp[0],"xmlns:r":Fi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(fD.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=hr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:ya(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=hr("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=hr("definedName",ya(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function XRe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=YT(t),r.name=fl(t),r}function YRe(t,e){return e||(e=Lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Y6(t.strRelID,e),lo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function JRe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?fl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ZRe(t,e){e||(e=Lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Xte(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function e8e(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function t8e(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=jPe(t),i=M6e(t,0,r),l=X6(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function r8e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],ab[16]={n:"BrtFRTArchID$",f:e8e},QA(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=ol(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),nne(r),r.Names=s,r.supbooks=i,r}function n8e(t,e){Yt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Yt(t,156,YRe(a))}Yt(t,144)}function a8e(t,e){e||(e=Lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return lo("SheetJS",e),lo(XE.version,e),lo(XE.version,e),lo("7262",e),e.length>e.l?e.slice(0,e.l):e}function s8e(t,e){e||(e=Lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function i8e(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Yt(t,135),Yt(t,158,s8e(a)),Yt(t,136))}}function o8e(t,e){var r=uc();return Yt(r,131),Yt(r,128,a8e()),Yt(r,153,ZRe(t.Workbook&&t.Workbook.WBProps||null)),i8e(r,t),n8e(r,t),Yt(r,132),r.end()}function l8e(t,e,r){return e.slice(-4)===".bin"?r8e(t,r):WRe(t,r)}function c8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?CRe(t,n,r,a,s,i,l):tDe(t,n,r,a,s,i,l)}function u8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?URe(t,n,r,a,s):MRe(t,n,r,a,s)}function d8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?AOe():hOe()}function f8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?dOe():fOe()}function A8e(t,e,r,n){return e.slice(-4)===".bin"?lFe(t,r,n):Xke(t,r,n)}function h8e(t,e,r){return Lre(t,r)}function m8e(t,e,r){return e.slice(-4)===".bin"?mke(t,r):fke(t,r)}function p8e(t,e,r){return e.slice(-4)===".bin"?iOe(t,r):YFe(t,r)}function g8e(t,e,r){return e.slice(-4)===".bin"?zFe(t):GFe(t)}function x8e(t,e,r,n){return r.slice(-4)===".bin"?WFe(t,e,r,n):void 0}function v8e(t,e,r){return e.slice(-4)===".bin"?HFe(t,e,r):KFe(t,e,r)}function y8e(t,e,r){return(e.slice(-4)===".bin"?o8e:sne)(t)}function b8e(t,e,r,n,a){return(e.slice(-4)===".bin"?ORe:ene)(t,r,n,a)}function w8e(t,e,r){return(e.slice(-4)===".bin"?xFe:Rre)(t,r)}function N8e(t,e,r){return(e.slice(-4)===".bin"?xke:Bre)(t,r)}function C8e(t,e,r){return(e.slice(-4)===".bin"?oOe:Vre)(t)}function _8e(t){return(t.slice(-4)===".bin"?$Fe:Ure)()}var ine=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,one=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function rd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(ine),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(one),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function E8e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(ine),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(one),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var t2;function S8e(t,e){var r=t2[t]||Gn(t);return r==="General"?Cp(e):Mu(r,e)}function I8e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Xa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=es(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Gn(e)]=a}function B8e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||VA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=W2(t.v):t.w=Cp(t.v):t.w=S8e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=t2[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&kv(n)){var a=Um(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function P8e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Vke[n.Pattern]||n.Pattern)}t[e.ID]=e}function j8e(t,e,r,n,a,s,i,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var A=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&A.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Xa(t);break;case"String":n.t="s",n.r=FV(Gn(t)),n.v=t.indexOf("<")>-1?Gn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(es(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Gn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=tre[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=FV(e||t));break}if(B8e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=Gn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=kx(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=kx("RC:RC",a):n.ArrayRange&&(n.F=kx(n.ArrayRange,a),c.push([qn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(A.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function T8e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function qB(t,e){var r=e||{};Fv();var n=py($6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Sa(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ts(r);return i.type="string",nv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Re){a.indexOf("<"+Re)>=0&&(s=!0)}),s)return gMe(n,r);t2={"General Number":"General","General Date":Yr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Yr[15],"Short Date":Yr[14],"Long Time":Yr[19],"Medium Time":Yr[18],"Short Time":Yr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Yr[2],Standard:Yr[4],Percent:Yr[10],Scientific:Yr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},A="",m={},p={},g=rd('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},P={},_="",E=0,I=[],O={},S={},j=0,D=[],J=[],ge={},se=[],he,me=!1,Z=[],ve=[],Se={},k=0,F=0,H={Sheets:[],WBProps:{date1904:!1}},Q={};J2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var V="";l=J2.exec(n);)switch(l[3]=(V=l[3]).toLowerCase()){case"data":if(V=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?j8e(n.slice(x,l.index),_,g,c[c.length-1][0]=="comment"?ge:m,{c:y,r:b},B,se[y],p,Z,r):(_="",g=rd(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(J.length>0&&(m.c=J),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[Cs(y)+ri(b)]=m),m.HRef&&(m.l={Target:Gn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(k=y+(parseInt(m.MergeAcross,10)|0),F=b+(parseInt(m.MergeDown,10)|0),I.push({s:{c:y,r:b},e:{c:k,r:F}})),!r.sheetStubs)m.MergeAcross?y=k+1:++y;else if(m.MergeAcross||m.MergeDown){for(var Y=y;Y<=k;++Y)for(var R=b;R<=F;++R)(Y>y||R>b)&&(r.dense?(h[R]||(h[R]=[]),h[R][Y]={t:"z"}):h[Cs(Y)+ri(R)]={t:"z"});y=k+1}else++y;else m=E8e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,J=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=rd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=rd(l[0]),p.Index&&(b=+p.Index-1),Se={},(p.AutoFitHeight=="0"||p.Height)&&(Se.hpx=parseInt(p.Height,10),Se.hpt=nb(Se.hpx),ve[b]=Se),p.Hidden=="1"&&(Se.hidden=!0,ve[b]=Se));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(A),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=An(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=An(w))),I.length&&(h["!merges"]=I),se.length>0&&(h["!cols"]=se),ve.length>0&&(h["!rows"]=ve),d[A]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=rd(l[0]),A=Gn(u.Name),h=r.dense?[]:{},I=[],Z=[],ve=[],Q={name:A,Hidden:0},H.Sheets.push(Q);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),se=[],me=!1}break;case"style":l[1]==="/"?P8e(B,P,r):P=rd(l[0]);break;case"numberformat":P.nf=Gn(rd(l[0]).Format||"General"),t2[P.nf]&&(P.nf=t2[P.nf]);for(var z=0;z!=392&&Yr[z]!=P.nf;++z);if(z==392){for(z=57;z!=392;++z)if(Yr[z]==null){mA(P.nf,z);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(he=rd(l[0]),he.Hidden&&(he.hidden=!0,delete he.Hidden),he.Width&&(he.wpx=parseInt(he.Width,10)),!me&&he.wpx>10){me=!0,cl=Ore;for(var le=0;le<se.length;++le)se[le]&&k0(se[le])}me&&k0(he),se[he.Index-1||se.length]=he;for(var K=0;K<+he.Span;++K)se[se.length]=ts(he);break;case"namedrange":if(l[1]==="/")break;H.Names||(H.Names=[]);var M=en(l[0]),pe={Name:M.Name,Ref:kx(M.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(pe.Sheet=H.Sheets.length-1),H.Names.push(pe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(E,l.index):E=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=rd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?rje(O,V,n.slice(j,l.index)):j=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));T8e(ge),J.push(ge)}else c.push([l[3],!1]),u=rd(l[0]),ge={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var X=rd(l[0]);h["!autofilter"]={ref:kx(X.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return wH(n,r);var G=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:G=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:G=!1}break;case"excelworkbook":switch(l[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:G=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:G=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(j,l.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else j=l.index+l[0].length;break;case"header":h["!margins"]||np(h["!margins"]={},"xlml"),isNaN(+en(l[0]).Margin)||(h["!margins"].header=+en(l[0]).Margin);break;case"footer":h["!margins"]||np(h["!margins"]={},"xlml"),isNaN(+en(l[0]).Margin)||(h["!margins"].footer=+en(l[0]).Margin);break;case"pagemargins":var ie=en(l[0]);h["!margins"]||np(h["!margins"]={},"xlml"),isNaN(+ie.Top)||(h["!margins"].top=+ie.Top),isNaN(+ie.Left)||(h["!margins"].left=+ie.Left),isNaN(+ie.Right)||(h["!margins"].right=+ie.Right),isNaN(+ie.Bottom)||(h["!margins"].bottom=+ie.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:G=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:G=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:G=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:G=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:G=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:G=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:G=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:G=!1}break;case"smarttags":break;default:G=!1;break}if(G||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?I8e(S,V,D,n.slice(j,l.index)):(D=l,j=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=H,Ie.SSF=ts(Yr),Ie.Props=O,Ie.Custprops=S,Ie}function ak(t,e){switch(hD(e=e||{}),e.type||"base64"){case"base64":return qB(Gc(t),e);case"binary":case"buffer":case"file":return qB(t,e);case"array":return qB(z0(t),e)}}function k8e(t,e){var r=[];return t.Props&&r.push(nje(t.Props,e)),t.Custprops&&r.push(aje(t.Props,t.Custprops)),r.join("")}function F8e(){return""}function O8e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(hr("NumberFormat",null,{"ss:Format":ya(Yr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(hr("Style",s.join(""),i))}),hr("Styles",r.join(""))}function lne(t){return hr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+lD(t.Ref,{r:0,c:0})})}function D8e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(lne(a)))}return hr("Names",r.join(""))}function R8e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(lne(l)))}return s.join("")}function M8e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(hr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(hr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(hr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(hr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Do("ProtectContents","True")),t["!protect"].objects&&a.push(Do("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Do("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Do("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Do("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":hr("WorksheetOptions",a.join(""),{xmlns:Tc.x})}function L8e(t){return t.map(function(e){var r=iPe(e.t||""),n=hr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return hr("Comment",n,{"ss:Author":e.a})}).join("")}function U8e(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ya(lD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=_s(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ya(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ya(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=VA[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Yr[14]);break;case"s":f="String",h=sPe(t.v||"");break}var A=X0(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+A),l["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=L8e(t.c)),hr("Cell",p,l)}function Q8e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=av(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function V8e(t,e,r,n){if(!t["!ref"])return"";var a=qn(t["!ref"]),s=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){k0(g);var y=!!g.width,b=b4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=tb(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(hr("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[Q8e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var A={r:u,c:f},m=Zr(A),p=c?(t[u]||[])[f]:t[m];d.push(U8e(p,m,t,e,r,n,A))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function H8e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?R8e(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?V8e(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(M8e(s,e,t,r)),n.join("")}function $8e(t,e){e||(e={}),t.SSF||(t.SSF=ts(Yr)),t.SSF&&(Fv(),h4(t.SSF),e.revssf=p4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],X0(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(k8e(t,e)),r.push(F8e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(hr("Worksheet",H8e(n,e,t),{"ss:Name":ya(t.SheetNames[n])}));return r[2]=O8e(t,e),r[3]=D8e(t),ai+hr("Workbook",r.join(""),{xmlns:Tc.ss,"xmlns:o":Tc.o,"xmlns:x":Tc.x,"xmlns:ss":Tc.ss,"xmlns:dt":Tc.dt,"xmlns:html":Tc.html})}function K8e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=DPe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=RPe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var G8e=[60,1084,2066,2165,2175];function q8e(t,e,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=aA(r,r.l),u=sk[c],d=0;u!=null&&G8e.indexOf(c)>-1;)s=aA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=sk[c=aA(r,r.l)];var f=io(i);Fo(f,0);var h=0;f.lens=[];for(var A=0;A<i.length;++A)f.lens.push(h),h+=i[A].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function Wd(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Yr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||VA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=W2(t.v):t.w=Cp(t.v):t.w=Mu(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&kv(Yr[n]||String(n))){var a=Um(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function yC(t,e,r){return{v:t,ixfe:e,t:r}}function z8e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},l=null,c=[],u="",d={},f,h="",A,m,p,g,x={},y=[],b,w,B=[],P=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},I=function(fe){return fe<8?ep[fe]:fe<64&&P[fe-8]||ep[fe]},O=function(fe,oe,Be){var Me=oe.XF.data;if(!(!Me||!Me.patternType||!Be||!Be.cellStyles)){oe.s={},oe.s.patternType=Me.patternType;var Ze;(Ze=eb(I(Me.icvFore)))&&(oe.s.fgColor={rgb:Ze}),(Ze=eb(I(Me.icvBack)))&&(oe.s.bgColor={rgb:Ze})}},S=function(fe,oe,Be){if(!(Se>1)&&!(Be.sheetRows&&fe.r>=Be.sheetRows)){if(Be.cellStyles&&oe.XF&&oe.XF.data&&O(fe,oe,Be),delete oe.ixfe,delete oe.XF,f=fe,h=Zr(fe),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),fe.r<i.s.r&&(i.s.r=fe.r),fe.c<i.s.c&&(i.s.c=fe.c),fe.r+1>i.e.r&&(i.e.r=fe.r+1),fe.c+1>i.e.c&&(i.e.c=fe.c+1),Be.cellFormula&&oe.f){for(var Me=0;Me<y.length;++Me)if(!(y[Me][0].s.c>fe.c||y[Me][0].s.r>fe.r)&&!(y[Me][0].e.c<fe.c||y[Me][0].e.r<fe.r)){oe.F=An(y[Me][0]),(y[Me][0].s.c!=fe.c||y[Me][0].s.r!=fe.r)&&delete oe.f,oe.f&&(oe.f=""+ol(y[Me][1],i,fe,Z,j));break}}Be.dense?(a[fe.r]||(a[fe.r]=[]),a[fe.r][fe.c]=oe):a[h]=oe}},j={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(j.password=e.password);var D,J=[],ge=[],se=[],he=[],me=!1,Z=[];Z.SheetNames=j.snames,Z.sharedf=j.sharedf,Z.arrayf=j.arrayf,Z.names=[],Z.XTI=[];var ve=0,Se=0,k=0,F=[],H=[],Q;j.codepage=1200,hd(1200);for(var V=!1;t.l<t.length-1;){var Y=t.l,R=t.read_shift(2);if(R===0&&ve===10)break;var z=t.l===t.length?0:t.read_shift(2),le=sk[R];if(le&&le.f){if(e.bookSheets&&ve===133&&R!==133)break;if(ve=R,le.r===2||le.r==12){var K=t.read_shift(2);if(z-=2,!j.enc&&K!==R&&((K&255)<<8|K>>8)!==R)throw new Error("rt mismatch: "+K+"!="+R);le.r==12&&(t.l+=10,z-=10)}var M={};if(R===10?M=le.f(t,z,j):M=q8e(R,le,t,z,j),Se==0&&[9,521,1033,2057].indexOf(ve)===-1)continue;switch(R){case 34:r.opts.Date1904=_.WBProps.date1904=M;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(j.enc||(t.l=0),j.enc=M,!e.password)throw new Error("File is password-protected");if(M.valid==null)throw new Error("Encryption scheme unsupported");if(!M.valid)throw new Error("Password is incorrect");break;case 92:j.lastuser=M;break;case 66:var pe=Number(M);switch(pe){case 21010:pe=1200;break;case 32768:pe=1e4;break;case 32769:pe=1252;break}hd(j.codepage=pe),V=!0;break;case 317:j.rrtabid=M;break;case 25:j.winlocked=M;break;case 439:r.opts.RefreshAll=M;break;case 12:r.opts.CalcCount=M;break;case 16:r.opts.CalcDelta=M;break;case 17:r.opts.CalcIter=M;break;case 13:r.opts.CalcMode=M;break;case 14:r.opts.CalcPrecision=M;break;case 95:r.opts.CalcSaveRecalc=M;break;case 15:j.CalcRefMode=M;break;case 2211:r.opts.FullCalc=M;break;case 129:M.fDialog&&(a["!type"]="dialog"),M.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),M.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(M);break;case 430:Z.push([M]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(M);break;case 24:case 536:Q={Name:M.Name,Ref:ol(M.rgce,i,null,Z,j)},M.itab>0&&(Q.Sheet=M.itab-1),Z.names.push(Q),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(M),M.Name=="_xlnm._FilterDatabase"&&M.itab>0&&M.rgce&&M.rgce[0]&&M.rgce[0][0]&&M.rgce[0][0][0]=="PtgArea3d"&&(H[M.itab-1]={ref:An(M.rgce[0][0][1][2])});break;case 22:j.ExternCount=M;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(M),Z.XTI=Z.XTI.concat(M);break;case 2196:if(j.biff<8)break;Q!=null&&(Q.Comment=M[1]);break;case 18:a["!protect"]=M;break;case 19:M!==0&&j.WTF&&console.error("Password verifier: "+M);break;case 133:s[M.pos]=M,j.snames.push(M.name);break;case 10:{if(--Se)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=An(i),e.sheetRows&&e.sheetRows<=i.e.r){var X=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=An(i),i.e.r=X}i.e.r++,i.e.c++}J.length>0&&(a["!merges"]=J),ge.length>0&&(a["!objects"]=ge),se.length>0&&(a["!cols"]=se),he.length>0&&(a["!rows"]=he),_.Sheets.push(E)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(j.biff===8&&(j.biff={9:2,521:3,1033:4}[R]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[M.BIFFVer]||8),j.biffguess=M.BIFFVer==0,M.BIFFVer==0&&M.dt==4096&&(j.biff=5,V=!0,hd(j.codepage=28591)),j.biff==8&&M.BIFFVer==0&&M.dt==16&&(j.biff=2),Se++)break;if(a=e.dense?[]:{},j.biff<8&&!V&&(V=!0,hd(j.codepage=e.codepage||1252)),j.biff<5||M.BIFFVer==0&&M.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var G={pos:t.l-z,name:u};s[G.pos]=G,j.snames.push(u)}else u=(s[Y]||{name:""}).name;M.dt==32&&(a["!type"]="chart"),M.dt==64&&(a["!type"]="macro"),J=[],ge=[],j.arrayf=y=[],se=[],he=[],me=!1,E={Hidden:(s[Y]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[M.r]||[])[M.c]:a[Zr({c:M.c,r:M.r})])&&++M.c,b={ixfe:M.ixfe,XF:B[M.ixfe]||{},v:M.val,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e);break;case 5:case 517:b={ixfe:M.ixfe,XF:B[M.ixfe],v:M.val,t:M.t},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e);break;case 638:b={ixfe:M.ixfe,XF:B[M.ixfe],v:M.rknum,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e);break;case 189:for(var ie=M.c;ie<=M.C;++ie){var Ie=M.rkrec[ie-M.c][0];b={ixfe:Ie,XF:B[Ie],v:M.rkrec[ie-M.c][1],t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:ie,r:M.r},b,e)}break;case 6:case 518:case 1030:{if(M.val=="String"){l=M;break}if(b=yC(M.val,M.cell.ixfe,M.tt),b.XF=B[b.ixfe],e.cellFormula){var Re=M.formula;if(Re&&Re[0]&&Re[0][0]&&Re[0][0][0]=="PtgExp"){var ze=Re[0][0][1][0],st=Re[0][0][1][1],lt=Zr({r:ze,c:st});x[lt]?b.f=""+ol(M.formula,i,M.cell,Z,j):b.F=((e.dense?(a[ze]||[])[st]:a[lt])||{}).F}else b.f=""+ol(M.formula,i,M.cell,Z,j)}k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S(M.cell,b,e),l=M}break;case 7:case 519:if(l)l.val=M,b=yC(M,l.cell.ixfe,"s"),b.XF=B[b.ixfe],e.cellFormula&&(b.f=""+ol(l.formula,i,l.cell,Z,j)),k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(M);var _t=Zr(M[0].s);if(A=e.dense?(a[M[0].s.r]||[])[M[0].s.c]:a[_t],e.cellFormula&&A){if(!l||!_t||!A)break;A.f=""+ol(M[1],i,M[0],Z,j),A.F=An(M[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!l)break;x[Zr(l.cell)]=M[0],A=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[Zr(l.cell)],(A||{}).f=""+ol(M[0],i,f,Z,j)}}break;case 253:b=yC(c[M.isst].t,M.ixfe,"s"),c[M.isst].h&&(b.h=c[M.isst].h),b.XF=B[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:M.ixfe,XF:B[M.ixfe],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e));break;case 190:if(e.sheetStubs)for(var bt=M.c;bt<=M.C;++bt){var St=M.ixfe[bt-M.c];b={ixfe:St,XF:B[St],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:bt,r:M.r},b,e)}break;case 214:case 516:case 4:b=yC(M.val,M.ixfe,"s"),b.XF=B[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Wd(b,e,r.opts.Date1904),S({c:M.c,r:M.r},b,e);break;case 0:case 512:Se===1&&(i=M);break;case 252:c=M;break;case 1054:if(j.biff==4){F[k++]=M[1];for(var kt=0;kt<k+163&&Yr[kt]!=M[1];++kt);kt>=163&&mA(M[1],k+163)}else mA(M[1],M[0]);break;case 30:{F[k++]=M;for(var et=0;et<k+163&&Yr[et]!=M;++et);et>=163&&mA(M,k+163)}break;case 229:J=J.concat(M);break;case 93:ge[M.cmo[0]]=j.lastobj=M;break;case 438:j.lastobj.TxO=M;break;case 127:j.lastobj.ImData=M;break;case 440:for(g=M[0].s.r;g<=M[0].e.r;++g)for(p=M[0].s.c;p<=M[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[Zr({c:p,r:g})],A&&(A.l=M[1]);break;case 2048:for(g=M[0].s.r;g<=M[0].e.r;++g)for(p=M[0].s.c;p<=M[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[Zr({c:p,r:g})],A&&A.l&&(A.l.Tooltip=M[1]);break;case 28:{if(j.biff<=5&&j.biff>=2)break;A=e.dense?(a[M[0].r]||[])[M[0].c]:a[Zr(M[0])];var ce=ge[M[2]];A||(e.dense?(a[M[0].r]||(a[M[0].r]=[]),A=a[M[0].r][M[0].c]={t:"z"}):A=a[Zr(M[0])]={t:"z"},i.e.r=Math.max(i.e.r,M[0].r),i.s.r=Math.min(i.s.r,M[0].r),i.e.c=Math.max(i.e.c,M[0].c),i.s.c=Math.min(i.s.c,M[0].c)),A.c||(A.c=[]),m={a:M[1],t:ce.TxO.t},A.c.push(m)}break;case 2173:OFe(B[M.ixfe],M.ext);break;case 125:{if(!j.cellStyles)break;for(;M.e>=M.s;)se[M.e--]={width:M.w/256,level:M.level||0,hidden:!!(M.flags&1)},me||(me=!0,sD(M.w/256)),k0(se[M.e+1])}break;case 520:{var Qe={};M.level!=null&&(he[M.r]=Qe,Qe.level=M.level),M.hidden&&(he[M.r]=Qe,Qe.hidden=!0),M.hpt&&(he[M.r]=Qe,Qe.hpt=M.hpt,Qe.hpx=av(M.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||np(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[R]]=M;break;case 161:a["!margins"]||np(a["!margins"]={}),a["!margins"].header=M.header,a["!margins"].footer=M.footer;break;case 574:M.RTL&&(_.Views[0].RTL=!0);break;case 146:P=M;break;case 2198:D=M;break;case 140:w=M;break;case 442:u?E.CodeName=M||E.name:_.WBProps.CodeName=M||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+R.toString(16)),t.l+=z}return r.SheetNames=Qs(s).sort(function(xe,fe){return Number(xe)-Number(fe)}).map(function(xe){return s[xe].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&H.forEach(function(xe,fe){r.Sheets[r.SheetNames[fe]]["!autofilter"]=xe}),r.Strings=c,r.SSF=ts(Yr),j.enc&&(r.Encryption=j.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),Z.names.length>0&&(_.Names=Z.names),r.Workbook=_,r}var r2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function W8e(t,e,r){var n=Gr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=JV(n,JT,r2.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Gr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var l=JV(i,ZT,r2.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(ore(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function X8e(t,e){var r=[],n=[],a=[],s=0,i,l=IV(JT,"n"),c=IV(ZT,"n");if(t.Props)for(i=Qs(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Qs(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)hre.indexOf(a[s][0])>-1||ire.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Gr.utils.cfb_add(e,"/SummaryInformation",ZV(n,r2.SI,c,ZT)),(r.length||u.length)&&Gr.utils.cfb_add(e,"/DocumentSummaryInformation",ZV(r,r2.DSI,l,JT,u.length?u:null,r2.UDI))}function cne(t,e){e||(e={}),hD(e),O6(),e.codepage&&F6(e.codepage);var r,n;if(t.FullPaths){if(Gr.find(t,"/encryption"))throw new Error("File is password-protected");r=Gr.find(t,"!CompObj"),n=Gr.find(t,"/Workbook")||Gr.find(t,"/Book")}else{switch(e.type){case"base64":t=Fc(Gc(t));break;case"binary":t=Fc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Fo(t,0),n={content:t}}var a,s;if(r&&K8e(r),e.bookProps&&!e.bookSheets)a={};else{var i=bn?"buffer":"array";if(n&&n.content)a=z8e(n.content,e);else if((s=Gr.find(t,"PerfectOffice_MAIN"))&&s.content)a=rp.to_workbook(s.content,(e.type=i,e));else if((s=Gr.find(t,"NativeContent_MAIN"))&&s.content)a=rp.to_workbook(s.content,(e.type=i,e));else throw(s=Gr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Gr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=cOe(t))}var l={};return t.FullPaths&&W8e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function Y8e(t,e){var r=e||{},n=Gr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Gr.utils.cfb_add(n,a,une(t,r)),r.biff==8&&(t.Props||t.Custprops)&&X8e(t,n),r.biff==8&&t.vbaraw&&uOe(n,Gr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var ab={0:{f:bDe},1:{f:BDe},2:{f:zDe},3:{f:RDe},4:{f:kDe},5:{f:KDe},6:{f:ZDe},7:{f:QDe},8:{f:iRe},9:{f:sRe},10:{f:nRe},11:{f:aRe},12:{f:jDe},13:{f:XDe},14:{f:LDe},15:{f:ODe},16:{f:tne},17:{f:tRe},18:{f:HDe},19:{f:W6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:t8e},40:{},42:{},43:{f:Zke},44:{f:Yke},45:{f:rFe},46:{f:aFe},47:{f:nFe},48:{},49:{f:CPe},50:{},51:{f:MFe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:_re},62:{f:JDe},63:{f:qFe},64:{f:wRe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ml,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:xRe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:SDe},148:{f:CDe,p:16},151:{f:fRe},152:{},153:{f:JRe},154:{},155:{},156:{f:XRe},157:{},158:{},159:{T:1,f:hke},160:{T:-1},161:{T:1,f:Zp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:oRe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:DFe},336:{T:-1},337:{f:QFe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:YT},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Cre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ARe},427:{f:hRe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:pRe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:EDe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:uRe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:YT},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:aOe},633:{T:1},634:{T:-1},635:{T:1,f:rOe},636:{T:-1},637:{f:IPe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:LRe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:NRe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},sk={6:{f:KB},10:{f:_h},12:{f:ci},13:{f:ci},14:{f:zs},15:{f:zs},16:{f:ul},17:{f:zs},18:{f:zs},19:{f:ci},20:{f:sH},21:{f:sH},23:{f:Cre},24:{f:oH},25:{f:zs},26:{},27:{},28:{f:NTe},29:{},34:{f:zs},35:{f:iH},38:{f:ul},39:{f:ul},40:{f:ul},41:{f:ul},42:{f:zs},43:{f:zs},47:{f:Oke},49:{f:Xje},51:{f:ci},60:{},61:{f:Kje},64:{f:zs},65:{f:Wje},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:Fje},93:{f:ETe},94:{},95:{f:zs},96:{},97:{},99:{f:zs},125:{f:_re},128:{f:dTe},129:{f:Dje},130:{f:ci},131:{f:zs},132:{f:zs},133:{f:Rje},134:{},140:{f:FTe},141:{f:ci},144:{},146:{f:RTe},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:$Te},161:{f:UTe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:oTe},190:{f:lTe},193:{f:_h},197:{},198:{},199:{},200:{},201:{},202:{f:zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:zs},222:{},224:{f:uTe},225:{f:kje},226:{f:_h},227:{},229:{f:CTe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Lje},253:{f:Jje},255:{f:Qje},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:mre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zs},353:{f:_h},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:pTe},431:{f:zs},432:{},433:{},434:{},437:{},438:{f:BTe},439:{f:zs},440:{f:PTe},441:{},442:{f:nw},443:{},444:{f:ci},445:{},446:{},448:{f:_h},449:{f:$je,r:2},450:{f:_h},512:{f:rH},513:{f:HTe},515:{f:hTe},516:{f:eTe},517:{f:aH},519:{f:KTe},520:{f:Vje},523:{},545:{f:lH},549:{f:tH},566:{},574:{f:qje},638:{f:iTe},659:{},1048:{},1054:{f:rTe},1084:{},1212:{f:yTe},2048:{f:TTe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:gC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:_h},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:MTe,r:12},2173:{f:FFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:vTe,r:12},2197:{},2198:{f:IFe,r:12},2199:{},2200:{},2201:{},2202:{f:bTe,r:12},2203:{f:_h},2204:{},2205:{},2206:{},2207:{},2211:{f:Hje},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:QTe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:DTe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:rH},1:{},2:{f:XTe},3:{f:zTe},4:{f:qTe},5:{f:aH},7:{f:JTe},8:{},9:{f:gC},11:{},22:{f:ci},30:{f:aTe},31:{},32:{},33:{f:lH},36:{},37:{f:tH},50:{f:ZTe},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:GTe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:eke},223:{},234:{},354:{},421:{},518:{f:KB},521:{f:gC},536:{f:oH},547:{f:iH},561:{},579:{},1030:{f:KB},1033:{f:gC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function mr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&G6(r)&&t.push(r)}}function J8e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return mr(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function ow(t,e,r){return t||(t=Lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Z8e(t,e,r,n){var a=Lt(9);return ow(a,t,e),pre(r,n||"b",a),a}function eMe(t,e,r){var n=Lt(8+2*r.length);return ow(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function tMe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Ui(es(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?mr(t,2,YTe(r,n,a)):mr(t,3,WTe(r,n,a));return;case"b":case"e":mr(t,5,Z8e(r,n,e.v,e.t));return;case"s":case"str":mr(t,4,eMe(r,n,(e.v||"").slice(0,255)));return}mr(t,1,ow(null,r,n))}function rMe(t,e,r,n){var a=Array.isArray(e),s=qn(e["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=An(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ri(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Cs(d)),i=c[d]+l;var f=a?(e[u]||[])[d]:e[i];f&&tMe(t,f,u,d)}}}function nMe(t,e){for(var r=e||{},n=uc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return mr(n,r.biff==4?1033:r.biff==3?521:9,rD(t,16,r)),rMe(n,t.Sheets[t.SheetNames[a]],a,r),mr(n,10),n.end()}function aMe(t,e,r){mr(t,49,Yje({sz:12,name:"Arial"},r))}function sMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&mr(t,1054,nTe(a,e[a],r))})}function iMe(t,e){var r=Lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),mr(t,2151,r),r=Lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),bre(qn(e["!ref"]||"A1"),r),r.write_shift(4,4),mr(t,2152,r)}function oMe(t,e){for(var r=0;r<16;++r)mr(t,224,nH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){mr(t,224,nH(n,0,e))})}function lMe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];mr(t,440,jTe(n)),n[1].Tooltip&&mr(t,2048,kTe(n))}delete e["!links"]}function cMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&mr(t,125,LTe(b4(a,n),a))})}}function uMe(t,e,r,n,a){var s=16+X0(a.cellXfs,e,a);if(e.v==null&&!e.bf){mr(t,513,Ip(r,n,s));return}if(e.bf)mr(t,6,D6e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ui(es(e.v)):e.v;mr(t,515,mTe(r,n,i,s));break;case"b":case"e":mr(t,517,ATe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=uD(a.Strings,e.v,a.revStrings);mr(t,253,Zje(r,n,l,s))}else mr(t,516,tTe(r,n,(e.v||"").slice(0,255),s,a));break;default:mr(t,513,Ip(r,n,s))}}function dMe(t,e,r){var n=uc(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",h=[],A=qn(s["!ref"]||"A1"),m=u?65536:16384;if(A.e.c>255||A.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,m-1)}mr(n,2057,rD(r,16,e)),mr(n,13,bu(1)),mr(n,12,bu(100)),mr(n,15,Tl(!0)),mr(n,17,Tl(!1)),mr(n,16,Ep(.001)),mr(n,95,Tl(!0)),mr(n,42,Tl(!1)),mr(n,43,Tl(!1)),mr(n,130,bu(1)),mr(n,128,fTe()),mr(n,131,Tl(!1)),mr(n,132,Tl(!1)),u&&cMe(n,s["!cols"]),mr(n,512,sTe(A,e)),u&&(s["!links"]=[]);for(var p=A.s.r;p<=A.e.r;++p){f=ri(p);for(var g=A.s.c;g<=A.e.c;++g){p===A.s.r&&(h[g]=Cs(g)),d=h[g]+f;var x=c?(s[p]||[])[g]:s[d];x&&(uMe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&mr(n,574,zje((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&mr(n,229,_Te(s["!merges"])),u&&lMe(n,s),mr(n,442,gre(y)),u&&iMe(n,s),mr(n,10),n.end()}function fMe(t,e,r){var n=uc(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(mr(n,2057,rD(t,5,r)),r.bookType=="xla"&&mr(n,135),mr(n,225,l?bu(1200):null),mr(n,193,Aje(2)),c&&mr(n,191),c&&mr(n,192),mr(n,226),mr(n,92,Oje("SheetJS",r)),mr(n,66,bu(l?1200:1252)),l&&mr(n,353,bu(0)),l&&mr(n,448),mr(n,317,VTe(t.SheetNames.length)),l&&t.vbaraw&&mr(n,211),l&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";mr(n,442,gre(u))}mr(n,156,bu(17)),mr(n,25,Tl(!1)),mr(n,18,Tl(!1)),mr(n,19,bu(0)),l&&mr(n,431,Tl(!1)),l&&mr(n,444,bu(0)),mr(n,61,Gje()),mr(n,64,Tl(!1)),mr(n,141,bu(0)),mr(n,34,Tl($Re(t)=="true")),mr(n,14,Tl(!0)),l&&mr(n,439,Tl(!1)),mr(n,218,bu(0)),aMe(n,t,r),sMe(n,t.SSF,r),oMe(n,r),l&&mr(n,352,Tl(!1));var d=n.end(),f=uc();l&&mr(f,140,OTe()),l&&r.Strings&&J8e(f,252,Uje(r.Strings)),mr(f,10);var h=f.end(),A=uc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};mr(A,133,Mje({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=A.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),io(b)}function AMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(Fv(),h4(t.SSF),r.revssf=p4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,mD(r),r.cellXfs=[],X0(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=dMe(a,r,t);return n.unshift(fMe(t,n,r)),io(n)}function une(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=dc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return AMe(t,e);case 4:case 3:case 2:return nMe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function xH(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,l=s&&s.index||t.length,c=YBe(t.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var B=0;B<m.length;++B){var P=m[B];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,B=-1)}var _=en(y.slice(0,y.indexOf(">")));h=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var E=_.t||_["data-t"]||"";if(!b.length){d+=h;continue}if(b=Fte(b),A.s.r>u&&(A.s.r=u),A.e.r<u&&(A.e.r=u),A.s.c>d&&(A.s.c=d),A.e.c<d&&(A.e.c=d),!b.length){d+=h;continue}var I={t:"s",v:b};r.raw||!b.trim().length||E=="s"||(b==="TRUE"?I={t:"b",v:!0}:b==="FALSE"?I={t:"b",v:!1}:isNaN(yd(b))?isNaN(rv(b).getDate())||(I={t:"d",v:es(b)},r.cellDates||(I={t:"n",v:Ui(I.v)}),I.z=r.dateNF||Yr[14]):I={t:"n",v:yd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=I):n[Zr({r:u,c:d})]=I,d+=h}}}}return n["!ref"]=An(A),m.length&&(n["!merges"]=m),n}function hMe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Zr({r,c:i}),f=n.dense?(t[r]||[])[i]:t[d],h=f&&f.v!=null&&(f.h||H6(f.w||(SA(f),f.w)||""))||"",A={};l>1&&(A.rowspan=l),c>1&&(A.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(A["data-t"]=f&&f.t||"z",f.v!=null&&(A["data-v"]=f.v),f.z!=null&&(A["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),A.id=(n.id||"sjs")+"-"+d,s.push(hr("td",h,A))}}var m="<tr>";return m+s.join("")+"</tr>"}var mMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',pMe="</body></html>";function gMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return W0(xH(r[0],e),e);var n=xD();return r.forEach(function(a,s){vD(n,xH(a,e),"Sheet"+(s+1))}),n}function xMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function dne(t,e){var r=e||{},n=r.header!=null?r.header:mMe,a=r.footer!=null?r.footer:pMe,s=[n],i=dc(t["!ref"]);r.dense=Array.isArray(t),s.push(xMe(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(hMe(t,i,l,r));return s.push("</table>"+a),s.join("")}function fne(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?_s(n.origin):n.origin;a=i.r,s=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=dc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,A=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(vH(w)){if(n.display)continue;A[p]={hidden:!0}}var B=w.children;for(g=x=0;g<B.length;++g){var P=B[g];if(!(n.display&&vH(P))){var _=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):Fte(P.innerHTML),E=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<f.length;++h){var I=f[h];I.s.c==x+s&&I.s.r<p+a&&p+a<=I.e.r&&(x=I.e.c+1-s,h=-1)}b=+P.getAttribute("colspan")||1,((y=+P.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var O={t:"s",v:_},S=P.getAttribute("data-t")||P.getAttribute("t")||"";_!=null&&(_.length==0?O.t=S||"z":n.raw||_.trim().length==0||S=="s"||(_==="TRUE"?O={t:"b",v:!0}:_==="FALSE"?O={t:"b",v:!1}:isNaN(yd(_))?isNaN(rv(_).getDate())||(O={t:"d",v:es(_)},n.cellDates||(O={t:"n",v:Ui(O.v)}),O.z=n.dateNF||Yr[14]):O={t:"n",v:yd(_)})),O.z===void 0&&E!=null&&(O.z=E);var j="",D=P.getElementsByTagName("A");if(D&&D.length)for(var J=0;J<D.length&&!(D[J].hasAttribute("href")&&(j=D[J].getAttribute("href"),j.charAt(0)!="#"));++J);j&&j.charAt(0)!="#"&&(O.l={Target:j}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=O):t[Zr({c:x+s,r:p+a})]=O,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=An(u),p>=c&&(t["!fullref"]=An((u.e.r=l.length-m+p-1+a,u))),t}function Ane(t,e){var r=e||{},n=r.dense?[]:{};return fne(n,t,e)}function vMe(t,e){return W0(Ane(t,e),e)}function vH(t){var e="",r=yMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function yMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function bMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Gn(e.replace(/<[^>]*>/g,""));return[r]}var yH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function hne(t,e){var r=e||{},n=$6(t),a=[],s,i,l={name:""},c="",u=0,d,f,h={},A=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],B=-1,P=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,I={},O=[],S={},j=0,D=0,J=[],ge=1,se=1,he=[],me={Names:[]},Z={},ve=["",""],Se=[],k={},F="",H=0,Q=!1,V=!1,Y=0;for(J2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=J2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=An(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=An(_)),O.length&&(m["!merges"]=O),J.length&&(m["!rows"]=J),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),A.push(d.name),h[d.name]=m,V=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=en(p[0],!1),B=P=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},O=[],J=[],V=!0);break;case"table-row-group":p[1]==="/"?--E:++E;break;case"table-row":case"":if(p[1]==="/"){B+=ge,ge=1;break}if(f=en(p[0],!1),f.?B=f.-1:B==-1&&(B=0),ge=+f["number-rows-repeated"]||1,ge<10)for(Y=0;Y<ge;++Y)E>0&&(J[B+Y]={level:E});P=-1;break;case"covered-table-cell":p[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(m[B]||(m[B]=[]),m[B][P]={t:"z"}):m[Zr({r:B,c:P})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++P,x=en(p[0],!1),se=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=mH(Gn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=Gn(x["string-value"]||""),r.dense?(m[B]||(m[B]=[]),m[B][P]=g):m[Zr({r:B,c:P})]=g),P+=se-1;else if(p[1]!=="/"){++P,y="",b=0,w=[],se=1;var R=ge?B+ge-1:B;if(P>_.e.c&&(_.e.c=P),P<_.s.c&&(_.s.c=P),B<_.s.r&&(_.s.r=B),R>_.e.r&&(_.e.r=R),x=en(p[0],!1),Se=[],k={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=Gn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(j=parseInt(x["number-matrix-rows-spanned"],10)||0,D=parseInt(x["number-matrix-columns-spanned"],10)||0,S={s:{r:B,c:P},e:{r:B+j-1,c:P+D-1}},g.F=An(S),he.push([S,g.F])),x.formula)g.f=mH(x.formula);else for(Y=0;Y<he.length;++Y)B>=he[Y][0].s.r&&B<=he[Y][0].e.r&&P>=he[Y][0].s.c&&P<=he[Y][0].e.c&&(g.F=he[Y][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(j=parseInt(x["number-rows-spanned"],10)||0,D=parseInt(x["number-columns-spanned"],10)||0,S={s:{r:B,c:P},e:{r:B+j-1,c:P+D-1}},O.push(S)),x["number-columns-repeated"]&&(se=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Xa(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=es(x["date-value"]),r.cellDates||(g.t="n",g.v=Ui(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=zBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=g4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=Gn(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(Q=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),Q=b==0),Z.Target&&(g.l=Z),Se.length>0&&(g.c=Se,Se=[]),y&&r.cellText!==!1&&(g.w=y),Q&&(g.t="z",delete g.v),(!Q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var z=0;z<ge;++z){if(se=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[B+z]||(m[B+z]=[]),m[B+z][P]=z==0?g:ts(g);--se>0;)m[B+z][P+se]=ts(g);else for(m[Zr({r:B+z,c:P})]=g;--se>0;)m[Zr({r:B+z,c:P+se})]=ts(g);_.e.c<=P&&(_.e.c=P)}se=parseInt(x["number-columns-repeated"]||"1",10),P+=se-1,se=0,g={},y="",w=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;k.t=y,w.length&&(k.R=w),k.a=F,Se.push(k)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);F="",H=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?F=n.slice(H,p.index):H=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(I[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=en(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=en(p[0],!1),c+=yH[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=en(p[0],!1),c+=yH[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=en(p[0],!1),ve=GB(i["cell-range-address"]);var le={Name:i.name,Ref:ve[0]+"!"+ve[1]};V&&(le.Sheet=A.length),me.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var K=bMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+K[0]}else en(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{ve=GB(en(p[0])["target-range-address"]),h[ve[0]]["!autofilter"]={ref:ve[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(Z=en(p[0],!1),!Z.href)break;Z.Target=Gn(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(ve=GB(Z.Target.slice(1)),Z.Target="#"+ve[0]+"!"+ve[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var M={Sheets:h,SheetNames:A,Workbook:me};return r.bookSheets&&delete M.Sheets,M}function bH(t,e){e=e||{},yu(t,"META-INF/manifest.xml")&&zPe(li(t,"META-INF/manifest.xml"),e);var r=Oc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=hne(Sa(r),e);return yu(t,"meta.xml")&&(n.Props=are(li(t,"meta.xml"))),n}function wH(t,e){return hne(t,e)}var wMe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Y2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ai+e}}(),NH=function(){var t=function(s){return ya(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+ya(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=dc(s["!ref"]||"A1"),h=s["!merges"]||[],A=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var x=!1,y={},b="";for(A=0;A!=h.length;++A)if(!(h[A].s.c>d)&&!(h[A].s.r>u)&&!(h[A].e.c<d)&&!(h[A].e.r<u)){(h[A].s.c!=d||h[A].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[A].e.c-h[A].s.c+1,y["table:number-rows-spanned"]=h[A].e.r-h[A].s.r+1;break}if(x){c.push(r);continue}var w=Zr({r:u,c:d}),B=m?(s[u]||[])[d]:s[w];if(B&&B.f&&(y["table:formula"]=ya(V6e(B.f)),B.F&&B.F.slice(0,w.length)==w)){var P=dc(B.F);y["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,y["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!B){c.push(e);continue}switch(B.t){case"b":b=B.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=B.v?"true":"false";break;case"n":b=B.w||String(B.v||0),y["office:value-type"]="float",y["office:value"]=B.v||0;break;case"s":case"str":b=B.v==null?"":B.v,y["office:value-type"]="string";break;case"d":b=B.w||es(B.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=es(B.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(B.l&&B.l.Target){var E=B.l.Target;E=E.charAt(0)=="#"?"#"+H6e(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),_=hr("text:a",_,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+hr("table:table-cell",hr("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;k0(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[ai],u=Y2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Y2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(nre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function mne(t,e){if(e.bookType=="fods")return NH(t,e);var r=U6(),n="",a=[],s=[];return n="mimetype",pn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",pn(r,n,NH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",pn(r,n,wMe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",pn(r,n,ai+nre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",pn(r,n,YPe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",pn(r,n,WPe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ik(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Sa(z0(t))}function NMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Fc(lf(t))}function CMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function O0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function CH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function _Me(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function EMe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function sb(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ha(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Us(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Wn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=sb(t,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=sb(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function _o(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(ha(n*8+a.type)),a.type==2&&e.push(ha(a.data.length)),e.push(a.data))})}),O0(e)}function AD(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function hu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=sb(t,n),s=Wn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Us(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Us(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Us(s[3][0].data)>>>0>0),r.push(i)}return r}function Fg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:ha(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ha(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ha(i.data.length)}],n[2].push({data:_o(i.meta),type:2})});var s=_o(n);e.push(ha(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),O0(e)}function SMe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=sb(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[O0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=O0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function mu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(SMe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return O0(e)}function Og(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=ha(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return O0(e)}function IMe(t,e,r,n){var a=Bp(t),s=a.getUint32(4,!0),i=(n>1?12:8)+CH(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=CH(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function BMe(t,e,r){var n=Bp(t),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=_Me(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function zB(t,e){var r=new Uint8Array(32),n=Bp(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,EMe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function WB(t,e){var r=new Uint8Array(32),n=Bp(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function PMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return IMe(t,e,r,t[0]);case 5:return BMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function sl(t){var e=Wn(t);return sb(e[1][0].data)}function _H(t,e){var r=Wn(e.data),n=Us(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Wn(i.data),c=Us(l[1][0].data)>>>0;switch(n){case 1:s[c]=ik(l[3][0].data);break;case 8:{var u=t[sl(l[9][0].data)][0],d=Wn(u.data),f=t[sl(d[1][0].data)][0],h=Us(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var A=Wn(f.data);s[c]=A[3].map(function(m){return ik(m.data)}).join("")}break}}),s}function jMe(t,e){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=Wn(t),x=Us(g[1][0].data)>>>0,y=Us(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Us(g[8][0].data)>0||!1,w,B;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(i=g[7])==null?void 0:i[0])==null?void 0:l.data,B=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(A=(h=g[4])==null?void 0:h[0])==null?void 0:A.data,B=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var P=b?4:1,_=Bp(w),E=[],I=0;I<w.length/2;++I){var O=_.getUint16(I*2,!0);O<65535&&E.push([I,O])}if(E.length!=y)throw"Expected ".concat(y," cells, found ").concat(E.length);var S=[];for(I=0;I<E.length-1;++I)S[E[I][0]]=B.subarray(E[I][1]*P,E[I+1][1]*P);return E.length>=1&&(S[E[E.length-1][0]]=B.subarray(E[E.length-1][1]*P)),{R:x,cells:S}}function TMe(t,e){var r,n=Wn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Us(n[7][0].data)>>>0>0?1:0:-1,s=AD(n[5],function(i){return jMe(i,a)});return{nrows:Us(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function kMe(t,e,r){var n,a=Wn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Us(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Us(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=An(s);var i=Wn(a[4][0].data),l=_H(t,t[sl(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?_H(t,t[sl(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),A=t[sl(h[2][0].data)][0],m=Us(A.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=TMe(t,A);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=Zr({r:d+x,c:b}),B=PMe(y,l,c);B&&(r[w]=B)})}),d+=p.nrows})}function FMe(t,e){var r=Wn(e.data),n={"!ref":"A1"},a=t[sl(r[2][0].data)],s=Us(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return kMe(t,a[0],n),n}function OMe(t,e){var r,n=Wn(e.data),a={name:(r=n[1])!=null&&r[0]?ik(n[1][0].data):"",sheets:[]},s=AD(n[2],sl);return s.forEach(function(i){t[i].forEach(function(l){var c=Us(l.meta[1][0].data);c==6e3&&a.sheets.push(FMe(t,l))})}),a}function DMe(t,e){var r=xD(),n=Wn(e.data),a=AD(n[1],sl);if(a.forEach(function(s){t[s].forEach(function(i){var l=Us(i.meta[1][0].data);if(l==2){var c=OMe(t,i);c.sheets.forEach(function(u,d){vD(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function XB(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=mu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=hu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Us(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Us(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return DMe(s,l)}function RMe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Us(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Bp(t[7][0].data),d=0,f=[],h=Bp(t[4][0].data),A=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,A,!0);var g,x;switch(typeof e[p]){case"string":g=zB({t:"s",v:e[p]},r),x=WB({t:"s",v:e[p]},r);break;case"number":g=zB({t:"n",v:e[p]},r),x=WB({t:"n",v:e[p]},r);break;case"boolean":g=zB({t:"b",v:e[p]},r),x=WB({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(x),A+=x.length,++c}for(t[2][0].data=ha(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=O0(f),t[3][0].data=O0(m),c}function MMe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(An(n)));var s=lS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(F){return F.forEach(function(H){typeof H=="string"&&i.push(H)})});var l={},c=[],u=Gr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(F,H){return[F,u.FullPaths[H]]}).forEach(function(F){var H=F[0],Q=F[1];if(H.type==2&&H.name.match(/\.iwa/)){var V=H.content,Y=mu(V),R=hu(Y);R.forEach(function(z){c.push(z.id),l[z.id]={deps:[],location:Q,type:Us(z.messages[0].meta[1][0].data)}})}}),c.sort(function(F,H){return F-H});var d=c.filter(function(F){return F>1}).map(function(F){return[F,ha(F)]});u.FileIndex.map(function(F,H){return[F,u.FullPaths[H]]}).forEach(function(F){var H=F[0];if(F[1],!!H.name.match(/\.iwa/)){var Q=hu(mu(H.content));Q.forEach(function(V){V.messages.forEach(function(Y){d.forEach(function(R){V.messages.some(function(z){return Us(z.meta[1][0].data)!=11006&&CMe(z.data,R[1])})&&l[R[0]].deps.push(V.id)})})})}});for(var f=Gr.find(u,l[1].location),h=hu(mu(f.content)),A,m=0;m<h.length;++m){var p=h[m];p.id==1&&(A=p)}var g=sl(Wn(A.messages[0].data)[1][0].data);for(f=Gr.find(u,l[g].location),h=hu(mu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=sl(Wn(A.messages[0].data)[2][0].data),f=Gr.find(u,l[g].location),h=hu(mu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=sl(Wn(A.messages[0].data)[2][0].data),f=Gr.find(u,l[g].location),h=hu(mu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);var x=Wn(A.messages[0].data);{x[6][0].data=ha(n.e.r+1),x[7][0].data=ha(n.e.c+1);var y=sl(x[46][0].data),b=Gr.find(u,l[y].location),w=hu(mu(b.content));{for(var B=0;B<w.length&&w[B].id!=y;++B);if(w[B].id!=y)throw"Bad ColumnRowUIDMapArchive";var P=Wn(w[B].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var _=0;_<=n.e.c;++_){var E=[];E[1]=E[2]=[{type:0,data:ha(_+420690)}],P[1].push({type:2,data:_o(E)}),P[2].push({type:0,data:ha(_)}),P[3].push({type:0,data:ha(_)})}P[4]=[],P[5]=[],P[6]=[];for(var I=0;I<=n.e.r;++I)E=[],E[1]=E[2]=[{type:0,data:ha(I+726270)}],P[4].push({type:2,data:_o(E)}),P[5].push({type:0,data:ha(I)}),P[6].push({type:0,data:ha(I)});w[B].messages[0].data=_o(P)}b.content=Og(Fg(w)),b.size=b.content.length,delete x[46];var O=Wn(x[4][0].data);{O[7][0].data=ha(n.e.r+1);var S=Wn(O[1][0].data),j=sl(S[2][0].data);b=Gr.find(u,l[j].location),w=hu(mu(b.content));{if(w[0].id!=j)throw"Bad HeaderStorageBucket";var D=Wn(w[0].messages[0].data);for(I=0;I<s.length;++I){var J=Wn(D[2][0].data);J[1][0].data=ha(I),J[4][0].data=ha(s[I].length),D[2][I]={type:D[2][0].type,data:_o(J)}}w[0].messages[0].data=_o(D)}b.content=Og(Fg(w)),b.size=b.content.length;var ge=sl(O[2][0].data);b=Gr.find(u,l[ge].location),w=hu(mu(b.content));{if(w[0].id!=ge)throw"Bad HeaderStorageBucket";for(D=Wn(w[0].messages[0].data),_=0;_<=n.e.c;++_)J=Wn(D[2][0].data),J[1][0].data=ha(_),J[4][0].data=ha(n.e.r+1),D[2][_]={type:D[2][0].type,data:_o(J)};w[0].messages[0].data=_o(D)}b.content=Og(Fg(w)),b.size=b.content.length;var se=sl(O[4][0].data);(function(){for(var F=Gr.find(u,l[se].location),H=hu(mu(F.content)),Q,V=0;V<H.length;++V){var Y=H[V];Y.id==se&&(Q=Y)}var R=Wn(Q.messages[0].data);{R[3]=[];var z=[];i.forEach(function(M,pe){z[1]=[{type:0,data:ha(pe)}],z[2]=[{type:0,data:ha(1)}],z[3]=[{type:2,data:NMe(M)}],R[3].push({type:2,data:_o(z)})})}Q.messages[0].data=_o(R);var le=Fg(H),K=Og(le);F.content=K,F.size=F.content.length})();var he=Wn(O[3][0].data);{var me=he[1][0];delete he[2];var Z=Wn(me.data);{var ve=sl(Z[2][0].data);(function(){for(var F=Gr.find(u,l[ve].location),H=hu(mu(F.content)),Q,V=0;V<H.length;++V){var Y=H[V];Y.id==ve&&(Q=Y)}var R=Wn(Q.messages[0].data);{delete R[6],delete he[7];var z=new Uint8Array(R[5][0].data);R[5]=[];for(var le=0,K=0;K<=n.e.r;++K){var M=Wn(z);le+=RMe(M,s[K],i),M[1][0].data=ha(K),R[5].push({data:_o(M),type:2})}R[1]=[{type:0,data:ha(n.e.c+1)}],R[2]=[{type:0,data:ha(n.e.r+1)}],R[3]=[{type:0,data:ha(le)}],R[4]=[{type:0,data:ha(n.e.r+1)}]}Q.messages[0].data=_o(R);var pe=Fg(H),X=Og(pe);F.content=X,F.size=F.content.length})()}me.data=_o(Z)}O[3][0].data=_o(he)}x[4][0].data=_o(O)}A.messages[0].data=_o(x);var Se=Fg(h),k=Og(Se);return f.content=k,f.size=f.content.length,u}function pne(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function hD(t){pne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function mD(t){pne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function LMe(t){return En.WS.indexOf(t)>-1?"sheet":t==En.CS?"chart":t==En.DS?"dialog":t==En.MS?"macro":t&&t.length?t:"sheet"}function UMe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,LMe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function QMe(t,e,r,n,a,s,i,l,c,u,d,f){try{s[n]=Jy(Oc(t,r,!0),e);var h=li(t,e),A;switch(l){case"sheet":A=c8e(h,e,a,c,s[n],u,d,f);break;case"chart":if(A=u8e(h,e,a,c,s[n],u,d,f),!A||!A["!drawel"])break;var m=xy(A["!drawel"].Target,e),p=Z2(m),g=XFe(Oc(t,m,!0),Jy(Oc(t,p,!0),m)),x=xy(g,m),y=Z2(x);A=RRe(Oc(t,x,!0),x,c,Jy(Oc(t,y,!0),x),u,A);break;case"macro":A=d8e(h,e,a,c,s[n],u,d,f);break;case"dialog":A=f8e(h,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=A;var b=[];s&&s[n]&&Qs(s[n]).forEach(function(w){var B="";if(s[n][w].Type==En.CMNT){B=xy(s[n][w].Target,e);var P=p8e(li(t,B,!0),B,c);if(!P||!P.length)return;uH(A,P,!1)}s[n][w].Type==En.TCMNT&&(B=xy(s[n][w].Target,e),b=b.concat(JFe(li(t,B,!0),c)))}),b&&b.length&&uH(A,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function cu(t){return t.charAt(0)=="/"?t.slice(1):t}function VMe(t,e){if(Fv(),e=e||{},hD(e),yu(t,"META-INF/manifest.xml")||yu(t,"objectdata.xml"))return bH(t,e);if(yu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof XB<"u"){if(t.FileIndex)return XB(t);var r=Gr.utils.cfb_new();return jV(t).forEach(function(J){pn(r,J,ZBe(t,J))}),XB(r)}throw new Error("Unsupported NUMBERS file")}if(!yu(t,"[Content_Types].xml"))throw yu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):yu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=jV(t),a=GPe(Oc(t,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",li(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!li(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Zy=[],a.sst)try{Zy=m8e(li(t,cu(a.sst)),a.sst,e)}catch(J){if(e.WTF)throw J}e.cellStyles&&a.themes.length&&(c=h8e(Oc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=A8e(li(t,cu(a.style)),a.style,c,e))}a.links.map(function(J){try{var ge=Jy(Oc(t,Z2(cu(J))),J);return x8e(li(t,cu(J)),ge,J,e)}catch{}});var d=l8e(li(t,cu(a.workbooks[0])),a.workbooks[0],e),f={},h="";a.coreprops.length&&(h=li(t,cu(a.coreprops[0]),!0),h&&(f=are(h)),a.extprops.length!==0&&(h=li(t,cu(a.extprops[0]),!0),h&&ZPe(h,f,e)));var A={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=Oc(t,cu(a.custprops[0]),!0),h&&(A=tje(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ge){return ge.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=A),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=g8e(li(t,cu(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var B=0;B!=w.length;++B)f.SheetNames[B]=w[B].name}var P=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),E=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");yu(t,E)||(E="xl/_rels/workbook."+P+".rels");var I=Jy(Oc(t,E,!0),E.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=v8e(li(t,cu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=eOe(li(t,cu(a.people[0])),e)),I&&(I=UMe(I,d.Sheets));var O=li(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var S="sheet";if(I&&I[g]?(y="xl/"+I[g][1].replace(/[\/]?xl\//,""),yu(t,y)||(y=I[g][1]),yu(t,y)||(y=E.replace(/_rels\/.*$/,"")+I[g][1]),S=I[g][2]):(y="xl/worksheets/sheet"+(g+1-O)+"."+P,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var j=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==g&&(j=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[g].toLowerCase()&&(j=1);if(!j)continue e}}QMe(t,y,b,f.SheetNames[g],g,x,i,S,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:A,Deps:p,Sheets:i,SheetNames:f.SheetNames,Strings:Zy,Styles:u,Themes:c,SSF:ts(Yr)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(J,ge){J=J.replace(/^Root Entry[\/]/,""),m.keys.push(J),m.files[J]=t.FileIndex[ge]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=li(t,cu(a.vba[0]),!0):a.defaults&&a.defaults.bin===lOe&&(m.vbaraw=li(t,"xl/vbaProject.bin",!0))),m}function HMe(t,e){var r=e||{},n="Workbook",a=Gr.find(t,n);try{if(n="/!DataSpaces/Version",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(vke(a.content),n="/!DataSpaces/DataSpaceMap",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=bke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=wke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Cke(a.content)}catch{}if(n="/EncryptionInfo",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=_ke(a.content);if(n="/EncryptedPackage",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function $Me(t,e){return e.bookType=="ods"?mne(t,e):e.bookType=="numbers"?MMe(t,e):e.bookType=="xlsb"?KMe(t,e):GMe(t,e)}function KMe(t,e){gx=1024,t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(Fv(),h4(t.SSF),e.revssf=p4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,e2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Hre.indexOf(e.bookType)>-1,a=eD();mD(e=e||{});var s=U6(),i="",l=0;if(e.cellXfs=[],X0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",pn(s,i,sre(t.Props,e)),a.coreprops.push(i),pa(e.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,pn(s,i,lre(t.Props)),a.extprops.push(i),pa(e.rels,3,i,En.EXT_PROPS),t.Custprops!==t.Props&&Qs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",pn(s,i,cre(t.Custprops)),a.custprops.push(i),pa(e.rels,4,i,En.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,pn(s,i,b8e(l-1,i,e,t,d)),a.sheets.push(i),pa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,En.WS[0])}if(f){var A=f["!comments"],m=!1,p="";A&&A.length>0&&(p="xl/comments"+l+"."+r,pn(s,p,C8e(A,p)),a.comments.push(p),pa(d,-1,"../comments"+l+"."+r,En.CMNT),m=!0),f["!legacy"]&&m&&pn(s,"xl/drawings/vmlDrawing"+l+".vml",Qre(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&pn(s,Z2(i),Tx(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,pn(s,i,N8e(e.Strings,i,e)),a.strs.push(i),pa(e.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,pn(s,i,y8e(t,i)),a.workbooks.push(i),pa(e.rels,1,i,En.WB),i="xl/theme/theme1.xml",pn(s,i,iD(t.Themes,e)),a.themes.push(i),pa(e.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,pn(s,i,w8e(t,i,e)),a.styles.push(i),pa(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",pn(s,i,t.vbaraw),a.vba.push(i),pa(e.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,pn(s,i,_8e(i)),a.metadata.push(i),pa(e.wbrels,-1,"metadata."+r,En.XLMETA),pn(s,"[Content_Types].xml",rre(a,e)),pn(s,"_rels/.rels",Tx(e.rels)),pn(s,"xl/_rels/workbook."+r+".rels",Tx(e.wbrels)),delete e.revssf,delete e.ssf,s}function GMe(t,e){gx=1024,t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(Fv(),h4(t.SSF),e.revssf=p4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,e2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Hre.indexOf(e.bookType)>-1,a=eD();mD(e=e||{});var s=U6(),i="",l=0;if(e.cellXfs=[],X0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",pn(s,i,sre(t.Props,e)),a.coreprops.push(i),pa(e.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,pn(s,i,lre(t.Props)),a.extprops.push(i),pa(e.rels,3,i,En.EXT_PROPS),t.Custprops!==t.Props&&Qs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",pn(s,i,cre(t.Custprops)),a.custprops.push(i),pa(e.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],A=(h||{})["!type"]||"sheet";switch(A){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,pn(s,i,ene(l-1,e,t,f)),a.sheets.push(i),pa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,En.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,pn(s,g,ZFe(m,d,e)),a.threadedcomments.push(g),pa(f,-1,"../threadedComments/threadedComment"+l+"."+r,En.TCMNT)),g="xl/comments"+l+"."+r,pn(s,g,Vre(m)),a.comments.push(g),pa(f,-1,"../comments"+l+"."+r,En.CMNT),p=!0}h["!legacy"]&&p&&pn(s,"xl/drawings/vmlDrawing"+l+".vml",Qre(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&pn(s,Z2(i),Tx(f))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,pn(s,i,Bre(e.Strings,e)),a.strs.push(i),pa(e.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,pn(s,i,sne(t)),a.workbooks.push(i),pa(e.rels,1,i,En.WB),i="xl/theme/theme1.xml",pn(s,i,iD(t.Themes,e)),a.themes.push(i),pa(e.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,pn(s,i,Rre(t,e)),a.styles.push(i),pa(e.wbrels,-1,"styles."+r,En.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",pn(s,i,t.vbaraw),a.vba.push(i),pa(e.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,pn(s,i,Ure()),a.metadata.push(i),pa(e.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",pn(s,i,tOe(d)),a.people.push(i),pa(e.wbrels,-1,"persons/person.xml",En.PEOPLE)),pn(s,"[Content_Types].xml",rre(a,e)),pn(s,"_rels/.rels",Tx(e.rels)),pn(s,"xl/_rels/workbook."+r+".rels",Tx(e.wbrels)),delete e.revssf,delete e.ssf,s}function pD(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Gc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function qMe(t,e){return Gr.find(t,"EncryptedPackage")?HMe(t,e):cne(t,e)}function zMe(t,e){var r,n=t,a=e||{};return a.type||(a.type=bn&&Buffer.isBuffer(t)?"buffer":"base64"),r=jte(n,a),VMe(r,a)}function gne(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ak(t.slice(r),e);default:break e}return nv.to_workbook(t,e)}function WMe(t,e){var r="",n=pD(t,e);switch(e.type){case"base64":r=Gc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=_p(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Sa(r)),e.type="binary",gne(r,e)}function XMe(t,e){var r=t;return e.type=="base64"&&(r=Gc(r)),r=q2.utils.decode(1200,r.slice(2),"str"),e.type="binary",gne(r,e)}function YMe(t){return t.match(/[^\x00-\x7F]/)?lf(t):t}function YB(t,e,r,n){return n?(r.type="string",nv.to_workbook(t,r)):nv.to_workbook(e,r)}function ib(t,e){O6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return ib(new Uint8Array(t),(r=ts(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Fx={},r.dateNF&&(Fx.dateNF=r.dateNF),r.type||(r.type=bn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=bn?"buffer":"binary",n=KBe(t),typeof Uint8Array<"u"&&!bn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=YMe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=ts(r),r.type="array",ib(D6(n),r)}switch((a=pD(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return qMe(Gr.read(n,r),r);break;case 9:if(a[1]<=8)return cne(n,r);break;case 60:return ak(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return rke(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Sre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?zMe(n,r):YB(t,n,r,s);case 239:return a[3]===60?ak(n,r):YB(t,n,r,s);case 255:if(a[1]===254)return XMe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return rp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return rp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return nk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Fre.to_workbook(n,r);break;case 10:case 13:case 32:return WMe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return tke.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?nk.to_workbook(n,r):YB(t,n,r,s)}function xne(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return ew(e.file,Gr.write(t,{type:bn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Gr.write(t,e)}function JMe(t,e){var r=ts(e||{}),n=$Me(t,r);return ZMe(n,r)}function ZMe(t,e){var r={},n=bn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Gr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(A4(a))}return e.password&&typeof encrypt_agile<"u"?xne(encrypt_agile(a,e.password),e):e.type==="file"?ew(e.file,a):e.type=="string"?Sa(a):a}function eLe(t,e){var r=e||{},n=Y8e(t,r);return xne(n,r)}function Zd(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return z2(lf(n));case"binary":return lf(n);case"string":return t;case"file":return ew(e.file,n,"utf8");case"buffer":return bn?UA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Zd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function tLe(t,e){switch(e.type){case"base64":return z2(t);case"binary":return t;case"string":return t;case"file":return ew(e.file,t,"binary");case"buffer":return bn?UA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function bC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?z2(r):e.type=="string"?Sa(r):r;case"file":return ew(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function w4(t,e){O6(),qRe(t);var r=ts(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=w4(t,r);return r.type="array",A4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Zd($8e(t,r),r);case"slk":case"sylk":return Zd(Ere.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Zd(dne(t.Sheets[t.SheetNames[a]],r),r);case"txt":return tLe(yne(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Zd(gD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Zd(Sre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return bC(nk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Zd(nv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Zd(Fre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Zd(Ire.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Zd(mne(t,r),r);case"wk1":return bC(rp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return bC(rp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),bC(une(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),eLe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return JMe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function rLe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function vne(t,e,r){var n={};return n.type="file",n.file=e,rLe(n),w4(t,n)}function nLe(t,e,r,n,a,s,i,l){var c=ri(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var A=e.s.c;A<=e.e.c;++A){var m=i?t[r][A]:t[n[A]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[A]!=null&&(h[s[A]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[A]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[A]]=null;else if(u!==void 0)h[s[A]]=u;else if(d&&p===null)h[s[A]]=null;else continue;else h[s[A]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:SA(m,p,l);p!=null&&(f=!1)}}return{row:h,isempty:f}}function lS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=qn(d);break;case"number":c=qn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=ri(c.s.r),h=[],A=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],B=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=Cs(y),r=g?t[x][y]:t[h[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=SA(r,null,u),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(B[x]||{}).hidden){var P=nLe(t,c,x,h,n,s,g,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(A[m++]=P.row)}return A.length=m,A}var EH=/"/g;function aLe(t,e,r,n,a,s,i,l){for(var c=!0,u=[],d="",f=ri(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var A=l.dense?(t[r]||[])[h]:t[n[h]+f];if(A==null)d="";else if(A.v!=null){c=!1,d=""+(l.rawNumbers&&A.t=="n"?A.v:SA(A,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(EH,'""')+'"';break}d=="ID"&&(d='"ID"')}else A.f!=null&&!A.F?(c=!1,d="="+A.f,d.indexOf(",")>=0&&(d='"'+d.replace(EH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function gD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=qn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],A=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(f[m]=Cs(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(A[g]||{}).hidden||(d=aLe(t,a,g,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function yne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=gD(t,e);return r}function sLe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=qn(t["!ref"]),s="",i=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)i[l]=Cs(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ri(d),l=a.s.c;l<=a.e.c;++l)if(e=i[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function bne(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?_s(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+e.length-1+a}};if(s["!ref"]){var f=qn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],A=0;e.forEach(function(p,g){Qs(p).forEach(function(x){(A=h.indexOf(x))==-1&&(h[A=h.length]=x);var y=p[x],b="z",w="",B=Zr({c:l+A,r:i+g+a});u=ob(s,B),y&&typeof y=="object"&&!(y instanceof Date)?s[B]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Ui(y)),w=n.dateNF||Yr[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[B]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var m=ri(i);if(a)for(A=0;A<h.length;++A)s[Cs(A+l)+m]={t:"s",v:h[A]};return s["!ref"]=An(d),s}function iLe(t,e){return bne(null,t,e)}function ob(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=_s(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ob(t,Zr(e)):ob(t,Zr({r:e,c:r||0}))}function oLe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function xD(){return{SheetNames:[],Sheets:{}}}function vD(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(ane(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function lLe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=oLe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function cLe(t,e){return t.z=e,t}function wne(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function uLe(t,e,r){return wne(t,"#"+e,r)}function dLe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function fLe(t,e,r,n){for(var a=typeof e!="string"?e:qn(e),s=typeof e=="string"?e:An(e),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=ob(t,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var kl={encode_col:Cs,encode_row:ri,encode_cell:Zr,encode_range:An,decode_col:z6,decode_row:q6,split_cell:NPe,decode_cell:_s,decode_range:dc,format_cell:SA,sheet_add_aoa:Wte,sheet_add_json:bne,sheet_add_dom:fne,aoa_to_sheet:Ov,json_to_sheet:iLe,table_to_sheet:Ane,table_to_book:vMe,sheet_to_csv:gD,sheet_to_txt:yne,sheet_to_json:lS,sheet_to_html:dne,sheet_to_formulae:sLe,sheet_to_row_object_array:lS,sheet_get_cell:ob,book_new:xD,book_append_sheet:vD,book_set_sheet_visibility:lLe,cell_set_number_format:cLe,cell_set_hyperlink:wne,cell_set_internal_link:uLe,cell_add_comment:dLe,sheet_set_array_formula:fLe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const JB=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ra(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Kf(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Eh(t,e=1){const r=Math.floor(Kf(t,e));return r>0?r:e}function ALe(t){return Object.values(t||{}).every(r=>Ra(r)==="")}function Am(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ra(a),a));for(const a of e){const s=n.get(Ra(a));if(s!=null)return t[s]}}function hLe({open:t,code:e,onClose:r}){return t?o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),o.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),o.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function mLe({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new G2,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function pLe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,B]=v.useState(null),[P,_]=v.useState(""),[E,I]=v.useState(""),[O,S]=v.useState(0),[j,D]=v.useState(1),[J,ge]=v.useState(""),[se,he]=v.useState(""),[me,Z]=v.useState(""),[ve,Se]=v.useState(""),[k,F]=v.useState(""),[H,Q]=v.useState(!1),[V,Y]=v.useState(""),[R,z]=v.useState(!1),[le,K]=v.useState("create"),[M,pe]=v.useState(!1),[X,G]=v.useState(""),[ie,Ie]=v.useState([]),[Re,ze]=v.useState([]),[st,lt]=v.useState(!1),[_t,bt]=v.useState(!1);v.useEffect(()=>{var Ue;const L=window.matchMedia("(max-width: 900px)"),we=()=>bt(L.matches);return we(),(Ue=L.addEventListener)==null||Ue.call(L,"change",we),()=>{var te;return(te=L.removeEventListener)==null?void 0:te.call(L,"change",we)}},[]);const[St,kt]=v.useState(!0),[et,ce]=v.useState(!0);v.useEffect(()=>{_t?(kt(!1),ce(!1)):(kt(!0),ce(!0))},[_t]);const[Qe,xe]=v.useState(null);v.useEffect(()=>{n(!0),s("");const L=At(je,"products_candies"),we=Wt(L,ln("name","asc")),Ue=Ed(we,te=>{const Ce=[],$e={};te.forEach(mt=>{const rt=mt.data(),re=String(rt.barcode||"").trim()||void 0;re&&($e[mt.id]=re),Ce.push({id:mt.id,name:rt.name||"",category:rt.category||"",providerPrice:Number(rt.providerPrice||0),unitsPerPackage:Number(rt.unitsPerPackage||1),barcode:re,packaging:String(rt.packaging||rt.empaque||"").trim()||void 0,createdAt:rt.createdAt})});const He=fe.current||{};let Ye=!1;for(const mt of Object.keys($e))if(($e[mt]||"")!==(He[mt]||"")){Ye=!0;break}l(Ce),fe.current=$e,n(!1),!oe.current&&Ye&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),oe.current=!1},te=>{console.error(te),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>Ue()},[t]);const fe=v.useRef({}),oe=v.useRef(!0),Be=v.useMemo(()=>{const L=Ra(me),we=String(ve||"").trim(),Ue=String(k||"").trim().toLowerCase();return Ue?i.filter(te=>String(te.packaging||"").trim().toLowerCase()===Ue):!L&&!we?i:i.filter(te=>{const Ce=`${te.category} ${te.name}`.toLowerCase(),$e=L?Ce.includes(L):!0,He=String(te.barcode||""),Ye=we?He.includes(we):!0;return $e&&Ye})},[i,me,ve,k]),Me=v.useMemo(()=>{const L=new Set;return i.forEach(we=>{const Ue=String(we.category||"").trim();Ue&&L.add(Ue)}),Array.from(L).sort((we,Ue)=>we.localeCompare(Ue,"es"))},[i]),Ze=()=>{u(""),f(""),A(0),p(1),x(""),b("")},Je=async L=>{L.preventDefault(),s("");const we=String(c||"").trim(),Ue=String(d||"").trim(),te=Math.max(0,Kf(h,0)),Ce=Eh(m,1),$e=String(g||"").trim();if(!we)return s(" La categora es requerida.");if(!Ue)return s(" El nombre del producto es requerido.");if(te<=0)return s(" El precio proveedor debe ser > 0.");if(Ce<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Ye=>Ra(Ye.category)===Ra(we)&&Ra(Ye.name)===Ra(Ue)))return s(" Ya existe un producto con esa categora y nombre.");if($e&&i.some(mt=>String(mt.barcode||"")===$e))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const Ye={category:we,name:Ue,providerPrice:te,unitsPerPackage:Ce,createdAt:tr.now()};$e&&(Ye.barcode=$e);const mt=String(y||"").trim();mt&&(Ye.packaging=mt);const rt=await Nn(At(je,"products_candies"),Ye);l(re=>[...re,{id:rt.id,...Ye}].sort((ne,Ae)=>ne.name.localeCompare(Ae.name,"es"))),s(" Producto creado."),Ze()}catch(Ye){console.error(Ye),s(" Error creando producto.")}finally{n(!1)}},nt=L=>{B(L.id),_(L.category),I(L.name),S(L.providerPrice),D(L.unitsPerPackage||1),ge(String(L.barcode||"")),he(String(L.packaging||"")),s("")},ke=()=>{B(null),_(""),I(""),S(0),D(1),ge(""),he("")},ae=async()=>{if(!w)return;s("");const L=String(P||"").trim(),we=String(E||"").trim(),Ue=Math.max(0,Kf(O,0)),te=Eh(j,1),Ce=String(J||"").trim(),$e=String(se||"").trim();if(!L)return s(" La categora es requerida.");if(!we)return s(" El nombre del producto es requerido.");if(Ue<=0)return s(" El precio proveedor debe ser > 0.");if(te<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Ye=>Ye.id!==w&&Ra(Ye.category)===Ra(L)&&Ra(Ye.name)===Ra(we)))return s(" Ya existe otro producto con esa categora y nombre.");if(Ce&&i.some(mt=>mt.id!==w&&String(mt.barcode||"")===Ce))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Ye={category:L,name:we,providerPrice:Ue,unitsPerPackage:te,updatedAt:tr.now()};Ye.barcode=Ce||"",Ye.packaging=$e||"",await Jr($t(je,"products_candies",w),Ye),l(mt=>mt.map(rt=>rt.id===w?{...rt,category:L,name:we,providerPrice:Ue,unitsPerPackage:te,barcode:Ce||void 0,packaging:$e||void 0}:rt).sort((rt,re)=>rt.name.localeCompare(re.name,"es"))),_t&&s(" Producto guardado."),ke()}catch(Ye){console.error(Ye),s(" Error actualizando producto.")}finally{n(!1)}},De=async L=>{if(confirm(`Eliminar "${L.name}" (${L.category}) del catlogo?`))try{n(!0),await Qn($t(je,"products_candies",L.id)),l(Ue=>Ue.filter(te=>te.id!==L.id)),s(" Producto eliminado.")}catch(Ue){console.error(Ue),s(" Error eliminando producto.")}finally{n(!1)}},We=()=>{const L=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],we=kl.json_to_sheet(L),Ue=kl.book_new();kl.book_append_sheet(Ue,we,"Productos");const te=w4(Ue,{type:"array",bookType:"xlsx"}),Ce=new Blob([te],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),$e=URL.createObjectURL(Ce),He=document.createElement("a");He.href=$e,He.download="template_productos_dulces.xlsx",document.body.appendChild(He),He.click(),He.remove(),URL.revokeObjectURL($e)},pt=L=>{const we=[],Ue=[];L.forEach((Ce,$e)=>{if(!Ce||typeof Ce!="object"||ALe(Ce))return;const He=String(Am(Ce,["Id","ID","productId","docId"])??"").trim(),Ye=String(Am(Ce,["Categoria","Categora","Category","cat","category"])??"").trim(),mt=String(Am(Ce,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),rt=Am(Ce,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),re=Am(Ce,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),ne=Am(Ce,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),Ae=String(ne??"").trim(),ue=Am(Ce,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ne=String(ue??"").trim(),Te=Math.max(0,Kf(rt,0)),tt=Eh(re,1),ot=$e+2;Ye||Ue.push(`Fila ${ot}: falta Categoria.`),mt||Ue.push(`Fila ${ot}: falta Producto/Nombre.`),Te<=0&&Ue.push(`Fila ${ot}: PrecioProveedor debe ser > 0.`),tt<=0&&Ue.push(`Fila ${ot}: UnidadesPorPaquete debe ser > 0.`),Ye&&mt&&Te>0&&tt>0&&we.push({id:He||void 0,category:Ye,name:mt,providerPrice:Te,unitsPerPackage:tt,barcode:Ae||void 0,packaging:Ne||void 0,_raw:Ce})});const te=new Map;for(const Ce of we){const $e=Ce.id?`id::${Ce.id}`:`${Ra(Ce.category)}::${Ra(Ce.name)}`;te.set($e,Ce)}return{rows:Array.from(te.values()),errors:Ue}},ct=async L=>{if(s(""),ze([]),Ie([]),G((L==null?void 0:L.name)||""),!L)return;const we=L.name.toLowerCase(),Ue=we.endsWith(".xlsx")||we.endsWith(".xls"),te=we.endsWith(".csv");if(!Ue&&!te){ze(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{lt(!0);const Ce=new FileReader,$e=await new Promise((Ae,ue)=>{Ce.onerror=()=>ue(new Error("No se pudo leer el archivo.")),Ce.onload=()=>Ae(Ce.result),Ce.readAsArrayBuffer(L)}),He=ib(new Uint8Array($e),{type:"array"}),Ye=He.SheetNames[0],mt=He.Sheets[Ye],rt=kl.sheet_to_json(mt,{defval:""}),{rows:re,errors:ne}=pt(rt);Ie(re),ze(ne),re.length===0&&ne.length===0&&ze(["No se encontraron filas vlidas para importar."])}catch(Ce){console.error(Ce),ze(["Error leyendo el archivo. Revis que no est corrupto."])}finally{lt(!1)}},Xe=(L,we)=>{Ie(Ue=>{const te=[...Ue],Ce=te[L];return Ce?(te[L]={...Ce,...we},te):Ue})},Rt=async()=>{if(s(""),Re.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{lt(!0);const L={},we={},Ue={};i.forEach(He=>{L[He.id]=He,we[`${Ra(He.category)}::${Ra(He.name)}`]=He;const Ye=String(He.barcode||"").trim();Ye&&(Ue[Ye]=He)});const te=G0(je);let Ce=0,$e=0;for(const He of ie){const Ye=String(He.category||"").trim(),mt=String(He.name||"").trim(),rt=Math.max(0,Kf(He.providerPrice,0)),re=Eh(He.unitsPerPackage,1),ne=String(He.barcode||"").trim();if(!Ye||!mt||rt<=0||re<=0)continue;let Ae;if(He.id&&L[He.id])Ae=L[He.id];else{const ue=`${Ra(Ye)}::${Ra(mt)}`;Ae=we[ue]}if(!Ae&&ne&&Ue[ne]&&(Ae=Ue[ne]),Ae){const ue={category:Ye,name:mt,providerPrice:rt,unitsPerPackage:re,updatedAt:tr.now()};He.barcode!=null&&(ue.barcode=ne||""),He.packaging!=null&&(ue.packaging=String(He.packaging||"")||""),te.update($t(je,"products_candies",Ae.id),ue),$e+=1}else{const ue=$t(At(je,"products_candies")),Ne={category:Ye,name:mt,providerPrice:rt,unitsPerPackage:re,createdAt:tr.now()};ne&&(Ne.barcode=ne),He.packaging&&(Ne.packaging=He.packaging),te.set(ue,Ne),Ce+=1}}await te.commit(),s(` Importacin lista. Creados: ${Ce}, Actualizados: ${$e}`),pe(!1),Ie([]),ze([]),G(""),e()}catch(L){console.error(L),s(" Error importando productos a Firestore.")}finally{lt(!1)}},er=v.useMemo(()=>{const L=new Set(i.map($e=>$e.id)),we=new Set(i.map($e=>`${Ra($e.category)}::${Ra($e.name)}`)),Ue=new Set(i.map($e=>String($e.barcode||"").trim()).filter(Boolean));let te=0,Ce=0;for(const $e of ie){if($e.id&&L.has($e.id)){te+=1;continue}const He=`${Ra($e.category)}::${Ra($e.name)}`;if(we.has(He)){te+=1;continue}const Ye=String($e.barcode||"").trim();if(Ye&&Ue.has(Ye)){te+=1;continue}Ce+=1}return{willCreate:Ce,willUpdate:te,total:ie.length}},[ie,i]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:e,loading:r||st}),!_t&&o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{pe(!0),Ie([]),ze([]),G("")},children:"Importar"})]})})]}),_t&&o.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>kt(L=>!L),children:St?"Ocultar creacin":"Crear producto"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{pe(!0),Ie([]),ze([]),G("")},children:"Importar"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>ce(L=>!L),children:et?"Ocultar filtros":"Mostrar filtros"}),et&&o.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:k,onChange:L=>F(L.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),St&&o.jsxs("form",{onSubmit:Je,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:L=>u(L.target.value),placeholder:"Ej: Gomitas"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:L=>f(L.target.value),placeholder:"Ej: Gomita Fresa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:L=>b(L.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:L=>b(L.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:L=>A(Math.max(0,Kf(L.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:L=>p(Eh(L.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:L=>x(L.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{K("create"),z(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ze,children:"Limpiar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),et&&o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:me,onChange:L=>Z(L.target.value),placeholder:"Buscar por categora o producto"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:k,onChange:L=>F(L.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:ve,onChange:L=>Se(L.target.value),placeholder:"Ej: 7445074183182"}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{K("search"),z(!0),ce(!0)},children:"Escanear producto"})}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Z(""),Se("")},children:"Limpiar filtros"})})]}),o.jsxs("div",{className:"w-full md:w-auto text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),o.jsx("div",{className:"text-lg font-semibold",children:Be.length})]})]}),_t?o.jsx("div",{className:"space-y-2",children:r?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Be.length===0?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Be.map(L=>{const we=w===L.id,Ue=Qe===L.id,te=!!String(L.barcode||"").trim();return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>xe(Ce=>Ce===L.id?null:L.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold truncate",children:L.name}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:L.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("div",{className:"font-bold tabular-nums",children:JB(L.providerPrice)})]})]}),Ue&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),we?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:P,onChange:Ce=>_(Ce.target.value)}):o.jsx("div",{className:"font-semibold",children:L.category})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),we?o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:j,onChange:Ce=>D(Eh(Ce.target.value,1))}):o.jsx("div",{className:"font-semibold text-right tabular-nums",children:L.unitsPerPackage})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),we?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:se,onChange:Ce=>he(Ce.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"font-semibold",children:L.packaging||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),we?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(O)?"":O,onChange:Ce=>S(Math.max(0,Kf(Ce.target.value,0)))}):o.jsx("div",{className:"font-semibold tabular-nums",children:JB(L.providerPrice)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),we?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:J,onChange:Ce=>ge(Ce.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{K("edit"),z(!0)},children:"Escanear"})]}):te?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Y(String(L.barcode||"").trim()),Q(!0)},children:"Ver cdigo"}):o.jsx("div",{className:"text-gray-600",children:"No"})]})]}),o.jsx("div",{className:"pt-2 flex gap-2",children:we?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:ae,type:"button",children:"Guardar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{K("edit"),z(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:ke,type:"button",children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>nt(L),type:"button",children:"Editar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>De(L),type:"button",children:"Borrar"})]})})]})})]},L.id)})}):o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Be.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):Be.map(L=>{const we=w===L.id,Ue=!!String(L.barcode||"").trim();return o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:we?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:P,onChange:te=>_(te.target.value)}):L.category}),o.jsx("td",{className:"p-2 border",children:we?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:E,onChange:te=>I(te.target.value)}):L.name}),o.jsx("td",{className:"p-2 border",children:we?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:se,onChange:te=>he(te.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):L.packaging||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:we?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(O)?"":O,onChange:te=>S(Math.max(0,Kf(te.target.value,0)))}):JB(L.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:we?o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:j,onChange:te=>D(Eh(te.target.value,1))}):L.unitsPerPackage}),o.jsx("td",{className:"p-2 border text-center",children:we?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:J,onChange:te=>ge(te.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{K("edit"),z(!0)},children:"Escanear"})]}):Ue?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Y(String(L.barcode||"").trim()),Q(!0)},children:"S"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),o.jsx("td",{className:"p-2 border",children:we?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ae,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ke,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>nt(L),type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>De(L),type:"button",children:"Borrar"})]})})]},L.id)})})]})}),a?_t&&a===" Producto guardado."?o.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 text-sm",children:a}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),ke(),z(!1)},children:"Aceptar"})]}):o.jsx("p",{className:"mt-2 text-sm",children:a}):null,o.jsx(hLe,{open:H,code:V,onClose:()=>Q(!1)}),o.jsx(mLe,{open:R,onClose:()=>z(!1),onDetected:async L=>{const we=String(L||"").trim();if(we){if(le==="edit"&&w){if(i.some(te=>te.id!==w&&String(te.barcode||"")===we)){s(" Ya existe otro producto con ese cdigo de barras."),ge(we),z(!1);return}try{await Jr($t(je,"products_candies",w),{barcode:we}),l(te=>te.map(Ce=>Ce.id===w?{...Ce,barcode:we}:Ce)),ge(we),_t&&s(" Producto guardado.")}catch(te){console.error(te),s(" Error guardando cdigo de barras.")}finally{z(!1)}return}if(le==="search"){Se(we),z(!1);return}le==="create"?x(L):ge(L)}}}),M&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>pe(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:We,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:L=>{var we;return ct(((we=L.target.files)==null?void 0:we[0])||null)}}),X&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:X})]}),st&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Re.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Re.slice(0,50).map((L,we)=>o.jsx("li",{children:L},we))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",er.total," filas (Crear:"," ",er.willCreate," / Actualizar:"," ",er.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Rt,disabled:st||ie.length===0||Re.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ie.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((L,we)=>{const Ue=L.id?i.some(He=>He.id===L.id):!1,te=i.some(He=>`${Ra(He.category)}::${Ra(He.name)}`==`${Ra(L.category)}::${Ra(L.name)}`),Ce=L.barcode?i.some(He=>String(He.barcode||"")===L.barcode):!1,$e=Ue||te||Ce;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:L.id||"",onChange:He=>Xe(we,{id:He.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:L.category,onChange:He=>Xe(we,{category:He.target.value}),list:"categories-list"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:L.name,onChange:He=>Xe(we,{name:He.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(L.providerPrice)?"":L.providerPrice,onChange:He=>Xe(we,{providerPrice:Math.max(0,Kf(He.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:L.unitsPerPackage,onChange:He=>Xe(we,{unitsPerPackage:Eh(He.target.value,1)})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:L.packaging||"",onChange:He=>Xe(we,{packaging:He.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:L.barcode||"",onChange:He=>Xe(we,{barcode:He.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${$e?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:$e?"ACTUALIZA":"CREA"})})]},`${L.id||""}-${we}`)})})]}),o.jsx("datalist",{id:"categories-list",children:Me.map(L=>o.jsx("option",{value:L},L))})]}),ie.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (el import importa todas)."]})]})]})})]})}function yD(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function n2(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):yD(t)}function gLe(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=yD(t);return r>0&&e>0?Math.floor(r/e):Math.max(0,Math.floor(Number(t.packages||0)))}function xLe(t){if(typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages))return Math.max(0,Math.floor(Number(t.remainingPackages)));const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=n2(t);return Math.max(0,Math.floor(r/e))}async function vLe(t){const e=$t(je,"candy_main_orders",t);if((await Li(e)).exists())return e;const n=Wt(At(je,"candy_main_orders"),sr("orderId","==",t)),a=await Dt(n);return a.empty?null:$t(je,"candy_main_orders",a.docs[0].id)}async function ZB(t){if(!t)return;const e=await vLe(t);if(!e)return;const r=Wt(At(je,"inventory_candies"),sr("orderId","==",t)),n=await Dt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=gLe(c),f=xLe(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),A=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=A*d,y=m*d,b=p*d,w=g*d,B=y-x,P=b-x,_=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:A,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const E=a.get(u);E.packages+=d,E.remainingPackages+=f,E.subtotal+=x,E.totalRivas+=y,E.totalSanJorge+=b,E.totalIsla+=w,E.gainRivas+=B,E.gainSanJorge+=P,E.gainIsla+=_,E.providerPrice=A,E.unitPriceRivas=m||E.unitPriceRivas,E.unitPriceSanJorge=p||E.unitPriceSanJorge,E.unitPriceIsla=g||E.unitPriceIsla,E.unitsPerPackage=h||E.unitsPerPackage,E.name=String(c.productName||E.name),E.category=String(c.category||E.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),i=s.reduce((l,c)=>l+Number(c.packages||0),0);await Jr(e,{totalPackages:i,items:s})}async function yLe(t){const{productId:e,saleDate:r,saleId:n}=t,a=t.quantityPacks,s=t.quantity;if(!e)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const i=Wt(At(je,"inventory_candies"),sr("productId","==",e)),l=await Dt(i);if(l.empty)throw new Error("No hay inventario para este producto.");const c=l.docs.map(A=>({id:A.id,data:A.data()})).sort((A,m)=>{var b,w;const p=String(A.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=A.data.createdAt)==null?void 0:b.seconds)??0,y=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return x-y});let u=0;for(const A of c){const m=Number(A.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const A of c){const m=A.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const A=Math.max(0,Math.floor(Number(a)));if(A<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=A*u}else{const A=Math.max(0,Math.floor(Number(s||0)));if(A<=0)throw new Error("La cantidad debe ser mayor que cero.");d=A}const f=c.map(A=>$t(je,"inventory_candies",A.id)),h=[];return await Di(je,async A=>{const m=await Promise.all(f.map(g=>A.get(g)));let p=d;for(let g=0;g<f.length&&p>0;g++){const x=f[g],y=m[g];if(!y.exists())continue;const b=y.data(),w=n2(b);if(w<=0)continue;const B=Math.min(w,p),P=Math.max(0,w-B),_=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),E=Math.floor(P/_);A.update(x,{remaining:P,remainingPackages:E,packages:E}),h.push({batchId:x.id,qty:B,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=B}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of h)await Nn(At(je,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:e,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:tr.now()})}),{allocations:h}}function bLe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||l<=0||r.push({inventorySellerId:i,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const l=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function lb(t){const e=t.split("#")[0],r=$t(je,"sales_candies",e),n=await Li(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=bLe(a);if(s&&s.allocations.length>0){let u=0;return await Di(je,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(f[g]=(f[g]||0)+x,u+=x)}const A=Object.keys(f).map(p=>$t(je,"inventory_candies_sellers",p)),m=await Promise.all(A.map(p=>d.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(f[A[p].id]||0))),w=y+b,B=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),P=Math.floor(w/B);d.update(A[p],{remainingUnits:w,remainingPackages:P})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],h=String((f==null?void 0:f.productId)||d||"");if(!h)continue;const A=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[h]=A.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=h.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),A=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];i.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:A.length?A:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];d&&f>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:h.length?h:void 0})}if(i.length===0)return await Di(je,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Di(je,async d=>{const f=[];for(const A of i)for(const m of A.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:$t(je,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(f.map(A=>d.get(A.ref)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=n2(p),x=Math.max(0,Math.floor(Number(f[A].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[A].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Di(je,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=Wt(At(je,"inventory_candies"),sr("productId","==",p.productId)),y=(await Dt(g)).docs.map(b=>{const w=b.data(),B=yD(w),P=n2(w);return{id:b.id,date:String(w.date||""),baseUnits:B,remaining:P}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);f.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);f.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of f)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const A=Object.keys(h).map(p=>$t(je,"inventory_candies",p)),m=await Promise.all(A.map(p=>u.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=n2(x),b=Math.max(0,Math.floor(Number(h[A[p].id]||0))),w=y+b,B=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),P=Math.floor(w/B);u.update(A[p],{remaining:w,remainingPackages:P,packages:P})}u.delete(r)}),{restored:c}}async function wLe(t){return lb(t)}const El=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function eP(t){return isFinite(t)?Math.round(t):0}function nd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function tP(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function NLe(t,e){var i,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function CLe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,B]=v.useState(0),[P,_]=v.useState(!1),[E,I]=v.useState(""),[O,S]=v.useState(""),[j,D]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const V=await Dt(At(je,"products_candies")),Y=[];V.forEach(K=>{const M=K.data();Y.push({id:K.id,name:M.name??"(sin nombre)",category:M.category??"(sin categora)"})}),e(Y);const R=Wt(At(je,"inventory_candies"),ln("date","desc")),z=await Dt(R),le=[];z.forEach(K=>{const M=K.data(),pe=Number(M.unitsPerPackage||0),X=Number(M.totalUnits??M.quantity??(M.packages||0)*(M.unitsPerPackage||0)),G=Number(M.remaining??M.totalUnits??X??0);le.push({id:K.id,productId:M.productId,productName:M.productName,category:M.category,measurement:M.measurement??"unidad",packages:Number(M.packages||0),unitsPerPackage:pe,totalUnits:X,remaining:G,remainingPackages:typeof M.remainingPackages=="number"?Number(M.remainingPackages):void 0,providerPrice:Number(M.providerPrice||0),subtotal:Number(M.subtotal||0),totalRivas:Number(M.totalRivas||0),totalSanJorge:Number(M.totalSanJorge||0),totalIsla:Number(M.totalIsla||0),gainRivas:Number(M.gainRivas||0),gainSanJorge:Number(M.gainSanJorge||0),gainIsla:Number(M.gainIsla||0),unitPriceRivas:Number(M.unitPriceRivas||0),unitPriceSanJorge:Number(M.unitPriceSanJorge||0),unitPriceIsla:Number(M.unitPriceIsla||0),date:M.date,createdAt:M.createdAt,status:M.status??"PENDIENTE",orderId:M.orderId??null})}),n(le)}catch(V){console.error(V),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const J=v.useMemo(()=>r.filter(V=>!(c&&V.date<c||d&&V.date>d||h&&V.productId!==h||m&&String(V.category||"")!==m)),[r,c,d,h,m]),ge=v.useMemo(()=>{const V=new Set;for(const Y of t)Y.category&&V.add(Y.category);return Array.from(V).sort((Y,R)=>Y.localeCompare(R))},[t]),se=v.useMemo(()=>{const V=J.reduce((M,pe)=>M+nd(pe),0),Y=J.reduce((M,pe)=>M+tP(pe),0),R=J.reduce((M,pe)=>{const X=nd(pe);return M+Number(pe.providerPrice||0)*X},0),z=J.reduce((M,pe)=>{const X=nd(pe);return M+Number(pe.unitPriceRivas||0)*X},0),le=J.reduce((M,pe)=>{const X=nd(pe);return M+Number(pe.unitPriceSanJorge||0)*X},0),K=J.reduce((M,pe)=>{const X=nd(pe);return M+Number(pe.unitPriceIsla||0)*X},0);return{totalPaquetes:V,totalPaquetesRestantes:Y,totalSubtotal:R,totalRivas:z,totalSJ:le,totalIsla:K}},[J]),he=v.useMemo(()=>{let V=0,Y=0;for(const R of J)R.status==="PENDIENTE"&&(V+=1),R.status==="PAGADO"&&(Y+=1);return{totalLotes:J.length,pendientes:V,pagados:Y}},[J]),me=v.useMemo(()=>{const V=new Map;for(const R of J){const z=String(R.productId||"");z&&(V.has(z)||V.set(z,{batches:[]}),V.get(z).batches.push(R))}const Y=[];for(const[R,z]of V.entries()){const le=[...z.batches].sort(NLe),K=le[0],M=le.reduce((St,kt)=>St+nd(kt),0),pe=le.reduce((St,kt)=>St+tP(kt),0),X=Number((K==null?void 0:K.providerPrice)||0),G=Number((K==null?void 0:K.unitPriceRivas)||0),ie=Number((K==null?void 0:K.unitPriceIsla)||0),Ie=le.reduce((St,kt)=>{const et=nd(kt);return St+Number(kt.providerPrice||0)*et},0),Re=le.reduce((St,kt)=>{const et=nd(kt);return St+Number(kt.unitPriceRivas||0)*et},0),ze=le.reduce((St,kt)=>{const et=nd(kt);return St+Number(kt.unitPriceIsla||0)*et},0),st=Re-Ie,lt=ze-Ie;let _t="",bt;for(const St of le)(!_t||String(St.date||"")>_t)&&(_t=String(St.date||""),bt=St.createdAt);Y.push({productId:R,productName:(K==null?void 0:K.productName)||"",category:(K==null?void 0:K.category)||"",totalPackages:M,remainingPackages:pe,providerPrice:X,unitPriceRivas:G,unitPriceIsla:ie,subtotal:Ie,totalRivas:Re,totalIsla:ze,gainRivas:st,gainIsla:lt,lastDate:_t,lastCreatedAt:bt,batchCount:le.length})}return Y.sort((R,z)=>String(z.lastDate).localeCompare(String(R.lastDate))),Y},[J]),Z=V=>{x(V.id),b(V.date),B(V.providerPrice),l("")},ve=()=>{x(null),b(""),B(0)},Se=async()=>{if(!g)return;const V=r.find(ze=>ze.id===g);if(!V)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const Y=nd(V),R=w*Y,z=Y>0?R/.8:0,le=Y>0?R/.85:0,K=Y>0?R/.7:0,M=z-R,pe=le-R,X=K-R,G=Y>0?eP(z/Y):0,ie=Y>0?eP(le/Y):0,Ie=Y>0?eP(K/Y):0,Re=$t(je,"inventory_candies",g);await Jr(Re,{date:y,providerPrice:w,subtotal:R,totalRivas:z,totalSanJorge:le,totalIsla:K,gainRivas:M,gainSanJorge:pe,gainIsla:X,unitPriceRivas:G,unitPriceSanJorge:ie,unitPriceIsla:Ie}),n(ze=>ze.map(st=>st.id===g?{...st,date:y,providerPrice:w,subtotal:R,totalRivas:z,totalSanJorge:le,totalIsla:K,gainRivas:M,gainSanJorge:pe,gainIsla:X,unitPriceRivas:G,unitPriceSanJorge:ie,unitPriceIsla:Ie}:st)),V.orderId&&await ZB(String(V.orderId)),l(" Lote de dulces actualizado"),ve()},k=async V=>{confirm(`Marcar PAGADO el lote del ${V.date} (${V.productName})?`)&&(await Jr($t(je,"inventory_candies",V.id),{status:"PAGADO"}),n(R=>R.map(z=>z.id===V.id?{...z,status:"PAGADO"}:z)),l(" Lote marcado como pagado"))},F=async V=>{confirm(`Eliminar el lote del ${V.date} (${V.productName})?`)&&(await Qn($t(je,"inventory_candies",V.id)),n(R=>R.filter(z=>z.id!==V.id)),V.orderId&&await ZB(String(V.orderId)),l(" Lote eliminado"))},H=async(V,Y)=>{try{s(!0),l("");const R=Wt(At(je,"inventory_candies"),sr("productId","==",V),ln("date","desc")),z=await Dt(R),le=[];z.forEach(K=>{const M=K.data(),pe=Number(M.unitsPerPackage||0),X=Number(M.totalUnits??M.quantity??(M.packages||0)*(M.unitsPerPackage||0)),G=Number(M.remaining??M.totalUnits??X??0);le.push({id:K.id,productId:M.productId,productName:M.productName,category:M.category,measurement:M.measurement??"unidad",packages:Number(M.packages||0),unitsPerPackage:pe,totalUnits:X,remaining:G,remainingPackages:typeof M.remainingPackages=="number"?Number(M.remainingPackages):void 0,providerPrice:Number(M.providerPrice||0),subtotal:Number(M.subtotal||0),totalRivas:Number(M.totalRivas||0),totalSanJorge:Number(M.totalSanJorge||0),totalIsla:Number(M.totalIsla||0),gainRivas:Number(M.gainRivas||0),gainSanJorge:Number(M.gainSanJorge||0),gainIsla:Number(M.gainIsla||0),unitPriceRivas:Number(M.unitPriceRivas||0),unitPriceSanJorge:Number(M.unitPriceSanJorge||0),unitPriceIsla:Number(M.unitPriceIsla||0),date:M.date,createdAt:M.createdAt,status:M.status??"PENDIENTE",orderId:M.orderId??null})}),I(V),S(Y),D(le),_(!0)}catch(R){console.error(R),l(" Error abriendo detalle del producto.")}finally{s(!1)}},Q=async(V,Y)=>{const R=r.filter(le=>le.productId===V);if(confirm(`Eliminar COMPLETAMENTE "${Y}"?
Esto eliminar ${R.length} lote(s) de este producto.`))try{s(!0),l("");const le=Array.from(new Set(R.map(K=>K.orderId?String(K.orderId):"").filter(Boolean)));for(const K of R)await Qn($t(je,"inventory_candies",K.id));n(K=>K.filter(M=>M.productId!==V)),l(" Producto eliminado (todos sus lotes).");for(const K of le)await ZB(K);P&&E===V&&(_(!1),D([]),I(""),S(""))}catch(le){console.error(le),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:V=>u(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:V=>f(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[o.jsx("label",{className:"font-semibold",children:"Categora"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:V=>p(V.target.value),children:[o.jsx("option",{value:"",children:"Todas"}),ge.map(V=>o.jsx("option",{value:V,children:V},V))]})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:V=>A(V.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.category]},V.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A(""),p("")},children:"Quitar filtro"})]}),o.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",he.totalLotes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",he.pendientes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",he.pagados]})]})}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",se.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",se.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",El(se.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",El(se.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",El(se.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",El(se.totalIsla)]})]})}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):me.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):me.map(V=>o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border",children:V.category||""}),o.jsxs("td",{className:"p-2 border max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:V.productName,children:V.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",V.batchCount]})]}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:V.totalPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:V.remainingPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.unitPriceRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.unitPriceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.subtotal)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.totalRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.totalIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.gainRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(V.gainIsla)}),o.jsx("td",{className:"p-2 border",children:V.lastDate||""}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(V.productId,V.productName),children:"Detalle"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(V.productId,V.productName),children:"Borrar"})]})})]},V.productId))})]})})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Producto:"})," ",O||""," ",o.jsxs("span",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold",children:"ID:"})," ",E]})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),D([]),I(""),S(""),ve()},children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border",children:"Nmero orden"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:j.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):j.map(V=>{const Y=g===V.id,R=nd(V),z=tP(V);return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border align-top",children:Y?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:le=>b(le.target.value)}):V.date}),o.jsx("td",{className:"p-2 border align-top",children:V.category||""}),o.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:V.productName,children:V.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",V.id]})]}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:R}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:z}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:V.totalUnits}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Y?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:le=>B(Math.max(0,parseFloat(le.target.value||"0")))}):El(V.providerPrice)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:El(V.unitPriceRivas)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:El(V.unitPriceIsla)}),o.jsx("td",{className:"p-2 border align-top",children:V.orderId?String(V.orderId):""}),o.jsx("td",{className:"p-2 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${V.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:V.status})}),o.jsx("td",{className:"p-2 border align-top",children:Y?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Se,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ve,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[V.status==="PENDIENTE"&&o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>k(V),children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>Z(V),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(V),children:"Borrar"})]})})]},V.id)})})]})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Q(E,O),children:"Borrar producto (todos los lotes)"})})]})})]})}const rP=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Wi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Q1(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function SH(t){const e=Wt(At(je,"ar_movements"),sr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn($t(je,"ar_movements",n.id))))}function _Le({role:t="",sellerCandyId:e="",currentUserEmail:r}){const n=String(t||"").trim().toLowerCase(),a=String(e||"").trim(),s=n==="vendedor_dulces",i=n==="admin",[l,c]=v.useState([]),[u,d]=v.useState(!1),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(!1),[B,P]=v.useState(!1),[_,E]=v.useState(null),[I,O]=v.useState([]),S=async ft=>{var xr;w(!0),P(!0),E(ft),O([]);try{const vr=await Li($t(je,"sales_candies",ft));let fr=null;vr.exists()?fr=vr.data():fr=(xr=(await Dt(Wt(At(je,"sales_candies"),sr("name","==",ft)))).docs[0])==null?void 0:xr.data();const or=(Array.isArray(fr==null?void 0:fr.items)?fr.items:fr!=null&&fr.item?[fr.item]:[]).map(rr=>({productName:String(rr.productName||""),qty:Number(rr.qty||0),unitPrice:Number(rr.unitPrice||0),discount:Number(rr.discount||0),total:Number(rr.total||0)}));O(or)}catch(vr){console.error(vr)}finally{P(!1)}},[j,D]=v.useState(""),[J,ge]=v.useState("+505 "),[se,he]=v.useState(""),[me,Z]=v.useState(""),[ve,Se]=v.useState("ACTIVO"),[k,F]=v.useState(0),[H,Q]=v.useState(""),[V,Y]=v.useState(0),[R,z]=v.useState([]),[le,K]=v.useState(!0),[M,pe]=v.useState(""),[X,G]=v.useState(null),[ie,Ie]=v.useState(""),[Re,ze]=v.useState("+505 "),[st,lt]=v.useState(""),[_t,bt]=v.useState(""),[St,kt]=v.useState("ACTIVO"),[et,ce]=v.useState(0),[Qe,xe]=v.useState(""),[fe,oe]=v.useState(!1),[Be,Me]=v.useState(null),[Ze,Je]=v.useState(!1),[nt,ke]=v.useState([]),[ae,De]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[We,pt]=v.useState(!1),[ct,Xe]=v.useState(0),[Rt,er]=v.useState(new Date().toISOString().slice(0,10)),[L,we]=v.useState(""),[Ue,te]=v.useState(!1),[Ce,$e]=v.useState(null),[He,Ye]=v.useState(""),[mt,rt]=v.useState(0),[re,ne]=v.useState(""),[Ae,ue]=v.useState(!1),[Ne,Te]=v.useState(null),[tt,ot]=v.useState(!1),[vt,yt]=v.useState(!1),[Et,Ee]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(K(!0),s&&!a){z([]),pe(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const ft=await Dt(At(je,"sellers_candies")),xr=[];ft.forEach(or=>{const rr=or.data(),gr=String(rr.status||"ACTIVO");gr==="ACTIVO"&&xr.push({id:or.id,name:String(rr.name||""),status:gr})}),c(xr);const vr=s?Wt(At(je,"customers_candies"),sr("vendorId","==",a),ln("createdAt","desc")):Wt(At(je,"customers_candies"),ln("createdAt","desc")),fr=await Dt(vr),ir=[];fr.forEach(or=>{const rr=or.data();ir.push({id:or.id,name:rr.name??"",phone:rr.phone??"+505 ",place:rr.place??"",notes:rr.notes??"",status:rr.status??"ACTIVO",creditLimit:Number(rr.creditLimit??0),createdAt:rr.createdAt??tr.now(),balance:0,sellerId:rr.sellerId||"",vendorId:rr.vendorId||"",vendorName:rr.vendorName||"",initialDebt:Number(rr.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const or of ir)try{const rr=Wt(At(je,"ar_movements"),sr("customerId","==",or.id)),gr=await Dt(rr);let Vr=0,gn=null;gr.forEach(Ho=>{var Kl,If,XA;const si=Ho.data(),pi=Number(si.amount||0);if(Vr+=pi,pi<0){const Z0=si.date??((If=(Kl=si.createdAt)==null?void 0:Kl.toDate)!=null&&If.call(Kl)?si.createdAt.toDate().toISOString().slice(0,10):""),Md=(XA=si.createdAt)!=null&&XA.seconds?Number(si.createdAt.seconds):0;(!gn||Md>=gn.ts)&&(gn={date:Z0,amount:Math.abs(pi),ts:Md})}});const an=Number(or.initialDebt||0);or.balance=an+Vr,gn?(or.lastAbonoDate=gn.date,or.lastAbonoAmount=gn.amount):(or.lastAbonoDate="",or.lastAbonoAmount=0)}catch{or.balance=Number(or.initialDebt||0),or.lastAbonoDate="",or.lastAbonoAmount=0}z(ir)}catch(ft){console.error(ft),pe(" Error cargando clientes.")}finally{K(!1)}})()},[s,a]);const ut=()=>{D(""),ge("+505 "),he(""),Z(""),Se("ACTIVO"),F(0),Q(""),Y(0)},Nt=async ft=>{var ir;if(ft.preventDefault(),pe(""),!j.trim()){pe("Ingresa el nombre.");return}const xr=Q1(J);if(xr.length<6){pe("Telfono incompleto.");return}const vr=s?a:String(H||"").trim(),fr=vr&&((ir=l.find(or=>or.id===vr))==null?void 0:ir.name)||"";try{const or=Number(V||0),rr=await Nn(At(je,"customers_candies"),{name:j.trim(),phone:xr,place:se||"",notes:me||"",status:ve,creditLimit:Number(k||0),vendorId:vr,vendorName:fr,initialDebt:or,createdAt:tr.now()});z(gr=>[{id:rr.id,name:j.trim(),phone:xr,place:se||"",notes:me||"",status:ve,creditLimit:Number(k||0),vendorId:vr,vendorName:fr,initialDebt:or,createdAt:tr.now(),balance:or,lastAbonoDate:"",lastAbonoAmount:0},...gr]),ut(),ue(!1),pe(" Cliente creado")}catch(or){console.error(or),pe(" Error al crear cliente")}},gt=ft=>{if(s){pe(" No permitido: vendedores no editan clientes desde el listado.");return}G(ft.id),Ie(ft.name),ze(ft.phone||"+505 "),lt(ft.place||""),bt(ft.notes||""),kt(ft.status||"ACTIVO"),ce(Number(ft.creditLimit||0)),xe(String(ft.vendorId||""))},at=()=>{G(null),Ie(""),ze("+505 "),lt(""),bt(""),kt("ACTIVO"),ce(0),xe("")},zt=async()=>{var rr;if(s){pe(" No permitido.");return}if(!X)return;const ft=Q1(Re);if(!ie.trim()){pe("Ingresa el nombre.");return}const xr=R.find(gr=>gr.id===X),vr=String((xr==null?void 0:xr.vendorId)||""),fr=s?a:String(Qe||"");if(s&&vr&&vr!==a){pe(" Este cliente pertenece a otro vendedor.");return}if(i&&vr&&fr&&vr!==fr){pe(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const ir=s?a:String(Qe||""),or=ir&&((rr=l.find(gr=>gr.id===ir))==null?void 0:rr.name)||"";try{await Jr($t(je,"customers_candies",X),{name:ie.trim(),phone:ft,place:st||"",notes:_t||"",status:St,creditLimit:Number(et||0),vendorId:ir,vendorName:or}),z(gr=>gr.map(Vr=>Vr.id===X?{...Vr,name:ie.trim(),phone:ft,place:st||"",notes:_t||"",status:St,creditLimit:Number(et||0),vendorId:ir,vendorName:or}:Vr)),at(),pe(" Cliente actualizado")}catch(gr){console.error(gr),pe(" Error al actualizar")}},Jt=async ft=>{if(confirm(`Eliminar al cliente "${ft.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{K(!0);const vr=Wt(At(je,"sales_candies"),sr("customerId","==",ft.id)),fr=await Dt(vr);for(const rr of fr.docs){const gr=rr.id;try{await lb(gr)}catch(Vr){console.warn("restoreSaleAndDeleteCandy error",Vr);try{await Qn($t(je,"sales_candies",gr))}catch{}}await SH(gr)}const ir=Wt(At(je,"ar_movements"),sr("customerId","==",ft.id)),or=await Dt(ir);await Promise.all(or.docs.map(rr=>Qn($t(je,"ar_movements",rr.id)))),await Qn($t(je,"customers_candies",ft.id)),z(rr=>rr.filter(gr=>gr.id!==ft.id)),pe(" Cliente eliminado y dulces devueltos al inventario")}catch(vr){console.error(vr),pe(" No se pudo eliminar el cliente.")}finally{K(!1)}},Ot=(ft,xr)=>{const vr=ft.reduce((rr,gr)=>rr+(Number(gr.amount)||0),0),fr=ft.filter(rr=>Number(rr.amount)<0).reduce((rr,gr)=>rr+Math.abs(Number(gr.amount)||0),0),ir=ft.filter(rr=>Number(rr.amount)>0).reduce((rr,gr)=>rr+(Number(gr.amount)||0),0),or=Number(xr||0)+vr;De({saldoActual:or,totalAbonado:fr,totalCargos:Number(xr||0)+ir,saldoRestante:or})},Vt=async ft=>{Me(ft),ke([]),De({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),oe(!0),ot(!1),yt(!1),Ee(null),pt(!1),Xe(0),er(new Date().toISOString().slice(0,10)),we(""),$e(null),Je(!0);try{const xr=Wt(At(je,"ar_movements"),sr("customerId","==",ft.id)),vr=await Dt(xr),fr=[];vr.forEach(ir=>{var Vr,gn;const or=ir.data(),rr=or.date??((gn=(Vr=or.createdAt)==null?void 0:Vr.toDate)!=null&&gn.call(Vr)?or.createdAt.toDate().toISOString().slice(0,10):""),gr=Number(or.amount||0);fr.push({id:ir.id,date:rr,type:or.type??(gr<0?"ABONO":"CARGO"),amount:gr,ref:or.ref||{},comment:or.comment||"",createdAt:or.createdAt})}),fr.sort((ir,or)=>{var Vr,gn;if(ir.date!==or.date)return ir.date.localeCompare(or.date);const rr=((Vr=ir.createdAt)==null?void 0:Vr.seconds)||0,gr=((gn=or.createdAt)==null?void 0:gn.seconds)||0;return rr-gr}),ke(fr),Ot(fr,Number(ft.initialDebt||0))}catch(xr){console.error(xr),pe(" No se pudo cargar el estado de cuenta")}finally{Je(!1)}},nr=ft=>{const xr=ft.filter(vr=>Number(vr.amount)<0).map(vr=>{var fr;return{date:vr.date,amount:Math.abs(Number(vr.amount||0)),ts:((fr=vr.createdAt)==null?void 0:fr.seconds)||0}}).sort((vr,fr)=>(vr.ts||0)-(fr.ts||0));return xr.length?xr[xr.length-1]:null},Ht=async()=>{if(!Be)return;pe("");const ft=Number(ct||0);if(!(ft>0)){pe("Ingresa un monto de abono mayor a 0.");return}const xr=parseFloat(ft.toFixed(2));if(!Rt){pe("Selecciona la fecha del abono.");return}try{te(!0);const vr={customerId:Be.id,type:"ABONO",amount:-xr,date:Rt,comment:L||"",createdAt:tr.now()},ir={id:(await Nn(At(je,"ar_movements"),vr)).id,date:Rt,type:"ABONO",amount:-xr,comment:L||"",createdAt:tr.now()},or=[...nt,ir].sort((rr,gr)=>{var an,Ho;if(rr.date!==gr.date)return rr.date.localeCompare(gr.date);const Vr=((an=rr.createdAt)==null?void 0:an.seconds)||0,gn=((Ho=gr.createdAt)==null?void 0:Ho.seconds)||0;return Vr-gn});ke(or),Ot(or,Number(Be.initialDebt||0)),z(rr=>rr.map(gr=>{if(gr.id!==Be.id)return gr;const Vr=(gr.balance||0)-xr;return{...gr,balance:Vr,lastAbonoDate:Rt,lastAbonoAmount:xr}})),Me(rr=>rr&&{...rr,balance:(rr.balance||0)-xr,lastAbonoDate:Rt,lastAbonoAmount:xr}),Xe(0),we(""),er(new Date().toISOString().slice(0,10)),pt(!1),pe(" Abono registrado")}catch(vr){console.error(vr),pe(" Error al registrar el abono")}finally{te(!1)}},Nr=ft=>{$e(ft.id),Ye(ft.date||new Date().toISOString().slice(0,10)),rt(Math.abs(Number(ft.amount||0))),ne(ft.comment||"")},Or=()=>{$e(null),Ye(""),rt(0),ne("")},Fn=async()=>{if(!Ce||!Be)return;const ft=nt.findIndex(ir=>ir.id===Ce);if(ft===-1)return;const xr=nt[ft],vr=Number(mt||0);if(!(vr>0)){pe("El monto debe ser mayor a 0.");return}const fr=xr.type==="ABONO"?-parseFloat(vr.toFixed(2)):+parseFloat(vr.toFixed(2));try{await Jr($t(je,"ar_movements",Ce),{date:He,amount:fr,comment:re||""});const ir=[...nt];ir[ft]={...xr,date:He,amount:fr,comment:re||""},ir.sort((Vr,gn)=>{var si,pi;if(Vr.date!==gn.date)return Vr.date.localeCompare(gn.date);const an=((si=Vr.createdAt)==null?void 0:si.seconds)||0,Ho=((pi=gn.createdAt)==null?void 0:pi.seconds)||0;return an-Ho}),ke(ir),Ot(ir,Number(Be.initialDebt||0));const or=ir.reduce((Vr,gn)=>Vr+(Number(gn.amount)||0),0),rr=Number(Be.initialDebt||0)+or,gr=nr(ir);z(Vr=>Vr.map(gn=>gn.id===Be.id?{...gn,balance:rr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}:gn)),Me(Vr=>Vr&&{...Vr,balance:rr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}),Or(),pe(" Movimiento actualizado")}catch(ir){console.error(ir),pe(" Error al actualizar movimiento")}},vn=async ft=>{var vr,fr;if(confirm(`Eliminar este movimiento (${ft.type==="ABONO"?"Abono":"Compra"}) del ${ft.date}?${ft.type==="CARGO"&&((vr=ft.ref)!=null&&vr.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&Be)try{if(K(!0),ft.type==="CARGO"&&((fr=ft.ref)!=null&&fr.saleId)){try{await lb(ft.ref.saleId)}catch(Vr){console.warn("restoreSaleAndDeleteCandy error",Vr),K(!1),pe(" No se pudo devolver inventario de la venta.");return}await SH(ft.ref.saleId)}else await Qn($t(je,"ar_movements",ft.id));const ir=nt.filter(Vr=>{var gn,an;return ft.type==="CARGO"&&((gn=ft.ref)!=null&&gn.saleId)?((an=Vr.ref)==null?void 0:an.saleId)!==ft.ref.saleId:Vr.id!==ft.id});ke(ir),Ot(ir,Number(Be.initialDebt||0));const or=ir.reduce((Vr,gn)=>Vr+(Number(gn.amount)||0),0),rr=Number(Be.initialDebt||0)+or,gr=nr(ir);z(Vr=>Vr.map(gn=>gn.id===Be.id?{...gn,balance:rr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}:gn)),Me(Vr=>Vr&&{...Vr,balance:rr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}),Ee(null),pe(" Movimiento eliminado")}catch(ir){console.error(ir),pe(" Error al eliminar movimiento")}finally{K(!1)}},Na=v.useMemo(()=>[...R].sort((ft,xr)=>{var vr,fr;return ft.status!==xr.status?ft.status==="BLOQUEADO"?1:-1:(((vr=xr.createdAt)==null?void 0:vr.seconds)||0)-(((fr=ft.createdAt)==null?void 0:fr.seconds)||0)}),[R]),Ku=ft=>ft==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Rn=v.useMemo(()=>{const ft=f.trim().toLowerCase(),xr=p.trim()===""?null:Number(p),vr=x.trim()===""?null:Number(x);return Na.filter(fr=>{const ir=!ft||String(fr.name||"").toLowerCase().includes(ft),or=!A||fr.status===A,rr=Number(fr.balance||0),gr=xr===null||!Number.isNaN(xr)&&rr>=xr,Vr=vr===null||!Number.isNaN(vr)&&rr<=vr;return ir&&or&&gr&&Vr})},[Na,f,A,p,x]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{ue(!0),s&&Q(a)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>d(ft=>!ft),children:u?"Ocultar filtros":"Mostrar filtros"}),u&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:ft=>h(ft.target.value),placeholder:"Buscar por nombre"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ft=>m(ft.target.value||""),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:p,onChange:ft=>g(ft.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:x,onChange:ft=>y(ft.target.value),placeholder:""})]})]}),o.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),m(""),g(""),y("")},children:"Limpiar"})})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:le?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Rn.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Rn.map(ft=>{var vr;const xr=X===ft.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(vr=ft.createdAt)!=null&&vr.toDate?ft.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:ie,onChange:fr=>Ie(fr.target.value)}):o.jsx("div",{className:"font-medium",children:ft.name})}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:Re,onChange:fr=>ze(Q1(fr.target.value))}):ft.phone}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:s?a:Qe,onChange:fr=>xe(fr.target.value),disabled:s,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(fr=>o.jsx("option",{value:fr.id,children:fr.name},fr.id))]}):ft.vendorName||""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded",value:st,onChange:fr=>lt(fr.target.value),children:[o.jsx("option",{value:"",children:""}),rP.map(fr=>o.jsx("option",{value:fr,children:fr},fr))]}):ft.place||""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded",value:St,onChange:fr=>kt(fr.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ku(ft.status)}`,children:ft.status})}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(et)?"":et,onChange:fr=>ce(Math.max(0,Number(fr.target.value||0)))}):Wi(ft.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:Wi(ft.balance||0)}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:_t,onChange:fr=>bt(fr.target.value),maxLength:500}):o.jsx("span",{title:ft.notes||"",children:(ft.notes||"").length>40?(ft.notes||"").slice(0,40)+"":ft.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:xr?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:zt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:at,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(ft),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Jt(ft),disabled:!i,title:i?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Vt(ft),children:"Estado de cuenta"})]})})})]},ft.id)})})]})}),o.jsx("div",{className:"md:hidden",children:le?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Rn.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):o.jsx("div",{className:"space-y-2",children:Rn.map(ft=>{const xr=Ne===ft.id,vr=X===ft.id,fr=o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Ku(ft.status)}`,children:ft.status});return o.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{pe(""),!vr&&Te(ir=>ir===ft.id?null:ft.id)},children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"truncate font-semibold",children:ft.name})}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),o.jsx("div",{className:"font-semibold leading-4",children:Wi(ft.balance||0)})]}),fr]})]}),xr&&o.jsxs("div",{className:"px-3 pb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),o.jsx("div",{className:"font-medium",children:ft.lastAbonoDate?ft.lastAbonoDate:""}),o.jsx("div",{className:"text-[12px] text-gray-700",children:ft.lastAbonoAmount?Wi(ft.lastAbonoAmount):""})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),o.jsx("div",{className:"text-lg font-bold",children:Wi(ft.balance||0)})]})]}),vr?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:ie,onChange:ir=>Ie(ir.target.value)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:Re,onChange:ir=>ze(Q1(ir.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:St,onChange:ir=>kt(ir.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:st,onChange:ir=>lt(ir.target.value),children:[o.jsx("option",{value:"",children:""}),rP.map(ir=>o.jsx("option",{value:ir,children:ir},ir))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:s?a:Qe,onChange:ir=>xe(ir.target.value),disabled:s,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(ir=>o.jsx("option",{value:ir.id,children:ir.name},ir.id))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(et)?"":et,onChange:ir=>ce(Math.max(0,Number(ir.target.value||0)))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:_t,onChange:ir=>bt(ir.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:zt,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{at(),Te(null)},type:"button",children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(ft),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Jt(ft),disabled:!i,title:i?"Borrar":"Solo admin",type:"button",children:"Borrar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Vt(ft),type:"button",children:"Estado"})]})]})]},ft.id)})})})]}),M&&o.jsx("p",{className:"mt-2 text-sm",children:M}),Ae&&xd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ue(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Nt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:j,onChange:ft=>D(ft.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:J,onChange:ft=>ge(Q1(ft.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:se,onChange:ft=>he(ft.target.value),children:[o.jsx("option",{value:"",children:""}),rP.map(ft=>o.jsx("option",{value:ft,children:ft},ft))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ve,onChange:ft=>Se(ft.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:s?a:H,onChange:ft=>Q(ft.target.value),disabled:s,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(ft=>o.jsx("option",{value:ft.id,children:ft.name},ft.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:V===0?"":V,onChange:ft=>Y(Math.max(0,Number(ft.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:ft=>F(Math.max(0,Number(ft.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:me,onChange:ft=>Z(ft.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[me.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),fe&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Be==null?void 0:Be.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Xe(0),er(new Date().toISOString().slice(0,10)),we(""),pt(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>oe(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:Wi(Number((Be==null?void 0:Be.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Wi(ae.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:Wi(ae.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:Wi(ae.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Ze?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):nt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):nt.map(ft=>{var vr,fr;const xr=Ce===ft.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:He,onChange:ir=>Ye(ir.target.value)}):ft.date||""}),o.jsx("td",{className:"p-2 border",children:ft.amount>=0?(vr=ft.ref)!=null&&vr.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>S(ft.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(fr=ft.ref)!=null&&fr.saleId?`Venta #${ft.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:re,onChange:ir=>ne(ir.target.value),placeholder:"Comentario"}):o.jsx("span",{title:ft.comment||"",children:(ft.comment||"").length>40?(ft.comment||"").slice(0,40)+"":ft.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:xr?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(mt)?"":mt,onChange:ir=>{const or=Number(ir.target.value||0),rr=Number.isFinite(or)?Math.max(0,parseFloat(or.toFixed(2))):0;rt(rr)},placeholder:"0.00"}):Wi(ft.amount)}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Fn,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Or,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nr(ft),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>vn(ft),children:"Borrar"})]})})]},ft.id)})})]})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ot(ft=>!ft),children:[o.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),o.jsx("div",{className:"text-sm text-gray-500",children:tt?"Ocultar":"Ver"})]}),tt&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),o.jsx("div",{className:"font-bold",children:Wi(Number((Be==null?void 0:Be.initialDebt)||0))})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),o.jsx("div",{className:"font-bold",children:Wi(ae.saldoActual)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),o.jsx("div",{className:"font-bold",children:Wi(ae.totalAbonado)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),o.jsx("div",{className:"font-bold",children:Wi(ae.saldoRestante)})]})]})]}),o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>yt(ft=>!ft),children:[o.jsx("div",{className:"font-semibold",children:"Movimientos"}),o.jsx("div",{className:"text-sm text-gray-500",children:vt?"Ocultar":"Ver"})]}),vt&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:Ze?o.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):nt.length===0?o.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):nt.map(ft=>{var or;const xr=Et===ft.id,vr=Ce===ft.id,fr=ft.amount>=0?"CARGO":"ABONO",ir=ft.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return o.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{vr||Ee(rr=>rr===ft.id?null:ft.id)},children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:ft.date||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${ir}`,children:fr}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),o.jsx("div",{className:"font-semibold",children:Wi(ft.amount)})]})]})]}),xr&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),o.jsx("div",{className:"font-medium",children:(or=ft.ref)!=null&&or.saleId?`Venta #${ft.ref.saleId}`:""})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),vr?o.jsx("input",{className:"w-full border p-2 rounded-xl",value:re,onChange:rr=>ne(rr.target.value),placeholder:"Comentario"}):o.jsx("div",{className:"font-medium",children:(ft.comment||"").trim()||""})]}),vr&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:He,onChange:rr=>Ye(rr.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(mt)?"":mt,onChange:rr=>{const gr=Number(rr.target.value||0),Vr=Number.isFinite(gr)?Math.max(0,parseFloat(gr.toFixed(2))):0;rt(Vr)}})]})]}),vr?o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Fn,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Or,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nr(ft),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>vn(ft),type:"button",children:"Borrar"})]})]})]},ft.id)})})]})]}),We&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Be==null?void 0:Be.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Rt,onChange:ft=>er(ft.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ct===0?"":ct,onChange:ft=>{const xr=Number(ft.target.value||0),vr=Number.isFinite(xr)?Math.max(0,parseFloat(xr.toFixed(2))):0;Xe(vr)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:L,onChange:ft=>we(ft.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[L.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>pt(!1),disabled:Ue,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Ht,disabled:Ue,children:Ue?"Guardando...":"Guardar abono"})]})]})})]})}),b&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",_?` #${_}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:B?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):I.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):I.map((ft,xr)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ft.productName}),o.jsx("td",{className:"p-2 border text-right",children:ft.qty}),o.jsx("td",{className:"p-2 border text-right",children:Wi(ft.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Wi(ft.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Wi(ft.total)})]},xr))})]})})]})})]})}const Xl=t=>`C$ ${(Number(t)||0).toFixed(2)}`,ELe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function SLe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function ILe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function BLe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Br;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${SLe(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),A=c.toFixed(2);d.text(`Comisin vendedor: ${A}%  C$ ${h}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(h=>{f>270&&(d.addPage(),f=12);const A=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(A,10,f),d.text(String(h.qty),110,f,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function IH(t,e){if(!t||!e)return 0;const r=Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",e),sr("productId","==",t)),n=await Dt(r);let a=0;return n.forEach(s=>{const i=s.data(),l=Number(i.remainingUnits??i.remaining??i.totalUnits??0);l>0&&(a+=l)}),a}const BH=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function PLe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||i<=0)return{allocations:[]};const c=Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",r),sr("productId","==",e),sr("remainingUnits",">",0),ln("date","asc"),ln("createdAt","asc")),u=await Dt(c);for(const d of u.docs){if(i<=0)break;const f=d.data(),h=Number(f.remainingUnits||0);if(h<=0)continue;const A=Math.min(h,i),m=h-A,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await Jr(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:A,saleDate:a,saleId:s}),i-=A}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:l}}function PH(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function jLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState({}),[f,h]=v.useState("CONTADO"),[A,m]=v.useState("RIVAS"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(BH()),[B,P]=v.useState(""),[_,E]=v.useState(!1),[I,O]=v.useState(""),[S,j]=v.useState([]),[D,J]=v.useState(!0),[ge,se]=v.useState(!1),he=v.useMemo(()=>S.reduce((L,we)=>L+(we.qtyPackages||0),0),[S]),me=v.useMemo(()=>S.reduce((L,we)=>L+(we.qtyPackages||0)*(we.unitsPerPackage||1),0),[S]),Z=v.useMemo(()=>{const L=S.reduce((we,Ue)=>{const te=(Number(Ue.pricePerPackage)||0)*(Ue.qtyPackages||0),Ce=Number(Ue.discount)||0,$e=Math.max(0,te-Ce);return we+$e},0);return Math.floor(L*100)/100},[S]),[ve,Se]=v.useState(0),[k,F]=v.useState(""),[H,Q]=v.useState(!1),[V,Y]=v.useState(!1),[R,z]=v.useState(""),[le,K]=v.useState("+505 "),[M,pe]=v.useState(""),[X,G]=v.useState(""),[ie,Ie]=v.useState("ACTIVO"),[Re,ze]=v.useState(0),[st,lt]=v.useState(""),_t=()=>{z(""),K("+505 "),pe(""),G(""),Ie("ACTIVO"),ze(0)},[bt,St]=v.useState(!1),kt=async L=>{const we=String(L||"").trim();if(!we)return;const Ue=ct.find(He=>String(He.barcode||"")===we),te=ct.find(He=>String(He.sku||"")===we),Ce=ct.find(He=>String(He.id||"")===we),$e=Ue||te||Ce||null;$e?(await nt($e.id),F(" Producto agregado desde escner."),setTimeout(()=>F(""),2500)):(F(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>F(""),2500))};function et({open:L,onClose:we,onDetected:Ue}){const te=v.useRef(null),Ce=v.useRef(null),[$e,He]=v.useState(""),Ye=v.useRef("");return v.useEffect(()=>{if(!L)return;let mt=!1;const rt=new G2,re=()=>{var Ae,ue,Ne;try{(Ae=Ce.current)==null||Ae.stop()}catch{}Ce.current=null;try{const Te=(ue=te.current)==null?void 0:ue.srcObject;(Ne=Te==null?void 0:Te.getTracks)==null||Ne.forEach(tt=>tt.stop())}catch{}try{te.current&&(te.current.srcObject=null)}catch{}};return(async()=>{He("");try{if(!te.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Ne=>Ne.stop())}catch{}const Ae=await rt.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},te.current,ue=>{if(!mt&&ue){const Ne=String(ue.getText()||"").trim().replace(/\s+/g,"");if(!Ne||Ne===Ye.current)return;Ye.current=Ne,re(),Ue(Ne),we()}});Ce.current=Ae}catch(Ae){const ue=String((Ae==null?void 0:Ae.message)||""),Ne=String((Ae==null?void 0:Ae.name)||"");ue.toLowerCase().includes("permission")||Ne==="NotAllowedError"?He("Permiso de cmara denegado."):Ne==="NotFoundError"||ue.toLowerCase().includes("notfound")?He("No se encontr cmara en este dispositivo."):ue.toLowerCase().includes("secure")||ue.toLowerCase().includes("https")?He("La cmara requiere HTTPS (sitio seguro)."):He(ue||"No se pudo iniciar el escner.")}})(),()=>{var Ae;mt=!0;try{(Ae=Ce.current)==null||Ae.stop()}catch{}Ce.current=null}},[L,we,Ue]),L?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:we,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:te,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),$e&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:$e}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const ce=v.useMemo(()=>n.find(L=>L.id===p),[n,p]),Qe=v.useMemo(()=>_&&B?n.filter(L=>(L.vendorId??L.sellerId??"")===B):n,[n,_,B]),xe=(ce==null?void 0:ce.balance)||0,fe=f==="CREDITO"?xe+Math.max(0,Number(Z||0))-Math.max(0,Number(ve||0)):0,oe=v.useMemo(()=>l.find(L=>L.id===B)||null,[l,B]),Be=(oe==null?void 0:oe.commissionPercent)||0,Me=v.useMemo(()=>{const L=Number(Z||0),we=Number(Be||0),Ue=L*we/100;return Number(Ue.toFixed(2))},[Z,Be]);v.useEffect(()=>{(async()=>{const L=Wt(At(je,"customers_candies"),ln("createdAt","desc")),we=await Dt(L),Ue=[];we.forEach(He=>{const Ye=He.data();Ue.push({id:He.id,name:Ye.name??"",phone:Ye.phone??"+505 ",place:Ye.place??"",status:Ye.status??"ACTIVO",creditLimit:Number(Ye.creditLimit??0),balance:0,sellerId:Ye.sellerId??Ye.vendorId??"",vendorId:Ye.vendorId??Ye.sellerId??""})});for(const He of Ue)try{const Ye=Wt(At(je,"ar_movements"),sr("customerId","==",He.id)),mt=await Dt(Ye);let rt=0;mt.forEach(ne=>rt+=Number(ne.data().amount||0));const re=Number(He.initialDebt||0);He.balance=rt+re}catch{He.balance=0}a(Ue);const te=Wt(At(je,"products_candies"),ln("createdAt","desc")),Ce=await Dt(te),$e=[];Ce.forEach(He=>{const Ye=He.data();$e.push({id:He.id,name:Ye.name??"(sin nombre)",sku:Ye.sku??"",unitsPerPackage:Number(Ye.unitsPerPackage??1),barcode:String(Ye.barcode||""),priceRivas:Number(Ye.unitPriceRivas??0),priceSanJorge:Number(Ye.unitPriceSanJorge??0),priceIsla:Number(Ye.unitPriceIsla??0)})}),i($e);try{const He=await Dt(At(je,"sellers_candies")),Ye=[];He.forEach(mt=>{const rt=mt.data(),re=rt.branch||"Rivas",ne=ILe(re);Ye.push({id:mt.id,name:rt.name??"(sin nombre)",branch:ne,branchLabel:re,commissionPercent:Number(rt.commissionPercent??0)})}),c(Ye)}catch(He){console.error("Error cargando vendedores:",He)}d({})})()},[]),v.useEffect(()=>{if(t==="vendedor_dulces"&&e){P(e),E(!0);try{localStorage.setItem("pos_vendorId",e),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(t==="admin"){E(!1);return}try{const L=localStorage.getItem("pos_vendorId")||"",we=localStorage.getItem("pos_role")||"";L&&P(L),we.toUpperCase()==="VENDEDOR"&&E(!0)}catch{}},[t,e]);const Ze=async L=>{if(!L){d({});return}const we=Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",L)),Ue=await Dt(we),te={};Ue.forEach(Ce=>{const $e=Ce.data(),He=$e.productId||"";if(!He)return;const Ye=Number($e.remainingUnits??$e.remaining??$e.totalUnits??0);Ye<=0||(te[He]=(te[He]||0)+Ye)}),d(te),j(Ce=>{const $e=[];for(const He of Ce){const Ye=te[He.productId]??0;Ye>0&&$e.push({...He,availableUnits:Ye})}return $e})};v.useEffect(()=>{if(!B){d({});return}const L=l.find(we=>we.id===B);L&&m(L.branch),Ze(B)},[B,l]),v.useEffect(()=>{j(L=>L.map(we=>{const Ue=s.find(Ce=>Ce.id===we.productId);if(!Ue)return we;const te=A==="RIVAS"?Ue.priceRivas:A==="SAN_JORGE"?Ue.priceSanJorge:Ue.priceIsla;return{...we,pricePerPackage:Number(te)||0}}))},[A,s]);async function Je(L){const{productId:we,vendorId:Ue,branch:te}=L;if(!we||!Ue)return 0;const Ce=Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",Ue),sr("productId","==",we)),$e=await Dt(Ce);if($e.empty)return 0;const He=$e.docs[0].data(),Ye=Number(He.unitPriceVendor??0);if(Ye>0)return Ye;const mt=Number(te==="RIVAS"?He.unitPriceRivas??0:te==="SAN_JORGE"?He.unitPriceSanJorge??0:He.unitPriceIsla??0);return Number(mt||0)}const nt=async L=>{var mt;if(!L)return;if(!B){F("Selecciona primero el vendedor para usar su inventario."),O("");return}if(S.some(rt=>rt.productId===L)){O("");return}const we=s.find(rt=>rt.id===L);if(!we){O("");return}const Ue=await IH(L,B),te=((mt=l.find(rt=>rt.id===B))==null?void 0:mt.branch)??A,Ce=await Je({productId:L,vendorId:B,branch:te}),He=await(async rt=>{const{productId:re,vendorId:ne}=rt;if(!re||!ne)return 0;try{const Ae=Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",ne),sr("productId","==",re)),ue=await Dt(Ae);if(ue.empty)return 0;const Ne=ue.docs[0].data();return Number(Ne.providerPrice??0)}catch{return 0}})({productId:L,vendorId:B}),Ye={productId:L,productName:we.name||"",sku:we.sku||"",unitsPerPackage:we.unitsPerPackage||1,pricePerPackage:Number(Ce)||0,availableUnits:Number(Ue)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(He)||0,margenVendedor:0};j(rt=>[...rt,Ye]),O("")},ke=(L,we)=>{j(Ue=>Ue.map(te=>{if(te.productId!==L)return te;if(we==="")return{...te,qtyPackages:0};const Ce=Math.max(0,Math.floor(Number(we))),$e=u[L]??te.availableUnits??0,He=Math.max(1,Number(te.unitsPerPackage||1)),Ye=Math.floor($e/He);let mt=Ce;Ce>Ye&&(mt=Ye,F(` Solo hay ${Ye} paquetes disponibles.`),setTimeout(()=>F(""),2500));const rt=Number(te.pricePerPackage||0)*mt,re=Math.max(0,rt-Number(te.discount||0)),ne=Number(te.providerPricePerPackage||0)*mt,Ae=re-ne,ue=Math.max(0,Number((Ae*.25).toFixed(2)));return{...te,qtyPackages:mt,margenVendedor:ue}}))},ae=(L,we)=>{j(Ue=>Ue.map(te=>{if(te.productId!==L)return te;if(we==="")return{...te,discount:0};const Ce=Math.max(0,Math.floor(Number(we))),$e=te.qtyPackages||0,He=Number(te.pricePerPackage||0)*$e,Ye=Number(te.providerPricePerPackage||0)*$e,mt=He-Ye-Number(Ce||0),rt=Math.max(0,Number((mt*.25).toFixed(2)));return{...te,discount:Ce,margenVendedor:rt}}))},De=L=>j(we=>we.filter(Ue=>Ue.productId!==L)),We=async()=>{if(!b)return"Selecciona la fecha.";if(!B)return"Selecciona el vendedor para esta venta.";if(S.length===0)return"Agrega al menos un producto.";const L=S.filter(we=>(we.qtyPackages||0)>0);if(L.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Z>0))return"El total debe ser mayor a cero.";if(f==="CONTADO"){if(!x.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!p)return"Selecciona un cliente (crdito).";if(ve<0)return"El pago inicial no puede ser negativo.";if(ve>Z)return"El pago inicial no puede superar el total.";if((ce==null?void 0:ce.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const we of L){const Ue=we.unitsPerPackage||1,te=(we.qtyPackages||0)*Ue,Ce=await IH(we.productId,B),$e=Math.floor(Ce/Ue);if(te>Ce)return`Inventario insuficiente en el pedido del vendedor para "${we.productName}". Disponible: ${$e} paquetes.`;const He=(Number(we.pricePerPackage)||0)*(we.qtyPackages||0),Ye=Number(we.discount)||0;if(!Number.isInteger(Ye)||Ye<0)return`El descuento en "${we.productName}" debe ser entero y  0.`;if(Ye>He)return`El descuento en "${we.productName}" no puede exceder C$ ${He.toFixed(2)}.`}return null},pt=async L=>{L.preventDefault(),F("");const we=await We();if(we){F(" "+we);return}try{Q(!0);const Ue=S.filter(Ye=>(Ye.qtyPackages||0)>0).map(Ye=>{const mt=Ye.unitsPerPackage||1,rt=Ye.qtyPackages||0,re=rt*mt,ne=(Number(Ye.pricePerPackage)||0)*(rt||0),Ae=Math.max(0,Math.floor(Number(Ye.discount)||0)),ue=Math.max(0,ne-Ae),Ne=Number(Ye.providerPricePerPackage||0),Te=Ne*rt,tt=ue-Te,ot=Math.max(0,Number((tt*.25).toFixed(2)));return{productId:Ye.productId,productName:Ye.productName,sku:Ye.sku||"",qty:re,packages:rt,unitsPerPackage:mt,branch:A,unitPricePackage:Number(Ye.pricePerPackage)||0,discount:Ae,total:Math.floor(ue*100)/100,providerPricePerPackage:Ne,margenVendedor:ot}}),te={type:f,branch:A,date:b,createdAt:tr.now(),itemsTotal:Number(Z)||0,total:Number(Z)||0,quantity:Number(me)||0,packagesTotal:Number(he)||0,items:Ue,vendorId:B},Ce=l.find(Ye=>Ye.id===B);Ce&&(te.vendorName=Ce.name,te.vendorBranch=Ce.branch,te.vendorBranchLabel=Ce.branchLabel,te.vendorCommissionPercent=Ce.commissionPercent||0,te.vendorCommissionAmount=Me||0),f==="CONTADO"?te.customerName=x.trim():(te.customerId=p,te.downPayment=Number(ve)||0);const $e=await Nn(At(je,"sales_candies"),te);if(f==="CONTADO"){const Ye=(x||"").trim();if(Ye)try{await Nn(At(je,"cash_customers"),{name:Ye,date:b,branch:A,vendorId:B,createdAt:tr.now()})}catch(mt){console.warn("No se pudo guardar cash_customer:",mt)}}if(f==="CREDITO"&&p){const Ye={customerId:p,date:b,createdAt:tr.now(),ref:{saleId:$e.id}},mt=Number((ce==null?void 0:ce.balance)||0);if(await Nn(At(je,"ar_movements"),{...Ye,type:"CARGO",amount:Number(Z)||0}),Number(ve)>0&&await Nn(At(je,"ar_movements"),{...Ye,type:"ABONO",amount:-Number(ve)}),mt===0)try{await Jr($t(je,"customers_candies",p),{initialDebt:Number(Z)||0,initialDebtDate:b})}catch(rt){console.warn("No se pudo setear initialDebt:",rt)}}const He={};for(const Ye of Ue)if(Ye.qty>0){const{allocations:mt}=await PLe({productId:Ye.productId,vendorId:B,quantityUnits:Ye.qty,saleDate:b,saleId:$e.id});He[Ye.productId]={productId:Ye.productId,vendorId:B,allocations:mt}}await Jr($t(je,"sales_candies",$e.id),{allocationsByItem:He});try{const Ye=f==="CONTADO"?x.trim()||"Cliente Mostrador":(ce==null?void 0:ce.name)||"Cliente crdito";BLe({saleId:$e.id,date:b,customerName:Ye,branch:A,items:Ue.map(mt=>({productName:mt.productName,qty:mt.packages,unitPrice:mt.unitPricePackage,total:mt.total})),total:Number(Z)||0,vendorName:Ce==null?void 0:Ce.name,vendorCommissionPercent:(Ce==null?void 0:Ce.commissionPercent)||0,vendorCommissionAmount:Me})}catch(Ye){console.error("Error generando voucher PDF:",Ye)}h("CONTADO"),g(""),y(""),w(BH()),j([]),Se(0),f==="CREDITO"&&p&&a(Ye=>Ye.map(mt=>mt.id===p?{...mt,balance:(mt.balance||0)+(Number(Z)||0)-(Number(ve)||0)}:mt)),F(" Venta de dulces registrada"),B?await Ze(B):d({})}catch(Ue){console.error(Ue),F(" Error al guardar la venta de dulces")}finally{Q(!1)}},ct=v.useMemo(()=>s.filter(L=>{const we=u[L.id]||0,Ue=Math.max(1,Number(L.unitsPerPackage||1));return Math.floor(we/Ue)>0}).sort((L,we)=>(L.name||"").localeCompare(we.name||"")),[s,u]),[Xe,Rt]=v.useState(""),er=v.useMemo(()=>{const L=String(Xe||"").trim().toLowerCase();return L?ct.filter(we=>`${we.name||""} ${we.sku||""}`.toLowerCase().includes(L)||String(we.id||"").includes(L)):ct},[Xe,ct]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),o.jsxs("form",{onSubmit:pt,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:L=>h(L.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),f==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:x,onChange:L=>y(L.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:p,onChange:L=>g(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),Qe.map(L=>o.jsxs("option",{value:L.status==="ACTIVO"?L.id:"",disabled:L.status==="BLOQUEADO",children:[L.name," | ",L.phone," | Saldo: ",Xl(L.balance||0)]},L.id))]}),o.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Y(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Xl(xe)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ve===0?"":ve,onChange:L=>Se(Math.max(0,Number(L.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Xl(fe)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:L=>w(L.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:L=>{P(L.target.value),j([])},disabled:_,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.map(L=>o.jsxs("option",{value:L.id,children:[L.name,"  ",L.branchLabel,"  ",L.commissionPercent.toFixed(2),"%"," comisin"]},L.id))]}),_&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:A==="RIVAS",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Rivas"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:A==="SAN_JORGE",readOnly:!0,disabled:!0}),o.jsx("span",{children:"San Jorge"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:A==="ISLA",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Isla de Ometepe"})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:B?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:Xe,onChange:L=>Rt(L.target.value),disabled:!B}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>St(!0),disabled:!B,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:async L=>{const we=L.target.value;O(we),await nt(we)},disabled:!B,children:[o.jsx("option",{value:"",children:B?"Selecciona un producto":"Selecciona un vendedor primero"}),er.map(L=>{const we=S.some($e=>$e.productId===L.id),Ue=u[L.id]||0,te=Math.max(1,Number(L.unitsPerPackage||1)),Ce=Math.floor(Ue/te);return Ce<=0?null:o.jsxs("option",{value:we?"":L.id,disabled:we,children:[L.name," ",L.sku?` ${L.sku}`:""," (disp: ",Ce," ","paq.)",we?" ":""]},L.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),S.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):S.map(L=>{const we=u[L.productId]??L.availableUnits??0,Ue=L.unitsPerPackage?Math.floor(we/L.unitsPerPackage):0,te=Math.max(0,Ue-(L.qtyPackages||0)),Ce=(Number(L.pricePerPackage)||0)*(L.qtyPackages||0),$e=Math.max(0,Ce-(Number(L.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[L.productName,L.sku?`  ${L.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Xl(L.pricePerPackage)}),o.jsxs("div",{className:"col-span-2 text-right",children:[te," paq."]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(L.qtyPackages)||L.qtyPackages===0?"":L.qtyPackages,onChange:He=>ke(L.productId,He.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(L.discount)||L.discount===0?"":L.discount,onChange:He=>ae(L.productId,He.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1 text-right",children:Xl($e)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>De(L.productId),title:"Quitar producto",children:""})})]},L.productId)})]})}),S.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),o.jsx("span",{className:"font-semibold",children:he})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Xl(Z)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),o.jsxs("span",{className:"font-semibold",children:[Xl(Me)," ",Be?`(${Be.toFixed(2)}%)`:""]})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:H,children:H?"Guardando...":"Registrar venta"})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>J(L=>!L),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",o.jsx("span",{className:"text-lg",children:D?"":"+"})]}),D&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:L=>w(L.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:L=>h(L.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),f==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:x,onChange:L=>y(L.target.value)})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:L=>g(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),Qe.map(L=>o.jsxs("option",{value:L.status==="ACTIVO"?L.id:"",disabled:L.status==="BLOQUEADO",children:[L.name," | Saldo: ",Xl(L.balance||0)]},L.id))]}),o.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Y(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:Xl(xe)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:Xl(fe)})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ve===0?"":ve,onChange:L=>Se(Math.max(0,Number(L.target.value||0))),placeholder:"0.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:L=>{P(L.target.value),j([])},disabled:_,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.map(L=>o.jsxs("option",{value:L.id,children:[L.name,"  "," ",L.commissionPercent.toFixed(2),"%"]},L.id))]}),_&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>se(L=>!L),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",o.jsx("span",{className:"text-lg",children:ge?"":"+"})]}),ge&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:B?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:Xe,onChange:L=>Rt(L.target.value),disabled:!B}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>St(!0),disabled:!B,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:async L=>{const we=L.target.value;O(we),await nt(we)},disabled:!B,children:[o.jsx("option",{value:"",children:B?"Selecciona un producto":"Selecciona un vendedor primero"}),er.map(L=>{const we=S.some($e=>$e.productId===L.id),Ue=u[L.id]||0,te=Math.max(1,Number(L.unitsPerPackage||1)),Ce=Math.floor(Ue/te);return Ce<=0?null:o.jsxs("option",{value:we?"":L.id,disabled:we,children:[L.name," ",L.sku?` ${L.sku}`:""," (disp:"," ",Ce," paq.)",we?" ":""]},L.id)})]})]}),S.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):o.jsx("div",{className:"space-y-2",children:S.map(L=>{const we=u[L.productId]??L.availableUnits??0,Ue=L.unitsPerPackage?Math.floor(we/L.unitsPerPackage):0,te=Math.max(0,Ue-(L.qtyPackages||0)),Ce=(Number(L.pricePerPackage)||0)*(L.qtyPackages||0),$e=Math.max(0,Ce-(Number(L.discount)||0));return o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[o.jsxs("div",{className:"font-semibold leading-tight",children:[L.productName,L.sku?`  ${L.sku}`:""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),o.jsx("div",{className:"font-bold",children:Xl(L.pricePerPackage)})]}),o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),o.jsxs("div",{className:"font-bold",children:[te," paq."]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(L.qtyPackages)||L.qtyPackages===0?"":L.qtyPackages,onChange:He=>ke(L.productId,He.target.value),inputMode:"numeric",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(L.discount)||L.discount===0?"":L.discount,onChange:He=>ae(L.productId,He.target.value),inputMode:"numeric",placeholder:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Xl($e)]}),o.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Xl(L.margenVendedor||0)]}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>De(L.productId),children:"Quitar"})]})]},L.productId)})}),S.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:he})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsx("div",{className:"font-semibold",children:Xl(Z)})]})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:H,children:H?"Guardando...":"Registrar venta"})]})]}),k&&o.jsx("p",{className:"mt-2 text-sm",children:k}),V&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:R,onChange:L=>z(L.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:le,onChange:L=>K(PH(L.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:M,onChange:L=>pe(L.target.value),children:[o.jsx("option",{value:"",children:""}),ELe.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),!_&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:st,onChange:L=>lt(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.filter(L=>(L.status??"ACTIVO")==="ACTIVO").map(L=>o.jsxs("option",{value:L.id,children:[L.name,"  ",L.branchLabel]},L.id))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:X,onChange:L=>G(L.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_t(),Y(!1)},children:"Cancelar"}),o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Ue;const L=_?B||e:st;if(!L){F("Selecciona el vendedor para asociar este cliente.");return}if(F(""),!R.trim()){F("Ingresa el nombre del nuevo cliente.");return}const we=PH(le);try{const te=await Nn(At(je,"customers_candies"),{name:R.trim(),phone:we,place:M||"",notes:X||"",status:ie,creditLimit:Number(Re||0),createdAt:tr.now(),sellerId:L,vendorId:L,vendorName:((Ue=l.find($e=>$e.id===L))==null?void 0:Ue.name)||""}),Ce={id:te.id,name:R.trim(),phone:we,place:M||"",status:ie,creditLimit:Number(Re||0),balance:0,sellerId:L};a($e=>[Ce,...$e]),g(te.id),_t(),Y(!1),F(" Cliente creado")}catch(te){console.error(te),F(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),o.jsx(et,{open:bt,onClose:()=>St(!1),onDetected:kt}),H&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const jH=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],wC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function TLe(){const[t,e]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,B]=v.useState(""),[P,_]=v.useState(null),[E,I]=v.useState(""),[O,S]=v.useState(""),[j,D]=v.useState(""),[J,ge]=v.useState(0),[se,he]=v.useState("PENDIENTE"),[me,Z]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Wt(At(je,"expenses_candies"),ln("date","desc")),z=await Dt(R),le=[];z.forEach(K=>{const M=K.data();le.push({id:K.id,date:M.date||wr(new Date,"yyyy-MM-dd"),category:M.category||"",description:M.description||"",amount:Number(M.amount||0),status:M.status||"PENDIENTE",notes:M.notes||"",createdAt:M.createdAt??tr.now()})}),x(le)}catch(R){console.error(R),B(" Error al cargar gastos")}finally{b(!1)}})()},[]);const ve=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=ve.reduce((K,M)=>K+(M.amount||0),0),z=ve.filter(K=>K.status==="PAGADO").reduce((K,M)=>K+(M.amount||0),0),le=R-z;return{total:R,pagado:z,pendiente:le}},[ve]),k=()=>{s(wr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),B(""),!i){B("Selecciona una categora.");return}if(!c.trim()){B("Ingresa una descripcin.");return}if(!d||d<=0){B("Ingresa un monto vlido.");return}try{const z=await Nn(At(je,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:tr.now()});x(le=>[{id:z.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:tr.now()},...le]),k(),B(" Gasto registrado")}catch(z){console.error(z),B(" Error al guardar gasto")}},H=R=>{_(R.id),I(R.date),S(R.category||""),D(R.description||""),ge(Number(R.amount||0)),he(R.status||"PENDIENTE"),Z(R.notes||"")},Q=()=>{_(null),I(""),S(""),D(""),ge(0),he("PENDIENTE"),Z("")},V=async()=>{if(P){if(!O){B("Selecciona una categora.");return}if(!j.trim()){B("Ingresa una descripcin.");return}if(!J||J<=0){B("Ingresa un monto vlido.");return}try{await Jr($t(je,"expenses_candies",P),{date:E,category:O,description:j.trim(),amount:Number(J.toFixed(2)),status:se,notes:me||""}),x(R=>R.map(z=>z.id===P?{...z,date:E,category:O,description:j.trim(),amount:Number(J.toFixed(2)),status:se,notes:me||""}:z)),Q(),B(" Gasto actualizado")}catch(R){console.error(R),B(" Error al actualizar gasto")}}},Y=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Qn($t(je,"expenses_candies",R.id)),x(le=>le.filter(K=>K.id!==R.id)),B(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",wC(Se.total)]}),o.jsxs("div",{children:["Pagado: ",wC(Se.pagado)]}),o.jsxs("div",{children:["Pendiente: ",wC(Se.pendiente)]})]})]}),o.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>l(R.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),jH.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>A(R.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ve.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ve.slice().sort((R,z)=>R.date.localeCompare(z.date)).map(R=>{const z=P===R.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:le=>I(le.target.value)}):R.date}),o.jsx("td",{className:"p-2 border",children:z?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:le=>S(le.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),jH.map(le=>o.jsx("option",{value:le,children:le},le))]}):R.category||""}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:le=>D(le.target.value)}):o.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:le=>ge(Math.max(0,Number(le.target.value||0)))}):wC(R.amount)}),o.jsx("td",{className:"p-2 border",children:z?o.jsxs("select",{className:"w-full border p-1 rounded",value:se,onChange:le=>he(le.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),o.jsx("td",{className:"p-2 border",children:z?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:le=>Z(le.target.value),maxLength:500}):o.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:z?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:V,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Q,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(R),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Y(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Yl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kLe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function FLe(t,e){var s,i,l;const r=kLe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function OLe(t){const e=Wt(At(je,"ar_movements"),sr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn($t(je,"ar_movements",n.id))))}function DLe({role:t="",sellerCandyId:e=""}){const r=t==="vendedor_dulces",n=t==="admin",a=n?8:7,[s,i]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(null),[f,h]=v.useState([]),A=async ie=>{i(!0),c(!0),d(ie),h([]);try{const Ie=await Li($t(je,"sales_candies",ie)),Re=Ie.exists()?Ie.data():null;if(!Re){h([]);return}const st=(Array.isArray(Re==null?void 0:Re.items)?Re.items:Re!=null&&Re.item?[Re.item]:[]).map(lt=>({productName:String(lt.productName||""),qty:Number(lt.packages??lt.qty??lt.quantity??0),unitPrice:Number(lt.unitPricePackage??lt.unitPrice??0),discount:Number(lt.discount||0),total:Number(lt.total??lt.lineFinal??0)}));h(st)}catch(Ie){console.error(Ie)}finally{c(!1)}},[m,p]=v.useState(wr(new Date,"yyyy-MM-01")),[g,x]=v.useState(wr(new Date,"yyyy-MM-dd")),[y,b]=v.useState([]),[w,B]=v.useState([]),[P,_]=v.useState([]),[E,I]=v.useState(!0),[O,S]=v.useState(""),[j,D]=v.useState(""),[J,ge]=v.useState(""),[se,he]=v.useState(null),me=15,[Z,ve]=v.useState(1),Se=v.useMemo(()=>{const ie={};return y.forEach(Ie=>ie[Ie.id]=Ie.name),ie},[y]),k=v.useMemo(()=>{const ie={};return P.forEach(Ie=>{ie[Ie.id]=Ie}),ie},[P]),F=ie=>{const Ie=Number(ie.vendorCommissionAmount||0);if(Ie>0)return Ie;if(!ie.vendorId)return 0;const Re=k[ie.vendorId];if(!Re||!Re.commissionPercent)return 0;const ze=(Number(ie.total)||0)*(Number(Re.commissionPercent)||0)/100;return Number(ze.toFixed(2))};v.useEffect(()=>{(async()=>{I(!0),S("");try{const ie=await Dt(At(je,"customers_candies")),Ie=[];ie.forEach(_t=>Ie.push({id:_t.id,name:_t.data().name||""})),b(Ie);const Re=await Dt(At(je,"sellers_candies")),ze=[];Re.forEach(_t=>{const bt=_t.data();ze.push({id:_t.id,name:bt.name||"",commissionPercent:Number(bt.commissionPercent||0)})}),_(ze);const st=await Dt(Wt(At(je,"sales_candies"),ln("createdAt","desc"))),lt=[];st.forEach(_t=>{const bt=FLe(_t.data(),_t.id);bt&&bt.date>=m&&bt.date<=g&&lt.push(bt)}),B(lt.sort((_t,bt)=>bt.date.localeCompare(_t.date))),ve(1)}catch(ie){console.error(ie),S(" Error cargando transacciones.")}finally{I(!1)}})()},[m,g]);const H=v.useMemo(()=>w.filter(ie=>!(r&&(!e||!ie.vendorId||ie.vendorId!==e)||j&&ie.customerId!==j||J&&ie.type!==J)),[w,j,J,r,e]),Q=v.useMemo(()=>{let ie=0,Ie=0,Re=0,ze=0;for(const st of H)st.type==="CONTADO"?(ie+=st.quantity,Re+=st.total):(Ie+=st.quantity,ze+=st.total);return{packsCash:ie,packsCredito:Ie,montoCash:Re,montoCredito:ze}},[H]),V=Math.max(1,Math.ceil(H.length/me)),Y=v.useMemo(()=>{const ie=(Z-1)*me;return H.slice(ie,ie+me)},[H,Z]),R=v.useMemo(()=>u&&w.find(ie=>ie.id===u)||null,[u,w]),z=async ie=>{if(n&&(he(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{I(!0),await lb(ie.id),await OLe(ie.id),B(Ie=>Ie.filter(Re=>Re.id!==ie.id)),S(" Venta eliminada")}catch(Ie){console.error(Ie),S(" No se pudo eliminar la venta.")}finally{I(!1)}},le=()=>{const ie=`Ventas del dia  ${m} a ${g}`,Ie=lt=>(lt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Re=H.map(lt=>{const _t=lt.customerName||(lt.customerId?Se[lt.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${lt.date}</td>
          <td>${Ie(_t)}</td>
          <td>${lt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${lt.quantity}</td>
          <td style="text-align:right">${Yl(lt.total)}</td>
        </tr>`}).join(""),ze=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ie(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ie(ie)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${Q.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${Q.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Yl(Q.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Yl(Q.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${Re||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,st=window.open("","_blank");st&&(st.document.open(),st.document.write(ze),st.document.close())},K=()=>ve(1),M=()=>ve(ie=>Math.max(1,ie-1)),pe=()=>ve(ie=>Math.min(V,ie+1)),X=()=>ve(V),G=()=>{const ie=[];if(V<=7)for(let Re=1;Re<=V;Re++)ie.push(Re);else{const Re=Math.max(1,Z-2),ze=Math.min(V,Z+2);ie.push(1),Re>2&&ie.push(-1);for(let st=Re;st<=ze;st++)st!==1&&st!==V&&ie.push(st);ze<V-1&&ie.push(-2),ie.push(V)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:K,disabled:Z===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:M,disabled:Z===1,children:" Anterior"}),ie.map((Re,ze)=>typeof Re=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${Re===Z?"bg-blue-600 text-white":""}`,onClick:()=>ve(Re),children:Re},ze):o.jsx("span",{className:"px-2",children:""},ze)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:pe,disabled:Z===V,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:X,disabled:Z===V,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Z," de ",V,"  ",H.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:ie=>{p(ie.target.value),ve(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:ie=>{x(ie.target.value),ve(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:j,onChange:ie=>{D(ie.target.value),ve(1)},children:[o.jsx("option",{value:"",children:"Todos"}),y.map(ie=>o.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:J,onChange:ie=>{ge(ie.target.value),ve(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:le,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Q.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Q.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Yl(Q.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Yl(Q.montoCredito)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[E?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):Y.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):Y.map(ie=>{const Ie=ie.customerName||(ie.customerId?Se[ie.customerId]:"")||"Nombre cliente",Re=F(ie);return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:Ie}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:ie.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${ie.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:ie.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Paquetes:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:ze=>{ze.preventDefault(),A(ie.id)},title:"Ver detalle",children:ie.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",Yl(ie.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:Ie})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:ie.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:ie.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>A(ie.id),title:"Ver detalle",children:ie.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:Yl(ie.total)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("span",{className:"font-medium",children:Re>0?Yl(Re):""})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("span",{className:"font-medium",children:ie.vendorName||""})]}),n&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>he(ze=>ze===ie.id?null:ie.id),children:" Acciones"}),se===ie.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>z(ie),children:"Eliminar"})]})]})})]})},ie.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:G()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),n&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:E?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Cargando"})}):Y.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Sin transacciones en el rango."})}):Y.map(ie=>{const Ie=ie.customerName||(ie.customerId?Se[ie.customerId]:"")||"Nombre cliente",Re=F(ie);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ie.date}),o.jsx("td",{className:"p-2 border",children:Ie}),o.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>A(ie.id),children:ie.quantity})}),o.jsx("td",{className:"p-2 border",children:Yl(ie.total)}),o.jsx("td",{className:"p-2 border",children:Re>0?Yl(Re):""}),o.jsx("td",{className:"p-2 border",children:ie.vendorName||""}),n&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>he(ze=>ze===ie.id?null:ie.id),title:"Acciones",children:""}),se===ie.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>z(ie),children:"Eliminar"})})]})]},ie.id)})})]}),G()]}),O&&o.jsx("p",{className:"mt-2 text-sm",children:O}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",u?` #${u}`:""]}),R&&o.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",o.jsx("span",{className:"font-semibold",children:F(R)>0?Yl(F(R)):""})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):f.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):f.map((ie,Ie)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ie.productName}),o.jsx("td",{className:"p-2 border text-right",children:ie.qty}),o.jsx("td",{className:"p-2 border text-right",children:Yl(ie.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Yl(ie.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Yl(ie.total)})]},Ie))})]})})]})})]})}const Pn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function RLe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function MLe(t,e){const r=vy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=RLe(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function LLe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}async function ULe(t){const e=Wt(At(je,"ar_movements"),sr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn($t(je,"ar_movements",n.id))))}function QLe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,B]=v.useState(""),[P,_]=v.useState([]),[E,I]=v.useState({}),[O,S]=v.useState({}),[j,D]=v.useState(!1),[J,ge]=v.useState(null),[se,he]=v.useState([]),[me,Z]=v.useState(!1),[ve,Se]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[k,F]=v.useState(!1),[H,Q]=v.useState(""),[V,Y]=v.useState([]),[R,z]=v.useState(!1),[le,K]=v.useState(!1),[M,pe]=v.useState(null);v.useEffect(()=>{(async()=>{try{const ce=await Dt(At(je,"sellers_candies")),Qe=[];ce.forEach(xe=>{const fe=xe.data();Qe.push({id:xe.id,name:fe.name||"",commissionPercent:Number(fe.commissionPercent||0)})}),_(Qe)}catch(ce){console.error("Error cargando sellers_candies",ce)}})()},[]);const X=v.useMemo(()=>{const ce={};return P.forEach(Qe=>{ce[Qe.id]=Qe}),ce},[P]);v.useEffect(()=>{(async()=>{b(!0),B("");try{const ce=await Dt(At(je,"sales_candies")),Qe=[],xe=[];ce.forEach(ct=>{const Xe=ct.data(),Rt=MLe(Xe,ct.id);Rt&&(Rt.date<=a&&Qe.push(Rt),Rt.date>=r&&Rt.date<=a&&xe.push(Rt))}),u(Qe),l(xe);const fe=await Dt(At(je,"inventory_candies")),oe=[];fe.forEach(ct=>{const Xe=ct.data(),Rt=vy(Xe);if(!Rt||Rt>a)return;const er=Math.max(1,Math.floor(Number(Xe.unitsPerPackage||1))),L=Number(Xe.totalUnits??Xe.quantity??0),we=Number(Xe.packages??0),Ue=Number(Xe.remaining??0),te=Number(Xe.remainingPackages??0),Ce=we>0?we:L>0?Math.floor(L/er):0,$e=te>0?te:Ue>0?Math.floor(Ue/er):0;oe.push({id:ct.id,productId:Xe.productId,productName:Xe.productName||"",date:Rt,quantity:Number(Ce||0),remaining:Number($e||0),purchasePrice:Number(Xe.providerPrice||Xe.purchasePrice||0),unitsPerPackage:er})}),f(oe);const Be=await Dt(At(je,"expenses_candies")),Me=[];Be.forEach(ct=>{const Xe=ct.data(),Rt=vy(Xe);Rt&&Rt>=r&&Rt<=a&&Me.push({id:ct.id,date:Rt,category:Xe.category||"",description:Xe.description||"",amount:Number(Xe.amount||0),status:Xe.status||""})}),A(Me);const Ze=await Dt(At(je,"ar_movements")),Je=[],nt={};Ze.forEach(ct=>{const Xe=ct.data(),Rt=vy(Xe);if(!Rt)return;const er=Xe.customerId,L=Number(Xe.amount||0);er&&(nt[er]=(nt[er]||0)+L),Xe.type==="ABONO"&&Rt>=r&&Rt<=a&&Je.push({id:ct.id,customerId:er,type:"ABONO",amount:L,date:Rt})}),p(Je);const ke=await Dt(At(je,"customers_candies")),ae=[];ke.forEach(ct=>{const Xe=ct.data();ae.push({id:ct.id,name:Xe.name||"",balance:nt[ct.id]||0})}),x(ae);const De=await Dt(At(je,"inventory_candies_sellers")),We={},pt={};De.forEach(ct=>{const Xe=ct.data(),Rt=vy(Xe);if(!Rt||Rt<r||Rt>a)return;const er=Xe.sellerId||Xe.vendorId||"NO_VENDOR",L=Xe.productName||"",we=Xe.sku||"",Ue=Math.max(1,Math.floor(Number(Xe.unitsPerPackage||1))),te=Number(Xe.totalUnits??0),Ce=Number(Xe.packages??0),$e=Number(Xe.remainingUnits??Xe.remaining??0),He=Number(Xe.remainingPackages??0),Ye=Ce>0?Ce:te>0?Math.floor(te/Ue):0,mt=He>0?He:$e>0?Math.floor($e/Ue):0,rt=Number(Xe.totalVendor??0),re=Number(Xe.gainVendor??0),ne=Ye,Ae=ne>0?rt/ne:0,ue=ne>0?re/ne:0;if(We[er]||(We[er]={associated:[],remaining:[]}),Ye>0){const Ne=Ye,Te=Ne*Ae,tt=Te,ot=Ne*ue;We[er].associated.push({saleId:ct.id,date:Rt,productName:L,sku:we,qty:Ne,unitPrice:Ae,lineTotal:Te,discount:0,lineFinal:tt,vendorCommissionAmount:ot,type:"ASSOCIATED"}),pt[er]=(pt[er]||0)+Ne}if(mt>0){const Ne=mt,Te=Ne*Ae,tt=Te,ot=Ne*ue;We[er].remaining.push({saleId:ct.id,date:Rt,productName:L,sku:we,qty:Ne,unitPrice:Ae,lineTotal:Te,discount:0,lineFinal:tt,vendorCommissionAmount:ot,type:"REMAINING"})}}),I(We),S(pt)}catch(ce){console.error(ce),B(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const G=v.useCallback(ce=>{if(ce.vendorId&&X[ce.vendorId])return X[ce.vendorId];const Qe=(ce.vendorName||"").trim().toLowerCase();if(Qe)return P.find(xe=>(xe.name||"").trim().toLowerCase()===Qe)},[X,P]),ie=v.useCallback((ce,Qe)=>{const xe=Number(Qe.vendorCommissionAmount||0);if(xe)return xe;const fe=G(ce);if(!fe||!fe.commissionPercent)return 0;const oe=Number(Qe.qty||0),Be=Number(Qe.unitPrice||0),Me=oe*Be,Ze=Math.max(0,Number(Qe.discount||0)),Je=Math.max(0,Me-Ze);if(!Je)return 0;const nt=Number(fe.commissionPercent)||0;return Je*nt/100},[G]),Ie=v.useMemo(()=>{try{return LLe(d,c,r,a)}catch(ce){return console.error(ce),0}},[d,c,r,a]),Re=v.useMemo(()=>{const ce=i.reduce((ae,De)=>ae+(De.total||0),0),Qe=h.reduce((ae,De)=>ae+(De.amount||0),0),xe=ce-Ie,fe=xe-Qe,oe=m.reduce((ae,De)=>ae+Math.abs(De.amount||0),0),Be=g.filter(ae=>(ae.balance||0)>0),Me=Be.reduce((ae,De)=>ae+(De.balance||0),0);let Ze=0,Je=0,nt=0,ke=0;for(const ae of i){const De=(ae.items||[]).reduce((pt,ct)=>pt+(Number(ct.qty)||0),0),We=(ae.items||[]).reduce((pt,ct)=>pt+ie(ae,ct),0);ae.type==="CONTADO"?(Ze+=De,nt+=We):(Je+=De,ke+=We)}return{ventasTotales:ce,costoMercaderia:Ie,gastosPeriodo:Qe,gananciaAntes:xe,gananciaDespues:fe,abonosRecibidos:oe,saldosPendientes:Me,clientesConSaldo:Be.length,paquetesCash:Ze,paquetesCredito:Je,comisionCash:nt,comisionCredito:ke}},[i,h,m,g,Ie,ie]),ze=v.useMemo(()=>{const ce={},Qe={};for(const xe of i)if(!(xe.type!=="CREDITO"||!xe.customerId))for(const fe of xe.items||[]){const oe=Number(fe.qty||0),Be=Number(fe.unitPrice||0),Me=oe*Be,Ze=Math.max(0,Number(fe.discount||0)),Je=Math.max(0,Me-Ze);ce[xe.customerId]=(ce[xe.customerId]||0)+oe,Qe[xe.customerId]=(Qe[xe.customerId]||0)+Je}return g.filter(xe=>(xe.balance||0)>0).map(xe=>({customerId:xe.id,name:xe.name,paquetesAsociados:ce[xe.id]||0,saldoTotal:Qe[xe.id]||0,saldoPendiente:xe.balance||0})).sort((xe,fe)=>fe.saldoPendiente-xe.saldoPendiente)},[g,i]),st=v.useMemo(()=>{const ce={};return g.forEach(Qe=>ce[Qe.id]=Qe.name),ce},[g]),lt=v.useMemo(()=>[...i].sort((ce,Qe)=>Qe.date.localeCompare(ce.date)).map(ce=>{var oe;const Qe=(ce.items||[]).reduce((Be,Me)=>Be+(Number(Me.qty)||0),0);let xe="Cash";ce.type==="CREDITO"&&ce.customerId?xe=st[ce.customerId]||"":ce.type==="CONTADO"&&(xe=((oe=ce.customerName)==null?void 0:oe.trim())||"Cash");const fe=Qe>0?ce.total/Qe:0;return{id:ce.id,date:ce.date,type:ce.type==="CREDITO"?"Crdito":"Cash",customer:xe,paquetes:Qe,total:Number(ce.total||0),avgPrice:fe}}),[i,st]),_t=v.useMemo(()=>{var Qe,xe;const ce=new Map;for(const fe of i){const oe=fe.vendorId||"NO_VENDOR",Be=fe.vendorName||((Qe=X[oe])==null?void 0:Qe.name)||"Sin vendedor";ce.has(oe)||ce.set(oe,{vendorId:oe,vendorName:Be,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Me=ce.get(oe);for(const Ze of fe.items||[]){const Je=Number(Ze.qty||0),nt=Number(Ze.unitPrice||0),ke=Je*nt,ae=Math.max(0,Number(Ze.discount||0)),De=Math.max(0,ke-ae),We=ie(fe,Ze);fe.type==="CONTADO"?(Me.paquetesVendidos+=Je,Me.totalVendido+=De,Me.comisionCash+=We):(Me.paquetesFiados+=Je,Me.totalFiado+=De,Me.comisionCredito+=We)}}for(const[fe,oe]of Object.entries(O)){const Be=ce.get(fe),Me=(Be==null?void 0:Be.vendorName)||((xe=X[fe])==null?void 0:xe.name)||"Sin vendedor",Ze=Be||{vendorId:fe,vendorName:Me,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};Ze.paquetesAsociados=oe,Ze.paquetesRestantes=Math.max(oe-Ze.paquetesVendidos-Ze.paquetesFiados,0),ce.set(fe,Ze)}return Array.from(ce.values()).sort((fe,oe)=>oe.totalVendido+oe.totalFiado-(fe.totalVendido+fe.totalFiado))},[i,O,X,ie]),bt=async ce=>{D(!0),ge({id:ce.customerId,name:ce.name}),he([]),Z(!0),Se({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Qe=[];let xe=0,fe=0,oe=0;for(const Je of i)if(!(Je.type!=="CREDITO"||Je.customerId!==ce.customerId))for(const nt of Je.items||[]){const ke=Number(nt.qty||0),ae=Number(nt.unitPrice||0),De=ke*ae,We=Math.max(0,Number(nt.discount||0)),pt=Math.max(0,De-We);Qe.push({saleId:Je.id,date:Je.date,productName:nt.productName,sku:nt.sku||"",qty:ke,unitPrice:ae,lineTotal:De,discount:We,lineFinal:pt}),xe+=De,fe+=We,oe+=pt}let Be=0;for(const Je of m)Je.customerId===ce.customerId&&(Be+=Math.abs(Je.amount||0));const Me=g.find(Je=>Je.id===ce.customerId),Ze=(Me==null?void 0:Me.balance)||0;he(Qe),Se({totalBruto:xe,totalDescuento:fe,totalFiado:oe,saldoActual:Ze,abonadoPeriodo:Be})}catch(Qe){console.error(Qe),B(" No se pudo cargar el detalle del cliente.")}finally{Z(!1)}},St=(ce,Qe,xe)=>{F(!0);let fe="";xe==="ASSOCIATED"?fe=`Paquetes asociados  ${Qe}`:xe==="REMAINING"?fe=`Paquetes restantes  ${Qe}`:xe==="CASH"?fe=`Paquetes vendidos (Cash)  ${Qe}`:fe=`Paquetes fiados (Crdito)  ${Qe}`,Q(fe),Y([]),z(!0);try{if(xe==="ASSOCIATED"||xe==="REMAINING"){const Be=E[ce],Me=xe==="ASSOCIATED"?(Be==null?void 0:Be.associated)||[]:(Be==null?void 0:Be.remaining)||[];Y([...Me].sort((Ze,Je)=>Ze.date.localeCompare(Je.date))),z(!1);return}const oe=[];for(const Be of i)if(((Be.vendorId||"NO_VENDOR")===ce||!Be.vendorId&&ce==="NO_VENDOR")&&!(xe==="CASH"&&Be.type!=="CONTADO")&&!(xe==="CREDIT"&&Be.type!=="CREDITO"))for(const Ze of Be.items||[]){const Je=Number(Ze.qty||0),nt=Number(Ze.unitPrice||0),ke=Je*nt,ae=Math.max(0,Number(Ze.discount||0)),De=Math.max(0,ke-ae),We=ie(Be,Ze);oe.push({saleId:Be.id,date:Be.date,productName:Ze.productName,sku:Ze.sku||"",qty:Je,unitPrice:nt,lineTotal:ke,discount:ae,lineFinal:De,vendorCommissionAmount:We,type:xe})}Y(oe.sort((Be,Me)=>Be.date.localeCompare(Me.date)))}catch(oe){console.error(oe),B(" No se pudo cargar el detalle del vendedor.")}finally{z(!1)}},kt=ce=>{const Qe=i.find(xe=>xe.id===ce)||null;pe(Qe),K(!0)},et=async ce=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await lb(ce),await ULe(ce),l(Qe=>Qe.filter(xe=>xe.id!==ce)),u(Qe=>Qe.filter(xe=>xe.id!==ce)),K(!1),pe(null)}catch(Qe){console.error(Qe),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),o.jsx(Xc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ce=>n(ce.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ce=>s(ce.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Pn(Re.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Pn(Re.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:Re.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Re.paquetesCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),o.jsx("div",{className:"text-xl font-semibold",children:Re.paquetesCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.comisionCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(Re.comisionCredito)})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):ze.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):ze.map(ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>bt({customerId:ce.customerId,name:ce.name}),title:"Ver paquetes fiados del periodo",children:ce.paquetesAsociados})}),o.jsx("td",{className:"p-2 border",children:Pn(ce.saldoTotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:Pn(ce.saldoPendiente)})]},ce.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):_t.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):_t.map(ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ce.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>St(ce.vendorId,ce.vendorName,"ASSOCIATED"),children:ce.paquetesAsociados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>St(ce.vendorId,ce.vendorName,"REMAINING"),children:ce.paquetesRestantes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>St(ce.vendorId,ce.vendorName,"CASH"),children:ce.paquetesVendidos})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.totalVendido)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.comisionCash)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>St(ce.vendorId,ce.vendorName,"CREDIT"),children:ce.paquetesFiados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.totalFiado)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.comisionCredito)})]},ce.vendorId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):lt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):lt.map(ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ce.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ce.customer}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ce.type}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>kt(ce.id),children:ce.paquetes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.avgPrice)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Pn(ce.total)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>et(ce.id),children:"Eliminar"})})]},ce.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((ce,Qe)=>ce.date.localeCompare(Qe.date)).map(ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce.date}),o.jsx("td",{className:"p-2 border",children:ce.category||""}),o.jsx("td",{className:"p-2 border",children:ce.description?o.jsx("span",{title:ce.description,children:ce.description.length>40?ce.description.slice(0,40)+"":ce.description}):""}),o.jsx("td",{className:"p-2 border",children:Pn(ce.amount)}),o.jsx("td",{className:"p-2 border",children:ce.status||""})]},ce.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),j&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(J==null?void 0:J.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(ve.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(ve.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(ve.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(ve.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Pn(ve.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),o.jsx("tbody",{children:me?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):se.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):se.sort((ce,Qe)=>ce.date.localeCompare(Qe.date)).map((ce,Qe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce.date}),o.jsx("td",{className:"p-2 border",children:ce.productName}),o.jsx("td",{className:"p-2 border",children:ce.sku||""}),o.jsx("td",{className:"p-2 border",children:ce.qty}),o.jsx("td",{className:"p-2 border",children:Pn(ce.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.discount)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.lineFinal)})]},`${ce.saleId}-${Qe}`))})]})})]})}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:H}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:R?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):V.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):V.map((ce,Qe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce.date}),o.jsx("td",{className:"p-2 border",children:ce.productName}),o.jsx("td",{className:"p-2 border",children:ce.sku||""}),o.jsx("td",{className:"p-2 border",children:ce.qty}),o.jsx("td",{className:"p-2 border",children:Pn(ce.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.discount)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.lineFinal)}),o.jsx("td",{className:"p-2 border",children:Pn(ce.vendorCommissionAmount)})]},`${ce.saleId}-${Qe}`))})]})})]})}),le&&M&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",M.date]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:(M.items||[]).map((ce,Qe)=>{const xe=Number(ce.qty||0),fe=Number(ce.unitPrice||0),oe=xe*fe,Be=ie(M,ce);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce.productName}),o.jsx("td",{className:"p-2 border",children:ce.sku||""}),o.jsx("td",{className:"p-2 border",children:xe}),o.jsx("td",{className:"p-2 border",children:Pn(fe)}),o.jsx("td",{className:"p-2 border",children:Pn(oe)}),o.jsx("td",{className:"p-2 border",children:Pn(Be)})]},Qe)})})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Total venta:"}),Pn(M.total)]}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>et(M.id),children:"Eliminar venta"})]})]})})]})}const TH=["Rivas","Isla Ometepe","San Jorge"];function VLe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,B]=v.useState("0"),[P,_]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const J=Wt(At(je,"sellers_candies"),ln("name","asc")),ge=await Dt(J),se=[];ge.forEach(he=>{const me=he.data();se.push({id:he.id,name:me.name||"",commissionPercent:Number(me.commissionPercent||0),branch:me.branch||"Rivas",createdAt:me.createdAt||tr.now()})}),n(se)}catch(J){console.error(J),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const E=()=>{f(""),A("0"),p("Rivas")},I=async J=>{J.preventDefault(),l("");const ge=d.trim();if(!ge){l("Ingresa el nombre y apellido del vendedor.");return}const se=Number(h||0);if(se<0){l("La comisin no puede ser negativa.");return}try{const he={name:ge,commissionPercent:se,branch:m,createdAt:tr.now()},me=await Nn(At(je,"sellers_candies"),he);n(Z=>[{id:me.id,...he},...Z]),l(" Vendedor creado correctamente."),E(),u(!1)}catch(he){console.error(he),l(" Error al crear el vendedor.")}},O=J=>{x(J.id),b(J.name),B(J.commissionPercent.toString()),_(J.branch)},S=()=>{x(null),b(""),B("0"),_("Rivas")},j=async()=>{if(!g)return;l("");const J=y.trim();if(!J){l("El nombre y apellido no pueden estar vacos.");return}const ge=Number(w||0);if(ge<0){l("La comisin no puede ser negativa.");return}try{await Jr($t(je,"sellers_candies",g),{name:J,commissionPercent:ge,branch:P}),n(se=>se.map(he=>he.id===g?{...he,name:J,commissionPercent:ge,branch:P}:he)),l(" Vendedor actualizado."),S()}catch(se){console.error(se),l(" Error al actualizar el vendedor.")}},D=async J=>{if(window.confirm(`Eliminar al vendedor "${J.name}"? Esta accin no se puede deshacer.`))try{await Qn($t(je,"sellers_candies",J.id)),n(se=>se.filter(he=>he.id!==J.id)),l(" Vendedor eliminado.")}catch(se){console.error(se),l(" Error al eliminar el vendedor.")}};return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:e,loading:a}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),o.jsxs("form",{onSubmit:I,className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:J=>f(J.target.value),placeholder:"Ej: Juan Prez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comisin (% sobre venta total)"}),o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:J=>A(J.target.value),placeholder:"Ej: 10"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje se usa para calcular la comisin del vendedor sobre el total de la venta (no es el margen del producto)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),o.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:J=>p(J.target.value),children:TH.map(J=>o.jsx("option",{value:J,children:J},J))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>{E(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:o.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),o.jsx("th",{className:"p-2 border",children:"Comisin (%)"}),o.jsx("th",{className:"p-2 border",children:"Sucursal"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(J=>{const ge=g===J.id;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:ge?o.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:se=>b(se.target.value)}):J.name}),o.jsx("td",{className:"p-2 border",children:ge?o.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:se=>B(se.target.value)}):`${J.commissionPercent.toFixed(2)} %`}),o.jsx("td",{className:"p-2 border",children:ge?o.jsx("select",{className:"border p-1 rounded text-xs",value:P,onChange:se=>_(se.target.value),children:TH.map(se=>o.jsx("option",{value:se,children:se},se))}):J.branch}),o.jsx("td",{className:"p-2 border",children:ge?o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:j,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:S,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>O(J),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(J),children:"Borrar"})]})})]},J.id)})})]})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const ko=t=>Math.max(0,Math.floor(Number(t||0)));function HLe(t){return Math.max(1,ko(t.unitsPerPackage||1))}async function $Le(t){const{orderId:e,productId:r}=t;let n=ko(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Wt(At(je,"inventory_candies"),sr("orderId","==",e),sr("productId","==",r),ln("createdAt","asc")),s=await Dt(a);if(s.empty)return;const i=s.docs.map(l=>l.ref);await Di(je,async l=>{const c=await Promise.all(i.map(u=>l.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),h=HLe(f),A=n*h,p=ko(f.remaining??0)+A,g=Math.floor(p/h);l.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:tr.now()}),n=0}})}async function KLe(t){const{orderId:e,productId:r}=t,n=ko(t.packagesToReturn);if(!e||!r||n<=0)return;const a=$t(je,"candy_main_orders",e);await Di(je,async s=>{const i=await s.get(a);if(!i.exists())return;const l=i.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:ko(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:tr.now()})})}function GLe(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=ko((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,ko((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function kH(t,e){const r=ko(t),n=Math.max(1,ko(e));return Math.floor(r/n)}async function FH(t){if(!t)throw new Error("vendorInventoryId requerido");const e=$t(je,"inventory_candies_sellers",t),r=await Li(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=ko(n.packages||n.remainingPackages||0),i=GLe(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Di(je,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await $Le({orderId:c,productId:a,packagesToReturn:s}),await KLe({orderId:c,productId:a,packagesToReturn:s}),await Di(je,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Di(je,async c=>{const u={};for(const g of i){const x=Math.max(1,ko(g.unitsPerPackage||1)),y=ko(g.units),b=kH(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>$t(je,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>$t(je,"candy_main_orders",g)),[A,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,ko(x.unitsPerPackage||b.unitsPerPackage||1)),B=ko(x.units),_=ko(b.remaining??0)+B,E=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:E,packages:E,updatedAt:tr.now()});const I=kH(B,w);I>0&&(p+=I)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=ko(u[y]||0);if(b<=0)continue;const w=x.data(),B=Array.isArray(w.items)?w.items:[];let P=!1;const _=B.map(E=>String((E==null?void 0:E.id)||"")!==String(a)?E:(P=!0,{...E,remainingPackages:ko(E.remainingPackages)+b}));P&&c.update(h[g],{items:_,updatedAt:tr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const Sn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function qLe(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const OH=t=>Math.max(0,Math.floor(Number(t||0)));function zLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const{refreshKey:n,refresh:a}=Ac(),s=!t||t==="admin",i=t==="vendedor_dulces",l=(r||"").trim().toLowerCase(),c=!s&&i,[u,d]=v.useState({}),[f,h]=v.useState([]),[A,m]=v.useState([]),[p,g]=v.useState({}),[x,y]=v.useState(null),[b,w]=v.useState([]),[B,P]=v.useState(!0),[_,E]=v.useState(""),[I,O]=v.useState(!1),[S,j]=v.useState(null),[D,J]=v.useState([]),[ge,se]=v.useState(""),[he,me]=v.useState(""),[Z,ve]=v.useState(""),[Se,k]=v.useState("0"),[F,H]=v.useState([]),[Q,V]=v.useState(!1),Y=v.useMemo(()=>f.find(Ee=>Ee.id===ge)||null,[ge,f]),[R,z]=v.useState(""),le=Y==null?void 0:Y.branch,[K,M]=v.useState(""),pe=v.useMemo(()=>A.find(Ee=>Ee.id===Z)||null,[Z,A]),X=v.useMemo(()=>new Set(F.map(Ee=>Ee.productId)),[F]),G=v.useMemo(()=>A.filter(Ee=>(p[Ee.id]??0)>0||X.has(Ee.id)).sort((Ee,ut)=>Ee.name.localeCompare(ut.name)),[A,p,X]),ie=v.useMemo(()=>{const Ee=R.trim().toLowerCase();return Ee?G.filter(ut=>`${ut.category??""} ${ut.name??""}`.toLowerCase().includes(Ee)):G},[G,R]),Ie=v.useMemo(()=>{const Ee={};return f.forEach(ut=>Ee[ut.id]=ut),Ee},[f]),Re=v.useMemo(()=>!i||!l?null:f.find(Ee=>(Ee.email||"").trim().toLowerCase()===l)||null,[i,l,f]),ze=v.useMemo(()=>{const Ee=f.find(ut=>(ut.email||"").trim().toLowerCase()===l)||null;return(Ee==null?void 0:Ee.name)||(r||"").trim()||""},[f,l,r]),st=async()=>{try{const Ee=At(je,"inventory_transfers_candies");if(!i){const Ot=await Dt(Ee),Vt={};Ot.forEach(nr=>{const Ht=nr.data(),Nr=Number(Ht.packagesMoved||0),Or=String(Ht.fromOrderKey||""),Fn=String(Ht.toOrderKey||"");Or&&(Vt[Or]=Vt[Or]||{out:0,in:0},Vt[Or].out+=Nr),Fn&&(Vt[Fn]=Vt[Fn]||{out:0,in:0},Vt[Fn].in+=Nr)}),d(Vt);return}const ut=Wt(Ee,sr("fromSellerId","==",e)),Nt=Wt(Ee,sr("toSellerId","==",e)),[gt,at]=await Promise.all([Dt(ut),Dt(Nt)]),zt={},Jt=(Ot,Vt)=>{Ot.forEach(nr=>{const Ht=nr.data(),Nr=Number(Ht.packagesMoved||0),Or=String(Vt==="out"?Ht.fromOrderKey||"":Ht.toOrderKey||"");Or&&(zt[Or]=zt[Or]||{out:0,in:0},zt[Or][Vt]+=Nr)})};Jt(gt.docs,"out"),Jt(at.docs,"in"),d(zt)}catch(Ee){console.error(Ee),d({})}};v.useEffect(()=>{(async()=>{P(!0),E("");try{const Ee=await Dt(Wt(At(je,"sellers_candies"),ln("name","asc"))),ut=[];Ee.forEach(nr=>{const Ht=nr.data(),Nr=Ht.branch||Ht.branchLabel||Ht.route||Ht.sucursal||Ht.location||"";ut.push({id:nr.id,name:Ht.name||"",email:Ht.email||"",commissionPercent:Number(Ht.commissionPercent||0),branch:qLe(Nr),branchLabel:Nr})}),h(ut);const Nt=await Dt(At(je,"inventory_candies")),gt={},at={};Nt.forEach(nr=>{var vr;const Ht=nr.data(),Nr=String(Ht.productId||"");if(!Nr)return;const Or=Number(Ht.remainingPackages);if(Number.isFinite(Or))gt[Nr]=(gt[Nr]||0)+Math.max(0,Math.floor(Or));else{const fr=Number(Ht.remaining??Ht.quantity??0),ir=Number(Ht.unitsPerPackage||0);let or=0;ir>0?or=fr/ir:or=Number(Ht.packages||0),gt[Nr]=(gt[Nr]||0)+Math.max(0,or)}const Fn=String(Ht.date||""),vn=Number(((vr=Ht.createdAt)==null?void 0:vr.seconds)??0),Na={unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceSanJorge:Number(Ht.unitPriceSanJorge||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),date:Fn,createdAtSec:vn};if(!(Na.unitPriceRivas>0||Na.unitPriceSanJorge>0||Na.unitPriceIsla>0))return;const Rn=at[Nr];if(!Rn){at[Nr]=Na;return}const ft=`${Rn.date}#${String(Rn.createdAtSec).padStart(10,"0")}`;`${Na.date}#${String(Na.createdAtSec).padStart(10,"0")}`>ft&&(at[Nr]=Na)}),Object.keys(gt).forEach(nr=>gt[nr]=Math.floor(gt[nr])),g(gt);const zt=await Dt(Wt(At(je,"products_candies"),ln("name","asc"))),Jt=[];zt.forEach(nr=>{const Ht=nr.data(),Nr=nr.id,Or=at[Nr];Jt.push({id:Nr,name:Ht.name||"",category:Ht.category||"",providerPrice:Number(Ht.providerPrice||0),packages:Number(Ht.packages||0),unitsPerPackage:Number(Ht.unitsPerPackage||0),unitPriceRivas:Number((Or==null?void 0:Or.unitPriceRivas)||0),unitPriceSanJorge:Number((Or==null?void 0:Or.unitPriceSanJorge)||0),unitPriceIsla:Number((Or==null?void 0:Or.unitPriceIsla)||0)})}),m(Jt);const Ot=await Dt(i?Wt(At(je,"inventory_candies_sellers"),sr("sellerId","==",e),ln("createdAt","desc")):Wt(At(je,"inventory_candies_sellers"),ln("createdAt","desc"))),Vt=[];Ot.forEach(nr=>{const Ht=nr.data();Vt.push({id:nr.id,sellerId:Ht.sellerId,sellerName:Ht.sellerName||"",productId:Ht.productId,productName:Ht.productName||"",category:Ht.category||"",orderId:Ht.orderId||null,packages:Number(Ht.packages||0),unitsPerPackage:Number(Ht.unitsPerPackage||0),totalUnits:Number(Ht.totalUnits||0),remainingPackages:Number(Ht.remainingPackages||0),remainingUnits:Number(Ht.remainingUnits||0),providerPrice:Number(Ht.providerPrice||0),totalRivas:Number(Ht.totalRivas||0),totalSanJorge:Number(Ht.totalSanJorge||0),totalIsla:Number(Ht.totalIsla||0),unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceSanJorge:Number(Ht.unitPriceSanJorge||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),markupPercent:Number(Ht.markupPercent||0),subtotal:Number(Ht.subtotal||0),totalVendor:Number(Ht.totalVendor||0),gainVendor:Number(Ht.gainVendor||0),unitPriceVendor:Number(Ht.unitPriceVendor||0),date:Ht.date||"",createdAt:Ht.createdAt||tr.now()})}),w(Vt),await st()}catch(Ee){console.error(Ee),E(" Error cargando datos de vendedores / pedidos.")}finally{P(!1)}})()},[n,t,e]);const lt=v.useMemo(()=>i&&Re?b.filter(Ee=>Ee.sellerId===Re.id):b,[b,i,Re,ge]),_t=Ee=>lt.filter(ut=>(ut.orderId||ut.id)===Ee),bt=v.useMemo(()=>{var ut;const Ee={};for(const Nt of lt){const gt=Nt.orderId||Nt.id,at=Ee[gt],zt=Nt.date||((ut=Nt.createdAt)!=null&&ut.toDate?Nt.createdAt.toDate().toISOString().slice(0,10):"");if(at)at.totalPackages+=Nt.packages,at.totalRemainingPackages+=Nt.remainingPackages,at.subtotal+=Nt.subtotal,at.totalVendor+=Nt.totalVendor,zt>at.date&&(at.date=zt);else{const Jt=u[gt]||{out:0,in:0};Ee[gt]={orderKey:gt,sellerId:Nt.sellerId,sellerName:Nt.sellerName,date:zt,totalPackages:Nt.packages,totalRemainingPackages:Nt.remainingPackages,subtotal:Nt.subtotal,totalVendor:Nt.totalVendor,transferredOut:Jt.out,transferredIn:Jt.in}}}return Object.values(Ee).map(Nt=>{const gt=u[Nt.orderKey]||{out:0,in:0};return{...Nt,transferredOut:gt.out||0,transferredIn:gt.in||0}}).sort((Nt,gt)=>gt.date.localeCompare(Nt.date))},[lt,u]),St=v.useMemo(()=>{const Ee={};return bt.forEach(ut=>Ee[ut.orderKey]=ut),Ee},[bt]),kt=v.useMemo(()=>{const Ee=F.reduce((Jt,Ot)=>Jt+Ot.packages,0),ut=F.reduce((Jt,Ot)=>Jt+Ot.subtotal,0),Nt=F.reduce((Jt,Ot)=>Jt+Ot.totalVendor,0),gt=F.reduce((Jt,Ot)=>Jt+Ot.gainVendor,0),at=Number((Y==null?void 0:Y.commissionPercent)||0),zt=Nt*at/100;return{totalPackages:Ee,subtotal:ut,totalVendor:Nt,gainVendor:gt,commissionPercent:at,commissionAmount:zt}},[F,Y]),et=()=>{j(null),J([]),se(""),me(""),ve(""),k("0"),H([])};function ce(Ee){const ut=Number(Ee.providerPrice||0),Nt=Number(Ee.packages||0),gt=Number(Ee.unitPriceRivas||0),at=Number(Ee.unitPriceSanJorge||0),zt=Number(Ee.unitPriceIsla||0),Jt=ut*Nt,Ot=gt*Nt,Vt=at*Nt,nr=zt*Nt;let Ht=gt,Nr=Ot;switch(Ee.sellerBranch){case"SAN_JORGE":Ht=at,Nr=Vt;break;case"ISLA":Ht=zt,Nr=nr;break;case"RIVAS":default:Ht=gt,Nr=Ot;break}const Or=Nr-Jt;return{subtotal:Jt,totalVendor:Nr,gainVendor:Or,pricePerPackage:Ht,totalRivas:Ot,totalSanJorge:Vt,totalIsla:nr,unitPriceRivas:gt,unitPriceSanJorge:at,unitPriceIsla:zt}}function Qe(Ee,ut){const{subtotal:Nt,totalVendor:gt,gainVendor:at,pricePerPackage:zt,totalRivas:Jt,totalSanJorge:Ot,totalIsla:Vt,unitPriceRivas:nr,unitPriceSanJorge:Ht,unitPriceIsla:Nr}=ce({providerPrice:Ee.providerPrice,unitPriceRivas:Ee.unitPriceRivas,unitPriceSanJorge:Ee.unitPriceSanJorge,unitPriceIsla:Ee.unitPriceIsla,packages:ut,sellerBranch:le});return{id:`${Ee.id}-${Date.now()}-${Math.random()}`,productId:Ee.id,productName:Ee.name,category:Ee.category,providerPrice:Ee.providerPrice,unitsPerPackage:Ee.unitsPerPackage,packages:ut,subtotal:Nt,totalVendor:gt,gainVendor:at,pricePerPackage:zt,totalRivas:Jt,totalSanJorge:Ot,totalIsla:Vt,unitPriceRivas:nr,unitPriceSanJorge:Ht,unitPriceIsla:Nr,remainingPackages:ut}}const xe=()=>{if(c)return;if(!pe){E("Selecciona un producto antes de agregarlo.");return}if(X.has(pe.id)){E("Ese producto ya est agregado en este pedido.");return}const Ee=Number(Se||0);if(Ee<=0){E("La cantidad de paquetes debe ser mayor a 0.");return}const ut=p[pe.id]??0;if(!S&&Ee>ut){E(`No hay suficientes paquetes en inventario general. Disponibles: ${ut}`);return}const Nt=Qe(pe,Ee);H(gt=>[...gt,Nt]),ve(""),k("0")},fe=Ee=>{c||H(ut=>ut.filter(Nt=>Nt.id!==Ee))},oe=(Ee,ut)=>{if(c)return;const Nt=Number(ut||0);H(gt=>gt.map(at=>{if(at.id!==Ee)return at;const{subtotal:zt,totalVendor:Jt,gainVendor:Ot,pricePerPackage:Vt,totalRivas:nr,totalSanJorge:Ht,totalIsla:Nr}=ce({providerPrice:at.providerPrice,unitPriceRivas:at.unitPriceRivas,unitPriceSanJorge:at.unitPriceSanJorge,unitPriceIsla:at.unitPriceIsla,packages:Nt,sellerBranch:le});return{...at,packages:Nt,subtotal:zt,totalVendor:Jt,gainVendor:Ot,pricePerPackage:Vt,totalRivas:nr,totalSanJorge:Ht,totalIsla:Nr}}))};async function Be(Ee,ut,Nt){const gt=await yLe({productId:Ee,quantityPacks:ut,saleDate:Nt}),at=Array.isArray(gt==null?void 0:gt.allocations)?gt.allocations:[];if(!at.length)return[];const zt=at.map(Vt=>String(Vt.batchId||"")).filter(Boolean),Jt=await Promise.all(zt.map(Vt=>Li($t(je,"inventory_candies",Vt)))),Ot=[];for(let Vt=0;Vt<at.length;Vt++){const nr=at[Vt],Ht=String(nr.batchId||""),Nr=OH(nr.qty||nr.units||nr.quantity||0),Or=Jt[Vt];if(!Ht||Nr<=0||!Or.exists())continue;const Fn=Or.data(),vn=String(Fn.orderId||""),Na=Math.max(1,OH(Fn.unitsPerPackage||1));vn&&Ot.push({batchId:Ht,masterOrderId:vn,units:Nr,unitsPerPackage:Na})}return Ot}const Me=async Ee=>{if(Ee.preventDefault(),Q)return;if(!s){E("No tienes permiso para guardar pedidos.");return}if(E(""),!Y){E("Selecciona un vendedor.");return}if(!F.length){E("Agrega al menos un producto al pedido.");return}const ut=new Date().toISOString().slice(0,10),Nt=he||ut;try{if(P(!0),V(!0),S){const gt={};D.forEach(Jt=>{gt[Jt.productId]=Jt});const at={};F.forEach(Jt=>{at[Jt.productId]=Jt});for(const Jt of Object.keys(at)){const Ot=at[Jt],Vt=gt[Jt],nr=Number(Ot.packages||0),Ht=Vt?Number(Vt.packages||0):0,Nr=nr-Ht;if(Nr>0){const Or=await Be(Jt,Nr,Nt);if(Vt&&Or.length){const Fn=$t(je,"inventory_candies_sellers",Vt.id),vn=await Li(Fn),Na=vn.exists()?vn.data():{},Rn=[...Array.isArray(Na.masterAllocations)?Na.masterAllocations:[],...Or];await Jr(Fn,{masterAllocations:Rn,updatedAt:tr.now()})}}else Nr<0}let zt=[...b];for(const Jt of Object.keys(at)){const Ot=at[Jt],Vt=gt[Jt],nr=A.find(Or=>Or.id===Jt),Ht=(nr==null?void 0:nr.unitsPerPackage)||Ot.unitsPerPackage||0,Nr=Ot.packages>0&&Ht>0?Ot.packages*Ht:0;if(Vt)await Jr($t(je,"inventory_candies_sellers",Vt.id),{sellerId:Y.id,sellerName:Y.name,productId:Jt,productName:Ot.productName,category:Ot.category,packages:Ot.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ot.packages,remainingUnits:Nr,providerPrice:Ot.providerPrice,totalRivas:Ot.totalRivas,totalSanJorge:Ot.totalSanJorge,totalIsla:Ot.totalIsla,unitPriceRivas:Ot.unitPriceRivas,unitPriceSanJorge:Ot.unitPriceSanJorge,unitPriceIsla:Ot.unitPriceIsla,markupPercent:0,subtotal:Ot.subtotal,totalVendor:Ot.totalVendor,gainVendor:Ot.gainVendor,unitPriceVendor:Ot.pricePerPackage,date:Nt,orderId:Vt.orderId||S,updatedAt:tr.now()}),zt=zt.map(Or=>Or.id===Vt.id?{...Or,sellerId:Y.id,sellerName:Y.name,productId:Jt,productName:Ot.productName,category:Ot.category,packages:Ot.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ot.packages,remainingUnits:Nr,providerPrice:Ot.providerPrice,totalRivas:Ot.totalRivas,totalSanJorge:Ot.totalSanJorge,totalIsla:Ot.totalIsla,unitPriceRivas:Ot.unitPriceRivas,unitPriceSanJorge:Ot.unitPriceSanJorge,unitPriceIsla:Ot.unitPriceIsla,markupPercent:0,subtotal:Ot.subtotal,totalVendor:Ot.totalVendor,gainVendor:Ot.gainVendor,unitPriceVendor:Ot.pricePerPackage,date:Nt,orderId:Vt.orderId||S}:Or);else{const Or=await Be(Jt,Ot.packages,Nt),Fn={sellerId:Y.id,sellerName:Y.name,productId:Jt,productName:Ot.productName,category:Ot.category,orderId:S,packages:Ot.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ot.packages,remainingUnits:Nr,providerPrice:Ot.providerPrice,totalRivas:Ot.totalRivas,totalSanJorge:Ot.totalSanJorge,totalIsla:Ot.totalIsla,unitPriceRivas:Ot.unitPriceRivas,unitPriceSanJorge:Ot.unitPriceSanJorge,unitPriceIsla:Ot.unitPriceIsla,markupPercent:0,subtotal:Ot.subtotal,totalVendor:Ot.totalVendor,gainVendor:Ot.gainVendor,unitPriceVendor:Ot.pricePerPackage,date:Nt,createdAt:tr.now(),status:"ASIGNADO",masterAllocations:Or};zt=[{id:(await Nn(At(je,"inventory_candies_sellers"),Fn)).id,...Fn},...zt]}}for(const Jt of Object.keys(gt))if(!at[Jt]){const Ot=gt[Jt];await FH(Ot.id),zt=zt.filter(Vt=>Vt.id!==Ot.id)}w(zt),E(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const gt=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const at of F){const zt=A.find(Ht=>Ht.id===at.productId);if(!zt)continue;const Jt=at.packages>0&&zt.unitsPerPackage>0?at.packages*zt.unitsPerPackage:0,Ot=await Be(at.productId,at.packages,Nt),Vt={sellerId:Y.id,sellerName:Y.name,productId:at.productId,productName:at.productName,category:at.category,orderId:gt,packages:at.packages,unitsPerPackage:zt.unitsPerPackage,totalUnits:Jt,remainingPackages:at.packages,remainingUnits:Jt,providerPrice:at.providerPrice,totalRivas:at.totalRivas,totalSanJorge:at.totalSanJorge,totalIsla:at.totalIsla,unitPriceRivas:at.unitPriceRivas,unitPriceSanJorge:at.unitPriceSanJorge,unitPriceIsla:at.unitPriceIsla,markupPercent:0,subtotal:at.subtotal,totalVendor:at.totalVendor,gainVendor:at.gainVendor,unitPriceVendor:at.pricePerPackage,date:Nt,createdAt:tr.now(),status:"ASIGNADO",masterAllocations:Ot},nr=await Nn(At(je,"inventory_candies_sellers"),Vt);w(Ht=>[{id:nr.id,...Vt},...Ht])}E(" Pedido asignado al vendedor y descontado del inventario.")}et(),O(!1)}catch(gt){console.error(gt),E((gt==null?void 0:gt.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{V(!1),P(!1)}},Ze=()=>{if(!Y){E("Selecciona un vendedor para imprimir el pedido.");return}if(!F.length){E("No hay productos en el pedido para imprimir.");return}const Ee=he||new Date().toISOString().slice(0,10),ut=Jt=>(Jt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Nt="Pedido de dulces para vendedor",gt=F.map(Jt=>`
      <tr>
        <td>${ut(Jt.productName)}</td>
        <td class="right">${ut(Jt.category||"")}</td>
        <td class="right">${Jt.packages}</td>

        <td class="right">${Sn(Jt.providerPrice)}</td>
        <td class="right">${Sn(Jt.subtotal)}</td>
        <td class="right">${Sn(Jt.pricePerPackage)}</td>
        <td class="right">${Sn(Jt.totalVendor)}</td>
      </tr>`).join(""),at=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${ut(Nt)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${ut(Nt)}</h1>
  <div class="muted">
    Fecha pedido: <b>${ut(Ee)}</b><br/>
    Vendedor: <b>${ut(Y.name)}</b>${Y.commissionPercent?` &mdash; Comisin: <b>${Y.commissionPercent.toFixed(2)}%</b>`:""}${Y.branchLabel?`<br/>Ruta / sucursal: <b>${ut(Y.branchLabel)}</b>`:""}
  </div>

  <div class="grid">
    <div class="card">
      <div class="label">Paquetes totales del pedido</div>
      <div class="value">${kt.totalPackages}</div>
    </div>
    <div class="card">
      <div class="label">Subtotal costo (proveedor)</div>
      <div class="value">${Sn(kt.subtotal)}</div>
    </div>
    <div class="card">
      <div class="label">Total vendedor (precio venta)</div>
      <div class="value">${Sn(kt.totalVendor)}</div>
    </div>
    <div class="card">
      <div class="label">Comisin posible del vendedor</div>
      <div class="value">${Sn(kt.commissionAmount)}</div>
    </div>
  </div>

  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">P. Proveedor (paq)</th>
        <th class="right">Subtotal</th>
        <th class="right">P. Paquete vendedor</th>
        <th class="right">Total vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${gt}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,zt=window.open("","_blank");if(!zt){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}zt.document.open(),zt.document.write(at),zt.document.close()},Je=Ee=>{const ut=lt.filter(at=>(at.orderId||at.id)===Ee);if(!ut.length){E("No se encontraron filas para este pedido.");return}const Nt=ut[0];if(i&&Re&&Nt.sellerId!==Re.id){E("No tienes permiso para ver este pedido.");return}j(Ee),J(ut),se(Nt.sellerId),me(Nt.date);const gt=ut.map(at=>{const zt=at.unitPriceRivas||0,Jt=at.unitPriceSanJorge||0,Ot=at.unitPriceIsla||0,Vt=at.totalRivas||zt*Number(at.packages||0),nr=at.totalSanJorge||Jt*Number(at.packages||0),Ht=at.totalIsla||Ot*Number(at.packages||0);return{id:at.id,productId:at.productId,productName:at.productName,category:at.category,providerPrice:at.providerPrice,unitsPerPackage:at.unitsPerPackage,packages:at.packages,subtotal:at.subtotal,totalVendor:at.totalVendor,gainVendor:at.gainVendor,pricePerPackage:at.unitPriceVendor,totalRivas:Vt,totalSanJorge:nr,totalIsla:Ht,unitPriceRivas:zt,unitPriceSanJorge:Jt,unitPriceIsla:Ot,remainingPackages:at.remainingPackages}});H(gt),ve(""),k("0"),O(!0),z("")},nt=async Ee=>{if(!s){E("No tienes permiso para borrar pedidos.");return}const ut=b.filter(at=>(at.orderId||at.id)===Ee);if(!ut.length)return;const Nt=ut[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${Nt}"? Se regresarn los paquetes al inventario principal.`))try{P(!0);for(const at of ut)await FH(at.id);w(at=>at.filter(zt=>(zt.orderId||zt.id)!==Ee)),E(" Pedido eliminado y paquetes regresados correctamente.")}catch(at){console.error(at),E(" Error al eliminar el pedido / regresar paquetes.")}finally{P(!1)}},[ke,ae]=v.useState(!1),[De,We]=v.useState(!1),[pt,ct]=v.useState([]),[Xe,Rt]=v.useState(""),[er,L]=v.useState(""),[we,Ue]=v.useState(""),[te,Ce]=v.useState(""),[$e,He]=v.useState("0"),[Ye,mt]=v.useState(""),[rt,re]=v.useState(!1),ne=v.useMemo(()=>bt.map(Ee=>Ee.orderKey),[bt]),Ae=v.useMemo(()=>Xe?lt.filter(Ee=>(Ee.orderId||Ee.id)===Xe):[],[lt,Xe]),ue=v.useMemo(()=>Ae.filter(Ee=>Number(Ee.remainingPackages||0)>0),[Ae]),Ne=v.useMemo(()=>er&&lt.find(Ee=>Ee.id===er)||null,[lt,er]),Te=v.useMemo(()=>we?lt.filter(Ee=>(Ee.orderId||Ee.id)===we):[],[lt,we]),tt=v.useMemo(()=>Ne?Te.filter(Ee=>Ee.productId===Ne.productId):[],[Te,Ne]),ot=async()=>{try{We(!0);let Ee=[];if(i&&e){const ut=Wt(At(je,"inventory_transfers_candies"),sr("fromSellerId","==",e),ln("createdAt","desc")),Nt=Wt(At(je,"inventory_transfers_candies"),sr("toSellerId","==",e),ln("createdAt","desc")),[gt,at]=await Promise.all([Dt(ut),Dt(Nt)]),zt=new Set,Jt=Ot=>{Ot.forEach(Vt=>{if(zt.has(Vt.id))return;zt.add(Vt.id);const nr=Vt.data();Ee.push({id:Vt.id,createdAt:nr.createdAt,date:nr.date,createdByEmail:nr.createdByEmail||"",createdByName:nr.createdByName||"",productId:nr.productId||"",productName:nr.productName||"",packagesMoved:Number(nr.packagesMoved||0),providerPrice:Number(nr.providerPrice||0),unitPriceRivas:Number(nr.unitPriceRivas||0),unitPriceIsla:Number(nr.unitPriceIsla||0),toSellerId:nr.toSellerId||"",toSellerName:nr.toSellerName||"",toOrderKey:nr.toOrderKey||"",toOrderLabel:nr.toOrderLabel||"",comment:nr.comment||"",fromSellerId:nr.fromSellerId||"",fromSellerName:nr.fromSellerName||"",fromOrderKey:nr.fromOrderKey||"",fromOrderLabel:nr.fromOrderLabel||"",fromVendorRowId:nr.fromVendorRowId||"",toVendorRowId:nr.toVendorRowId||""})})};Jt(gt),Jt(at),Ee.sort((Ot,Vt)=>{var Nr,Or;const nr=((Nr=Ot.createdAt)==null?void 0:Nr.seconds)||0;return(((Or=Vt.createdAt)==null?void 0:Or.seconds)||0)-nr})}else{const ut=Wt(At(je,"inventory_transfers_candies"),ln("createdAt","desc"));(await Dt(ut)).forEach(gt=>{const at=gt.data();Ee.push({id:gt.id,createdAt:at.createdAt,date:at.date,createdByEmail:at.createdByEmail||"",createdByName:at.createdByName||"",productId:at.productId||"",productName:at.productName||"",packagesMoved:Number(at.packagesMoved||0),providerPrice:Number(at.providerPrice||0),unitPriceRivas:Number(at.unitPriceRivas||0),unitPriceIsla:Number(at.unitPriceIsla||0),toSellerId:at.toSellerId||"",toSellerName:at.toSellerName||"",toOrderKey:at.toOrderKey||"",toOrderLabel:at.toOrderLabel||"",comment:at.comment||"",fromSellerId:at.fromSellerId||"",fromSellerName:at.fromSellerName||"",fromOrderKey:at.fromOrderKey||"",fromOrderLabel:at.fromOrderLabel||"",fromVendorRowId:at.fromVendorRowId||"",toVendorRowId:at.toVendorRowId||""})})}ct(Ee)}catch(Ee){console.error(Ee),E(" Error cargando traslados.")}finally{We(!1)}},vt=async()=>{ae(!0),await ot()},yt=()=>{Rt(""),L(""),Ue(""),Ce(""),He("0"),mt("")},Et=async()=>{if(!s){E("No tienes permiso para hacer traslados.");return}E("");const Ee=Number($e||0);if(!(Ee>0)){E("La cantidad de paquetes debe ser mayor a 0.");return}if(!Ye.trim()){E("Debes escribir el motivo de la movida.");return}if(!Xe||!er){E("Selecciona el pedido origen y el producto.");return}if(!we||!te){E("Selecciona el pedido destino y el producto destino.");return}if(er===te){E("Origen y destino no pueden ser el mismo.");return}const ut=b.find(gt=>gt.id===er)||null,Nt=b.find(gt=>gt.id===te)||null;if(!ut||!Nt){E("No se encontr la fila origen/destino.");return}if(ut.productId!==Nt.productId){E("El producto destino no coincide con el producto origen.");return}if(Number(ut.remainingPackages||0)<Ee){E("El origen no tiene suficientes paquetes disponibles.");return}try{re(!0),P(!0);const gt=$t(je,"inventory_candies_sellers",ut.id),at=$t(je,"inventory_candies_sellers",Nt.id),zt=tr.now(),Jt=new Date().toISOString().slice(0,10);await Di(je,async Ot=>{const Vt=await Ot.get(gt),nr=await Ot.get(at);if(!Vt.exists())throw new Error("Orden origen no existe.");if(!nr.exists())throw new Error("Orden destino no existe.");const Ht=Vt.data(),Nr=nr.data(),Or=Number(Ht.remainingPackages||0);if(Or<Ee)throw new Error("Origen no tiene suficientes paquetes.");const Fn=Number(Ht.unitsPerPackage||Nr.unitsPerPackage||0),vn=Fn>0?Ee*Fn:0;Ot.update(gt,{remainingPackages:Or-Ee,...Fn>0?{remainingUnits:Number(Ht.remainingUnits||0)-vn}:{},updatedAt:zt}),Ot.update(at,{remainingPackages:Number(Nr.remainingPackages||0)+Ee,...Fn>0?{remainingUnits:Number(Nr.remainingUnits||0)+vn}:{},updatedAt:zt});const Na=$t(At(je,"inventory_transfers_candies"));Ot.set(Na,{createdAt:zt,date:Jt,createdByEmail:(r||"").trim(),createdByName:String(ze||"").trim(),productId:String(Ht.productId||""),productName:String(Ht.productName||""),packagesMoved:Ee,providerPrice:Number(Ht.providerPrice||0),unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),fromSellerId:String(Ht.sellerId||""),fromSellerName:String(Ht.sellerName||""),fromOrderKey:String(Ht.orderId||ut.id||""),fromOrderLabel:String(Ht.orderId||ut.id||""),toSellerId:String(Nr.sellerId||""),toSellerName:String(Nr.sellerName||""),toOrderKey:String(Nr.orderId||Nt.id||""),toOrderLabel:String(Nr.orderId||Nt.id||""),fromVendorRowId:ut.id,toVendorRowId:Nt.id,comment:Ye.trim()})}),w(Ot=>Ot.map(Vt=>{if(Vt.id===ut.id){const nr=Number(Vt.unitsPerPackage||0),Ht=nr>0?Ee*nr:0;return{...Vt,remainingPackages:Number(Vt.remainingPackages||0)-Ee,remainingUnits:nr>0?Number(Vt.remainingUnits||0)-Ht:Vt.remainingUnits}}if(Vt.id===Nt.id){const nr=Number(Vt.unitsPerPackage||0),Ht=nr>0?Ee*nr:0;return{...Vt,remainingPackages:Number(Vt.remainingPackages||0)+Ee,remainingUnits:nr>0?Number(Vt.remainingUnits||0)+Ht:Vt.remainingUnits}}return Vt})),await ot(),d(Ot=>{const Vt={...Ot},nr=Xe,Ht=we,Nr=Number($e||0);return nr&&(Vt[nr]=Vt[nr]||{out:0,in:0},Vt[nr].out+=Nr),Ht&&(Vt[Ht]=Vt[Ht]||{out:0,in:0},Vt[Ht].in+=Nr),Vt}),yt(),E(" Traslado realizado.")}catch(gt){console.error(gt),E((gt==null?void 0:gt.message)||" Error realizando el traslado.")}finally{re(!1),P(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:a,loading:B}),o.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:vt,type:"button",disabled:!s,children:"Traslados"}),s&&o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{et(),O(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),ke&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[rt&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ae(!1),yt()},type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Xe,onChange:Ee=>{Rt(Ee.target.value),L(""),Ue(""),Ce(""),He("0")},disabled:!s,children:[o.jsx("option",{value:"",children:"Selecciona"}),ne.map(Ee=>{const ut=St[Ee];return o.jsxs("option",{value:Ee,children:["Vendedor: ",(ut==null?void 0:ut.sellerName)||"","  Existencias: ","",(ut==null?void 0:ut.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(ut==null?void 0:ut.date)||""]},Ee)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:er,onChange:Ee=>{L(Ee.target.value),Ue(""),Ce(""),He("0")},disabled:!s||!Xe,children:[o.jsx("option",{value:"",children:"Selecciona"}),ue.map(Ee=>o.jsxs("option",{value:Ee.id,children:["Tipo: ",Ee.category," - ",Ee.productName,"  Existencias:"," ",Number(Ee.remainingPackages||0)," Paquetes - Precio Costo: $",Ee.providerPrice]},Ee.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:we,onChange:Ee=>{Ue(Ee.target.value),Ce("")},disabled:!s||!er,children:[o.jsx("option",{value:"",children:"Selecciona"}),ne.filter(Ee=>Ee!==Xe).map(Ee=>{const ut=St[Ee];return o.jsxs("option",{value:Ee,children:["Vendedor: ",(ut==null?void 0:ut.sellerName)||"","  Existencias: ","",(ut==null?void 0:ut.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(ut==null?void 0:ut.date)||""]},Ee)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:te,onChange:Ee=>Ce(Ee.target.value),disabled:!s||!we||!Ne,children:[o.jsx("option",{value:"",children:"Selecciona"}),tt.map(Ee=>o.jsxs("option",{value:Ee.id,children:["Tipo: ",Ee.category," - ",Ee.productName,"  Existencias:"," ",Number(Ee.remainingPackages||0)," Paquetes - Precio Costo: $",Ee.providerPrice]},Ee.id))]}),we&&Ne&&tt.length===0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:$e,onChange:Ee=>He(Ee.target.value),disabled:!s||!er||!te})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ye,onChange:Ee=>mt(Ee.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:yt,disabled:!s||rt,children:"Limpiar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Et,disabled:!s||rt||!er||!te||Number($e||0)<=0||!Ye.trim(),children:"Hacer traslado"})]})]}),o.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-2",children:[o.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ot,disabled:De,type:"button",children:De?"Cargando...":"Recargar"})]}),o.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),o.jsx("th",{className:"p-2 border",children:"Usuario"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),o.jsx("th",{className:"p-2 border",children:"Movido a orden"}),o.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),o.jsx("tbody",{children:De?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):pt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):pt.map(Ee=>{var at,zt;const ut=((zt=(at=Ee.createdAt)==null?void 0:at.toDate)==null?void 0:zt.call(at))||(Ee.createdAt?new Date(Ee.createdAt.seconds*1e3):null),Nt=ut?`${ut.toISOString().slice(0,10)} ${ut.toISOString().slice(11,19)}`:Ee.date||"",gt=(Ee.createdByName||"").trim()||(Ee.createdByEmail||"").trim()||"";return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Nt}),o.jsx("td",{className:"p-2 border",children:gt}),o.jsx("td",{className:"p-2 border text-left",children:Ee.productName||""}),o.jsx("td",{className:"p-2 border",children:Number(Ee.packagesMoved||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 border",children:Ee.toSellerName||""}),o.jsx("td",{className:"p-2 border",children:Ee.toOrderLabel||Ee.toOrderKey||""}),o.jsx("td",{className:"p-2 border text-left",children:Ee.comment||""})]},Ee.id)})})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[Q&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:S?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),f.length===0&&o.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),o.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ge,onChange:Ee=>se(Ee.target.value),disabled:c,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),f.map(Ee=>o.jsxs("option",{value:Ee.id,children:[Ee.name,Ee.branchLabel?` - ${Ee.branchLabel}`:"",Ee.commissionPercent?` (${Ee.commissionPercent.toFixed(1)}% comisin)`:""]},Ee.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:he,onChange:Ee=>me(Ee.target.value),disabled:c})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded mb-2",placeholder:"Buscar producto (nombre o categora)...",value:R,onChange:Ee=>z(Ee.target.value),disabled:c}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Z,onChange:Ee=>ve(Ee.target.value),disabled:c,children:[o.jsx("option",{value:"",children:R.trim()?`Resultados: ${ie.length}`:"Selecciona un producto"}),ie.map(Ee=>{const ut=p[Ee.id]??0,Nt=[];Nt.push(Ee.category?`${Ee.category} - ${Ee.name}`:Ee.name);const gt=[];Ee.unitPriceRivas>0&&gt.push(`R: ${Sn(Ee.unitPriceRivas)}`),Ee.unitPriceSanJorge>0&&gt.push(`SJ: ${Sn(Ee.unitPriceSanJorge)}`),Ee.unitPriceIsla>0&&gt.push(`I: ${Sn(Ee.unitPriceIsla)}`),gt.length&&Nt.push(gt.join(" | ")),Nt.push(`Disp: ${ut} paq`);const at=X.has(Ee.id);return o.jsx("option",{value:Ee.id,disabled:at,children:at?` (Agregado) ${Nt.join("  ")}`:Nt.join("  ")},Ee.id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes / bolsas"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Se,onChange:Ee=>k(Ee.target.value),disabled:c})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:xe,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:c||!Z||X.has(Z),title:X.has(Z)?"Ese producto ya est en el pedido":"",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paq x Und (ref)"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),o.jsx("th",{className:"p-2 border",children:"P. paquete vendedor"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center text-gray-500",children:"No hay productos en este pedido. Agrega al menos uno."})}):F.map(Ee=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Ee.productName}),o.jsx("td",{className:"p-2 border",children:Ee.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",min:0,className:"border p-1 rounded text-right text-xs w-20",value:Ee.packages,onChange:ut=>oe(Ee.id,ut.target.value),disabled:c})}),o.jsx("td",{className:"p-2 border",children:Ee.remainingPackages??Ee.packages}),o.jsx("td",{className:"p-2 border",children:Ee.unitsPerPackage||""}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.providerPrice)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.subtotal)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.totalRivas)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.totalSanJorge)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.totalIsla)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.unitPriceRivas)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.unitPriceSanJorge)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.unitPriceIsla)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.pricePerPackage)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.totalVendor)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs disabled:opacity-50",onClick:()=>fe(Ee.id),disabled:c,children:"Quitar"})})]},Ee.id))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales del pedido"}),o.jsx("div",{className:"text-lg font-semibold",children:kt.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),o.jsx("div",{className:"text-lg font-semibold",children:Sn(kt.subtotal)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total vendedor (precio venta)"}),o.jsx("div",{className:"text-lg font-semibold text-green-600",children:Sn(kt.totalVendor)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin posible vendedor"}),o.jsx("div",{className:"text-lg font-semibold",children:Sn(kt.commissionAmount)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s&&o.jsx("button",{type:"button",onClick:et,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:Q,children:"Limpiar pedido"}),o.jsx("button",{type:"button",onClick:()=>{et(),O(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:Q,children:"Cerrar"}),o.jsx("button",{type:"button",onClick:Ze,className:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700",disabled:!Y||F.length===0,children:"Imprimir pedido"}),s&&o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:Q||!Y||F.length===0,children:Q?"Guardando...":"Guardar pedido"})]})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3 mt-4",children:bt.map(Ee=>{var Jt,Ot;const ut=Ie[Ee.sellerId],Nt=Number((ut==null?void 0:ut.commissionPercent)||0),gt=Ee.totalVendor*Nt/100,at=x===Ee.orderKey,zt=at?_t(Ee.orderKey):[];return o.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-sm",children:Ee.sellerName}),o.jsx("div",{className:"text-xs text-gray-500",children:(ut==null?void 0:ut.branchLabel)||""})]}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[o.jsx("div",{children:Ee.date||""}),o.jsx("div",{className:"truncate max-w-[140px]",children:Ee.orderKey})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paquetes:"})," ",o.jsx("b",{children:Ee.totalPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Restantes:"})," ",o.jsx("b",{children:Ee.totalRemainingPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. OUT:"})," ",o.jsx("b",{children:((Jt=u[Ee.orderKey])==null?void 0:Jt.out)||0})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. IN:"})," ",o.jsx("b",{children:((Ot=u[Ee.orderKey])==null?void 0:Ot.in)||0})]})]}),o.jsxs("div",{className:"text-sm border-t pt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{children:Sn(Ee.subtotal)})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Sn(Ee.totalVendor)})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[o.jsx("span",{children:"Comisin:"}),o.jsx("span",{children:Sn(gt)})]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 rounded text-xs",onClick:()=>Je(Ee.orderKey),children:"Ver / Editar"}),s&&o.jsx("button",{className:"flex-1 bg-red-600 text-white py-2 rounded text-xs",onClick:()=>nt(Ee.orderKey),children:"Borrar"})]}),o.jsx("button",{type:"button",className:"w-full mt-2 border rounded py-2 text-xs bg-gray-50 hover:bg-gray-100",onClick:()=>{y(Vt=>Vt===Ee.orderKey?null:Ee.orderKey)},children:at?"Ocultar detalle":"Ver detalle del pedido"}),at&&o.jsxs("div",{className:"mt-2 border rounded bg-white overflow-hidden",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold bg-gray-100",children:"Detalle del pedido"}),zt.length===0?o.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Sin detalle"}):o.jsx("div",{className:"divide-y",children:zt.map(Vt=>o.jsxs("div",{className:"p-3 text-xs",children:[o.jsxs("div",{className:"flex justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:Vt.productName}),o.jsx("div",{className:"text-gray-500 truncate",children:Vt.category||""})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paq:"})," ",o.jsx("b",{children:Number(Vt.packages||0)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Rem:"})," ",o.jsx("b",{children:Number(Vt.remainingPackages||0)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Costo:"}),o.jsx("span",{children:Sn(Number(Vt.providerPrice||0))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Total:"}),o.jsx("span",{className:"font-semibold",children:Sn(Number(Vt.totalVendor||0))})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-[11px] text-gray-600",children:[o.jsxs("div",{className:"text-center border rounded py-1",children:["R ",Sn(Number(Vt.unitPriceRivas||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["SJ ",Sn(Number(Vt.unitPriceSanJorge||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["I ",Sn(Number(Vt.unitPriceIsla||0))]})]})]},Vt.id))})]})]},Ee.orderKey)})}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Listado de pedidos"}),o.jsxs("table",{className:"min-w-[1000px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Trasladados"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Adicionales"}),o.jsx("th",{className:"p-2 border",children:"Subtotal costo"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Comisin posible"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:B?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Cargando"})}):bt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Sin pedidos asignados a vendedores."})}):bt.map(Ee=>{var at,zt;const ut=Ie[Ee.sellerId],Nt=Number((ut==null?void 0:ut.commissionPercent)||0),gt=Ee.totalVendor*Nt/100;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Ee.date||""}),o.jsxs("td",{className:"p-2 border",children:[Ee.sellerName,ut!=null&&ut.branchLabel?` - ${ut.branchLabel}`:""]}),o.jsx("td",{className:"p-2 border",children:Ee.totalPackages}),o.jsx("td",{className:"p-2 border",children:Ee.totalRemainingPackages}),o.jsx("td",{className:"p-2 border",children:((at=u[Ee.orderKey])==null?void 0:at.out)||0}),o.jsx("td",{className:"p-2 border",children:((zt=u[Ee.orderKey])==null?void 0:zt.in)||0}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.subtotal)}),o.jsx("td",{className:"p-2 border",children:Sn(Ee.totalVendor)}),o.jsx("td",{className:"p-2 border",children:Sn(gt)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>Je(Ee.orderKey),children:"Ver / Editar"}),s&&o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>nt(Ee.orderKey),children:"Borrar"})]})})]},Ee.orderKey)})})]})]}),_&&o.jsx("p",{className:"mt-2 text-sm",children:_})]})}function Dg(t){return isFinite(t)?Math.round(t):0}function Hn(t){const e=Number(t);return Number.isFinite(e)?Math.floor(e):0}function Nne(t){const e=Math.max(1,Hn(t.unitsPerPackage||1)),r=Hn(t.totalUnits||0),n=Hn(t.quantity||0),a=Hn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function WLe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):Nne(t)}function DH(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Hn(t.unitsPerPackage||1)),n=WLe(t);return Math.max(0,Math.floor(n/r))}function XLe(t){const e=Math.max(1,Hn(t.unitsPerPackage||1)),r=Nne(t);return Math.max(0,Math.floor(r/e))}function YLe(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState([]),[h,A]=v.useState({}),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,B]=v.useState(""),[P,_]=v.useState("20"),[E,I]=v.useState("15"),[O,S]=v.useState("30"),[j,D]=v.useState([]),[J,ge]=v.useState(""),[se,he]=v.useState(""),[me,Z]=v.useState(""),[ve,Se]=v.useState("1"),[k,F]=v.useState("0"),[H,Q]=v.useState("DATOS"),V=v.useMemo(()=>{const ce=new Set;for(const Qe of i){const xe=String(Qe.category||"").trim();xe&&ce.add(xe)}return Array.from(ce).sort((Qe,xe)=>Qe.localeCompare(xe,"es"))},[i]);v.useEffect(()=>{!J&&V.length>0&&ge(V[0])},[V]);const Y=(ce,Qe,xe)=>{const fe=ce*Qe,oe=Math.min(Math.max(xe.marginR,0),99.9)/100,Be=Math.min(Math.max(xe.marginSJ,0),99.9)/100,Me=Math.min(Math.max(xe.marginIsla,0),99.9)/100,Ze=Qe>0&&oe<1?fe/(1-oe):fe,Je=Qe>0&&Be<1?fe/(1-Be):fe,nt=Qe>0&&Me<1?fe/(1-Me):fe,ke=Ze-fe,ae=Je-fe,De=nt-fe,We=Qe>0?Dg(Ze/Qe):0,pt=Qe>0?Dg(Je/Qe):0,ct=Qe>0?Dg(nt/Qe):0;return{subtotal:fe,totalRivas:Ze,totalSanJorge:Je,totalIsla:nt,gainRivas:ke,gainSanJorge:ae,gainIsla:De,unitPriceRivas:We,unitPriceSanJorge:pt,unitPriceIsla:ct}},R=()=>{x(null),b(""),B(""),D([]),ge(V[0]||""),he(""),Z(""),F("0"),Se("1"),_("20"),I("15"),S("30"),Q("DATOS")},z=async()=>{u(!0);try{const ce=await Dt(Wt(At(je,"products_candies"),ln("createdAt","desc"))),Qe=[];ce.forEach(xe=>{const fe=xe.data();Qe.push({id:xe.id,name:String(fe.name??"").trim(),category:String(fe.category??"").trim()||"Caramelo",providerPrice:Number(fe.providerPrice??0),unitsPerPackage:Number(fe.unitsPerPackage??1)})}),l(Qe)}catch(ce){console.error(ce),n(" Error cargando catlogo de dulces.")}finally{u(!1)}};v.useEffect(()=>{z()},[t]);const le=v.useMemo(()=>(J.trim().length>0?i.filter(Qe=>Qe.category===J):i).sort((Qe,xe)=>Qe.name.localeCompare(xe.name,"es")),[i,J]);v.useEffect(()=>{if(!se){Z(""),Se("1");return}const ce=i.find(Qe=>Qe.id===se);ce&&(Z(String(ce.providerPrice??0)),Se(String(ce.unitsPerPackage??1)))},[se,i]);const K=()=>{if(n(""),!se){n("Selecciona un producto del catlogo.");return}const ce=i.find(Je=>Je.id===se);if(!ce){n("Producto de catlogo no encontrado (refresca).");return}const Qe=Number(ce.providerPrice||0),xe=Hn(k||0),fe=Hn(ce.unitsPerPackage||0);if(Qe<0){n("El precio proveedor no puede ser negativo.");return}if(xe<=0){n("Los paquetes del pedido general deben ser mayor que 0.");return}if(fe<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const oe=Number(P||0),Be=Number(E||0),Me=Number(O||0);if(j.find(Je=>Je.id===ce.id))D(Je=>Je.map(nt=>{if(nt.id!==ce.id)return nt;const ke=Hn(nt.packages||0)+xe,ae=Y(Qe,ke,{marginR:Number(nt.marginRivas||oe),marginSJ:Number(nt.marginSanJorge||Be),marginIsla:Number(nt.marginIsla||Me)});return{...nt,providerPrice:Qe,unitsPerPackage:fe,packages:ke,remainingPackages:Hn(nt.remainingPackages??nt.packages)+xe,...ae}}));else{const Je=Y(Qe,xe,{marginR:oe,marginSJ:Be,marginIsla:Me}),nt={id:ce.id,name:ce.name,category:ce.category,providerPrice:Qe,packages:xe,unitsPerPackage:fe,marginRivas:oe,marginSanJorge:Be,marginIsla:Me,subtotal:Je.subtotal,totalRivas:Je.totalRivas,totalSanJorge:Je.totalSanJorge,totalIsla:Je.totalIsla,gainRivas:Je.gainRivas,gainSanJorge:Je.gainSanJorge,gainIsla:Je.gainIsla,unitPriceRivas:Je.unitPriceRivas,unitPriceSanJorge:Je.unitPriceSanJorge,unitPriceIsla:Je.unitPriceIsla,remainingPackages:xe};D(ke=>[...ke,nt])}he(""),F("0"),Q("ITEMS")},M=ce=>{D(Qe=>Qe.filter(xe=>xe.id!==ce))},pe=v.useMemo(()=>{const ce=j.reduce((Be,Me)=>Be+Hn(Me.packages),0),Qe=j.reduce((Be,Me)=>Be+Number(Me.subtotal||0),0),xe=j.reduce((Be,Me)=>Be+Number(Me.totalRivas||0),0),fe=j.reduce((Be,Me)=>Be+Number(Me.totalSanJorge||0),0),oe=j.reduce((Be,Me)=>Be+Number(Me.totalIsla||0),0);return{totalPackages:ce,subtotal:Qe,totalRivas:xe,totalSanJorge:fe,totalIsla:oe}},[j]),X=(ce,Qe,xe)=>{D(fe=>fe.map(oe=>{if(oe.id!==ce)return oe;let Be={...oe};if(Qe==="packages"&&(Be.packages=Hn(xe||0)),Qe==="unitsPerPackage"&&(Be.unitsPerPackage=Hn(xe||0)),Qe==="marginRivas"&&(Be.marginRivas=Number(xe||0)),Qe==="marginSanJorge"&&(Be.marginSanJorge=Number(xe||0)),Qe==="marginIsla"&&(Be.marginIsla=Number(xe||0)),Qe==="packages"||Qe==="marginRivas"||Qe==="marginSanJorge"||Qe==="marginIsla"){const Me=Y(Be.providerPrice,Be.packages,{marginR:Number(Be.marginRivas||0),marginSJ:Number(Be.marginSanJorge||0),marginIsla:Number(Be.marginIsla||0)});Be={...Be,...Me}}return Be}))},G=()=>{if(n(""),!i.length){n(" No hay catlogo cargado para generar plantilla.");return}const ce=Number(P||0),Qe=Number(E||0),xe=Number(O||0),fe=i.slice().sort((Ze,Je)=>Ze.name.localeCompare(Je.name,"es")).map(Ze=>({Producto:Ze.name,Paquetes:"","Margen Rivas":ce,"Margen San Jorge":Qe,"Margen Isla":xe,"P. unidad Rivas":"","P. unidad San Jorge":"","P. unidad Isla":""})),oe=kl.json_to_sheet(fe),Be=kl.book_new();kl.book_append_sheet(Be,oe,"Plantilla");const Me=w&&String(w).trim()||new Date().toISOString().slice(0,10);vne(Be,`plantilla_orden_maestra_${Me}.xlsx`)},ie=so.useRef(null),[Ie,Re]=v.useState(!1);function ze(ce){return String(ce??"").trim().toLowerCase().replace(/\s+/g," ")}function st(ce){const Qe=Number(String(ce??"").replace(",","."));return Number.isFinite(Qe)?Qe:0}function lt(ce,Qe){const xe={};Object.keys(ce||{}).forEach(fe=>xe[ze(fe)]=ce[fe]);for(const fe of Qe){const oe=xe[ze(fe)];if(oe!=null&&String(oe).trim()!=="")return oe}}const _t=()=>{var ce;if(!i.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(ce=ie.current)==null||ce.click()},bt=async ce=>{var xe;const Qe=(xe=ce.target.files)==null?void 0:xe[0];if(Qe){ce.target.value="",Re(!0),n("");try{const fe=await Qe.arrayBuffer(),oe=ib(fe,{type:"array"}),Be=oe.Sheets[oe.SheetNames[0]],Me=kl.sheet_to_json(Be,{defval:""});if(!Me.length){n(" El Excel viene vaco.");return}const Ze=new Map;for(const ae of i)Ze.set(ze(ae.name),ae);const Je=[],nt=new Map;for(let ae=0;ae<Me.length;ae++){const De=Me[ae],We=lt(De,["Producto","Product","Nombre","Name"]),pt=lt(De,["Paquetes","Packages"]),ct=lt(De,["Margen Rivas","Margen Rivas (%)","Margin Rivas","Margin Rivas (%)"]),Xe=lt(De,["Margen San Jorge","Margen San Jorge (%)","Margin San Jorge","Margin San Jorge (%)"]),Rt=lt(De,["Margen Isla","Margen Isla (%)","Margin Isla","Margin Isla (%)"]),er=lt(De,["P. unidad Rivas","P unidad Rivas","Precio Rivas","Precio venta Rivas"]),L=lt(De,["P. unidad San Jorge","P unidad San Jorge","Precio San Jorge","Precio venta San Jorge"]),we=lt(De,["P. unidad Isla","P unidad Isla","Precio Isla","Precio venta Isla"]),Ue=ze(We);if(!Ue){Je.push(`Fila ${ae+2}: Falta "Producto".`);continue}const te=Ze.get(Ue);if(!te){Je.push(`Fila ${ae+2}: Producto no existe en catlogo: "${String(We).trim()}".`);continue}const Ce=Math.floor(st(pt));if(Ce<=0){Je.push(`Fila ${ae+2}: "Paquetes" invlido para "${te.name}".`);continue}const $e=String(ct??"").trim()!==""?st(ct):Number(P||0),He=String(Xe??"").trim()!==""?st(Xe):Number(E||0),Ye=String(Rt??"").trim()!==""?st(Rt):Number(O||0),mt=Math.floor(st(er)),rt=Math.floor(st(L)),re=Math.floor(st(we)),ne=nt.get(te.id);ne?nt.set(te.id,{packages:ne.packages+Ce,mR:$e,mSJ:He,mI:Ye,puR:mt>0?mt:ne.puR,puSJ:rt>0?rt:ne.puSJ,puI:re>0?re:ne.puI}):nt.set(te.id,{packages:Ce,mR:$e,mSJ:He,mI:Ye,puR:mt>0?mt:void 0,puSJ:rt>0?rt:void 0,puI:re>0?re:void 0})}const ke=[];nt.forEach((ae,De)=>{const We=i.find(Ye=>Ye.id===De);if(!We)return;const pt=Number(We.providerPrice||0),ct=Math.max(1,Hn(We.unitsPerPackage||1)),Xe=Math.max(1,Hn(ae.packages)),Rt=pt*Xe,er=Number(ae.puR||0),L=Number(ae.puSJ||0),we=Number(ae.puI||0),Ue=er>0||L>0||we>0;let te=ae.mR,Ce=ae.mSJ,$e=ae.mI,He;if(Ue){const Ye=Y(pt,Xe,{marginR:te,marginSJ:Ce,marginIsla:$e}),mt=er>0?er*Xe:Ye.totalRivas,rt=L>0?L*Xe:Ye.totalSanJorge,re=we>0?we*Xe:Ye.totalIsla,ne=Ae=>{if(!Number.isFinite(Ae)||Ae<=0)return 0;const ue=(1-Rt/Ae)*100;return Math.min(Math.max(ue,0),99.9)};er>0&&(te=ne(mt)),L>0&&(Ce=ne(rt)),we>0&&($e=ne(re)),He={subtotal:Rt,totalRivas:mt,totalSanJorge:rt,totalIsla:re,gainRivas:mt-Rt,gainSanJorge:rt-Rt,gainIsla:re-Rt,unitPriceRivas:Xe>0?Dg(mt/Xe):0,unitPriceSanJorge:Xe>0?Dg(rt/Xe):0,unitPriceIsla:Xe>0?Dg(re/Xe):0}}else He=Y(pt,Xe,{marginR:te,marginSJ:Ce,marginIsla:$e});ke.push({id:We.id,name:We.name,category:We.category,providerPrice:pt,packages:Xe,unitsPerPackage:ct,marginRivas:te,marginSanJorge:Ce,marginIsla:$e,subtotal:He.subtotal,totalRivas:He.totalRivas,totalSanJorge:He.totalSanJorge,totalIsla:He.totalIsla,gainRivas:He.gainRivas,gainSanJorge:He.gainSanJorge,gainIsla:He.gainIsla,unitPriceRivas:He.unitPriceRivas,unitPriceSanJorge:He.unitPriceSanJorge,unitPriceIsla:He.unitPriceIsla,remainingPackages:Xe})}),D(ae=>{const De=new Map;ae.forEach(We=>De.set(We.id,We));for(const We of ke){const pt=De.get(We.id);if(!pt)De.set(We.id,We);else{const ct=Hn(pt.packages)+Hn(We.packages),Xe=Y(pt.providerPrice,ct,{marginR:We.marginRivas,marginSJ:We.marginSanJorge,marginIsla:We.marginIsla});De.set(We.id,{...pt,packages:ct,marginRivas:We.marginRivas,marginSanJorge:We.marginSanJorge,marginIsla:We.marginIsla,remainingPackages:Hn(pt.remainingPackages??pt.packages)+Hn(We.packages),...Xe})}}return Array.from(De.values()).sort((We,pt)=>We.name.localeCompare(pt.name,"es"))}),Q("ITEMS"),Je.length?(n(` Importado con detalles. Errores: ${Je.length}. (Revis nombres/paquetes).`),console.warn("Errores import:",Je)):n(` Importacin lista: ${ke.length} productos agregados.`)}catch(fe){console.error(fe),n(" Error importando Excel. Revis columnas: Producto, Paquetes, y opcional Mrgenes o P. unidad.")}finally{Re(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const ce=Wt(At(je,"candy_main_orders"),ln("createdAt","desc")),Qe=await Dt(ce),xe=[];Qe.forEach(Be=>{const Me=Be.data();xe.push({id:Be.id,name:Me.name??"",date:Me.date??"",totalPackages:Number(Me.totalPackages??0),subtotal:Number(Me.subtotal??0),totalRivas:Number(Me.totalRivas??0),totalSanJorge:Number(Me.totalSanJorge??0),totalIsla:Number(Me.totalIsla??0),marginRivas:Number(Me.marginRivas??20),marginSanJorge:Number(Me.marginSanJorge??15),marginIsla:Number(Me.marginIsla??30),createdAt:Me.createdAt??tr.now()})}),f(xe);const fe=await Dt(At(je,"inventory_candies")),oe={};fe.forEach(Be=>{const Me=Be.data(),Ze=Me.orderId;if(!Ze)return;const Je=XLe(Me),nt=DH(Me);oe[Ze]||(oe[Ze]={orderId:Ze,totalPackages:0,remainingPackages:0}),oe[Ze].totalPackages+=Je,oe[Ze].remainingPackages+=nt}),A(oe)}catch(ce){console.error(ce),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const St=async ce=>{if(ce.preventDefault(),n(""),!j.length){n("Agrega al menos un producto al pedido general.");return}try{const Qe=new Date().toISOString().slice(0,10),xe=w||Qe,fe=pe,oe=Number(P||0),Be=Number(E||0),Me=Number(O||0);for(const Je of j){if(!Je.name.trim()){n("Hay un producto sin nombre en el pedido.");return}if(Je.providerPrice<0){n(`El precio proveedor no puede ser negativo (producto: ${Je.name}).`);return}if(Je.packages<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${Je.name}).`);return}if(Je.unitsPerPackage<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${Je.name}).`);return}}const Ze={name:y||`Pedido ${xe}`,date:xe,totalPackages:fe.totalPackages,subtotal:fe.subtotal,totalRivas:fe.totalRivas,totalSanJorge:fe.totalSanJorge,totalIsla:fe.totalIsla,marginRivas:oe,marginSanJorge:Be,marginIsla:Me,items:j};if(g){await Jr($t(je,"candy_main_orders",g),{...Ze});for(const ke of j){const ae=await Dt(Wt(At(je,"inventory_candies"),sr("orderId","==",g),sr("productId","==",ke.id))),De=Hn(ke.packages)*Hn(ke.unitsPerPackage),We=Math.max(1,Hn(ke.unitsPerPackage||1));if(ae.empty)await Nn(At(je,"inventory_candies"),{productId:ke.id,productName:ke.name,category:ke.category,measurement:"unidad",quantity:De,remaining:De,packages:Hn(ke.packages),remainingPackages:Hn(ke.packages),unitsPerPackage:We,totalUnits:De,providerPrice:ke.providerPrice,subtotal:ke.subtotal,totalRivas:ke.totalRivas,totalSanJorge:ke.totalSanJorge,totalIsla:ke.totalIsla,gainRivas:ke.gainRivas,gainSanJorge:ke.gainSanJorge,gainIsla:ke.gainIsla,unitPriceRivas:ke.unitPriceRivas,unitPriceSanJorge:ke.unitPriceSanJorge,unitPriceIsla:ke.unitPriceIsla,date:xe,createdAt:tr.now(),status:"PENDIENTE",orderId:g});else for(const pt of ae.docs){const ct=pt.data(),Xe=Hn(ct.totalUnits??0),Rt=Hn(ct.remaining??Xe),er=De-Xe,L=Math.max(0,Rt+er),we=Math.max(0,Math.floor(L/We));await Jr($t(je,"inventory_candies",pt.id),{productName:ke.name,category:ke.category,unitsPerPackage:We,totalUnits:De,quantity:De,remaining:L,packages:Hn(ke.packages),remainingPackages:we,providerPrice:ke.providerPrice,subtotal:ke.subtotal,totalRivas:ke.totalRivas,totalSanJorge:ke.totalSanJorge,totalIsla:ke.totalIsla,gainRivas:ke.gainRivas,gainSanJorge:ke.gainSanJorge,gainIsla:ke.gainIsla,unitPriceRivas:ke.unitPriceRivas,unitPriceSanJorge:ke.unitPriceSanJorge,unitPriceIsla:ke.unitPriceIsla,date:xe})}}const Je=await Dt(Wt(At(je,"inventory_candies"),sr("orderId","==",g))),nt=new Set(j.map(ke=>ke.id));for(const ke of Je.docs){const ae=ke.data(),De=String(ae.productId||"");De&&!nt.has(De)&&await Qn($t(je,"inventory_candies",ke.id))}f(ke=>ke.map(ae=>ae.id===g?{...ae,name:Ze.name,date:Ze.date,totalPackages:Ze.totalPackages,subtotal:Ze.subtotal,totalRivas:Ze.totalRivas,totalSanJorge:Ze.totalSanJorge,totalIsla:Ze.totalIsla,marginRivas:Ze.marginRivas,marginSanJorge:Ze.marginSanJorge,marginIsla:Ze.marginIsla}:ae)),n(" Orden maestra actualizada (pedido + inventario).")}else{const nt=(await Nn(At(je,"candy_main_orders"),{...Ze,createdAt:tr.now()})).id,ke=G0(je);for(const ae of j){const De=Math.max(1,Hn(ae.unitsPerPackage||1)),We=Hn(ae.packages)*De,pt=$t(At(je,"inventory_candies"));ke.set(pt,{productId:ae.id,productName:ae.name,category:ae.category,measurement:"unidad",quantity:We,remaining:We,packages:Hn(ae.packages),remainingPackages:Hn(ae.packages),unitsPerPackage:De,totalUnits:We,providerPrice:ae.providerPrice,subtotal:ae.subtotal,totalRivas:ae.totalRivas,totalSanJorge:ae.totalSanJorge,totalIsla:ae.totalIsla,gainRivas:ae.gainRivas,gainSanJorge:ae.gainSanJorge,gainIsla:ae.gainIsla,unitPriceRivas:ae.unitPriceRivas,unitPriceSanJorge:ae.unitPriceSanJorge,unitPriceIsla:ae.unitPriceIsla,date:xe,createdAt:tr.now(),status:"PENDIENTE",orderId:nt})}await ke.commit(),n(" Orden maestra creada y registrada en inventario.")}R(),p(!1),e()}catch(Qe){console.error(Qe),n(" Error al guardar orden maestra.")}},kt=async ce=>{try{s(!0),n(""),x(ce.id),b(ce.name),B(ce.date),_(String(ce.marginRivas??20)),I(String(ce.marginSanJorge??15)),S(String(ce.marginIsla??30)),Q("DATOS");const Qe=$t(je,"candy_main_orders",ce.id),xe=await Li(Qe);if(!xe.exists()){n(" No se encontr la orden.");return}const fe=xe.data(),oe=Array.isArray(fe.items)?fe.items:[],Be=await Dt(Wt(At(je,"inventory_candies"),sr("orderId","==",ce.id))),Me={};Be.forEach(Je=>{const nt=Je.data(),ke=String(nt.productId||"");if(!ke)return;const ae=DH(nt);Me[ke]=(Me[ke]||0)+ae});const Ze=oe.map(Je=>{const nt=i.find(We=>We.id===Je.id),ke=Number((nt==null?void 0:nt.providerPrice)??Je.providerPrice??0),ae=Math.max(1,Hn((nt==null?void 0:nt.unitsPerPackage)??Je.unitsPerPackage??1)),De=Y(ke,Hn(Je.packages||0),{marginR:Number(Je.marginRivas||0),marginSJ:Number(Je.marginSanJorge||0),marginIsla:Number(Je.marginIsla||0)});return{...Je,name:String((nt==null?void 0:nt.name)??Je.name??""),category:String((nt==null?void 0:nt.category)??Je.category??"Caramelo"),providerPrice:ke,unitsPerPackage:ae,remainingPackages:Me[Je.id]??Je.remainingPackages??Je.packages??0,...De}});D(Ze),p(!0)}catch(Qe){console.error(Qe),n(" Error al abrir orden maestra.")}finally{s(!1)}},et=async ce=>{if(confirm(`Eliminar la orden "${ce.name}" y todo su inventario asociado?`)){n("");try{const xe=await Dt(Wt(At(je,"inventory_candies"),sr("orderId","==",ce.id)));for(const fe of xe.docs)await Qn($t(je,"inventory_candies",fe.id));await Qn($t(je,"candy_main_orders",ce.id)),f(fe=>fe.filter(oe=>oe.id!==ce.id)),n(" Orden maestra eliminada."),e()}catch(xe){console.error(xe),n(" Error al eliminar orden maestra.")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[o.jsx("div",{className:"w-full",children:o.jsx(Xc,{onClick:e,loading:a||c})}),o.jsxs("button",{className:"items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded-2xl hover:bg-indigo-700",onClick:()=>{R(),p(!0)},children:[o.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full ",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold",children:g?"Editar Orden Maestra":"Nueva Orden Maestra"}),o.jsx("div",{className:"ml-auto flex gap-2",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{R(),p(!1)},children:"Cerrar"})})]}),o.jsx("div",{className:"md:hidden mt-3",children:o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Q("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),o.jsx("button",{type:"button",onClick:()=>Q("AGREGAR"),disabled:!!g,className:`px-2 py-2 rounded text-xs font-semibold border ${g?"bg-gray-100 text-gray-400 border-gray-200":H==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,title:g?"En edicin no se agregan productos":"",children:"Agregar"}),o.jsxs("button",{type:"button",onClick:()=>Q("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",j.length,")"]}),o.jsx("button",{type:"button",onClick:()=>Q("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),o.jsxs("form",{onSubmit:St,className:"space-y-4 pt-4",children:[o.jsx("div",{className:`${H==="DATOS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),o.jsx("input",{className:"w-full border p-2 rounded",value:y,onChange:ce=>b(ce.target.value),placeholder:"Ej: Pedido diciembre 01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:w,onChange:ce=>B(ce.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:P,onChange:ce=>_(ce.target.value),disabled:!!g})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia San Jorge"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:E,onChange:ce=>I(ce.target.value),disabled:!!g})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:O,onChange:ce=>S(ce.target.value),disabled:!!g})]})]})}),!g&&o.jsx("div",{className:`${H==="AGREGAR"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),o.jsx("select",{className:"w-full border p-2 rounded",value:J,onChange:ce=>{ge(ce.target.value),he("")},disabled:c,children:V.length===0?o.jsx("option",{value:"",children:c?"Cargando...":"No hay categoras en catlogo"}):V.map(ce=>o.jsx("option",{value:ce,children:ce},ce))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:se,onChange:ce=>he(ce.target.value),children:[o.jsx("option",{value:"",children:c?"Cargando catlogo...":"Selecciona producto"}),le.map(ce=>o.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:k,onChange:ce=>F(ce.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:ve,readOnly:!0})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:K,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]})}),o.jsxs("div",{className:`${H==="ITEMS"?"block":"hidden"} md:block`,children:[o.jsx("div",{className:"md:hidden space-y-3",children:j.length===0?o.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):j.map(ce=>o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-base leading-tight",children:ce.name}),o.jsx("div",{className:"text-xs text-gray-500",children:ce.category})]}),!g&&o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(ce.id),children:"Quitar"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ce.packages,onChange:Qe=>X(ce.id,"packages",Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:ce.remainingPackages??ce.packages,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ce.unitsPerPackage,onChange:Qe=>X(ce.id,"unitsPerPackage",Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"P. proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(ce.providerPrice||0).toFixed(2),readOnly:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ce.marginRivas??0,onChange:Qe=>X(ce.id,"marginRivas",Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% SJ"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ce.marginSanJorge??0,onChange:Qe=>X(ce.id,"marginSanJorge",Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% Isla"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ce.marginIsla??0,onChange:Qe=>X(ce.id,"marginIsla",Qe.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:Number(ce.subtotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(ce.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total SJ"}),o.jsx("div",{className:"font-semibold",children:Number(ce.totalSanJorge||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Number(ce.totalIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad Rivas"}),o.jsx("div",{className:"font-semibold",children:ce.unitPriceRivas})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad SJ"}),o.jsx("div",{className:"font-semibold",children:ce.unitPriceSanJorge})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad Isla"}),o.jsx("div",{className:"font-semibold",children:ce.unitPriceIsla})]})]})]},ce.id))}),!g&&o.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2 mb-2",children:[o.jsx("input",{ref:ie,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:bt}),o.jsx("button",{type:"button",onClick:G,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla con todos los productos",children:"Descargar plantilla"}),o.jsx("button",{type:"button",onClick:_t,disabled:Ie,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa Producto / Paquetes / Mrgenes desde Excel",children:Ie?"Importando...":"Importar Excel"})]}),o.jsx("div",{className:"hidden md:block bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),!g&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:j.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:g?16:17,className:"p-4 text-center text-gray-500",children:"No hay productos en esta orden."})}):j.map(ce=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:ce.name}),o.jsx("td",{className:"p-2 border",children:ce.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-24 border p-1 rounded text-right",value:ce.packages,onChange:Qe=>X(ce.id,"packages",Qe.target.value)})}),o.jsx("td",{className:"p-2 border",children:ce.remainingPackages??ce.packages}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ce.unitsPerPackage,onChange:Qe=>X(ce.id,"unitsPerPackage",Qe.target.value)})}),o.jsx("td",{className:"p-2 border",children:Number(ce.providerPrice||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ce.marginRivas??0,onChange:Qe=>X(ce.id,"marginRivas",Qe.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ce.marginSanJorge??0,onChange:Qe=>X(ce.id,"marginSanJorge",Qe.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ce.marginIsla??0,onChange:Qe=>X(ce.id,"marginIsla",Qe.target.value)})}),o.jsx("td",{className:"p-2 border",children:Number(ce.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(ce.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(ce.totalSanJorge||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(ce.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:ce.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:ce.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:ce.unitPriceIsla}),!g&&o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(ce.id),children:"Quitar"})})]},ce.id))})]})})]}),o.jsx("div",{className:`${H==="TOTALES"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales de la orden"}),o.jsx("div",{className:"text-lg font-semibold",children:pe.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),o.jsx("div",{className:"text-lg font-semibold",children:pe.subtotal.toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas (orden)"}),o.jsx("div",{className:"text-lg font-semibold",children:pe.totalRivas.toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total San Jorge / Isla"}),o.jsxs("div",{className:"text-sm font-semibold",children:["SJ: ",pe.totalSanJorge.toFixed(2),o.jsx("br",{}),"Isla: ",pe.totalIsla.toFixed(2)]})]})]})}),o.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:R,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),o.jsx("button",{type:"button",onClick:()=>{R(),p(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:j.length===0,children:"Guardar orden"})]}),o.jsx("div",{className:"md:hidden mt-2",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{Q(H==="DATOS"&&!g?"AGREGAR":H==="DATOS"||H==="AGREGAR"?"ITEMS":H==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"md:hidden space-y-3",children:a?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):d.length===0?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):d.map(ce=>{var oe;const Qe=h[ce.id],xe=ce.date||((oe=ce.createdAt)!=null&&oe.toDate?ce.createdAt.toDate().toISOString().slice(0,10):""),fe=ce.totalPackages>0?(ce.subtotal/ce.totalPackages).toFixed(2):"0.00";return o.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:xe}),o.jsx("div",{className:"font-semibold text-base leading-tight",children:ce.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>kt(ce),children:"Ver"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>et(ce),children:"Borrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:ce.totalPackages})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Qe?Qe.remainingPackages:0})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),o.jsx("div",{className:"font-semibold",children:fe})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:ce.subtotal.toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:ce.totalRivas.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total SJ"}),o.jsx("div",{className:"font-semibold",children:ce.totalSanJorge.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:ce.totalIsla.toFixed(2)})]})]})]},ce.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin ordenes maestras."})}):d.map(ce=>{var xe;const Qe=h[ce.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:ce.date||((xe=ce.createdAt)!=null&&xe.toDate?ce.createdAt.toDate().toISOString().slice(0,10):"")}),o.jsx("td",{className:"p-2 border",children:ce.name}),o.jsx("td",{className:"p-2 border",children:ce.totalPackages}),o.jsx("td",{className:"p-2 border",children:Qe?Qe.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:ce.totalPackages>0?(ce.subtotal/ce.totalPackages).toFixed(2):"0.00"}),o.jsx("td",{className:"p-2 border",children:ce.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:ce.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:ce.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:ce.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>kt(ce),children:"Ver / Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>et(ce),children:"Borrar"})]})})]},ce.id)})})]})})]}),r&&o.jsx("p",{className:"mt-2 text-sm",children:r})]})}const Sh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function nP(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+l/100),f=a*(1+c/100),h=u-a,A=d-a,m=f-a,p=u/s,g=d/s,x=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(A.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function RH(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Jl(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function aP(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function JLe(){var Q,V,Y;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(kd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,A]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,B]=v.useState(0),[P,_]=v.useState(0),[E,I]=v.useState(0),[O,S]=v.useState(""),[j,D]=v.useState(""),[J,ge]=v.useState(0),[se,he]=v.useState(0),[me,Z]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const R=Wt(At(je,"candy_main_orders"),ln("createdAt","desc")),z=await Dt(R),le=[];z.forEach(pe=>{const X=pe.data();le.push({id:pe.id,name:X.name??"",date:X.date??"",totalPackages:Number(X.totalPackages??0),subtotal:Number(X.subtotal??0),totalRivas:Number(X.totalRivas??0),totalSanJorge:Number(X.totalSanJorge??0),totalIsla:Number(X.totalIsla??0),marginRivas:Number(X.marginRivas??0),marginSanJorge:Number(X.marginSanJorge??0),marginIsla:Number(X.marginIsla??0),createdAt:X.createdAt??tr.now()})}),e(le);const K=await Dt(Wt(At(je,"inventory_candies"))),M={};K.forEach(pe=>{const X=pe.data(),G=X.orderId;if(!G)return;const ie=Number(X.unitsPerPackage||1)||1,Ie=Number(X.totalUnits??(X.packages||0)*ie),Re=Math.round(Ie/ie),ze=Number(X.remaining??X.totalUnits??Ie),st=Number(X.remainingPackages??NaN),lt=Number.isFinite(st)?Math.round(st):Math.round(ze/ie);M[G]||(M[G]={orderId:G,totalPackages:0,remainingPackages:0}),M[G].totalPackages+=Re,M[G].remainingPackages+=lt}),n(M)}catch(R){console.error(R),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const ve=v.useMemo(()=>t.filter(R=>{var le;const z=R.date||((le=R.createdAt)!=null&&le.toDate?R.createdAt.toDate().toISOString().slice(0,10):"");return!(!z||c&&z<c||d&&z>d)}),[t,c,d]),Se=v.useMemo(()=>{let R=0,z=0,le=0,K=0,M=0,pe=0;for(const X of ve){R+=X.totalPackages,z+=X.subtotal,le+=X.totalRivas,K+=X.totalSanJorge,M+=X.totalIsla;const G=r[X.id];G&&(pe+=G.remainingPackages)}return{totalPaquetes:R,totalSubtotal:z,totalRivas:le,totalSJ:K,totalIsla:M,totalPaquetesRestantes:pe,totalPedidos:ve.length}},[ve,r]),k=async(R,z,le)=>{if(!g)return;const K=Number(le||0),M=y.map(G=>G.id!==R?G:nP({...G,[z]:K}));b(M);const pe=M.find(G=>G.id===R);if(!pe)return;const X=RH(M);try{await Jr($t(je,"products_candies",R),{marginRivas:pe.marginRivas,marginSanJorge:pe.marginSanJorge,marginIsla:pe.marginIsla,subtotal:pe.subtotal,totalRivas:pe.totalRivas,totalSanJorge:pe.totalSanJorge,totalIsla:pe.totalIsla,unitPriceRivas:pe.unitPriceRivas,unitPriceSanJorge:pe.unitPriceSanJorge,unitPriceIsla:pe.unitPriceIsla,gainRivas:pe.gainRivas,gainSanJorge:pe.gainSanJorge,gainIsla:pe.gainIsla}),await Jr($t(je,"candy_main_orders",g.id),{totalPackages:X.totalPackages,subtotal:Number(X.subtotal.toFixed(2)),totalRivas:Number(X.totalRivas.toFixed(2)),totalSanJorge:Number(X.totalSanJorge.toFixed(2)),totalIsla:Number(X.totalIsla.toFixed(2))}),x(G=>G&&{...G,totalPackages:X.totalPackages,subtotal:Number(X.subtotal.toFixed(2)),totalRivas:Number(X.totalRivas.toFixed(2)),totalSanJorge:Number(X.totalSanJorge.toFixed(2)),totalIsla:Number(X.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(G){console.error(G),l(" Error actualizando mrgenes del producto.")}},F=async()=>{if(g)try{l("");const R=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,z=Number.isFinite(P)&&P!==0?P:g.marginSanJorge||0,le=Number.isFinite(E)&&E!==0?E:g.marginIsla||0,K=nP({id:"tmp",name:O.trim(),category:j.trim(),providerPrice:Number(J||0),packages:Number(se||0),unitsPerPackage:Number(me||1),marginRivas:Number(R||0),marginSanJorge:Number(z||0),marginIsla:Number(le||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(se||0)}),M=await Nn(At(je,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:K.name,category:K.category,providerPrice:K.providerPrice,packages:K.packages,unitsPerPackage:K.unitsPerPackage,marginRivas:K.marginRivas,marginSanJorge:K.marginSanJorge,marginIsla:K.marginIsla,gainRivas:K.gainRivas,gainSanJorge:K.gainSanJorge,gainIsla:K.gainIsla,subtotal:K.subtotal,totalRivas:K.totalRivas,totalSanJorge:K.totalSanJorge,totalIsla:K.totalIsla,unitPriceRivas:K.unitPriceRivas,unitPriceSanJorge:K.unitPriceSanJorge,unitPriceIsla:K.unitPriceIsla,createdAt:tr.now()}),X=[{...K,id:M.id},...y];b(X);const G=RH(X);await Jr($t(je,"candy_main_orders",g.id),{totalPackages:G.totalPackages,subtotal:Number(G.subtotal.toFixed(2)),totalRivas:Number(G.totalRivas.toFixed(2)),totalSanJorge:Number(G.totalSanJorge.toFixed(2)),totalIsla:Number(G.totalIsla.toFixed(2))}),x(ie=>ie&&{...ie,totalPackages:G.totalPackages,subtotal:Number(G.subtotal.toFixed(2)),totalRivas:Number(G.totalRivas.toFixed(2)),totalSanJorge:Number(G.totalSanJorge.toFixed(2)),totalIsla:Number(G.totalIsla.toFixed(2))}),B(0),_(0),I(0),S(""),D(""),ge(0),he(0),Z(1),l(" Producto agregado con mrgenes por sucursal.")}catch(R){console.error(R),l(" Error agregando producto al pedido.")}},H=async R=>{try{x(R),b([]),A(!0),p(!0),l("");const z=await Dt(Wt(At(je,"inventory_candies"),sr("orderId","==",R.id))),le={};z.forEach(pe=>{const X=pe.data(),G=X.productId;if(!G)return;const ie=Number(X.unitsPerPackage||1)||1,Ie=Number(X.remaining??X.totalUnits??0),Re=Number(X.remainingPackages??NaN),ze=Number.isFinite(Re)?Math.round(Re):Math.round(Ie/ie);le[G]=(le[G]||0)+ze});const K=await Dt(Wt(At(je,"products_candies"),sr("orderId","==",R.id))),M=[];K.forEach(pe=>{const X=pe.data(),G=Jl(X.providerPrice,0),ie=Jl(X.packages,0),Ie=X.subtotal??G*ie,Re=aP({margin:X.marginRivas,gain:X.gainRivas,subtotal:Ie,orderMargin:R.marginRivas||0}),ze=aP({margin:X.marginSanJorge,gain:X.gainSanJorge,subtotal:Ie,orderMargin:R.marginSanJorge||0}),st=aP({margin:X.marginIsla,gain:X.gainIsla,subtotal:Ie,orderMargin:R.marginIsla||0}),lt=nP({id:pe.id,name:X.name??"",category:X.category??"",providerPrice:G,packages:ie,unitsPerPackage:Jl(X.unitsPerPackage,1),marginRivas:Number(Re||0),marginSanJorge:Number(ze||0),marginIsla:Number(st||0),subtotal:Jl(X.subtotal,0),totalRivas:Jl(X.totalRivas,0),totalSanJorge:Jl(X.totalSanJorge,0),totalIsla:Jl(X.totalIsla,0),gainRivas:Jl(X.gainRivas,0),gainSanJorge:Jl(X.gainSanJorge,0),gainIsla:Jl(X.gainIsla,0),unitPriceRivas:Jl(X.unitPriceRivas,0),unitPriceSanJorge:Jl(X.unitPriceSanJorge,0),unitPriceIsla:Jl(X.unitPriceIsla,0),remainingPackages:le[pe.id]??Jl(X.packages,0)});M.push(lt)}),b(M)}catch(z){console.error(z),l(" Error cargando productos del pedido.")}finally{p(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),o.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",o.jsx("span",{className:"font-semibold",children:Se.totalPedidos})]})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Se.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Se.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",Sh(Se.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",Sh(Se.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",Sh(Se.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",Sh(Se.totalIsla)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):ve.map(R=>{var X;const z=R.totalPackages>0?Math.round(R.totalRivas/R.totalPackages):0,le=R.totalPackages>0?Math.round(R.totalSanJorge/R.totalPackages):0,K=R.totalPackages>0?Math.round(R.totalIsla/R.totalPackages):0,M=R.date||((X=R.createdAt)!=null&&X.toDate?R.createdAt.toDate().toISOString().slice(0,10):""),pe=r[R.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:M}),o.jsx("td",{className:"p-2 border",children:R.name}),o.jsx("td",{className:"p-2 border",children:R.totalPackages}),o.jsx("td",{className:"p-2 border",children:pe?pe.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:z}),o.jsx("td",{className:"p-2 border",children:le}),o.jsx("td",{className:"p-2 border",children:K}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(R),children:"Ver pedido"})})]},R.id)})})]})}),h&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{A(!1),x(null),b([]),l("")},children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),o.jsx("div",{className:"font-semibold",children:g.date||((Q=g.createdAt)!=null&&Q.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"font-semibold",children:((V=r[g.id])==null?void 0:V.totalPackages)??g.totalPackages})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),o.jsx("div",{className:"font-semibold",children:((Y=r[g.id])==null?void 0:Y.remainingPackages)??0})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),o.jsx("div",{className:"font-semibold",children:Sh(g.subtotal)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Sh(g.totalRivas)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),o.jsx("div",{className:"font-semibold",children:Sh(g.totalSanJorge)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Sh(g.totalIsla)})]})]}),o.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:R=>B(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:P,onChange:R=>_(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:E,onChange:R=>I(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Producto"}),o.jsx("input",{className:"border rounded px-2 py-1 w-56",value:O,onChange:R=>S(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Categora"}),o.jsx("input",{className:"border rounded px-2 py-1 w-40",value:j,onChange:R=>D(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:J,onChange:R=>ge(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:se,onChange:R=>he(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:me,onChange:R=>Z(Number(R.target.value||1))})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:F,children:"Agregar producto"})]})]}),o.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(R=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:R.name}),o.jsx("td",{className:"p-2 border",children:R.category}),o.jsx("td",{className:"p-2 border",children:R.packages}),o.jsx("td",{className:"p-2 border",children:R.remainingPackages??R.packages}),o.jsx("td",{className:"p-2 border",children:R.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:R.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginRivas??0,onChange:z=>k(R.id,"marginRivas",z.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginSanJorge??0,onChange:z=>k(R.id,"marginSanJorge",z.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginIsla??0,onChange:z=>k(R.id,"marginIsla",z.target.value)})}),o.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:R.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:R.unitPriceIsla})]},R.id))})]})}),i&&o.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const ja=t=>Math.round((Number(t)||0)*100)/100,Rg=t=>Math.round((Number(t)||0)*1e3)/1e3,bo=t=>Number(t??0).toFixed(2),hm=t=>Number(t??0).toFixed(3),ZLe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=ja(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:ja(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=ja(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function eUe({role:t,currentUserEmail:e,sellerCandyId:r}){const[n,a]=v.useState([]),[s,i]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[f,h]=v.useState("ALL"),A=wr(new Date,"yyyy-MM-dd"),[m,p]=v.useState(A),[g,x]=v.useState(A),[y,b]=v.useState("ALL"),[w,B]=v.useState(null),[P,_]=v.useState(0),[E,I]=v.useState(0),[O,S]=v.useState(""),[j,D]=v.useState(0),[J,ge]=v.useState("0"),se=v.useRef(null),he=!t||t==="admin",me=t==="vendedor_dulces",Z=(e||"").trim().toLowerCase(),[ve,Se]=v.useState([]);v.useEffect(()=>{if(!m||!g)return;c(!0);const xe=Wt(At(je,"sales_candies"),sr("date",">=",m),sr("date","<=",g),ln("date","asc")),fe=Ed(xe,oe=>{const Be=[];oe.forEach(Me=>{const Ze=ZLe(Me.data(),Me.id);Be.push(...Ze)}),a(Be),c(!1)},oe=>{console.error("Error cargando ventas por periodo:",oe),a([]),c(!1)});return()=>fe()},[m,g]),v.useEffect(()=>{(async()=>{const fe=Wt(At(je,"daily_closures_candies"),sr("date","==",A)),oe=await Dt(fe);if(oe.empty)i(null);else{const Be=oe.docs[0];i({id:Be.id,...Be.data()})}})()},[A]),v.useEffect(()=>{(async()=>{try{const fe=await Dt(At(je,"sellers_candies")),oe=[];fe.forEach(Be=>{const Me=Be.data();oe.push({id:Be.id,name:Me.name||"",commissionPercent:Number(Me.commissionPercent||0)})}),Se(oe)}catch(fe){console.error("Error cargando sellers_candies",fe)}})()},[]);const k=xe=>ja(Number(xe.vendorCommissionAmount??0)||0),F=so.useMemo(()=>{let xe=[...n];return f==="FLOTANTE"&&(xe=xe.filter(fe=>fe.status==="FLOTANTE")),f==="PROCESADA"&&(xe=xe.filter(fe=>fe.status==="PROCESADA")),he&&y!=="ALL"&&(xe=xe.filter(fe=>(fe.vendorId||"")===y)),me&&(r?xe=xe.filter(fe=>(fe.vendorId||"")===r):Z?xe=xe.filter(fe=>(fe.sellerEmail||"").toLowerCase()===Z):xe=[]),xe},[f,n,he,y,me,r,Z]),H=so.useMemo(()=>F.filter(xe=>xe.status==="FLOTANTE").length,[F]),Q=so.useMemo(()=>F.filter(xe=>xe.status==="PROCESADA").length,[F]),V=so.useMemo(()=>F.filter(xe=>xe.type==="CREDITO").length,[F]),Y=so.useMemo(()=>F.filter(xe=>xe.type!=="CREDITO").length,[F]),R=Rg(F.reduce((xe,fe)=>xe+(fe.quantity||0),0)),z=ja(F.reduce((xe,fe)=>xe+Number(fe.cogsAmount??0),0)),le=ja(F.reduce((xe,fe)=>xe+(fe.amount||0),0)),K=ja(le-z);let M=0,pe=0,X=0,G=0,ie=0,Ie=0,Re=0;F.forEach(xe=>{const fe=Number(xe.amount||0),oe=Number(xe.amountReceived||0),Be=k(xe);ie+=Be,xe.type==="CREDITO"?(M+=xe.quantity||0,X+=fe-oe,Re+=Be):(pe+=xe.quantity||0,G+=fe,Ie+=Be)}),X=ja(X),G=ja(G),ie=ja(ie),Ie=ja(Ie),Re=ja(Re);const ze=so.useMemo(()=>{const xe={};for(const fe of F){const oe=(fe.vendorId||"").trim();if(!oe||fe.type==="CREDITO")continue;const Be=k(fe);if(!xe[oe]){const Me=ve.find(Ze=>Ze.id===oe);xe[oe]={vendorId:oe,name:(Me==null?void 0:Me.name)||fe.userEmail||"(sin vendedor)",total:0}}xe[oe].total=ja(xe[oe].total+Be)}return Object.values(xe).filter(fe=>fe.total>0).sort((fe,oe)=>oe.total-fe.total)},[F,ve]),st=so.useMemo(()=>{const xe={};for(const fe of F){const oe=(fe.vendorId||"").trim();if(!oe||fe.type!=="CREDITO")continue;const Be=k(fe);if(!xe[oe]){const Me=ve.find(Ze=>Ze.id===oe);xe[oe]={vendorId:oe,name:(Me==null?void 0:Me.name)||fe.userEmail||"(sin vendedor)",total:0}}xe[oe].total=ja(xe[oe].total+Be)}return Object.values(xe).filter(fe=>fe.total>0).sort((fe,oe)=>oe.total-fe.total)},[F,ve]),lt={};F.forEach(xe=>{const fe=xe.productName||"(sin nombre)";lt[fe]||(lt[fe]={totalQuantity:0,totalAmount:0,totalCommission:0}),lt[fe].totalQuantity=Rg(lt[fe].totalQuantity+(xe.quantity||0)),lt[fe].totalAmount=ja(lt[fe].totalAmount+(xe.amount||0)),lt[fe].totalCommission=ja(lt[fe].totalCommission+k(xe))});const _t=Object.entries(lt).map(([xe,fe])=>({productName:xe,totalQuantity:fe.totalQuantity,totalAmount:fe.totalAmount,totalCommission:fe.totalCommission})),bt=async()=>{if(he)try{const xe=F.filter(ke=>ke.status==="FLOTANTE");if(xe.length===0){d("No hay ventas flotantes para procesar en este perodo.");return}const fe={totalCharged:ja(xe.reduce((ke,ae)=>ke+(ae.amount||0),0)),totalSuggested:ja(xe.reduce((ke,ae)=>ke+(ae.amountSuggested||0),0)),totalUnits:Rg(xe.reduce((ke,ae)=>ke+(ae.quantity||0),0)),totalCOGS:ja(xe.reduce((ke,ae)=>ke+Number(ae.cogsAmount??0),0))},oe=ja(fe.totalCharged-fe.totalSuggested),Be=ja(fe.totalCharged-fe.totalCOGS),Me=xe.reduce((ke,ae)=>{const De=Number(ae.quantity||0),We=Number(ae.amount||0),pt=Number(ae.vendorCommissionAmount||0);return ae.type==="CREDITO"?(ke.packsCredit+=De,ke.amountCredit+=We,ke.comCredit+=pt):(ke.packsCash+=De,ke.amountCash+=We,ke.comCash+=pt),ke},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),Ze={totalPacksCash:Rg(Me.packsCash),totalPacksCredit:Rg(Me.packsCredit),totalAmountCash:ja(Me.amountCash),totalAmountCredit:ja(Me.amountCredit),totalCommissionCash:ja(Me.comCash),totalCommissionCredit:ja(Me.comCredit)},Je=await Nn(At(je,"daily_closures_candies"),{date:A,createdAt:tr.now(),periodStart:m,periodEnd:g,totalCharged:fe.totalCharged,totalSuggested:fe.totalSuggested,totalDifference:oe,totalUnits:fe.totalUnits,totalCOGS:fe.totalCOGS,grossProfit:Be,...Ze,products:xe.map(ke=>({productName:ke.productName,quantity:ke.quantity,amount:ke.amount})),sales:xe.map(ke=>({id:ke.id,productName:ke.productName,quantity:ke.quantity,amount:ke.amount,amountSuggested:ke.amountSuggested,userEmail:ke.userEmail,clientName:ke.clientName,amountReceived:ke.amountReceived,change:ke.change,status:ke.status,cogsAmount:ke.cogsAmount??0,avgUnitCost:ke.avgUnitCost??null,allocations:ke.allocations??[],date:ke.date,type:ke.type??"CONTADO",vendorId:ke.vendorId??"",vendorCommissionAmount:Number(ke.vendorCommissionAmount??0)||0,processedDate:A})),productSummary:Object.entries(xe.reduce((ke,ae)=>{const De=ae.productName||"(sin nombre)";return ke[De]||(ke[De]={totalQuantity:0,totalAmount:0}),ke[De].totalQuantity=Rg(ke[De].totalQuantity+(ae.quantity||0)),ke[De].totalAmount=ja(ke[De].totalAmount+(ae.amount||0)),ke},{})).map(([ke,ae])=>({productName:ke,totalQuantity:ae.totalQuantity,totalAmount:ae.totalAmount}))}),nt=G0(je);xe.forEach(ke=>{nt.update($t(je,"sales_candies",ke.id.split("#")[0]),{status:"PROCESADA",closureId:Je.id,closureDate:A,processedDate:A,processedAt:tr.now()})}),await nt.commit(),d(` Cierre guardado. Ventas procesadas: ${xe.length}. (Proceso: ${A})`)}catch(xe){console.error(xe),d(" Error al guardar el cierre de dulces.")}},St=async xe=>{if(he&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Jr($t(je,"sales_candies",xe.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),d(" Venta revertida a FLOTANTE.")}catch(fe){console.error(fe),d(" No se pudo revertir la venta.")}},kt=xe=>{he&&(B(xe),_(xe.quantity),I(xe.amount),S(xe.clientName),D(xe.amountReceived),ge(xe.change))},et=async()=>{if(!(!w||!he))try{await Jr($t(je,"sales_candies",w.id.split("#")[0]),{packagesTotal:P,amount:E,amountCharged:E,clientName:O,amountReceived:j,change:J}),B(null),d(" Venta de dulces actualizada.")}catch(xe){console.error(xe),d(" No se pudo actualizar la venta de dulces.")}},ce=async xe=>{if(he&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:fe}=await wLe(xe.split("#")[0]);d(` Venta eliminada. Stock restaurado (unidades internas): ${Number(fe).toFixed(2)}.`)}catch(fe){console.error(fe),d(" No se pudo eliminar la venta de dulces.")}},Qe=async()=>{if(se.current){se.current.classList.add("force-pdf-colors"),se.current.classList.add("pdf-print-mode");try{const fe=(await q0(se.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),oe=new Br;oe.addImage(fe,"PNG",10,10,190,0),oe.save(`cierre_dulces_${m}_a_${g}_proc_${A}.pdf`)}finally{se.current.classList.remove("pdf-print-mode"),se.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",A]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Desde:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:xe=>p(xe.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Hasta:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:xe=>x(xe.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:xe=>h(xe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),he&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Vendedor:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:xe=>b(xe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),ve.map(xe=>o.jsx("option",{value:xe.id,children:xe.name||xe.id},xe.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),o.jsx("div",{className:"text-2xl font-bold",children:H}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),o.jsx("div",{className:"text-2xl font-bold",children:Q}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:V}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsx("div",{className:"text-2xl font-bold",children:Y}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",bo(Ie)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",bo(Re)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),ze.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ze.map(xe=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:xe.name}),o.jsxs("strong",{className:"ml-2",children:["C$",bo(xe.total)]})]},xe.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),st.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:st.map(xe=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:xe.name}),o.jsxs("strong",{className:"ml-2",children:["C$",bo(xe.total)]})]},xe.vendorId))})]})]}),l?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:se,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Fecha proceso"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[F.map(xe=>{const fe=k(xe),oe=(xe.processedDate||"").trim();return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})}),o.jsx("td",{className:"border p-1",children:xe.productName}),o.jsx("td",{className:"border p-1",children:xe.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:hm(xe.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",bo(xe.amount)]}),o.jsx("td",{className:"border p-1",children:fe>0?`C$${bo(fe)}`:""}),o.jsx("td",{className:"border p-1",children:xe.date}),o.jsx("td",{className:"border p-1",children:oe||""}),o.jsx("td",{className:"border p-1",children:xe.userEmail}),o.jsx("td",{className:"border p-1",children:xe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:he?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>kt(xe),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>ce(xe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):xe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:he?o.jsx("button",{onClick:()=>St(xe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},xe.id)}),F.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[F.map(xe=>{const fe=k(xe),oe=(xe.processedDate||"").trim();return o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:xe.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[xe.type==="CREDITO"?"Crdito":"Cash","  ",xe.date]})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",bo(xe.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${xe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("strong",{children:hm(xe.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:fe>0?`C$${bo(fe)}`:""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),o.jsx("strong",{children:oe||""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:xe.userEmail})]}),o.jsx("div",{className:"pt-2",children:xe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:he?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>kt(xe),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>ce(xe.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):xe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:he?o.jsx("button",{onClick:()=>St(xe.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},xe.id)}),F.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{children:["Total paquetes crdito: ",o.jsx("strong",{children:hm(M)})]}),o.jsxs("div",{children:["Total paquetes cash: ",o.jsx("strong",{children:hm(pe)})]}),o.jsxs("div",{children:["Total pendiente crdito:"," ",o.jsxs("strong",{children:["C$",bo(X)]})]}),o.jsxs("div",{children:["Total cobrado cash: ",o.jsxs("strong",{children:["C$",bo(G)]})]}),o.jsxs("div",{children:["Total comisin: ",o.jsxs("strong",{children:["C$",bo(ie)]})]})]}),(z>0||K!==le)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Costo total (COGS): ",o.jsxs("strong",{children:["C$",bo(z)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",bo(K)]})]}),o.jsxs("div",{children:["Total paquetes (visibles):"," ",o.jsx("strong",{children:hm(R)})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero"}),o.jsx("th",{className:"border p-2",children:"Comisin"})]})}),o.jsxs("tbody",{children:[_t.map(xe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:xe.productName}),o.jsx("td",{className:"border p-1",children:hm(xe.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",bo(xe.totalAmount)]}),o.jsx("td",{className:"border p-1",children:xe.totalCommission>0?`C$${bo(xe.totalCommission)}`:""})]},xe.productName)),_t.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[_t.map(xe=>o.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[o.jsx("div",{className:"font-semibold",children:xe.productName}),o.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),o.jsx("strong",{children:hm(xe.totalQuantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total dinero"}),o.jsxs("strong",{children:["C$",bo(xe.totalAmount)]})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:xe.totalCommission>0?`C$${bo(xe.totalCommission)}`:""})]})]})]},xe.productName)),_t.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[he&&o.jsx("button",{onClick:bt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),o.jsx("button",{onClick:Qe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),w&&he&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[w.productName,"  ",w.userEmail]}),o.jsx("label",{className:"text-sm",children:"Paquetes"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:P,onChange:xe=>_(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:xe=>I(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:O,onChange:xe=>S(xe.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:j,onChange:xe=>D(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:J,onChange:xe=>ge(xe.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>B(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:et,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Hf=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Ic=t=>Math.round((Number(t)||0)*100)/100;function tUe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function rUe(t){return t.toISOString().slice(0,10)}function nUe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function aUe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return rUe(r)}function sUe(){const[t,e]=v.useState(nUe()),[r,n]=v.useState(aUe()),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState({}),[d,f]=v.useState({}),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,B]=v.useState(null),[P,_]=v.useState(null),E=v.useMemo(()=>w&&h.find(se=>se.vendorId===w)||null,[w,h]),I=v.useMemo(()=>{var se;return!w||!P?[]:((se=g[w])==null?void 0:se[P])||[]},[w,P,g]),O=v.useMemo(()=>Ic(h.reduce((se,he)=>se+(he.totalSoldMoney||0),0)),[h]),S=v.useMemo(()=>Ic(h.reduce((se,he)=>se+(he.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const se=await Dt(At(je,"sellers_candies")),he={};se.forEach(ve=>{const Se=ve.data(),k=Se.branch||"Rivas";let F="RIVAS";k==="San Jorge"?F="SAN_JORGE":k==="Isla Ometepe"&&(F="ISLA"),he[ve.id]={id:ve.id,name:Se.name??"(sin nombre)",branch:F,branchLabel:k,commissionPercent:Number(Se.commissionPercent??0)}});const me=await Dt(At(je,"products_candies")),Z={};me.forEach(ve=>{const Se=ve.data();Z[ve.id]={id:ve.id,name:Se.name??"(sin nombre)"}}),u(he),f(Z)}catch(se){console.error(se),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const j=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const se={},he={},me=Wt(At(je,"inventory_candies_sellers"),sr("date",">=",t),sr("date","<=",r)),Z=await Dt(me),ve={},Se={},k={},F={};Z.forEach(Ie=>{var pt,ct;const Re=Ie.data(),ze=Re.sellerId||"";if(!ze)return;const st=Re.productId||"",lt=Re.productName||((pt=d[st])==null?void 0:pt.name)||"(sin nombre)",_t=Math.max(1,Math.floor(Number(Re.unitsPerPackage||1))),bt=Number(Re.totalUnits??0),St=Number(Re.packages??0),kt=Number(Re.remainingUnits??Re.remaining??0),et=Number(Re.remainingPackages??0),ce=St>0?St:bt>0?Math.floor(bt/_t):0,Qe=et>0?et:kt>0?Math.floor(kt/_t):0;ve[ze]=(ve[ze]||0)+ce,Se[ze]=(Se[ze]||0)+Qe;const xe=Re.orderId||Re.vendorOrderId||Re.orderNumber||Re.order||Ie.id;k[ze]||(k[ze]=new Set),k[ze].add(xe);const fe=((ct=c[ze])==null?void 0:ct.name)||Re.sellerName||"(sin vendedor)",oe=String(Re.date||""),Be=Number(Re.totalVendor??0),Me=Number(Re.gainVendor??0),Ze=St>0?St:bt>0?Math.floor(bt/_t):0,Je=Ze>0?Be/Ze:0,nt=Ze>0?Me/Ze:0,ke=Ic(ce*Je),ae=Ic(ce*nt),De=Ic(Qe*Je),We=Ic(Qe*nt);F[ze]||(F[ze]={ordered:[],remaining:[]}),ce>0&&F[ze].ordered.push({date:oe,vendorName:fe,productName:lt,packages:ce,totalMoney:ke,vendorCommission:ae}),Qe>0&&F[ze].remaining.push({date:oe,vendorName:fe,productName:lt,packages:Qe,totalMoney:De,vendorCommission:We})});const H={};Object.keys(k).forEach(Ie=>{H[Ie]=k[Ie].size});const Q=Wt(At(je,"sales_candies"),sr("date",">=",t),sr("date","<=",r)),V=await Dt(Q),Y={},R={},z={},le={},K={},M={};V.forEach(Ie=>{const Re=Ie.data(),ze=Re.date||"",st=Re.vendorId||Re.sellerId||"";if(!st)return;const lt=c[st],_t=Re.vendorName||(lt==null?void 0:lt.name)||"(sin vendedor)",bt=Number(Re.vendorCommissionPercent??(lt==null?void 0:lt.commissionPercent)??0)||0,St=Array.isArray(Re.items)?Re.items:[];if(!St.length)return;const kt=String(Re.type||"").toUpperCase()==="CREDITO";K[st]||(K[st]={sold:[],credit:[]}),St.forEach(et=>{var ke;const ce=et.productName||((ke=d[et.productId||""])==null?void 0:ke.name)||"(sin nombre)",Qe=et.packages??et.qty??et.quantity??0,xe=Number(Qe||0);if(xe<=0)return;const fe=Number(et.unitPricePackage??et.unitPrice??0)||0,oe=Math.max(0,Number(et.discount||0)),Be=xe*fe,Me=Ic(Math.max(0,Be-oe));if(Me<=0)return;console.log("DBG",{isCredit:kt,vendorId:st,commissionPercent:bt,lineFinal:Me,storedItemCommission:Number(et.vendorCommissionAmount??0)});let Ze=0;const Je=Number(et.vendorCommissionAmount??0);Je?Ze=Ic(Je):bt>0&&(Ze=Ic(Me*bt/100)),kt?(R[st]=(R[st]||0)+xe,le[st]=(le[st]||0)+Me):(Y[st]=(Y[st]||0)+xe,z[st]=(z[st]||0)+Me),kt?he[st]=(he[st]||0)+Ze:se[st]=(se[st]||0)+Ze,kt?K[st].credit.push({date:ze,vendorName:_t,productName:ce,packages:xe,totalMoney:Me,vendorCommission:0}):K[st].sold.push({date:ze,vendorName:_t,productName:ce,packages:xe,totalMoney:Me,vendorCommission:Ze});const nt=ce;M[nt]||(M[nt]={productName:ce,packages:0,totalMoney:0}),M[nt].packages+=xe,M[nt].totalMoney+=Me})});const pe=new Set([...Object.keys(ve),...Object.keys(Se),...Object.keys(Y),...Object.keys(R)]),X=[],G={};pe.forEach(Ie=>{var Qe,xe,fe,oe;const Re=c[Ie],ze=(Re==null?void 0:Re.name)||"(sin vendedor)",st=Re?Re.branchLabel||tUe(Re.branch):"",lt=ve[Ie]||0,_t=Se[Ie]||0,bt=Y[Ie]||0,St=R[Ie]||0,kt=Ic(z[Ie]||0),et=Ic(le[Ie]||0),ce=H[Ie]||0;X.push({vendorId:Ie,vendorName:ze,branchLabel:st,orderedPackages:lt,remainingPackages:_t,soldPackages:bt,creditPackages:St,totalSoldMoney:kt,totalCreditMoney:et,ordersCreated:ce,commissionCash:Ic(se[Ie]||0),commissionCredit:0}),G[Ie]={ordered:(((Qe=F[Ie])==null?void 0:Qe.ordered)||[]).sort((Be,Me)=>Be.date.localeCompare(Me.date)),remaining:(((xe=F[Ie])==null?void 0:xe.remaining)||[]).sort((Be,Me)=>Be.date.localeCompare(Me.date)),sold:(((fe=K[Ie])==null?void 0:fe.sold)||[]).sort((Be,Me)=>Be.date.localeCompare(Me.date)),credit:(((oe=K[Ie])==null?void 0:oe.credit)||[]).sort((Be,Me)=>Be.date.localeCompare(Me.date))}}),X.sort((Ie,Re)=>Ie.vendorName.localeCompare(Re.vendorName,"es")),A(X),x(G);const ie=Object.values(M).map(Ie=>({productName:Ie.productName,packages:Ie.packages,totalMoney:Ic(Ie.totalMoney)})).sort((Ie,Re)=>Re.packages-Ie.packages).slice(0,10);p(ie),X.length||l("Sin datos para el rango seleccionado.")}catch(se){console.error(se),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&j()},[c]);const D=(se,he)=>{B(se),_(he),b(!0)},J=()=>{b(!1),B(null),_(null)},ge=()=>{if(!h.length){l("No hay datos para exportar.");return}const se=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],he=h.map(k=>[k.vendorName,k.branchLabel,k.orderedPackages.toString(),k.remainingPackages.toString(),k.soldPackages.toString(),k.creditPackages.toString(),k.totalSoldMoney.toFixed(2),k.commissionCash.toFixed(2),k.totalCreditMoney.toFixed(2),k.commissionCredit.toFixed(2),k.ordersCreated.toString()]),me=[se,...he].map(k=>k.map(F=>`"${String(F).replace(/"/g,'""')}"`).join(",")).join(`
`),Z=new Blob([me],{type:"text/csv;charset=utf-8;"}),ve=URL.createObjectURL(Z),Se=document.createElement("a");Se.href=ve,Se.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Se.click(),URL.revokeObjectURL(ve)};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:se=>e(se.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:se=>n(se.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:ge,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Hf(O)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),o.jsx("div",{className:"text-xl font-semibold",children:Hf(S)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),o.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),o.jsx("div",{className:"overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),o.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),o.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),o.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),o.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),o.jsxs("tbody",{children:[h.map(se=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:se.vendorName}),o.jsx("td",{className:"border p-1",children:se.branchLabel}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(se.vendorId,"ordered"),children:se.orderedPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(se.vendorId,"remaining"),children:se.remainingPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(se.vendorId,"sold"),children:se.soldPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(se.vendorId,"credit"),children:se.creditPackages})}),o.jsx("td",{className:"border p-1",children:Hf(se.totalSoldMoney)}),o.jsx("td",{className:"border p-1",children:Hf(se.commissionCash)}),o.jsx("td",{className:"border p-1",children:Hf(se.totalCreditMoney)}),o.jsx("td",{className:"border p-1",children:Hf(se.commissionCredit)}),o.jsx("td",{className:"border p-1",children:se.ordersCreated})]},se.vendorId)),h.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"#"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),o.jsxs("tbody",{children:[m.map((se,he)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:he+1}),o.jsx("td",{className:"border p-1",children:se.productName}),o.jsx("td",{className:"border p-1",children:se.packages}),o.jsx("td",{className:"border p-1",children:Hf(se.totalMoney)})]},se.productName)),m.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&o.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&P&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",P==="ordered"?"Paquetes ordenados":P==="remaining"?"Paquetes restantes":P==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[E==null?void 0:E.vendorName,"  ",E==null?void 0:E.branchLabel]})]}),o.jsx("button",{onClick:J,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("table",{className:"min-w-full border text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),o.jsxs("tbody",{children:[I.map((se,he)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:se.date}),o.jsx("td",{className:"border p-1",children:se.productName}),o.jsx("td",{className:"border p-1",children:se.packages}),o.jsx("td",{className:"border p-1",children:Hf(se.totalMoney)}),o.jsx("td",{className:"border p-1",children:se.vendorName}),o.jsx("td",{className:"border p-1",children:Hf(se.vendorCommission)})]},he)),I.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const el=t=>`C$${Number(t||0).toFixed(2)}`,NC=t=>Number(t||0).toFixed(3),sP=()=>{const t=new Date;return wr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},CC=()=>wr(new Date,"yyyy-MM-dd");function iUe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const ae={};return a.forEach(De=>{De.email&&(ae[De.email.trim().toLowerCase()]=De)}),ae},[a]);v.useEffect(()=>{(async()=>{try{const ae=Wt(At(je,"sellers_candies"),ln("name","asc")),De=await Dt(ae),We=[];De.forEach(pt=>{const ct=pt.data();We.push({id:pt.id,name:ct.name||"",email:ct.email||"",commissionPercent:Number(ct.commissionPercent||0)})}),s(We)}catch(ae){console.error(ae)}})()},[]);const[l,c]=v.useState(sP()),[u,d]=v.useState(CC()),[f,h]=v.useState(""),[A,m]=v.useState(""),p=v.useMemo(()=>{const ae=new Map;return n.forEach(De=>{const We=De.productId||De.productName;ae.set(We,{key:We,name:De.productName})}),Array.from(ae.values()).sort((De,We)=>De.name.localeCompare(We.name))},[n]),g=v.useMemo(()=>{const ae=new Map;return n.forEach(De=>{const We=(De.sellerEmail||"").trim().toLowerCase();if(!We)return;const pt=i[We],ct=(pt==null?void 0:pt.name)||De.vendorName||We;ae.set(We,{email:We,label:ct})}),Array.from(ae.values()).sort((De,We)=>De.label.localeCompare(We.label))},[n,i]),x=v.useMemo(()=>n.filter(ae=>!(l&&ae.date<l||u&&ae.date>u||f&&(ae.productId||ae.productName)!==f||A&&(ae.sellerEmail||"").trim().toLowerCase()!==A)),[n,l,u,f,A]),[y,b]=v.useState(CC()),[w,B]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[P,_]=v.useState(""),[E,I]=v.useState("0"),[O,S]=v.useState(()=>x.map(ae=>ae.id));v.useEffect(()=>{S(ae=>ae.filter(De=>x.some(We=>We.id===De)))},[x]);const[j,D]=v.useState([]),[J,ge]=v.useState([]),[se,he]=v.useState(!1),[me,Z]=v.useState(sP()),[ve,Se]=v.useState(CC());v.useEffect(()=>{(async()=>{try{he(!0);const ae=Wt(At(je,"expensesCandies"),ln("date","desc")),De=await Dt(ae),We=[];De.forEach(pt=>{const ct=pt.data();We.push({id:pt.id,date:ct.date,description:ct.description,amount:Number(ct.amount||0)})}),D(We)}catch(ae){console.error(ae)}finally{he(!1)}})()},[]);const k=v.useMemo(()=>j.filter(ae=>!(!ae.date||me&&ae.date<me||ve&&ae.date>ve)),[j,me,ve]),[F,H]=v.useState([]),[Q,V]=v.useState(!1),[Y,R]=v.useState(""),[z,le]=v.useState("DEBITO"),[K,M]=v.useState(""),pe=()=>{const ae=Number(K);!Y.trim()||!isFinite(ae)||ae<=0||(H(De=>[...De,{id:`${Date.now()}_${De.length+1}`,description:Y.trim(),type:z,amount:Number(ae.toFixed(2))}]),R(""),M(""))},[X,G]=v.useState(null),[ie,Ie]=v.useState(""),[Re,ze]=v.useState("DEBITO"),[st,lt]=v.useState(""),_t=ae=>{G(ae.id),Ie(ae.description),ze(ae.type),lt(ae.amount.toFixed(2))},bt=()=>{G(null),Ie(""),ze("DEBITO"),lt("")},St=()=>{if(!X)return;const ae=Number(st);!isFinite(ae)||ae<=0||(H(De=>De.map(We=>We.id===X?{...We,description:ie.trim(),type:Re,amount:Number(ae.toFixed(2))}:We)),bt())},kt=ae=>{H(De=>De.filter(We=>We.id!==ae)),X===ae&&bt()},et=(ae,De)=>{S(We=>De?[...new Set([...We,ae])]:We.filter(pt=>pt!==ae))},ce=ae=>{S(ae?x.map(De=>De.id):[])},Qe=(ae,De)=>{ge(We=>De?[...new Set([...We,ae])]:We.filter(pt=>pt!==ae))},xe=v.useMemo(()=>x.filter(ae=>O.includes(ae.id)),[x,O]),fe=v.useMemo(()=>F.filter(ae=>ae.type==="DEBITO").reduce((ae,De)=>ae+De.amount,0),[F]),oe=v.useMemo(()=>F.filter(ae=>ae.type==="CREDITO").reduce((ae,De)=>ae+De.amount,0),[F]),Be=v.useMemo(()=>{let ae=0,De=0,We=0,pt=0;for(const we of xe){const Ue=Number(we.packages||0),te=Number(we.cogsAmount||0),Ce=Number(we.amount||0);ae+=Ue,De+=te,We+=Ce;const $e=(we.sellerEmail||"").trim().toLowerCase(),He=i[$e],Ye=Number((He==null?void 0:He.commissionPercent)||0),mt=Ce*Ye/100;pt+=mt}const ct=k.filter(we=>J.includes(we.id)).reduce((we,Ue)=>we+Number(Ue.amount||0),0),Xe=We-De,Rt=We-ct-fe+oe-pt,er=Number(E||0),L=We*er/100;return{totalPackages:Number(NC(ae)),totalProvider:Number(De.toFixed(2)),totalSale:Number(We.toFixed(2)),totalGastos:Number(ct.toFixed(2)),debits:Number(fe.toFixed(2)),credits:Number(oe.toFixed(2)),grossProfit:Number(Xe.toFixed(2)),finalAmount:Number(Rt.toFixed(2)),totalCommissionVendors:Number(pt.toFixed(2)),branchProfit:Number(L.toFixed(2)),branchFactor:er}},[xe,k,J,fe,oe,i,E]),[Me,Ze]=v.useState(!1),[Je,nt]=v.useState(""),ke=async()=>{if(nt(""),xe.length===0){nt("Selecciona al menos 1 transaccin procesada.");return}try{Ze(!0);const ae={number:w.trim(),date:y,description:P.trim(),status:"PENDIENTE",createdAt:tr.now(),totalPackages:Be.totalPackages,totalProvider:Be.totalProvider,totalSale:Be.totalSale,totalExpenses:Be.totalGastos,totalDebits:Be.debits,totalCredits:Be.credits,grossProfit:Be.grossProfit,totalCommissionVendors:Be.totalCommissionVendors,branchFactorPercent:Be.branchFactor,branchProfit:Be.branchProfit,finalAmount:Be.finalAmount,transactions:xe.map(De=>{const We=Number(De.packages||0)||1,pt=Number(De.cogsAmount||0),ct=Number(De.amount||0),Xe=pt/We,Rt=ct/We,er=(De.sellerEmail||"").trim().toLowerCase(),L=i[er],we=Number((L==null?void 0:L.commissionPercent)||0),Ue=ct*we/100;return{id:De.id,date:De.date,productId:De.productId||null,productName:De.productName,vendorName:De.vendorName,sellerEmail:De.sellerEmail||null,packages:Number(NC(De.packages)),providerPricePack:Number(Xe.toFixed(4)),salePricePack:Number(Rt.toFixed(4)),totalProvider:Number(pt.toFixed(2)),totalSale:Number(ct.toFixed(2)),commissionPercent:we,commissionAmount:Number(Ue.toFixed(2))}}),expenses:k.filter(De=>J.includes(De.id)).map(De=>({id:De.id,date:De.date||null,description:De.description||"",amount:Number(Number(De.amount||0).toFixed(2))})),adjustments:F.map(De=>({id:De.id,description:De.description,type:De.type,amount:Number(De.amount.toFixed(2))}))};await Nn(At(je,"invoicesCandies"),ae),nt(" Factura de dulces creada."),r()}catch(ae){console.error(ae),nt(` Error al crear factura: ${(ae==null?void 0:ae.message)||"desconocido"}`)}finally{Ze(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:ae=>b(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:ae=>B(ae.target.value),placeholder:"FAC-CANDY-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:ae=>I(ae.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:ae=>_(ae.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:ae=>c(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ae=>d(ae.target.value)})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:ae=>h(ae.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),p.map(ae=>o.jsx("option",{value:ae.key,children:ae.name},ae.key))]})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:ae=>m(ae.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),g.map(ae=>o.jsx("option",{value:ae.email,children:ae.label},ae.email))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(sP()),d(CC()),h(""),m("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:x.length>0&&O.length===x.length,onChange:ae=>ce(ae.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border",children:"Total venta"}),o.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),o.jsx("tbody",{children:x.map(ae=>{const De=O.includes(ae.id),We=Number(ae.packages||0)||1,pt=Number(ae.cogsAmount||0),ct=Number(ae.amount||0),Xe=pt/We,Rt=ct/We,er=(ae.sellerEmail||"").trim().toLowerCase(),L=i[er],we=Number((L==null?void 0:L.commissionPercent)||0),Ue=ct*we/100;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:De,onChange:te=>et(ae.id,te.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ae.date}),o.jsx("td",{className:"p-2 border",children:(L==null?void 0:L.name)||ae.vendorName}),o.jsx("td",{className:"p-2 border",children:ae.productName}),o.jsx("td",{className:"p-2 border",children:NC(ae.packages)}),o.jsx("td",{className:"p-2 border",children:el(Xe)}),o.jsx("td",{className:"p-2 border",children:el(Rt)}),o.jsx("td",{className:"p-2 border",children:el(pt)}),o.jsx("td",{className:"p-2 border",children:el(ct)}),o.jsx("td",{className:"p-2 border",children:we>0?`${el(Ue)} (${we.toFixed(2)}%)`:""})]},ae.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),se&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:me,onChange:ae=>Z(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ve,onChange:ae=>Se(ae.target.value)})]})]})]}),k.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:k.map(ae=>{const De=J.includes(ae.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:De,onChange:We=>Qe(ae.id,We.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ae.date||""}),o.jsx("td",{className:"p-2 border",children:ae.description||""}),o.jsx("td",{className:"p-2 border",children:el(Number(ae.amount||0))})]},ae.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>V(!0),children:"Crear Cargo"})]}),F.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F.map(ae=>{const De=X===ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:De?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:ie,onChange:We=>Ie(We.target.value)}):o.jsx("span",{title:ae.description,children:ae.description.length>60?`${ae.description.slice(0,60)}`:ae.description})}),o.jsx("td",{className:"p-2 border",children:De?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Re,onChange:We=>ze(We.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ae.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ae.type})}),o.jsx("td",{className:"p-2 border",children:De?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:st,onChange:We=>lt(We.target.value)}):el(ae.amount)}),o.jsx("td",{className:"p-2 border",children:De?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:St,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:bt,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>kt(ae.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>_t(ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>kt(ae.id),children:"Eliminar"})]})})]},ae.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsx("div",{className:"space-y-1",children:o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:NC(Be.totalPackages)})]})}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total proveedor (costo):"," ",o.jsx("strong",{children:el(Be.totalProvider)})]}),o.jsxs("div",{children:["Total venta: ",o.jsx("strong",{children:el(Be.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",o.jsx("strong",{children:el(Be.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:el(Be.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:el(Be.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:el(Be.credits)})]}),o.jsxs("div",{children:["Comisin total vendedores:"," ",o.jsx("strong",{children:el(Be.totalCommissionVendors)})]}),o.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",o.jsx("strong",{children:el(Be.branchProfit)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",o.jsx("span",{className:"text-blue-700",children:el(Be.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:Me,onClick:ke,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Me?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Je&&o.jsx("span",{className:"text-sm ml-2",children:Je})]}),Me&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),Q&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>V(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:Y,onChange:ae=>R(ae.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:z,onChange:ae=>le(ae.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:K,onChange:ae=>M(ae.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:pe,children:"Agregar"})})]})]})})]})}const da=t=>`C$ ${Number(t??0).toFixed(2)}`,_C=t=>Number(t??0).toFixed(3);function iP(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,A=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((A*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:h,grossProfit:A,branchProfit:p,finalAmount:g}}function MH(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function oUe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const A=Wt(At(je,"invoicesCandies"),ln("date","desc")),m=await Dt(A),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async A=>{const m=A.status==="PAGADA"?"PENDIENTE":"PAGADA";await Jr($t(je,"invoicesCandies",A.id),{status:m}),e(p=>p.map(g=>g.id===A.id?{...g,status:m}:g)),(a==null?void 0:a.id)===A.id&&s({...A,status:m})},f=async A=>{if(window.confirm(`Eliminar factura del ${A.date}?`))try{await Qn($t(je,"invoicesCandies",A.id)),e(m=>m.filter(p=>p.id!==A.id)),(a==null?void 0:a.id)===A.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const A=i.current,m=await q0(A,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(B=>{const P=b.defaultView.getComputedStyle(B);P.boxShadow&&P.boxShadow!=="none"&&(B.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Br("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),o.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&o.jsx(iUe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(A=>{const m=iP(A),p=MH(A);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.number||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.commissionTotal)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:_C(m.totalPackages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.totalSale)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.expenses)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.debits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.credits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.finalAmount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:A.status})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(A),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(A),children:A.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(A),children:"Eliminar"})]})})]},A.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const A=iP(a),m=MH(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",_C(A.totalPackages)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",da(A.totalProvider)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",da(A.totalSale)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",da(A.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",da(A.commissionTotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",da(A.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",da(A.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",da(A.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),o.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.productName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:_C(A.packages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.providerPricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.salePricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.totalProvider)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.totalSale)}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[da(A.commissionAmount||0),A.commissionPercent?` (${A.commissionPercent.toFixed(2)}%)`:""]})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.amount)})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A.type})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(A.amount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const A=iP(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:_C(A.totalPackages)})]}),o.jsxs("div",{children:["Total proveedor: ",o.jsx("strong",{children:da(A.totalProvider)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Sub total ventas: ",o.jsx("strong",{children:da(A.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta: ",o.jsx("strong",{children:da(A.grossProfit)})]}),o.jsxs("div",{children:["Ganancia sucursal: ",o.jsx("strong",{children:da(A.branchProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Comisin vendedores:"," ",o.jsx("strong",{children:da(A.commissionTotal)})]}),o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:da(A.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:da(A.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:da(A.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:da(A.finalAmount)})]})})]})})()]})]})}const as=t=>Math.round((Number(t)||0)*100)/100,Ih=t=>Math.round((Number(t)||0)*1e3)/1e3,wi=t=>Number(t??0).toFixed(2),$f=t=>Number(t??0).toFixed(3),lUe=(t,e)=>{var h,A;const r=t.date??((h=t.timestamp)!=null&&h.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=as(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:as(x),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:y}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=as(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:((A=String(t))==null?void 0:A.productName)??"(sin nombre)",quantity:u,amount:as(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:f}]};function cUe({role:t}){const e=!t||t==="admin",r="daily_closures_candies",n="sales_candies",a="sellers_candies",[s,i]=v.useState(wr(WJ(new Date),"yyyy-MM-dd")),[l,c]=v.useState(wr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(!0),[f,h]=v.useState([]),[A,m]=v.useState(null),[p,g]=v.useState(""),[x,y]=v.useState([]),[b,w]=v.useState("ALL"),[B,P]=v.useState({}),_=v.useRef(null);if(!e)return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),o.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const E=async()=>{try{const F=await Dt(At(je,a)),H=[];F.forEach(Q=>{const V=Q.data();H.push({id:Q.id,name:V.name||"",commissionPercent:Number(V.commissionPercent||0)})}),y(H)}catch(F){console.error("Error cargando sellers_candies",F)}},I=async()=>{const F=performance.now();try{d(!0);const H=Wt(At(je,r),sr("date",">=",s),sr("date","<=",l)),Q=await Dt(H),V=performance.now();console.log(" getDocs ms:",(V-F).toFixed(1),"docs:",Q.size);const Y=[];Q.forEach(K=>Y.push({id:K.id,...K.data()}));const R=performance.now();console.log(" parse+set ms:",(R-V).toFixed(1),"rows:",Y.length),Y.sort((K,M)=>K.date<M.date?1:K.date>M.date?-1:0),h(Y),m(null);const z=new Set;Y.forEach(K=>{(K.sales||[]).forEach(M=>{const pe=String((M==null?void 0:M.id)??"").split("#")[0].trim();pe&&z.add(pe)})});const le=Array.from(z).filter(K=>!B[K]);if(le.length>0){const K={};for(const M of le)try{const pe=await Li($t(je,n,M));if(pe.exists()){const X=pe.data();K[M]=lUe(X,M)}else K[M]=[]}catch(pe){console.error("Error leyendo sale",M,pe),K[M]=[]}P(M=>({...M,...K}))}}catch(H){console.error(H),g(" Error cargando liquidaciones.")}finally{d(!1)}};v.useEffect(()=>{E()},[]),v.useEffect(()=>{I()},[]);const O=async F=>{F.preventDefault(),await I()},S=v.useMemo(()=>{const F={};return x.forEach(H=>F[H.id]=H.name||H.id),F},[x]),j=F=>{const H=[];return(F.sales||[]).forEach(Q=>{const V=String((Q==null?void 0:Q.id)??"").trim();if(!V)return;const Y=V.split("#")[0],z=(B[Y]||[]).find(le=>le.id===V);z?H.push(z):H.push({id:V,productName:String((Q==null?void 0:Q.productName)??"(sin nombre)"),quantity:Number((Q==null?void 0:Q.quantity)??0),amount:as(Number((Q==null?void 0:Q.amount)??0)),date:String((Q==null?void 0:Q.date)??""),type:"CONTADO",vendorId:"",userEmail:String((Q==null?void 0:Q.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),H},D=F=>b==="ALL"?F:F.filter(H=>(H.vendorId||"")===b),J=v.useMemo(()=>f.map(F=>{const H=D(j(F));let Q=0,V=0,Y=0,R=0,z=0,le=0;for(const K of H){const M=Number(K.quantity||0),pe=Number(K.amount||0),X=Number(K.vendorCommissionAmount||0);K.type==="CREDITO"?(V+=M,R+=pe,le+=X):(Q+=M,Y+=pe,z+=X)}return{...F,_sales:H,_packsCash:Ih(Q),_packsCredit:Ih(V),_amountCash:as(Y),_amountCredit:as(R),_comCash:as(z),_comCredit:as(le)}}),[f,B,b]),ge=v.useMemo(()=>{let F=0,H=0,Q=0,V=0,Y=0,R=0;for(const z of J)F+=Number(z._packsCash||0),H+=Number(z._packsCredit||0),Q+=Number(z._amountCash||0),V+=Number(z._amountCredit||0),Y+=Number(z._comCash||0),R+=Number(z._comCredit||0);return{packsCash:Ih(F),packsCredit:Ih(H),totalSales:as(Q+V),amountCash:as(Q),amountCredit:as(V),comCash:as(Y),comCredit:as(R)}},[J]),se=v.useMemo(()=>{const F={},H={};for(const Q of J){const V=Q._sales||[];for(const Y of V){const R=(Y.vendorId||"").trim();if(!R)continue;const z=S[R]||Y.userEmail||R,le=as(Number(Y.vendorCommissionAmount||0));Y.type==="CREDITO"?(H[R]||(H[R]={vendorId:R,name:z,total:0}),H[R].total=as(H[R].total+le)):(F[R]||(F[R]={vendorId:R,name:z,total:0}),F[R].total=as(F[R].total+le))}}return{cashRows:Object.values(F).filter(Q=>Q.total>0).sort((Q,V)=>V.total-Q.total),creditRows:Object.values(H).filter(Q=>Q.total>0).sort((Q,V)=>V.total-Q.total)}},[J,S]),he=v.useMemo(()=>x.map(F=>({id:F.id,label:F.name||F.id})).sort((F,H)=>F.label.localeCompare(H.label)),[x]),me=v.useMemo(()=>A&&J.find(F=>F.id===A.id)||null,[A,J]),Z=v.useMemo(()=>me?me._sales||[]:[],[me]),ve=v.useMemo(()=>{let F=0,H=0,Q=0,V=0;for(const Y of Z)Y.type==="CREDITO"?(H+=Number(Y.quantity||0),V+=Number(Y.amount||0)):(F+=Number(Y.quantity||0),Q+=Number(Y.amount||0));return{packsCash:Ih(F),packsCredit:Ih(H),amountCash:as(Q),amountCredit:as(V)}},[Z]),Se=v.useMemo(()=>{const F={};for(const H of Z){const Q=H.productName||"(sin nombre)";F[Q]||(F[Q]={productName:Q,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const V=Number(H.quantity||0),Y=Number(H.amount||0),R=Number(H.vendorCommissionAmount||0);H.type==="CREDITO"?(F[Q].packsCredit=Ih(F[Q].packsCredit+V),F[Q].amountCredit=as(F[Q].amountCredit+Y),F[Q].comCredit=as(F[Q].comCredit+R)):(F[Q].packsCash=Ih(F[Q].packsCash+V),F[Q].amountCash=as(F[Q].amountCash+Y),F[Q].comCash=as(F[Q].comCash+R))}return Object.values(F)},[Z]),k=async()=>{if(!_.current||!me)return;const F=_.current;F.classList.add("force-pdf-colors");try{const Q=(await q0(F,{backgroundColor:"#ffffff"})).toDataURL("image/png"),V=new Br;V.addImage(Q,"PNG",10,10,190,0),V.save(`liquidacion_${me.date}.pdf`)}finally{F.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),o.jsxs("form",{onSubmit:O,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:F=>i(F.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:F=>c(F.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:b,onChange:F=>w(F.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),he.map(F=>o.jsx("option",{value:F.id,children:F.label},F.id))]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-2xl font-bold",children:$f(ge.packsCash)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:$f(ge.packsCredit)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ge.totalSales)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ge.amountCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ge.amountCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ge.comCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ge.comCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),se.cashRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:se.cashRows.map(F=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:F.name}),o.jsxs("strong",{className:"ml-2",children:["C$",wi(F.total)]})]},F.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),se.creditRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:se.creditRows.map(F=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:F.name}),o.jsxs("strong",{className:"ml-2",children:["C$",wi(F.total)]})]},F.vendorId))})]})]}),u?o.jsx("p",{children:"Cargando..."}):J.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsx("tbody",{children:J.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:F.date}),o.jsx("td",{className:"border p-1",children:$f(F._packsCash)}),o.jsx("td",{className:"border p-1",children:$f(F._packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._comCredit)]}),o.jsx("td",{className:"border p-1",children:o.jsx("div",{className:"flex items-center gap-2 justify-center",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>m(F),children:"Ver detalle"})})})]},F.id))})]}),me&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",me.date]}),o.jsx("button",{onClick:()=>m(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:k,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:_,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[o.jsxs("div",{children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",wi(ve.amountCash)]})]}),o.jsxs("div",{children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",wi(ve.amountCredit)]})]}),o.jsxs("div",{children:["Total paquetes cash:"," ",o.jsx("strong",{children:$f(ve.packsCash)})]}),o.jsxs("div",{children:["Total paquetes crdito:"," ",o.jsx("strong",{children:$f(ve.packsCredit)})]})]}),o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),Z.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsx("tbody",{children:Z.map((F,H)=>{const Q=F.vendorId&&S[F.vendorId]?S[F.vendorId]:F.userEmail,V=as(Number(F.vendorCommissionAmount||0));return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:Q}),o.jsx("td",{className:"border p-1",children:F.productName}),o.jsx("td",{className:"border p-1",children:F.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:$f(F.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amount)]}),o.jsx("td",{className:"border p-1",children:V>0?`C$${wi(V)}`:""}),o.jsx("td",{className:"border p-1",children:F.date||""})]},H)})})]}),o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),Se.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsx("tbody",{children:Se.map((F,H)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:F.productName}),o.jsx("td",{className:"border p-1",children:$f(F.packsCash)}),o.jsx("td",{className:"border p-1",children:$f(F.packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.comCredit)]})]},H))})]})]})]}),p&&o.jsx("p",{className:"mt-3 text-sm",children:p})]})}const Er=t=>Math.round((Number(t)||0)*100)/100,wo=t=>Math.round((Number(t)||0)*1e3)/1e3,Ar=t=>Number(t??0).toFixed(2),ws=t=>Number(t??0).toFixed(3),cS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},Cr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},uUe=t=>Math.max(0,Math.min(1,t));function LH({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,h=f-d||1,A=840,m=204,p=e.map((b,w)=>{const B=44+(e.length<=1?A/2:w/(e.length-1)*A),P=18+(1-(Number(b.value||0)-d)/h)*m;return{x:B,y:P,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),o.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",o.jsx("strong",{children:r+Ar(y)})]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return o.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),o.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,Ar(f)]}),o.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,Ar(d)]}),o.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>o.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),o.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function dUe({title:t,items:e}){const r=e.reduce((f,h)=>f+Number(h.value||0),0),n=240,a=86,s=120,i=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,h)=>{const A=Math.max(0,Number(f.value||0)),m=c/l,p=A/l;c+=A;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),B=s+a*Math.cos(y),P=i+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${B.toFixed(2)} ${P.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...f,frac:p}});return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:o.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,h)=>o.jsx("path",{d:f.d,fill:f.fill},h)),o.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),o.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",Ar(r)]})]})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,h)=>{const A=Number(f.value||0),m=uUe(A/(r||1))*100;return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ar(A)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),o.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:o.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},f.label)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const fUe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,h=cS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),B=cS(x==null?void 0:x.branch)||h;let P=0;return f>0&&d>0&&w>0&&(P=Er(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:B||"",packages:b,amount:Er(w),commission:Er(P)}});const A=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Er(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:h||"",packages:A,amount:Er(m),commission:Er(p)}]};function AUe({role:t}){var er;const e=!t||t==="admin",r=wr(new Date,"yyyy-MM-dd"),[n,a]=v.useState(r),[s,i]=v.useState(r),[l,c]=v.useState("TODAS"),[u,d]=v.useState("AMBAS"),[f,h]=v.useState("ALL"),[A,m]=v.useState("ALL"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(""),[B,P]=v.useState(""),[_,E]=v.useState("DIA"),[I,O]=v.useState(!0),[S,j]=v.useState(""),[D,J]=v.useState([]),[ge,se]=v.useState([]),[he,me]=v.useState([]),[Z,ve]=v.useState([]),[Se,k]=v.useState([]),[F,H]=v.useState([]),[Q,V]=v.useState([]),[Y,R]=v.useState([]),[z,le]=v.useState([]),[K,M]=v.useState(""),[pe,X]=v.useState(""),G=v.useRef(null),[ie,Ie]=v.useState([]),[Re,ze]=v.useState("DETALLE"),st=v.useMemo(()=>{const L={};return Se.forEach(we=>L[we.id]=String(we.name||"").trim()),L},[Se]),lt=v.useMemo(()=>{const L={};return ge.forEach(we=>L[we.id]=we),L},[ge]),_t=L=>{const we=L.customerId?st[L.customerId]:"";return(L.customerName||we||"").trim()||(L.customerId?st[L.customerId]||L.customerId:"")||""};v.useEffect(()=>{if(!e)return;(async()=>{try{const we=await Dt(At(je,"inventory_candies")),Ue=[];we.forEach(te=>Ue.push({id:te.id,...te.data()})),Ie(Ue)}catch(we){console.error("inventory_candies all error:",we),Ie([])}})()},[e]),v.useEffect(()=>{(async()=>{try{const we=await Dt(At(je,"sellers_candies")),Ue=[];we.forEach(Ce=>{const $e=Ce.data();Ue.push({id:Ce.id,name:String($e.name||"").trim(),commissionPercent:Number($e.commissionPercent||0),branch:$e.branch||""})});const te=new Map;Ue.forEach(Ce=>te.set(Ce.id,Ce)),se(Array.from(te.values()).sort((Ce,$e)=>Ce.name.localeCompare($e.name)))}catch(we){console.error(we)}})()},[]),v.useEffect(()=>{if(!e||!n||!s)return;O(!0),j("");const L=Wt(At(je,"sales_candies"),sr("date",">=",n),sr("date","<=",s),ln("date","asc")),we=Ed(L,Ue=>{const te=[];Ue.forEach(Ce=>te.push(...fUe(Ce.data(),Ce.id))),J(te),O(!1)},Ue=>{console.error("sales_candies periodo error:",Ue),J([]),O(!1),j(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>we()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=Wt(At(je,"candy_main_orders"),sr("date",">=",n),sr("date","<=",s)),Ue=await Dt(we),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),me(te)}catch(we){console.error("candy_main_orders error:",we),me([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=Wt(At(je,"inventory_candies_sellers"),sr("date",">=",n),sr("date","<=",s)),Ue=await Dt(we),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),ve(te)}catch(we){console.error("inventory_candies_sellers error:",we),ve([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=Wt(At(je,"expenses_candies"),sr("date",">=",n),sr("date","<=",s),ln("date","asc")),Ue=await Dt(we),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),V(te)}catch(we){console.warn("expenses_candies sin ndice, usando fallback:",we);try{const Ue=await Dt(At(je,"expenses_candies")),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),V(te.filter(Ce=>String(Ce.date||"")>=n&&String(Ce.date||"")<=s))}catch(Ue){console.error(Ue),V([])}}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=await Dt(At(je,"inventory_candies")),Ue=[];we.forEach(te=>Ue.push({id:te.id,...te.data()})),R(Ue)}catch(we){console.error("inventory_candies global error:",we),R([])}})()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=await Dt(At(je,"inventory_candies_sellers")),Ue=[];we.forEach(te=>Ue.push({id:te.id,...te.data()})),le(Ue)}catch(we){console.error("inventory_candies_sellers global error:",we),le([])}})()},[e]),v.useEffect(()=>{if(!e)return;const L=Wt(At(je,"customers_candies")),we=Ed(L,Ue=>{const te=[];Ue.forEach(Ce=>{var $e;return te.push({id:Ce.id,name:String((($e=Ce.data())==null?void 0:$e.name)||"").trim()})}),k(te)},Ue=>{console.error("customers_candies snapshot error:",Ue),k([])});return()=>we()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const we=Wt(At(je,"ar_movements"),sr("date","<=",s),ln("date","asc")),Ue=await Dt(we),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),H(te)}catch(we){console.warn("ar_movements sin ndice, usando fallback:",we);try{const Ue=await Dt(At(je,"ar_movements")),te=[];Ue.forEach(Ce=>te.push({id:Ce.id,...Ce.data()})),H(te.filter(Ce=>String(Ce.date||"")<=s))}catch(Ue){console.error(Ue),H([])}}})()},[e,s]);const bt=v.useMemo(()=>{let L=[...D];if(l!=="TODAS"&&(L=L.filter(te=>te.status===l)),u==="CASH"&&(L=L.filter(te=>te.type==="CONTADO")),u==="CREDITO"&&(L=L.filter(te=>te.type==="CREDITO")),f!=="ALL"&&(L=L.filter(te=>(te.vendorId||"")===f)),A!=="ALL"&&(L=L.filter(te=>te.branch===A)),p.trim()){const te=p.trim().toLowerCase();L=L.filter(Ce=>(Ce.productName||"").toLowerCase().includes(te))}if(x.trim()){const te=x.trim().toLowerCase();L=L.filter(Ce=>(_t(Ce)||"").toLowerCase().includes(te))}const we=b.trim()?Number(b):null,Ue=B.trim()?Number(B):null;return we!==null&&!Number.isNaN(we)&&(L=L.filter(te=>(te.amount||0)>=we)),Ue!==null&&!Number.isNaN(Ue)&&(L=L.filter(te=>(te.amount||0)<=Ue)),L},[D,l,u,f,A,p,x,b,B,st]),St=v.useMemo(()=>{let L=0,we=0,Ue=0,te=0,Ce=0,$e=0;for(const Ye of bt){const mt=Cr(Ye.packages),rt=Cr(Ye.amount),re=Cr(Ye.commission);Ye.type==="CREDITO"?(we+=mt,te+=rt,$e+=re):(L+=mt,Ue+=rt,Ce+=re)}const He=Er(Ue+te);return{packsCash:wo(L),packsCredit:wo(we),salesCash:Er(Ue),salesCredit:Er(te),salesTotal:He,commCash:Er(Ce),commCredit:Er($e),commTotal:Er(Ce+$e)}},[bt]),kt=v.useMemo(()=>{let L=0,we=0,Ue=0,te=0,Ce=0,$e=0;for(const He of he){const Ye=Array.isArray(He.items)?He.items:[];for(const mt of Ye)L+=Cr(mt.totalRivas),we+=Cr(mt.totalSanJorge),Ue+=Cr(mt.totalIsla),te+=Cr(mt.gainRivas),Ce+=Cr(mt.gainSanJorge),$e+=Cr(mt.gainIsla)}return{expectedRivas:Er(L),expectedSanJorge:Er(we),expectedIsla:Er(Ue),grossRivas:Er(te),grossSanJorge:Er(Ce),grossIsla:Er($e),grossTotal:Er(te+Ce+$e),expectedTotal:Er(L+we+Ue)}},[he]),et=v.useMemo(()=>{const L={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const we of bt){const Ue=we.branch;Ue&&(L[Ue].sales+=Cr(we.amount),L[Ue].packages+=Cr(we.packages))}return{RIVAS:{sales:Er(L.RIVAS.sales),packages:wo(L.RIVAS.packages)},SAN_JORGE:{sales:Er(L.SAN_JORGE.sales),packages:wo(L.SAN_JORGE.packages)},ISLA:{sales:Er(L.ISLA.sales),packages:wo(L.ISLA.packages)}}},[bt]),ce=v.useMemo(()=>({RIVAS:Er(et.RIVAS.sales-kt.expectedRivas),SAN_JORGE:Er(et.SAN_JORGE.sales-kt.expectedSanJorge),ISLA:Er(et.ISLA.sales-kt.expectedIsla)}),[et,kt]),Qe=v.useMemo(()=>{const L={},we={};for(const Ce of bt){const $e=(Ce.vendorId||"").trim();if(!$e)continue;const He=ge.find(rt=>rt.id===$e),Ye=(He==null?void 0:He.name)||Ce.vendorName||"(sin vendedor)",mt=Cr(Ce.commission);Ce.type==="CREDITO"?(we[$e]||(we[$e]={vendorId:$e,name:Ye,total:0}),we[$e].total=Er(we[$e].total+mt)):(L[$e]||(L[$e]={vendorId:$e,name:Ye,total:0}),L[$e].total=Er(L[$e].total+mt))}const Ue=Object.values(L).sort((Ce,$e)=>$e.total-Ce.total),te=Object.values(we).sort((Ce,$e)=>$e.total-Ce.total);return{cashArr:Ue,creditArr:te}},[bt,ge]),xe=v.useMemo(()=>{const L=(ue,Ne)=>ue.reduce((Te,tt)=>Te+Number((tt==null?void 0:tt[Ne])??0),0),we=ue=>{const Ne=Number(ue);return Number.isFinite(Ne)?Math.floor(Ne):0},Ue=ue=>{const Ne=Number((ue==null?void 0:ue.totalPackages)??0);if(Ne>0)return Ne;const Te=Array.isArray(ue==null?void 0:ue.items)?ue.items:[];return L(Te,"packages")};let te=0,Ce=0;for(const ue of he){const Ne=Array.isArray(ue.items)?ue.items:[];if(Ne.length)for(const Te of Ne)te+=Number((Te==null?void 0:Te.subtotal)??0);else te+=Number(ue.subtotal??0);Ce+=Ue(ue)}let $e=0,He=0,Ye=0;const mt=ue=>{const Ne=Number(ue==null?void 0:ue.remainingPackages);if(Number.isFinite(Ne)&&Ne>0)return Math.floor(Ne);const Te=Math.max(1,we((ue==null?void 0:ue.unitsPerPackage)??1)),tt=we((ue==null?void 0:ue.remainingUnits)??(ue==null?void 0:ue.remaining)??0);return tt>0?Math.max(0,Math.floor(tt/Te)):0};for(const ue of Z)$e+=Number(ue.subtotal??0),He+=Number(ue.packages??0),Ye+=mt(ue);const rt=new Set(he.filter(ue=>String(ue.date||"")>=n&&String(ue.date||"")<=s).map(ue=>ue.id));let re=0;for(const ue of ie){const Ne=String(ue.orderId||"").trim();Ne&&rt.has(Ne)&&(re+=Number(ue.remainingPackages??0))}const ne=Y.reduce((ue,Ne)=>ue+Cr(Ne.remainingPackages),0),Ae=z.reduce((ue,Ne)=>ue+Cr(Ne.remainingPackages),0);return{providerTotalMaster:Er(te),providerTotalVendor:Er($e),orderedPacksMaster:wo(Ce),remainingPacksMaster:wo(re),orderedPacksVendor:wo(He),remainingPacksVendor:wo(Ye),globalRemainingMaster:wo(ne),globalRemainingVendor:wo(Ae)}},[he,Z,ie,n,s,Y,z]),fe=v.useMemo(()=>{const L={};let we=0;for(const Ue of Q){const te=String(Ue.date||"").trim();if(!te)continue;const Ce=Math.max(0,Cr(Ue.amount));we+=Ce,L[te]=Er((L[te]||0)+Ce)}return{total:Er(we),byDay:L}},[Q]),oe=v.useMemo(()=>{let L=0;for(const we of he){const Ue=Array.isArray(we.items)?we.items:[];if(Ue.length)for(const te of Ue)L+=Cr(te==null?void 0:te.subtotal);else L+=Cr(we.subtotal)}return Er(L)},[he]),Be=v.useMemo(()=>{let L=0,we=0;for(const te of Z){const Ce=String(te.sellerId||"").trim(),$e=Ce?lt[Ce]:void 0,He=cS($e==null?void 0:$e.branch)||"ISLA",Ye=Cr(te.totalVendor)||Cr(He==="ISLA"?te.totalIsla:He==="RIVAS"?te.totalRivas:te.totalSanJorge);L+=Ye,He==="ISLA"&&(we+=Ye)}const Ue=Er(Cr(kt.expectedIsla)-we);return{dispersedTotal:Er(L),dispersedIsla:Er(we),totalExistenteIsla:Ue}},[Z,lt,kt.expectedIsla]),Me=v.useMemo(()=>{var Ye,mt;const L=rt=>{const re=Math.max(1,Math.floor(Cr(rt.unitsPerPackage||1))),ne=Cr(rt.totalUnits)>0?Cr(rt.totalUnits):Cr(rt.packages)*re;let Ae=0;Cr(rt.remainingUnits)>0?Ae=Cr(rt.remainingUnits):Cr(rt.remainingPackages)>0?Ae=Cr(rt.remainingPackages)*re:Ae=0;const ue=Math.max(0,ne-Ae);return{orderedUnits:ne,remainingUnits:Ae,soldUnits:ue,upp:re}},we=rt=>{const re=lt[rt];return cS(re==null?void 0:re.branch)},Ue=(rt,re)=>{const ne=Cr(rt.totalVendor)||(re==="ISLA"?Cr(rt.totalIsla):re==="RIVAS"?Cr(rt.totalRivas):re==="SAN_JORGE"?Cr(rt.totalSanJorge):0);if(ne>0)return ne;const Ae=Cr(rt.unitPriceVendor);if(Ae>0){const{orderedUnits:ue}=L(rt);return Ae*ue}return 0},te=(rt,re)=>{const ne=Cr(rt.unitPriceVendor);if(ne>0)return ne;const Ae=Ue(rt,re),{orderedUnits:ue}=L(rt);return Ae>0&&ue>0?Ae/ue:0},Ce=new Map;for(const rt of Z){const re=String(rt.orderId||"").trim(),ne=re||`DOC:${rt.id}`,Ae=String(rt.sellerId||"").trim(),ue=String(rt.sellerName||"").trim()||Ae&&((Ye=lt[Ae])==null?void 0:Ye.name)||""||"(sin vendedor)",Ne=String(rt.date||"").trim(),Te=Ae?we(Ae):"",{orderedUnits:tt,remainingUnits:ot,soldUnits:vt}=L(rt),yt=Ue(rt,Te),Et=te(rt,Te),Ee=Et>0?Et*vt:tt>0?yt*vt/tt:0,ut=Et>0?Et*ot:tt>0?yt*ot/tt:0;Ce.has(ne)||Ce.set(ne,{orderKey:ne,orderId:re||ne,date:Ne,sellerId:Ae,sellerName:ue,branch:Te,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const Nt=Ce.get(ne);Nt.lines.push({...rt,orderedUnits:tt,soldUnits:vt,remainingUnits:ot,lineTotal:Er(yt),lineSoldValue:Er(Ee),lineRemainingValue:Er(ut)}),Nt.totalOrden+=yt,Nt.vendido+=Ee,Nt.restante+=ut}for(const rt of Ce.values()){const re=rt.sellerId?Cr((mt=lt[rt.sellerId])==null?void 0:mt.commissionPercent):0;rt.comision=Er(rt.totalOrden*re/100),rt.totalEsperado=Er(rt.totalOrden-rt.comision),rt.totalOrden=Er(rt.totalOrden),rt.vendido=Er(rt.vendido),rt.restante=Er(rt.restante)}const $e=Array.from(Ce.values()).sort((rt,re)=>rt.date&&re.date?rt.date<re.date?1:-1:re.totalOrden-rt.totalOrden),He=$e.reduce((rt,re)=>(rt.totalOrden+=Cr(re.totalOrden),rt.vendido+=Cr(re.vendido),rt.restante+=Cr(re.restante),rt.comision+=Cr(re.comision),rt.totalEsperado+=Cr(re.totalEsperado),rt),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Er(He.totalOrden),vendido:Er(He.vendido),restante:Er(He.restante),comision:Er(He.comision),totalEsperado:Er(He.totalEsperado)},orders:$e}},[Z,lt]),Ze=v.useMemo(()=>{if(!pe)return null;const L=Me.orders.find(te=>te.orderKey===pe);if(!L)return null;const we={};for(const te of L.lines){const Ce=String(te.productName||"(sin nombre)");we[Ce]||(we[Ce]={productName:Ce,asociados:0,vendidos:0,restantes:0}),we[Ce].asociados+=Cr(te.orderedUnits),we[Ce].vendidos+=Cr(te.soldUnits),we[Ce].restantes+=Cr(te.remainingUnits)}const Ue=Object.values(we).map(te=>({...te,asociados:Math.floor(te.asociados),vendidos:Math.floor(te.vendidos),restantes:Math.floor(te.restantes)})).sort((te,Ce)=>Ce.asociados-te.asociados);return{...L,products:Ue}},[pe,Me.orders]),Je=v.useMemo(()=>{const L=Y.reduce((Ue,te)=>Ue+Cr(te.remainingPackages),0),we=z.reduce((Ue,te)=>Ue+Cr(te.remainingPackages),0);return{masterRemainingPackages:wo(L),vendorRemainingPackages:wo(we)}},[Y,z]),nt=v.useMemo(()=>{const L=new Map,we=te=>_==="DIA"?{key:te.date,label:te.date}:_==="VENDEDOR"?{key:te.vendorId||"",label:te.vendorName||""}:_==="PRODUCTO"?{key:te.productName||"",label:te.productName||""}:{key:te.branch||"",label:te.branch||""};for(const te of bt){const{key:Ce,label:$e}=we(te);L.has(Ce)||L.set(Ce,{key:Ce,label:$e,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const He=L.get(Ce);He.rows.push(te),te.type==="CREDITO"?(He.packsCredit+=Cr(te.packages),He.salesCredit+=Cr(te.amount),He.commCredit+=Cr(te.commission)):(He.packsCash+=Cr(te.packages),He.salesCash+=Cr(te.amount),He.commCash+=Cr(te.commission))}const Ue=Array.from(L.values()).map(te=>({...te,packsCash:wo(te.packsCash),packsCredit:wo(te.packsCredit),salesCash:Er(te.salesCash),salesCredit:Er(te.salesCredit),commCash:Er(te.commCash),commCredit:Er(te.commCredit)}));return _==="DIA"?Ue.sort((te,Ce)=>te.key<Ce.key?1:-1):Ue.sort((te,Ce)=>Ce.salesCash+Ce.salesCredit-(te.salesCash+te.salesCredit)),Ue},[bt,_]),ke=v.useMemo(()=>{if(!K)return[];const L=nt.find(we=>we.key===K);return(L==null?void 0:L.rows)||[]},[K,nt]),ae=v.useMemo(()=>{const L={};for(const we of ke){const Ue=we.productName||"(sin nombre)";L[Ue]||(L[Ue]={productName:Ue,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),we.type==="CREDITO"?(L[Ue].packsCredit+=Cr(we.packages),L[Ue].salesCredit+=Cr(we.amount),L[Ue].commCredit+=Cr(we.commission)):(L[Ue].packsCash+=Cr(we.packages),L[Ue].salesCash+=Cr(we.amount),L[Ue].commCash+=Cr(we.commission))}return Object.values(L).map(we=>({...we,packsCash:wo(we.packsCash),packsCredit:wo(we.packsCredit),salesCash:Er(we.salesCash),salesCredit:Er(we.salesCredit),commCash:Er(we.commCash),commCredit:Er(we.commCredit)})).sort((we,Ue)=>Ue.salesCash+Ue.salesCredit-(we.salesCash+we.salesCredit))},[ke]),De=v.useMemo(()=>{const L={},we=Ce=>(st[Ce]||"").trim()||Ce;for(const Ce of F){const $e=String(Ce.customerId||"").trim();if(!$e)continue;const He=String(Ce.date||"");if(He&&He>s)continue;L[$e]||(L[$e]={customerId:$e,name:we($e),balance:0,lastPayment:""});const Ye=Cr(Ce.amount);Ce.type==="CARGO"&&(L[$e].balance+=Ye),Ce.type==="ABONO"&&(L[$e].balance-=Ye,(!L[$e].lastPayment||He>L[$e].lastPayment)&&(L[$e].lastPayment=He))}const Ue=Object.values(L).map(Ce=>({...Ce,balance:Er(Ce.balance)})).filter(Ce=>Ce.balance>0).sort((Ce,$e)=>$e.balance-Ce.balance),te=Er(Ue.reduce((Ce,$e)=>Ce+$e.balance,0));return{count:Ue.length,totalPending:te,list:Ue.slice(0,20)}},[F,st,s]),We=v.useMemo(()=>{const L=Er(St.salesTotal),we=Er(St.commTotal),Ue=Er(fe.total),te=Er(L-we-Ue),Ce=new Set;for(const re of bt)re.date&&Ce.add(re.date);const $e=Math.max(1,Ce.size),He=Er(L/$e),Ye=Er(we/$e),mt=Er(Ue/$e),rt=Er(te/$e);return{ingreso:L,comision:we,gastos:Ue,gananciaNeta:te,daysCount:$e,ingresoDia:He,comisionDia:Ye,gastosDia:mt,netaDia:rt}},[St,fe.total,bt]),pt=v.useMemo(()=>{const L={};for(const Ce of bt){const $e=Ce.date;$e&&(L[$e]||(L[$e]={date:$e,ingreso:0,comision:0}),L[$e].ingreso+=Cr(Ce.amount),L[$e].comision+=Cr(Ce.commission))}const we=Object.keys(L).sort((Ce,$e)=>Ce<$e?-1:1),Ue=we.map(Ce=>({label:Ce.slice(5),value:Er(L[Ce].ingreso)})),te=we.map(Ce=>{var rt,re;const $e=Cr((rt=L[Ce])==null?void 0:rt.ingreso),He=Cr((re=L[Ce])==null?void 0:re.comision),Ye=Cr(fe.byDay[Ce]||0),mt=$e-He-Ye;return{label:Ce.slice(5),value:Er(mt)}});return{seriesIngreso:Ue,seriesNeta:te,datesCount:we.length}},[bt,fe.byDay]),ct=v.useMemo(()=>[{label:"Rivas",value:Cr(et.RIVAS.sales)},{label:"San Jorge",value:Cr(et.SAN_JORGE.sales)},{label:"Isla",value:Cr(et.ISLA.sales)}].map(L=>({...L,value:Er(L.value)})),[et]),Xe=async()=>{if(G.current){G.current.classList.add("force-pdf-colors");try{const we=(await q0(G.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Ue=new Br;Ue.addImage(we,"PNG",10,10,190,0),Ue.save(`data_center_dulces_${n}_a_${s}.pdf`)}finally{G.current.classList.remove("force-pdf-colors")}}},Rt=()=>{const we=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...bt.map($e=>[$e.date,$e.processedDate||"",$e.status,$e.type,$e.vendorId,`"${String($e.vendorName||"").replace(/"/g,'""')}"`,$e.branch||"",`"${String($e.productName||"").replace(/"/g,'""')}"`,ws($e.packages),Ar($e.amount),Ar($e.commission),$e.customerId||"",`"${String(_t($e)||"").replace(/"/g,'""')}"`].join(","))],Ue=new Blob([we.join(`
`)],{type:"text/csv;charset=utf-8;"}),te=URL.createObjectURL(Ue),Ce=document.createElement("a");Ce.href=te,Ce.download=`data_center_dulces_${n}_a_${s}.csv`,Ce.click(),URL.revokeObjectURL(te)};return e?o.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:o.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[o.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[o.jsx("button",{onClick:Xe,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),o.jsx("button",{onClick:Rt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),o.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:n,onChange:L=>a(L.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:L=>i(L.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:L=>c(L.target.value),children:[o.jsx("option",{value:"TODAS",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:L=>d(L.target.value),children:[o.jsx("option",{value:"AMBAS",children:"Ambas"}),o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:L=>h(L.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),ge.map(L=>o.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:L=>m(L.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"RIVAS",children:"Rivas"}),o.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),o.jsx("option",{value:"ISLA",children:"Isla"})]})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:L=>g(L.target.value),placeholder:"Ej: Conitos"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:L=>y(L.target.value),placeholder:"Ej: Javier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:L=>w(L.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:B,onChange:L=>P(L.target.value),placeholder:"999999"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:L=>{M(""),E(L.target.value)},children:[o.jsx("option",{value:"DIA",children:"Da"}),o.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),o.jsx("option",{value:"PRODUCTO",children:"Producto"}),o.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{X(""),ze("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Re==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),o.jsx("button",{onClick:()=>{X(""),ze("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Re==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",o.jsxs("strong",{children:["C$",Ar(fe.total)]})]})]}),o.jsxs("div",{ref:G,children:[Re==="MACRO"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(We.ingreso)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Ar(We.comision)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ar(St.commCash),"  Crdito: C$",Ar(St.commCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Ar(We.gastos)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(We.gananciaNeta)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(We.netaDia)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",o.jsx("strong",{children:We.daysCount})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[o.jsx(LH,{title:"Ventas por da (Ingreso)",series:pt.seriesIngreso,valuePrefix:"C$"}),o.jsx(LH,{title:"Ganancia neta por da (real)",series:pt.seriesNeta,valuePrefix:"C$"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(dUe,{title:"Distribucin de ventas por sucursal",items:ct})})]}),Re==="DETALLE"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(St.packsCash)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(St.packsCredit)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(St.salesTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ar(St.salesCash),"  Crdito: C$",Ar(St.salesCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(St.commTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Ar(St.commCash),"  Crdito: C$",Ar(St.commCredit)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(kt.grossTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",Ar(kt.grossRivas),"  SJ:"," ",Ar(kt.grossSanJorge),"  I:"," ",Ar(kt.grossIsla)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",Ar(kt.expectedRivas)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",Ar(kt.expectedSanJorge)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",Ar(kt.expectedIsla)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",Ar(et.RIVAS.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",Ar(et.SAN_JORGE.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",Ar(et.ISLA.sales)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",Ar(ce.RIVAS)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",Ar(ce.SAN_JORGE)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",Ar(ce.ISLA)]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(xe.providerTotalVendor)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(xe.orderedPacksMaster)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:ws(xe.remainingPacksMaster)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:ws(Je.masterRemainingPackages)})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(xe.orderedPacksVendor)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:ws(xe.remainingPacksVendor)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:ws(Je.vendorRemainingPackages)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(oe)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(Be.dispersedTotal)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(Be.dispersedIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Ar(Be.totalExistenteIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",o.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",Ar(Me.global.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",Ar(Me.global.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",Ar(Me.global.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",Ar(Me.global.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",Ar(Me.global.totalEsperado)]})]})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),Me.orders.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:Me.orders.map(L=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:L.orderId}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[L.sellerName," ",L.branch?` ${L.branch}`:""," ",L.date?` ${L.date}`:""]})]}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>X(L.orderKey),children:"Ver"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.totalOrden)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.vendido)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.restante)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.comision)]})]})]})]},L.orderKey))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Orden"}),o.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total orden"}),o.jsx("th",{className:"border p-2",children:"Vendido"}),o.jsx("th",{className:"border p-2",children:"Restante"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Total esperado"}),o.jsx("th",{className:"border p-2",children:"Accin"})]})}),o.jsx("tbody",{children:Me.orders.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:L.orderId}),o.jsx("td",{className:"border p-2 text-left",children:L.sellerName}),o.jsx("td",{className:"border p-2",children:L.branch||""}),o.jsx("td",{className:"border p-2",children:L.date||""}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.totalOrden)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.vendido)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.restante)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.comision)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.totalEsperado)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>X(L.orderKey),children:"Ver detalle"})})]},L.orderKey))})]})}),Ze&&o.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",Ze.orderId]}),o.jsx("button",{onClick:()=>X(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",Ar(Ze.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",Ar(Ze.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",Ar(Ze.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",Ar(Ze.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",Ar(Ze.totalEsperado)]})]})]}),o.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),o.jsx("div",{className:"md:hidden space-y-2",children:Ze.products.map(L=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:L.productName}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),o.jsx("div",{className:"font-bold",children:L.asociados})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),o.jsx("div",{className:"font-bold",children:L.vendidos})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-bold",children:L.restantes})]})]})]},L.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),o.jsx("th",{className:"border p-2",children:"Asociados"}),o.jsx("th",{className:"border p-2",children:"Vendidos"}),o.jsx("th",{className:"border p-2",children:"Restantes"})]})}),o.jsxs("tbody",{children:[Ze.products.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:L.productName}),o.jsx("td",{className:"border p-2",children:L.asociados}),o.jsx("td",{className:"border p-2",children:L.vendidos}),o.jsx("td",{className:"border p-2",children:L.restantes})]},L.productName)),Ze.products.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(Je.masterRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ws(Je.vendorRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Qe.cashArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Qe.cashArr.map(L=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:L.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Ar(L.total)]})]},L.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Qe.creditArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Qe.creditArr.map(L=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:L.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Ar(L.total)]})]},L.vendorId))})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",s,")"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:["Clientes con saldo: ",o.jsx("strong",{children:De.count})]}),o.jsxs("div",{children:["Saldo total pendiente:"," ",o.jsxs("strong",{children:["C$",Ar(De.totalPending)]})]}),o.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),De.list.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:De.list.map(L=>o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:L.name}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ar(L.balance)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:L.lastPayment||""})]})]},L.customerId))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Saldo"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),o.jsx("tbody",{children:De.list.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:L.name}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.balance)]}),o.jsx("td",{className:"border p-2",children:L.lastPayment||""})]},L.customerId))})]})})]})]}),o.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",_,")"]}),o.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),I?o.jsx("p",{className:"text-sm",children:"Cargando..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:nt.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):nt.map(L=>o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:L.label}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>M(L.key),children:"Ver detalle"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"font-bold",children:ws(L.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"font-bold",children:ws(L.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.commCredit)]})]})]})]},L.key))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:_==="DIA"?"Da":_==="VENDEDOR"?"Vendedor":_==="PRODUCTO"?"Producto":"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsxs("tbody",{children:[nt.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:L.label}),o.jsx("td",{className:"border p-2",children:ws(L.packsCash)}),o.jsx("td",{className:"border p-2",children:ws(L.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.commCredit)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>M(L.key),children:"Ver detalle"})})]},L.key)),nt.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),K&&o.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((er=nt.find(L=>L.key===K))==null?void 0:er.label)||K]}),o.jsx("button",{onClick:()=>M(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",Ar(ke.filter(L=>L.type==="CONTADO").reduce((L,we)=>L+Cr(we.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",Ar(ke.filter(L=>L.type==="CREDITO").reduce((L,we)=>L+Cr(we.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",o.jsx("strong",{children:ws(ke.filter(L=>L.type==="CONTADO").reduce((L,we)=>L+Cr(we.packages),0))})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",o.jsx("strong",{children:ws(ke.filter(L=>L.type==="CREDITO").reduce((L,we)=>L+Cr(we.packages),0))})]})]}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),o.jsx("div",{className:"md:hidden space-y-2 mb-4",children:ke.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):ke.map(L=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:L.productName}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Ar(L.amount)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:L.vendorName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),o.jsx("div",{className:"font-bold",children:L.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),o.jsx("div",{className:"font-bold",children:L.branch||""})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-bold",children:ws(L.packages)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.commission)]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",L.date]})]},L.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsxs("tbody",{children:[ke.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:L.vendorName}),o.jsx("td",{className:"border p-2",children:L.productName}),o.jsx("td",{className:"border p-2",children:L.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-2",children:L.branch||""}),o.jsx("td",{className:"border p-2",children:ws(L.packages)}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.amount)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.commission)]}),o.jsx("td",{className:"border p-2",children:L.date})]},L.id)),ke.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),o.jsx("div",{className:"md:hidden space-y-2",children:ae.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):ae.map(L=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:L.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),o.jsx("div",{className:"font-bold",children:ws(L.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),o.jsx("div",{className:"font-bold",children:ws(L.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",Ar(L.commCredit)]})]})]})]},L.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsxs("tbody",{children:[ae.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:L.productName}),o.jsx("td",{className:"border p-2",children:ws(L.packsCash)}),o.jsx("td",{className:"border p-2",children:ws(L.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",Ar(L.commCredit)]})]},L.productName)),ae.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),S&&o.jsx("p",{className:"mt-3 text-sm",children:S})]})}):o.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Cne(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Cne(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Cne(t))&&(n&&(n+=" "),n+=e);return n}var hUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function bD(t){if(typeof t!="string")return!1;var e=hUe;return e.includes(t)}var mUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],pUe=new Set(mUe);function _ne(t){return typeof t!="string"?!1:pUe.has(t)}function Ene(t){return typeof t=="string"&&t.startsWith("data-")}function gf(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(_ne(r)||Ene(r))&&(e[r]=t[r]);return e}function cb(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return gf(e)}return typeof t=="object"&&!Array.isArray(t)?gf(t):null}function Lu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(_ne(r)||Ene(r)||bD(r))&&(e[r]=t[r]);return e}var gUe=["children","width","height","viewBox","className","style","title","desc"];function ok(){return ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ok.apply(null,arguments)}function xUe(t,e){if(t==null)return{};var r,n,a=vUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var wD=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=t,d=xUe(t,gUe),f=s||{width:n,height:a,x:0,y:0},h=wa("recharts-surface",i);return v.createElement("svg",ok({},Lu(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),yUe=["children","className"];function lk(){return lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lk.apply(null,arguments)}function bUe(t,e){if(t==null)return{};var r,n,a=wUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ul=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=bUe(t,yUe),s=wa("recharts-layer",n);return v.createElement("g",lk({className:s},Lu(a),{ref:e}),r)}),Sne=v.createContext(null),NUe=()=>v.useContext(Sne);function Ma(t){return function(){return t}}const Ine=Math.cos,uS=Math.sin,Rd=Math.sqrt,dS=Math.PI,N4=2*dS,ck=Math.PI,uk=2*ck,Cm=1e-6,CUe=uk-Cm;function Bne(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function _Ue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bne;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class EUe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bne:_Ue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-e,u=a-r,d=i-e,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Cm)if(!(Math.abs(f*c-u*d)>Cm)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let A=n-i,m=a-l,p=c*c+u*u,g=A*A+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((ck-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,B=b/x;Math.abs(w-1)>Cm&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*A>d*m)},${this._x1=e+B*c},${this._y1=r+B*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Cm||Math.abs(this._y1-d)>Cm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%uk+uk),h>CUe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Cm&&this._append`A${n},${n},0,${+(h>=ck)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function ND(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new EUe(e)}function CD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pne(t){this._context=t}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function C4(t){return new Pne(t)}function jne(t){return t[0]}function Tne(t){return t[1]}function kne(t,e){var r=Ma(!0),n=null,a=C4,s=null,i=ND(l);t=typeof t=="function"?t:t===void 0?jne:Ma(t),e=typeof e=="function"?e:e===void 0?Tne:Ma(e);function l(c){var u,d=(c=CD(c)).length,f,h=!1,A;for(n==null&&(s=a(A=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(A)return s=null,A+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ma(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ma(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ma(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function EC(t,e,r){var n=null,a=Ma(!0),s=null,i=C4,l=null,c=ND(u);t=typeof t=="function"?t:t===void 0?jne:Ma(+t),e=typeof e=="function"?e:Ma(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Tne:Ma(+r);function u(f){var h,A,m,p=(f=CD(f)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=f[h],h,f))===x)if(x=!x)A=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=A;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(g,h,f),w[h]=+e(g,h,f),l.point(n?+n(g,h,f):b[h],r?+r(g,h,f):w[h]))}if(y)return l=null,y+""||null}function d(){return kne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ma(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ma(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ma(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ma(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ma(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ma(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ma(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),u):s},u}class Fne{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function SUe(t){return new Fne(t,!0)}function IUe(t){return new Fne(t,!1)}const _D={draw(t,e){const r=Rd(e/dS);t.moveTo(r,0),t.arc(0,0,r,0,N4)}},BUe={draw(t,e){const r=Rd(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},One=Rd(1/3),PUe=One*2,jUe={draw(t,e){const r=Rd(e/PUe),n=r*One;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},TUe={draw(t,e){const r=Rd(e),n=-r/2;t.rect(n,n,r,r)}},kUe=.8908130915292852,Dne=uS(dS/10)/uS(7*dS/10),FUe=uS(N4/10)*Dne,OUe=-Ine(N4/10)*Dne,DUe={draw(t,e){const r=Rd(e*kUe),n=FUe*r,a=OUe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=N4*s/5,l=Ine(i),c=uS(i);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},oP=Rd(3),RUe={draw(t,e){const r=-Rd(e/(oP*3));t.moveTo(0,r*2),t.lineTo(-oP*r,-r),t.lineTo(oP*r,-r),t.closePath()}},uu=-.5,du=Rd(3)/2,dk=1/Rd(12),MUe=(dk/2+1)*3,LUe={draw(t,e){const r=Rd(e/MUe),n=r/2,a=r*dk,s=n,i=r*dk+r,l=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(l,c),t.lineTo(uu*n-du*a,du*n+uu*a),t.lineTo(uu*s-du*i,du*s+uu*i),t.lineTo(uu*l-du*c,du*l+uu*c),t.lineTo(uu*n+du*a,uu*a-du*n),t.lineTo(uu*s+du*i,uu*i-du*s),t.lineTo(uu*l+du*c,uu*c-du*l),t.closePath()}};function UUe(t,e){let r=null,n=ND(a);t=typeof t=="function"?t:Ma(t||_D),e=typeof e=="function"?e:Ma(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ma(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ma(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function fS(){}function AS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Rne(t){this._context=t}Rne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:AS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QUe(t){return new Rne(t)}function Mne(t){this._context=t}Mne.prototype={areaStart:fS,areaEnd:fS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VUe(t){return new Mne(t)}function Lne(t){this._context=t}Lne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HUe(t){return new Lne(t)}function Une(t){this._context=t}Une.prototype={areaStart:fS,areaEnd:fS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function $Ue(t){return new Une(t)}function UH(t){return t<0?-1:1}function QH(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(UH(s)+UH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function VH(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function lP(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,i-l*r,s,i)}function hS(t){this._context=t}hS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lP(this,this._t0,VH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lP(this,VH(this,r=QH(this,t,e)),r);break;default:lP(this,this._t0,r=QH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Qne(t){this._context=new Vne(t)}(Qne.prototype=Object.create(hS.prototype)).point=function(t,e){hS.prototype.point.call(this,e,t)};function Vne(t){this._context=t}Vne.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function KUe(t){return new hS(t)}function GUe(t){return new Qne(t)}function Hne(t){this._context=t}Hne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=HH(t),a=HH(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function HH(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function qUe(t){return new Hne(t)}function _4(t,e){this._context=t,this._t=e}_4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function zUe(t){return new _4(t,.5)}function WUe(t){return new _4(t,0)}function XUe(t){return new _4(t,1)}function Pp(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,l=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function fk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function YUe(t,e){return t[e]}function JUe(t){const e=[];return e.key=t,e}function ZUe(){var t=Ma([]),e=fk,r=Pp,n=YUe;function a(s){var i=Array.from(t.apply(this,arguments),JUe),l,c=i.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,s)]).data=f;for(l=0,d=CD(e(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ma(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ma(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?fk:typeof s=="function"?s:Ma(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Pp,a):r},a}function e7e(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}Pp(t,e)}}function t7e(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=t[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}Pp(t,e)}}function r7e(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=t[e[l]],f=d[n][1]||0,h=d[n-1][1]||0,A=(f-h)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;A+=g-x}c+=f,u+=A*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Pp(t,e)}}var E4={},$ne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})($ne);var ED={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(ED);var S4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(S4);var I4={},Kne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Kne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kne,r=S4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<i;){const f=a[l];u?f==="\\"&&l+1<i?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(I4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ne,r=ED,n=S4,a=I4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(E4);var n7e=E4.get;const jp=OA(n7e);var a7e=4;function r0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a7e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function Ds(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var l=r[i-1];return typeof l=="string"?a+l+s:l!==void 0?a+r0(l)+s:a+s},"")}var Lo=t=>t===0?0:t>0?1:-1,xf=t=>typeof t=="number"&&t!=+t,IA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Kr=t=>(typeof t=="number"||t instanceof Number)&&!xf(t),vf=t=>Kr(t)||typeof t=="string",s7e=0,ub=t=>{var e=++s7e;return"".concat(t||"").concat(e)},Al=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Kr(e)&&typeof e!="string")return n;var s;if(IA(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return xf(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Gne=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function Bi(t,e,r){return Kr(t)&&Kr(e)?r0(t+r*(e-t)):e}function i7e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):jp(n,e))===r)}var ho=t=>t===null||typeof t>"u",lw=t=>ho(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function o7e(t){return t!=null}function cw(){}var l7e=["type","size","sizeType"];function Ak(){return Ak=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ak.apply(null,arguments)}function $H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$H(Object(r),!0).forEach(function(n){c7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$H(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c7e(t,e,r){return(e=u7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u7e(t){var e=d7e(t,"string");return typeof e=="symbol"?e:e+""}function d7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f7e(t,e){if(t==null)return{};var r,n,a=A7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function A7e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qne={symbolCircle:_D,symbolCross:BUe,symbolDiamond:jUe,symbolSquare:TUe,symbolStar:DUe,symbolTriangle:RUe,symbolWye:LUe},h7e=Math.PI/180,m7e=t=>{var e="symbol".concat(lw(t));return qne[e]||_D},p7e=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*h7e;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},g7e=(t,e)=>{qne["symbol".concat(lw(t))]=e},SD=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=f7e(t,l7e),s=KH(KH({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var l=()=>{var h=m7e(i),A=UUe().type(h).size(p7e(r,n,i)),m=A();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=Lu(s);return Kr(u)&&Kr(d)&&Kr(r)?v.createElement("path",Ak({},f,{className:wa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};SD.registerSymbol=g7e;var zne=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,x7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{bD(a)&&(n[a]=s=>r[a](r,s))}),n},v7e=(t,e,r)=>n=>(t(e,r,n),null),uw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];bD(a)&&typeof s=="function"&&(n||(n={}),n[a]=v7e(s,e,r))}),n};function GH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function y7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GH(Object(r),!0).forEach(function(n){b7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b7e(t,e,r){return(e=w7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w7e(t){var e=N7e(t,"string");return typeof e=="symbol"?e:e+""}function N7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vo(t,e){var r=y7e({},t),n=e,a=Object.keys(e),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mS.apply(null,arguments)}function qH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function C7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qH(Object(r),!0).forEach(function(n){_7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _7e(t,e,r){return(e=E7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E7e(t){var e=S7e(t,"string");return typeof e=="symbol"?e:e+""}function S7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xu=32,I7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function B7e(t){var{data:e,iconType:r,inactiveColor:n}=t,a=xu/2,s=xu/6,i=xu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:xu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(xu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(xu/8,"h").concat(xu,"v").concat(xu*3/4,"h").concat(-xu,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=C7e({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(SD,{fill:l,cx:a,cy:a,size:xu,sizeType:"diameter",type:c})}function P7e(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,l={x:0,y:0,width:xu,height:xu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var h=d.formatter||a,A=wa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,f):d.value;return v.createElement("li",mS({className:A,style:c,key:"legend-item-".concat(f)},uw(t,d,f)),v.createElement(wD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(B7e,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var j7e=t=>{var e=Vo(t,I7e),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(P7e,mS({},e,{payload:r})))},Wne={},Xne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}t.uniqBy=e})(Xne);var ID={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(ID);var Yne={},B4={},Jne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Jne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jne;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(B4);var Zne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Zne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B4,r=Zne;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Yne);var eae={},tae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(tae);var rae={},BD={},nae={},PD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(PD);var jD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(jD);var TD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(TD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PD,r=jD,n=TD;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):s(d,f,function A(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,A,b)},new Map)}function s(d,f,h,A){if(f===d)return!0;switch(typeof f){case"object":return i(d,f,h,A);case"function":return Object.keys(f).length>0?s(d,{...f},h,A):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function i(d,f,h,A){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,A);if(f instanceof Map)return l(d,f,h,A);if(f instanceof Set)return u(d,f,h,A);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(A!=null&&A.has(f))return A.get(f)===d;A==null||A.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!h(d[g],f[g],g,d,f,A))return!1}return!0}finally{A==null||A.delete(f)}}function l(d,f,h,A){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(h(g,p,m,d,f,A)===!1)return!1}return!0}function c(d,f,h,A){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,f,A)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,A){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,A):!1}t.isMatchWith=a,t.isSetMatch=u})(nae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nae;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(BD);var aae={},kD={},sae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(sae);var FD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(FD);var OD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",A="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",B="[object Int8Array]",P="[object Int16Array]",_="[object Int32Array]",E="[object BigInt64Array]",I="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=I,t.float64ArrayTag=O,t.functionTag=f,t.int16ArrayTag=P,t.int32ArrayTag=_,t.int8ArrayTag=B,t.mapTag=c,t.numberTag=n,t.objectTag=A,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(OD);var iae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(iae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sae,r=FD,n=OD,a=jD,s=iae;function i(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,A=new Map,m=void 0){const p=m==null?void 0:m(d,f,h,A);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(A.has(d))return A.get(d);if(Array.isArray(d)){const g=new Array(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;A.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,h,A,m));return g}if(d instanceof Set){const g=new Set;A.set(d,g);for(const x of d)g.add(l(x,void 0,h,A,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return A.set(d,g),c(g,d,h,A,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Error){const g=new d.constructor;return A.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,A,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof String){const g=new String(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return A.set(d,g),c(g,d,h,A,m),g}return d}function c(d,f,h=d,A,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(f[x],x,h,A,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=l,t.copyProperties=c})(kD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BD,r=aae;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(rae);var oae={},lae={},cae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD,r=OD;function n(a,s){return e.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(cae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cae;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(lae);var uae={},DD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(DD);var dae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FD;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(dae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ED,r=DD,n=dae,a=I4;function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(uae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BD,r=S4,n=lae,a=E4,s=uae;function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(oae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID,r=tae,n=rae,a=oae;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(eae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xne,r=ID,n=Yne,a=eae;function s(i,l=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(l)):[]}t.uniqBy=s})(Wne);var T7e=Wne.uniqBy;const zH=OA(T7e);function fae(t,e,r){return e===!0?zH(t,r):typeof e=="function"?zH(t,e):t}var Aae={exports:{}},hae={},mae={exports:{}},pae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv=v;function k7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var F7e=typeof Object.is=="function"?Object.is:k7e,O7e=sv.useState,D7e=sv.useEffect,R7e=sv.useLayoutEffect,M7e=sv.useDebugValue;function L7e(t,e){var r=e(),n=O7e({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return R7e(function(){a.value=r,a.getSnapshot=e,cP(a)&&s({inst:a})},[t,r,e]),D7e(function(){return cP(a)&&s({inst:a}),t(function(){cP(a)&&s({inst:a})})},[t]),M7e(r),r}function cP(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!F7e(t,r)}catch{return!0}}function U7e(t,e){return e()}var Q7e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?U7e:L7e;pae.useSyncExternalStore=sv.useSyncExternalStore!==void 0?sv.useSyncExternalStore:Q7e;mae.exports=pae;var V7e=mae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4=v,H7e=V7e;function $7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var K7e=typeof Object.is=="function"?Object.is:$7e,G7e=H7e.useSyncExternalStore,q7e=P4.useRef,z7e=P4.useEffect,W7e=P4.useMemo,X7e=P4.useDebugValue;hae.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=q7e(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=W7e(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,K7e(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=G7e(t,s[0],s[1]);return z7e(function(){i.hasValue=!0,i.value=l},[l]),X7e(l),l};Aae.exports=hae;var Y7e=Aae.exports,RD=v.createContext(null),J7e=t=>t,Ha=()=>{var t=v.useContext(RD);return t?t.store.dispatch:J7e},j_=()=>{},Z7e=()=>j_,e9e=(t,e)=>t===e;function Qr(t){var e=v.useContext(RD);return Y7e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Z7e,e?e.store.getState:j_,e?e.store.getState:j_,e?t:j_,e9e)}function t9e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function r9e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function n9e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var WH=t=>Array.isArray(t)?t:[t];function a9e(t){const e=Array.isArray(t[0])?t[0]:t;return n9e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function s9e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var i9e=class{constructor(t){this.value=t}deref(){return this.value}},o9e=typeof WeakRef<"u"?WeakRef:i9e,l9e=0,XH=1;function SC(){return{s:l9e,v:void 0,o:null,p:null}}function gae(t,e={}){let r=SC();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var f;let l=r;const{length:c}=arguments;for(let h=0,A=c;h<A;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=SC(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=SC(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===XH)d=l.v;else if(d=t.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new o9e(d):d}return u.s=XH,u.v=d,d}return i.clearCache=()=>{r=SC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function c9e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),t9e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:A=gae,argsMemoizeOptions:m=[]}=d,p=WH(h),g=WH(m),x=a9e(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=A(function(){i++;const B=s9e(x,arguments);return l=y.apply(null,B),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var Tt=c9e(gae),u9e=Object.assign((t,e=Tt)=>{r9e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>u9e}),xae={},vae={},yae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),l=e(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};t.compareValues=r})(yae);var bae={},MD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(MD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(bae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yae,r=bae,n=I4;function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(A=>String(A));const u=(A,m)=>{let p=A;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(A,m)=>m==null||A==null?m:typeof A=="object"&&"key"in A?Object.hasOwn(m,A.key)?m[A.key]:u(m,A.path):typeof A=="function"?A(m):Array.isArray(A)?u(m,A):typeof m=="object"?m[A]:m,f=i.map(A=>(Array.isArray(A)&&A.length===1&&(A=A[0]),A==null||typeof A=="function"||Array.isArray(A)||r.isKey(A)?A:{key:A,path:n.toPath(A)}));return s.map(A=>({original:A,criteria:f.map(m=>d(m,A))})).slice().sort((A,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(A.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(A=>A.original)}t.orderBy=a})(vae);var wae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(wae);var LD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD,r=B4,n=PD,a=TD;function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}t.isIterateeCall=s})(LD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vae,r=wae,n=LD;function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(xae);var d9e=xae.sortBy;const j4=OA(d9e);var Nae=t=>t.legend.settings,f9e=t=>t.legend.size,A9e=t=>t.legend.payload,h9e=Tt([A9e,Nae],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?j4(n,r):n});function m9e(){return Qr(h9e)}var IC=1;function Cae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>IC||Math.abs(i.left-e.left)>IC||Math.abs(i.top-e.top)>IC||Math.abs(i.width-e.width)>IC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function So(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var p9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",YH=p9e,uP=()=>Math.random().toString(36).substring(7).split("").join("."),g9e={INIT:`@@redux/INIT${uP()}`,REPLACE:`@@redux/REPLACE${uP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${uP()}`},pS=g9e;function UD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function _ae(t,e,r){if(typeof t!="function")throw new Error(So(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(So(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(So(1));return r(_ae)(t,e)}let n=t,a=e,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(So(3));return a}function f(g){if(typeof g!="function")throw new Error(So(4));if(c)throw new Error(So(5));let x=!0;u();const y=l++;return i.set(y,g),function(){if(x){if(c)throw new Error(So(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!UD(g))throw new Error(So(7));if(typeof g.type>"u")throw new Error(So(8));if(typeof g.type!="string")throw new Error(So(17));if(c)throw new Error(So(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function A(g){if(typeof g!="function")throw new Error(So(10));n=g,h({type:pS.REPLACE})}function m(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(So(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[YH](){return this}}}return h({type:pS.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:A,[YH]:m}}function x9e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:pS.INIT})>"u")throw new Error(So(12));if(typeof r(void 0,{type:pS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(So(13))})}function Eae(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{x9e(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],A=i[f],m=h(A,l);if(typeof m>"u")throw l&&l.type,new Error(So(14));u[f]=m,c=c||m!==A}return c=c||n.length!==Object.keys(i).length,c?u:i}}function gS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function v9e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(So(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(i));return s=gS(...l)(a.dispatch),{...a,dispatch:s}}}function Sae(t){return UD(t)&&"type"in t&&typeof t.type=="string"}var Iae=Symbol.for("immer-nothing"),JH=Symbol.for("immer-draftable"),Ql=Symbol.for("immer-state");function dd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Uc=Object,iv=Uc.getPrototypeOf,xS="constructor",T4="prototype",hk="configurable",vS="enumerable",T_="writable",db="value",BA=t=>!!t&&!!t[Ql];function Bd(t){var e;return t?Bae(t)||F4(t)||!!t[JH]||!!((e=t[xS])!=null&&e[JH])||O4(t)||D4(t):!1}var y9e=Uc[T4][xS].toString(),ZH=new WeakMap;function Bae(t){if(!t||!QD(t))return!1;const e=iv(t);if(e===null||e===Uc[T4])return!0;const r=Uc.hasOwnProperty.call(e,xS)&&e[xS];if(r===Object)return!0;if(!Jg(r))return!1;let n=ZH.get(r);return n===void 0&&(n=Function.toString.call(r),ZH.set(r,n)),n===y9e}function k4(t,e,r=!0){dw(t)===0?(r?Reflect.ownKeys(t):Uc.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function dw(t){const e=t[Ql];return e?e.type_:F4(t)?1:O4(t)?2:D4(t)?3:0}var e$=(t,e,r=dw(t))=>r===2?t.has(e):Uc[T4].hasOwnProperty.call(t,e),mk=(t,e,r=dw(t))=>r===2?t.get(e):t[e],yS=(t,e,r,n=dw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function b9e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var F4=Array.isArray,O4=t=>t instanceof Map,D4=t=>t instanceof Set,QD=t=>typeof t=="object",Jg=t=>typeof t=="function",dP=t=>typeof t=="boolean";function w9e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Wf=t=>t.copy_||t.base_,VD=t=>t.modified_?t.copy_:t.base_;function pk(t,e){if(O4(t))return new Map(t);if(D4(t))return new Set(t);if(F4(t))return Array[T4].slice.call(t);const r=Bae(t);if(e===!0||e==="class_only"&&!r){const n=Uc.getOwnPropertyDescriptors(t);delete n[Ql];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l[T_]===!1&&(l[T_]=!0,l[hk]=!0),(l.get||l.set)&&(n[i]={[hk]:!0,[T_]:!0,[vS]:l[vS],[db]:t[i]})}return Uc.create(iv(t),n)}else{const n=iv(t);if(n!==null&&r)return{...t};const a=Uc.create(n);return Uc.assign(a,t)}}function HD(t,e=!1){return R4(t)||BA(t)||!Bd(t)||(dw(t)>1&&Uc.defineProperties(t,{set:BC,add:BC,clear:BC,delete:BC}),Uc.freeze(t),e&&k4(t,(r,n)=>{HD(n,!0)},!1)),t}function N9e(){dd(2)}var BC={[db]:N9e};function R4(t){return t===null||!QD(t)?!0:Uc.isFrozen(t)}var bS="MapSet",gk="Patches",t$="ArrayMethods",Pae={};function Tp(t){const e=Pae[t];return e||dd(0,t),e}var r$=t=>!!Pae[t],fb,jae=()=>fb,C9e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:r$(bS)?Tp(bS):void 0,arrayMethodsPlugin_:r$(t$)?Tp(t$):void 0});function n$(t,e){e&&(t.patchPlugin_=Tp(gk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xk(t){vk(t),t.drafts_.forEach(_9e),t.drafts_=null}function vk(t){t===fb&&(fb=t.parent_)}var a$=t=>fb=C9e(fb,t);function _9e(t){const e=t[Ql];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function s$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[Ql].modified_&&(xk(e),dd(4)),Bd(t)&&(t=i$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[Ql].base_,t,e)}else t=i$(e,r);return E9e(e,t,!0),xk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Iae?t:void 0}function i$(t,e){if(R4(e))return e;const r=e[Ql];if(!r)return wS(e,t.handledSet_,t);if(!M4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Fae(r,t)}return r.copy_}function E9e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HD(e,r)}function Tae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var M4=(t,e)=>t.scope_===e,S9e=[];function kae(t,e,r,n){const a=Wf(t),s=t.type_;if(n!==void 0&&mk(a,n,s)===e){yS(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;k4(a,(c,u)=>{if(BA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const i=t.draftLocations_.get(e)??S9e;for(const l of i)yS(a,l,r,s)}function I9e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!M4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const i=VD(s);kae(t,s.draft_??s,i,r),Fae(s,a)})}function Fae(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Tae(t)}}function B9e(t,e,r){const{scope_:n}=t;if(BA(r)){const a=r[Ql];M4(a,n)&&a.callbacks_.push(function(){k_(t);const i=VD(a);kae(t,r,i,e)})}else Bd(r)&&t.callbacks_.push(function(){const s=Wf(t);t.type_===3?s.has(r)&&wS(r,n.handledSet_,n):mk(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&wS(mk(t.copy_,e,t.type_),n.handledSet_,n)})}function wS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||BA(t)||e.has(t)||!Bd(t)||R4(t)||(e.add(t),k4(t,(n,a)=>{if(BA(a)){const s=a[Ql];if(M4(s,r)){const i=VD(s);yS(t,n,i,t.type_),Tae(s)}}else Bd(a)&&wS(a,e,r)})),t}function P9e(t,e){const r=F4(t),n={type_:r?1:0,scope_:e?e.scope_:jae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=NS;r&&(a=[n],s=Ab);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,[l,n]}var NS={get(t,e){if(e===Ql)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Wf(t);if(!e$(a,e,t.type_))return j9e(t,a,e);const s=a[e];if(t.finalized_||!Bd(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&w9e(e))return s;if(s===fP(t.base_,e)){k_(t);const i=t.type_===1?+e:e,l=bk(t.scope_,s,t,i);return t.copy_[i]=l}return s},has(t,e){return e in Wf(t)},ownKeys(t){return Reflect.ownKeys(Wf(t))},set(t,e,r){const n=Oae(Wf(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=fP(Wf(t),e),s=a==null?void 0:a[Ql];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(b9e(r,a)&&(r!==void 0||e$(t.base_,e,t.type_)))return!0;k_(t),yk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),B9e(t,e,r)),!0},deleteProperty(t,e){return k_(t),fP(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),yk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Wf(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[T_]:!0,[hk]:t.type_!==1||e!=="length",[vS]:n[vS],[db]:r[e]}},defineProperty(){dd(11)},getPrototypeOf(t){return iv(t.base_)},setPrototypeOf(){dd(12)}},Ab={};for(let t in NS){let e=NS[t];Ab[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}Ab.deleteProperty=function(t,e){return Ab.set.call(this,t,e,void 0)};Ab.set=function(t,e,r){return NS.set.call(this,t[0],e,r,t[0])};function fP(t,e){const r=t[Ql];return(r?Wf(r):t)[e]}function j9e(t,e,r){var a;const n=Oae(e,r);return n?db in n?n[db]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Oae(t,e){if(!(e in t))return;let r=iv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=iv(r)}}function yk(t){t.modified_||(t.modified_=!0,t.parent_&&yk(t.parent_))}function k_(t){t.copy_||(t.assigned_=new Map,t.copy_=pk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var T9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Jg(r)&&!Jg(n)){const i=n;n=r;const l=this;return function(u=i,...d){return l.produce(u,f=>n.call(this,f,...d))}}Jg(n)||dd(6),a!==void 0&&!Jg(a)&&dd(7);let s;if(Bd(r)){const i=a$(this),l=bk(i,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?xk(i):vk(i)}return n$(i,a),s$(s,i)}else if(!r||!QD(r)){if(s=n(r),s===void 0&&(s=r),s===Iae&&(s=void 0),this.autoFreeze_&&HD(s,!0),a){const i=[],l=[];Tp(gk).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:l}),a(i,l)}return s}else dd(1,r)},this.produceWithPatches=(r,n)=>{if(Jg(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},dP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),dP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),dP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Bd(e)||dd(8),BA(e)&&(e=wd(e));const r=a$(this),n=bk(r,e,void 0);return n[Ql].isManual_=!0,vk(r),n}finishDraft(e,r){const n=e&&e[Ql];(!n||!n.isManual_)&&dd(9);const{scope_:a}=n;return n$(a,r),s$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Tp(gk).applyPatches_;return BA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function bk(t,e,r,n){const[a,s]=O4(e)?Tp(bS).proxyMap_(e,r):D4(e)?Tp(bS).proxySet_(e,r):P9e(e,r);return((r==null?void 0:r.scope_)??jae()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?I9e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function wd(t){return BA(t)||dd(10,t),Dae(t)}function Dae(t){if(!Bd(t)||R4(t))return t;const e=t[Ql];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=pk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=pk(t,!0);return k4(r,(a,s)=>{yS(r,a,Dae(s))},n),e&&(e.finalized_=!1),r}var k9e=new T9e,Rae=k9e.produce;function Mae(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var F9e=Mae(),O9e=Mae,D9e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gS:gS.apply(null,arguments)};function Uu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Vc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Sae(n)&&n.type===t,r}var Lae=class yy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,yy.prototype)}static get[Symbol.species](){return yy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new yy(...e[0].concat(this)):new yy(...e.concat(this))}};function o$(t){return Bd(t)?Rae(t,()=>{}):t}function PC(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function R9e(t){return typeof t=="boolean"}var M9e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new Lae;return r&&(R9e(r)?i.push(F9e):i.push(O9e(r.extraArgument))),i},Uae="RTK_autoBatch",is=()=>t=>({payload:t,meta:{[Uae]:!0}}),l$=t=>e=>{setTimeout(e,t)},Qae=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:l$(10):t.type==="callback"?t.queueNotification:l$(t.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Uae]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},L9e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Lae(t);return n&&a.push(Qae(typeof n=="object"?n:void 0)),a};function U9e(t){const e=M9e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(UD(r))l=Eae(r);else throw new Error(Vc(1));let c;typeof n=="function"?c=n(e):c=e();let u=gS;a&&(u=D9e({trace:!1,...typeof a=="object"&&a}));const d=v9e(...c),f=L9e(d);let h=typeof i=="function"?i(f):f();const A=u(...h);return _ae(l,s,A)}function Vae(t){const e={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Vc(28));if(l in e)throw new Error(Vc(29));return e[l]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function Q9e(t){return typeof t=="function"}function V9e(t,e){let[r,n,a]=Vae(e),s;if(Q9e(t))s=()=>o$(t());else{const l=o$(t);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(BA(d)){const A=f(d,c);return A===void 0?d:A}else{if(Bd(d))return Rae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var H9e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$9e=(t=21)=>{let e="",r=t;for(;r--;)e+=H9e[Math.random()*64|0];return e},K9e=Symbol.for("rtk-slice-createasyncthunk");function G9e(t,e){return`${t}/${e}`}function q9e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[K9e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Vc(11));const l=(typeof a.reducers=="function"?a.reducers(W9e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,B){const P=typeof w=="string"?w:w.type;if(!P)throw new Error(Vc(12));if(P in u.sliceCaseReducersByType)throw new Error(Vc(13));return u.sliceCaseReducersByType[P]=B,d},addMatcher(w,B){return u.sliceMatchers.push({matcher:w,reducer:B}),d},exposeAction(w,B){return u.actionCreators[w]=B,d},exposeCaseReducer(w,B){return u.sliceCaseReducersByName[w]=B,d}};c.forEach(w=>{const B=l[w],P={reducerName:w,type:G9e(s,w),createNotation:typeof a.reducers=="function"};Y9e(B)?Z9e(P,B,d,e):X9e(P,B,d)});function f(){const[w={},B=[],P=void 0]=typeof a.extraReducers=="function"?Vae(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return V9e(a.initialState,E=>{for(let I in _)E.addCase(I,_[I]);for(let I of u.sliceMatchers)E.addMatcher(I.matcher,I.reducer);for(let I of B)E.addMatcher(I.matcher,I.reducer);P&&E.addDefaultCase(P)})}const h=w=>w,A=new Map,m=new WeakMap;let p;function g(w,B){return p||(p=f()),p(w,B)}function x(){return p||(p=f()),p.getInitialState()}function y(w,B=!1){function P(E){let I=E[w];return typeof I>"u"&&B&&(I=PC(m,P,x)),I}function _(E=h){const I=PC(A,B,()=>new WeakMap);return PC(I,E,()=>{const O={};for(const[S,j]of Object.entries(a.selectors??{}))O[S]=z9e(j,E,()=>PC(m,E,x),B);return O})}return{reducerPath:w,getSelectors:_,get selectors(){return _(P)},selectSlice:P}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:B,...P}={}){const _=B??i;return w.inject({reducerPath:_,reducer:g},P),{...b,...y(_,!0)}}};return b}}function z9e(t,e,r,n){function a(s,...i){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return a.unwrapped=t,a}var mc=q9e();function W9e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function X9e({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!J9e(n))throw new Error(Vc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?Uu(t,i):Uu(t))}function Y9e(t){return t._reducerDefinitionType==="asyncThunk"}function J9e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Z9e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Vc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),i&&n.addCase(f.fulfilled,i),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:i||jC,pending:l||jC,rejected:c||jC,settled:u||jC})}function jC(){}var eQe="task",Hae="listener",$ae="completed",$D="cancelled",tQe=`task-${$D}`,rQe=`task-${$ae}`,wk=`${Hae}-${$D}`,nQe=`${Hae}-${$ae}`,L4=class{constructor(t){ta(this,"name","TaskAbortError");ta(this,"message");this.code=t,this.message=`${eQe} ${$D} (reason: ${t})`}},KD=(t,e)=>{if(typeof t!="function")throw new TypeError(Vc(32))},CS=()=>{},Kae=(t,e=CS)=>(t.catch(e),t),Gae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),ap=t=>{if(t.aborted)throw new L4(t.reason)};function qae(t,e){let r=CS;return new Promise((n,a)=>{const s=()=>a(new L4(t.reason));if(t.aborted){s();return}r=Gae(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=CS})}var aQe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof L4?"cancelled":"rejected",error:r}}finally{e==null||e()}},_S=t=>e=>Kae(qae(t,e).then(r=>(ap(t),r))),zae=t=>{const e=_S(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Ox}=Object,c$={},U4="listenerMiddleware",sQe=(t,e)=>{const r=n=>Gae(t,()=>n.abort(t.reason));return(n,a)=>{KD(n);const s=new AbortController;r(s);const i=aQe(async()=>{ap(t),ap(s.signal);const l=await n({pause:_S(s.signal),delay:zae(s.signal),signal:s.signal});return ap(s.signal),l},()=>s.abort(rQe));return a!=null&&a.autoJoin&&e.push(i.catch(CS)),{result:_S(t)(i),cancel(){s.abort(tQe)}}}},iQe=(t,e)=>{const r=async(n,a)=>{ap(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await qae(e,Promise.race(l));return ap(e),c}finally{s()}};return(n,a)=>Kae(r(n,a))},Wae=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Uu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Vc(21));return KD(s),{predicate:a,type:e,effect:s}},Xae=Ox(t=>{const{type:e,predicate:r,effect:n}=Wae(t);return{id:$9e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Vc(22))}}},{withTypes:()=>Xae}),u$=(t,e)=>{const{type:r,effect:n,predicate:a}=Wae(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Nk=t=>{t.pending.forEach(e=>{e.abort(wk)})},oQe=(t,e)=>()=>{for(const r of e.keys())Nk(r);t.clear()},d$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Yae=Ox(Uu(`${U4}/add`),{withTypes:()=>Yae}),lQe=Uu(`${U4}/removeAll`),Jae=Ox(Uu(`${U4}/remove`),{withTypes:()=>Jae}),cQe=(...t)=>{console.error(`${U4}/error`,...t)},fw=(t={})=>{const e=new Map,r=new Map,n=A=>{const m=r.get(A)??0;r.set(A,m+1)},a=A=>{const m=r.get(A)??1;m===1?r.delete(A):r.set(A,m-1)},{extra:s,onError:i=cQe}=t;KD(i);const l=A=>(A.unsubscribe=()=>e.delete(A.id),e.set(A.id,A),m=>{A.unsubscribe(),m!=null&&m.cancelActive&&Nk(A)}),c=A=>{const m=u$(e,A)??Xae(A);return l(m)};Ox(c,{withTypes:()=>c});const u=A=>{const m=u$(e,A);return m&&(m.unsubscribe(),A.cancelActive&&Nk(m)),!!m};Ox(u,{withTypes:()=>u});const d=async(A,m,p,g)=>{const x=new AbortController,y=iQe(c,x.signal),b=[];try{A.pending.add(x),n(A),await Promise.resolve(A.effect(m,Ox({},p,{getOriginalState:g,condition:(w,B)=>y(w,B).then(Boolean),take:y,delay:zae(x.signal),pause:_S(x.signal),extra:s,signal:x.signal,fork:sQe(x.signal,b),unsubscribe:A.unsubscribe,subscribe:()=>{e.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((w,B,P)=>{w!==x&&(w.abort(wk),P.delete(w))})},cancel:()=>{x.abort(wk),A.pending.delete(x)},throwIfCancelled:()=>{ap(x.signal)}})))}catch(w){w instanceof L4||d$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(nQe),a(A),A.pending.delete(x)}},f=oQe(e,r);return{middleware:A=>m=>p=>{if(!Sae(p))return m(p);if(Yae.match(p))return c(p.payload);if(lQe.match(p)){f();return}if(Jae.match(p))return u(p.payload);let g=A.getState();const x=()=>{if(g===c$)throw new Error(Vc(23));return g};let y;try{if(y=m(p),e.size>0){const b=A.getState(),w=Array.from(e.values());for(const B of w){let P=!1;try{P=B.predicate(p,b,g)}catch(_){P=!1,d$(i,_,{raisedBy:"predicate"})}P&&d(B,p,A,x)}}}finally{g=c$}return y},startListening:c,stopListening:u,clearListeners:f}};function Vc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var uQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Zae=mc({name:"chartLayout",initialState:uQe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:dQe,setLayout:fQe,setChartSize:AQe,setScale:hQe}=Zae.actions,mQe=Zae.reducer;function ese(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Bs(t){return Number.isFinite(t)}function D0(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function f$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(r),!0).forEach(function(n){pQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pQe(t,e,r){return(e=gQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gQe(t){var e=xQe(t,"string");return typeof e=="symbol"?e:e+""}function xQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Za(t,e,r){return ho(t)||ho(e)?r:vf(e)?jp(t,e,r):typeof e=="function"?e(t):r}var vQe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=e;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&Kr(t[s]))return xx(xx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&Kr(t[i]))return xx(xx({},t),{},{[i]:t[i]+(a||0)})}return t},tg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",A$=1e-4,yQe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-A$,s=Math.max(n[0],n[1])+A$,i=t(e[0]),l=t(e[r-1]);(i<a||i>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},bQe=(t,e)=>{if(!e||e.length!==2||!Kr(e[0])||!Kr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Kr(t[0])||t[0]<r)&&(a[0]=r),(!Kr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},wQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],h=xf(d)?f:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},NQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var l=t[i],c=l==null?void 0:l[a];if(c!=null){var u=xf(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},CQe={sign:wQe,expand:e7e,none:Pp,silhouette:t7e,wiggle:r7e,positive:NQe},_Qe=(t,e,r)=>{var n,a=(n=CQe[r])!==null&&n!==void 0?n:Pp,s=ZUe().keys(e).value((l,c)=>Number(Za(l,c,0))).order(fk).offset(a),i=s(t);return i.forEach((l,c)=>{l.forEach((u,d)=>{var f=Za(t[d],e[c],0);Array.isArray(f)&&f.length===2&&Kr(f[0])&&Kr(f[1])&&(u[0]=f[0],u[1]=f[1])})}),i};function EQe(t){return t==null?void 0:String(t)}var h$=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var l=Za(s,e.dataKey,e.scale.domain()[i]);return ho(l)?null:e.scale(l)-a/2+n},SQe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},IQe=t=>{var e=t.flat(2).filter(Kr);return[Math.min(...e),Math.max(...e)]},BQe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],PQe=(t,e,r)=>{if(t!=null)return BQe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,l=i.reduce((c,u)=>{var d=ese(u,e,r),f=IQe(d);return!Bs(f[0])||!Bs(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},m$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ES=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=j4(e,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function g$(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return xx(xx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function Q4(t,e){if(t)return String(t);if(typeof e=="string")return e}var jQe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},TQe=(t,e)=>e==="centric"?t.angle:t.radius,HA=t=>t.layout.width,$A=t=>t.layout.height,kQe=t=>t.layout.scale,tse=t=>t.layout.margin,V4=Tt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),H4=Tt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),rse="data-recharts-item-index",nse="data-recharts-item-id",Aw=60;function x$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(r),!0).forEach(function(n){FQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FQe(t,e,r){return(e=OQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OQe(t){var e=DQe(t,"string");return typeof e=="symbol"?e:e+""}function DQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RQe=t=>t.brush.height;function MQe(t){var e=H4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Aw;return r+a}return r},0)}function LQe(t){var e=H4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Aw;return r+a}return r},0)}function UQe(t){var e=V4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function QQe(t){var e=V4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Vi=Tt([HA,$A,tse,RQe,MQe,LQe,UQe,QQe,Nae,f9e],(t,e,r,n,a,s,i,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+i,bottom:(r.bottom||0)+l},h=TC(TC({},f),d),A=h.bottom;h.bottom+=n,h=vQe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return TC(TC({brushBottom:A},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),VQe=Tt(Vi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),GD=Tt(HA,$A,(t,e)=>({x:0,y:0,width:t,height:e})),HQe=v.createContext(null),Yc=()=>v.useContext(HQe)!=null,$4=t=>t.brush,K4=Tt([$4,Vi,tse],(t,e,r)=>({height:t.height,x:Kr(t.x)?t.x:e.left,y:Kr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Kr(t.width)?t.width:e.width})),ase={},sse={},ise={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},f=()=>{u&&d(),p()};let h=null;const A=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,l=y;const b=h==null;A(),c&&b&&d()};return x.schedule=A,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(ise);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ise;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),A=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return A.cancel=h.cancel,A.flush=m,A}t.debounce=r})(sse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sse;function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:l})}t.throttle=r})(ase);var $Qe=ase.throttle;const KQe=OA($Qe);var v$=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},ose=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,l=IA(n)?t:Number(n),c=IA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:l,calculatedHeight:c}},GQe={width:0,height:0,overflow:"visible"},qQe={width:0,overflowX:"visible"},zQe={height:0,overflowY:"visible"},WQe={},XQe=t=>{var{width:e,height:r}=t,n=IA(e),a=IA(r);return n&&a?GQe:n?qQe:a?zQe:WQe};function YQe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Ck(){return Ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ck.apply(null,arguments)}function y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(r),!0).forEach(function(n){JQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JQe(t,e,r){return(e=ZQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZQe(t){var e=eVe(t,"string");return typeof e=="symbol"?e:e+""}function eVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lse=v.createContext({width:-1,height:-1});function tVe(t){return D0(t.width)&&D0(t.height)}function cse(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return tVe(a)?v.createElement(lse.Provider,{value:a},e):null}var qD=()=>v.useContext(lse),rVe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:A,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=A,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((E,I)=>{y(O=>{var S=Math.round(E),j=Math.round(I);return O.containerWidth===S&&O.containerHeight===j?O:{containerWidth:S,containerHeight:j}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return cw;var E=j=>{var D,{width:J,height:ge}=j[0].contentRect;b(J,ge),(D=g.current)===null||D===void 0||D.call(g,J,ge)};d>0&&(E=KQe(E,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(E),{width:O,height:S}=p.current.getBoundingClientRect();return b(O,S),I.observe(p.current),()=>{I.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:B}=x;v$(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:_}=ose(w,B,{width:a,height:s,aspect:r,maxHeight:c});return v$(P!=null&&P>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,_,a,s,i,l,r),v.createElement("div",{id:f?"".concat(f):void 0,className:wa("recharts-responsive-container",h),style:b$(b$({},m),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:XQe({width:a,height:s})},v.createElement(cse,{width:P,height:_},u)))}),w$=v.forwardRef((t,e)=>{var r=qD();if(D0(r.width)&&D0(r.height))return t.children;var{width:n,height:a}=YQe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=ose(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Kr(s)&&Kr(i)?v.createElement(cse,{width:s,height:i},t.children):v.createElement(rVe,Ck({},t,{width:n,height:a,ref:e}))});function use(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var G4=()=>{var t,e=Yc(),r=Qr(VQe),n=Qr(K4),a=(t=Qr($4))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},nVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aVe=()=>{var t;return(t=Qr(Vi))!==null&&t!==void 0?t:nVe},dse=()=>Qr(HA),fse=()=>Qr($A),sVe=()=>Qr(t=>t.layout.margin),Zn=t=>t.layout.layoutType,hw=()=>Qr(Zn),iVe=()=>{var t=hw();return t!==void 0},q4=t=>{var e=Ha(),r=Yc(),{width:n,height:a}=t,s=qD(),i=n,l=a;return s&&(i=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&D0(i)&&D0(l)&&e(AQe({width:i,height:l}))},[e,r,i,l]),null},Ase=Symbol.for("immer-nothing"),N$=Symbol.for("immer-draftable"),qc=Symbol.for("immer-state");function fd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hb=Object.getPrototypeOf;function ov(t){return!!t&&!!t[qc]}function kp(t){var e;return t?hse(t)||Array.isArray(t)||!!t[N$]||!!((e=t.constructor)!=null&&e[N$])||mw(t)||W4(t):!1}var oVe=Object.prototype.constructor.toString(),C$=new WeakMap;function hse(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=C$.get(r);return n===void 0&&(n=Function.toString.call(r),C$.set(r,n)),n===oVe}function SS(t,e,r=!0){z4(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function z4(t){const e=t[qc];return e?e.type_:Array.isArray(t)?1:mw(t)?2:W4(t)?3:0}function _k(t,e){return z4(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function mse(t,e,r){const n=z4(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function lVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function mw(t){return t instanceof Map}function W4(t){return t instanceof Set}function _m(t){return t.copy_||t.base_}function Ek(t,e){if(mw(t))return new Map(t);if(W4(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=hse(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[qc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(hb(t),n)}else{const n=hb(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function zD(t,e=!1){return X4(t)||ov(t)||!kp(t)||(z4(t)>1&&Object.defineProperties(t,{set:kC,add:kC,clear:kC,delete:kC}),Object.freeze(t),e&&Object.values(t).forEach(r=>zD(r,!0))),t}function cVe(){fd(2)}var kC={value:cVe};function X4(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var uVe={};function Fp(t){const e=uVe[t];return e||fd(0,t),e}var mb;function pse(){return mb}function dVe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _$(t,e){e&&(Fp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Sk(t){Ik(t),t.drafts_.forEach(fVe),t.drafts_=null}function Ik(t){t===mb&&(mb=t.parent_)}function E$(t){return mb=dVe(mb,t)}function fVe(t){const e=t[qc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function S$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[qc].modified_&&(Sk(e),fd(4)),kp(t)&&(t=IS(e,t),e.parent_||BS(e,t)),e.patches_&&Fp("Patches").generateReplacementPatches_(r[qc].base_,t,e.patches_,e.inversePatches_)):t=IS(e,r,[]),Sk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Ase?t:void 0}function IS(t,e,r){if(X4(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[qc];if(!a)return SS(e,(s,i)=>I$(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return BS(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),SS(i,(c,u)=>I$(t,a,s,c,u,r,l),n),BS(t,s,!1),r&&t.patches_&&Fp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function I$(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const l=X4(a);if(!(l&&!i)){if(ov(a)){const c=s&&e&&e.type_!==3&&!_k(e.assigned_,n)?s.concat(n):void 0,u=IS(t,a,c);if(mse(r,n,u),ov(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(kp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;IS(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(mw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&BS(t,a)}}}function BS(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zD(e,r)}function AVe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:pse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=WD;r&&(a=[n],s=pb);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var WD={get(t,e){if(e===qc)return t;const r=_m(t);if(!_k(r,e))return hVe(t,r,e);const n=r[e];return t.finalized_||!kp(n)?n:n===AP(t.base_,e)?(hP(t),t.copy_[e]=Pk(n,t)):n},has(t,e){return e in _m(t)},ownKeys(t){return Reflect.ownKeys(_m(t))},set(t,e,r){const n=gse(_m(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=AP(_m(t),e),s=a==null?void 0:a[qc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(lVe(r,a)&&(r!==void 0||_k(t.base_,e)))return!0;hP(t),Bk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return AP(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,hP(t),Bk(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=_m(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){fd(11)},getPrototypeOf(t){return hb(t.base_)},setPrototypeOf(){fd(12)}},pb={};SS(WD,(t,e)=>{pb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});pb.deleteProperty=function(t,e){return pb.set.call(this,t,e,void 0)};pb.set=function(t,e,r){return WD.set.call(this,t[0],e,r,t[0])};function AP(t,e){const r=t[qc];return(r?_m(r):t)[e]}function hVe(t,e,r){var a;const n=gse(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function gse(t,e){if(!(e in t))return;let r=hb(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=hb(r)}}function Bk(t){t.modified_||(t.modified_=!0,t.parent_&&Bk(t.parent_))}function hP(t){t.copy_||(t.copy_=Ek(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var mVe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&fd(6),n!==void 0&&typeof n!="function"&&fd(7);let a;if(kp(e)){const s=E$(this),i=Pk(e,void 0);let l=!0;try{a=r(i),l=!1}finally{l?Sk(s):Ik(s)}return _$(s,n),S$(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===Ase&&(a=void 0),this.autoFreeze_&&zD(a,!0),n){const s=[],i=[];Fp("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else fd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,c=>e(c,...l));let n,a;return[this.produce(e,r,(i,l)=>{n=i,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){kp(t)||fd(8),ov(t)&&(t=pVe(t));const e=E$(this),r=Pk(t,void 0);return r[qc].isManual_=!0,Ik(e),r}finishDraft(t,e){const r=t&&t[qc];(!r||!r.isManual_)&&fd(9);const{scope_:n}=r;return _$(n,e),S$(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Fp("Patches").applyPatches_;return ov(t)?n(t,e):this.produce(t,a=>n(a,e))}};function Pk(t,e){const r=mw(t)?Fp("MapSet").proxyMap_(t,e):W4(t)?Fp("MapSet").proxySet_(t,e):AVe(t,e);return(e?e.scope_:pse()).drafts_.push(r),r}function pVe(t){return ov(t)||fd(10,t),xse(t)}function xse(t){if(!kp(t)||X4(t))return t;const e=t[qc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ek(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Ek(t,!0);return SS(r,(a,s)=>{mse(r,a,xse(s))},n),e&&(e.finalized_=!1),r}var gVe=new mVe;gVe.produce;var xVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},vse=mc({name:"legend",initialState:xVe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:is()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=wd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:is()},removeLegendPayload:{reducer(t,e){var r=wd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:is()}}}),{setLegendSize:B$,setLegendSettings:vVe,addLegendPayload:yse,replaceLegendPayload:bse,removeLegendPayload:wse}=vse.actions,yVe=vse.reducer,bVe=["contextPayload"];function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jk.apply(null,arguments)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){wVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wVe(t,e,r){return(e=NVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NVe(t){var e=CVe(t,"string");return typeof e=="symbol"?e:e+""}function CVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ve(t,e){if(t==null)return{};var r,n,a=EVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function EVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function SVe(t){return t.value}function IVe(t){var{contextPayload:e}=t,r=_Ve(t,bVe),n=fae(e,t.payloadUniqBy,SVe),a=lv(lv({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(j7e,a)}function BVe(t,e,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),lv(lv({},u),d)}function PVe(t){var e=Ha();return v.useEffect(()=>{e(vVe(t))},[e,t]),null}function jVe(t){var e=Ha();return v.useEffect(()=>(e(B$(t)),()=>{e(B$({width:0,height:0}))}),[e,t]),null}function TVe(t,e,r,n){return t==="vertical"&&Kr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var kVe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Tk(t){var e=Vo(t,kVe),r=m9e(),n=NUe(),a=sVe(),{width:s,height:i,wrapperStyle:l,portal:c}=e,[u,d]=Cae([r]),f=dse(),h=fse();if(f==null||h==null)return null;var A=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=TVe(e.layout,i,s,A),p=c?l:lv(lv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},BVe(l,e,a,f,h,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(PVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(jVe,{width:u.width,height:u.height}),v.createElement(IVe,jk({},e,m,{margin:a,chartWidth:f,chartHeight:h,contextPayload:r})));return xd.createPortal(x,g)}Tk.displayName="Legend";function kk(){return kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kk.apply(null,arguments)}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){FVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FVe(t,e,r){return(e=OVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OVe(t){var e=DVe(t,"string");return typeof e=="symbol"?e:e+""}function DVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RVe(t){return Array.isArray(t)&&vf(t[0])&&vf(t[1])?t.join(" ~ "):t}var MVe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=t,A=()=>{if(s&&s.length){var B={padding:0,margin:0},P=(l?j4(s,l):s).map((_,E)=>{if(_.type==="none")return null;var I=_.formatter||i||RVe,{value:O,name:S}=_,j=O,D=S;if(I){var J=I(O,S,_,E,s);if(Array.isArray(J))[j,D]=J;else if(J!=null)j=J;else return null}var ge=mP({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:ge},vf(D)?v.createElement("span",{className:"recharts-tooltip-item-name"},D):null,vf(D)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},j),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:B},P)}return null},m=mP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=mP({margin:0},a),g=!ho(d),x=g?d:"",y=wa("recharts-default-tooltip",c),b=wa("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(x=f(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",kk({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),A())},V1="recharts-tooltip-wrapper",LVe={visibility:"hidden"};function UVe(t){var{coordinate:e,translateX:r,translateY:n}=t;return wa(V1,{["".concat(V1,"-right")]:Kr(r)&&e&&Kr(e.x)&&r>=e.x,["".concat(V1,"-left")]:Kr(r)&&e&&Kr(e.x)&&r<e.x,["".concat(V1,"-bottom")]:Kr(n)&&e&&Kr(e.y)&&n>=e.y,["".concat(V1,"-top")]:Kr(n)&&e&&Kr(e.y)&&n<e.y})}function T$(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Kr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var A=d,m=h;return A<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var p=f+l,g=h+u;return p>g?Math.max(d,h):Math.max(f,h)}function QVe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function VVe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=t,u,d,f;return i.height>0&&i.width>0&&r?(d=T$({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=T$({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=QVe({translateX:d,translateY:f,useTranslate3d:l})):u=LVe,{cssProperties:u,cssClasses:UVe({translateX:d,translateY:f,coordinate:r})}}function k$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(r),!0).forEach(function(n){Fk(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fk(t,e,r){return(e=HVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HVe(t){var e=$Ve(t,"string");return typeof e=="symbol"?e:e+""}function $Ve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class KVe extends v.PureComponent{constructor(){super(...arguments),Fk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:A,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=VVe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:A}),w=x?{}:FC(FC({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),B=FC(FC({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:B,ref:g},s)}}var Nse=()=>{var t;return(t=Qr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Ok(){return Ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ok.apply(null,arguments)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function O$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){GVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GVe(t,e,r){return(e=qVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qVe(t){var e=zVe(t,"string");return typeof e=="symbol"?e:e+""}function zVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D$={curveBasisClosed:VUe,curveBasisOpen:HUe,curveBasis:QUe,curveBumpX:SUe,curveBumpY:IUe,curveLinearClosed:$Ue,curveLinear:C4,curveMonotoneX:KUe,curveMonotoneY:GUe,curveNatural:qUe,curveStep:zUe,curveStepAfter:XUe,curveStepBefore:WUe},PS=t=>Bs(t.x)&&Bs(t.y),R$=t=>t.base!=null&&PS(t.base)&&PS(t),H1=t=>t.x,$1=t=>t.y,WVe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(lw(t));return(r==="curveMonotone"||r==="curveBump")&&e?D$["".concat(r).concat(e==="vertical"?"Y":"X")]:D$[r]||C4},XVe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=WVe(e,a),l=s?r.filter(PS):r,c;if(Array.isArray(n)){var u=r.map((A,m)=>O$(O$({},A),{},{base:n[m]}));a==="vertical"?c=EC().y($1).x1(H1).x0(A=>A.base.x):c=EC().x(H1).y1($1).y0(A=>A.base.y);var d=c.defined(R$).curve(i),f=s?u.filter(R$):u;return d(f)}a==="vertical"&&Kr(n)?c=EC().y($1).x1(H1).x0(n):Kr(n)?c=EC().x(H1).y1($1).y0(n):c=kne().x(H1).y($1);var h=c.defined(PS).curve(i);return h(l)},XD=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=hw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?XVe(i):n;return v.createElement("path",Ok({},gf(t),x7e(t),{className:wa("recharts-curve",e),d:l===null?void 0:l,ref:a}))},YVe=["x","y","top","left","width","height","className"];function Dk(){return Dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dk.apply(null,arguments)}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function JVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(r),!0).forEach(function(n){ZVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZVe(t,e,r){return(e=eHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eHe(t){var e=tHe(t,"string");return typeof e=="symbol"?e:e+""}function tHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rHe(t,e){if(t==null)return{};var r,n,a=nHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var aHe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),sHe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=t,c=rHe(t,YVe),u=JVe({x:e,y:r,top:n,left:a,width:s,height:i},c);return!Kr(e)||!Kr(r)||!Kr(s)||!Kr(i)||!Kr(n)||!Kr(a)?null:v.createElement("path",Dk({},Lu(u),{className:wa("recharts-cross",l),d:aHe(e,r,s,i,n,a)}))};function iHe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function L$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function U$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(r),!0).forEach(function(n){oHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oHe(t,e,r){return(e=lHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lHe(t){var e=cHe(t,"string");return typeof e=="symbol"?e:e+""}function cHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uHe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Cse=(t,e,r)=>t.map(n=>"".concat(uHe(n)," ").concat(e,"ms ").concat(r)).join(","),dHe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),gb=(t,e)=>Object.keys(e).reduce((r,n)=>U$(U$({},r),{},{[n]:t(n,e[n])}),{});function Q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(r),!0).forEach(function(n){fHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fHe(t,e,r){return(e=AHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AHe(t){var e=hHe(t,"string");return typeof e=="symbol"?e:e+""}function hHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jS=(t,e,r)=>t+(e-t)*r,Rk=t=>{var{from:e,to:r}=t;return e!==r},_se=(t,e,r)=>{var n=gb((a,s)=>{if(Rk(s)){var[i,l]=t(s.from,s.to,s.velocity);return Pi(Pi({},s),{},{from:i,velocity:l})}return s},e);return r<1?gb((a,s)=>Rk(s)&&n[a]!=null?Pi(Pi({},s),{},{velocity:jS(s.velocity,n[a].velocity,r),from:jS(s.from,n[a].from,r)}):s,e):_se(t,n,r-1)};function mHe(t,e,r,n,a,s){var i,l=n.reduce((h,A)=>Pi(Pi({},h),{},{[A]:{from:t[A],velocity:0,to:e[A]}}),{}),c=()=>gb((h,A)=>A.from,l),u=()=>!Object.values(l).filter(Rk).length,d=null,f=h=>{i||(i=h);var A=h-i,m=A/r.dt;l=_se(r,l,m),a(Pi(Pi(Pi({},t),e),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function pHe(t,e,r,n,a,s,i){var l=null,c=a.reduce((f,h)=>{var A=t[h],m=e[h];return A==null||m==null?f:Pi(Pi({},f),{},{[h]:[A,m]})},{}),u,d=f=>{u||(u=f);var h=(f-u)/n,A=gb((p,g)=>jS(...g,r(h)),c);if(s(Pi(Pi(Pi({},t),e),A)),h<1)l=i.setTimeout(d);else{var m=gb((p,g)=>jS(...g,r(1)),c);s(Pi(Pi(Pi({},t),e),m))}};return()=>(l=i.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const gHe=(t,e,r,n,a,s)=>{var i=dHe(t,e);return r==null?()=>(a(Pi(Pi({},t),e)),()=>{}):r.isStepper===!0?mHe(t,e,r,i,a,s):pHe(t,e,r,n,i,a,s)};var TS=1e-4,Ese=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Sse=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),V$=(t,e)=>r=>{var n=Ese(t,e);return Sse(n,r)},xHe=(t,e)=>r=>{var n=Ese(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return Sse(a,r)},vHe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},yHe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=vHe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},bHe=(t,e,r,n)=>{var a=V$(t,r),s=V$(e,n),i=xHe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var A=a(f)-d,m=i(f);if(Math.abs(A-d)<TS||m<TS)return s(f);f=l(f-A/m)}return s(f)};return c.isStepper=!1,c},H$=function(){return bHe(...yHe(...arguments))},wHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<TS&&Math.abs(f)<TS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},NHe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return H$(t);case"spring":return wHe();default:if(t.split("(")[0]==="cubic-bezier")return H$(t)}return typeof t=="function"?t:null};function CHe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class _He{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function EHe(){return CHe(new _He)}var SHe=v.createContext(EHe);function IHe(t,e){var r=v.useContext(SHe);return v.useMemo(()=>e??r(t),[t,e,r])}var BHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Y4={isSsr:BHe()},PHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$$={t:0},pP={t:1};function J4(t){var e=Vo(t,PHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!Y4.isSsr:r,f=IHe(e.animationId,e.animationManager),[h,A]=v.useState(d?$$:pP),m=v.useRef(null);return v.useEffect(()=>{d||A(pP)},[d]),v.useEffect(()=>{if(!d||!n)return cw;var p=gHe($$,pP,NHe(s),a,A,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,i,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,i,c,l,f]),u(h.t)}function Z4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(ub(e)),n=v.useRef(t);return n.current!==t&&(r.current=ub(e),n.current=t),r.current}var jHe=["radius"],THe=["radius"],K$,G$,q$,z$,W$,X$,Y$,J$,Z$,eK;function tK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(r),!0).forEach(function(n){kHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kHe(t,e,r){return(e=FHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FHe(t){var e=OHe(t,"string");return typeof e=="symbol"?e:e+""}function OHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kS.apply(null,arguments)}function nK(t,e){if(t==null)return{};var r,n,a=DHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function DHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Xd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var aK=(t,e,r,n,a)=>{var s=r0(r),i=r0(n),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],A=0,m=4;A<m;A++)h[A]=a[A]>l?l:a[A];f=Ds(K$||(K$=Xd(["M",",",""])),t,e+c*h[0]),h[0]>0&&(f+=Ds(G$||(G$=Xd(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),f+=Ds(q$||(q$=Xd(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(f+=Ds(z$||(z$=Xd(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),f+=Ds(W$||(W$=Xd(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(f+=Ds(X$||(X$=Xd(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),f+=Ds(Y$||(Y$=Xd(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(f+=Ds(J$||(J$=Xd(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=Ds(Z$||(Z$=Xd(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=Ds(eK||(eK=Xd(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},sK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ise=t=>{var e=Vo(t,sK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&a(he)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:h,animationBegin:A,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),B=Z4(w,"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var P=wa("recharts-rectangle",d);if(!p){var _=Lu(e),{radius:E}=_,I=nK(_,jHe);return v.createElement("path",kS({},I,{x:r0(s),y:r0(i),width:r0(l),height:r0(c),radius:typeof u=="number"?u:void 0,className:P,d:aK(s,i,l,c,u)}))}var O=g.current,S=x.current,j=y.current,D=b.current,J="0px ".concat(n===-1?1:n,"px"),ge="".concat(n,"px 0px"),se=Cse(["strokeDasharray"],h,typeof f=="string"?f:sK.animationEasing);return v.createElement(J4,{animationId:B,key:B,canBegin:n>0,duration:h,easing:f,isActive:p,begin:A},he=>{var me=Bi(O,l,he),Z=Bi(S,c,he),ve=Bi(j,s,he),Se=Bi(D,i,he);r.current&&(g.current=me,x.current=Z,y.current=ve,b.current=Se);var k;m?he>0?k={transition:se,strokeDasharray:ge}:k={strokeDasharray:J}:k={strokeDasharray:ge};var F=Lu(e),{radius:H}=F,Q=nK(F,THe);return v.createElement("path",kS({},Q,{radius:typeof u=="number"?u:void 0,className:P,d:aK(ve,Se,me,Z,u),ref:r,style:rK(rK({},k),e.style)}))})};function iK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(r),!0).forEach(function(n){RHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RHe(t,e,r){return(e=MHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MHe(t){var e=LHe(t,"string");return typeof e=="symbol"?e:e+""}function LHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FS=Math.PI/180,UHe=t=>t*180/Math.PI,hi=(t,e,r,n)=>({x:t+Math.cos(-FS*n)*r,y:e+Math.sin(-FS*n)*r}),Bse=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},QHe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},VHe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=QHe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:UHe(c),angleInRadian:c}},HHe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},$He=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},KHe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=VHe({x:r,y:n},e),{innerRadius:i,outerRadius:l}=e;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=HHe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?oK(oK({},e),{},{radius:a,angle:$He(d,e)}):null};function Pse(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=hi(e,r,n,a),l=hi(e,r,n,s);return{points:[i,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var lK,cK,uK,dK,fK,AK,hK;function Mk(){return Mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mk.apply(null,arguments)}function Qm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GHe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},OC=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=t,u=l*(i?1:-1)+n,d=Math.asin(l/u)/FS,f=c?a:a+s*d,h=hi(e,r,u,f),A=hi(e,r,n,f),m=c?a-s*d:a,p=hi(e,r,u*Math.cos(d*FS),m);return{center:h,circleTangency:A,lineTangency:p,theta:d}},jse=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,l=GHe(s,i),c=s+l,u=hi(e,r,a,s),d=hi(e,r,a,c),f=Ds(lK||(lK=Qm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var h=hi(e,r,n,s),A=hi(e,r,n,c);f+=Ds(cK||(cK=Qm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),A.x,A.y,n,n,+(Math.abs(l)>180),+(s<=c),h.x,h.y)}else f+=Ds(uK||(uK=Qm(["L ",","," Z"])),e,r);return f},qHe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Lo(u-c),{circleTangency:f,lineTangency:h,theta:A}=OC({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=OC({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-A-g;if(x<0)return i?Ds(dK||(dK=Qm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):jse({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Ds(fK||(fK=Qm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),f.x,f.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:B}=OC({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:P,lineTangency:_,theta:E}=OC({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=l?Math.abs(c-u):Math.abs(c-u)-B-E;if(I<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=Ds(AK||(AK=Qm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),P.x,P.y,n,n,+(I>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=Ds(hK||(hK=Qm(["L",",","Z"])),e,r);return y},zHe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Tse=t=>{var e=Vo(t,zHe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var h=wa("recharts-sector",f),A=s-a,m=Al(i,A,0,!0),p;return m>0&&Math.abs(u-d)<360?p=qHe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,A/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=jse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",Mk({},Lu(e),{className:h,d:p}))};function WHe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(zne(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:l}=e,c=hi(n,a,s,l),u=hi(n,a,i,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Pse(e)}}var kse={},Fse={},Ose={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Ose);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ose;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Fse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD,r=Fse;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}t.range=n})(kse);var XHe=kse.range;const Dse=OA(XHe);function y0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function YHe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YD(t){let e,r,n;t.length!==2?(e=y0,r=(l,c)=>y0(t(l),c),n=(l,c)=>t(l)-c):(e=t===y0||t===YHe?t:JHe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:s}}function JHe(){return 0}function Rse(t){return t===null?NaN:+t}function*ZHe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const e$e=YD(y0),pw=e$e.right;YD(Rse).center;class mK extends Map{constructor(e,r=n$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(pK(this,e))}has(e){return super.has(pK(this,e))}set(e,r){return super.set(t$e(this,e),r)}delete(e){return super.delete(r$e(this,e))}}function pK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function t$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function r$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function n$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function a$e(t=y0){if(t===y0)return Mse;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Mse(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const s$e=Math.sqrt(50),i$e=Math.sqrt(10),o$e=Math.sqrt(2);function OS(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=s$e?10:s>=i$e?5:s>=o$e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?OS(t,e,r*2):[l,c,u]}function Lk(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?OS(e,t,r):OS(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function Uk(t,e,r){return e=+e,t=+t,r=+r,OS(t,e,r)[2]}function Qk(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Uk(e,t,r):Uk(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function gK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function xK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Lse(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Mse:a$e(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),A=Math.max(r,Math.floor(e-u*f/c+h)),m=Math.min(n,Math.floor(e+(c-u)*f/c+h));Lse(t,e,A,m,a)}const s=t[e];let i=r,l=n;for(K1(t,r,e),a(t[n],s)>0&&K1(t,r,n);i<l;){for(K1(t,i,l),++i,--l;a(t[i],s)<0;)++i;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?K1(t,r,l):(++l,K1(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function K1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function l$e(t,e,r){if(t=Float64Array.from(ZHe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return xK(t);if(e>=1)return gK(t);var n,a=(n-1)*e,s=Math.floor(a),i=gK(Lse(t,s).subarray(0,s+1)),l=xK(t.subarray(s+1));return i+(l-i)*(a-s)}}function c$e(t,e,r=Rse){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return i+(l-i)*(a-s)}}function u$e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Hu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function KA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Vk=Symbol("implicit");function JD(){var t=new mK,e=[],r=[],n=Vk;function a(s){let i=t.get(s);if(i===void 0){if(n!==Vk)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new mK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return JD(e,r).unknown(n)},Hu.apply(a,arguments),a}function ZD(){var t=JD().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,A=a<n,m=A?a:n,p=A?n:a;s=(p-m)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),l&&(m=Math.round(m),i=Math.round(i));var g=u$e(h).map(function(x){return m+s*x});return r(A?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return ZD(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Hu.apply(f(),arguments)}function Use(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Use(e())},t}function d$e(){return Use(ZD.apply(null,arguments).paddingInner(1))}function eR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Qse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function gw(){}var xb=.7,DS=1/xb,Dx="\\s*([+-]?\\d+)\\s*",vb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f$e=/^#([0-9a-f]{3,8})$/,A$e=new RegExp(`^rgb\\(${Dx},${Dx},${Dx}\\)$`),h$e=new RegExp(`^rgb\\(${hf},${hf},${hf}\\)$`),m$e=new RegExp(`^rgba\\(${Dx},${Dx},${Dx},${vb}\\)$`),p$e=new RegExp(`^rgba\\(${hf},${hf},${hf},${vb}\\)$`),g$e=new RegExp(`^hsl\\(${vb},${hf},${hf}\\)$`),x$e=new RegExp(`^hsla\\(${vb},${hf},${hf},${vb}\\)$`),vK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eR(gw,yb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yK,formatHex:yK,formatHex8:v$e,formatHsl:y$e,formatRgb:bK,toString:bK});function yK(){return this.rgb().formatHex()}function v$e(){return this.rgb().formatHex8()}function y$e(){return Vse(this).formatHsl()}function bK(){return this.rgb().formatRgb()}function yb(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=f$e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?wK(e):r===3?new ic(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?DC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?DC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=A$e.exec(t))?new ic(e[1],e[2],e[3],1):(e=h$e.exec(t))?new ic(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=m$e.exec(t))?DC(e[1],e[2],e[3],e[4]):(e=p$e.exec(t))?DC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=g$e.exec(t))?_K(e[1],e[2]/100,e[3]/100,1):(e=x$e.exec(t))?_K(e[1],e[2]/100,e[3]/100,e[4]):vK.hasOwnProperty(t)?wK(vK[t]):t==="transparent"?new ic(NaN,NaN,NaN,0):null}function wK(t){return new ic(t>>16&255,t>>8&255,t&255,1)}function DC(t,e,r,n){return n<=0&&(t=e=r=NaN),new ic(t,e,r,n)}function b$e(t){return t instanceof gw||(t=yb(t)),t?(t=t.rgb(),new ic(t.r,t.g,t.b,t.opacity)):new ic}function Hk(t,e,r,n){return arguments.length===1?b$e(t):new ic(t,e,r,n??1)}function ic(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}eR(ic,Hk,Qse(gw,{brighter(t){return t=t==null?DS:Math.pow(DS,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xb:Math.pow(xb,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ic(sp(this.r),sp(this.g),sp(this.b),RS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NK,formatHex:NK,formatHex8:w$e,formatRgb:CK,toString:CK}));function NK(){return`#${Vm(this.r)}${Vm(this.g)}${Vm(this.b)}`}function w$e(){return`#${Vm(this.r)}${Vm(this.g)}${Vm(this.b)}${Vm((isNaN(this.opacity)?1:this.opacity)*255)}`}function CK(){const t=RS(this.opacity);return`${t===1?"rgb(":"rgba("}${sp(this.r)}, ${sp(this.g)}, ${sp(this.b)}${t===1?")":`, ${t})`}`}function RS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function sp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vm(t){return t=sp(t),(t<16?"0":"")+t.toString(16)}function _K(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ad(t,e,r,n)}function Vse(t){if(t instanceof Ad)return new Ad(t.h,t.s,t.l,t.opacity);if(t instanceof gw||(t=yb(t)),!t)return new Ad;if(t instanceof Ad)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(e===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-e)/l+2:i=(e-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new Ad(i,l,c,t.opacity)}function N$e(t,e,r,n){return arguments.length===1?Vse(t):new Ad(t,e,r,n??1)}function Ad(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}eR(Ad,N$e,Qse(gw,{brighter(t){return t=t==null?DS:Math.pow(DS,t),new Ad(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xb:Math.pow(xb,t),new Ad(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ic(gP(t>=240?t-240:t+120,a,n),gP(t,a,n),gP(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ad(EK(this.h),RC(this.s),RC(this.l),RS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=RS(this.opacity);return`${t===1?"hsl(":"hsla("}${EK(this.h)}, ${RC(this.s)*100}%, ${RC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function EK(t){return t=(t||0)%360,t<0?t+360:t}function RC(t){return Math.max(0,Math.min(1,t||0))}function gP(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const tR=t=>()=>t;function C$e(t,e){return function(r){return t+r*e}}function _$e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function E$e(t){return(t=+t)==1?Hse:function(e,r){return r-e?_$e(e,r,t):tR(isNaN(e)?r:e)}}function Hse(t,e){var r=e-t;return r?C$e(t,r):tR(isNaN(t)?e:t)}const SK=function t(e){var r=E$e(e);function n(a,s){var i=r((a=Hk(a)).r,(s=Hk(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Hse(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function S$e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function I$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function B$e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Rv(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function P$e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function MS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function j$e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Rv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var $k=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xP=new RegExp($k.source,"g");function T$e(t){return function(){return t}}function k$e(t){return function(e){return t(e)+""}}function F$e(t,e){var r=$k.lastIndex=xP.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(t=t+"",e=e+"";(n=$k.exec(t))&&(a=xP.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:MS(n,a)})),r=xP.lastIndex;return r<e.length&&(s=e.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?k$e(c[0].x):T$e(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Rv(t,e){var r=typeof e,n;return e==null||r==="boolean"?tR(e):(r==="number"?MS:r==="string"?(n=yb(e))?(e=n,SK):F$e:e instanceof yb?SK:e instanceof Date?P$e:I$e(e)?S$e:Array.isArray(e)?B$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?j$e:MS)(t,e)}function rR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function O$e(t,e){e===void 0&&(e=t,t=Rv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function D$e(t){return function(){return t}}function LS(t){return+t}var IK=[0,1];function Dl(t){return t}function Kk(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:D$e(isNaN(e)?NaN:.5)}function R$e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function M$e(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=Kk(a,n),s=r(i,s)):(n=Kk(n,a),s=r(s,i)),function(l){return s(n(l))}}function L$e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Kk(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(l){var c=pw(t,l,1,n)-1;return s[c](a[c](l))}}function xw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function e3(){var t=IK,e=IK,r=Rv,n,a,s,i=Dl,l,c,u;function d(){var h=Math.min(t.length,e.length);return i!==Dl&&(i=R$e(t[0],t[h-1])),l=h>2?L$e:M$e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(n),e,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=l(e,t.map(n),MS)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,LS),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=rR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Dl,d()):i!==Dl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return n=h,a=A,d()}}function nR(){return e3()(Dl,Dl)}function U$e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function US(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function cv(t){return t=US(Math.abs(t)),t?t[1]:NaN}function Q$e(t,e){return function(r,n){for(var a=r.length,s=[],i=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[i=(i+1)%t.length];return s.reverse().join(e)}}function V$e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var H$e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bb(t){if(!(e=H$e.exec(t)))throw new Error("invalid format: "+t);var e;return new aR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bb.prototype=aR.prototype;function aR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $$e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var QS;function K$e(t,e){var r=US(t,e);if(!r)return QS=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(QS=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+US(t,Math.max(0,e+s-1))[0]}function BK(t,e){var r=US(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const PK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:U$e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>BK(t*100,e),r:BK,s:K$e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jK(t){return t}var TK=Array.prototype.map,kK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function G$e(t){var e=t.grouping===void 0||t.thousands===void 0?jK:Q$e(TK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?jK:V$e(TK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=bb(f);var A=f.fill,m=f.align,p=f.sign,g=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,B=f.trim,P=f.type;P==="n"?(b=!0,P="g"):PK[P]||(w===void 0&&(w=12),B=!0,P="g"),(x||A==="0"&&m==="=")&&(x=!0,A="0",m="=");var _=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),E=(g==="$"?n:/[%p]/.test(P)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),I=PK[P],O=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function S(j){var D=_,J=E,ge,se,he;if(P==="c")J=I(j)+J,j="";else{j=+j;var me=j<0||1/j<0;if(j=isNaN(j)?c:I(Math.abs(j),w),B&&(j=$$e(j)),me&&+j==0&&p!=="+"&&(me=!1),D=(me?p==="("?p:l:p==="-"||p==="("?"":p)+D,J=(P==="s"&&!isNaN(j)&&QS!==void 0?kK[8+QS/3]:"")+J+(me&&p==="("?")":""),O){for(ge=-1,se=j.length;++ge<se;)if(he=j.charCodeAt(ge),48>he||he>57){J=(he===46?a+j.slice(ge+1):j.slice(ge))+J,j=j.slice(0,ge);break}}}b&&!x&&(j=e(j,1/0));var Z=D.length+j.length+J.length,ve=Z<y?new Array(y-Z+1).join(A):"";switch(b&&x&&(j=e(ve+j,ve.length?y-J.length:1/0),ve=""),m){case"<":j=D+j+J+ve;break;case"=":j=D+ve+j+J;break;case"^":j=ve.slice(0,Z=ve.length>>1)+D+j+J+ve.slice(Z);break;default:j=ve+D+j+J;break}return s(j)}return S.toString=function(){return f+""},S}function d(f,h){var A=Math.max(-8,Math.min(8,Math.floor(cv(h)/3)))*3,m=Math.pow(10,-A),p=u((f=bb(f),f.type="f",f),{suffix:kK[8+A/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var MC,sR,$se;q$e({thousands:",",grouping:[3],currency:["$",""]});function q$e(t){return MC=G$e(t),sR=MC.format,$se=MC.formatPrefix,MC}function z$e(t){return Math.max(0,-cv(Math.abs(t)))}function W$e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cv(e)/3)))*3-cv(Math.abs(t)))}function X$e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cv(e)-cv(t))+1}function Kse(t,e,r,n){var a=Qk(t,e,r),s;switch(n=bb(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=W$e(a,i))&&(n.precision=s),$se(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=X$e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=z$e(a))&&(n.precision=s-(n.type==="%")*2);break}}return sR(n)}function Y0(t){var e=t.domain;return t.ticks=function(r){var n=e();return Lk(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Kse(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=Uk(i,l,r),u===c)return n[a]=i,n[s]=l,e(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Gse(){var t=nR();return t.copy=function(){return xw(t,Gse())},Hu.apply(t,arguments),Y0(t)}function qse(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,LS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return qse(t).unknown(e)},t=arguments.length?Array.from(t,LS):[0,1],Y0(r)}function zse(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function FK(t){return Math.log(t)}function OK(t){return Math.exp(t)}function Y$e(t){return-Math.log(-t)}function J$e(t){return-Math.exp(-t)}function Z$e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eKe(t){return t===10?Z$e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tKe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function DK(t){return(e,r)=>-t(-e,r)}function iR(t){const e=t(FK,OK),r=e.domain;let n=10,a,s;function i(){return a=tKe(n),s=eKe(n),r()[0]<0?(a=DK(a),s=DK(s),t(Y$e,J$e)):t(FK,OK),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(r(l),i()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),A=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&A-h<g){if(h=Math.floor(h),A=Math.ceil(A),u>0){for(;h<=A;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=A;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=Lk(u,d,g))}else x=Lk(h,A,Math.min(A-h,g)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=bb(c)).precision==null&&(c.trim=!0),c=sR(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(zse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Wse(){const t=iR(e3()).domain([1,10]);return t.copy=()=>xw(t,Wse()).base(t.base()),Hu.apply(t,arguments),t}function RK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function MK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function oR(t){var e=1,r=t(RK(e),MK(e));return r.constant=function(n){return arguments.length?t(RK(e=+n),MK(e)):e},Y0(r)}function Xse(){var t=oR(e3());return t.copy=function(){return xw(t,Xse()).constant(t.constant())},Hu.apply(t,arguments)}function LK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nKe(t){return t<0?-t*t:t*t}function lR(t){var e=t(Dl,Dl),r=1;function n(){return r===1?t(Dl,Dl):r===.5?t(rKe,nKe):t(LK(r),LK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Y0(e)}function cR(){var t=lR(e3());return t.copy=function(){return xw(t,cR()).exponent(t.exponent())},Hu.apply(t,arguments),t}function aKe(){return cR.apply(null,arguments).exponent(.5)}function UK(t){return Math.sign(t)*t*t}function sKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Yse(){var t=nR(),e=[0,1],r=!1,n;function a(s){var i=sKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(UK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,LS)).map(UK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Yse(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Hu.apply(a,arguments),Y0(a)}function Jse(){var t=[],e=[],r=[],n;function a(){var i=0,l=Math.max(1,e.length);for(r=new Array(l-1);++i<l;)r[i-1]=c$e(t,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:e[pw(r,i)]}return s.invertExtent=function(i){var l=e.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(y0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Jse().domain(t).range(e).unknown(n)},Hu.apply(s,arguments)}function Zse(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[pw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Zse().domain([t,e]).range(a).unknown(s)},Hu.apply(Y0(i),arguments)}function eie(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[pw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return eie().domain(t).range(e).unknown(r)},Hu.apply(a,arguments)}const vP=new Date,yP=new Date;function Hi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<i);return c},a.filter=s=>Hi(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;e(i,-1),!s(i););else for(;--l>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>(vP.setTime(+s),yP.setTime(+i),t(vP),t(yP),Math.floor(r(vP,yP))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const VS=Hi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);VS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):VS);VS.range;const sA=1e3,Pu=sA*60,iA=Pu*60,PA=iA*24,uR=PA*7,QK=PA*30,bP=PA*365,Hm=Hi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*sA)},(t,e)=>(e-t)/sA,t=>t.getUTCSeconds());Hm.range;const dR=Hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sA)},(t,e)=>{t.setTime(+t+e*Pu)},(t,e)=>(e-t)/Pu,t=>t.getMinutes());dR.range;const fR=Hi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pu)},(t,e)=>(e-t)/Pu,t=>t.getUTCMinutes());fR.range;const AR=Hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sA-t.getMinutes()*Pu)},(t,e)=>{t.setTime(+t+e*iA)},(t,e)=>(e-t)/iA,t=>t.getHours());AR.range;const hR=Hi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*iA)},(t,e)=>(e-t)/iA,t=>t.getUTCHours());hR.range;const vw=Hi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pu)/PA,t=>t.getDate()-1);vw.range;const t3=Hi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/PA,t=>t.getUTCDate()-1);t3.range;const tie=Hi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/PA,t=>Math.floor(t/PA));tie.range;function rg(t){return Hi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Pu)/uR)}const r3=rg(0),HS=rg(1),iKe=rg(2),oKe=rg(3),uv=rg(4),lKe=rg(5),cKe=rg(6);r3.range;HS.range;iKe.range;oKe.range;uv.range;lKe.range;cKe.range;function ng(t){return Hi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/uR)}const n3=ng(0),$S=ng(1),uKe=ng(2),dKe=ng(3),dv=ng(4),fKe=ng(5),AKe=ng(6);n3.range;$S.range;uKe.range;dKe.range;dv.range;fKe.range;AKe.range;const mR=Hi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mR.range;const pR=Hi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pR.range;const jA=Hi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());jA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});jA.range;const TA=Hi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());TA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});TA.range;function rie(t,e,r,n,a,s){const i=[[Hm,1,sA],[Hm,5,5*sA],[Hm,15,15*sA],[Hm,30,30*sA],[s,1,Pu],[s,5,5*Pu],[s,15,15*Pu],[s,30,30*Pu],[a,1,iA],[a,3,3*iA],[a,6,6*iA],[a,12,12*iA],[n,1,PA],[n,2,2*PA],[r,1,uR],[e,1,QK],[e,3,3*QK],[t,1,bP]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const A=f&&typeof f.range=="function"?f:c(u,d,f),m=A?A.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,A=YD(([,,g])=>g).right(i,h);if(A===i.length)return t.every(Qk(u/bP,d/bP,f));if(A===0)return VS.every(Math.max(Qk(u,d,f),1));const[m,p]=i[h/i[A-1][2]<i[A][2]/h?A-1:A];return m.every(p)}return[l,c]}const[hKe,mKe]=rie(TA,pR,n3,tie,hR,fR),[pKe,gKe]=rie(jA,mR,r3,vw,AR,dR);function wP(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function NP(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function G1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function xKe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,u=q1(a),d=z1(a),f=q1(s),h=z1(s),A=q1(i),m=z1(i),p=q1(l),g=z1(l),x=q1(c),y=z1(c),b={a:he,A:me,b:Z,B:ve,c:null,d:qK,e:qK,f:QKe,g:YKe,G:ZKe,H:MKe,I:LKe,j:UKe,L:nie,m:VKe,M:HKe,p:Se,q:k,Q:XK,s:YK,S:$Ke,u:KKe,U:GKe,V:qKe,w:zKe,W:WKe,x:null,X:null,y:XKe,Y:JKe,Z:eGe,"%":WK},w={a:F,A:H,b:Q,B:V,c:null,d:zK,e:zK,f:aGe,g:hGe,G:pGe,H:tGe,I:rGe,j:nGe,L:sie,m:sGe,M:iGe,p:Y,q:R,Q:XK,s:YK,S:oGe,u:lGe,U:cGe,V:uGe,w:dGe,W:fGe,x:null,X:null,y:AGe,Y:mGe,Z:gGe,"%":WK},B={a:O,A:S,b:j,B:D,c:J,d:KK,e:KK,f:FKe,g:$K,G:HK,H:GK,I:GK,j:PKe,L:kKe,m:BKe,M:jKe,p:I,q:IKe,Q:DKe,s:RKe,S:TKe,u:NKe,U:CKe,V:_Ke,w:wKe,W:EKe,x:ge,X:se,y:$K,Y:HK,Z:SKe,"%":OKe};b.x=P(r,b),b.X=P(n,b),b.c=P(e,b),w.x=P(r,w),w.X=P(n,w),w.c=P(e,w);function P(z,le){return function(K){var M=[],pe=-1,X=0,G=z.length,ie,Ie,Re;for(K instanceof Date||(K=new Date(+K));++pe<G;)z.charCodeAt(pe)===37&&(M.push(z.slice(X,pe)),(Ie=VK[ie=z.charAt(++pe)])!=null?ie=z.charAt(++pe):Ie=ie==="e"?" ":"0",(Re=le[ie])&&(ie=Re(K,Ie)),M.push(ie),X=pe+1);return M.push(z.slice(X,pe)),M.join("")}}function _(z,le){return function(K){var M=G1(1900,void 0,1),pe=E(M,z,K+="",0),X,G;if(pe!=K.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(le&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(X=NP(G1(M.y,0,1)),G=X.getUTCDay(),X=G>4||G===0?$S.ceil(X):$S(X),X=t3.offset(X,(M.V-1)*7),M.y=X.getUTCFullYear(),M.m=X.getUTCMonth(),M.d=X.getUTCDate()+(M.w+6)%7):(X=wP(G1(M.y,0,1)),G=X.getDay(),X=G>4||G===0?HS.ceil(X):HS(X),X=vw.offset(X,(M.V-1)*7),M.y=X.getFullYear(),M.m=X.getMonth(),M.d=X.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),G="Z"in M?NP(G1(M.y,0,1)).getUTCDay():wP(G1(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(G+5)%7:M.w+M.U*7-(G+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,NP(M)):wP(M)}}function E(z,le,K,M){for(var pe=0,X=le.length,G=K.length,ie,Ie;pe<X;){if(M>=G)return-1;if(ie=le.charCodeAt(pe++),ie===37){if(ie=le.charAt(pe++),Ie=B[ie in VK?le.charAt(pe++):ie],!Ie||(M=Ie(z,K,M))<0)return-1}else if(ie!=K.charCodeAt(M++))return-1}return M}function I(z,le,K){var M=u.exec(le.slice(K));return M?(z.p=d.get(M[0].toLowerCase()),K+M[0].length):-1}function O(z,le,K){var M=A.exec(le.slice(K));return M?(z.w=m.get(M[0].toLowerCase()),K+M[0].length):-1}function S(z,le,K){var M=f.exec(le.slice(K));return M?(z.w=h.get(M[0].toLowerCase()),K+M[0].length):-1}function j(z,le,K){var M=x.exec(le.slice(K));return M?(z.m=y.get(M[0].toLowerCase()),K+M[0].length):-1}function D(z,le,K){var M=p.exec(le.slice(K));return M?(z.m=g.get(M[0].toLowerCase()),K+M[0].length):-1}function J(z,le,K){return E(z,e,le,K)}function ge(z,le,K){return E(z,r,le,K)}function se(z,le,K){return E(z,n,le,K)}function he(z){return i[z.getDay()]}function me(z){return s[z.getDay()]}function Z(z){return c[z.getMonth()]}function ve(z){return l[z.getMonth()]}function Se(z){return a[+(z.getHours()>=12)]}function k(z){return 1+~~(z.getMonth()/3)}function F(z){return i[z.getUTCDay()]}function H(z){return s[z.getUTCDay()]}function Q(z){return c[z.getUTCMonth()]}function V(z){return l[z.getUTCMonth()]}function Y(z){return a[+(z.getUTCHours()>=12)]}function R(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var le=P(z+="",b);return le.toString=function(){return z},le},parse:function(z){var le=_(z+="",!1);return le.toString=function(){return z},le},utcFormat:function(z){var le=P(z+="",w);return le.toString=function(){return z},le},utcParse:function(z){var le=_(z+="",!0);return le.toString=function(){return z},le}}}var VK={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,vKe=/^%/,yKe=/[\\^$*+?|[\]().{}]/g;function Jn(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function bKe(t){return t.replace(yKe,"\\$&")}function q1(t){return new RegExp("^(?:"+t.map(bKe).join("|")+")","i")}function z1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function wKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function NKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function CKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function _Ke(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function EKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function HK(t,e,r){var n=mo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function $K(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function SKe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function IKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function BKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function KK(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function PKe(t,e,r){var n=mo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function GK(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function jKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function TKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function kKe(t,e,r){var n=mo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function FKe(t,e,r){var n=mo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function OKe(t,e,r){var n=vKe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function DKe(t,e,r){var n=mo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function RKe(t,e,r){var n=mo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function qK(t,e){return Jn(t.getDate(),e,2)}function MKe(t,e){return Jn(t.getHours(),e,2)}function LKe(t,e){return Jn(t.getHours()%12||12,e,2)}function UKe(t,e){return Jn(1+vw.count(jA(t),t),e,3)}function nie(t,e){return Jn(t.getMilliseconds(),e,3)}function QKe(t,e){return nie(t,e)+"000"}function VKe(t,e){return Jn(t.getMonth()+1,e,2)}function HKe(t,e){return Jn(t.getMinutes(),e,2)}function $Ke(t,e){return Jn(t.getSeconds(),e,2)}function KKe(t){var e=t.getDay();return e===0?7:e}function GKe(t,e){return Jn(r3.count(jA(t)-1,t),e,2)}function aie(t){var e=t.getDay();return e>=4||e===0?uv(t):uv.ceil(t)}function qKe(t,e){return t=aie(t),Jn(uv.count(jA(t),t)+(jA(t).getDay()===4),e,2)}function zKe(t){return t.getDay()}function WKe(t,e){return Jn(HS.count(jA(t)-1,t),e,2)}function XKe(t,e){return Jn(t.getFullYear()%100,e,2)}function YKe(t,e){return t=aie(t),Jn(t.getFullYear()%100,e,2)}function JKe(t,e){return Jn(t.getFullYear()%1e4,e,4)}function ZKe(t,e){var r=t.getDay();return t=r>=4||r===0?uv(t):uv.ceil(t),Jn(t.getFullYear()%1e4,e,4)}function eGe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jn(e/60|0,"0",2)+Jn(e%60,"0",2)}function zK(t,e){return Jn(t.getUTCDate(),e,2)}function tGe(t,e){return Jn(t.getUTCHours(),e,2)}function rGe(t,e){return Jn(t.getUTCHours()%12||12,e,2)}function nGe(t,e){return Jn(1+t3.count(TA(t),t),e,3)}function sie(t,e){return Jn(t.getUTCMilliseconds(),e,3)}function aGe(t,e){return sie(t,e)+"000"}function sGe(t,e){return Jn(t.getUTCMonth()+1,e,2)}function iGe(t,e){return Jn(t.getUTCMinutes(),e,2)}function oGe(t,e){return Jn(t.getUTCSeconds(),e,2)}function lGe(t){var e=t.getUTCDay();return e===0?7:e}function cGe(t,e){return Jn(n3.count(TA(t)-1,t),e,2)}function iie(t){var e=t.getUTCDay();return e>=4||e===0?dv(t):dv.ceil(t)}function uGe(t,e){return t=iie(t),Jn(dv.count(TA(t),t)+(TA(t).getUTCDay()===4),e,2)}function dGe(t){return t.getUTCDay()}function fGe(t,e){return Jn($S.count(TA(t)-1,t),e,2)}function AGe(t,e){return Jn(t.getUTCFullYear()%100,e,2)}function hGe(t,e){return t=iie(t),Jn(t.getUTCFullYear()%100,e,2)}function mGe(t,e){return Jn(t.getUTCFullYear()%1e4,e,4)}function pGe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?dv(t):dv.ceil(t),Jn(t.getUTCFullYear()%1e4,e,4)}function gGe(){return"+0000"}function WK(){return"%"}function XK(t){return+t}function YK(t){return Math.floor(+t/1e3)}var Mg,oie,lie;xGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xGe(t){return Mg=xKe(t),oie=Mg.format,Mg.parse,lie=Mg.utcFormat,Mg.utcParse,Mg}function vGe(t){return new Date(t)}function yGe(t){return t instanceof Date?+t:+new Date(+t)}function gR(t,e,r,n,a,s,i,l,c,u){var d=nR(),f=d.invert,h=d.domain,A=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function B(P){return(c(P)<P?A:l(P)<P?m:i(P)<P?p:s(P)<P?g:n(P)<P?a(P)<P?x:y:r(P)<P?b:w)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?h(Array.from(P,yGe)):h().map(vGe)},d.ticks=function(P){var _=h();return t(_[0],_[_.length-1],P??10)},d.tickFormat=function(P,_){return _==null?B:u(_)},d.nice=function(P){var _=h();return(!P||typeof P.range!="function")&&(P=e(_[0],_[_.length-1],P??10)),P?h(zse(_,P)):d},d.copy=function(){return xw(d,gR(t,e,r,n,a,s,i,l,c,u))},d}function bGe(){return Hu.apply(gR(pKe,gKe,jA,mR,r3,vw,AR,dR,Hm,oie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wGe(){return Hu.apply(gR(hKe,mKe,TA,pR,n3,t3,hR,fR,Hm,lie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a3(){var t=0,e=1,r,n,a,s,i=Dl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var A,m;return arguments.length?([A,m]=h,i=f(A,m),u):[i(0),i(1)]}}return u.range=d(Rv),u.rangeRound=d(rR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function J0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cie(){var t=Y0(a3()(Dl));return t.copy=function(){return J0(t,cie())},KA.apply(t,arguments)}function uie(){var t=iR(a3()).domain([1,10]);return t.copy=function(){return J0(t,uie()).base(t.base())},KA.apply(t,arguments)}function die(){var t=oR(a3());return t.copy=function(){return J0(t,die()).constant(t.constant())},KA.apply(t,arguments)}function xR(){var t=lR(a3());return t.copy=function(){return J0(t,xR()).exponent(t.exponent())},KA.apply(t,arguments)}function NGe(){return xR.apply(null,arguments).exponent(.5)}function fie(){var t=[],e=Dl;function r(n){if(n!=null&&!isNaN(n=+n))return e((pw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(y0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>l$e(t,s/n))},r.copy=function(){return fie(e).domain(t)},KA.apply(r,arguments)}function s3(){var t=0,e=.5,r=1,n=1,a,s,i,l,c,u=Dl,d,f=!1,h;function A(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}A.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A):[t,e,r]},A.clamp=function(p){return arguments.length?(f=!!p,A):f},A.interpolator=function(p){return arguments.length?(u=p,A):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=O$e(p,[x,y,b]),A):[u(0),u(.5),u(1)]}}return A.range=m(Rv),A.rangeRound=m(rR),A.unknown=function(p){return arguments.length?(h=p,A):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A}}function Aie(){var t=Y0(s3()(Dl));return t.copy=function(){return J0(t,Aie())},KA.apply(t,arguments)}function hie(){var t=iR(s3()).domain([.1,1,10]);return t.copy=function(){return J0(t,hie()).base(t.base())},KA.apply(t,arguments)}function mie(){var t=oR(s3());return t.copy=function(){return J0(t,mie()).constant(t.constant())},KA.apply(t,arguments)}function vR(){var t=lR(s3());return t.copy=function(){return J0(t,vR()).exponent(t.exponent())},KA.apply(t,arguments)}function CGe(){return vR.apply(null,arguments).exponent(.5)}const by=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ZD,scaleDiverging:Aie,scaleDivergingLog:hie,scaleDivergingPow:vR,scaleDivergingSqrt:CGe,scaleDivergingSymlog:mie,scaleIdentity:qse,scaleImplicit:Vk,scaleLinear:Gse,scaleLog:Wse,scaleOrdinal:JD,scalePoint:d$e,scalePow:cR,scaleQuantile:Jse,scaleQuantize:Zse,scaleRadial:Yse,scaleSequential:cie,scaleSequentialLog:uie,scaleSequentialPow:xR,scaleSequentialQuantile:fie,scaleSequentialSqrt:NGe,scaleSequentialSymlog:die,scaleSqrt:aKe,scaleSymlog:Xse,scaleThreshold:eie,scaleTime:bGe,scaleUtc:wGe,tickFormat:Kse},Symbol.toStringTag,{value:"Module"}));var GA=t=>t.chartData,i3=Tt([GA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),pie=(t,e,r,n)=>n?i3(t):GA(t),_Ge=(t,e,r)=>r?i3(t):GA(t);function R0(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Bs(e)&&Bs(r))return!0}return!1}function JK(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function gie(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Bs(r))a=r;else if(typeof r=="function")return;if(Bs(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(R0(i))return i}}function EGe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(R0(n))return JK(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,l;if(a==="auto")e!=null&&(i=Math.min(...e));else if(Kr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&m$.test(a)){var c=m$.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Kr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&p$.test(s)){var d=p$.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var h=[i,l];if(R0(h))return e==null?h:JK(h,e,r)}}}var Mv=1e9,SGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bR,fs=!0,Qu="[DecimalError] ",ip=Qu+"Invalid argument: ",yR=Qu+"Exponent out of range: ",Lv=Math.floor,Em=Math.pow,IGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dc,no=1e7,Wa=7,xie=9007199254740991,KS=Lv(xie/Wa),jr={};jr.absoluteValue=jr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};jr.comparedTo=jr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};jr.decimalPlaces=jr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Wa;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};jr.dividedBy=jr.div=function(t){return gA(this,new this.constructor(t))};jr.dividedToIntegerBy=jr.idiv=function(t){var e=this,r=e.constructor;return ka(gA(e,new r(t),0,1),r.precision)};jr.equals=jr.eq=function(t){return!this.cmp(t)};jr.exponent=function(){return mi(this)};jr.greaterThan=jr.gt=function(t){return this.cmp(t)>0};jr.greaterThanOrEqualTo=jr.gte=function(t){return this.cmp(t)>=0};jr.isInteger=jr.isint=function(){return this.e>this.d.length-2};jr.isNegative=jr.isneg=function(){return this.s<0};jr.isPositive=jr.ispos=function(){return this.s>0};jr.isZero=function(){return this.s===0};jr.lessThan=jr.lt=function(t){return this.cmp(t)<0};jr.lessThanOrEqualTo=jr.lte=function(t){return this.cmp(t)<1};jr.logarithm=jr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Dc))throw Error(Qu+"NaN");if(r.s<1)throw Error(Qu+(r.s?"NaN":"-Infinity"));return r.eq(Dc)?new n(0):(fs=!1,e=gA(wb(r,s),wb(t,s),s),fs=!0,ka(e,a))};jr.minus=jr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?bie(e,t):vie(e,(t.s=-t.s,t))};jr.modulo=jr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Qu+"NaN");return r.s?(fs=!1,e=gA(r,t,0,1).times(t),fs=!0,r.minus(e)):ka(new n(r),a)};jr.naturalExponential=jr.exp=function(){return yie(this)};jr.naturalLogarithm=jr.ln=function(){return wb(this)};jr.negated=jr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};jr.plus=jr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vie(e,t):bie(e,(t.s=-t.s,t))};jr.precision=jr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ip+t);if(e=mi(a)+1,n=a.d.length-1,r=n*Wa+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};jr.squareRoot=jr.sqrt=function(){var t,e,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Qu+"NaN")}for(t=mi(l),fs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=cf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Lv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(gA(l,s,i+2)).times(.5),cf(s.d).slice(0,i)===(e=cf(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(ka(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;i+=4}return fs=!0,ka(n,r)};jr.times=jr.mul=function(t){var e,r,n,a,s,i,l,c,u,d=this,f=d.constructor,h=d.d,A=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=A.length,c<u&&(s=h,h=A,A=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+A[n]*h[a-n-1]+e,s[a--]=l%no|0,e=l/no|0;s[a]=(s[a]+e)%no|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,fs?ka(t,f.precision):t};jr.toDecimalPlaces=jr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(yf(t,0,Mv),e===void 0?e=n.rounding:yf(e,0,8),ka(r,t+mi(r)+1,e))};jr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Op(n,!0):(yf(t,0,Mv),e===void 0?e=a.rounding:yf(e,0,8),n=ka(new a(n),t+1,e),r=Op(n,!0,t+1)),r};jr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Op(a):(yf(t,0,Mv),e===void 0?e=s.rounding:yf(e,0,8),n=ka(new s(a),t+mi(a)+1,e),r=Op(n.abs(),!1,t+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};jr.toInteger=jr.toint=function(){var t=this,e=t.constructor;return ka(new e(t),mi(t)+1,e.rounding)};jr.toNumber=function(){return+this};jr.toPower=jr.pow=function(t){var e,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Dc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Qu+"Infinity");return l}if(l.eq(Dc))return l;if(n=c.precision,t.eq(Dc))return ka(l,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=l.s,i){if((r=d<0?-d:d)<=xie){for(a=new c(Dc),e=Math.ceil(n/Wa+4),fs=!1;r%2&&(a=a.times(l),eG(a.d,e)),r=Lv(r/2),r!==0;)l=l.times(l),eG(l.d,e);return fs=!0,t.s<0?new c(Dc).div(a):ka(a,n)}}else if(s<0)throw Error(Qu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,fs=!1,a=t.times(wb(l,n+u)),fs=!0,a=yie(a),a.s=s,a};jr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=mi(a),n=Op(a,r<=s.toExpNeg||r>=s.toExpPos)):(yf(t,1,Mv),e===void 0?e=s.rounding:yf(e,0,8),a=ka(new s(a),t,e),r=mi(a),n=Op(a,t<=r||r<=s.toExpNeg,t)),n};jr.toSignificantDigits=jr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(yf(t,1,Mv),e===void 0?e=n.rounding:yf(e,0,8)),ka(new n(r),t,e)};jr.toString=jr.valueOf=jr.val=jr.toJSON=jr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mi(t),r=t.constructor;return Op(t,e<=r.toExpNeg||e>=r.toExpPos)};function vie(t,e){var r,n,a,s,i,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),fs?ka(e,f):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/Wa),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/no|0,c[s]%=no;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,fs?ka(e,f):e}function yf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ip+t)}function cf(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=Wa-n.length,r&&(s+=Oh(r)),s+=n;i=t[e],n=i+"",r=Wa-n.length,r&&(s+=Oh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var gA=function(){function t(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%no|0,i=s/no|0;return i&&n.unshift(i),n}function e(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*no+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,B,P,_,E,I=n.constructor,O=n.s==a.s?1:-1,S=n.d,j=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(Qu+"Division by zero");for(c=n.e-a.e,_=j.length,B=S.length,A=new I(O),m=A.d=[],u=0;j[u]==(S[u]||0);)++u;if(j[u]>(S[u]||0)&&--c,s==null?y=s=I.precision:i?y=s+(mi(n)-mi(a))+1:y=s,y<0)return new I(0);if(y=y/Wa+2|0,u=0,_==1)for(d=0,j=j[0],y++;(u<B||d)&&y--;u++)b=d*no+(S[u]||0),m[u]=b/j|0,d=b%j|0;else{for(d=no/(j[0]+1)|0,d>1&&(j=t(j,d),S=t(S,d),_=j.length,B=S.length),w=_,p=S.slice(0,_),g=p.length;g<_;)p[g++]=0;E=j.slice(),E.unshift(0),P=j[0],j[1]>=no/2&&++P;do d=0,l=e(j,p,_,g),l<0?(x=p[0],_!=g&&(x=x*no+(p[1]||0)),d=x/P|0,d>1?(d>=no&&(d=no-1),f=t(j,d),h=f.length,g=p.length,l=e(f,p,h,g),l==1&&(d--,r(f,_<h?E:j,h))):(d==0&&(l=d=1),f=j.slice()),h=f.length,h<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(j,p,_,g),l<1&&(d++,r(p,_<g?E:j,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=S[w]||0:(p=[S[w]],g=1);while((w++<B||p[0]!==void 0)&&y--)}return m[0]||m.shift(),A.e=c,ka(A,i?s+mi(A)+1:s)}}();function yie(t,e){var r,n,a,s,i,l,c=0,u=0,d=t.constructor,f=d.precision;if(mi(t)>16)throw Error(yR+mi(t));if(!t.s)return new d(Dc);for(fs=!1,l=f,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(Em(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Dc),d.precision=l;;){if(a=ka(a.times(t),l),r=r.times(++c),i=s.plus(gA(a,r,l)),cf(i.d).slice(0,l)===cf(s.d).slice(0,l)){for(;u--;)s=ka(s.times(s),l);return d.precision=f,e==null?(fs=!0,ka(s,f)):s}s=i}}function mi(t){for(var e=t.e*Wa,r=t.d[0];r>=10;r/=10)e++;return e}function CP(t,e,r){if(e>t.LN10.sd())throw fs=!0,r&&(t.precision=r),Error(Qu+"LN10 precision limit exceeded");return ka(new t(t.LN10),e)}function Oh(t){for(var e="";t--;)e+="0";return e}function wb(t,e){var r,n,a,s,i,l,c,u,d,f=1,h=10,A=t,m=A.d,p=A.constructor,g=p.precision;if(A.s<1)throw Error(Qu+(A.s?"NaN":"-Infinity"));if(A.eq(Dc))return new p(0);if(e==null?(fs=!1,u=g):u=e,A.eq(10))return e==null&&(fs=!0),CP(p,u);if(u+=h,p.precision=u,r=cf(m),n=r.charAt(0),s=mi(A),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)A=A.times(t),r=cf(A.d),n=r.charAt(0),f++;s=mi(A),n>1?(A=new p("0."+r),s++):A=new p(n+"."+r.slice(1))}else return c=CP(p,u+2,g).times(s+""),A=wb(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(fs=!0,ka(A,g)):A;for(l=i=A=gA(A.minus(Dc),A.plus(Dc),u),d=ka(A.times(A),u),a=3;;){if(i=ka(i.times(d),u),c=l.plus(gA(i,new p(a),u)),cf(c.d).slice(0,u)===cf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(CP(p,u+2,g).times(s+""))),l=gA(l,new p(f),u),p.precision=g,e==null?(fs=!0,ka(l,g)):l;l=c,a+=2}}function ZK(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Lv(r/Wa),t.d=[],n=(r+1)%Wa,r<0&&(n+=Wa),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Wa;n<a;)t.d.push(+e.slice(n,n+=Wa));e=e.slice(n),n=Wa-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),fs&&(t.e>KS||t.e<-KS))throw Error(yR+r)}else t.s=0,t.e=0,t.d=[0];return t}function ka(t,e,r){var n,a,s,i,l,c,u,d,f=t.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=Wa,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Wa),s=f.length,d>=s)return t;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Wa,a=n-Wa+i}if(r!==void 0&&(s=Em(10,i-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Em(10,i-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=mi(t),f.length=1,e=e-s-1,f[0]=Em(10,(Wa-e%Wa)%Wa),t.e=Lv(-e/Wa)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Em(10,Wa-n),f[d]=a>0?(u/Em(10,i-a)%Em(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==no&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=no)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(fs&&(t.e>KS||t.e<-KS))throw Error(yR+mi(t));return t}function bie(t,e){var r,n,a,s,i,l,c,u,d,f,h=t.constructor,A=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),fs?ka(e,A):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(A/Wa),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=no-1;--c[s],c[a]+=no}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,fs?ka(e,A):e):new h(0)}function Op(t,e,r){var n,a=mi(t),s=cf(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+Oh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Oh(-a-1)+s,r&&(n=r-i)>0&&(s+=Oh(n))):a>=i?(s+=Oh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+Oh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=Oh(n))),t.s<0?"-"+s:s}function eG(t,e){if(t.length>e)return t.length=e,!0}function wie(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ip+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return ZK(i,s.toString())}else if(typeof s!="string")throw Error(ip+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,IGe.test(s))ZK(i,s);else throw Error(ip+s)}if(a.prototype=jr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=wie,a.config=a.set=BGe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function BGe(t){if(!t||typeof t!="object")throw Error(Qu+"Object expected");var e,r,n,a=["precision",1,Mv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Lv(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(ip+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ip+r+": "+n);return this}var bR=wie(SGe);Dc=new bR(1);const ga=bR;var PGe=t=>t,Nie={},Cie=t=>t===Nie,tG=t=>function e(){return arguments.length===0||arguments.length===1&&Cie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},_ie=(t,e)=>t===1?e:tG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Nie).length;return s>=t?e(...n):_ie(t-s,tG(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Cie(d)?l.shift():d);return e(...u,...l)}))}),jGe=t=>_ie(t.length,t),Gk=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},TGe=jGe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),kGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return PGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}};function Eie(t){var e;return t===0?e=1:e=Math.floor(new ga(t).abs().log(10).toNumber())+1,e}function Sie(t,e,r){for(var n=new ga(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Iie=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Bie=(t,e,r)=>{if(t.lte(0))return new ga(0);var n=Eie(t.toNumber()),a=new ga(10).pow(n),s=t.div(a),i=n!==1?.05:.1,l=new ga(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return e?new ga(c.toNumber()):new ga(Math.ceil(c.toNumber()))},FGe=(t,e,r)=>{var n=new ga(1),a=new ga(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new ga(10).pow(Eie(t)-1),a=new ga(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ga(Math.floor(t)))}else t===0?a=new ga(Math.floor((e-1)/2)):r||(a=new ga(Math.floor(t)));var i=Math.floor((e-1)/2),l=kGe(TGe(c=>a.add(new ga(c-i).mul(n)).toNumber()),Gk);return l(0,e)},Pie=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new ga(0),tickMin:new ga(0),tickMax:new ga(0)};var i=Bie(new ga(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new ga(0):(l=new ga(e).add(r).div(2),l=l.sub(new ga(l).mod(i)));var c=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new ga(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Pie(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ga(c).mul(i)),tickMax:l.add(new ga(u).mul(i))})},OGe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,c]=Iie([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...Gk(0,a-1).map(()=>1/0)]:[...Gk(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return FGe(l,a,s);var{step:d,tickMin:f,tickMax:h}=Pie(l,c,i,s,0),A=Sie(f,h.add(new ga(.1).mul(d)),d);return r>n?A.reverse():A},DGe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=Iie([n,a]);if(i===-1/0||l===1/0)return[n,a];if(i===l)return[i];var c=Math.max(r,2),u=Bie(new ga(l).sub(i).div(c-1),s,0),d=[...Sie(new ga(i),new ga(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},jie=t=>t.rootProps.maxBarSize,RGe=t=>t.rootProps.barGap,Tie=t=>t.rootProps.barCategoryGap,MGe=t=>t.rootProps.barSize,yw=t=>t.rootProps.stackOffset,kie=t=>t.rootProps.reverseStackOrder,wR=t=>t.options.chartName,NR=t=>t.rootProps.syncId,Fie=t=>t.rootProps.syncMethod,CR=t=>t.options.eventEmitter,dl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Xf={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},jc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},o3=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},LGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xf.angleAxisId,includeHidden:!1,name:void 0,reversed:Xf.reversed,scale:Xf.scale,tick:Xf.tick,tickCount:void 0,ticks:void 0,type:Xf.type,unit:void 0},UGe={allowDataOverflow:jc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jc.scale,tick:jc.tick,tickCount:jc.tickCount,ticks:void 0,type:jc.type,unit:void 0},QGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Xf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xf.scale,tick:Xf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},VGe={allowDataOverflow:jc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jc.scale,tick:jc.tick,tickCount:jc.tickCount,ticks:void 0,type:"category",unit:void 0},_R=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?QGe:LGe,ER=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?VGe:UGe,l3=t=>t.polarOptions,SR=Tt([HA,$A,Vi],Bse),Oie=Tt([l3,SR],(t,e)=>{if(t!=null)return Al(t.innerRadius,e,0)}),Die=Tt([l3,SR],(t,e)=>{if(t!=null)return Al(t.outerRadius,e,e*.8)}),HGe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Rie=Tt([l3],HGe);Tt([_R,Rie],o3);var Mie=Tt([SR,Oie,Die],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Tt([ER,Mie],o3);var Lie=Tt([Zn,l3,Oie,Die,HA,$A],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=e;return{cx:Al(i,a,a/2),cy:Al(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ms=(t,e)=>e,bw=(t,e,r)=>r;function IR(t){return t==null?void 0:t.id}function Uie(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=IR(l);u.forEach((f,h)=>{var A=s==null||a?h:String(Za(f,s,null)),m=Za(f,l.dataKey,0),p;i.has(A)?p=i.get(A):p={},Object.assign(p,{[d]:m}),i.set(A,p)})}}),Array.from(i.values())}function c3(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var u3=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function d3(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function $Ge(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var $i=t=>{var e=Zn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Uv=t=>t.tooltip.settings.axisId;function rG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(r),!0).forEach(function(n){KGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KGe(t,e,r){return(e=GGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GGe(t){var e=qGe(t,"string");return typeof e=="symbol"?e:e+""}function qGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qk=[0,"auto"],Ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Qie=(t,e)=>t.cartesianAxis.xAxis[e],qA=(t,e)=>{var r=Qie(t,e);return r??Ji},Zi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Aw},Vie=(t,e)=>t.cartesianAxis.yAxis[e],zA=(t,e)=>{var r=Vie(t,e);return r??Zi},zGe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BR=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??zGe},Ps=(t,e,r)=>{switch(e){case"xAxis":return qA(t,r);case"yAxis":return zA(t,r);case"zAxis":return BR(t,r);case"angleAxis":return _R(t,r);case"radiusAxis":return ER(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},WGe=(t,e,r)=>{switch(e){case"xAxis":return qA(t,r);case"yAxis":return zA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},ww=(t,e,r)=>{switch(e){case"xAxis":return qA(t,r);case"yAxis":return zA(t,r);case"angleAxis":return _R(t,r);case"radiusAxis":return ER(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Hie=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function PR(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var jR=t=>t.graphicalItems.cartesianItems,XGe=Tt([ms,bw],PR),TR=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Nw=Tt([jR,Ps,XGe],TR,{memoizeOptions:{resultEqualityCheck:d3}}),$ie=Tt([Nw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(c3)),Kie=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),YGe=Tt([Nw],Kie),kR=t=>t.map(e=>e.data).filter(Boolean).flat(1),JGe=Tt([Nw],kR,{memoizeOptions:{resultEqualityCheck:d3}}),FR=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},OR=Tt([JGe,pie],FR),DR=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Za(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:Za(a,n)}))):t.map(n=>({value:n})),f3=Tt([OR,Ps,Nw],DR);function Gie(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function F_(t){if(vf(t)||t instanceof Date){var e=Number(t);if(Bs(e))return e}}function nG(t){if(Array.isArray(t)){var e=[F_(t[0]),F_(t[1])];return R0(e)?e:void 0}var r=F_(t);if(r!=null)return[r,r]}function kA(t){return t.map(F_).filter(o7e)}function ZGe(t,e,r){return!r||typeof e!="number"||xf(e)?[]:r.length?kA(r.flatMap(n=>{var a=Za(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Bs(s)||!Bs(i)))return[e-s,e+i]})):[]}var Ki=t=>{var e=$i(t),r=Uv(t);return ww(t,e,r)},Cw=Tt([Ki],t=>t==null?void 0:t.dataKey),eqe=Tt([$ie,pie,Ki],Uie),qie=(t,e,r,n)=>{var a={},s=e.reduce((i,l)=>{if(l.stackId==null)return i;var c=i[l.stackId];return c==null&&(c=[]),c.push(l),i[l.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,c]=i,u=n?[...c].reverse():c,d=u.map(IR);return[l,{stackedData:_Qe(t,d,r),graphicalItems:u}]}))},zk=Tt([eqe,$ie,yw,kie],qie),zie=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=PQe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},tqe=Tt([Ps],t=>t.allowDataOverflow),RR=t=>{var e;if(t==null||!("domain"in t))return qk;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=kA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:qk},MR=Tt([Ps],RR),LR=Tt([MR,tqe],gie),rqe=Tt([zk,GA,ms,LR],zie,{memoizeOptions:{resultEqualityCheck:u3}}),A3=t=>t.errorBars,nqe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Gie(r,n)),qS=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},UR=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>Gie(a,x)),h=Za(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),A=ZGe(l,h,f);if(A.length>=2){var m=Math.min(...A),p=Math.max(...A);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=nG(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=nG(Za(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),Bs(s)&&Bs(i))return[s,i]},aqe=Tt([OR,Ps,YGe,A3,ms],UR,{memoizeOptions:{resultEqualityCheck:u3}});function sqe(t){var{value:e}=t;if(vf(e)||e instanceof Date)return e}var iqe=(t,e,r)=>{var n=t.map(sqe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Gne(n))?Dse(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Wie=t=>t.referenceElements.dots,Qv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),oqe=Tt([Wie,ms,bw],Qv),Xie=t=>t.referenceElements.areas,lqe=Tt([Xie,ms,bw],Qv),Yie=t=>t.referenceElements.lines,cqe=Tt([Yie,ms,bw],Qv),Jie=(t,e)=>{if(t!=null){var r=kA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},uqe=Tt(oqe,ms,Jie),Zie=(t,e)=>{if(t!=null){var r=kA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},dqe=Tt([lqe,ms],Zie);function fqe(t){var e;if(t.x!=null)return kA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:kA(r)}function Aqe(t){var e;if(t.y!=null)return kA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:kA(r)}var eoe=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?fqe(n):Aqe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},hqe=Tt([cqe,ms],eoe),mqe=Tt(uqe,hqe,dqe,(t,e,r)=>qS(t,r,e)),QR=(t,e,r,n,a,s,i,l)=>{if(r!=null)return r;var c=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",u=c?qS(n,s,a):qS(s,a);return EGe(e,u,t.allowDataOverflow)},pqe=Tt([Ps,MR,LR,rqe,aqe,mqe,Zn,ms],QR,{memoizeOptions:{resultEqualityCheck:u3}}),gqe=[0,1],VR=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=t,u=tg(e,s);if(u&&l==null){var d;return Dse(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?iqe(n,t,u):a==="expand"?gqe:i}},HR=Tt([Ps,Zn,OR,f3,yw,ms,pqe],VR),toe=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(lw(s));return l in by?l:"point"}}},Vv=Tt([Ps,Zn,Hie,wR,ms],toe);function xqe(t){if(t!=null){if(t in by)return by[t]();var e="scale".concat(lw(t));if(e in by)return by[e]()}}function $R(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=xqe(e);if(a!=null){var s=a.domain(r).range(n);return yQe(s),s}}}var KR=(t,e,r)=>{var n=RR(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&R0(t))return OGe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&R0(t))return DGe(t,e.tickCount,e.allowDecimals)}},GR=Tt([HR,ww,Vv],KR),qR=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&R0(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return e},vqe=Tt([Ps,HR,GR,ms],qR),yqe=Tt(f3,Ps,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(kA(t.map(f=>f.value))).sort((f,h)=>f-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),roe=Tt(yqe,Zn,Tie,Vi,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Bs(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=Al(r,t*s),l=t*s/2;return l-i-(l-i)/s*i}return 0}),bqe=(t,e,r)=>{var n=qA(t,e);return n==null||typeof n.padding!="string"?0:roe(t,"xAxis",e,r,n.padding)},wqe=(t,e,r)=>{var n=zA(t,e);return n==null||typeof n.padding!="string"?0:roe(t,"yAxis",e,r,n.padding)},Nqe=Tt(qA,bqe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),Cqe=Tt(zA,wqe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),_qe=Tt([Vi,Nqe,K4,$4,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Eqe=Tt([Vi,Zn,Cqe,K4,$4,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),_w=(t,e,r,n)=>{var a;switch(e){case"xAxis":return _qe(t,r,n);case"yAxis":return Eqe(t,r,n);case"zAxis":return(a=BR(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Rie(t);case"radiusAxis":return Mie(t,r);default:return}},noe=Tt([Ps,_w],o3),h3=Tt([Ps,Vv,vqe,noe],$R);Tt([Nw,A3,ms],nqe);function aoe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var m3=(t,e)=>e,p3=(t,e,r)=>r,Sqe=Tt(V4,m3,p3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(aoe)),Iqe=Tt(H4,m3,p3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(aoe)),soe=(t,e)=>({width:t.width,height:e.height}),Bqe=(t,e)=>{var r=typeof e.width=="number"?e.width:Aw;return{width:r,height:t.height}},ioe=Tt(Vi,qA,soe),Pqe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},jqe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Tqe=Tt($A,Vi,Sqe,m3,p3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=soe(e,l);i==null&&(i=Pqe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),kqe=Tt(HA,Vi,Iqe,m3,p3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=Bqe(e,l);i==null&&(i=jqe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),Fqe=(t,e)=>{var r=qA(t,e);if(r!=null)return Tqe(t,r.orientation,r.mirror)},Oqe=Tt([Vi,qA,Fqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),Dqe=(t,e)=>{var r=zA(t,e);if(r!=null)return kqe(t,r.orientation,r.mirror)},Rqe=Tt([Vi,zA,Dqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),ooe=Tt(Vi,zA,(t,e)=>{var r=typeof e.width=="number"?e.width:Aw;return{width:r,height:t.height}}),aG=(t,e,r)=>{switch(e){case"xAxis":return ioe(t,r).width;case"yAxis":return ooe(t,r).height;default:return}},loe=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=tg(t,n),c=e.map(u=>u.value);if(i&&l&&s==="category"&&a&&Gne(c))return c}},zR=Tt([Zn,f3,Ps,ms],loe),coe=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=tg(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},WR=Tt([Zn,f3,ww,ms],coe);Tt([Zn,WGe,Vv,h3,zR,WR,_w,GR,ms],(t,e,r,n,a,s,i,l,c)=>{if(e!=null){var u=tg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}});var Mqe=(t,e,r,n,a,s,i,l,c)=>{if(!(e==null||n==null)){var u=tg(t,c),{type:d,ticks:f,tickCount:h}=e,A=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/A:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Lo(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>Bs(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>Bs(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},uoe=Tt([Zn,ww,Vv,h3,GR,_w,zR,WR,ms],Mqe),Lqe=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=tg(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Lo(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},fv=Tt([Zn,ww,h3,_w,zR,WR,ms],Lqe),Av=Tt(Ps,h3,(t,e)=>{if(!(t==null||e==null))return GS(GS({},t),{},{scale:e})}),Uqe=Tt([Ps,Vv,HR,noe],$R);Tt((t,e,r)=>BR(t,r),Uqe,(t,e)=>{if(!(t==null||e==null))return GS(GS({},t),{},{scale:e})});var Qqe=Tt([Zn,V4,H4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),doe=t=>t.options.defaultTooltipEventType,foe=t=>t.options.validateTooltipEventTypes;function Aoe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function XR(t,e){var r=doe(t),n=foe(t);return Aoe(e,r,n)}function Vqe(t){return Qr(e=>XR(e,t))}var hoe=(t,e)=>{var r,n=Number(e);if(!(xf(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Hqe=t=>t.tooltip.settings,Gh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},$qe={itemInteraction:{click:Gh,hover:Gh},axisInteraction:{click:Gh,hover:Gh},keyboardInteraction:Gh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},moe=mc({name:"tooltip",initialState:$qe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:is()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=wd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:is()},removeTooltipEntrySettings:{reducer(t,e){var r=wd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:is()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Kqe,replaceTooltipEntrySettings:Gqe,removeTooltipEntrySettings:qqe,setTooltipSettingsState:zqe,setActiveMouseOverItemIndex:poe,mouseLeaveItem:Wqe,mouseLeaveChart:goe,setActiveClickItemIndex:Xqe,setMouseOverAxisIndex:xoe,setMouseClickAxisIndex:Yqe,setSyncInteraction:Wk,setKeyboardInteraction:Xk}=moe.actions,Jqe=moe.reducer;function sG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(r),!0).forEach(function(n){Zqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zqe(t,e,r){return(e=eze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eze(t){var e=tze(t,"string");return typeof e=="symbol"?e:e+""}function tze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rze(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function nze(t){return t.index!=null}var voe=(t,e,r,n)=>{if(e==null)return Gh;var a=rze(t,e,r);if(a==null)return Gh;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(nze(a)){if(s)return LC(LC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return LC(LC({},Gh),{},{coordinate:a.coordinate})};function aze(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function sze(t,e){var r=aze(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function ize(t,e,r){if(r==null||e==null)return!0;var n=Za(t,e);return n==null||!R0(r)?!0:sze(n,r)}var YR=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Bs(s))return a;var i=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(i,Math.min(s,l)),u=e[c];return u==null||ize(u,r,n)?String(c):null},yoe=(t,e,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},boe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},Ew=t=>t.options.tooltipPayloadSearcher,Hv=t=>t.tooltip;function iG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iG(Object(r),!0).forEach(function(n){oze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oze(t,e,r){return(e=lze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lze(t){var e=cze(t,"string");return typeof e=="symbol"?e:e+""}function cze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uze(t,e){return t??e}var woe=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((h,A)=>{var m,{dataDefinedOnItem:p,settings:g}=A,x=uze(p,l),y=Array.isArray(x)?ese(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,B;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?B=i7e(y,n,a):B=s(y,e,c,w),Array.isArray(B))B.forEach(_=>{var E=oG(oG({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(g$({tooltipEntrySettings:E,dataKey:_.dataKey,payload:_.payload,value:Za(_.payload,_.dataKey),name:_.name}))});else{var P;h.push(g$({tooltipEntrySettings:g,dataKey:b,payload:B,value:Za(B,b),name:(P=Za(B,w))!==null&&P!==void 0?P:g==null?void 0:g.name}))}return h},f)}},JR=Tt([Ki,Zn,Hie,wR,$i],toe),dze=Tt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),fze=Tt([$i,Uv],PR),$v=Tt([dze,Ki,fze],TR,{memoizeOptions:{resultEqualityCheck:d3}}),Aze=Tt([$v],t=>t.filter(c3)),hze=Tt([$v],kR,{memoizeOptions:{resultEqualityCheck:d3}}),Kv=Tt([hze,GA],FR),mze=Tt([Aze,GA,Ki],Uie),ZR=Tt([Kv,Ki,$v],DR),Noe=Tt([Ki],RR),pze=Tt([Ki],t=>t.allowDataOverflow),Coe=Tt([Noe,pze],gie),gze=Tt([$v],t=>t.filter(c3)),xze=Tt([mze,gze,yw,kie],qie),vze=Tt([xze,GA,$i,Coe],zie),yze=Tt([$v],Kie),bze=Tt([Kv,Ki,yze,A3,$i],UR,{memoizeOptions:{resultEqualityCheck:u3}}),wze=Tt([Wie,$i,Uv],Qv),Nze=Tt([wze,$i],Jie),Cze=Tt([Xie,$i,Uv],Qv),_ze=Tt([Cze,$i],Zie),Eze=Tt([Yie,$i,Uv],Qv),Sze=Tt([Eze,$i],eoe),Ize=Tt([Nze,Sze,_ze],qS),Bze=Tt([Ki,Noe,Coe,vze,bze,Ize,Zn,$i],QR),Sw=Tt([Ki,Zn,Kv,ZR,yw,$i,Bze],VR),Pze=Tt([Sw,Ki,JR],KR),jze=Tt([Ki,Sw,Pze,$i],qR),_oe=t=>{var e=$i(t),r=Uv(t),n=!1;return _w(t,e,r,n)},Eoe=Tt([Ki,_oe],o3),Soe=Tt([Ki,JR,jze,Eoe],$R),Tze=Tt([Zn,ZR,Ki,$i],loe),kze=Tt([Zn,ZR,Ki,$i],coe),Fze=(t,e,r,n,a,s,i,l)=>{if(e){var{type:c}=e,u=tg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Lo(a[0]-a[1])*2*f:f,u&&i?i.map((h,A)=>({coordinate:n(h)+f,value:h,index:A,offset:f})):n.domain().map((h,A)=>({coordinate:n(h)+f,value:s?s[h]:h,index:A,offset:f}))}}},WA=Tt([Zn,Ki,JR,Soe,_oe,Tze,kze,$i],Fze),e8=Tt([doe,foe,Hqe],(t,e,r)=>Aoe(r.shared,t,e)),Ioe=t=>t.tooltip.settings.trigger,t8=t=>t.tooltip.settings.defaultIndex,Iw=Tt([Hv,e8,Ioe,t8],voe),Dp=Tt([Iw,Kv,Cw,Sw],YR),Boe=Tt([WA,Dp],hoe),r8=Tt([Iw],t=>{if(t)return t.dataKey}),Oze=Tt([Iw],t=>{if(t)return t.graphicalItemId}),Poe=Tt([Hv,e8,Ioe,t8],boe),Dze=Tt([HA,$A,Zn,Vi,WA,t8,Poe,Ew],yoe),Rze=Tt([Iw,Dze],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Mze=Tt([Iw],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Lze=Tt([Poe,Dp,GA,Cw,Boe,Ew,e8],woe);Tt([Lze],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function lG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(r),!0).forEach(function(n){Uze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uze(t,e,r){return(e=Qze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qze(t){var e=Vze(t,"string");return typeof e=="symbol"?e:e+""}function Vze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hze=()=>Qr(Ki),$ze=()=>{var t=Hze(),e=Qr(WA),r=Qr(Soe);return ES(!t||!r?void 0:cG(cG({},t),{},{scale:r}),e)};function uG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uG(Object(r),!0).forEach(function(n){Kze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kze(t,e,r){return(e=Gze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gze(t){var e=qze(t,"string");return typeof e=="symbol"?e:e+""}function qze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zze=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Wze=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return Lg(Lg(Lg({},n),hi(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return Lg(Lg(Lg({},n),hi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Xze(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var joe=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<i;l++){var c,u,d,f,h,A=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=i-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(A==null||m==null||p==null))if(Lo(m-A)!==Lo(p-m)){var x=[];if(Lo(p-m)===Lo(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+A)/2),x[1]=Math.max(y,(y+A)/2)}else{g=A;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var B;return(B=r[l])===null||B===void 0?void 0:B.index}}else{var P=Math.min(A,p),_=Math.max(A,p);if(t>(P+m)/2&&t<=(_+m)/2){var E;return(E=r[l])===null||E===void 0?void 0:E.index}}}else if(e)for(var I=0;I<i;I++){var O=e[I];if(O!=null){var S=e[I+1],j=e[I-1];if(I===0&&S!=null&&t<=(O.coordinate+S.coordinate)/2||I===i-1&&j!=null&&t>(O.coordinate+j.coordinate)/2||I>0&&I<i-1&&j!=null&&S!=null&&t>(O.coordinate+j.coordinate)/2&&t<=(O.coordinate+S.coordinate)/2)return O.index}}return-1},Yze=()=>Qr(wR),n8=(t,e)=>e,Toe=(t,e,r)=>r,a8=(t,e,r,n)=>n,Jze=Tt(WA,t=>j4(t,e=>e.coordinate)),s8=Tt([Hv,n8,Toe,a8],voe),i8=Tt([s8,Kv,Cw,Sw],YR),Zze=(t,e,r)=>{if(e!=null){var n=Hv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},koe=Tt([Hv,n8,Toe,a8],boe),zS=Tt([HA,$A,Zn,Vi,WA,a8,koe,Ew],yoe),eWe=Tt([s8,zS],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Foe=Tt([WA,i8],hoe),tWe=Tt([koe,i8,GA,Cw,Foe,Ew,n8],woe),rWe=Tt([s8,i8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),nWe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&Xze(t,i)){var l=jQe(t,e),c=joe(l,s,a,r,n),u=zze(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},aWe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var l=KHe(t,r);if(l){var c=TQe(l,e),u=joe(c,i,s,n,a),d=Wze(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},sWe=(t,e,r,n,a,s,i,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?nWe(t,e,n,a,s,i,l):aWe(t,e,r,n,a,s,i)},iWe=Tt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),oWe=Tt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(dl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:$Ge}});function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){lWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lWe(t,e,r){return(e=cWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cWe(t){var e=uWe(t,"string");return typeof e=="symbol"?e:e+""}function uWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dWe={},fWe={zIndexMap:Object.values(dl).reduce((t,e)=>fG(fG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),dWe)},AWe=new Set(Object.values(dl));function hWe(t){return AWe.has(t)}var Ooe=mc({name:"zIndex",initialState:fWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:is()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!hWe(r)&&delete t.zIndexMap[r])},prepare:is()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:is()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:is()}}}),{registerZIndexPortal:mWe,unregisterZIndexPortal:pWe,registerZIndexPortalElement:gWe,unregisterZIndexPortalElement:xWe}=Ooe.actions,vWe=Ooe.reducer;function Sf(t){var{zIndex:e,children:r}=t,n=iVe(),a=n&&e!==void 0&&e!==0,s=Yc(),i=Ha();v.useLayoutEffect(()=>a?(i(mWe({zIndex:e})),()=>{i(pWe({zIndex:e}))}):cw,[i,e,a]);var l=Qr(c=>iWe(c,e,s));return a?l?xd.createPortal(r,l):null:r}function Yk(){return Yk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yk.apply(null,arguments)}function AG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AG(Object(r),!0).forEach(function(n){yWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yWe(t,e,r){return(e=bWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bWe(t){var e=wWe(t,"string");return typeof e=="symbol"?e:e+""}function wWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NWe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function CWe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,h=n,A=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=sHe,g=dl.cursorLine;else if(d==="BarChart")m=iHe(l,f,s,i),p=Ise,g=dl.cursorRectangle;else if(l==="radial"&&zne(f)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:B}=Pse(f);m={cx:x,cy:y,startAngle:w,endAngle:B,innerRadius:b,outerRadius:b},p=Tse,g=dl.cursorLine}else m={points:WHe(l,f,s)},p=XD,g=dl.cursorLine;var P=typeof c=="object"&&"className"in c?c.className:void 0,_=UC(UC(UC(UC({stroke:"#ccc",pointerEvents:"none"},s),m),cb(c)),{},{payload:h,payloadIndex:A,className:wa("recharts-tooltip-cursor",P)});return v.createElement(Sf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(NWe,{cursor:c,cursorComp:p,cursorProps:_}))}function _We(t){var e=$ze(),r=aVe(),n=hw(),a=Yze();return e==null||r==null||n==null||a==null?null:v.createElement(CWe,Yk({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Doe=v.createContext(null),EWe=()=>v.useContext(Doe),Roe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var A=new a(d,f||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],A]:c._events[m].push(A):(c._events[m]=A,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,A=f.length,m=new Array(A);h<A;h++)m[h]=f[h].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,A,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,h),!0;case 5:return g.fn.call(g.context,d,f,h,A),!0;case 6:return g.fn.call(g.context,d,f,h,A,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,B;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,h);break;default:if(!y)for(B=1,y=new Array(x-1);B<x;B++)y[B-1]=arguments[B];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var A=r?r+u:u;if(!this._events[A])return this;if(!d)return i(this,A),this;var m=this._events[A];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&i(this,A);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[A]=g.length===1?g[0]:g:i(this,A)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Roe);var SWe=Roe.exports;const IWe=OA(SWe);var Nb=new IWe,Jk="recharts.syncEvent.tooltip",hG="recharts.syncEvent.brush";function Moe(t,e){if(e){var r=Number.parseInt(e,10);if(!xf(r))return t==null?void 0:t[r]}}var BWe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Loe=mc({name:"options",initialState:BWe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),PWe=Loe.reducer,{createEventEmitter:jWe}=Loe.actions;function TWe(t){return t.tooltip.syncInteraction}var kWe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Uoe=mc({name:"chartData",initialState:kWe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:mG,setDataStartEndIndexes:FWe,setComputedData:Ort}=Uoe.actions,OWe=Uoe.reducer,DWe=["x","y"];function pG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ug(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(r),!0).forEach(function(n){RWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RWe(t,e,r){return(e=MWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MWe(t){var e=LWe(t,"string");return typeof e=="symbol"?e:e+""}function LWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UWe(t,e){if(t==null)return{};var r,n,a=QWe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function QWe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function VWe(){var t=Qr(NR),e=Qr(CR),r=Ha(),n=Qr(Fie),a=Qr(WA),s=hw(),i=G4(),l=Qr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return cw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var A=d.payload.coordinate,{x:m,y:p}=A,g=UWe(A,DWe),{x,y,width:b,height:w}=d.payload.sourceViewBox,B=Ug(Ug({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(Ug(Ug({},d),{},{payload:Ug(Ug({},d.payload),{},{coordinate:B})}))}else r(d);return}if(a!=null){var P;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(a,_);P=a[E]}else n==="value"&&(P=a.find(se=>String(se.value)===d.payload.label));var{coordinate:I}=d.payload;if(P==null||d.payload.active===!1||I==null||i==null){r(Wk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:S}=I,j=Math.min(O,i.x+i.width),D=Math.min(S,i.y+i.height),J={x:s==="horizontal"?P.coordinate:j,y:s==="horizontal"?D:P.coordinate},ge=Wk({active:d.payload.active,coordinate:J,dataKey:d.payload.dataKey,index:String(P.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ge)}}};return Nb.on(Jk,c),()=>{Nb.off(Jk,c)}},[l,r,e,t,n,a,s,i])}function HWe(){var t=Qr(NR),e=Qr(CR),r=Ha();v.useEffect(()=>{if(t==null)return cw;var n=(a,s,i)=>{e!==i&&t===a&&r(FWe(s))};return Nb.on(hG,n),()=>{Nb.off(hG,n)}},[r,e,t])}function $We(){var t=Ha();v.useEffect(()=>{t(jWe())},[t]),VWe(),HWe()}function KWe(t,e,r,n,a,s){var i=Qr(A=>Zze(A,t,e)),l=Qr(CR),c=Qr(NR),u=Qr(Fie),d=Qr(TWe),f=d==null?void 0:d.active,h=G4();v.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=Wk({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});Nb.emit(Jk,c,A,l)}},[f,r,i,a,n,l,c,u,s,h])}function gG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(r),!0).forEach(function(n){GWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GWe(t,e,r){return(e=qWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qWe(t){var e=zWe(t,"string");return typeof e=="symbol"?e:e+""}function zWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WWe(t){return t.dataKey}function XWe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(MVe,e)}var vG=[],YWe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function yG(t){var e,r,n=Vo(t,YWe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:A,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:B,axisId:P}=n,_=Ha(),E=typeof w=="number"?String(w):w;v.useEffect(()=>{_(zqe({shared:y,trigger:b,axisId:P,active:a,defaultIndex:E}))},[_,y,b,P,a,E]);var I=G4(),O=Nse(),S=Vqe(y),{activeIndex:j,isActive:D}=(e=Qr(Y=>rWe(Y,S,b,E)))!==null&&e!==void 0?e:{},J=Qr(Y=>tWe(Y,S,b,E)),ge=Qr(Y=>Foe(Y,S,b,E)),se=Qr(Y=>eWe(Y,S,b,E)),he=J,me=EWe(),Z=(r=a??D)!==null&&r!==void 0?r:!1,[ve,Se]=Cae([he,Z]),k=S==="axis"?ge:void 0;KWe(S,b,se,k,j,Z);var F=B??me;if(F==null||I==null||S==null)return null;var H=he??vG;Z||(H=vG),u&&H.length&&(H=fae(H.filter(Y=>Y.value!=null&&(Y.hide!==!0||n.includeHidden)),h,WWe));var Q=H.length>0,V=v.createElement(KVe,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:Z,coordinate:se,hasPayload:Q,offset:f,position:A,reverseDirection:m,useTranslate3d:p,viewBox:I,wrapperStyle:g,lastBoundingBox:ve,innerRef:Se,hasPortalFromProps:!!B},XWe(c,xG(xG({},n),{},{payload:H,label:k,active:Z,activeIndex:j,coordinate:se,accessibilityLayer:O})));return v.createElement(v.Fragment,null,xd.createPortal(V,F),Z&&v.createElement(_We,{cursor:x,tooltipEventType:S,coordinate:se,payload:H,index:j}))}var Bw=t=>null;Bw.displayName="Cell";function JWe(t,e,r){return(e=ZWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZWe(t){var e=eXe(t,"string");return typeof e=="symbol"?e:e+""}function eXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class tXe{constructor(e){JWe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function bG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rXe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bG(Object(r),!0).forEach(function(n){nXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nXe(t,e,r){return(e=aXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aXe(t){var e=sXe(t,"string");return typeof e=="symbol"?e:e+""}function sXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iXe={cacheSize:2e3,enableCache:!0},Qoe=rXe({},iXe),wG=new tXe(Qoe.cacheSize),oXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NG="recharts_measurement_span";function lXe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var CG=(t,e)=>{try{var r=document.getElementById(NG);r||(r=document.createElement("span"),r.setAttribute("id",NG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oXe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},a2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Y4.isSsr)return{width:0,height:0};if(!Qoe.enableCache)return CG(e,r);var n=lXe(e,r),a=wG.get(n);if(a)return a;var s=CG(e,r);return wG.set(n,s),s},Voe;function cXe(t,e,r){return(e=uXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uXe(t){var e=dXe(t,"string");return typeof e=="symbol"?e:e+""}function dXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _G=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AXe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hXe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mXe=["cm","mm","pt","pc","in","Q","px"];function pXe(t){return mXe.includes(t)}var vx="NaN";function gXe(t,e){return t*hXe[e]}class Bo{static parse(e){var r,[,n,a]=(r=AXe.exec(e))!==null&&r!==void 0?r:[];return n==null?Bo.NaN:new Bo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,xf(e)&&(this.unit=""),r!==""&&!fXe.test(r)&&(this.num=NaN,this.unit=""),pXe(r)&&(this.num=gXe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return xf(this.num)}}Voe=Bo;cXe(Bo,"NaN",new Voe(NaN,""));function Hoe(t){if(t==null||t.includes(vx))return vx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=_G.exec(e))!==null&&r!==void 0?r:[],i=Bo.parse(n??""),l=Bo.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return vx;e=e.replace(_G,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,h]=(u=EG.exec(e))!==null&&u!==void 0?u:[],A=Bo.parse(d??""),m=Bo.parse(h??""),p=f==="+"?A.add(m):A.subtract(m);if(p.isNaN())return vx;e=e.replace(EG,p.toString())}return e}var SG=/\(([^()]*)\)/;function xXe(t){for(var e=t,r;(r=SG.exec(e))!=null;){var[,n]=r;e=e.replace(SG,Hoe(n))}return e}function vXe(t){var e=t.replace(/\s+/g,"");return e=xXe(e),e=Hoe(e),e}function yXe(t){try{return vXe(t)}catch{return vx}}function _P(t){var e=yXe(t.slice(5,-1));return e===vx?"":e}var bXe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wXe=["dx","dy","angle","className","breakAll"];function Zk(){return Zk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zk.apply(null,arguments)}function IG(t,e){if(t==null)return{};var r,n,a=NXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $oe=/[ \f\n\r\t\v\u2028\u2029]+/,Koe=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];ho(e)||(r?a=e.toString().split(""):a=e.toString().split($oe));var s=a.map(l=>({word:l,width:a2(l,n).width})),i=r?0:a2("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function CXe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Goe=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(i),c.width+=l+r;else{var u={words:[i],width:l};a.push(u)}return a},[]),qoe=t=>t.reduce((e,r)=>e.width>r.width?e:r),_Xe="",BG=(t,e,r,n,a,s,i,l)=>{var c=t.slice(0,e),u=Koe({breakAll:r,style:n,children:c+_Xe});if(!u)return[!1,[]];var d=Goe(u.wordsWithComputedWidth,s,i,l),f=d.length>a||qoe(d).width>Number(s);return[f,d]},EXe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=t,u=Kr(s),d=String(i),f=Goe(e,n,r,a);if(!u||a)return f;var h=f.length>s||qoe(f).width>Number(n);if(!h)return f;for(var A=0,m=d.length-1,p=0,g;A<=m&&p<=d.length-1;){var x=Math.floor((A+m)/2),y=x-1,[b,w]=BG(d,y,c,l,s,n,r,a),[B]=BG(d,x,c,l,s,n,r,a);if(!b&&!B&&(A=x+1),b&&B&&(m=x-1),!b&&B){g=w;break}p++}return g||f},PG=t=>{var e=ho(t)?[]:t.toString().split($oe);return[{words:e,width:void 0}]},SXe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!Y4.isSsr){var l,c,u=Koe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return PG(n);return EXe({breakAll:s,children:n,maxLines:i,style:a},l,c,e,!!r)}return PG(n)},zoe="#808080",IXe={angle:0,breakAll:!1,capHeight:"0.71em",fill:zoe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},g3=v.forwardRef((t,e)=>{var r=Vo(t,IXe),{x:n,y:a,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=IG(r,bXe),h=v.useMemo(()=>SXe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:A,dy:m,angle:p,className:g,breakAll:x}=f,y=IG(f,wXe);if(!vf(n)||!vf(a)||h.length===0)return null;var b=Number(n)+(Kr(A)?A:0),w=Number(a)+(Kr(m)?m:0);if(!Bs(b)||!Bs(w))return null;var B;switch(d){case"start":B=_P("calc(".concat(i,")"));break;case"middle":B=_P("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:B=_P("calc(".concat(h.length-1," * -").concat(s,")"));break}var P=[];if(c){var _=h[0].width,{width:E}=f;P.push("scale(".concat(Kr(E)&&Kr(_)?E/_:1,")"))}return p&&P.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),P.length&&(y.transform=P.join(" ")),v.createElement("text",Zk({},Lu(y),{ref:e,x:b,y:w,className:wa("recharts-text",g),textAnchor:u,fill:l.includes("url")?zoe:l}),h.map((I,O)=>{var S=I.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:O===0?B:s,key:"".concat(S,"-").concat(O)},S)}))});g3.displayName="Text";var BXe=["labelRef"],PXe=["content"];function jG(t,e){if(t==null)return{};var r,n,a=jXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function TG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(r),!0).forEach(function(n){TXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TXe(t,e,r){return(e=kXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kXe(t){var e=FXe(t,"string");return typeof e=="symbol"?e:e+""}function FXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yf.apply(null,arguments)}var Woe=v.createContext(null),OXe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(Woe.Provider,{value:c},l)},Xoe=()=>{var t=v.useContext(Woe),e=G4();return t||use(e)},DXe=v.createContext(null),RXe=()=>{var t=v.useContext(DXe),e=Qr(Lie);return t||e},MXe=t=>{var{value:e,formatter:r}=t,n=ho(t.children)?e:t.children;return typeof r=="function"?r(n):n},o8=t=>t!=null&&typeof t=="function",LXe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),360);return r*n},UXe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:A}=a,m=(u+d)/2,p=LXe(f,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=f+g*s,y=A;break;case"insideEnd":x=h-g*s,y=!A;break;case"end":x=h+g*s,y=A;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=hi(l,c,m,x),w=hi(l,c,m,x+(y?1:-1)*359),B="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),P=ho(t.id)?ub("recharts-radial-line-"):t.id;return v.createElement("text",Yf({},n,{dominantBaseline:"central",className:wa("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:P,d:B})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},QXe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=hi(n,a,i+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:A,y:m}=hi(n,a,h,u);return{x:A,y:m,textAnchor:"middle",verticalAnchor:"middle"}},eF=t=>"cx"in t&&Kr(t.cx),VXe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!eF(r)&&(s=r);var{x:i,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=i,h=i+(c-u)/2,A=(f+h)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,B=w*n,P=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var E={x:f+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return Ws(Ws({},E),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var I={x:h+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return Ws(Ws({},I),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var O={x:A-B,y:l+d/2,textAnchor:P,verticalAnchor:"middle"};return Ws(Ws({},O),s?{width:Math.max(O.x-s.x,0),height:d}:{})}if(a==="right"){var S={x:A+m+B,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Ws(Ws({},S),s?{width:Math.max(s.x+s.width-S.x,0),height:d}:{})}var j=s?{width:m,height:d}:{};return a==="insideLeft"?Ws({x:A+B,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},j):a==="insideRight"?Ws({x:A+m-B,y:l+d/2,textAnchor:P,verticalAnchor:"middle"},j):a==="insideTop"?Ws({x:f+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},j):a==="insideBottom"?Ws({x:h+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},j):a==="insideTopLeft"?Ws({x:f+B,y:l+x,textAnchor:_,verticalAnchor:b},j):a==="insideTopRight"?Ws({x:f+c-B,y:l+x,textAnchor:P,verticalAnchor:b},j):a==="insideBottomLeft"?Ws({x:h+B,y:l+d-x,textAnchor:_,verticalAnchor:y},j):a==="insideBottomRight"?Ws({x:h+u-B,y:l+d-x,textAnchor:P,verticalAnchor:y},j):a&&typeof a=="object"&&(Kr(a.x)||IA(a.x))&&(Kr(a.y)||IA(a.y))?Ws({x:i+Al(a.x,m),y:l+Al(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):Ws({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},HXe={angle:0,offset:5,zIndex:dl.label,position:"middle",textBreakAll:!1};function Dh(t){var e=Vo(t,HXe),{viewBox:r,position:n,value:a,children:s,content:i,className:l="",textBreakAll:c,labelRef:u}=e,d=RXe(),f=Xoe(),h=n==="center"?f:d??f,A,m,p;if(r==null?A=h:eF(r)?A=r:A=use(r),!A||ho(a)&&ho(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=Ws(Ws({},e),{},{viewBox:A});if(v.isValidElement(i)){var{labelRef:x}=g,y=jG(g,BXe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=jG(g,PXe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=MXe(e);var B=Lu(e);if(eF(A)){if(n==="insideStart"||n==="insideEnd"||n==="end")return UXe(e,n,m,B,A);p=QXe(A,e.offset,e.position)}else p=VXe(e,A);return v.createElement(Sf,{zIndex:e.zIndex},v.createElement(g3,Yf({ref:u,className:wa("recharts-label",l)},B,p,{textAnchor:CXe(B.textAnchor)?B.textAnchor:p.textAnchor,breakAll:c}),m))}Dh.displayName="Label";var $Xe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(Dh,Yf({key:"label-implicit"},n)):vf(t)?v.createElement(Dh,Yf({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===Dh?v.cloneElement(t,Ws({key:"label-implicit"},n)):v.createElement(Dh,Yf({key:"label-implicit",content:t},n)):o8(t)?v.createElement(Dh,Yf({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(Dh,Yf({},t,{key:"label-implicit"},n)):null};function KXe(t){var{label:e,labelRef:r}=t,n=Xoe();return $Xe(e,n,r)||null}var Yoe={},Joe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Joe);var Zoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Zoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Joe,r=Zoe,n=B4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Yoe);var GXe=Yoe.last;const qXe=OA(GXe);var zXe=["valueAccessor"],WXe=["dataKey","clockWise","id","textBreakAll","zIndex"];function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WS.apply(null,arguments)}function kG(t,e){if(t==null)return{};var r,n,a=XXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function XXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var YXe=t=>Array.isArray(t.value)?qXe(t.value):t.value,ele=v.createContext(void 0),JXe=ele.Provider,tle=v.createContext(void 0),ZXe=tle.Provider;function eYe(){return v.useContext(ele)}function tYe(){return v.useContext(tle)}function O_(t){var{valueAccessor:e=YXe}=t,r=kG(t,zXe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:l}=r,c=kG(r,WXe),u=eYe(),d=tYe(),f=u||d;return!f||!f.length?null:v.createElement(Sf,{zIndex:l??dl.label},v.createElement(Ul,{className:"recharts-label-list"},f.map((h,A)=>{var m,p=ho(n)?e(h,A):Za(h&&h.payload,n),g=ho(s)?{}:{id:"".concat(s,"-").concat(A)};return v.createElement(Dh,WS({key:"label-".concat(A)},Lu(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:A,zIndex:0}))})))}O_.displayName="LabelList";function rle(t){var{label:e}=t;return e?e===!0?v.createElement(O_,{key:"labelList-implicit"}):v.isValidElement(e)||o8(e)?v.createElement(O_,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(O_,WS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var nle=t=>t.graphicalItems.polarItems,rYe=Tt([ms,bw],PR),x3=Tt([nle,Ps,rYe],TR),nYe=Tt([x3],kR),v3=Tt([nYe,i3],FR),aYe=Tt([v3,Ps,x3],DR);Tt([v3,Ps,x3],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=Za(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Za(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var FG=()=>{},sYe=Tt([v3,Ps,x3,A3,ms],UR),iYe=Tt([Ps,MR,LR,FG,sYe,FG,Zn,ms],QR),ale=Tt([Ps,Zn,v3,aYe,yw,ms,iYe],VR),oYe=Tt([ale,Ps,Vv],KR);Tt([Ps,ale,oYe,ms],qR);var lYe={radiusAxis:{},angleAxis:{}},sle=mc({name:"polarAxis",initialState:lYe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Drt,removeRadiusAxis:Rrt,addAngleAxis:Mrt,removeAngleAxis:Lrt}=sle.actions,cYe=sle.reducer;function OG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function DG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(r),!0).forEach(function(n){uYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uYe(t,e,r){return(e=dYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dYe(t){var e=fYe(t,"string");return typeof e=="symbol"?e:e+""}function fYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AYe=(t,e)=>e,l8=Tt([nle,AYe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),hYe=[],c8=(t,e,r)=>(r==null?void 0:r.length)===0?hYe:r,ile=Tt([i3,l8,c8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>DG(DG({},e.presentationProps),s.props))),a!=null)return a}}),mYe=Tt([ile,l8,c8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=Za(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:Q4(i,e.dataKey),color:l,payload:n,type:e.legendType}})}),pYe=Tt([ile,l8,c8,Vi],(t,e,r,n)=>{if(!(e==null||t==null))return xJe({offset:n,pieSettings:e,displayedData:t,cells:r})}),ole={exports:{}},Fa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8=Symbol.for("react.transitional.element"),d8=Symbol.for("react.portal"),y3=Symbol.for("react.fragment"),b3=Symbol.for("react.strict_mode"),w3=Symbol.for("react.profiler"),N3=Symbol.for("react.consumer"),C3=Symbol.for("react.context"),_3=Symbol.for("react.forward_ref"),E3=Symbol.for("react.suspense"),S3=Symbol.for("react.suspense_list"),I3=Symbol.for("react.memo"),B3=Symbol.for("react.lazy"),gYe=Symbol.for("react.view_transition"),xYe=Symbol.for("react.client.reference");function $u(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case u8:switch(t=t.type,t){case y3:case w3:case b3:case E3:case S3:case gYe:return t;default:switch(t=t&&t.$$typeof,t){case C3:case _3:case B3:case I3:return t;case N3:return t;default:return e}}case d8:return e}}}Fa.ContextConsumer=N3;Fa.ContextProvider=C3;Fa.Element=u8;Fa.ForwardRef=_3;Fa.Fragment=y3;Fa.Lazy=B3;Fa.Memo=I3;Fa.Portal=d8;Fa.Profiler=w3;Fa.StrictMode=b3;Fa.Suspense=E3;Fa.SuspenseList=S3;Fa.isContextConsumer=function(t){return $u(t)===N3};Fa.isContextProvider=function(t){return $u(t)===C3};Fa.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===u8};Fa.isForwardRef=function(t){return $u(t)===_3};Fa.isFragment=function(t){return $u(t)===y3};Fa.isLazy=function(t){return $u(t)===B3};Fa.isMemo=function(t){return $u(t)===I3};Fa.isPortal=function(t){return $u(t)===d8};Fa.isProfiler=function(t){return $u(t)===w3};Fa.isStrictMode=function(t){return $u(t)===b3};Fa.isSuspense=function(t){return $u(t)===E3};Fa.isSuspenseList=function(t){return $u(t)===S3};Fa.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===y3||t===w3||t===b3||t===E3||t===S3||typeof t=="object"&&t!==null&&(t.$$typeof===B3||t.$$typeof===I3||t.$$typeof===C3||t.$$typeof===N3||t.$$typeof===_3||t.$$typeof===xYe||t.getModuleId!==void 0)};Fa.typeOf=$u;ole.exports=Fa;var vYe=ole.exports,RG=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",MG=null,EP=null,lle=t=>{if(t===MG&&Array.isArray(EP))return EP;var e=[];return v.Children.forEach(t,r=>{ho(r)||(vYe.isFragment(r)?e=e.concat(lle(r.props.children)):e.push(r))}),EP=e,MG=t,e};function f8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>RG(a)):n=[RG(e)],lle(t).forEach(a=>{var s=jp(a,"type.displayName")||jp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var cle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(cle);var yYe=cle.isPlainObject;const bYe=OA(yYe);var LG,UG,QG,VG,HG;function $G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$G(Object(r),!0).forEach(function(n){wYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wYe(t,e,r){return(e=NYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NYe(t){var e=CYe(t,"string");return typeof e=="symbol"?e:e+""}function CYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XS.apply(null,arguments)}function W1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GG=(t,e,r,n,a)=>{var s=r-n,i;return i=Ds(LG||(LG=W1(["M ",",",""])),t,e),i+=Ds(UG||(UG=W1(["L ",",",""])),t+r,e),i+=Ds(QG||(QG=W1(["L ",",",""])),t+r-s/2,e+a),i+=Ds(VG||(VG=W1(["L ",",",""])),t+r-s/2-n,e+a),i+=Ds(HG||(HG=W1(["L ",","," Z"])),t,e),i},_Ye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EYe=t=>{var e=Vo(t,_Ye),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,h=v.useRef(null),[A,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=Z4(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var J=h.current.getTotalLength();J&&m(J)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var B=wa("recharts-trapezoid",l);if(!f)return v.createElement("g",null,v.createElement("path",XS({},Lu(e),{className:B,d:GG(r,n,a,s,i)})));var P=p.current,_=g.current,E=x.current,I=y.current,O=b.current,S="0px ".concat(A===-1?1:A,"px"),j="".concat(A,"px 0px"),D=Cse(["strokeDasharray"],u,c);return v.createElement(J4,{animationId:w,key:w,canBegin:A>0,duration:u,easing:c,isActive:f,begin:d},J=>{var ge=Bi(P,a,J),se=Bi(_,s,J),he=Bi(E,i,J),me=Bi(I,r,J),Z=Bi(O,n,J);h.current&&(p.current=ge,g.current=se,x.current=he,y.current=me,b.current=Z);var ve=J>0?{transition:D,strokeDasharray:j}:{strokeDasharray:S};return v.createElement("path",XS({},Lu(e),{className:B,d:GG(me,Z,ge,se,he),ref:h,style:KG(KG({},ve),e.style)}))})},SYe=["option","shapeType","activeClassName"];function IYe(t,e){if(t==null)return{};var r,n,a=BYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function BYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function qG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(r),!0).forEach(function(n){PYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PYe(t,e,r){return(e=jYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jYe(t){var e=TYe(t,"string");return typeof e=="symbol"?e:e+""}function TYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kYe(t,e){return YS(YS({},e),t)}function FYe(t,e){return t==="symbols"}function zG(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(Ise,r);case"trapezoid":return v.createElement(EYe,r);case"sector":return v.createElement(Tse,r);case"symbols":if(FYe(e))return v.createElement(SD,r);break;case"curve":return v.createElement(XD,r);default:return null}}function OYe(t){return v.isValidElement(t)?t.props:t}function ule(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=IYe(t,SYe),s;if(v.isValidElement(e))s=v.cloneElement(e,YS(YS({},a),OYe(e)));else if(typeof e=="function")s=e(a,a.index);else if(bYe(e)&&typeof e!="boolean"){var i=kYe(e,a);s=v.createElement(zG,{shapeType:r,elementProps:i})}else{var l=a;s=v.createElement(zG,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(Ul,{className:n},s):s}var A8=(t,e,r)=>{var n=Ha();return(a,s)=>i=>{t==null||t(a,s,i),n(poe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},h8=t=>{var e=Ha();return(r,n)=>a=>{t==null||t(r,n,a),e(Wqe())}},m8=(t,e,r)=>{var n=Ha();return(a,s)=>i=>{t==null||t(a,s,i),n(Xqe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function dle(t){var{tooltipEntrySettings:e}=t,r=Ha(),n=Yc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(Kqe(e)):a.current!==e&&r(Gqe({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(qqe(a.current)),a.current=null)},[r]),null}function DYe(t){var{legendPayload:e}=t,r=Ha(),n=Yc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(yse(e)):a.current!==e&&r(bse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(wse(a.current)),a.current=null)},[r]),null}function RYe(t){var{legendPayload:e}=t,r=Ha(),n=Qr(Zn),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(yse(e)):a.current!==e&&r(bse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(wse(a.current)),a.current=null)},[r]),null}var SP,MYe=()=>{var[t]=v.useState(()=>ub("uid-"));return t},LYe=(SP=qce.useId)!==null&&SP!==void 0?SP:MYe;function UYe(t,e){var r=LYe();return e||(t?"".concat(t,"-").concat(r):r)}var QYe=v.createContext(void 0),fle=t=>{var{id:e,type:r,children:n}=t,a=UYe("recharts-".concat(r),e);return v.createElement(QYe.Provider,{value:a},n(a))},VYe={cartesianItems:[],polarItems:[]},Ale=mc({name:"graphicalItems",initialState:VYe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:is()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=wd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:is()},removeCartesianGraphicalItem:{reducer(t,e){var r=wd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:is()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:is()},removePolarGraphicalItem:{reducer(t,e){var r=wd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:is()}}}),{addCartesianGraphicalItem:HYe,replaceCartesianGraphicalItem:$Ye,removeCartesianGraphicalItem:KYe,addPolarGraphicalItem:GYe,removePolarGraphicalItem:qYe}=Ale.actions,zYe=Ale.reducer,WYe=t=>{var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(HYe(t)):r.current!==t&&e($Ye({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(KYe(r.current)),r.current=null)},[e]),null},XYe=v.memo(WYe);function YYe(t){var e=Ha();return v.useLayoutEffect(()=>(e(GYe(t)),()=>{e(qYe(t))}),[e,t]),null}var JYe=["key"],ZYe=["onMouseEnter","onClick","onMouseLeave"],eJe=["id"],tJe=["id"];function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(r),!0).forEach(function(n){rJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rJe(t,e,r){return(e=nJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nJe(t){var e=aJe(t,"string");return typeof e=="symbol"?e:e+""}function aJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M0(){return M0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M0.apply(null,arguments)}function P3(t,e){if(t==null)return{};var r,n,a=sJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function sJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function iJe(t){var e=v.useMemo(()=>f8(t.children,Bw),[t.children]),r=Qr(n=>mYe(n,t.id,e));return r==null?null:v.createElement(RYe,{legendPayload:r})}var oJe=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:Q4(l,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(dle,{tooltipEntrySettings:f})}),lJe=(t,e)=>t>e?"start":t<e?"end":"middle",cJe=(t,e,r)=>Al(typeof e=="function"?e(t):e,r,r*.8),uJe=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,l=Bse(s,i),c=a+Al(t.cx,s,s/2),u=n+Al(t.cy,i,i/2),d=Al(t.innerRadius,l,0),f=cJe(r,t.outerRadius,l),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},dJe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function fJe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var AJe=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=wa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=P3(e,JYe);return v.createElement(XD,M0({},a,{type:"linear",className:r}))},hJe=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=wa("recharts-pie-label-text",fJe(t));return v.createElement(g3,M0({},e,{alignmentBaseline:"middle",className:a}),n)};function mJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var l=gf(r),c=cb(a),u=cb(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((h,A)=>{var m=(h.startAngle+h.endAngle)/2,p=hi(h.cx,h.cy,h.outerRadius+d,m),g=Ls(Ls(Ls(Ls({},l),h),{},{stroke:"none"},c),{},{index:A,textAnchor:lJe(p.x,h.cx)},p),x=Ls(Ls(Ls(Ls({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:A,points:[hi(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(Sf,{zIndex:dl.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(A)},v.createElement(Ul,null,s&&AJe(s,x),hJe(a,g,Za(h,i))))});return v.createElement(Ul,{className:"recharts-pie-labels"},f)}function pJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(rle,{label:a}):v.createElement(mJe,{sectors:e,props:r,showLabels:n})}function gJe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,l=Qr(Dp),c=Qr(r8),u=Qr(Oze),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,A=P3(a,ZYe),m=A8(d,a.dataKey,i),p=h8(h),g=m8(f,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===l&&(c==null||a.dataKey===c)&&b,B=l?n:null,P=r&&w?r:B,_=Ls(Ls({},x),{},{stroke:x.stroke,tabIndex:-1,[rse]:y,[nse]:i});return v.createElement(Ul,M0({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},uw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(ule,M0({option:s??P,index:y,shapeType:"sector",isActive:w},_)))}))}function xJe(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),A=dJe(l,c),m=Math.abs(A),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(P=>Za(P,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((P,_)=>{var E=Za(_,u,0);return P+(Kr(E)?E:0)},0),w;if(b>0){var B;w=n.map((P,_)=>{var E=Za(P,u,0),I=Za(P,d,_),O=uJe(r,s,P),S=(Kr(E)?E:0)/b,j,D=Ls(Ls({},P),a&&a[_]&&a[_].props);_?j=B.endAngle+Lo(A)*p*(E!==0?1:0):j=l;var J=j+Lo(A)*((E!==0?h:0)+S*y),ge=(j+J)/2,se=(O.innerRadius+O.outerRadius)/2,he=[{name:I,value:E,payload:D,dataKey:u,type:f,graphicalItemId:r.id}],me=hi(O.cx,O.cy,se,ge);return B=Ls(Ls(Ls(Ls({},r.presentationProps),{},{percent:S,cornerRadius:typeof i=="string"?parseFloat(i):i,name:I,tooltipPayload:he,midAngle:ge,middleRadius:se,tooltipPosition:me},D),O),{},{value:E,dataKey:u,startAngle:j,endAngle:J,payload:D,paddingAngle:Lo(A)*p}),B})}return w}function vJe(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(ZXe,{value:e?a:void 0},n)}function yJe(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:h}=e,A=Z4(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return v.createElement(vJe,{showLabels:!p,sectors:a},v.createElement(J4,{animationId:A,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:A},b=>{var w=[],B=a&&a[0],P=B==null?void 0:B.startAngle;return a==null||a.forEach((_,E)=>{var I=m&&m[E],O=E>0?jp(_,"paddingAngle",0):0;if(I){var S=Bi(I.endAngle-I.startAngle,_.endAngle-_.startAngle,b),j=Ls(Ls({},_),{},{startAngle:P+O,endAngle:P+S+O});w.push(j),P=j.endAngle}else{var{endAngle:D,startAngle:J}=_,ge=Bi(0,D-J,b),se=Ls(Ls({},_),{},{startAngle:P+O,endAngle:P+ge+O});w.push(se),P=se.endAngle}}),r.current=w,v.createElement(Ul,null,v.createElement(gJe,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(pJe,{showLabels:!p,sectors:a,props:e}),e.children)}var bJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:dl.area};function wJe(t){var{id:e}=t,r=P3(t,eJe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>f8(t.children,Bw),[t.children]),l=Qr(d=>pYe(d,e,i)),c=v.useRef(null),u=wa("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(Ul,{tabIndex:s,className:u})):v.createElement(Sf,{zIndex:t.zIndex},v.createElement(oJe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(Ul,{tabIndex:s,className:u},v.createElement(yJe,{props:Ls(Ls({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function hle(t){var e=Vo(t,bJe),{id:r}=e,n=P3(e,tJe),a=gf(n);return v.createElement(fle,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(YYe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(iJe,M0({},n,{id:s})),v.createElement(wJe,M0({},n,{id:s}))))}hle.displayName="Pie";function XG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XG(Object(r),!0).forEach(function(n){NJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NJe(t,e,r){return(e=CJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CJe(t){var e=_Je(t,"string");return typeof e=="symbol"?e:e+""}function _Je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mle=0,EJe={xAxis:{},yAxis:{},zAxis:{}},ple=mc({name:"cartesianAxis",initialState:EJe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:is()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:is()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:is()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:is()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:is()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:is()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:is()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:is()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:is()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=YG(YG({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:SJe,replaceXAxis:IJe,removeXAxis:BJe,addYAxis:PJe,replaceYAxis:jJe,removeYAxis:TJe,addZAxis:Urt,replaceZAxis:Qrt,removeZAxis:Vrt,updateYAxisWidth:kJe}=ple.actions,FJe=ple.reducer,OJe=Tt([Vi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),DJe=Tt([OJe,HA,$A],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),gle=()=>Qr(DJe),JG=(t,e,r)=>{var n=r??t;if(!ho(n))return Al(n,e,0)},RJe=(t,e,r)=>{var n={},a=t.filter(c3),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),A=JG(e,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:A}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=JG(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function ZG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(r),!0).forEach(function(n){MJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MJe(t,e,r){return(e=LJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LJe(t){var e=UJe(t,"string");return typeof e=="symbol"?e:e+""}function UJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QJe(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=Al(t,r,0,!0),l,c=[];if(Bs(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((x,y)=>x+(y.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,A={offset:h-i,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A.offset+A.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},B=[...x,w];return A=B[B.length-1].position,B},c)}else{var m=Al(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=Bs(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return l}}var VJe=(t,e,r,n,a,s,i)=>{var l=ho(i)?e:i,c=QJe(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>QC(QC({},u),{},{position:QC(QC({},u.position),{},{offset:u.position.offset-a/2})}))),c},HJe=(t,e)=>{var r=IR(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function $Je(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Bs(t.zIndex)?t.zIndex:e}var xle=t=>{var{chartData:e}=t,r=Ha(),n=Yc();return v.useEffect(()=>n?()=>{}:(r(mG(e)),()=>{r(mG(void 0))}),[e,r,n]),null},eq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vle=mc({name:"brush",initialState:eq,reducers:{setBrushSettings(t,e){return e.payload==null?eq:e.payload}}}),{setBrushSettings:Hrt}=vle.actions,KJe=vle.reducer;function GJe(t,e,r){return(e=qJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qJe(t){var e=zJe(t,"string");return typeof e=="symbol"?e:e+""}function zJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class p8{static create(e){return new p8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}GJe(p8,"EPS",1e-4);function WJe(t){return(t%180+180)%180}var XJe=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=WJe(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},YJe={dots:[],areas:[],lines:[]},yle=mc({name:"referenceElements",initialState:YJe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=wd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=wd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=wd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:$rt,removeDot:Krt,addArea:Grt,removeArea:qrt,addLine:zrt,removeLine:Wrt}=yle.actions,JJe=yle.reducer,ZJe=v.createContext(void 0),eZe=t=>{var{children:e}=t,[r]=v.useState("".concat(ub("recharts"),"-clip")),n=gle();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return v.createElement(ZJe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:i}))),e)};function ble(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function tZe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return XJe(n,r)}function rZe(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:l}=t;return e===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function Cb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function nZe(t,e){return ble(t,e+1)}function aZe(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=e,c=0,u=1,d=i,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:ble(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||Cb(t,y,x,d,l);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function sZe(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:l,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,f=l,h=!0,A=function(){var y=n[m],b=m,w,B=()=>(w===void 0&&(w=r(y,b)),w),P=y.coordinate,_=m===d||Cb(t,P,B,f,c);if(!_)return h=!1,1;_&&(f=P+t*(B()/2+a))},m=d;m<i&&!A();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function tq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function al(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tq(Object(r),!0).forEach(function(n){iZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iZe(t,e,r){return(e=oZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oZe(t){var e=lZe(t,"string");return typeof e=="symbol"?e:e+""}function lZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cZe(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=e,{end:c}=e,u=function(h){var A=s[h],m,p=()=>(m===void 0&&(m=r(A,h)),m);if(h===i-1){var g=t*(A.coordinate+t*p()/2-c);s[h]=A=al(al({},A),{},{tickCoord:g>0?A.coordinate-g*t:A.coordinate})}else s[h]=A=al(al({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var x=Cb(t,A.tickCoord,p,l,c);x&&(c=A.tickCoord-t*(p()/2+a),s[h]=al(al({},A),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function uZe(t,e,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),h=t*(d.coordinate+t*f/2-u);if(i[l-1]=d=al(al({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var A=Cb(t,d.tickCoord,()=>f,c,u);A&&(u=d.tickCoord-t*(f/2+a),i[l-1]=al(al({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=i[y],w,B=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var P=t*(b.coordinate-t*B()/2-c);i[y]=b=al(al({},b),{},{tickCoord:P<0?b.coordinate-P*t:b.coordinate})}else i[y]=b=al(al({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=Cb(t,b.tickCoord,B,c,u);_&&(c=b.tickCoord+t*(B()/2+a),i[y]=al(al({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function dZe(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(Kr(c)||Y4.isSsr){var h;return(h=nZe(a,Kr(c)?c:0))!==null&&h!==void 0?h:[]}var A=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?a2(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var B=typeof u=="function"?u(b.value,w):b.value;return m==="width"?tZe(a2(B,{fontSize:e,letterSpacing:r}),p,f):a2(B,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?Lo(a[1].coordinate-a[0].coordinate):1,y=rZe(s,x,m);return c==="equidistantPreserveStart"?aZe(x,y,g,a,i):c==="equidistantPreserveEnd"?sZe(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?A=uZe(x,y,g,a,i,c==="preserveStartEnd"):A=cZe(x,y,g,a,i),A.filter(b=>b.isShow))}var fZe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},AZe=["axisLine","width","height","className","hide","ticks","axisType"];function hZe(t,e){if(t==null)return{};var r,n,a=mZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Rp(){return Rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rp.apply(null,arguments)}function rq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ui(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rq(Object(r),!0).forEach(function(n){pZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pZe(t,e,r){return(e=gZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gZe(t){var e=xZe(t,"string");return typeof e=="symbol"?e:e+""}function xZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var op={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:dl.axis};function vZe(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=ui(ui(ui({},c),gf(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=ui(ui({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!i||s==="right"&&i);u=ui(ui({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return v.createElement("line",Rp({},u,{className:wa("recharts-cartesian-axis-line",jp(l,"className"))}))}function yZe(t,e,r,n,a,s,i,l,c){var u,d,f,h,A,m,p=l?-1:1,g=t.tickSize||i,x=Kr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!l*a,f=h-p*g,m=f-p*c,A=x;break;case"left":f=h=t.coordinate,d=e+ +!l*n,u=d-p*g,A=u-p*c,m=x;break;case"right":f=h=t.coordinate,d=e+ +l*n,u=d+p*g,A=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +l*a,f=h+p*g,m=f+p*c,A=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:A,y:m}}}function bZe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function wZe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function NZe(t){var{option:e,tickProps:r,value:n}=t,a,s=wa(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,ui(ui({},r),{},{className:s}));else if(typeof e=="function")a=e(ui(ui({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=wa(i,e==null?void 0:e.className)),a=v.createElement(g3,Rp({},r,{className:i}),n)}return a}var CZe=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:A,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:B,axisType:P}=t,_=dZe(ui(ui({},w),{},{ticks:r}),y,b),E=bZe(d,f),I=wZe(d,f),O=gf(w),S=cb(n),j={};typeof a=="object"&&(j=a);var D=ui(ui({},O),{},{fill:"none"},j),J=_.map(he=>ui({entry:he},yZe(he,h,A,m,p,d,g,f,x))),ge=J.map(he=>{var{entry:me,line:Z}=he;return v.createElement(Ul,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},a&&v.createElement("line",Rp({},D,Z,{className:wa("recharts-cartesian-axis-tick-line",jp(a,"className"))})))}),se=J.map((he,me)=>{var{entry:Z,tick:ve}=he,Se=ui(ui(ui(ui({textAnchor:E,verticalAnchor:I},O),{},{stroke:"none",fill:s},S),ve),{},{index:me,payload:Z,visibleTicksCount:_.length,tickFormatter:i,padding:c},u);return v.createElement(Ul,Rp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},uw(B,Z,me)),n&&v.createElement(NZe,{option:n,tickProps:Se,value:"".concat(typeof i=="function"?i(Z.value,me):Z.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},se.length>0&&v.createElement(Sf,{zIndex:dl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:e},se)),ge.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},ge))}),_Ze=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:l,axisType:c}=t,u=hZe(t,AZe),[d,f]=v.useState(""),[h,A]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return fZe({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,B=b.letterSpacing;(w!==d||B!==h)&&(f(w),A(B))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(Sf,{zIndex:t.zIndex},v.createElement(Ul,{className:wa("recharts-cartesian-axis",s)},v.createElement(vZe,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:gf(t)}),v.createElement(CZe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(OXe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(KXe,{label:t.label,labelRef:t.labelRef}),t.children)))}),g8=v.forwardRef((t,e)=>{var r=Vo(t,op);return v.createElement(_Ze,Rp({},r,{ref:e}))});g8.displayName="CartesianAxis";var EZe={},wle=mc({name:"errorBars",initialState:EZe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Xrt,replaceErrorBar:Yrt,removeErrorBar:Jrt}=wle.actions,SZe=wle.reducer,IZe=["children"];function BZe(t,e){if(t==null)return{};var r,n,a=PZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},TZe=v.createContext(jZe);function kZe(t){var{children:e}=t,r=BZe(t,IZe);return v.createElement(TZe.Provider,{value:r},e)}function Nle(t,e){var r,n,a=Qr(u=>qA(u,t)),s=Qr(u=>zA(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Ji.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Zi.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function FZe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=gle(),{needClipX:s,needClipY:i,needClip:l}=Nle(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var OZe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=v;function DZe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RZe=typeof Object.is=="function"?Object.is:DZe,MZe=Pw.useSyncExternalStore,LZe=Pw.useRef,UZe=Pw.useEffect,QZe=Pw.useMemo,VZe=Pw.useDebugValue;OZe.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=LZe(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=QZe(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,RZe(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=MZe(t,s[0],s[1]);return UZe(function(){i.hasValue=!0,i.value=l},[l]),VZe(l),l};function HZe(t){t()}function $Ze(){let t=null,e=null;return{clear(){t=null,e=null},notify(){HZe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var nq={notify(){},get:()=>[]};function KZe(t,e){let r,n=nq,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=$Ze())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=nq)}function h(){s||(s=!0,d())}function A(){s&&(s=!1,f())}const m={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:A,getListeners:()=>n};return m}var GZe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qZe=GZe(),zZe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WZe=zZe(),XZe=()=>qZe||WZe?v.useLayoutEffect:v.useEffect,YZe=XZe();function aq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function JZe(t,e){if(aq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!aq(t[r[a]],e[r[a]]))return!1;return!0}var IP=Symbol.for("react-redux-context"),BP=typeof globalThis<"u"?globalThis:{};function ZZe(){if(!v.createContext)return{};const t=BP[IP]??(BP[IP]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var eet=ZZe();function tet(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=KZe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);YZe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||eet;return v.createElement(l.Provider,{value:s},e)}var ret=tet,net=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function aet(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function x8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(net.has(n)){if(t[n]==null&&e[n]==null)continue;if(!JZe(t[n],e[n]))return!1}else if(!aet(t[n],e[n]))return!1;return!0}function ag(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:mle}function sg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:mle}var set="Invariant failed";function iet(t,e){throw new Error(set)}function tF(){return tF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tF.apply(null,arguments)}function JS(t){return v.createElement(ule,tF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var oet=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Kr(e))return e;var s=Kr(n)||ho(n);return s?e(n,a):(s||iet(),r)}},cet=(t,e,r)=>r,uet=(t,e)=>e,jw=Tt([jR,uet],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),det=Tt([jw],t=>t==null?void 0:t.maxBarSize),fet=(t,e,r,n)=>n,Aet=Tt([Zn,jR,ag,sg,cet],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),het=(t,e,r)=>{var n=Zn(t),a=ag(t,e),s=sg(t,e);if(!(a==null||s==null))return n==="horizontal"?zk(t,"yAxis",s,r):zk(t,"xAxis",a,r)},met=(t,e)=>{var r=Zn(t),n=ag(t,e),a=sg(t,e);if(!(n==null||a==null))return r==="horizontal"?aG(t,"xAxis",n):aG(t,"yAxis",a)},pet=Tt([Aet,MGe,met],RJe),get=(t,e,r)=>{var n,a,s=jw(t,e);if(s!=null){var i=ag(t,e),l=sg(t,e);if(!(i==null||l==null)){var c=Zn(t),u=jie(t),{maxBarSize:d}=s,f=ho(d)?u:d,h,A;return c==="horizontal"?(h=Av(t,"xAxis",i,r),A=fv(t,"xAxis",i,r)):(h=Av(t,"yAxis",l,r),A=fv(t,"yAxis",l,r)),(n=(a=ES(h,A,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Cle=(t,e,r)=>{var n=Zn(t),a=ag(t,e),s=sg(t,e);if(!(a==null||s==null)){var i,l;return n==="horizontal"?(i=Av(t,"xAxis",a,r),l=fv(t,"xAxis",a,r)):(i=Av(t,"yAxis",s,r),l=fv(t,"yAxis",s,r)),ES(i,l)}},xet=Tt([pet,jie,RGe,Tie,get,Cle,det],VJe),vet=(t,e,r)=>{var n=ag(t,e);if(n!=null)return Av(t,"xAxis",n,r)},yet=(t,e,r)=>{var n=sg(t,e);if(n!=null)return Av(t,"yAxis",n,r)},bet=(t,e,r)=>{var n=ag(t,e);if(n!=null)return fv(t,"xAxis",n,r)},wet=(t,e,r)=>{var n=sg(t,e);if(n!=null)return fv(t,"yAxis",n,r)},Net=Tt([xet,jw],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),Cet=Tt([het,jw],HJe),_et=Tt([Vi,GD,vet,yet,bet,wet,Net,Zn,_Ge,Cle,Cet,jw,fet],(t,e,r,n,a,s,i,l,c,u,d,f,h)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||i==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,x;if(g!=null&&g.length>0?x=g:x=A==null?void 0:A.slice(m,p+1),x!=null)return ttt({layout:l,barSettings:f,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),Eet=["index"];function rF(){return rF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rF.apply(null,arguments)}function Iet(t,e){if(t==null)return{};var r,n,a=Bet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Bet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _le=v.createContext(void 0),Pet=t=>{var e=v.useContext(_le);if(e!=null)return e.stackId;if(t!=null)return EQe(t)},jet=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Tet=t=>{var e=v.useContext(_le);if(e!=null){var{stackId:r}=e;return"url(#".concat(jet(r,t),")")}},ket=t=>{var{index:e}=t,r=Iet(t,Eet),n=Tet(e);return v.createElement(Ul,rF({className:"recharts-bar-stack-layer",clipPath:n},r))},Fet=["onMouseEnter","onMouseLeave","onClick"],Oet=["value","background","tooltipPosition"],Det=["id"],Ret=["onMouseEnter","onClick","onMouseLeave"];function FA(){return FA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FA.apply(null,arguments)}function sq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sq(Object(r),!0).forEach(function(n){Met(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Met(t,e,r){return(e=Let(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Let(t){var e=Uet(t,"string");return typeof e=="symbol"?e:e+""}function Uet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZS(t,e){if(t==null)return{};var r,n,a=Qet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Vet=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:Q4(r,e),payload:t}]},Het=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:Q4(s,e),hide:i,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(dle,{tooltipEntrySettings:d})});function $et(t){var e=Qr(Dp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=ZS(s,Fet),d=A8(i,n,s.id),f=h8(l),h=m8(c,n,s.id);if(!a||r==null)return null;var A=cb(a);return v.createElement(Sf,{zIndex:$Je(a,dl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=ZS(m,Oet);if(!x)return null;var w=d(m,p),B=f(m,p),P=h(m,p),_=Fl(Fl(Fl(Fl(Fl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),A),uw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:B,onClick:P,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(JS,FA({key:"background-bar-".concat(p)},_))}))}function Ket(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Fl(Fl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(JXe,{value:e?a:void 0},r)}function Get(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,l=Qr(Dp),c=Qr(r8),u=r&&String(s)===l&&(c==null||i===c),d=u?r:e;return u?v.createElement(Sf,{zIndex:dl.activeBar},v.createElement(JS,FA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(JS,FA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function qet(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(JS,FA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function zet(t){var e,{data:r,props:n}=t,a=(e=gf(n))!==null&&e!==void 0?e:{},{id:s}=a,i=ZS(a,Det),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,A=ZS(n,Ret),m=A8(d,c,s),p=h8(h),g=m8(f,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(ket,FA({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},uw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(Get,{shape:l,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement(qet,{shape:l,baseProps:i,entry:x,index:y,dataKey:c})))):null}function Wet(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,h=Z4(e,"recharts-bar-"),[A,m]=v.useState(!1),p=!A,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(Ket,{showLabels:p,rects:n},v.createElement(J4,{animationId:h,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,B)=>{var P=f&&f[B];if(P)return Fl(Fl({},w),{},{x:Bi(P.x,w.x,y),y:Bi(P.y,w.y,y),width:Bi(P.width,w.width,y),height:Bi(P.height,w.height,y)});if(a==="horizontal"){var _=Bi(0,w.height,y),E=Bi(w.stackedBarStart,w.y,y);return Fl(Fl({},w),{},{y:E,height:_})}var I=Bi(0,w.width,y),O=Bi(w.stackedBarStart,w.x,y);return Fl(Fl({},w),{},{width:I,x:O})});return y>0&&(r.current=b??null),b==null?null:v.createElement(Ul,null,v.createElement(zet,{props:e,data:b}))}),v.createElement(rle,{label:e.label}),e.children)}function Xet(t){var e=v.useRef(null);return v.createElement(Wet,{previousRectanglesRef:e,props:t})}var Ele=0,Yet=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Za(t,e)}};class Jet extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=wa("recharts-bar",a),f=u;return v.createElement(Ul,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(FZe,{clipPathId:f,xAxisId:s,yAxisId:i})),v.createElement(Ul,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},v.createElement($et,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(Xet,this.props)))}}var Zet={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Ele,xAxisId:0,yAxisId:0,zIndex:dl.bar};function ett(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=Nle(e,r),h=hw(),A=Yc(),m=f8(t.children,Bw),p=Qr(y=>_et(y,t.id,A,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(kZe,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:Yet,errorBarOffset:g},v.createElement(Jet,FA({},t,{layout:h,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function ttt(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:A,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:i,x=d?g.scale.domain():null,y=SQe({numericAxis:g}),b=g.scale(y);return f.map((w,B)=>{var P,_,E,I,O,S;if(d){var j=d[B+p];if(j==null)return null;P=bQe(j,x)}else P=Za(w,r),Array.isArray(P)||(P=[y,P]);var D=oet(n,Ele)(P[1],B);if(e==="horizontal"){var J,[ge,se]=[l.scale(P[0]),l.scale(P[1])];_=h$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:B}),E=(J=se??ge)!==null&&J!==void 0?J:void 0,I=a.size;var he=ge-se;if(O=xf(he)?0:he,S={x:_,y:h.top,width:I,height:h.height},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var me=Lo(O||D)*(Math.abs(D)-Math.abs(O));E-=me,O+=me}}else{var[Z,ve]=[i.scale(P[0]),i.scale(P[1])];if(_=Z,E=h$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:B}),I=ve-Z,O=a.size,S={x:h.left,y:E,width:h.width,height:O},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var Se=Lo(I||D)*(Math.abs(D)-Math.abs(I));I+=Se}}if(_==null||E==null||I==null||O==null)return null;var k=Fl(Fl({},w),{},{stackedBarStart:b,x:_,y:E,width:I,height:O,value:d?P:P[1],payload:w,background:S,tooltipPosition:{x:_+I/2,y:E+O/2},parentViewBox:m},A&&A[B]&&A[B].props);return k}).filter(Boolean)}function rtt(t){var e=Vo(t,Zet),r=Pet(e.stackId),n=Yc();return v.createElement(fle,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(DYe,{legendPayload:Vet(e)}),v.createElement(Het,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(XYe,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(Sf,{zIndex:e.zIndex},v.createElement(ett,FA({},e,{id:a})))))}var nF=v.memo(rtt,x8);nF.displayName="Bar";var ntt=["domain","range"],att=["domain","range"];function iq(t,e){if(t==null)return{};var r,n,a=stt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function stt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Sle(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=iq(t,ntt),{domain:s,range:i}=e,l=iq(e,att);return!oq(r,s)||!oq(n,i)?!1:x8(a,l)}var itt=["dangerouslySetInnerHTML","ticks","scale"],ott=["id","scale"];function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aF.apply(null,arguments)}function lq(t,e){if(t==null)return{};var r,n,a=ltt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ltt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ctt(t){var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(SJe(t)):r.current!==t&&e(IJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(BJe(r.current)),r.current=null)},[e]),null}var utt=t=>{var{xAxisId:e,className:r}=t,n=Qr(GD),a=Yc(),s="xAxis",i=Qr(x=>uoe(x,s,e,a)),l=Qr(x=>ioe(x,e)),c=Qr(x=>Oqe(x,e)),u=Qr(x=>Qie(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:h}=t,A=lq(t,itt),{id:m,scale:p}=u,g=lq(u,ott);return v.createElement(g8,aF({},A,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:wa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},dtt={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:Ji.allowDecimals,allowDuplicatedCategory:Ji.allowDuplicatedCategory,angle:Ji.angle,axisLine:op.axisLine,height:Ji.height,hide:!1,includeHidden:Ji.includeHidden,interval:Ji.interval,minTickGap:Ji.minTickGap,mirror:Ji.mirror,orientation:Ji.orientation,padding:Ji.padding,reversed:Ji.reversed,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,tickLine:op.tickLine,tickSize:op.tickSize,type:Ji.type,xAxisId:0},ftt=t=>{var e=Vo(t,dtt);return v.createElement(v.Fragment,null,v.createElement(ctt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(utt,e))},Ile=v.memo(ftt,Sle);Ile.displayName="XAxis";var Att=["dangerouslySetInnerHTML","ticks","scale"],htt=["id","scale"];function sF(){return sF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sF.apply(null,arguments)}function cq(t,e){if(t==null)return{};var r,n,a=mtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ptt(t){var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(PJe(t)):r.current!==t&&e(jJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(TJe(r.current)),r.current=null)},[e]),null}var gtt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),l=Qr(GD),c=Yc(),u=Ha(),d="yAxis",f=Qr(P=>ooe(P,e)),h=Qr(P=>Rqe(P,e)),A=Qr(P=>uoe(P,d,e,c)),m=Qr(P=>Vie(P,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!f||o8(a)||v.isValidElement(a)||m==null)){var P=s.current;if(P){var _=P.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(kJe({id:e,width:_}))}}},[A,f,u,a,e,n,m]),f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=cq(t,Att),{id:b,scale:w}=m,B=cq(m,htt);return v.createElement(g8,sF({},y,B,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:wa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:A,axisType:d}))},xtt={allowDataOverflow:Zi.allowDataOverflow,allowDecimals:Zi.allowDecimals,allowDuplicatedCategory:Zi.allowDuplicatedCategory,angle:Zi.angle,axisLine:op.axisLine,hide:!1,includeHidden:Zi.includeHidden,interval:Zi.interval,minTickGap:Zi.minTickGap,mirror:Zi.mirror,orientation:Zi.orientation,padding:Zi.padding,reversed:Zi.reversed,scale:Zi.scale,tick:Zi.tick,tickCount:Zi.tickCount,tickLine:op.tickLine,tickSize:op.tickSize,type:Zi.type,width:Zi.width,yAxisId:0},vtt=t=>{var e=Vo(t,xtt);return v.createElement(v.Fragment,null,v.createElement(ptt,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(gtt,e))},Ble=v.memo(vtt,Sle);Ble.displayName="YAxis";var ytt=(t,e)=>e,v8=Tt([ytt,Zn,Lie,$i,Eoe,WA,Jze,Vi],sWe),y8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Ple=Uu("mouseClick"),jle=fw();jle.startListening({actionCreator:Ple,effect:(t,e)=>{var r=t.payload,n=v8(e.getState(),y8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(Yqe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var iF=Uu("mouseMove"),Tle=fw(),VC=null;Tle.startListening({actionCreator:iF,effect:(t,e)=>{var r=t.payload;VC!==null&&cancelAnimationFrame(VC);var n=y8(r);VC=requestAnimationFrame(()=>{var a=e.getState(),s=XR(a,a.tooltip.settings.shared);if(s==="axis"){var i=v8(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(xoe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(goe())}VC=null})}});function btt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var uq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},kle=mc({name:"rootProps",initialState:uq,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:uq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),wtt=kle.reducer,{updateOptions:Ntt}=kle.actions,Fle=mc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Ctt}=Fle.actions,_tt=Fle.reducer,Ole=Uu("keyDown"),Dle=Uu("focus"),b8=fw();b8.startListening({actionCreator:Ole,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=YR(a,Kv(r),Cw(r),Sw(r)),l=i==null?-1:Number(i);if(!(!Number.isFinite(l)||l<0)){var c=WA(r);if(s==="Enter"){var u=zS(r,"axis","hover",String(a.index));e.dispatch(Xk({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=Qqe(r),f=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,A=l+h*f;if(!(c==null||A>=c.length||A<0)){var m=zS(r,"axis","hover",String(A));e.dispatch(Xk({active:!0,activeIndex:A.toString(),activeCoordinate:m}))}}}}}});b8.startListening({actionCreator:Dle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=zS(r,"axis","hover",String(s));e.dispatch(Xk({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var pu=Uu("externalEvent"),Rle=fw(),PP=new Map;Rle.startListening({actionCreator:pu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=PP.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Rze(l),activeDataKey:r8(l),activeIndex:Dp(l),activeLabel:Boe(l),activeTooltipIndex:Dp(l),isTooltipActive:Mze(l)};r(c,n)}finally{PP.delete(a)}});PP.set(a,i)}}});var Ett=Tt([Hv],t=>t.tooltipItemPayloads),Stt=Tt([Ett,Ew,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),Mle=Uu("touchMove"),Lle=fw();Lle.startListening({actionCreator:Mle,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=XR(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=v8(n,y8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(xoe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(rse),f=(l=u.getAttribute(nse))!==null&&l!==void 0?l:void 0,h=$v(n).find(p=>p.id===f);if(d==null||h==null||f==null)return;var{dataKey:A}=h,m=Stt(n,d,f);e.dispatch(poe({activeDataKey:A,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var Itt=Eae({brush:KJe,cartesianAxis:FJe,chartData:OWe,errorBars:SZe,graphicalItems:zYe,layout:mQe,legend:yVe,options:PWe,polarAxis:cYe,polarOptions:_tt,referenceElements:JJe,rootProps:wtt,tooltip:Jqe,zIndex:vWe}),Btt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return U9e({reducer:Itt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([jle.middleware,Tle.middleware,b8.middleware,Rle.middleware,Lle.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Qae({type:"raf"}))},devTools:{serialize:{replacer:btt},name:"recharts-".concat(r)}})};function Ule(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Yc(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=Btt(e,n));var i=RD;return v.createElement(ret,{context:i,store:s.current},r)}function Ptt(t){var{layout:e,margin:r}=t,n=Ha(),a=Yc();return v.useEffect(()=>{a||(n(fQe(e)),n(dQe(r)))},[n,a,e,r]),null}var Qle=v.memo(Ptt,x8);function Vle(t){var e=Ha();return v.useEffect(()=>{e(Ntt(t))},[e,t]),null}function dq(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=Ha();return v.useLayoutEffect(()=>(n.current&&a(gWe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(xWe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function fq(t){var{children:e,isPanorama:r}=t,n=Qr(oWe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(dq,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(dq,{key:i,zIndex:i,isPanorama:r})))}var jtt=["children"];function Ttt(t,e){if(t==null)return{};var r,n,a=ktt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ktt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eI(){return eI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eI.apply(null,arguments)}var Ftt={width:"100%",height:"100%",display:"block"},Ott=v.forwardRef((t,e)=>{var r=dse(),n=fse(),a=Nse();if(!D0(r)||!D0(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(wD,eI({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Ftt,ref:e}),s)}),Dtt=t=>{var{children:e}=t,r=Qr(K4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(wD,{width:n,height:a,x:i,y:s},e)},Aq=v.forwardRef((t,e)=>{var{children:r}=t,n=Ttt(t,jtt),a=Yc();return a?v.createElement(Dtt,null,v.createElement(fq,{isPanorama:!0},r)):v.createElement(Ott,eI({ref:e},n),v.createElement(fq,{isPanorama:!1},r))});function Rtt(){var t=Ha(),[e,r]=v.useState(null),n=Qr(kQe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Bs(s)&&s!==n&&t(hQe(s))}},[e,t,n]),r}function hq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mtt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hq(Object(r),!0).forEach(function(n){Ltt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ltt(t,e,r){return(e=Utt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Utt(t){var e=Qtt(t,"string");return typeof e=="symbol"?e:e+""}function Qtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mp(){return Mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mp.apply(null,arguments)}var Vtt=()=>($We(),null);function tI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Htt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:tI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:tI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{i(f=>{var h=Math.round(u),A=Math.round(d);return f.containerWidth===h&&f.containerHeight===A?f:{containerWidth:h,containerHeight:A}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var h=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},A=new ResizeObserver(h);A.observe(u),a.current=A}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(q4,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Mp({ref:c},t)))}),$tt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:tI(r),containerHeight:tI(n)}),i=v.useCallback((c,u)=>{s(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(q4,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",Mp({ref:l},t)))}),Ktt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(q4,{width:r,height:n}),v.createElement("div",Mp({ref:e},t)))}),Gtt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return IA(r)||IA(n)?v.createElement($tt,Mp({},t,{ref:e})):v.createElement(Ktt,Mp({},t,{ref:e}))});function qtt(t){return t===!0?Htt:Gtt}var ztt=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:A,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),B=Ha(),[P,_]=v.useState(null),[E,I]=v.useState(null),O=Rtt(),S=qD(),j=(S==null?void 0:S.width)>0?S.width:x,D=(S==null?void 0:S.height)>0?S.height:a,J=v.useCallback(z=>{O(z),typeof e=="function"&&e(z),_(z),I(z),z!=null&&(w.current=z)},[O,e,_,I]),ge=v.useCallback(z=>{B(Ple(z)),B(pu({handler:s,reactEvent:z}))},[B,s]),se=v.useCallback(z=>{B(iF(z)),B(pu({handler:u,reactEvent:z}))},[B,u]),he=v.useCallback(z=>{B(goe()),B(pu({handler:d,reactEvent:z}))},[B,d]),me=v.useCallback(z=>{B(iF(z)),B(pu({handler:f,reactEvent:z}))},[B,f]),Z=v.useCallback(()=>{B(Dle())},[B]),ve=v.useCallback(z=>{B(Ole(z.key))},[B]),Se=v.useCallback(z=>{B(pu({handler:i,reactEvent:z}))},[B,i]),k=v.useCallback(z=>{B(pu({handler:l,reactEvent:z}))},[B,l]),F=v.useCallback(z=>{B(pu({handler:c,reactEvent:z}))},[B,c]),H=v.useCallback(z=>{B(pu({handler:h,reactEvent:z}))},[B,h]),Q=v.useCallback(z=>{B(pu({handler:p,reactEvent:z}))},[B,p]),V=v.useCallback(z=>{b&&B(Mle(z)),B(pu({handler:m,reactEvent:z}))},[B,b,m]),Y=v.useCallback(z=>{B(pu({handler:A,reactEvent:z}))},[B,A]),R=qtt(y);return v.createElement(Doe.Provider,{value:P},v.createElement(Sne.Provider,{value:E},v.createElement(R,{width:j??(g==null?void 0:g.width),height:D??(g==null?void 0:g.height),className:wa("recharts-wrapper",n),style:Mtt({position:"relative",cursor:"default",width:j,height:D},g),onClick:ge,onContextMenu:Se,onDoubleClick:k,onFocus:Z,onKeyDown:ve,onMouseDown:F,onMouseEnter:se,onMouseLeave:he,onMouseMove:me,onMouseUp:H,onTouchEnd:Y,onTouchMove:V,onTouchStart:Q,ref:J},v.createElement(Vtt,null),r)))}),Wtt=["width","height","responsive","children","className","style","compact","title","desc"];function Xtt(t,e){if(t==null)return{};var r,n,a=Ytt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ytt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Hle=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:l,compact:c,title:u,desc:d}=t,f=Xtt(t,Wtt),h=gf(f);return c?v.createElement(v.Fragment,null,v.createElement(q4,{width:r,height:n}),v.createElement(Aq,{otherAttributes:h,title:u,desc:d},s)):v.createElement(ztt,{className:i,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(Aq,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(eZe,null,s)))});function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}var Jtt={top:5,right:5,bottom:5,left:5},Ztt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Jtt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},ert=v.forwardRef(function(e,r){var n,a=Vo(e.categoricalChartProps,Ztt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Ule,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(xle,{chartData:u.data}),v.createElement(Qle,{layout:a.layout,margin:a.margin}),v.createElement(Vle,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Hle,oF({},a,{ref:r})))}),trt=["axis","item"],rrt=v.forwardRef((t,e)=>v.createElement(ert,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:trt,tooltipPayloadSearcher:Moe,categoricalChartProps:t,ref:e}));function nrt(t){var e=Ha();return v.useEffect(()=>{e(Ctt(t))},[e,t]),null}var art=["layout"];function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lF.apply(null,arguments)}function srt(t,e){if(t==null)return{};var r,n,a=irt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function irt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ort={top:5,right:5,bottom:5,left:5},$le={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ort,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},lrt=v.forwardRef(function(e,r){var n,a=Vo(e.categoricalChartProps,$le),{layout:s}=a,i=srt(a,art),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Ule,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(xle,{chartData:a.data}),v.createElement(Qle,{layout:s,margin:a.margin}),v.createElement(Vle,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(nrt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(Hle,lF({},i,{ref:r})))});function mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(r),!0).forEach(function(n){crt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function crt(t,e,r){return(e=urt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function urt(t){var e=drt(t,"string");return typeof e=="symbol"?e:e+""}function drt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var frt=["item"],Art=pq(pq({},$le),{},{layout:"centric",startAngle:0,endAngle:360}),hrt=v.forwardRef((t,e)=>{var r=Vo(t,Art);return v.createElement(lrt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:frt,tooltipPayloadSearcher:Moe,categoricalChartProps:r,ref:e})});const mrt="sellers_candies",HC="cash_deliveries_candies";function na(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function qs(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function $C(t,e){return t*e/100}function KC(t,e,r){return t-e-r}function gq(t){return t?wr(t.toDate(),"yyyy-MM-dd"):""}function GC(t){if(!t)return tr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return tr.fromDate(a)}function prt(){const t=new Date,[e,r]=v.useState(wr(kd(t),"yyyy-MM-dd")),[n,a]=v.useState(wr(Td(t),"yyyy-MM-dd")),[s,i]=v.useState([]),l=v.useMemo(()=>{const R=new Map;return s.forEach(z=>R.set(z.id,z)),R},[s]),[c,u]=v.useState([]),[d,f]=v.useState(!0),[h,A]=v.useState(()=>wr(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,B]=v.useState(""),[P,_]=v.useState(null),[E,I]=v.useState({}),O=v.useRef(null);v.useEffect(()=>{const R=Wt(At(je,mrt),ln("name","asc")),z=Ed(R,le=>{const K=le.docs.map(M=>{const pe=M.data();return{id:M.id,name:String((pe==null?void 0:pe.name)??""),branch:pe!=null&&pe.branch?String(pe.branch):"",commissionPercent:na((pe==null?void 0:pe.commissionPercent)??0)}});i(K)},()=>i([]));return()=>z()},[]),v.useEffect(()=>{f(!0);const R=GC(e),z=new Date(GC(n).toDate().getTime());z.setDate(z.getDate()+1);const le=tr.fromDate(z),K=Wt(At(je,HC),sr("date",">=",R),sr("date","<",le),ln("date","desc")),M=Ed(K,pe=>{const X=pe.docs.map(G=>{const ie=G.data();return{id:G.id,date:ie==null?void 0:ie.date,sellerId:String((ie==null?void 0:ie.sellerId)??""),sellerName:String((ie==null?void 0:ie.sellerName)??""),amountDelivered:na(ie==null?void 0:ie.amountDelivered),commissionPercent:na(ie==null?void 0:ie.commissionPercent),commissionPaid:na(ie==null?void 0:ie.commissionPaid),extraExpenses:na(ie==null?void 0:ie.extraExpenses),totalFinal:na(ie==null?void 0:ie.totalFinal),comment:String((ie==null?void 0:ie.comment)??""),createdAt:ie==null?void 0:ie.createdAt,updatedAt:ie==null?void 0:ie.updatedAt}});u(X),f(!1)},pe=>{console.error("Firestore deliveries query error:",pe),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>M()},[e,n]);const S=v.useMemo(()=>m?l.get(m):void 0,[m,l]),j=na((S==null?void 0:S.commissionPercent)??0),D=na(g),J=na(y),ge=$C(D,j),se=KC(D,ge,J),he=v.useMemo(()=>{var z;const R=new Map;for(const le of c){const K=le.sellerId||le.sellerName||"UNKNOWN",M=R.get(K)??{sellerId:le.sellerId,sellerName:le.sellerName||((z=l.get(le.sellerId))==null?void 0:z.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};M.delivered+=na(le.amountDelivered),M.commission+=na(le.commissionPaid),M.totalFinal+=na(le.totalFinal),R.set(K,M)}return Array.from(R.values()).sort((le,K)=>le.sellerName.localeCompare(K.sellerName))},[c,l]),me=v.useMemo(()=>{let R=0,z=0,le=0,K=0;for(const M of c)R+=na(M.amountDelivered),z+=na(M.commissionPaid),le+=na(M.extraExpenses),K+=na(M.totalFinal);return{delivered:R,commission:z,expenses:le,totalFinal:K}},[c]),Z=v.useMemo(()=>he.map(R=>({name:R.sellerName,Entregado:Number(R.delivered.toFixed(2)),Comision:Number(R.commission.toFixed(2))})),[he]),ve=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(me.delivered.toFixed(2))},{name:"Total Comisin",value:Number(me.commission.toFixed(2))},{name:"Total Gastos",value:Number(me.expenses.toFixed(2))}].filter(R=>R.value>0),[me]),Se=["#3B82F6","#F59E0B","#EF4444"];async function k(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const R=l.get(m),z=(R==null?void 0:R.name)??"Sin nombre",le=na((R==null?void 0:R.commissionPercent)??0),K=$C(D,le),M=KC(D,K,J);await Nn(At(je,HC),{date:GC(h),sellerId:m,sellerName:z,amountDelivered:D,commissionPercent:le,commissionPaid:K,extraExpenses:J,totalFinal:M,comment:w??"",createdAt:tr.now()}),x(""),b("0"),B("")}function F(R){_(R.id),I({...R,dateInput:gq(R.date)})}function H(){_(null),I({})}async function Q(R){const z=E,le=String(z.sellerId??""),K=l.get(le),M=String(z.sellerName??(K==null?void 0:K.name)??"Sin nombre"),pe=na(z.amountDelivered),X=na(z.extraExpenses),G=na(z.commissionPercent??(K==null?void 0:K.commissionPercent)??0),ie=$C(pe,G),Ie=KC(pe,ie,X),Re=GC(String(z.dateInput??gq(z.date)));await Jr($t(je,HC,R),{date:Re,sellerId:le,sellerName:M,amountDelivered:pe,commissionPercent:G,commissionPaid:ie,extraExpenses:X,totalFinal:Ie,comment:String(z.comment??""),updatedAt:tr.now()}),H()}async function V(R){confirm("Eliminar este registro?")&&await Qn($t(je,HC,R))}async function Y(){if(!O.current)return;const R=await q0(O.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),z=R.toDataURL("image/png"),le=new Br("p","mm","a4"),K=le.internal.pageSize.getWidth(),M=le.internal.pageSize.getHeight(),pe=K,X=R.height*pe/R.width;let G=X,ie=0;for(le.addImage(z,"PNG",0,ie,pe,X),G-=M;G>0;)le.addPage(),ie=-(X-G),le.addImage(z,"PNG",0,ie,pe,X),G-=M;le.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return o.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),o.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",o.jsx("span",{className:"font-bold",children:e})," "," ",o.jsx("span",{className:"font-bold",children:n})]})]}),o.jsx("button",{onClick:Y,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",value:e,onChange:R=>r(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",value:n,onChange:R=>a(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),o.jsxs("div",{ref:O,className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(me.totalFinal)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(me.commission)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(me.expenses)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(me.delivered)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),o.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),o.jsx("tbody",{children:he.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):he.map(R=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:R.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.delivered)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.commission)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(R.totalFinal)]})]},R.sellerId||R.sellerName))})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(w$,{children:o.jsxs(rrt,{data:Z,children:[o.jsx(Ile,{dataKey:"name",interval:0,angle:-12,height:70}),o.jsx(Ble,{}),o.jsx(yG,{}),o.jsx(Tk,{}),o.jsx(nF,{dataKey:"Entregado"}),o.jsx(nF,{dataKey:"Comision"})]})})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(w$,{children:o.jsxs(hrt,{children:[o.jsx(hle,{data:ve,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:ve.map((R,z)=>o.jsx(Bw,{fill:Se[z%Se.length]},z))}),o.jsx(yG,{}),o.jsx(Tk,{})]})})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:h,onChange:R=>A(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>o.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:R=>x(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),o.jsx("input",{value:`${j}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),o.jsx("input",{value:`$ ${qs(ge)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:R=>b(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),o.jsx("input",{value:`$ ${qs(se)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),o.jsxs("label",{className:"space-y-1 md:col-span-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{value:w,onChange:R=>B(R.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:k,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?o.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),o.jsx("tbody",{children:c.map(R=>{if(!(P===R.id))return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:wr(R.date.toDate(),"yyyy-MM-dd")}),o.jsx("td",{className:"p-2 font-semibold",children:R.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.amountDelivered)]}),o.jsxs("td",{className:"p-2 text-right",children:[qs(R.commissionPercent),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.commissionPaid)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.extraExpenses)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(R.totalFinal)]}),o.jsx("td",{className:"p-2",children:R.comment}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>F(R),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>V(R.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},R.id);const le=na(E.amountDelivered??R.amountDelivered),K=na(E.commissionPercent??R.commissionPercent),M=na(E.extraExpenses??R.extraExpenses),pe=$C(le,K),X=KC(le,pe,M);return o.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:G=>I(ie=>({...ie,dateInput:G.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("select",{value:String(E.sellerId??R.sellerId),onChange:G=>{const ie=G.target.value,Ie=l.get(ie);I(Re=>({...Re,sellerId:ie,sellerName:(Ie==null?void 0:Ie.name)??"",commissionPercent:na((Ie==null?void 0:Ie.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(G=>o.jsxs("option",{value:G.id,children:[G.name," ",G.branch?`(${G.branch})`:""]},G.id))]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(le),onChange:G=>I(ie=>({...ie,amountDelivered:na(G.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(K),onChange:G=>I(ie=>({...ie,commissionPercent:na(G.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",qs(pe)]}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(M),onChange:G=>I(ie=>({...ie,extraExpenses:na(G.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(X)]}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:String(E.comment??R.comment),onChange:G=>I(ie=>({...ie,comment:G.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(R.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},R.id)})})]})}),o.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(R=>o.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-black text-gray-900",children:R.sellerName}),o.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:wr(R.date.toDate(),"yyyy-MM-dd")})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),o.jsxs("div",{className:"font-extrabold",children:["$ ",qs(R.amountDelivered)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),o.jsxs("div",{className:"font-semibold",children:[qs(R.commissionPercent),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),o.jsxs("div",{className:"font-semibold",children:["$ ",qs(R.commissionPaid)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),o.jsxs("div",{className:"font-semibold",children:["$ ",qs(R.extraExpenses)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),o.jsxs("div",{className:"text-base font-black",children:["$ ",qs(R.totalFinal)]})]}),R.comment?o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),o.jsx("div",{className:"text-sm text-gray-800",children:R.comment})]}):null]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>F(R),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>V(R.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},R.id)),P?o.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[o.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:R=>I(z=>({...z,dateInput:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:String(E.sellerId??""),onChange:R=>{const z=R.target.value,le=l.get(z);I(K=>({...K,sellerId:z,sellerName:(le==null?void 0:le.name)??"",commissionPercent:na((le==null?void 0:le.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>o.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",value:String(E.amountDelivered??""),onChange:R=>I(z=>({...z,amountDelivered:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",value:String(E.extraExpenses??""),onChange:R=>I(z=>({...z,extraExpenses:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),o.jsx("input",{type:"number",value:String(E.commissionPercent??""),onChange:R=>I(z=>({...z,commissionPercent:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{type:"text",value:String(E.comment??""),onChange:R=>I(z=>({...z,comment:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(P),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const mm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function grt(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function xq(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function xrt(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function vrt({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new G2,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function yrt(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState("ANY"),[y,b]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const et=await Dt(Wt(At(je,"candy_main_orders"))),ce=new Map;et.forEach(xe=>{var Je,nt,ke;const fe=xe.data(),oe=xrt(fe.date),Be=((nt=(Je=fe==null?void 0:fe.createdAt)==null?void 0:Je.toMillis)==null?void 0:nt.call(Je))||((ke=fe==null?void 0:fe.createdAt)!=null&&ke.seconds?fe.createdAt.seconds*1e3:0)||0,Me=Math.max(oe,Be),Ze=Array.isArray(fe.items)?fe.items:[];for(const ae of Ze){const De=String((ae==null?void 0:ae.id)||(ae==null?void 0:ae.productId)||"").trim();if(!De)continue;const We=String((ae==null?void 0:ae.name)||(ae==null?void 0:ae.productName)||"").trim(),pt=String((ae==null?void 0:ae.category)||"").trim(),ct=Number((ae==null?void 0:ae.unitPriceIsla)||0),Xe=Number((ae==null?void 0:ae.unitPriceRivas)||0),Rt=Number((ae==null?void 0:ae.unitsPerPackage)||(ae==null?void 0:ae.unitsPerPack)||1),er=ce.get(De);(!er||Me>=er._sortKey)&&ce.set(De,{productId:De,category:pt,productName:We,priceIsla:ct,priceRivas:Xe,unitsPerPackage:Rt,_sortKey:Me})}});const Qe=Array.from(ce.values()).sort((xe,fe)=>xe.productName.localeCompare(fe.productName,"es"));l(Qe)}catch(et){console.error(et),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),v.useEffect(()=>{const et=At(je,"products_candies"),ce=Wt(et),Qe=Ed(ce,xe=>{const fe={},oe={},Be={},Me={};xe.forEach(Ze=>{const Je=Ze.data();fe[Ze.id]=Number((Je==null?void 0:Je.providerPrice)||(Je==null?void 0:Je.providerPricePerUnit)||0),Be[Ze.id]=Number((Je==null?void 0:Je.unitsPerPackage)||(Je==null?void 0:Je.unitsPerPack)||1)||1;const nt=String((Je==null?void 0:Je.barcode)||"").trim();nt&&(oe[Ze.id]=nt);const ke=String((Je==null?void 0:Je.packaging)||(Je==null?void 0:Je.empaque)||"").trim();ke&&(Me[Ze.id]=ke)});try{const Ze=P.current||{};let Je=!1;for(const De of Object.keys(oe))if((oe[De]||"")!==(Ze[De]||"")){Je=!0;break}const nt=E.current||{};let ke=!1;for(const De of Object.keys(Be))if((Be[De]||0)!==(nt[De]||0)){ke=!0;break}j(fe),J(Be);const ae={...oe,...Ze};B(ae),P.current=ae,E.current={...Be},me(Me),l(De=>De.map(We=>({...We,unitsPerPackage:Be[We.productId]??We.unitsPerPackage}))),!_.current&&Je&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!_.current&&ke&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),_.current=!1}catch{j(fe),J(Be),B(Je=>({...oe,...Je})),E.current={...Be},me(Me),l(Je=>Je.map(nt=>({...nt,unitsPerPackage:Be[nt.productId]??nt.unitsPerPackage})))}},xe=>console.error(xe));return()=>Qe()},[]);const[w,B]=v.useState({}),P=v.useRef({}),_=v.useRef(!0),E=v.useRef({}),I=v.useRef({}),O=v.useRef(!0),[S,j]=v.useState({}),[D,J]=v.useState({}),[ge,se]=v.useState({}),[he,me]=v.useState({}),[Z,ve]=v.useState("");v.useEffect(()=>{const et=At(je,"inventory_candies"),ce=Wt(et),Qe=Ed(ce,xe=>{try{const fe={};xe.forEach(Be=>{var ae,De,We;const Me=Be.data(),Ze=String(Me.productId||"").trim();if(!Ze)return;const Je=Number(Me.unitsPerPackage||Me.unitsPerPack||0)||0,nt=((De=(ae=Me==null?void 0:Me.createdAt)==null?void 0:ae.toMillis)==null?void 0:De.call(ae))||((We=Me==null?void 0:Me.createdAt)!=null&&We.seconds?Me.createdAt.seconds*1e3:0)||0,ke=fe[Ze];(!ke||nt>=ke.ts)&&(fe[Ze]={val:Je||0,ts:nt})});const oe={};for(const Be of Object.keys(fe))oe[Be]=fe[Be].val||0;se(oe);try{const Be=I.current||{};let Me=!1;for(const Ze of Object.keys(oe))if((oe[Ze]||0)!==(Be[Ze]||0)){Me=!0;break}I.current={...oe},!O.current&&Me&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),O.current=!1}catch{}l(Be=>Be.map(Me=>({...Me,unitsPerPackage:oe[Me.productId]??D[Me.productId]??Me.unitsPerPackage})))}catch(fe){console.error("inventory_candies snapshot error:",fe)}},xe=>console.error(xe));return()=>Qe()},[D]),v.useEffect(()=>{l(et=>et.map(ce=>({...ce,unitsPerPackage:ge[ce.productId]??D[ce.productId]??ce.unitsPerPackage})))},[D,ge]);const Se=v.useMemo(()=>{const et=grt(c),ce=String(d||"").trim(),Qe=String(Z||"").trim().toLowerCase(),xe=h.trim()===""?null:xq(h,NaN),fe=m.trim()===""?null:xq(m,NaN);return i.filter(oe=>{const Be=String(he[oe.productId]||"").trim().toLowerCase();if(Qe)return Be===Qe;if(et&&!`${oe.category} ${oe.productName}`.toLowerCase().includes(et))return!1;if(ce){const nt=String(oe.productId||""),ke=String(w[oe.productId]||"");if(!nt.includes(ce)&&!ke.includes(ce))return!1}const Me=g==="ISLA"?[oe.priceIsla]:g==="RIVAS"?[oe.priceRivas]:[oe.priceIsla,oe.priceRivas],Ze=xe==null||!Number.isFinite(xe)?!0:Me.some(nt=>nt>=xe),Je=fe==null||!Number.isFinite(fe)?!0:Me.some(nt=>nt<=fe);return Ze&&Je})},[i,c,h,m,g,w,Z,he]),k=()=>{u(""),A(""),p(""),x("ANY"),ve("")},[F,H]=v.useState(!1),[Q,V]=v.useState("search"),[Y,R]=v.useState(null),[z,le]=v.useState(0),[K,M]=v.useState(0),[pe,X]=v.useState(null),[G,ie]=v.useState(""),[Ie,Re]=v.useState(""),ze=v.useMemo(()=>c.trim()!==""||h.trim()!==""||m.trim()!==""||g!=="ANY"||Z.trim()!=="",[c,h,m,g,Z]),[st,lt]=v.useState(!1);v.useEffect(()=>{var Qe;const et=window.matchMedia("(max-width: 900px)"),ce=()=>lt(et.matches);return ce(),(Qe=et.addEventListener)==null||Qe.call(et,"change",ce),()=>{var xe;return(xe=et.removeEventListener)==null?void 0:xe.call(et,"change",ce)}},[]);const[_t,bt]=v.useState(!1);v.useEffect(()=>{const et=wO(B0,async ce=>{if(!ce)return bt(!1);try{const Qe=await Li($t(je,"users",ce.uid)),xe=Qe.exists()?String(Qe.data().role||""):"";bt(xe==="admin")}catch(Qe){console.error(Qe),bt(!1)}});return()=>et()},[]);const St=async et=>{var ce;if(Q==="search"){f(et);const Qe=Object.keys(w).find(oe=>(w[oe]||"")===et),xe=(ce=i.find(oe=>String(oe.productId||"").includes(et)))==null?void 0:ce.productId,fe=Qe||xe||null;fe&&(X(fe),b(!1)),H(!1);return}if(Q==="edit"&&Y)try{const Qe=At(je,"products_candies"),xe=$t(Qe,Y);await Jr(xe,{barcode:et}),B(fe=>({...fe,[Y]:et})),ie(et),H(!1),V("search"),s(" Producto guardado.")}catch(Qe){console.error(Qe),s(" Error guardando el cdigo.")}},kt=async et=>{l(ce=>ce.map(Qe=>Qe.productId===et?{...Qe,priceIsla:Number(z||0),priceRivas:Number(K||0)}:Qe));try{const ce=String(Ie||"").trim();await Jr($t(At(je,"products_candies"),et),{packaging:ce||""}),me(Qe=>({...Qe,[et]:ce||""}))}catch(ce){console.error("Error updating packaging:",ce),s(" Error guardando empaque.")}R(null),s(st?" Producto guardado.":"")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),o.jsx("div",{className:"flex gap-2",children:o.jsx(Xc,{onClick:e,loading:r})})]}),o.jsxs("div",{className:"md:hidden mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>b(et=>!et),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${ze?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold",children:"Filtros"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[ze?"Activos":"Ninguno","  ","Mostrando ",o.jsx("b",{children:Se.length})]})]}),o.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&o.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:et=>u(et.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Z,onChange:et=>ve(et.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:et=>f(et.target.value),placeholder:"Cdigo EAN"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{V("search"),H(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{k(),f("")},children:"Limpiar filtros"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),o.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:et=>u(et.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Z,onChange:et=>ve(et.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:et=>A(et.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:et=>p(et.target.value),placeholder:"0"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:k,children:"Limpiar"})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",o.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",o.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",o.jsx("b",{children:Se.length})]})]})]}),o.jsxs("div",{className:"md:hidden",children:[r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Se.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):o.jsx("div",{className:"space-y-2",children:Se.map(et=>{const ce=pe===et.productId,Qe=Y===et.productId,xe=S[et.productId]||0,fe=et.priceIsla-xe,oe=fe*.25;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>X(Be=>Be===et.productId?null:et.productId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[13px] font-semibold truncate",children:et.productName}),o.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:et.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:mm(et.priceIsla)})]})]}),ce&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),o.jsx("div",{className:"text-sm",children:et.category}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),o.jsx("div",{className:"text-sm",children:String(et.unitsPerPackage||1)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),o.jsx("div",{className:"text-sm tabular-nums",children:mm(et.priceIsla/(et.unitsPerPackage||1))})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Qe?o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(z),onChange:Be=>le(Number(Be.target.value||0))}):o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:mm(et.priceIsla)})]})]}),o.jsxs("div",{children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-sm tabular-nums",children:mm(fe)})]}),o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),o.jsx("div",{className:"text-sm tabular-nums",children:mm(oe)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Qe?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:G,readOnly:!0}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{V("edit"),H(!0)},type:"button",children:"Escanear"})]}):o.jsx("div",{children:w[et.productId]||""})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Qe?o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Ie,onChange:Be=>Re(Be.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"text-sm",children:he[et.productId]||""})]})]})]}),o.jsx("div",{className:"flex gap-2",children:Qe?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{kt(et.productId),X(null)},type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{V("edit"),H(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>R(null),type:"button",children:"Cancelar"})]}):_t&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{R(et.productId),le(et.priceIsla||0),M(et.priceRivas||0),ie(w[et.productId]||""),Re(he[et.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(Be=>Be.filter(Me=>Me.productId!==et.productId)),type:"button",children:"Borrar"})]})})]})})]},et.productId)})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]}),o.jsx(vrt,{open:F,onClose:()=>H(!1),onDetected:St}),o.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):Se.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):Se.map(et=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:et.category}),o.jsx("td",{className:"p-2 border",children:et.productName}),o.jsx("td",{className:"p-2 border",children:Y===et.productId?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ie,onChange:ce=>Re(ce.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):he[et.productId]||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y===et.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(z),onChange:ce=>le(Number(ce.target.value||0))}):mm(et.priceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y===et.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(K),onChange:ce=>M(Number(ce.target.value||0))}):mm(et.priceRivas)}),o.jsx("td",{className:"p-2 border text-right",children:Y===et.productId?o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>kt(et.productId),type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>R(null),type:"button",children:"Cancelar"})]}):_t&&o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{R(et.productId),le(et.priceIsla||0),M(et.priceRivas||0),ie(w[et.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{R(et.productId),V("edit"),H(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(ce=>ce.filter(Qe=>Qe.productId!==et.productId)),type:"button",children:"Borrar"})]})})]},et.productId))})]})}),a&&o.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const qC=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],vq=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],jP=["Hombre","Mujer","Variado","NA"],brt=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],tl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _i(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Bl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function D_(t,e=1){const r=Math.floor(Bl(t,e));return r>0?r:e}function Kle(t){return!Number.isFinite(t)||t<=0?0:t}function TP(t){const e=String(t??"").trim();return e||""}function ad(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(_i(a),a));for(const a of e){const s=n.get(_i(a));if(s!=null)return t[s]}}function wrt(t){return Object.values(t||{}).every(r=>_i(r)==="")}function Qg(t){const e=Math.max(0,Bl(t.providerPrice,0)),r=Math.max(1,D_(t.quantity,1)),n=Kle(Bl(t.margin,0)),a=Math.max(0,Bl(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,l=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:l,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function Nrt(){const{refreshKey:t,refresh:e}=Ac(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,B]=v.useState(null),[P,_]=v.useState(!1),[E,I]=v.useState(null),[O,S]=v.useState(qC[0]),[j,D]=v.useState(vq[0]),[J,ge]=v.useState(""),[se,he]=v.useState(0),[me,Z]=v.useState(1),[ve,Se]=v.useState(.7),[k,F]=v.useState(0),[H,Q]=v.useState("NA"),[V,Y]=v.useState(""),[R,z]=v.useState(""),[le,K]=v.useState(!1),[M,pe]=v.useState(""),[X,G]=v.useState([]),[ie,Ie]=v.useState([]),[Re,ze]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const ae=await Dt(Wt(At(je,"products_stationery"))),De=[];ae.forEach(We=>{const pt=We.data();De.push({id:We.id,category:pt.category||"",brand:pt.brand||"",name:pt.name||"",providerPrice:Number(pt.providerPrice||0),quantity:Number(pt.quantity||1),facturado:Number(pt.facturado||0),margin:Number(pt.margin||0),salePrice:Number(pt.salePrice||0),gain:Number(pt.gain||0),gender:pt.gender||"NA",typeProduct:pt.typeProduct||"",code:pt.code??"",createdAt:pt.createdAt,updatedAt:pt.updatedAt,totalEsperado:Number(pt.totalEsperado||Number(pt.salePrice||0)*Number(pt.quantity||1))})}),l(De)}catch(ae){console.error(ae),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const st=v.useMemo(()=>{const ae=_i(d),De=_i(h),We=m.trim()===""?null:Bl(m,NaN),pt=g.trim()===""?null:Bl(g,NaN);return i.filter(ct=>!(ae&&!`${ct.category} ${ct.name}`.toLowerCase().includes(ae)||De&&!String(ct.code||"").toLowerCase().includes(De)||We!=null&&Number.isFinite(We)&&ct.salePrice<We||pt!=null&&Number.isFinite(pt)&&ct.salePrice>pt))},[i,d,h,m,g]),lt=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),_t=v.useMemo(()=>{const ae=i.length,De=i.reduce((ct,Xe)=>ct+(Xe.facturado||0),0),We=i.reduce((ct,Xe)=>ct+Number(Xe.totalEsperado||Number(Xe.salePrice||0)*Number(Xe.quantity||1)),0),pt=i.reduce((ct,Xe)=>ct+(Xe.gain||0),0);return{count:ae,sumFact:De,sumEsperado:We,sumGain:pt}},[i]),bt=()=>{S(qC[0]),ge(""),he(0),Z(1),Se(.7),F(0),Q("NA"),Y(""),z(""),B(null)},St=()=>{bt(),b(!0)},kt=ae=>{B(ae),S(ae.category||qC[0]),D(ae.brand||vq[0]),ge(ae.name||""),he(Number(ae.providerPrice||0)),Z(Number(ae.quantity||1)),Se(Number(ae.margin||.7)),F(Number(ae.salePrice||0)),Q(ae.gender||"NA"),Y(ae.typeProduct||""),z(String(ae.code||"")),b(!0)},et=async()=>{s("");const ae=String(O||"").trim(),De=String(j||"").trim(),We=String(J||"").trim(),{providerPrice:pt,quantity:ct,margin:Xe,salePrice:Rt,facturado:er,totalEsperado:L,gain:we}=Qg({providerPrice:se,quantity:me,margin:ve,salePrice:k});if(!ae)return s(" Categora requerida.");if(!We)return s(" Producto requerido.");if(pt<=0)return s(" Precio proveedor debe ser > 0.");if(ct<=0)return s(" Cantidad debe ser > 0.");if(Rt<=0)return s(" Precio venta invlido.");if(Xe<=0)return s(" Margen invlido.");const Ue={category:ae,brand:De,name:We,providerPrice:pt,quantity:ct,facturado:er,margin:Xe,salePrice:Rt,gain:we,gender:H||"NA",typeProduct:String(V||"").trim(),code:TP(R)||null,updatedAt:tr.now(),totalEsperado:L};try{n(!0),w?(await Jr($t(je,"products_stationery",w.id),Ue),s(" Producto actualizado.")):(await Nn(At(je,"products_stationery"),{...Ue,createdAt:tr.now()}),s(" Producto creado.")),b(!1),B(null),bt(),e()}catch(te){console.error(te),s(" Error guardando producto.")}finally{n(!1)}},ce=async()=>{var ae;try{const De=new G2,We=await G2.listVideoInputDevices(),pt=(ae=We[We.length-1])==null?void 0:ae.deviceId;if(!pt)return null;const ct=document.createElement("div");ct.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Xe=document.createElement("div");Xe.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const Rt=document.createElement("div");Rt.className="p-3 flex items-center justify-between border-b",Rt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const er=document.createElement("button");er.textContent="Cerrar",er.className="px-3 py-1 rounded bg-gray-200";const L=document.createElement("div");L.className="p-3";const we=document.createElement("video");return we.style.width="100%",we.style.borderRadius="12px",L.appendChild(we),Rt.appendChild(er),Xe.appendChild(Rt),Xe.appendChild(L),ct.appendChild(Xe),document.body.appendChild(ct),await new Promise(async Ue=>{const te=()=>{ct.remove(),Ue(null)};er.onclick=te;const Ce=await De.decodeFromVideoDevice(pt,we,$e=>{if($e){const He=$e.getText();try{Ce.stop()}catch{}ct.remove(),Ue(He)}})})}catch(De){return console.error(De),null}},Qe=async()=>{const ae=await ce();ae&&z(ae)},xe=async()=>{const ae=await ce();if(!ae)return;const De=i.find(We=>String(We.code||"")===String(ae));De?(I(De),_(!0),s("")):(I(null),_(!0),s(""))},fe=(ae,De)=>{const We=ae.map(Xe=>({Id:Xe.id,Categoria:Xe.category,brand:Xe.brand,Producto:Xe.name,PrecioProveedor:Xe.providerPrice,Cantidad:Xe.quantity,Facturado:Xe.facturado,TotalEsperado:Xe.totalEsperado||Xe.salePrice*Xe.quantity,Margen:Xe.margin,PrecioVenta:Xe.salePrice,Ganancia:Xe.gain,Genero:Xe.gender,TipoProducto:Xe.typeProduct,Codigo:Xe.code||""})),pt=kl.json_to_sheet(We),ct=kl.book_new();kl.book_append_sheet(ct,pt,"Productos"),vne(ct,De)},oe=()=>{const ae=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],De=kl.json_to_sheet(ae),We=kl.book_new();kl.book_append_sheet(We,De,"Productos");const pt=w4(We,{type:"array",bookType:"xlsx"}),ct=new Blob([pt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Xe=URL.createObjectURL(ct),Rt=document.createElement("a");Rt.href=Xe,Rt.download="template_products_stationery.xlsx",document.body.appendChild(Rt),Rt.click(),Rt.remove(),URL.revokeObjectURL(Xe)},Be=ae=>{const De=[],We=[];ae.forEach((ct,Xe)=>{if(!ct||typeof ct!="object"||wrt(ct))return;const Rt=Xe+2,er=String(ad(ct,["Id","ID","docId","DocId"])??"").trim(),L=String(ad(ct,["Categoria","Categora","Category","category"])??"").trim(),we=String(ad(ct,["Brand","Marca","brand","marca"])??"").trim(),Ue=String(ad(ct,["Producto","Product","Nombre","Name","name"])??"").trim(),te=ad(ct,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),Ce=ad(ct,["Cantidad","Qty","quantity","cantidad"]),$e=ad(ct,["Margen","Margin","margen","margin"]),He=ad(ct,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Ye=String(ad(ct,["Genero","Gnero","Gender","gender"])??"NA").trim(),mt=String(ad(ct,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),rt=ad(ct,["Codigo","Cdigo","Code","Barcode","code"]),re=TP(rt),ne=Math.max(0,Bl(te,0)),Ae=Math.max(1,D_(Ce,1)),ue=Kle(Bl($e,0)),Ne=Math.max(0,Bl(He,0));L||We.push(`Fila ${Rt}: falta Categoria.`),Ue||We.push(`Fila ${Rt}: falta Producto.`),ne<=0&&We.push(`Fila ${Rt}: PrecioProveedor debe ser > 0.`),Ae<=0&&We.push(`Fila ${Rt}: Cantidad debe ser > 0.`),ue<=0&&Ne<=0&&We.push(`Fila ${Rt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const tt=jP.includes(Ye||"NA")?Ye:"NA";L&&Ue&&ne>0&&Ae>0&&(ue>0||Ne>0)&&De.push({id:er||void 0,category:L,brand:we,name:Ue,providerPrice:ne,quantity:Ae,margin:ue>0?ue:.7,salePrice:Ne>0?Ne:void 0,gender:tt,typeProduct:mt,code:re||"",_raw:ct})});const pt=new Map;for(const ct of De){const Xe=ct.id?`id::${ct.id}`:`${_i(ct.category)}::${_i(ct.name)}`;pt.set(Xe,ct)}return{rows:Array.from(pt.values()),errors:We}},Me=async ae=>{if(s(""),Ie([]),G([]),pe((ae==null?void 0:ae.name)||""),!ae)return;const De=ae.name.toLowerCase(),We=De.endsWith(".xlsx")||De.endsWith(".xls"),pt=De.endsWith(".csv");if(!We&&!pt){Ie(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{ze(!0);const ct=new FileReader,Xe=await new Promise((Ce,$e)=>{ct.onerror=()=>$e(new Error("No se pudo leer el archivo.")),ct.onload=()=>Ce(ct.result),ct.readAsArrayBuffer(ae)}),Rt=ib(new Uint8Array(Xe),{type:"array"}),er=Rt.SheetNames[0],L=Rt.Sheets[er],we=kl.sheet_to_json(L,{defval:""}),{rows:Ue,errors:te}=Be(we);G(Ue),Ie(te),Ue.length===0&&te.length===0&&Ie(["No se encontraron filas vlidas para importar."])}catch(ct){console.error(ct),Ie(["Error leyendo el archivo. Revis que no est corrupto."])}finally{ze(!1)}},Ze=(ae,De)=>{G(We=>{const pt=[...We],ct=pt[ae];return ct?(pt[ae]={...ct,...De},pt):We})},Je=v.useMemo(()=>{const ae=new Set(i.map(ct=>ct.id)),De=new Set(i.map(ct=>`${_i(ct.category)}::${_i(ct.name)}`));let We=0,pt=0;for(const ct of X){if(ct.id&&ae.has(ct.id)){We+=1;continue}const Xe=`${_i(ct.category)}::${_i(ct.name)}`;De.has(Xe)?We+=1:pt+=1}return{total:X.length,willCreate:pt,willUpdate:We}},[X,i]),nt=async()=>{if(s(""),ie.length>0){s(" Correg los errores antes de importar.");return}if(X.length===0){s(" No hay filas para importar.");return}try{ze(!0);const ae={},De={};i.forEach(Xe=>{ae[Xe.id]=Xe,De[`${_i(Xe.category)}::${_i(Xe.name)}`]=Xe});const We=G0(je);let pt=0,ct=0;for(const Xe of X){const Rt=String(Xe.category||"").trim(),er=String(Xe.name||"").trim(),{providerPrice:L,quantity:we,margin:Ue,salePrice:te,facturado:Ce,totalEsperado:$e,gain:He}=Qg({providerPrice:Xe.providerPrice,quantity:Xe.quantity,margin:Xe.margin,salePrice:Xe.salePrice});if(!Rt||!er||L<=0||we<=0||te<=0||Ue<=0)continue;const Ye={category:Rt,name:er,providerPrice:L,quantity:we,facturado:Ce,totalEsperado:$e,margin:Ue,salePrice:te,gain:He,gender:Xe.gender||"NA",typeProduct:String(Xe.typeProduct||"").trim(),code:TP(Xe.code)||null,updatedAt:tr.now()};let mt;if(Xe.id&&ae[Xe.id])mt=ae[Xe.id];else{const rt=`${_i(Rt)}::${_i(er)}`;mt=De[rt]}if(mt)We.update($t(je,"products_stationery",mt.id),Ye),ct+=1;else{const rt=$t(At(je,"products_stationery"));We.set(rt,{...Ye,createdAt:tr.now()}),pt+=1}}await We.commit(),s(` Importacin lista. Creados: ${pt}, Actualizados: ${ct}`),K(!1),G([]),Ie([]),pe(""),e()}catch(ae){console.error(ae),s(" Error importando productos a Firestore.")}finally{ze(!1)}},ke=()=>{f(""),A(""),p(""),x("")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:xe,type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:St,type:"button",children:"+ Nuevo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{K(!0),G([]),Ie([]),pe("")},type:"button",children:"Importar (.xlsx)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>fe(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>fe(st,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),o.jsx(Xc,{onClick:e,loading:r||Re})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[o.jsx(zC,{label:"Productos",value:_t.count}),o.jsx(zC,{label:"Facturado",value:tl(_t.sumFact)}),o.jsx(zC,{label:"Esperado",value:tl(_t.sumEsperado)}),o.jsx(zC,{label:"Ganancia",value:tl(_t.sumGain)})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${lt?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(ae=>!ae),children:[c?"Cerrar filtros":"Abrir filtros"," ",lt?"(activos)":""]}),c&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:ae=>f(ae.target.value),placeholder:"Ej: Cuaderno Norma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:ae=>A(ae.target.value),placeholder:"Barcode"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:ae=>p(ae.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:ae=>x(ae.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:ke,children:"Limpiar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("div",{children:["Mostrando: ",o.jsx("b",{children:st.length})]}),o.jsxs("div",{children:["Coleccin: ",o.jsx("b",{children:"products_stationery"})]})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):st.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):st.map(ae=>o.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:ae.category}),o.jsx("div",{className:"text-base font-bold leading-tight",children:ae.name}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(ae.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",o.jsx("b",{children:tl(ae.totalEsperado||ae.salePrice*ae.quantity)})]}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(ae.gain)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",o.jsx("b",{children:ae.code||""})]}),o.jsx("div",{className:"mt-2 flex gap-2",children:o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>kt(ae),children:"Editar"})})]},ae.id))}),o.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),o.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"Venta"}),o.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):st.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):st.map(ae=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:ae.category}),o.jsx("td",{className:"p-2 border",children:ae.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(ae.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:ae.quantity}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(ae.facturado)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(ae.totalEsperado||ae.salePrice*ae.quantity)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(ae.margin||0).toFixed(2)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(ae.salePrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(ae.gain)}),o.jsx("td",{className:"p-2 border",children:ae.gender}),o.jsx("td",{className:"p-2 border",children:ae.typeProduct}),o.jsx("td",{className:"p-2 border",children:ae.code||""}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>kt(ae),children:"Editar"})})]},ae.id))})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),y&&o.jsxs(yq,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:O,onChange:ae=>S(ae.target.value),children:qC.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:J,onChange:ae=>ge(ae.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(se)?"":se,onChange:ae=>he(Math.max(0,Bl(ae.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cantidad"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:me,onChange:ae=>Z(D_(ae.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:tl(Qg({providerPrice:se,quantity:me,margin:ve,salePrice:k}).facturado)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Margen"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(ve)?"":ve,onChange:ae=>Se(Math.max(0,Bl(ae.target.value,0)))}),o.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Qg({providerPrice:se,quantity:me,margin:ve,salePrice:k}).salePrice)?"":Qg({providerPrice:se,quantity:me,margin:ve,salePrice:k}).salePrice,onChange:ae=>{F(Math.max(0,Bl(ae.target.value,0)))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:tl(Qg({providerPrice:se,quantity:me,margin:ve,salePrice:k}).gain)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:H,onChange:ae=>Q(ae.target.value),children:jP.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:V,onChange:ae=>Y(ae.target.value),children:[o.jsx("option",{value:"",children:""}),brt.map(ae=>o.jsx("option",{value:ae,children:ae},ae))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:R,onChange:ae=>z(ae.target.value),placeholder:"Escane o peg el cdigo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Qe,children:"Escanear"})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),B(null)},children:"Cancelar"}),o.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:et,disabled:r,children:"Guardar"})]})]}),P&&o.jsx(yq,{onClose:()=>_(!1),title:"Resultado de escaneo",children:E?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:E.category}),o.jsx("div",{className:"text-lg font-bold",children:E.name}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(E.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(E.gain)})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),o.jsx("div",{className:"font-semibold tabular-nums",children:tl(E.providerPrice)})]}),o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.quantity})]}),o.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.code||""})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),kt(E)},children:"Editar"})})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:"No encontrado"}),o.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",o.jsx("b",{children:"products_stationery"}),"."]})]})}),le&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:oe,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ae=>{var De;return Me(((De=ae.target.files)==null?void 0:De[0])||null)}}),M&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:M})]}),Re&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),ie.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:ie.slice(0,60).map((ae,De)=>o.jsx("li",{children:ae},De))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Je.total," filas (Crear:"," ",Je.willCreate," / Actualizar:"," ",Je.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:nt,disabled:Re||X.length===0||ie.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:X.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):X.slice(0,300).map((ae,De)=>{const We=ae.id?i.some(Xe=>Xe.id===ae.id):!1,pt=i.some(Xe=>`${_i(Xe.category)}::${_i(Xe.name)}`==`${_i(ae.category)}::${_i(ae.name)}`),ct=We||pt;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.id||"",onChange:Xe=>Ze(De,{id:Xe.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:ae.category,onChange:Xe=>Ze(De,{category:Xe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ae.name,onChange:Xe=>Ze(De,{name:Xe.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ae.providerPrice,onChange:Xe=>Ze(De,{providerPrice:Math.max(0,Bl(Xe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ae.quantity,onChange:Xe=>Ze(De,{quantity:D_(Xe.target.value,1)})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:ae.margin,onChange:Xe=>Ze(De,{margin:Math.max(0,Bl(Xe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ae.salePrice??"",onChange:Xe=>Ze(De,{salePrice:Math.max(0,Bl(Xe.target.value,0))||void 0}),placeholder:"Opcional"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("select",{className:"w-28 border rounded px-2 py-1",value:ae.gender,onChange:Xe=>Ze(De,{gender:Xe.target.value}),children:jP.map(Xe=>o.jsx("option",{value:Xe,children:Xe},Xe))})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.typeProduct,onChange:Xe=>Ze(De,{typeProduct:Xe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ae.code||"",onChange:Xe=>Ze(De,{code:Xe.target.value})})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${ct?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:ct?"ACTUALIZA":"CREA"})})]},`${ae.id||""}-${De}`)})})]}),X.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",X.length," filas (importa todas)."]})]})]})]})})]})}function zC({label:t,value:e}){return o.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function yq({title:t,children:e,onClose:r}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:t}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}function Crt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function _rt(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!0),c=Crt(),u=v.useMemo(()=>c?o.jsx(Ove,{role:r}):o.jsx(Fve,{role:r}),[c,r]),d=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const h=wO(B0,async A=>{l(!0);try{const m="POSYS_LOGIN_AT";if(A){const g=localStorage.getItem(m),x=g?Number(g):NaN;if(!Number.isFinite(x))localStorage.setItem(m,String(Date.now()));else if(Date.now()-x>1296e6){await wI(B0),localStorage.removeItem(m),localStorage.removeItem("role"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),e(null),n(""),s(""),l(!1);return}}}catch{}if(A){e(A);try{const m=$t(je,"users",A.uid),p=await Li(m);if(p.exists()){const g=p.data(),x=g.role||"",y=g.sellerCandyId||"";n(x||""),s(y||"")}else n(""),s("")}catch{n(""),s("")}}else e(null),n(""),s("");l(!1)});return()=>h()},[]),i)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const f=()=>r==="admin"?o.jsx(xm,{to:"financialDashboard",replace:!0}):r==="vendedor_pollo"?o.jsx(xm,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?o.jsx(xm,{to:"salesClothes",replace:!0}):r==="vendedor_dulces"?o.jsx(xm,{to:"salesCandies",replace:!0}):o.jsx(xm,{to:"/",replace:!0});return o.jsx(xAe,{children:o.jsxs(Wfe,{children:[o.jsx(cn,{path:"/",element:o.jsx(kve,{})}),o.jsxs(cn,{path:"/admin",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"],children:u}),children:[o.jsx(cn,{index:!0,element:o.jsx(f,{})}),o.jsx(cn,{path:"bills",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(lSe,{})})}),o.jsx(cn,{path:"salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(IQ,{user:t})})}),o.jsx(cn,{path:"financialDashboard",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(kSe,{})})}),o.jsx(cn,{path:"expenses",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(OSe,{})})}),o.jsx(cn,{path:"billing",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(USe,{})})}),o.jsx(cn,{path:"batches",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(PSe,{role:r})})}),o.jsx(cn,{path:"paidBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx($Se,{})})}),o.jsx(cn,{path:"fix",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(MSe,{})})}),o.jsx(cn,{path:"transactionclose",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(jSe,{})})}),o.jsx(cn,{path:"billhistoric",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(cSe,{})})}),o.jsx(cn,{path:"users",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(uSe,{})})}),o.jsx(cn,{path:"products",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(fSe,{})})}),o.jsx(cn,{path:"datacenter",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(AUe,{})})}),o.jsx(cn,{path:"productsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(pLe,{})})}),o.jsx(cn,{path:"mainordersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(YLe,{})})}),o.jsx(cn,{path:"productsPricesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(yrt,{})})}),o.jsx(cn,{path:"inventoryMainOrderCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(JLe,{})})}),o.jsx(cn,{path:"inventoryCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(CLe,{})})}),o.jsx(cn,{path:"billingsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(oUe,{})})}),o.jsx(cn,{path:"cashDeliveries",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(prt,{})})}),o.jsx(cn,{path:"customersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(_Le,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"salesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(jLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"expensesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(TLe,{})})}),o.jsx(cn,{path:"dashboardCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(QLe,{})})}),o.jsx(cn,{path:"transactionCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(DLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"vendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(VLe,{})})}),o.jsx(cn,{path:"productsVendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(zLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"cierreVentasCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(eUe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"reporteCierresCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(cUe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"consolidatedVendors",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(sUe,{})})}),o.jsx(cn,{path:"salesClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(uIe,{})})}),o.jsx(cn,{path:"notebooksInventory",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(Nrt,{})})}),o.jsx(cn,{path:"TransactionsReportClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(yIe,{})})}),o.jsx(cn,{path:"financialDashboardClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(AIe,{})})}),o.jsx(cn,{path:"ExpensesClothes",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(hIe,{})})}),o.jsx(cn,{path:"inventoryClothesBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(zSe,{})})}),o.jsx(cn,{path:"productsClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(sIe,{})})}),o.jsx(cn,{path:"CustomersClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(oIe,{})})})]}),o.jsx(cn,{path:"/salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(IQ,{user:t})})}),o.jsx(cn,{path:"*",element:o.jsx(xm,{to:"/"})})]})})}kP.createRoot(document.getElementById("root")).render(o.jsx(so.StrictMode,{children:o.jsx(_rt,{})}));export{xa as _,Srt as c,OA as g};
