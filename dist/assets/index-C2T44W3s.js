var vde=Object.defineProperty;var yde=(t,e,r)=>e in t?vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ar=(t,e,r)=>yde(t,typeof e!="symbol"?e+"":e,r);function bde(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Yst=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dz={exports:{}},UI={},Rz={exports:{}},Qn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw=Symbol.for("react.element"),wde=Symbol.for("react.portal"),Nde=Symbol.for("react.fragment"),Cde=Symbol.for("react.strict_mode"),_de=Symbol.for("react.profiler"),Ede=Symbol.for("react.provider"),Sde=Symbol.for("react.context"),Ide=Symbol.for("react.forward_ref"),jde=Symbol.for("react.suspense"),Pde=Symbol.for("react.memo"),Bde=Symbol.for("react.lazy"),lL=Symbol.iterator;function Tde(t){return t===null||typeof t!="object"?null:(t=lL&&t[lL]||t["@@iterator"],typeof t=="function"?t:null)}var Mz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lz=Object.assign,Uz={};function Vv(t,e,r){this.props=t,this.context=e,this.refs=Uz,this.updater=r||Mz}Vv.prototype.isReactComponent={};Vv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qz(){}Qz.prototype=Vv.prototype;function sO(t,e,r){this.props=t,this.context=e,this.refs=Uz,this.updater=r||Mz}var iO=sO.prototype=new Qz;iO.constructor=sO;Lz(iO,Vv.prototype);iO.isPureReactComponent=!0;var cL=Array.isArray,Vz=Object.prototype.hasOwnProperty,oO={current:null},Hz={key:!0,ref:!0,__self:!0,__source:!0};function $z(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vz.call(e,n)&&!Hz.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:tw,type:t,key:s,ref:o,props:a,_owner:oO.current}}function kde(t,e){return{$$typeof:tw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lO(t){return typeof t=="object"&&t!==null&&t.$$typeof===tw}function Fde(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var uL=/\/+/g;function BP(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fde(""+t.key):e.toString(36)}function S_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tw:case wde:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+BP(o,0):n,cL(a)?(r="",t!=null&&(r=t.replace(uL,"$&/")+"/"),S_(a,e,r,"",function(u){return u})):a!=null&&(lO(a)&&(a=kde(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(uL,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",cL(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+BP(s,l);o+=S_(s,e,r,c,a)}else if(c=Tde(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+BP(s,l++),o+=S_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function EN(t,e,r){if(t==null)return t;var n=[],a=0;return S_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Ode(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cc={current:null},I_={transition:null},Dde={ReactCurrentDispatcher:cc,ReactCurrentBatchConfig:I_,ReactCurrentOwner:oO};function Gz(){throw Error("act(...) is not supported in production builds of React.")}Qn.Children={map:EN,forEach:function(t,e,r){EN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return EN(t,function(){e++}),e},toArray:function(t){return EN(t,function(e){return e})||[]},only:function(t){if(!lO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qn.Component=Vv;Qn.Fragment=Nde;Qn.Profiler=_de;Qn.PureComponent=sO;Qn.StrictMode=Cde;Qn.Suspense=jde;Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dde;Qn.act=Gz;Qn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Lz({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=oO.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Vz.call(e,c)&&!Hz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:tw,type:t.type,key:a,ref:s,props:n,_owner:o}};Qn.createContext=function(t){return t={$$typeof:Sde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ede,_context:t},t.Consumer=t};Qn.createElement=$z;Qn.createFactory=function(t){var e=$z.bind(null,t);return e.type=t,e};Qn.createRef=function(){return{current:null}};Qn.forwardRef=function(t){return{$$typeof:Ide,render:t}};Qn.isValidElement=lO;Qn.lazy=function(t){return{$$typeof:Bde,_payload:{_status:-1,_result:t},_init:Ode}};Qn.memo=function(t,e){return{$$typeof:Pde,type:t,compare:e===void 0?null:e}};Qn.startTransition=function(t){var e=I_.transition;I_.transition={};try{t()}finally{I_.transition=e}};Qn.unstable_act=Gz;Qn.useCallback=function(t,e){return cc.current.useCallback(t,e)};Qn.useContext=function(t){return cc.current.useContext(t)};Qn.useDebugValue=function(){};Qn.useDeferredValue=function(t){return cc.current.useDeferredValue(t)};Qn.useEffect=function(t,e){return cc.current.useEffect(t,e)};Qn.useId=function(){return cc.current.useId()};Qn.useImperativeHandle=function(t,e,r){return cc.current.useImperativeHandle(t,e,r)};Qn.useInsertionEffect=function(t,e){return cc.current.useInsertionEffect(t,e)};Qn.useLayoutEffect=function(t,e){return cc.current.useLayoutEffect(t,e)};Qn.useMemo=function(t,e){return cc.current.useMemo(t,e)};Qn.useReducer=function(t,e,r){return cc.current.useReducer(t,e,r)};Qn.useRef=function(t){return cc.current.useRef(t)};Qn.useState=function(t){return cc.current.useState(t)};Qn.useSyncExternalStore=function(t,e,r){return cc.current.useSyncExternalStore(t,e,r)};Qn.useTransition=function(){return cc.current.useTransition()};Qn.version="18.3.1";Rz.exports=Qn;var v=Rz.exports;const jo=dA(v),Rde=bde({__proto__:null,default:jo},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mde=v,Lde=Symbol.for("react.element"),Ude=Symbol.for("react.fragment"),Qde=Object.prototype.hasOwnProperty,Vde=Mde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hde={key:!0,ref:!0,__self:!0,__source:!0};function Kz(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Qde.call(e,n)&&!Hde.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Lde,type:t,key:s,ref:o,props:a,_owner:Vde.current}}UI.Fragment=Ude;UI.jsx=Kz;UI.jsxs=Kz;Dz.exports=UI;var i=Dz.exports,wB={},qz={exports:{}},xu={},zz={exports:{}},Wz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ye,ae){var je=ye.length;ye.push(ae);e:for(;0<je;){var Be=je-1>>>1,O=ye[Be];if(0<a(O,ae))ye[Be]=ae,ye[je]=O,je=Be;else break e}}function r(ye){return ye.length===0?null:ye[0]}function n(ye){if(ye.length===0)return null;var ae=ye[0],je=ye.pop();if(je!==ae){ye[0]=je;e:for(var Be=0,O=ye.length,G=O>>>1;Be<G;){var z=2*(Be+1)-1,L=ye[z],Y=z+1,J=ye[Y];if(0>a(L,je))Y<O&&0>a(J,L)?(ye[Be]=J,ye[Y]=je,Be=Y):(ye[Be]=L,ye[z]=je,Be=z);else if(Y<O&&0>a(J,je))ye[Be]=J,ye[Y]=je,Be=Y;else break e}}return ae}function a(ye,ae){var je=ye.sortIndex-ae.sortIndex;return je!==0?je:ye.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ye){for(var ae=r(u);ae!==null;){if(ae.callback===null)n(u);else if(ae.startTime<=ye)n(u),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=r(u)}}function w(ye){if(p=!1,b(ye),!m)if(r(c)!==null)m=!0,me(j);else{var ae=r(u);ae!==null&&pe(w,ae.startTime-ye)}}function j(ye,ae){m=!1,p&&(p=!1,x(S),S=-1),h=!0;var je=A;try{for(b(ae),f=r(c);f!==null&&(!(f.expirationTime>ae)||ye&&!P());){var Be=f.callback;if(typeof Be=="function"){f.callback=null,A=f.priorityLevel;var O=Be(f.expirationTime<=ae);ae=t.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ae)}else n(c);f=r(c)}if(f!==null)var G=!0;else{var z=r(u);z!==null&&pe(w,z.startTime-ae),G=!1}return G}finally{f=null,A=je,h=!1}}var I=!1,_=null,S=-1,E=5,F=-1;function P(){return!(t.unstable_now()-F<E)}function k(){if(_!==null){var ye=t.unstable_now();F=ye;var ae=!0;try{ae=_(!0,ye)}finally{ae?D():(I=!1,_=null)}}else I=!1}var D;if(typeof y=="function")D=function(){y(k)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,fe=Z.port2;Z.port1.onmessage=k,D=function(){fe.postMessage(null)}}else D=function(){g(k,0)};function me(ye){_=ye,I||(I=!0,D())}function pe(ye,ae){S=g(function(){ye(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,me(j))},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ye){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var je=A;A=ae;try{return ye()}finally{A=je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ye,ae){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var je=A;A=ye;try{return ae()}finally{A=je}},t.unstable_scheduleCallback=function(ye,ae,je){var Be=t.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?Be+je:Be):je=Be,ye){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=je+O,ye={id:d++,callback:ae,priorityLevel:ye,startTime:je,expirationTime:O,sortIndex:-1},je>Be?(ye.sortIndex=je,e(u,ye),r(c)===null&&ye===r(u)&&(p?(x(S),S=-1):p=!0,pe(w,je-Be))):(ye.sortIndex=O,e(c,ye),m||h||(m=!0,me(j))),ye},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(ye){var ae=A;return function(){var je=A;A=ae;try{return ye.apply(this,arguments)}finally{A=je}}}})(Wz);zz.exports=Wz;var $de=zz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gde=v,hu=$de;function vr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xz=new Set,Fb={};function hg(t,e){dv(t,e),dv(t+"Capture",e)}function dv(t,e){for(Fb[t]=e,t=0;t<e.length;t++)Xz.add(e[t])}var qh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NB=Object.prototype.hasOwnProperty,Kde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dL={},fL={};function qde(t){return NB.call(fL,t)?!0:NB.call(dL,t)?!1:Kde.test(t)?fL[t]=!0:(dL[t]=!0,!1)}function zde(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wde(t,e,r,n){if(e===null||typeof e>"u"||zde(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function uc(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ul={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ul[t]=new uc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ul[e]=new uc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ul[t]=new uc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ul[t]=new uc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ul[t]=new uc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ul[t]=new uc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ul[t]=new uc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ul[t]=new uc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ul[t]=new uc(t,5,!1,t.toLowerCase(),null,!1,!1)});var cO=/[\-:]([a-z])/g;function uO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cO,uO);ul[e]=new uc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cO,uO);ul[e]=new uc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cO,uO);ul[e]=new uc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ul[t]=new uc(t,1,!1,t.toLowerCase(),null,!1,!1)});ul.xlinkHref=new uc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ul[t]=new uc(t,1,!1,t.toLowerCase(),null,!0,!0)});function dO(t,e,r,n){var a=ul.hasOwnProperty(e)?ul[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wde(e,r,a,n)&&(r=null),n||a===null?qde(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fA=Gde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,SN=Symbol.for("react.element"),_x=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),fO=Symbol.for("react.strict_mode"),CB=Symbol.for("react.profiler"),Yz=Symbol.for("react.provider"),Jz=Symbol.for("react.context"),hO=Symbol.for("react.forward_ref"),_B=Symbol.for("react.suspense"),EB=Symbol.for("react.suspense_list"),AO=Symbol.for("react.memo"),l0=Symbol.for("react.lazy"),Zz=Symbol.for("react.offscreen"),hL=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=hL&&t[hL]||t["@@iterator"],typeof t=="function"?t:null)}var Ks=Object.assign,TP;function Ny(t){if(TP===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);TP=e&&e[1]||""}return`
`+TP+t}var kP=!1;function FP(t,e){if(!t||kP)return"";kP=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{kP=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ny(t):""}function Xde(t){switch(t.tag){case 5:return Ny(t.type);case 16:return Ny("Lazy");case 13:return Ny("Suspense");case 19:return Ny("SuspenseList");case 0:case 2:case 15:return t=FP(t.type,!1),t;case 11:return t=FP(t.type.render,!1),t;case 1:return t=FP(t.type,!0),t;default:return""}}function SB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ex:return"Fragment";case _x:return"Portal";case CB:return"Profiler";case fO:return"StrictMode";case _B:return"Suspense";case EB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jz:return(t.displayName||"Context")+".Consumer";case Yz:return(t._context.displayName||"Context")+".Provider";case hO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case AO:return e=t.displayName||null,e!==null?e:SB(t.type)||"Memo";case l0:e=t._payload,t=t._init;try{return SB(t(e))}catch{}}return null}function Yde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SB(e);case 8:return e===fO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function J0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jde(t){var e=eW(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function IN(t){t._valueTracker||(t._valueTracker=Jde(t))}function tW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=eW(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function pE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function IB(t,e){var r=e.checked;return Ks({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function AL(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=J0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rW(t,e){e=e.checked,e!=null&&dO(t,"checked",e,!1)}function jB(t,e){rW(t,e);var r=J0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PB(t,e.type,r):e.hasOwnProperty("defaultValue")&&PB(t,e.type,J0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mL(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function PB(t,e,r){(e!=="number"||pE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Cy=Array.isArray;function qx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+J0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function BB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(vr(91));return Ks({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pL(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(vr(92));if(Cy(r)){if(1<r.length)throw Error(vr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:J0(r)}}function nW(t,e){var r=J0(e.value),n=J0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function gL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jN,sW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jN=jN||document.createElement("div"),jN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ob(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zde=["Webkit","ms","Moz","O"];Object.keys(Wy).forEach(function(t){Zde.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wy[e]=Wy[t]})});function iW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wy.hasOwnProperty(t)&&Wy[t]?(""+e).trim():e+"px"}function oW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=iW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var efe=Ks({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kB(t,e){if(e){if(efe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(vr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(vr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(vr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(vr(62))}}function FB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OB=null;function mO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var DB=null,zx=null,Wx=null;function xL(t){if(t=aw(t)){if(typeof DB!="function")throw Error(vr(280));var e=t.stateNode;e&&(e=GI(e),DB(t.stateNode,t.type,e))}}function lW(t){zx?Wx?Wx.push(t):Wx=[t]:zx=t}function cW(){if(zx){var t=zx,e=Wx;if(Wx=zx=null,xL(t),e)for(t=0;t<e.length;t++)xL(e[t])}}function uW(t,e){return t(e)}function dW(){}var OP=!1;function fW(t,e,r){if(OP)return t(e,r);OP=!0;try{return uW(t,e,r)}finally{OP=!1,(zx!==null||Wx!==null)&&(dW(),cW())}}function Db(t,e){var r=t.stateNode;if(r===null)return null;var n=GI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(vr(231,e,typeof r));return r}var RB=!1;if(qh)try{var Q1={};Object.defineProperty(Q1,"passive",{get:function(){RB=!0}}),window.addEventListener("test",Q1,Q1),window.removeEventListener("test",Q1,Q1)}catch{RB=!1}function tfe(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Xy=!1,gE=null,xE=!1,MB=null,rfe={onError:function(t){Xy=!0,gE=t}};function nfe(t,e,r,n,a,s,o,l,c){Xy=!1,gE=null,tfe.apply(rfe,arguments)}function afe(t,e,r,n,a,s,o,l,c){if(nfe.apply(this,arguments),Xy){if(Xy){var u=gE;Xy=!1,gE=null}else throw Error(vr(198));xE||(xE=!0,MB=u)}}function Ag(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function hW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vL(t){if(Ag(t)!==t)throw Error(vr(188))}function sfe(t){var e=t.alternate;if(!e){if(e=Ag(t),e===null)throw Error(vr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return vL(a),t;if(s===n)return vL(a),e;s=s.sibling}throw Error(vr(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(vr(189))}}if(r.alternate!==n)throw Error(vr(190))}if(r.tag!==3)throw Error(vr(188));return r.stateNode.current===r?t:e}function AW(t){return t=sfe(t),t!==null?mW(t):null}function mW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mW(t);if(e!==null)return e;t=t.sibling}return null}var pW=hu.unstable_scheduleCallback,yL=hu.unstable_cancelCallback,ife=hu.unstable_shouldYield,ofe=hu.unstable_requestPaint,yi=hu.unstable_now,lfe=hu.unstable_getCurrentPriorityLevel,pO=hu.unstable_ImmediatePriority,gW=hu.unstable_UserBlockingPriority,vE=hu.unstable_NormalPriority,cfe=hu.unstable_LowPriority,xW=hu.unstable_IdlePriority,QI=null,Df=null;function ufe(t){if(Df&&typeof Df.onCommitFiberRoot=="function")try{Df.onCommitFiberRoot(QI,t,void 0,(t.current.flags&128)===128)}catch{}}var Gd=Math.clz32?Math.clz32:hfe,dfe=Math.log,ffe=Math.LN2;function hfe(t){return t>>>=0,t===0?32:31-(dfe(t)/ffe|0)|0}var PN=64,BN=4194304;function _y(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=_y(l):(s&=o,s!==0&&(n=_y(s)))}else o=r&~a,o!==0?n=_y(o):s!==0&&(n=_y(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Gd(e),a=1<<r,n|=t[r],e&=~a;return n}function Afe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mfe(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gd(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Afe(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function LB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vW(){var t=PN;return PN<<=1,!(PN&4194240)&&(PN=64),t}function DP(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rw(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gd(e),t[e]=r}function pfe(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Gd(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function gO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Gd(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Fa=0;function yW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bW,xO,wW,NW,CW,UB=!1,TN=[],F0=null,O0=null,D0=null,Rb=new Map,Mb=new Map,A0=[],gfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bL(t,e){switch(t){case"focusin":case"focusout":F0=null;break;case"dragenter":case"dragleave":O0=null;break;case"mouseover":case"mouseout":D0=null;break;case"pointerover":case"pointerout":Rb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mb.delete(e.pointerId)}}function V1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=aw(e),e!==null&&xO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function xfe(t,e,r,n,a){switch(e){case"focusin":return F0=V1(F0,t,e,r,n,a),!0;case"dragenter":return O0=V1(O0,t,e,r,n,a),!0;case"mouseover":return D0=V1(D0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Rb.set(s,V1(Rb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Mb.set(s,V1(Mb.get(s)||null,t,e,r,n,a)),!0}return!1}function _W(t){var e=ip(t.target);if(e!==null){var r=Ag(e);if(r!==null){if(e=r.tag,e===13){if(e=hW(r),e!==null){t.blockedOn=e,CW(t.priority,function(){wW(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function j_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=QB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);OB=n,r.target.dispatchEvent(n),OB=null}else return e=aw(r),e!==null&&xO(e),t.blockedOn=r,!1;e.shift()}return!0}function wL(t,e,r){j_(t)&&r.delete(e)}function vfe(){UB=!1,F0!==null&&j_(F0)&&(F0=null),O0!==null&&j_(O0)&&(O0=null),D0!==null&&j_(D0)&&(D0=null),Rb.forEach(wL),Mb.forEach(wL)}function H1(t,e){t.blockedOn===e&&(t.blockedOn=null,UB||(UB=!0,hu.unstable_scheduleCallback(hu.unstable_NormalPriority,vfe)))}function Lb(t){function e(a){return H1(a,t)}if(0<TN.length){H1(TN[0],t);for(var r=1;r<TN.length;r++){var n=TN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(F0!==null&&H1(F0,t),O0!==null&&H1(O0,t),D0!==null&&H1(D0,t),Rb.forEach(e),Mb.forEach(e),r=0;r<A0.length;r++)n=A0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<A0.length&&(r=A0[0],r.blockedOn===null);)_W(r),r.blockedOn===null&&A0.shift()}var Xx=fA.ReactCurrentBatchConfig,bE=!0;function yfe(t,e,r,n){var a=Fa,s=Xx.transition;Xx.transition=null;try{Fa=1,vO(t,e,r,n)}finally{Fa=a,Xx.transition=s}}function bfe(t,e,r,n){var a=Fa,s=Xx.transition;Xx.transition=null;try{Fa=4,vO(t,e,r,n)}finally{Fa=a,Xx.transition=s}}function vO(t,e,r,n){if(bE){var a=QB(t,e,r,n);if(a===null)KP(t,e,n,wE,r),bL(t,n);else if(xfe(a,t,e,r,n))n.stopPropagation();else if(bL(t,n),e&4&&-1<gfe.indexOf(t)){for(;a!==null;){var s=aw(a);if(s!==null&&bW(s),s=QB(t,e,r,n),s===null&&KP(t,e,n,wE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else KP(t,e,n,null,r)}}var wE=null;function QB(t,e,r,n){if(wE=null,t=mO(n),t=ip(t),t!==null)if(e=Ag(t),e===null)t=null;else if(r=e.tag,r===13){if(t=hW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wE=t,null}function EW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lfe()){case pO:return 1;case gW:return 4;case vE:case cfe:return 16;case xW:return 536870912;default:return 16}default:return 16}}var C0=null,yO=null,P_=null;function SW(){if(P_)return P_;var t,e=yO,r=e.length,n,a="value"in C0?C0.value:C0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return P_=a.slice(t,1<n?1-n:void 0)}function B_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kN(){return!0}function NL(){return!1}function vu(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kN:NL,this.isPropagationStopped=NL,this}return Ks(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kN)},persist:function(){},isPersistent:kN}),e}var Hv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bO=vu(Hv),nw=Ks({},Hv,{view:0,detail:0}),wfe=vu(nw),RP,MP,$1,VI=Ks({},nw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$1&&($1&&t.type==="mousemove"?(RP=t.screenX-$1.screenX,MP=t.screenY-$1.screenY):MP=RP=0,$1=t),RP)},movementY:function(t){return"movementY"in t?t.movementY:MP}}),CL=vu(VI),Nfe=Ks({},VI,{dataTransfer:0}),Cfe=vu(Nfe),_fe=Ks({},nw,{relatedTarget:0}),LP=vu(_fe),Efe=Ks({},Hv,{animationName:0,elapsedTime:0,pseudoElement:0}),Sfe=vu(Efe),Ife=Ks({},Hv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jfe=vu(Ife),Pfe=Ks({},Hv,{data:0}),_L=vu(Pfe),Bfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ffe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kfe[t])?!!e[t]:!1}function wO(){return Ffe}var Ofe=Ks({},nw,{key:function(t){if(t.key){var e=Bfe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=B_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wO,charCode:function(t){return t.type==="keypress"?B_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?B_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dfe=vu(Ofe),Rfe=Ks({},VI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EL=vu(Rfe),Mfe=Ks({},nw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wO}),Lfe=vu(Mfe),Ufe=Ks({},Hv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qfe=vu(Ufe),Vfe=Ks({},VI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hfe=vu(Vfe),$fe=[9,13,27,32],NO=qh&&"CompositionEvent"in window,Yy=null;qh&&"documentMode"in document&&(Yy=document.documentMode);var Gfe=qh&&"TextEvent"in window&&!Yy,IW=qh&&(!NO||Yy&&8<Yy&&11>=Yy),SL=" ",IL=!1;function jW(t,e){switch(t){case"keyup":return $fe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sx=!1;function Kfe(t,e){switch(t){case"compositionend":return PW(e);case"keypress":return e.which!==32?null:(IL=!0,SL);case"textInput":return t=e.data,t===SL&&IL?null:t;default:return null}}function qfe(t,e){if(Sx)return t==="compositionend"||!NO&&jW(t,e)?(t=SW(),P_=yO=C0=null,Sx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IW&&e.locale!=="ko"?null:e.data;default:return null}}var zfe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zfe[t.type]:e==="textarea"}function BW(t,e,r,n){lW(n),e=NE(e,"onChange"),0<e.length&&(r=new bO("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Jy=null,Ub=null;function Wfe(t){VW(t,0)}function HI(t){var e=Px(t);if(tW(e))return t}function Xfe(t,e){if(t==="change")return e}var TW=!1;if(qh){var UP;if(qh){var QP="oninput"in document;if(!QP){var PL=document.createElement("div");PL.setAttribute("oninput","return;"),QP=typeof PL.oninput=="function"}UP=QP}else UP=!1;TW=UP&&(!document.documentMode||9<document.documentMode)}function BL(){Jy&&(Jy.detachEvent("onpropertychange",kW),Ub=Jy=null)}function kW(t){if(t.propertyName==="value"&&HI(Ub)){var e=[];BW(e,Ub,t,mO(t)),fW(Wfe,e)}}function Yfe(t,e,r){t==="focusin"?(BL(),Jy=e,Ub=r,Jy.attachEvent("onpropertychange",kW)):t==="focusout"&&BL()}function Jfe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return HI(Ub)}function Zfe(t,e){if(t==="click")return HI(e)}function ehe(t,e){if(t==="input"||t==="change")return HI(e)}function the(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zd=typeof Object.is=="function"?Object.is:the;function Qb(t,e){if(Zd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!NB.call(e,a)||!Zd(t[a],e[a]))return!1}return!0}function TL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kL(t,e){var r=TL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=TL(r)}}function FW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OW(){for(var t=window,e=pE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=pE(t.document)}return e}function CO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rhe(t){var e=OW(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&FW(r.ownerDocument.documentElement,r)){if(n!==null&&CO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=kL(r,s);var o=kL(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nhe=qh&&"documentMode"in document&&11>=document.documentMode,Ix=null,VB=null,Zy=null,HB=!1;function FL(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;HB||Ix==null||Ix!==pE(n)||(n=Ix,"selectionStart"in n&&CO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zy&&Qb(Zy,n)||(Zy=n,n=NE(VB,"onSelect"),0<n.length&&(e=new bO("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ix)))}function FN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var jx={animationend:FN("Animation","AnimationEnd"),animationiteration:FN("Animation","AnimationIteration"),animationstart:FN("Animation","AnimationStart"),transitionend:FN("Transition","TransitionEnd")},VP={},DW={};qh&&(DW=document.createElement("div").style,"AnimationEvent"in window||(delete jx.animationend.animation,delete jx.animationiteration.animation,delete jx.animationstart.animation),"TransitionEvent"in window||delete jx.transitionend.transition);function $I(t){if(VP[t])return VP[t];if(!jx[t])return t;var e=jx[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in DW)return VP[t]=e[r];return t}var RW=$I("animationend"),MW=$I("animationiteration"),LW=$I("animationstart"),UW=$I("transitionend"),QW=new Map,OL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pm(t,e){QW.set(t,e),hg(e,[t])}for(var HP=0;HP<OL.length;HP++){var $P=OL[HP],ahe=$P.toLowerCase(),she=$P[0].toUpperCase()+$P.slice(1);pm(ahe,"on"+she)}pm(RW,"onAnimationEnd");pm(MW,"onAnimationIteration");pm(LW,"onAnimationStart");pm("dblclick","onDoubleClick");pm("focusin","onFocus");pm("focusout","onBlur");pm(UW,"onTransitionEnd");dv("onMouseEnter",["mouseout","mouseover"]);dv("onMouseLeave",["mouseout","mouseover"]);dv("onPointerEnter",["pointerout","pointerover"]);dv("onPointerLeave",["pointerout","pointerover"]);hg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hg("onBeforeInput",["compositionend","keypress","textInput","paste"]);hg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ey="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ihe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ey));function DL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,afe(n,e,void 0,t),t.currentTarget=null}function VW(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;DL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;DL(a,l,u),s=c}}}if(xE)throw t=MB,xE=!1,MB=null,t}function os(t,e){var r=e[zB];r===void 0&&(r=e[zB]=new Set);var n=t+"__bubble";r.has(n)||(HW(e,t,2,!1),r.add(n))}function GP(t,e,r){var n=0;e&&(n|=4),HW(r,t,n,e)}var ON="_reactListening"+Math.random().toString(36).slice(2);function Vb(t){if(!t[ON]){t[ON]=!0,Xz.forEach(function(r){r!=="selectionchange"&&(ihe.has(r)||GP(r,!1,t),GP(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ON]||(e[ON]=!0,GP("selectionchange",!1,e))}}function HW(t,e,r,n){switch(EW(e)){case 1:var a=yfe;break;case 4:a=bfe;break;default:a=vO}r=a.bind(null,e,r,t),a=void 0,!RB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function KP(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ip(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}fW(function(){var u=s,d=mO(r),f=[];e:{var A=QW.get(t);if(A!==void 0){var h=bO,m=t;switch(t){case"keypress":if(B_(r)===0)break e;case"keydown":case"keyup":h=Dfe;break;case"focusin":m="focus",h=LP;break;case"focusout":m="blur",h=LP;break;case"beforeblur":case"afterblur":h=LP;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=CL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Cfe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Lfe;break;case RW:case MW:case LW:h=Sfe;break;case UW:h=Qfe;break;case"scroll":h=wfe;break;case"wheel":h=Hfe;break;case"copy":case"cut":case"paste":h=jfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=EL}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?A!==null?A+"Capture":null:A;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=Db(y,x),w!=null&&p.push(Hb(y,w,b)))),g)break;y=y.return}0<p.length&&(A=new h(A,m,null,r,d),f.push({event:A,listeners:p}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",A&&r!==OB&&(m=r.relatedTarget||r.fromElement)&&(ip(m)||m[zh]))break e;if((h||A)&&(A=d.window===d?d:(A=d.ownerDocument)?A.defaultView||A.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?ip(m):null,m!==null&&(g=Ag(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=CL,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=EL,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=h==null?A:Px(h),b=m==null?A:Px(m),A=new p(w,y+"leave",h,r,d),A.target=g,A.relatedTarget=b,w=null,ip(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,h&&m)t:{for(p=h,x=m,y=0,b=p;b;b=Ug(b))y++;for(b=0,w=x;w;w=Ug(w))b++;for(;0<y-b;)p=Ug(p),y--;for(;0<b-y;)x=Ug(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=Ug(p),x=Ug(x)}p=null}else p=null;h!==null&&RL(f,A,h,p,!1),m!==null&&g!==null&&RL(f,g,m,p,!0)}}e:{if(A=u?Px(u):window,h=A.nodeName&&A.nodeName.toLowerCase(),h==="select"||h==="input"&&A.type==="file")var j=Xfe;else if(jL(A))if(TW)j=ehe;else{j=Jfe;var I=Yfe}else(h=A.nodeName)&&h.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(j=Zfe);if(j&&(j=j(t,u))){BW(f,j,r,d);break e}I&&I(t,A,u),t==="focusout"&&(I=A._wrapperState)&&I.controlled&&A.type==="number"&&PB(A,"number",A.value)}switch(I=u?Px(u):window,t){case"focusin":(jL(I)||I.contentEditable==="true")&&(Ix=I,VB=u,Zy=null);break;case"focusout":Zy=VB=Ix=null;break;case"mousedown":HB=!0;break;case"contextmenu":case"mouseup":case"dragend":HB=!1,FL(f,r,d);break;case"selectionchange":if(nhe)break;case"keydown":case"keyup":FL(f,r,d)}var _;if(NO)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Sx?jW(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(IW&&r.locale!=="ko"&&(Sx||S!=="onCompositionStart"?S==="onCompositionEnd"&&Sx&&(_=SW()):(C0=d,yO="value"in C0?C0.value:C0.textContent,Sx=!0)),I=NE(u,S),0<I.length&&(S=new _L(S,t,null,r,d),f.push({event:S,listeners:I}),_?S.data=_:(_=PW(r),_!==null&&(S.data=_)))),(_=Gfe?Kfe(t,r):qfe(t,r))&&(u=NE(u,"onBeforeInput"),0<u.length&&(d=new _L("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}VW(f,e)})}function Hb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function NE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Db(t,r),s!=null&&n.unshift(Hb(t,s,a)),s=Db(t,e),s!=null&&n.push(Hb(t,s,a))),t=t.return}return n}function Ug(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RL(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Db(r,s),c!=null&&o.unshift(Hb(r,c,l))):a||(c=Db(r,s),c!=null&&o.push(Hb(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var ohe=/\r\n?/g,lhe=/\u0000|\uFFFD/g;function ML(t){return(typeof t=="string"?t:""+t).replace(ohe,`
`).replace(lhe,"")}function DN(t,e,r){if(e=ML(e),ML(t)!==e&&r)throw Error(vr(425))}function CE(){}var $B=null,GB=null;function KB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qB=typeof setTimeout=="function"?setTimeout:void 0,che=typeof clearTimeout=="function"?clearTimeout:void 0,LL=typeof Promise=="function"?Promise:void 0,uhe=typeof queueMicrotask=="function"?queueMicrotask:typeof LL<"u"?function(t){return LL.resolve(null).then(t).catch(dhe)}:qB;function dhe(t){setTimeout(function(){throw t})}function qP(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Lb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Lb(e)}function R0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $v=Math.random().toString(36).slice(2),Ef="__reactFiber$"+$v,$b="__reactProps$"+$v,zh="__reactContainer$"+$v,zB="__reactEvents$"+$v,fhe="__reactListeners$"+$v,hhe="__reactHandles$"+$v;function ip(t){var e=t[Ef];if(e)return e;for(var r=t.parentNode;r;){if(e=r[zh]||r[Ef]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=UL(t);t!==null;){if(r=t[Ef])return r;t=UL(t)}return e}t=r,r=t.parentNode}return null}function aw(t){return t=t[Ef]||t[zh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Px(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(vr(33))}function GI(t){return t[$b]||null}var WB=[],Bx=-1;function gm(t){return{current:t}}function hs(t){0>Bx||(t.current=WB[Bx],WB[Bx]=null,Bx--)}function rs(t,e){Bx++,WB[Bx]=t.current,t.current=e}var Z0={},Rl=gm(Z0),jc=gm(!1),Op=Z0;function fv(t,e){var r=t.type.contextTypes;if(!r)return Z0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Pc(t){return t=t.childContextTypes,t!=null}function _E(){hs(jc),hs(Rl)}function QL(t,e,r){if(Rl.current!==Z0)throw Error(vr(168));rs(Rl,e),rs(jc,r)}function $W(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(vr(108,Yde(t)||"Unknown",a));return Ks({},r,n)}function EE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Z0,Op=Rl.current,rs(Rl,t),rs(jc,jc.current),!0}function VL(t,e,r){var n=t.stateNode;if(!n)throw Error(vr(169));r?(t=$W(t,e,Op),n.__reactInternalMemoizedMergedChildContext=t,hs(jc),hs(Rl),rs(Rl,t)):hs(jc),rs(jc,r)}var bh=null,KI=!1,zP=!1;function GW(t){bh===null?bh=[t]:bh.push(t)}function Ahe(t){KI=!0,GW(t)}function xm(){if(!zP&&bh!==null){zP=!0;var t=0,e=Fa;try{var r=bh;for(Fa=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bh=null,KI=!1}catch(a){throw bh!==null&&(bh=bh.slice(t+1)),pW(pO,xm),a}finally{Fa=e,zP=!1}}return null}var Tx=[],kx=0,SE=null,IE=0,qu=[],zu=0,Dp=null,Eh=1,Sh="";function Hm(t,e){Tx[kx++]=IE,Tx[kx++]=SE,SE=t,IE=e}function KW(t,e,r){qu[zu++]=Eh,qu[zu++]=Sh,qu[zu++]=Dp,Dp=t;var n=Eh;t=Sh;var a=32-Gd(n)-1;n&=~(1<<a),r+=1;var s=32-Gd(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Eh=1<<32-Gd(e)+a|r<<a|n,Sh=s+t}else Eh=1<<s|r<<a|n,Sh=t}function _O(t){t.return!==null&&(Hm(t,1),KW(t,1,0))}function EO(t){for(;t===SE;)SE=Tx[--kx],Tx[kx]=null,IE=Tx[--kx],Tx[kx]=null;for(;t===Dp;)Dp=qu[--zu],qu[zu]=null,Sh=qu[--zu],qu[zu]=null,Eh=qu[--zu],qu[zu]=null}var uu=null,iu=null,Ns=!1,Rd=null;function qW(t,e){var r=Xu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function HL(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,uu=t,iu=R0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,uu=t,iu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Dp!==null?{id:Eh,overflow:Sh}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,uu=t,iu=null,!0):!1;default:return!1}}function XB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function YB(t){if(Ns){var e=iu;if(e){var r=e;if(!HL(t,e)){if(XB(t))throw Error(vr(418));e=R0(r.nextSibling);var n=uu;e&&HL(t,e)?qW(n,r):(t.flags=t.flags&-4097|2,Ns=!1,uu=t)}}else{if(XB(t))throw Error(vr(418));t.flags=t.flags&-4097|2,Ns=!1,uu=t}}}function $L(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;uu=t}function RN(t){if(t!==uu)return!1;if(!Ns)return $L(t),Ns=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KB(t.type,t.memoizedProps)),e&&(e=iu)){if(XB(t))throw zW(),Error(vr(418));for(;e;)qW(t,e),e=R0(e.nextSibling)}if($L(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(vr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){iu=R0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}iu=null}}else iu=uu?R0(t.stateNode.nextSibling):null;return!0}function zW(){for(var t=iu;t;)t=R0(t.nextSibling)}function hv(){iu=uu=null,Ns=!1}function SO(t){Rd===null?Rd=[t]:Rd.push(t)}var mhe=fA.ReactCurrentBatchConfig;function G1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vr(309));var n=r.stateNode}if(!n)throw Error(vr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(vr(284));if(!r._owner)throw Error(vr(290,t))}return t}function MN(t,e){throw t=Object.prototype.toString.call(e),Error(vr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function GL(t){var e=t._init;return e(t._payload)}function WW(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=Q0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=t3(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var j=b.type;return j===Ex?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===l0&&GL(j)===y.type)?(w=a(y,b.props),w.ref=G1(x,y,b),w.return=x,w):(w=M_(b.type,b.key,b.props,null,x.mode,w),w.ref=G1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=r3(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,j){return y===null||y.tag!==7?(y=xp(b,x.mode,w,j),y.return=x,y):(y=a(y,b),y.return=x,y)}function f(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=t3(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case SN:return b=M_(y.type,y.key,y.props,null,x.mode,b),b.ref=G1(x,null,y),b.return=x,b;case _x:return y=r3(y,x.mode,b),y.return=x,y;case l0:var w=y._init;return f(x,w(y._payload),b)}if(Cy(y)||U1(y))return y=xp(y,x.mode,b,null),y.return=x,y;MN(x,y)}return null}function A(x,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case SN:return b.key===j?c(x,y,b,w):null;case _x:return b.key===j?u(x,y,b,w):null;case l0:return j=b._init,A(x,y,j(b._payload),w)}if(Cy(b)||U1(b))return j!==null?null:d(x,y,b,w,null);MN(x,b)}return null}function h(x,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case SN:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,j);case _x:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,j);case l0:var I=w._init;return h(x,y,b,I(w._payload),j)}if(Cy(w)||U1(w))return x=x.get(b)||null,d(y,x,w,j,null);MN(y,w)}return null}function m(x,y,b,w){for(var j=null,I=null,_=y,S=y=0,E=null;_!==null&&S<b.length;S++){_.index>S?(E=_,_=null):E=_.sibling;var F=A(x,_,b[S],w);if(F===null){_===null&&(_=E);break}t&&_&&F.alternate===null&&e(x,_),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F,_=E}if(S===b.length)return r(x,_),Ns&&Hm(x,S),j;if(_===null){for(;S<b.length;S++)_=f(x,b[S],w),_!==null&&(y=s(_,y,S),I===null?j=_:I.sibling=_,I=_);return Ns&&Hm(x,S),j}for(_=n(x,_);S<b.length;S++)E=h(_,x,S,b[S],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),y=s(E,y,S),I===null?j=E:I.sibling=E,I=E);return t&&_.forEach(function(P){return e(x,P)}),Ns&&Hm(x,S),j}function p(x,y,b,w){var j=U1(b);if(typeof j!="function")throw Error(vr(150));if(b=j.call(b),b==null)throw Error(vr(151));for(var I=j=null,_=y,S=y=0,E=null,F=b.next();_!==null&&!F.done;S++,F=b.next()){_.index>S?(E=_,_=null):E=_.sibling;var P=A(x,_,F.value,w);if(P===null){_===null&&(_=E);break}t&&_&&P.alternate===null&&e(x,_),y=s(P,y,S),I===null?j=P:I.sibling=P,I=P,_=E}if(F.done)return r(x,_),Ns&&Hm(x,S),j;if(_===null){for(;!F.done;S++,F=b.next())F=f(x,F.value,w),F!==null&&(y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return Ns&&Hm(x,S),j}for(_=n(x,_);!F.done;S++,F=b.next())F=h(_,x,S,F.value,w),F!==null&&(t&&F.alternate!==null&&_.delete(F.key===null?S:F.key),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return t&&_.forEach(function(k){return e(x,k)}),Ns&&Hm(x,S),j}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Ex&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case SN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===Ex){if(I.tag===7){r(x,I.sibling),y=a(I,b.props.children),y.return=x,x=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===l0&&GL(j)===I.type){r(x,I.sibling),y=a(I,b.props),y.ref=G1(x,I,b),y.return=x,x=y;break e}r(x,I);break}else e(x,I);I=I.sibling}b.type===Ex?(y=xp(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=M_(b.type,b.key,b.props,null,x.mode,w),w.ref=G1(x,y,b),w.return=x,x=w)}return o(x);case _x:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=r3(b,x.mode,w),y.return=x,x=y}return o(x);case l0:return I=b._init,g(x,y,I(b._payload),w)}if(Cy(b))return m(x,y,b,w);if(U1(b))return p(x,y,b,w);MN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=t3(b,x.mode,w),y.return=x,x=y),o(x)):r(x,y)}return g}var Av=WW(!0),XW=WW(!1),jE=gm(null),PE=null,Fx=null,IO=null;function jO(){IO=Fx=PE=null}function PO(t){var e=jE.current;hs(jE),t._currentValue=e}function JB(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yx(t,e){PE=t,IO=Fx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ec=!0),t.firstContext=null)}function od(t){var e=t._currentValue;if(IO!==t)if(t={context:t,memoizedValue:e,next:null},Fx===null){if(PE===null)throw Error(vr(308));Fx=t,PE.dependencies={lanes:0,firstContext:t}}else Fx=Fx.next=t;return e}var op=null;function BO(t){op===null?op=[t]:op.push(t)}function YW(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,BO(e)):(r.next=a.next,a.next=r),e.interleaved=r,Wh(t,n)}function Wh(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var c0=!1;function TO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JW(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function M0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ta&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Wh(t,r)}return a=n.interleaved,a===null?(e.next=e,BO(n)):(e.next=a.next,a.next=e),n.interleaved=e,Wh(t,r)}function T_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gO(t,r)}}function KL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function BE(t,e,r,n){var a=t.updateQueue;c0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var A=l.lane,h=l.eventTime;if((n&A)===A){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(A=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,A);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,A=typeof m=="function"?m.call(h,f,A):m,A==null)break e;f=Ks({},f,A);break e;case 2:c0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,A=a.effects,A===null?a.effects=[l]:A.push(l))}else h={eventTime:h,lane:A,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=A;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;A=l,l=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Mp|=o,t.lanes=o,t.memoizedState=f}}function qL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(vr(191,a));a.call(n)}}}var sw={},Rf=gm(sw),Gb=gm(sw),Kb=gm(sw);function lp(t){if(t===sw)throw Error(vr(174));return t}function kO(t,e){switch(rs(Kb,e),rs(Gb,t),rs(Rf,sw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:TB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=TB(e,t)}hs(Rf),rs(Rf,e)}function mv(){hs(Rf),hs(Gb),hs(Kb)}function ZW(t){lp(Kb.current);var e=lp(Rf.current),r=TB(e,t.type);e!==r&&(rs(Gb,t),rs(Rf,r))}function FO(t){Gb.current===t&&(hs(Rf),hs(Gb))}var Qs=gm(0);function TE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var WP=[];function OO(){for(var t=0;t<WP.length;t++)WP[t]._workInProgressVersionPrimary=null;WP.length=0}var k_=fA.ReactCurrentDispatcher,XP=fA.ReactCurrentBatchConfig,Rp=0,Gs=null,Yi=null,Io=null,kE=!1,eb=!1,qb=0,phe=0;function Al(){throw Error(vr(321))}function DO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Zd(t[r],e[r]))return!1;return!0}function RO(t,e,r,n,a,s){if(Rp=s,Gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,k_.current=t===null||t.memoizedState===null?yhe:bhe,t=r(n,a),eb){s=0;do{if(eb=!1,qb=0,25<=s)throw Error(vr(301));s+=1,Io=Yi=null,e.updateQueue=null,k_.current=whe,t=r(n,a)}while(eb)}if(k_.current=FE,e=Yi!==null&&Yi.next!==null,Rp=0,Io=Yi=Gs=null,kE=!1,e)throw Error(vr(300));return t}function MO(){var t=qb!==0;return qb=0,t}function _f(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Io===null?Gs.memoizedState=Io=t:Io=Io.next=t,Io}function ld(){if(Yi===null){var t=Gs.alternate;t=t!==null?t.memoizedState:null}else t=Yi.next;var e=Io===null?Gs.memoizedState:Io.next;if(e!==null)Io=e,Yi=t;else{if(t===null)throw Error(vr(310));Yi=t,t={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Io===null?Gs.memoizedState=Io=t:Io=Io.next=t}return Io}function zb(t,e){return typeof e=="function"?e(t):e}function YP(t){var e=ld(),r=e.queue;if(r===null)throw Error(vr(311));r.lastRenderedReducer=t;var n=Yi,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Rp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Gs.lanes|=d,Mp|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Zd(n,e.memoizedState)||(Ec=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Gs.lanes|=s,Mp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function JP(t){var e=ld(),r=e.queue;if(r===null)throw Error(vr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Zd(s,e.memoizedState)||(Ec=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function eX(){}function tX(t,e){var r=Gs,n=ld(),a=e(),s=!Zd(n.memoizedState,a);if(s&&(n.memoizedState=a,Ec=!0),n=n.queue,LO(aX.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Io!==null&&Io.memoizedState.tag&1){if(r.flags|=2048,Wb(9,nX.bind(null,r,n,a,e),void 0,null),ko===null)throw Error(vr(349));Rp&30||rX(r,e,a)}return a}function rX(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Gs.updateQueue,e===null?(e={lastEffect:null,stores:null},Gs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function nX(t,e,r,n){e.value=r,e.getSnapshot=n,sX(e)&&iX(t)}function aX(t,e,r){return r(function(){sX(e)&&iX(t)})}function sX(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Zd(t,r)}catch{return!0}}function iX(t){var e=Wh(t,1);e!==null&&Kd(e,t,1,-1)}function zL(t){var e=_f();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zb,lastRenderedState:t},e.queue=t,t=t.dispatch=vhe.bind(null,Gs,t),[e.memoizedState,t]}function Wb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Gs.updateQueue,e===null?(e={lastEffect:null,stores:null},Gs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function oX(){return ld().memoizedState}function F_(t,e,r,n){var a=_f();Gs.flags|=t,a.memoizedState=Wb(1|e,r,void 0,n===void 0?null:n)}function qI(t,e,r,n){var a=ld();n=n===void 0?null:n;var s=void 0;if(Yi!==null){var o=Yi.memoizedState;if(s=o.destroy,n!==null&&DO(n,o.deps)){a.memoizedState=Wb(e,r,s,n);return}}Gs.flags|=t,a.memoizedState=Wb(1|e,r,s,n)}function WL(t,e){return F_(8390656,8,t,e)}function LO(t,e){return qI(2048,8,t,e)}function lX(t,e){return qI(4,2,t,e)}function cX(t,e){return qI(4,4,t,e)}function uX(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dX(t,e,r){return r=r!=null?r.concat([t]):null,qI(4,4,uX.bind(null,e,t),r)}function UO(){}function fX(t,e){var r=ld();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&DO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function hX(t,e){var r=ld();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&DO(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function AX(t,e,r){return Rp&21?(Zd(r,e)||(r=vW(),Gs.lanes|=r,Mp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ec=!0),t.memoizedState=r)}function ghe(t,e){var r=Fa;Fa=r!==0&&4>r?r:4,t(!0);var n=XP.transition;XP.transition={};try{t(!1),e()}finally{Fa=r,XP.transition=n}}function mX(){return ld().memoizedState}function xhe(t,e,r){var n=U0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pX(t))gX(e,r);else if(r=YW(t,e,r,n),r!==null){var a=ac();Kd(r,t,n,a),xX(r,e,n)}}function vhe(t,e,r){var n=U0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pX(t))gX(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Zd(l,o)){var c=e.interleaved;c===null?(a.next=a,BO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=YW(t,e,a,n),r!==null&&(a=ac(),Kd(r,t,n,a),xX(r,e,n))}}function pX(t){var e=t.alternate;return t===Gs||e!==null&&e===Gs}function gX(t,e){eb=kE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function xX(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gO(t,r)}}var FE={readContext:od,useCallback:Al,useContext:Al,useEffect:Al,useImperativeHandle:Al,useInsertionEffect:Al,useLayoutEffect:Al,useMemo:Al,useReducer:Al,useRef:Al,useState:Al,useDebugValue:Al,useDeferredValue:Al,useTransition:Al,useMutableSource:Al,useSyncExternalStore:Al,useId:Al,unstable_isNewReconciler:!1},yhe={readContext:od,useCallback:function(t,e){return _f().memoizedState=[t,e===void 0?null:e],t},useContext:od,useEffect:WL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,F_(4194308,4,uX.bind(null,e,t),r)},useLayoutEffect:function(t,e){return F_(4194308,4,t,e)},useInsertionEffect:function(t,e){return F_(4,2,t,e)},useMemo:function(t,e){var r=_f();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_f();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=xhe.bind(null,Gs,t),[n.memoizedState,t]},useRef:function(t){var e=_f();return t={current:t},e.memoizedState=t},useState:zL,useDebugValue:UO,useDeferredValue:function(t){return _f().memoizedState=t},useTransition:function(){var t=zL(!1),e=t[0];return t=ghe.bind(null,t[1]),_f().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Gs,a=_f();if(Ns){if(r===void 0)throw Error(vr(407));r=r()}else{if(r=e(),ko===null)throw Error(vr(349));Rp&30||rX(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,WL(aX.bind(null,n,s,t),[t]),n.flags|=2048,Wb(9,nX.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=_f(),e=ko.identifierPrefix;if(Ns){var r=Sh,n=Eh;r=(n&~(1<<32-Gd(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=qb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=phe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bhe={readContext:od,useCallback:fX,useContext:od,useEffect:LO,useImperativeHandle:dX,useInsertionEffect:lX,useLayoutEffect:cX,useMemo:hX,useReducer:YP,useRef:oX,useState:function(){return YP(zb)},useDebugValue:UO,useDeferredValue:function(t){var e=ld();return AX(e,Yi.memoizedState,t)},useTransition:function(){var t=YP(zb)[0],e=ld().memoizedState;return[t,e]},useMutableSource:eX,useSyncExternalStore:tX,useId:mX,unstable_isNewReconciler:!1},whe={readContext:od,useCallback:fX,useContext:od,useEffect:LO,useImperativeHandle:dX,useInsertionEffect:lX,useLayoutEffect:cX,useMemo:hX,useReducer:JP,useRef:oX,useState:function(){return JP(zb)},useDebugValue:UO,useDeferredValue:function(t){var e=ld();return Yi===null?e.memoizedState=t:AX(e,Yi.memoizedState,t)},useTransition:function(){var t=JP(zb)[0],e=ld().memoizedState;return[t,e]},useMutableSource:eX,useSyncExternalStore:tX,useId:mX,unstable_isNewReconciler:!1};function Od(t,e){if(t&&t.defaultProps){e=Ks({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ZB(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ks({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zI={isMounted:function(t){return(t=t._reactInternals)?Ag(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ac(),a=U0(t),s=Dh(n,a);s.payload=e,r!=null&&(s.callback=r),e=M0(t,s,a),e!==null&&(Kd(e,t,a,n),T_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ac(),a=U0(t),s=Dh(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=M0(t,s,a),e!==null&&(Kd(e,t,a,n),T_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ac(),n=U0(t),a=Dh(r,n);a.tag=2,e!=null&&(a.callback=e),e=M0(t,a,n),e!==null&&(Kd(e,t,n,r),T_(e,t,n))}};function XL(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qb(r,n)||!Qb(a,s):!0}function vX(t,e,r){var n=!1,a=Z0,s=e.contextType;return typeof s=="object"&&s!==null?s=od(s):(a=Pc(e)?Op:Rl.current,n=e.contextTypes,s=(n=n!=null)?fv(t,a):Z0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function YL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&zI.enqueueReplaceState(e,e.state,null)}function eT(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},TO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=od(s):(s=Pc(e)?Op:Rl.current,a.context=fv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ZB(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&zI.enqueueReplaceState(a,a.state,null),BE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function pv(t,e){try{var r="",n=e;do r+=Xde(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function ZP(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function tT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Nhe=typeof WeakMap=="function"?WeakMap:Map;function yX(t,e,r){r=Dh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){DE||(DE=!0,dT=n),tT(t,e)},r}function bX(t,e,r){r=Dh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){tT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){tT(t,e),typeof n!="function"&&(L0===null?L0=new Set([this]):L0.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function JL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Nhe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Rhe.bind(null,t,e,r),e.then(t,t))}function ZL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eU(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Dh(-1,1),e.tag=2,M0(r,e,1))),r.lanes|=1),t)}var Che=fA.ReactCurrentOwner,Ec=!1;function Jl(t,e,r,n){e.child=t===null?XW(e,null,r,n):Av(e,t.child,r,n)}function tU(t,e,r,n,a){r=r.render;var s=e.ref;return Yx(e,a),n=RO(t,e,r,n,s,a),r=MO(),t!==null&&!Ec?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xh(t,e,a)):(Ns&&r&&_O(e),e.flags|=1,Jl(t,e,n,a),e.child)}function rU(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!zO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,wX(t,e,s,n,a)):(t=M_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Qb,r(o,n)&&t.ref===e.ref)return Xh(t,e,a)}return e.flags|=1,t=Q0(s,n),t.ref=e.ref,t.return=e,e.child=t}function wX(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Qb(s,n)&&t.ref===e.ref)if(Ec=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Ec=!0);else return e.lanes=t.lanes,Xh(t,e,a)}return rT(t,e,r,n,a)}function NX(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rs(Dx,Zc),Zc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rs(Dx,Zc),Zc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,rs(Dx,Zc),Zc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,rs(Dx,Zc),Zc|=n;return Jl(t,e,a,r),e.child}function CX(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function rT(t,e,r,n,a){var s=Pc(r)?Op:Rl.current;return s=fv(e,s),Yx(e,a),r=RO(t,e,r,n,s,a),n=MO(),t!==null&&!Ec?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Xh(t,e,a)):(Ns&&n&&_O(e),e.flags|=1,Jl(t,e,r,a),e.child)}function nU(t,e,r,n,a){if(Pc(r)){var s=!0;EE(e)}else s=!1;if(Yx(e,a),e.stateNode===null)O_(t,e),vX(e,r,n),eT(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=od(u):(u=Pc(r)?Op:Rl.current,u=fv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&YL(e,o,n,u),c0=!1;var A=e.memoizedState;o.state=A,BE(e,n,o,a),c=e.memoizedState,l!==n||A!==c||jc.current||c0?(typeof d=="function"&&(ZB(e,r,d,n),c=e.memoizedState),(l=c0||XL(e,r,l,n,A,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,JW(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Od(e.type,l),o.props=u,f=e.pendingProps,A=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=od(c):(c=Pc(r)?Op:Rl.current,c=fv(e,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||A!==c)&&YL(e,o,n,c),c0=!1,A=e.memoizedState,o.state=A,BE(e,n,o,a);var m=e.memoizedState;l!==f||A!==m||jc.current||c0?(typeof h=="function"&&(ZB(e,r,h,n),m=e.memoizedState),(u=c0||XL(e,r,u,n,A,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),n=!1)}return nT(t,e,r,n,s,a)}function nT(t,e,r,n,a,s){CX(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&VL(e,r,!1),Xh(t,e,s);n=e.stateNode,Che.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Av(e,t.child,null,s),e.child=Av(e,null,l,s)):Jl(t,e,l,s),e.memoizedState=n.state,a&&VL(e,r,!0),e.child}function _X(t){var e=t.stateNode;e.pendingContext?QL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QL(t,e.context,!1),kO(t,e.containerInfo)}function aU(t,e,r,n,a){return hv(),SO(a),e.flags|=256,Jl(t,e,r,n),e.child}var aT={dehydrated:null,treeContext:null,retryLane:0};function sT(t){return{baseLanes:t,cachePool:null,transitions:null}}function EX(t,e,r){var n=e.pendingProps,a=Qs.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),rs(Qs,a&1),t===null)return YB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=YI(o,n,0,null),t=xp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sT(r),e.memoizedState=aT,t):QO(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return _he(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Q0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=Q0(l,s):(s=xp(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?sT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=aT,n}return s=t.child,t=s.sibling,n=Q0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function QO(t,e){return e=YI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function LN(t,e,r,n){return n!==null&&SO(n),Av(e,t.child,null,r),t=QO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _he(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=ZP(Error(vr(422))),LN(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=YI({mode:"visible",children:n.children},a,0,null),s=xp(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Av(e,t.child,null,o),e.child.memoizedState=sT(o),e.memoizedState=aT,s);if(!(e.mode&1))return LN(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(vr(419)),n=ZP(s,n,void 0),LN(t,e,o,n)}if(l=(o&t.childLanes)!==0,Ec||l){if(n=ko,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Wh(t,a),Kd(n,t,a,-1))}return qO(),n=ZP(Error(vr(421))),LN(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Mhe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,iu=R0(a.nextSibling),uu=e,Ns=!0,Rd=null,t!==null&&(qu[zu++]=Eh,qu[zu++]=Sh,qu[zu++]=Dp,Eh=t.id,Sh=t.overflow,Dp=e),e=QO(e,n.children),e.flags|=4096,e)}function sU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),JB(t.return,e,r)}function e3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function SX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Jl(t,e,n.children,r),n=Qs.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sU(t,r,e);else if(t.tag===19)sU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rs(Qs,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&TE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),e3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&TE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}e3(e,!0,r,null,s);break;case"together":e3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function O_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(vr(153));if(e.child!==null){for(t=e.child,r=Q0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Q0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Ehe(t,e,r){switch(e.tag){case 3:_X(e),hv();break;case 5:ZW(e);break;case 1:Pc(e.type)&&EE(e);break;case 4:kO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;rs(jE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(rs(Qs,Qs.current&1),e.flags|=128,null):r&e.child.childLanes?EX(t,e,r):(rs(Qs,Qs.current&1),t=Xh(t,e,r),t!==null?t.sibling:null);rs(Qs,Qs.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return SX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rs(Qs,Qs.current),n)break;return null;case 22:case 23:return e.lanes=0,NX(t,e,r)}return Xh(t,e,r)}var IX,iT,jX,PX;IX=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};iT=function(){};jX=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,lp(Rf.current);var s=null;switch(r){case"input":a=IB(t,a),n=IB(t,n),s=[];break;case"select":a=Ks({},a,{value:void 0}),n=Ks({},n,{value:void 0}),s=[];break;case"textarea":a=BB(t,a),n=BB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=CE)}kB(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&os("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};PX=function(t,e,r,n){r!==n&&(e.flags|=4)};function K1(t,e){if(!Ns)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ml(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function She(t,e,r){var n=e.pendingProps;switch(EO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ml(e),null;case 1:return Pc(e.type)&&_E(),ml(e),null;case 3:return n=e.stateNode,mv(),hs(jc),hs(Rl),OO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(RN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rd!==null&&(AT(Rd),Rd=null))),iT(t,e),ml(e),null;case 5:FO(e);var a=lp(Kb.current);if(r=e.type,t!==null&&e.stateNode!=null)jX(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(vr(166));return ml(e),null}if(t=lp(Rf.current),RN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ef]=e,n[$b]=s,t=(e.mode&1)!==0,r){case"dialog":os("cancel",n),os("close",n);break;case"iframe":case"object":case"embed":os("load",n);break;case"video":case"audio":for(a=0;a<Ey.length;a++)os(Ey[a],n);break;case"source":os("error",n);break;case"img":case"image":case"link":os("error",n),os("load",n);break;case"details":os("toggle",n);break;case"input":AL(n,s),os("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},os("invalid",n);break;case"textarea":pL(n,s),os("invalid",n)}kB(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&DN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&DN(n.textContent,l,t),a=["children",""+l]):Fb.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&os("scroll",n)}switch(r){case"input":IN(n),mL(n,s,!0);break;case"textarea":IN(n),gL(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=CE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ef]=e,t[$b]=n,IX(t,e,!1,!1),e.stateNode=t;e:{switch(o=FB(r,n),r){case"dialog":os("cancel",t),os("close",t),a=n;break;case"iframe":case"object":case"embed":os("load",t),a=n;break;case"video":case"audio":for(a=0;a<Ey.length;a++)os(Ey[a],t);a=n;break;case"source":os("error",t),a=n;break;case"img":case"image":case"link":os("error",t),os("load",t),a=n;break;case"details":os("toggle",t),a=n;break;case"input":AL(t,n),a=IB(t,n),os("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ks({},n,{value:void 0}),os("invalid",t);break;case"textarea":pL(t,n),a=BB(t,n),os("invalid",t);break;default:a=n}kB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?oW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ob(t,c):typeof c=="number"&&Ob(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&os("scroll",t):c!=null&&dO(t,s,c,o))}switch(r){case"input":IN(t),mL(t,n,!1);break;case"textarea":IN(t),gL(t);break;case"option":n.value!=null&&t.setAttribute("value",""+J0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?qx(t,!!n.multiple,s,!1):n.defaultValue!=null&&qx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=CE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ml(e),null;case 6:if(t&&e.stateNode!=null)PX(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(vr(166));if(r=lp(Kb.current),lp(Rf.current),RN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ef]=e,(s=n.nodeValue!==r)&&(t=uu,t!==null))switch(t.tag){case 3:DN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&DN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ef]=e,e.stateNode=n}return ml(e),null;case 13:if(hs(Qs),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ns&&iu!==null&&e.mode&1&&!(e.flags&128))zW(),hv(),e.flags|=98560,s=!1;else if(s=RN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(vr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(vr(317));s[Ef]=e}else hv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ml(e),s=!1}else Rd!==null&&(AT(Rd),Rd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qs.current&1?io===0&&(io=3):qO())),e.updateQueue!==null&&(e.flags|=4),ml(e),null);case 4:return mv(),iT(t,e),t===null&&Vb(e.stateNode.containerInfo),ml(e),null;case 10:return PO(e.type._context),ml(e),null;case 17:return Pc(e.type)&&_E(),ml(e),null;case 19:if(hs(Qs),s=e.memoizedState,s===null)return ml(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)K1(s,!1);else{if(io!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=TE(t),o!==null){for(e.flags|=128,K1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rs(Qs,Qs.current&1|2),e.child}t=t.sibling}s.tail!==null&&yi()>gv&&(e.flags|=128,n=!0,K1(s,!1),e.lanes=4194304)}else{if(!n)if(t=TE(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),K1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ns)return ml(e),null}else 2*yi()-s.renderingStartTime>gv&&r!==1073741824&&(e.flags|=128,n=!0,K1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yi(),e.sibling=null,r=Qs.current,rs(Qs,n?r&1|2:r&1),e):(ml(e),null);case 22:case 23:return KO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Zc&1073741824&&(ml(e),e.subtreeFlags&6&&(e.flags|=8192)):ml(e),null;case 24:return null;case 25:return null}throw Error(vr(156,e.tag))}function Ihe(t,e){switch(EO(e),e.tag){case 1:return Pc(e.type)&&_E(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mv(),hs(jc),hs(Rl),OO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FO(e),null;case 13:if(hs(Qs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(vr(340));hv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hs(Qs),null;case 4:return mv(),null;case 10:return PO(e.type._context),null;case 22:case 23:return KO(),null;case 24:return null;default:return null}}var UN=!1,Bl=!1,jhe=typeof WeakSet=="function"?WeakSet:Set,Ur=null;function Ox(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ai(t,e,n)}else r.current=null}function oT(t,e,r){try{r()}catch(n){ai(t,e,n)}}var iU=!1;function Phe(t,e){if($B=bE,t=OW(),CO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,A=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)A=f,f=h;for(;;){if(f===t)break t;if(A===r&&++u===a&&(l=o),A===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=A,A=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(GB={focusedElem:t,selectionRange:r},bE=!1,Ur=e;Ur!==null;)if(e=Ur,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ur=t;else for(;Ur!==null;){e=Ur;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:Od(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vr(163))}}catch(w){ai(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ur=t;break}Ur=e.return}return m=iU,iU=!1,m}function tb(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&oT(e,r,s)}a=a.next}while(a!==n)}}function WI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function lT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function BX(t){var e=t.alternate;e!==null&&(t.alternate=null,BX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ef],delete e[$b],delete e[zB],delete e[fhe],delete e[hhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TX(t){return t.tag===5||t.tag===3||t.tag===4}function oU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=CE));else if(n!==4&&(t=t.child,t!==null))for(cT(t,e,r),t=t.sibling;t!==null;)cT(t,e,r),t=t.sibling}function uT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(uT(t,e,r),t=t.sibling;t!==null;)uT(t,e,r),t=t.sibling}var Jo=null,Dd=!1;function GA(t,e,r){for(r=r.child;r!==null;)kX(t,e,r),r=r.sibling}function kX(t,e,r){if(Df&&typeof Df.onCommitFiberUnmount=="function")try{Df.onCommitFiberUnmount(QI,r)}catch{}switch(r.tag){case 5:Bl||Ox(r,e);case 6:var n=Jo,a=Dd;Jo=null,GA(t,e,r),Jo=n,Dd=a,Jo!==null&&(Dd?(t=Jo,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jo.removeChild(r.stateNode));break;case 18:Jo!==null&&(Dd?(t=Jo,r=r.stateNode,t.nodeType===8?qP(t.parentNode,r):t.nodeType===1&&qP(t,r),Lb(t)):qP(Jo,r.stateNode));break;case 4:n=Jo,a=Dd,Jo=r.stateNode.containerInfo,Dd=!0,GA(t,e,r),Jo=n,Dd=a;break;case 0:case 11:case 14:case 15:if(!Bl&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oT(r,e,o),a=a.next}while(a!==n)}GA(t,e,r);break;case 1:if(!Bl&&(Ox(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ai(r,e,l)}GA(t,e,r);break;case 21:GA(t,e,r);break;case 22:r.mode&1?(Bl=(n=Bl)||r.memoizedState!==null,GA(t,e,r),Bl=n):GA(t,e,r);break;default:GA(t,e,r)}}function lU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new jhe),e.forEach(function(n){var a=Lhe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ed(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Jo=l.stateNode,Dd=!1;break e;case 3:Jo=l.stateNode.containerInfo,Dd=!0;break e;case 4:Jo=l.stateNode.containerInfo,Dd=!0;break e}l=l.return}if(Jo===null)throw Error(vr(160));kX(s,o,a),Jo=null,Dd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ai(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FX(e,t),e=e.sibling}function FX(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ed(e,t),pf(t),n&4){try{tb(3,t,t.return),WI(3,t)}catch(p){ai(t,t.return,p)}try{tb(5,t,t.return)}catch(p){ai(t,t.return,p)}}break;case 1:Ed(e,t),pf(t),n&512&&r!==null&&Ox(r,r.return);break;case 5:if(Ed(e,t),pf(t),n&512&&r!==null&&Ox(r,r.return),t.flags&32){var a=t.stateNode;try{Ob(a,"")}catch(p){ai(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&rW(a,s),FB(l,o);var u=FB(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?oW(a,f):d==="dangerouslySetInnerHTML"?sW(a,f):d==="children"?Ob(a,f):dO(a,d,f,u)}switch(l){case"input":jB(a,s);break;case"textarea":nW(a,s);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?qx(a,!!s.multiple,h,!1):A!==!!s.multiple&&(s.defaultValue!=null?qx(a,!!s.multiple,s.defaultValue,!0):qx(a,!!s.multiple,s.multiple?[]:"",!1))}a[$b]=s}catch(p){ai(t,t.return,p)}}break;case 6:if(Ed(e,t),pf(t),n&4){if(t.stateNode===null)throw Error(vr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){ai(t,t.return,p)}}break;case 3:if(Ed(e,t),pf(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lb(e.containerInfo)}catch(p){ai(t,t.return,p)}break;case 4:Ed(e,t),pf(t);break;case 13:Ed(e,t),pf(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||($O=yi())),n&4&&lU(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Bl=(u=Bl)||d,Ed(e,t),Bl=u):Ed(e,t),pf(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ur=t,d=t.child;d!==null;){for(f=Ur=d;Ur!==null;){switch(A=Ur,h=A.child,A.tag){case 0:case 11:case 14:case 15:tb(4,A,A.return);break;case 1:Ox(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){n=A,r=A.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){ai(n,r,p)}}break;case 5:Ox(A,A.return);break;case 22:if(A.memoizedState!==null){uU(f);continue}}h!==null?(h.return=A,Ur=h):uU(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=iW("display",o))}catch(p){ai(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){ai(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ed(e,t),pf(t),n&4&&lU(t);break;case 21:break;default:Ed(e,t),pf(t)}}function pf(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(TX(r)){var n=r;break e}r=r.return}throw Error(vr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ob(a,""),n.flags&=-33);var s=oU(t);uT(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=oU(t);cT(t,l,o);break;default:throw Error(vr(161))}}catch(c){ai(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bhe(t,e,r){Ur=t,OX(t)}function OX(t,e,r){for(var n=(t.mode&1)!==0;Ur!==null;){var a=Ur,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||UN;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Bl;l=UN;var u=Bl;if(UN=o,(Bl=c)&&!u)for(Ur=a;Ur!==null;)o=Ur,c=o.child,o.tag===22&&o.memoizedState!==null?dU(a):c!==null?(c.return=o,Ur=c):dU(a);for(;s!==null;)Ur=s,OX(s),s=s.sibling;Ur=a,UN=l,Bl=u}cU(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Ur=s):cU(t)}}function cU(t){for(;Ur!==null;){var e=Ur;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bl||WI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Bl)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Od(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qL(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}qL(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vr(163))}Bl||e.flags&512&&lT(e)}catch(A){ai(e,e.return,A)}}if(e===t){Ur=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ur=r;break}Ur=e.return}}function uU(t){for(;Ur!==null;){var e=Ur;if(e===t){Ur=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ur=r;break}Ur=e.return}}function dU(t){for(;Ur!==null;){var e=Ur;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{WI(4,e)}catch(c){ai(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){ai(e,a,c)}}var s=e.return;try{lT(e)}catch(c){ai(e,s,c)}break;case 5:var o=e.return;try{lT(e)}catch(c){ai(e,o,c)}}}catch(c){ai(e,e.return,c)}if(e===t){Ur=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ur=l;break}Ur=e.return}}var The=Math.ceil,OE=fA.ReactCurrentDispatcher,VO=fA.ReactCurrentOwner,rd=fA.ReactCurrentBatchConfig,ta=0,ko=null,Oi=null,cl=0,Zc=0,Dx=gm(0),io=0,Xb=null,Mp=0,XI=0,HO=0,rb=null,Cc=null,$O=0,gv=1/0,yh=null,DE=!1,dT=null,L0=null,QN=!1,_0=null,RE=0,nb=0,fT=null,D_=-1,R_=0;function ac(){return ta&6?yi():D_!==-1?D_:D_=yi()}function U0(t){return t.mode&1?ta&2&&cl!==0?cl&-cl:mhe.transition!==null?(R_===0&&(R_=vW()),R_):(t=Fa,t!==0||(t=window.event,t=t===void 0?16:EW(t.type)),t):1}function Kd(t,e,r,n){if(50<nb)throw nb=0,fT=null,Error(vr(185));rw(t,r,n),(!(ta&2)||t!==ko)&&(t===ko&&(!(ta&2)&&(XI|=r),io===4&&m0(t,cl)),Bc(t,n),r===1&&ta===0&&!(e.mode&1)&&(gv=yi()+500,KI&&xm()))}function Bc(t,e){var r=t.callbackNode;mfe(t,e);var n=yE(t,t===ko?cl:0);if(n===0)r!==null&&yL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&yL(r),e===1)t.tag===0?Ahe(fU.bind(null,t)):GW(fU.bind(null,t)),uhe(function(){!(ta&6)&&xm()}),r=null;else{switch(yW(n)){case 1:r=pO;break;case 4:r=gW;break;case 16:r=vE;break;case 536870912:r=xW;break;default:r=vE}r=HX(r,DX.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function DX(t,e){if(D_=-1,R_=0,ta&6)throw Error(vr(327));var r=t.callbackNode;if(Jx()&&t.callbackNode!==r)return null;var n=yE(t,t===ko?cl:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ME(t,n);else{e=n;var a=ta;ta|=2;var s=MX();(ko!==t||cl!==e)&&(yh=null,gv=yi()+500,gp(t,e));do try{Ohe();break}catch(l){RX(t,l)}while(!0);jO(),OE.current=s,ta=a,Oi!==null?e=0:(ko=null,cl=0,e=io)}if(e!==0){if(e===2&&(a=LB(t),a!==0&&(n=a,e=hT(t,a))),e===1)throw r=Xb,gp(t,0),m0(t,n),Bc(t,yi()),r;if(e===6)m0(t,n);else{if(a=t.current.alternate,!(n&30)&&!khe(a)&&(e=ME(t,n),e===2&&(s=LB(t),s!==0&&(n=s,e=hT(t,s))),e===1))throw r=Xb,gp(t,0),m0(t,n),Bc(t,yi()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(vr(345));case 2:$m(t,Cc,yh);break;case 3:if(m0(t,n),(n&130023424)===n&&(e=$O+500-yi(),10<e)){if(yE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){ac(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=qB($m.bind(null,t,Cc,yh),e);break}$m(t,Cc,yh);break;case 4:if(m0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-Gd(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=yi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*The(n/1960))-n,10<n){t.timeoutHandle=qB($m.bind(null,t,Cc,yh),n);break}$m(t,Cc,yh);break;case 5:$m(t,Cc,yh);break;default:throw Error(vr(329))}}}return Bc(t,yi()),t.callbackNode===r?DX.bind(null,t):null}function hT(t,e){var r=rb;return t.current.memoizedState.isDehydrated&&(gp(t,e).flags|=256),t=ME(t,e),t!==2&&(e=Cc,Cc=r,e!==null&&AT(e)),t}function AT(t){Cc===null?Cc=t:Cc.push.apply(Cc,t)}function khe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Zd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function m0(t,e){for(e&=~HO,e&=~XI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Gd(e),n=1<<r;t[r]=-1,e&=~n}}function fU(t){if(ta&6)throw Error(vr(327));Jx();var e=yE(t,0);if(!(e&1))return Bc(t,yi()),null;var r=ME(t,e);if(t.tag!==0&&r===2){var n=LB(t);n!==0&&(e=n,r=hT(t,n))}if(r===1)throw r=Xb,gp(t,0),m0(t,e),Bc(t,yi()),r;if(r===6)throw Error(vr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$m(t,Cc,yh),Bc(t,yi()),null}function GO(t,e){var r=ta;ta|=1;try{return t(e)}finally{ta=r,ta===0&&(gv=yi()+500,KI&&xm())}}function Lp(t){_0!==null&&_0.tag===0&&!(ta&6)&&Jx();var e=ta;ta|=1;var r=rd.transition,n=Fa;try{if(rd.transition=null,Fa=1,t)return t()}finally{Fa=n,rd.transition=r,ta=e,!(ta&6)&&xm()}}function KO(){Zc=Dx.current,hs(Dx)}function gp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,che(r)),Oi!==null)for(r=Oi.return;r!==null;){var n=r;switch(EO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_E();break;case 3:mv(),hs(jc),hs(Rl),OO();break;case 5:FO(n);break;case 4:mv();break;case 13:hs(Qs);break;case 19:hs(Qs);break;case 10:PO(n.type._context);break;case 22:case 23:KO()}r=r.return}if(ko=t,Oi=t=Q0(t.current,null),cl=Zc=e,io=0,Xb=null,HO=XI=Mp=0,Cc=rb=null,op!==null){for(e=0;e<op.length;e++)if(r=op[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}op=null}return t}function RX(t,e){do{var r=Oi;try{if(jO(),k_.current=FE,kE){for(var n=Gs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}kE=!1}if(Rp=0,Io=Yi=Gs=null,eb=!1,qb=0,VO.current=null,r===null||r.return===null){io=1,Xb=e,Oi=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=cl,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var A=d.alternate;A?(d.updateQueue=A.updateQueue,d.memoizedState=A.memoizedState,d.lanes=A.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ZL(o);if(h!==null){h.flags&=-257,eU(h,o,l,s,e),h.mode&1&&JL(s,u,e),e=h,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){JL(s,u,e),qO();break e}c=Error(vr(426))}}else if(Ns&&l.mode&1){var g=ZL(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),eU(g,o,l,s,e),SO(pv(c,l));break e}}s=c=pv(c,l),io!==4&&(io=2),rb===null?rb=[s]:rb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=yX(s,c,e);KL(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(L0===null||!L0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=bX(s,l,e);KL(s,w);break e}}s=s.return}while(s!==null)}UX(r)}catch(j){e=j,Oi===r&&r!==null&&(Oi=r=r.return);continue}break}while(!0)}function MX(){var t=OE.current;return OE.current=FE,t===null?FE:t}function qO(){(io===0||io===3||io===2)&&(io=4),ko===null||!(Mp&268435455)&&!(XI&268435455)||m0(ko,cl)}function ME(t,e){var r=ta;ta|=2;var n=MX();(ko!==t||cl!==e)&&(yh=null,gp(t,e));do try{Fhe();break}catch(a){RX(t,a)}while(!0);if(jO(),ta=r,OE.current=n,Oi!==null)throw Error(vr(261));return ko=null,cl=0,io}function Fhe(){for(;Oi!==null;)LX(Oi)}function Ohe(){for(;Oi!==null&&!ife();)LX(Oi)}function LX(t){var e=VX(t.alternate,t,Zc);t.memoizedProps=t.pendingProps,e===null?UX(t):Oi=e,VO.current=null}function UX(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ihe(r,e),r!==null){r.flags&=32767,Oi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{io=6,Oi=null;return}}else if(r=She(r,e,Zc),r!==null){Oi=r;return}if(e=e.sibling,e!==null){Oi=e;return}Oi=e=t}while(e!==null);io===0&&(io=5)}function $m(t,e,r){var n=Fa,a=rd.transition;try{rd.transition=null,Fa=1,Dhe(t,e,r,n)}finally{rd.transition=a,Fa=n}return null}function Dhe(t,e,r,n){do Jx();while(_0!==null);if(ta&6)throw Error(vr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(vr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(pfe(t,s),t===ko&&(Oi=ko=null,cl=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||QN||(QN=!0,HX(vE,function(){return Jx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=rd.transition,rd.transition=null;var o=Fa;Fa=1;var l=ta;ta|=4,VO.current=null,Phe(t,r),FX(r,t),rhe(GB),bE=!!$B,GB=$B=null,t.current=r,Bhe(r),ofe(),ta=l,Fa=o,rd.transition=s}else t.current=r;if(QN&&(QN=!1,_0=t,RE=a),s=t.pendingLanes,s===0&&(L0=null),ufe(r.stateNode),Bc(t,yi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(DE)throw DE=!1,t=dT,dT=null,t;return RE&1&&t.tag!==0&&Jx(),s=t.pendingLanes,s&1?t===fT?nb++:(nb=0,fT=t):nb=0,xm(),null}function Jx(){if(_0!==null){var t=yW(RE),e=rd.transition,r=Fa;try{if(rd.transition=null,Fa=16>t?16:t,_0===null)var n=!1;else{if(t=_0,_0=null,RE=0,ta&6)throw Error(vr(331));var a=ta;for(ta|=4,Ur=t.current;Ur!==null;){var s=Ur,o=s.child;if(Ur.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ur=u;Ur!==null;){var d=Ur;switch(d.tag){case 0:case 11:case 15:tb(8,d,s)}var f=d.child;if(f!==null)f.return=d,Ur=f;else for(;Ur!==null;){d=Ur;var A=d.sibling,h=d.return;if(BX(d),d===u){Ur=null;break}if(A!==null){A.return=h,Ur=A;break}Ur=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Ur=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ur=o;else e:for(;Ur!==null;){if(s=Ur,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tb(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ur=x;break e}Ur=s.return}}var y=t.current;for(Ur=y;Ur!==null;){o=Ur;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ur=b;else e:for(o=y;Ur!==null;){if(l=Ur,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:WI(9,l)}}catch(j){ai(l,l.return,j)}if(l===o){Ur=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Ur=w;break e}Ur=l.return}}if(ta=a,xm(),Df&&typeof Df.onPostCommitFiberRoot=="function")try{Df.onPostCommitFiberRoot(QI,t)}catch{}n=!0}return n}finally{Fa=r,rd.transition=e}}return!1}function hU(t,e,r){e=pv(r,e),e=yX(t,e,1),t=M0(t,e,1),e=ac(),t!==null&&(rw(t,1,e),Bc(t,e))}function ai(t,e,r){if(t.tag===3)hU(t,t,r);else for(;e!==null;){if(e.tag===3){hU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(L0===null||!L0.has(n))){t=pv(r,t),t=bX(e,t,1),e=M0(e,t,1),t=ac(),e!==null&&(rw(e,1,t),Bc(e,t));break}}e=e.return}}function Rhe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ac(),t.pingedLanes|=t.suspendedLanes&r,ko===t&&(cl&r)===r&&(io===4||io===3&&(cl&130023424)===cl&&500>yi()-$O?gp(t,0):HO|=r),Bc(t,e)}function QX(t,e){e===0&&(t.mode&1?(e=BN,BN<<=1,!(BN&130023424)&&(BN=4194304)):e=1);var r=ac();t=Wh(t,e),t!==null&&(rw(t,e,r),Bc(t,r))}function Mhe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),QX(t,r)}function Lhe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(vr(314))}n!==null&&n.delete(e),QX(t,r)}var VX;VX=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||jc.current)Ec=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ec=!1,Ehe(t,e,r);Ec=!!(t.flags&131072)}else Ec=!1,Ns&&e.flags&1048576&&KW(e,IE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;O_(t,e),t=e.pendingProps;var a=fv(e,Rl.current);Yx(e,r),a=RO(null,e,n,t,a,r);var s=MO();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pc(n)?(s=!0,EE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,TO(e),a.updater=zI,e.stateNode=a,a._reactInternals=e,eT(e,n,t,r),e=nT(null,e,n,!0,s,r)):(e.tag=0,Ns&&s&&_O(e),Jl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(O_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Qhe(n),t=Od(n,t),a){case 0:e=rT(null,e,n,t,r);break e;case 1:e=nU(null,e,n,t,r);break e;case 11:e=tU(null,e,n,t,r);break e;case 14:e=rU(null,e,n,Od(n.type,t),r);break e}throw Error(vr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Od(n,a),rT(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Od(n,a),nU(t,e,n,a,r);case 3:e:{if(_X(e),t===null)throw Error(vr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,JW(t,e),BE(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=pv(Error(vr(423)),e),e=aU(t,e,n,r,a);break e}else if(n!==a){a=pv(Error(vr(424)),e),e=aU(t,e,n,r,a);break e}else for(iu=R0(e.stateNode.containerInfo.firstChild),uu=e,Ns=!0,Rd=null,r=XW(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hv(),n===a){e=Xh(t,e,r);break e}Jl(t,e,n,r)}e=e.child}return e;case 5:return ZW(e),t===null&&YB(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,KB(n,a)?o=null:s!==null&&KB(n,s)&&(e.flags|=32),CX(t,e),Jl(t,e,o,r),e.child;case 6:return t===null&&YB(e),null;case 13:return EX(t,e,r);case 4:return kO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Av(e,null,n,r):Jl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Od(n,a),tU(t,e,n,a,r);case 7:return Jl(t,e,e.pendingProps,r),e.child;case 8:return Jl(t,e,e.pendingProps.children,r),e.child;case 12:return Jl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,rs(jE,n._currentValue),n._currentValue=o,s!==null)if(Zd(s.value,o)){if(s.children===a.children&&!jc.current){e=Xh(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Dh(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),JB(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(vr(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),JB(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Yx(e,r),a=od(a),n=n(a),e.flags|=1,Jl(t,e,n,r),e.child;case 14:return n=e.type,a=Od(n,e.pendingProps),a=Od(n.type,a),rU(t,e,n,a,r);case 15:return wX(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Od(n,a),O_(t,e),e.tag=1,Pc(n)?(t=!0,EE(e)):t=!1,Yx(e,r),vX(e,n,a),eT(e,n,a,r),nT(null,e,n,!0,t,r);case 19:return SX(t,e,r);case 22:return NX(t,e,r)}throw Error(vr(156,e.tag))};function HX(t,e){return pW(t,e)}function Uhe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xu(t,e,r,n){return new Uhe(t,e,r,n)}function zO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qhe(t){if(typeof t=="function")return zO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hO)return 11;if(t===AO)return 14}return 2}function Q0(t,e){var r=t.alternate;return r===null?(r=Xu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function M_(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")zO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ex:return xp(r.children,a,s,e);case fO:o=8,a|=8;break;case CB:return t=Xu(12,r,e,a|2),t.elementType=CB,t.lanes=s,t;case _B:return t=Xu(13,r,e,a),t.elementType=_B,t.lanes=s,t;case EB:return t=Xu(19,r,e,a),t.elementType=EB,t.lanes=s,t;case Zz:return YI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yz:o=10;break e;case Jz:o=9;break e;case hO:o=11;break e;case AO:o=14;break e;case l0:o=16,n=null;break e}throw Error(vr(130,t==null?t:typeof t,""))}return e=Xu(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function xp(t,e,r,n){return t=Xu(7,t,n,e),t.lanes=r,t}function YI(t,e,r,n){return t=Xu(22,t,n,e),t.elementType=Zz,t.lanes=r,t.stateNode={isHidden:!1},t}function t3(t,e,r){return t=Xu(6,t,null,e),t.lanes=r,t}function r3(t,e,r){return e=Xu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vhe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DP(0),this.expirationTimes=DP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DP(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function WO(t,e,r,n,a,s,o,l,c){return t=new Vhe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},TO(s),t}function Hhe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_x,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $X(t){if(!t)return Z0;t=t._reactInternals;e:{if(Ag(t)!==t||t.tag!==1)throw Error(vr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(vr(171))}if(t.tag===1){var r=t.type;if(Pc(r))return $W(t,r,e)}return e}function GX(t,e,r,n,a,s,o,l,c){return t=WO(r,n,!0,t,a,s,o,l,c),t.context=$X(null),r=t.current,n=ac(),a=U0(r),s=Dh(n,a),s.callback=e??null,M0(r,s,a),t.current.lanes=a,rw(t,a,n),Bc(t,n),t}function JI(t,e,r,n){var a=e.current,s=ac(),o=U0(a);return r=$X(r),e.context===null?e.context=r:e.pendingContext=r,e=Dh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=M0(a,e,o),t!==null&&(Kd(t,a,o,s),T_(t,a,o)),o}function LE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function XO(t,e){AU(t,e),(t=t.alternate)&&AU(t,e)}function $he(){return null}var KX=typeof reportError=="function"?reportError:function(t){console.error(t)};function YO(t){this._internalRoot=t}ZI.prototype.render=YO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(vr(409));JI(t,e,null,null)};ZI.prototype.unmount=YO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lp(function(){JI(null,t,null,null)}),e[zh]=null}};function ZI(t){this._internalRoot=t}ZI.prototype.unstable_scheduleHydration=function(t){if(t){var e=NW();t={blockedOn:null,target:t,priority:e};for(var r=0;r<A0.length&&e!==0&&e<A0[r].priority;r++);A0.splice(r,0,t),r===0&&_W(t)}};function JO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ej(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mU(){}function Ghe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=LE(o);s.call(u)}}var o=GX(e,n,t,0,null,!1,!1,"",mU);return t._reactRootContainer=o,t[zh]=o.current,Vb(t.nodeType===8?t.parentNode:t),Lp(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=LE(c);l.call(u)}}var c=WO(t,0,!1,null,null,!1,!1,"",mU);return t._reactRootContainer=c,t[zh]=c.current,Vb(t.nodeType===8?t.parentNode:t),Lp(function(){JI(e,c,r,n)}),c}function tj(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=LE(o);l.call(c)}}JI(e,o,t,a)}else o=Ghe(r,e,t,a,n);return LE(o)}bW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_y(e.pendingLanes);r!==0&&(gO(e,r|1),Bc(e,yi()),!(ta&6)&&(gv=yi()+500,xm()))}break;case 13:Lp(function(){var n=Wh(t,1);if(n!==null){var a=ac();Kd(n,t,1,a)}}),XO(t,1)}};xO=function(t){if(t.tag===13){var e=Wh(t,134217728);if(e!==null){var r=ac();Kd(e,t,134217728,r)}XO(t,134217728)}};wW=function(t){if(t.tag===13){var e=U0(t),r=Wh(t,e);if(r!==null){var n=ac();Kd(r,t,e,n)}XO(t,e)}};NW=function(){return Fa};CW=function(t,e){var r=Fa;try{return Fa=t,e()}finally{Fa=r}};DB=function(t,e,r){switch(e){case"input":if(jB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=GI(n);if(!a)throw Error(vr(90));tW(n),jB(n,a)}}}break;case"textarea":nW(t,r);break;case"select":e=r.value,e!=null&&qx(t,!!r.multiple,e,!1)}};uW=GO;dW=Lp;var Khe={usingClientEntryPoint:!1,Events:[aw,Px,GI,lW,cW,GO]},q1={findFiberByHostInstance:ip,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qhe={bundleType:q1.bundleType,version:q1.version,rendererPackageName:q1.rendererPackageName,rendererConfig:q1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AW(t),t===null?null:t.stateNode},findFiberByHostInstance:q1.findFiberByHostInstance||$he,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var VN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!VN.isDisabled&&VN.supportsFiber)try{QI=VN.inject(qhe),Df=VN}catch{}}xu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Khe;xu.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JO(e))throw Error(vr(200));return Hhe(t,e,null,r)};xu.createRoot=function(t,e){if(!JO(t))throw Error(vr(299));var r=!1,n="",a=KX;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=WO(t,1,!1,null,null,r,!1,n,a),t[zh]=e.current,Vb(t.nodeType===8?t.parentNode:t),new YO(e)};xu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(vr(188)):(t=Object.keys(t).join(","),Error(vr(268,t)));return t=AW(e),t=t===null?null:t.stateNode,t};xu.flushSync=function(t){return Lp(t)};xu.hydrate=function(t,e,r){if(!ej(e))throw Error(vr(200));return tj(null,t,e,!0,r)};xu.hydrateRoot=function(t,e,r){if(!JO(t))throw Error(vr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=KX;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=GX(e,null,t,1,r??null,a,!1,s,o),t[zh]=e.current,Vb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new ZI(e)};xu.render=function(t,e,r){if(!ej(e))throw Error(vr(200));return tj(null,t,e,!1,r)};xu.unmountComponentAtNode=function(t){if(!ej(t))throw Error(vr(40));return t._reactRootContainer?(Lp(function(){tj(null,null,t,!1,function(){t._reactRootContainer=null,t[zh]=null})}),!0):!1};xu.unstable_batchedUpdates=GO;xu.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ej(r))throw Error(vr(200));if(t==null||t._reactInternals===void 0)throw Error(vr(38));return tj(t,e,r,!1,n)};xu.version="18.3.1-next-f1338f8080-20240426";function qX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qX)}catch(t){console.error(t)}}qX(),qz.exports=xu;var du=qz.exports,pU=du;wB.createRoot=pU.createRoot,wB.hydrateRoot=pU.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gU="popstate";function zhe(t={}){function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return mT("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Yb(a)}return Xhe(e,r,null,t)}function Is(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ef(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Whe(){return Math.random().toString(36).substring(2,10)}function xU(t,e){return{usr:t.state,key:t.key,idx:e}}function mT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gv(e):e,state:r,key:e&&e.key||n||Whe()}}function Yb({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Gv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Xhe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function A(g,x){l="PUSH";let y=mT(p.location,g,x);u=d()+1;let b=xU(y,u),w=p.createHref(y);try{o.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function h(g,x){l="REPLACE";let y=mT(p.location,g,x);u=d();let b=xU(y,u),w=p.createHref(y);o.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return Yhe(g)}let p={get action(){return l},get location(){return t(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(gU,f),c=g,()=>{a.removeEventListener(gU,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:A,replace:h,go(g){return o.go(g)}};return p}function Yhe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Is(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Yb(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function zX(t,e,r="/"){return Jhe(t,e,r,!1)}function Jhe(t,e,r,n){let a=typeof e=="string"?Gv(e):e,s=Yh(a.pathname||"/",r);if(s==null)return null;let o=WX(t);Zhe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=uAe(s);l=lAe(o[c],u,n)}return l}function WX(t,e=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Is(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Rh([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(Is(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),WX(o.children,e,A,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:iAe(f,o.index),routesMeta:A})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of XX(o.path))s(o,l,!0,u)}),e}function XX(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=XX(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Zhe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:oAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var eAe=/^:[\w-]+$/,tAe=3,rAe=2,nAe=1,aAe=10,sAe=-2,vU=t=>t==="*";function iAe(t,e){let r=t.split("/"),n=r.length;return r.some(vU)&&(n+=sAe),e&&(n+=rAe),r.filter(a=>!vU(a)).reduce((a,s)=>a+(eAe.test(s)?tAe:s===""?nAe:aAe),n)}function oAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function lAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=UE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=UE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Rh([s,f.pathname]),pathnameBase:AAe(Rh([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=Rh([s,f.pathnameBase]))}return o}function UE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=cAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let m=l[A]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[A];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function cAe(t,e=!1,r=!0){ef(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function uAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ef(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function dAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Gv(t):t;return{pathname:r?r.startsWith("/")?r:fAe(r,e):e,search:mAe(n),hash:pAe(a)}}function fAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function n3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZO(t){let e=hAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function eD(t,e,r,n=!1){let a;typeof t=="string"?a=Gv(t):(a={...t},Is(!a.pathname||!a.pathname.includes("?"),n3("?","pathname","search",a)),Is(!a.pathname||!a.pathname.includes("#"),n3("#","pathname","hash",a)),Is(!a.search||!a.search.includes("#"),n3("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;a.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=dAe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Rh=t=>t.join("/").replace(/\/\/+/g,"/"),AAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YX=["POST","PUT","PATCH","DELETE"];new Set(YX);var xAe=["GET",...YX];new Set(xAe);var Kv=v.createContext(null);Kv.displayName="DataRouter";var rj=v.createContext(null);rj.displayName="DataRouterState";v.createContext(!1);var JX=v.createContext({isTransitioning:!1});JX.displayName="ViewTransition";var vAe=v.createContext(new Map);vAe.displayName="Fetchers";var yAe=v.createContext(null);yAe.displayName="Await";var af=v.createContext(null);af.displayName="Navigation";var iw=v.createContext(null);iw.displayName="Location";var sf=v.createContext({outlet:null,matches:[],isDataRoute:!1});sf.displayName="Route";var tD=v.createContext(null);tD.displayName="RouteError";function bAe(t,{relative:e}={}){Is(qv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(af),{hash:a,pathname:s,search:o}=lw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:Rh([r,s])),n.createHref({pathname:l,search:o,hash:a})}function qv(){return v.useContext(iw)!=null}function hA(){return Is(qv(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(iw).location}var ZX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eY(t){v.useContext(af).static||v.useLayoutEffect(t)}function ow(){let{isDataRoute:t}=v.useContext(sf);return t?DAe():wAe()}function wAe(){Is(qv(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Kv),{basename:e,navigator:r}=v.useContext(af),{matches:n}=v.useContext(sf),{pathname:a}=hA(),s=JSON.stringify(ZO(n)),o=v.useRef(!1);return eY(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(ef(o.current,ZX),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=eD(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var NAe=v.createContext(null);function CAe(t){let e=v.useContext(sf).outlet;return e&&v.createElement(NAe.Provider,{value:t},e)}function lw(t,{relative:e}={}){let{matches:r}=v.useContext(sf),{pathname:n}=hA(),a=JSON.stringify(ZO(r));return v.useMemo(()=>eD(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function _Ae(t,e){return tY(t,e)}function tY(t,e,r,n){var x;Is(qv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(af),{matches:s}=v.useContext(sf),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";rY(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=hA(),A;if(e){let y=typeof e=="string"?Gv(e):e;Is(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=f;let h=A.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=zX(t,{pathname:m});ef(d||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ef(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=PAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Rh([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Rh([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(iw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},g):g}function EAe(){let t=OAe(),e=gAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,o)}var SAe=v.createElement(EAe,null),IAe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(sf.Provider,{value:this.props.routeContext},v.createElement(tD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jAe({routeContext:t,match:e,children:r}){let n=v.useContext(Kv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(sf.Provider,{value:t},r)}function PAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Is(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,A=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||A){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,A=!1,h=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||SAe,o&&(l<0&&d===0?(rY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,m=null):l===d&&(A=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return f?x=h:A?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(jAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(IAe,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function rD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BAe(t){let e=v.useContext(Kv);return Is(e,rD(t)),e}function TAe(t){let e=v.useContext(rj);return Is(e,rD(t)),e}function kAe(t){let e=v.useContext(sf);return Is(e,rD(t)),e}function nD(t){let e=kAe(t),r=e.matches[e.matches.length-1];return Is(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function FAe(){return nD("useRouteId")}function OAe(){var n;let t=v.useContext(tD),e=TAe("useRouteError"),r=nD("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function DAe(){let{router:t}=BAe("useNavigate"),e=nD("useNavigate"),r=v.useRef(!1);return eY(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{ef(r.current,ZX),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var yU={};function rY(t,e,r){!e&&!yU[t]&&(yU[t]=!0,ef(!1,r))}v.memo(RAe);function RAe({routes:t,future:e,state:r}){return tY(t,void 0,r,e)}function xh({to:t,replace:e,state:r,relative:n}){Is(qv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(af);ef(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(sf),{pathname:o}=hA(),l=ow(),c=eD(t,ZO(s),o,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function nY(t){return CAe(t.context)}function wn(t){Is(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Is(!qv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=Gv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:A="default"}=r,h=v.useMemo(()=>{let m=Yh(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:A},navigationType:n}},[o,c,u,d,f,A,n]);return ef(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:v.createElement(af.Provider,{value:l},v.createElement(iw.Provider,{children:e,value:h}))}function LAe({children:t,location:e}){return _Ae(pT(t),e)}function pT(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,pT(n.props.children,s));return}Is(n.type===wn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Is(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=pT(n.props.children,s)),r.push(o)}),r}var L_="get",U_="application/x-www-form-urlencoded";function nj(t){return t!=null&&typeof t.tagName=="string"}function UAe(t){return nj(t)&&t.tagName.toLowerCase()==="button"}function QAe(t){return nj(t)&&t.tagName.toLowerCase()==="form"}function VAe(t){return nj(t)&&t.tagName.toLowerCase()==="input"}function HAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $Ae(t,e){return t.button===0&&(!e||e==="_self")&&!HAe(t)}var HN=null;function GAe(){if(HN===null)try{new FormData(document.createElement("form"),0),HN=!1}catch{HN=!0}return HN}var KAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function a3(t){return t!=null&&!KAe.has(t)?(ef(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${U_}"`),null):t}function qAe(t,e){let r,n,a,s,o;if(QAe(t)){let l=t.getAttribute("action");n=l?Yh(l,e):null,r=t.getAttribute("method")||L_,a=a3(t.getAttribute("enctype"))||U_,s=new FormData(t)}else if(UAe(t)||VAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Yh(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||L_,a=a3(t.getAttribute("formenctype"))||a3(l.getAttribute("enctype"))||U_,s=new FormData(l,t),!GAe()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else u&&s.append(u,f)}}else{if(nj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=L_,n=null,a=U_,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function aD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zAe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Yh(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function WAe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XAe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function YAe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await WAe(s,r);return o.links?o.links():[]}return[]}));return t0e(n.flat(1).filter(XAe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function bU(t,e,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function JAe(t,e,{includeHydrateFallback:r}={}){return ZAe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function ZAe(t){return[...new Set(t)]}function e0e(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function t0e(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(e0e(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function aY(){let t=v.useContext(Kv);return aD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function r0e(){let t=v.useContext(rj);return aD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sD=v.createContext(void 0);sD.displayName="FrameworkContext";function sY(){let t=v.useContext(sD);return aD(t,"You must render this element inside a <HydratedRouter> element"),t}function n0e(t,e){let r=v.useContext(sD),[n,a]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=x=>{x.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return A.current&&g.observe(A.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:z1(l,h),onBlur:z1(c,m),onMouseEnter:z1(u,h),onMouseLeave:z1(d,m),onTouchStart:z1(f,h)}]:[!1,A,{}]}function z1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function a0e({page:t,...e}){let{router:r}=aY(),n=v.useMemo(()=>zX(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(i0e,{page:t,matches:n,...e}):null}function s0e(t){let{manifest:e,routeModules:r}=sY(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return YAe(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function i0e({page:t,matches:e,...r}){let n=hA(),{manifest:a,routeModules:s}=sY(),{basename:o}=aY(),{loaderData:l,matches:c}=r0e(),u=v.useMemo(()=>bU(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>bU(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=zAe(t,o,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[o,l,n,a,u,e,t,s]),A=v.useMemo(()=>JAe(d,a),[d,a]),h=s0e(d);return v.createElement(v.Fragment,null,f.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),A.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function o0e(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var iY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iY&&(window.__reactRouterVersion="7.8.1")}catch{}function l0e({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=zhe({window:r,v5Compat:!0}));let a=n.current,[s,o]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(MAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var oY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lY=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...A},h){let{basename:m}=v.useContext(af),p=typeof u=="string"&&oY.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,iY))try{let E=new URL(window.location.href),F=u.startsWith("//")?new URL(E.protocol+u):new URL(u),P=Yh(F.pathname,m);F.origin===E.origin&&P!=null?u=P+F.search+F.hash:x=!0}catch{ef(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=bAe(u,{relative:a}),[b,w,j]=n0e(n,A),I=d0e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||I(E)}let S=v.createElement("a",{...A,...j,href:g||y,onClick:x||s?e:_,ref:o0e(h,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,S,v.createElement(a0e,{page:y})):S});lY.displayName="Link";var on=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let f=lw(o,{relative:u.relative}),A=hA(),h=v.useContext(rj),{navigator:m,basename:p}=v.useContext(af),g=h!=null&&p0e(f)&&l===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=A.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=Yh(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",I=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),_={isActive:j,isPending:I,isTransitioning:g},S=j?e:void 0,E;typeof n=="function"?E=n(_):E=[n,j?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(_):s;return v.createElement(lY,{...u,"aria-current":S,className:E,ref:d,style:F,to:o,viewTransition:l},typeof c=="function"?c(_):c)});on.displayName="NavLink";var c0e=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=L_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...A},h)=>{let m=A0e(),p=m0e(l,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&oY.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||o;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:h,method:g,action:p,onSubmit:n?c:y,...A,"data-discover":!x&&t==="render"?"true":void 0})});c0e.displayName="Form";function u0e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cY(t){let e=v.useContext(Kv);return Is(e,u0e(t)),e}function d0e(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=ow(),c=hA(),u=lw(t,{relative:s});return v.useCallback(d=>{if($Ae(d,e)){d.preventDefault();let f=r!==void 0?r:Yb(c)===Yb(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,e,t,a,s,o])}var f0e=0,h0e=()=>`__${String(++f0e)}__`;function A0e(){let{router:t}=cY("useSubmit"),{basename:e}=v.useContext(af),r=FAe();return v.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=qAe(n,e);if(a.navigate===!1){let d=a.fetcherKey||h0e();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function m0e(t,{relative:e}={}){let{basename:r}=v.useContext(af),n=v.useContext(sf);Is(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...lw(t||".",{relative:e})},o=hA();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Rh([r,s.pathname])),Yb(s)}function p0e(t,{relative:e}={}){let r=v.useContext(JX);Is(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cY("useViewTransitionState"),a=lw(t,{relative:e});if(!r.isTransitioning)return!1;let s=Yh(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Yh(r.nextLocation.pathname,n)||r.nextLocation.pathname;return UE(a.pathname,o)!=null||UE(a.pathname,s)!=null}function ln(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var wU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uY=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},g0e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g0e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new x0e;const A=s<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v0e=function(t){const e=uY(t);return dY.encodeByteArray(e,!0)},QE=function(t){return v0e(t).replace(/\./g,"")},fY=function(t){try{return dY.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0e=()=>y0e().__FIREBASE_DEFAULTS__,w0e=()=>{if(typeof process>"u"||typeof wU>"u")return;const t=wU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},N0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fY(t[1]);return e&&JSON.parse(e)},aj=()=>{try{return b0e()||w0e()||N0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hY=t=>{var e,r;return(r=(e=aj())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},C0e=t=>{const e=hY(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},AY=()=>{var t;return(t=aj())===null||t===void 0?void 0:t.config},mY=t=>{var e;return(e=aj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0e(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[QE(JSON.stringify(r)),QE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lo())}function I0e(){var t;const e=(t=aj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P0e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function B0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T0e(){const t=lo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pY(){return!I0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gY(){try{return typeof indexedDB=="object"}catch{return!1}}function k0e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0e="FirebaseError";class AA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=F0e,Object.setPrototypeOf(this,AA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cw.prototype.create)}}class cw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?O0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new AA(a,l,n)}}function O0e(t,e){return t.replace(D0e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const D0e=/\{\$([^}]+)}/g;function R0e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jb(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(NU(s)&&NU(o)){if(!Jb(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function NU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Sy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Iy(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function M0e(t,e){const r=new L0e(t,e);return r.subscribe.bind(r)}class L0e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");U0e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=s3),a.error===void 0&&(a.error=s3),a.complete===void 0&&(a.complete=s3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U0e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function s3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){return t&&t._delegate?t._delegate:t}class Up{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q0e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new _0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H0e(e))try{this.getOrInitializeService({instanceIdentifier:Gm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Gm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gm){return this.instances.has(e)}getOptions(e=Gm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:V0e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Gm){return this.component?this.component.multipleInstances?e:Gm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function V0e(t){return t===Gm?void 0:t}function H0e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Q0e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gn||(Gn={}));const G0e={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},K0e=Gn.INFO,q0e={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},z0e=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=q0e[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let iD=class{constructor(e){this.name=e,this._logLevel=K0e,this._logHandler=z0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G0e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...e),this._logHandler(this,Gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...e),this._logHandler(this,Gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...e),this._logHandler(this,Gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...e),this._logHandler(this,Gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...e),this._logHandler(this,Gn.ERROR,...e)}};const W0e=(t,e)=>e.some(r=>t instanceof r);let CU,_U;function X0e(){return CU||(CU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y0e(){return _U||(_U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xY=new WeakMap,gT=new WeakMap,vY=new WeakMap,i3=new WeakMap,oD=new WeakMap;function J0e(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(V0(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&xY.set(r,t)}).catch(()=>{}),oD.set(e,t),e}function Z0e(t){if(gT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gT.set(t,e)}let xT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return gT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vY.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return V0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eme(t){xT=t(xT)}function tme(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(o3(this),e,...r);return vY.set(n,e.sort?e.sort():[e]),V0(n)}:Y0e().includes(t)?function(...e){return t.apply(o3(this),e),V0(xY.get(this))}:function(...e){return V0(t.apply(o3(this),e))}}function rme(t){return typeof t=="function"?tme(t):(t instanceof IDBTransaction&&Z0e(t),W0e(t,X0e())?new Proxy(t,xT):t)}function V0(t){if(t instanceof IDBRequest)return J0e(t);if(i3.has(t))return i3.get(t);const e=rme(t);return e!==t&&(i3.set(t,e),oD.set(e,t)),e}const o3=t=>oD.get(t);function nme(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=V0(o);return n&&o.addEventListener("upgradeneeded",c=>{n(V0(o.result),c.oldVersion,c.newVersion,V0(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const ame=["get","getKey","getAll","getAllKeys","count"],sme=["put","add","delete","clear"],l3=new Map;function EU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(l3.get(e))return l3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=sme.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||ame.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return l3.set(e,s),s}eme(t=>({...t,get:(e,r,n)=>EU(e,r)||t.get(e,r,n),has:(e,r)=>!!EU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ime{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ome(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function ome(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vT="@firebase/app",SU="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new iD("@firebase/app"),lme="@firebase/app-compat",cme="@firebase/analytics-compat",ume="@firebase/analytics",dme="@firebase/app-check-compat",fme="@firebase/app-check",hme="@firebase/auth",Ame="@firebase/auth-compat",mme="@firebase/database",pme="@firebase/data-connect",gme="@firebase/database-compat",xme="@firebase/functions",vme="@firebase/functions-compat",yme="@firebase/installations",bme="@firebase/installations-compat",wme="@firebase/messaging",Nme="@firebase/messaging-compat",Cme="@firebase/performance",_me="@firebase/performance-compat",Eme="@firebase/remote-config",Sme="@firebase/remote-config-compat",Ime="@firebase/storage",jme="@firebase/storage-compat",Pme="@firebase/firestore",Bme="@firebase/vertexai-preview",Tme="@firebase/firestore-compat",kme="firebase",Fme="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="[DEFAULT]",Ome={[vT]:"fire-core",[lme]:"fire-core-compat",[ume]:"fire-analytics",[cme]:"fire-analytics-compat",[fme]:"fire-app-check",[dme]:"fire-app-check-compat",[hme]:"fire-auth",[Ame]:"fire-auth-compat",[mme]:"fire-rtdb",[pme]:"fire-data-connect",[gme]:"fire-rtdb-compat",[xme]:"fire-fn",[vme]:"fire-fn-compat",[yme]:"fire-iid",[bme]:"fire-iid-compat",[wme]:"fire-fcm",[Nme]:"fire-fcm-compat",[Cme]:"fire-perf",[_me]:"fire-perf-compat",[Eme]:"fire-rc",[Sme]:"fire-rc-compat",[Ime]:"fire-gcs",[jme]:"fire-gcs-compat",[Pme]:"fire-fst",[Tme]:"fire-fst-compat",[Bme]:"fire-vertex","fire-js":"fire-js",[kme]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map,bT=new Map,wT=new Map;function IU(t,e){try{t.container.addComponent(e)}catch(r){Jh.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function vv(t){const e=t.name;if(wT.has(e))return Jh.debug(`There were multiple attempts to register component ${e}.`),!1;wT.set(e,t);for(const r of xv.values())IU(r,t);for(const r of bT.values())IU(r,t);return!0}function lD(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function jf(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},H0=new cw("app","Firebase",Dme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rme{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Up("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw H0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=Fme;function cD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:yT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw H0.create("bad-app-name",{appName:String(a)});if(r||(r=AY()),!r)throw H0.create("no-options");const s=xv.get(a);if(s){if(Jb(r,s.options)&&Jb(n,s.config))return s;throw H0.create("duplicate-app",{appName:a})}const o=new $0e(a);for(const c of wT.values())o.addComponent(c);const l=new Rme(r,n,o);return xv.set(a,l),l}function uD(t=yT){const e=xv.get(t);if(!e&&t===yT&&AY())return cD();if(!e)throw H0.create("no-app",{appName:t});return e}async function Mme(t){let e=!1;const r=t.name;xv.has(r)?(e=!0,xv.delete(r)):bT.has(r)&&t.decRefCount()<=0&&(bT.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function $0(t,e,r){var n;let a=(n=Ome[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jh.warn(l.join(" "));return}vv(new Up(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme="firebase-heartbeat-database",Ume=1,Zb="firebase-heartbeat-store";let c3=null;function yY(){return c3||(c3=nme(Lme,Ume,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zb)}catch(r){console.warn(r)}}}}).catch(t=>{throw H0.create("idb-open",{originalErrorMessage:t.message})})),c3}async function Qme(t){try{const r=(await yY()).transaction(Zb),n=await r.objectStore(Zb).get(bY(t));return await r.done,n}catch(e){if(e instanceof AA)Jh.warn(e.message);else{const r=H0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jh.warn(r.message)}}}async function jU(t,e){try{const n=(await yY()).transaction(Zb,"readwrite");await n.objectStore(Zb).put(e,bY(t)),await n.done}catch(r){if(r instanceof AA)Jh.warn(r.message);else{const n=H0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Jh.warn(n.message)}}}function bY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vme=1024,Hme=30*24*60*60*1e3;class $me{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Kme(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Hme}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Jh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=PU(),{heartbeatsToSend:n,unsentEntries:a}=Gme(this._heartbeatsCache.heartbeats),s=QE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Jh.warn(r),""}}}function PU(){return new Date().toISOString().substring(0,10)}function Gme(t,e=Vme){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),BU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),BU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Kme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gY()?k0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Qme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return jU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return jU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function BU(t){return QE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qme(t){vv(new Up("platform-logger",e=>new ime(e),"PRIVATE")),vv(new Up("heartbeat",e=>new $me(e),"PRIVATE")),$0(vT,SU,t),$0(vT,SU,"esm2017"),$0("fire-js","")}qme("");function dD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function wY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zme=wY,NY=new cw("auth","Firebase",wY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new iD("@firebase/auth");function Wme(t,...e){VE.logLevel<=Gn.WARN&&VE.warn(`Auth (${zv}): ${t}`,...e)}function Q_(t,...e){VE.logLevel<=Gn.ERROR&&VE.error(`Auth (${zv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t,...e){throw fD(t,...e)}function Mf(t,...e){return fD(t,...e)}function CY(t,e,r){const n=Object.assign(Object.assign({},zme()),{[e]:r});return new cw("auth","Firebase",n).create(e,{appName:t.name})}function Mh(t){return CY(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fD(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return NY.create(t,...e)}function pn(t,e,...r){if(!t)throw fD(e,...r)}function Ih(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Q_(e),new Error(e)}function Zh(t,e){t||Ih(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Xme(){return TU()==="http:"||TU()==="https:"}function TU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xme()||P0e()||"connection"in navigator)?navigator.onLine:!0}function Jme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,r){this.shortDelay=e,this.longDelay=r,Zh(r>e,"Short delay should be less than long delay!"),this.isMobile=S0e()||B0e()}get(){return Yme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t,e){Zh(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ih("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ih("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ih("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const epe=new dw(3e4,6e4);function mA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pA(t,e,r,n,a={}){return EY(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=uw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return j0e()||(u.referrerPolicy="no-referrer"),_Y.fetch()(SY(t,t.config.apiHost,r,l),u)})}async function EY(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Zme),e);try{const a=new rpe(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $N(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $N(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $N(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $N(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CY(t,d,u);tf(t,d)}}catch(a){if(a instanceof AA)throw a;tf(t,"network-request-failed",{message:String(a)})}}async function fw(t,e,r,n,a={}){const s=await pA(t,e,r,n,a);return"mfaPendingCredential"in s&&tf(t,"multi-factor-auth-required",{_serverResponse:s}),s}function SY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?hD(t.config,a):`${t.config.apiScheme}://${a}`}function tpe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rpe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Mf(this.auth,"network-request-failed")),epe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $N(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Mf(t,e,n);return a.customData._tokenResponse=r,a}function kU(t){return t!==void 0&&t.enterprise!==void 0}class npe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return tpe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ape(t,e){return pA(t,"GET","/v2/recaptchaConfig",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function spe(t,e){return pA(t,"POST","/v1/accounts:delete",e)}async function IY(t,e){return pA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ipe(t,e=!1){const r=qs(t),n=await r.getIdToken(e),a=AD(n);pn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:ab(u3(a.auth_time)),issuedAtTime:ab(u3(a.iat)),expirationTime:ab(u3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function u3(t){return Number(t)*1e3}function AD(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Q_("JWT malformed, contained fewer than 3 sections"),null;try{const a=fY(r);return a?JSON.parse(a):(Q_("Failed to decode base64 JWT payload"),null)}catch(a){return Q_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function FU(t){const e=AD(t);return pn(e,"internal-error"),pn(typeof e.exp<"u","internal-error"),pn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof AA&&ope(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function ope({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ab(this.lastLoginAt),this.creationTime=ab(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await e2(t,IY(r,{idToken:n}));pn(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jY(s.providerUserInfo):[],l=upe(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new CT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function cpe(t){const e=qs(t);await HE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function upe(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function jY(t){return t.map(e=>{var{providerId:r}=e,n=dD(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dpe(t,e){const r=await EY(t,{},async()=>{const n=uw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=SY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",_Y.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fpe(t,e){return pA(t,"POST","/v2/accounts:revokeToken",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pn(e.idToken,"internal-error"),pn(typeof e.idToken<"u","internal-error"),pn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){pn(e.length!==0,"internal-error");const r=FU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(pn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await dpe(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Zx;return n&&(pn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(pn(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(pn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zx,this.toJSON())}_performRefresh(){return Ih("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){pn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jh{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=dD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await e2(this,this.stsTokenManager.getToken(this.auth,e));return pn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ipe(this,e)}reload(){return cpe(this)}_assign(e){this!==e&&(pn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new jh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){pn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await HE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jf(this.auth.app))return Promise.reject(Mh(this.auth));const e=await this.getIdToken();return await e2(this,spe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;pn(b&&_,e,"internal-error");const S=Zx.fromJSON(this.name,_);pn(typeof b=="string",e,"internal-error"),KA(f,e.name),KA(A,e.name),pn(typeof w=="boolean",e,"internal-error"),pn(typeof j=="boolean",e,"internal-error"),KA(h,e.name),KA(m,e.name),KA(p,e.name),KA(g,e.name),KA(x,e.name),KA(y,e.name);const E=new jh({uid:b,auth:e,email:A,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:x,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(F=>Object.assign({},F))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new Zx;a.updateFromServerResponse(r);const s=new jh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await HE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];pn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?jY(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Zx;l.updateFromIdToken(n);const c=new jh({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new CT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=new Map;function Ph(t){Zh(t instanceof Function,"Expected a class definition");let e=OU.get(t);return e?(Zh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}PY.type="NONE";const DU=PY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e,r){return`firebase:${t}:${e}:${r}`}class ev{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=V_(this.userKey,a.apiKey,s),this.fullPersistenceKey=V_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ev(Ph(DU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Ph(DU);const o=V_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const f=jh._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ev(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ev(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DY(e))return"Blackberry";if(RY(e))return"Webos";if(TY(e))return"Safari";if((e.includes("chrome/")||kY(e))&&!e.includes("edge/"))return"Chrome";if(OY(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function BY(t=lo()){return/firefox\//i.test(t)}function TY(t=lo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kY(t=lo()){return/crios\//i.test(t)}function FY(t=lo()){return/iemobile/i.test(t)}function OY(t=lo()){return/android/i.test(t)}function DY(t=lo()){return/blackberry/i.test(t)}function RY(t=lo()){return/webos/i.test(t)}function mD(t=lo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hpe(t=lo()){var e;return mD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ape(){return T0e()&&document.documentMode===10}function MY(t=lo()){return mD(t)||OY(t)||RY(t)||DY(t)||/windows phone/i.test(t)||FY(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(t,e=[]){let r;switch(t){case"Browser":r=RU(lo());break;case"Worker":r=`${RU(lo())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${zv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ppe(t,e={}){return pA(t,"GET","/v2/passwordPolicy",mA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gpe=6;class xpe{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:gpe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vpe{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MU(this),this.idTokenSubscription=new MU(this),this.beforeStateQueue=new mpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ph(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await ev.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await IY(this,{idToken:e}),n=await jh._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(jf(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return pn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await HE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Jme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jf(this.app))return Promise.reject(Mh(this));const r=e?qs(e):null;return r&&pn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&pn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jf(this.app)?Promise.reject(Mh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jf(this.app)?Promise.reject(Mh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ph(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ppe(this),r=new xpe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await fpe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ph(e)||this._popupRedirectResolver;pn(r,this,"argument-error"),this.redirectPersistenceManager=await ev.create(this,[Ph(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Wme(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function vm(t){return qs(t)}class MU{constructor(e){this.auth=e,this.observer=null,this.addObserver=M0e(r=>this.observer=r)}get next(){return pn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ype(t){sj=t}function UY(t){return sj.loadJS(t)}function bpe(){return sj.recaptchaEnterpriseScript}function wpe(){return sj.gapiScript}function Npe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Cpe="recaptcha-enterprise",_pe="NO_RECAPTCHA";class Epe{constructor(e){this.type=Cpe,this.auth=vm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{ape(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new npe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;kU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(_pe)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&kU(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bpe();c.length!==0&&(c+=l),UY(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function LU(t,e,r,n=!1){const a=new Epe(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function $E(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await LU(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await LU(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Spe(t,e){const r=lD(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Jb(s,e??{}))return a;tf(a,"already-initialized")}return r.initialize({options:e})}function Ipe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ph);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function jpe(t,e,r){const n=vm(t);pn(n._canInitEmulator,n,"emulator-config-failed"),pn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=QY(e),{host:o,port:l}=Ppe(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Bpe()}function QY(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ppe(t){const e=QY(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:UU(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:UU(o)}}}function UU(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Bpe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ih("not implemented")}_getIdTokenResponse(e){return Ih("not implemented")}_linkToIdToken(e,r){return Ih("not implemented")}_getReauthenticationResolver(e){return Ih("not implemented")}}async function Tpe(t,e){return pA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kpe(t,e){return fw(t,"POST","/v1/accounts:signInWithPassword",mA(t,e))}async function Fpe(t,e){return pA(t,"POST","/v1/accounts:sendOobCode",mA(t,e))}async function Ope(t,e){return Fpe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dpe(t,e){return fw(t,"POST","/v1/accounts:signInWithEmailLink",mA(t,e))}async function Rpe(t,e){return fw(t,"POST","/v1/accounts:signInWithEmailLink",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends pD{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new t2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new t2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,r,"signInWithPassword",kpe);case"emailLink":return Dpe(e,{email:this._email,oobCode:this._password});default:tf(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,n,"signUpPassword",Tpe);case"emailLink":return Rpe(e,{idToken:r,email:this._email,oobCode:this._password});default:tf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t,e){return fw(t,"POST","/v1/accounts:signInWithIdp",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mpe="http://localhost";class Qp extends pD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Qp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):tf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=dD(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Qp(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return tv(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,tv(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,tv(e,r)}buildRequest(){const e={requestUri:Mpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=uw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Upe(t){const e=Sy(Iy(t)).link,r=e?Sy(Iy(e)).deep_link_id:null,n=Sy(Iy(t)).deep_link_id;return(n?Sy(Iy(n)).link:null)||n||r||e||t}class gD{constructor(e){var r,n,a,s,o,l;const c=Sy(Iy(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Lpe((a=c.mode)!==null&&a!==void 0?a:null);pn(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Upe(e);try{return new gD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.providerId=Wv.PROVIDER_ID}static credential(e,r){return t2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=gD.parseLink(r);return pn(n,"argument-error"),t2._fromEmailAndCode(e,n.code,n.tenantId)}}Wv.PROVIDER_ID="password";Wv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends VY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends hw{constructor(){super("facebook.com")}static credential(e){return Qp._fromParams({providerId:p0.PROVIDER_ID,signInMethod:p0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return p0.credentialFromTaggedObject(e)}static credentialFromError(e){return p0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return p0.credential(e.oauthAccessToken)}catch{return null}}}p0.FACEBOOK_SIGN_IN_METHOD="facebook.com";p0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends hw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Qp._fromParams({providerId:g0.PROVIDER_ID,signInMethod:g0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return g0.credentialFromTaggedObject(e)}static credentialFromError(e){return g0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return g0.credential(r,n)}catch{return null}}}g0.GOOGLE_SIGN_IN_METHOD="google.com";g0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends hw{constructor(){super("github.com")}static credential(e){return Qp._fromParams({providerId:x0.PROVIDER_ID,signInMethod:x0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return x0.credentialFromTaggedObject(e)}static credentialFromError(e){return x0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return x0.credential(e.oauthAccessToken)}catch{return null}}}x0.GITHUB_SIGN_IN_METHOD="github.com";x0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends hw{constructor(){super("twitter.com")}static credential(e,r){return Qp._fromParams({providerId:v0.PROVIDER_ID,signInMethod:v0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return v0.credentialFromTaggedObject(e)}static credentialFromError(e){return v0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return v0.credential(r,n)}catch{return null}}}v0.TWITTER_SIGN_IN_METHOD="twitter.com";v0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qpe(t,e){return fw(t,"POST","/v1/accounts:signUp",mA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await jh._fromIdTokenResponse(e,n,a),o=QU(n);return new Vp({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=QU(n);return new Vp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function QU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends AA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,GE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new GE(e,r,n,a)}}function HY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?GE._fromErrorAndOperation(t,s,e,n):s})}async function Vpe(t,e,r=!1){const n=await e2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Vp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hpe(t,e,r=!1){const{auth:n}=t;if(jf(n.app))return Promise.reject(Mh(n));const a="reauthenticate";try{const s=await e2(t,HY(n,a,e,t),r);pn(s.idToken,n,"internal-error");const o=AD(s.idToken);pn(o,n,"internal-error");const{sub:l}=o;return pn(t.uid===l,n,"user-mismatch"),Vp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&tf(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(t,e,r=!1){if(jf(t.app))return Promise.reject(Mh(t));const n="signIn",a=await HY(t,n,e),s=await Vp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function $pe(t,e){return $Y(vm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(t){const e=vm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gpe(t,e,r){const n=vm(t);await $E(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ope)}async function Kpe(t,e,r){if(jf(t.app))return Promise.reject(Mh(t));const n=vm(t),o=await $E(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qpe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GY(t),c}),l=await Vp._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function qpe(t,e,r){return jf(t.app)?Promise.reject(Mh(t)):$pe(qs(t),Wv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&GY(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){return qs(t).setPersistence(e)}function zpe(t,e,r,n){return qs(t).onIdTokenChanged(e,r,n)}function Wpe(t,e,r){return qs(t).beforeAuthStateChanged(e,r)}function ij(t,e,r,n){return qs(t).onAuthStateChanged(e,r,n)}function xD(t){return qs(t).signOut()}const KE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(KE,"1"),this.storage.removeItem(KE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xpe=1e3,Ype=10;class qY extends KY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);Ape()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ype):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Xpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}qY.type="LOCAL";const vD=qY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY extends KY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}zY.type="SESSION";const yD=zY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new oj(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Jpe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=bD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){return window}function ege(t){Lf().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(){return typeof Lf().WorkerGlobalScope<"u"&&typeof Lf().importScripts=="function"}async function tge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rge(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nge(){return WY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY="firebaseLocalStorageDb",age=1,qE="firebaseLocalStorage",YY="fbase_key";class Aw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function lj(t,e){return t.transaction([qE],e?"readwrite":"readonly").objectStore(qE)}function sge(){const t=indexedDB.deleteDatabase(XY);return new Aw(t).toPromise()}function _T(){const t=indexedDB.open(XY,age);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qE,{keyPath:YY})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qE)?e(n):(n.close(),await sge(),e(await _T()))})})}async function VU(t,e,r){const n=lj(t,!0).put({[YY]:e,value:r});return new Aw(n).toPromise()}async function ige(t,e){const r=lj(t,!1).get(e),n=await new Aw(r).toPromise();return n===void 0?null:n.value}function HU(t,e){const r=lj(t,!0).delete(e);return new Aw(r).toPromise()}const oge=800,lge=3;class JY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _T(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>lge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oj._getInstance(nge()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await tge(),!this.activeServiceWorker)return;this.sender=new Zpe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _T();return await VU(e,KE,"1"),await HU(e,KE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>VU(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>ige(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>HU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=lj(a,!1).getAll();return new Aw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JY.type="LOCAL";const ZY=JY;new dw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cge(t,e){return e?Ph(e):(pn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends pD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tv(e,this._buildIdpRequest())}_linkToIdToken(e,r){return tv(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return tv(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function uge(t){return $Y(t.auth,new wD(t),t.bypassAuthState)}function dge(t){const{auth:e,user:r}=t;return pn(r,e,"internal-error"),Hpe(r,new wD(t),t.bypassAuthState)}async function fge(t){const{auth:e,user:r}=t;return pn(r,e,"internal-error"),Vpe(r,new wD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uge;case"linkViaPopup":case"linkViaRedirect":return fge;case"reauthViaPopup":case"reauthViaRedirect":return dge;default:tf(this.auth,"internal-error")}}resolve(e){Zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hge=new dw(2e3,1e4);class Rx extends eJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Rx.currentPopupAction&&Rx.currentPopupAction.cancel(),Rx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pn(e,this.auth,"internal-error"),e}async onExecution(){Zh(this.filter.length===1,"Popup operations only handle one event");const e=bD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Mf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hge.get())};e()}}Rx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Age="pendingRedirect",$_=new Map;class mge extends eJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=$_.get(this.auth._key());if(!e){try{const n=await pge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}$_.set(this.auth._key(),e)}return this.bypassAuthState||$_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pge(t,e){const r=vge(e),n=xge(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function gge(t,e){$_.set(t._key(),e)}function xge(t){return Ph(t._redirectPersistence)}function vge(t){return V_(Age,t.config.apiKey,t.name)}async function yge(t,e,r=!1){if(jf(t.app))return Promise.reject(Mh(t));const n=vm(t),a=cge(n,e),o=await new mge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bge=10*60*1e3;class wge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Nge(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!tJ(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Mf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bge&&this.cachedEventUids.clear(),this.cachedEventUids.has($U(e))}saveEventToCache(e){this.cachedEventUids.add($U(e)),this.lastProcessedEventTime=Date.now()}}function $U(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Nge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cge(t,e={}){return pA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ege=/^https?/;async function Sge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Cge(t);for(const r of e)try{if(Ige(r))return}catch{}tf(t,"unauthorized-domain")}function Ige(t){const e=NT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Ege.test(r))return!1;if(_ge.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jge=new dw(3e4,6e4);function GU(){const t=Lf().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Pge(t){return new Promise((e,r)=>{var n,a,s;function o(){GU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GU(),r(Mf(t,"network-request-failed"))},timeout:jge.get()})}if(!((a=(n=Lf().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Lf().gapi)===null||s===void 0)&&s.load)o();else{const l=Npe("iframefcb");return Lf()[l]=()=>{gapi.load?o():r(Mf(t,"network-request-failed"))},UY(`${wpe()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw G_=null,e})}let G_=null;function Bge(t){return G_=G_||Pge(t),G_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tge=new dw(5e3,15e3),kge="__/auth/iframe",Fge="emulator/auth/iframe",Oge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rge(t){const e=t.config;pn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?hD(e,Fge):`https://${t.config.authDomain}/${kge}`,n={apiKey:e.apiKey,appName:t.name,v:zv},a=Dge.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${uw(n).slice(1)}`}async function Mge(t){const e=await Bge(t),r=Lf().gapi;return pn(r,t,"internal-error"),e.open({where:document.body,url:Rge(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Mf(t,"network-request-failed"),l=Lf().setTimeout(()=>{s(o)},Tge.get());function c(){Lf().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Uge=500,Qge=600,Vge="_blank",Hge="http://localhost";class KU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $ge(t,e,r,n=Uge,a=Qge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Lge),{width:n.toString(),height:a.toString(),top:s,left:o}),u=lo().toLowerCase();r&&(l=kY(u)?Vge:r),BY(u)&&(e=e||Hge,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(hpe(u)&&l!=="_self")return Gge(e||"",l),new KU(null);const f=window.open(e||"",l,d);pn(f,t,"popup-blocked");try{f.focus()}catch{}return new KU(f)}function Gge(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge="__/auth/handler",qge="emulator/auth/handler",zge=encodeURIComponent("fac");async function qU(t,e,r,n,a,s){pn(t.config.authDomain,t,"auth-domain-config-required"),pn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:zv,eventId:a};if(e instanceof VY){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R0e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof hw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${zge}=${encodeURIComponent(c)}`:"";return`${Wge(t)}?${uw(l).slice(1)}${u}`}function Wge({config:t}){return t.emulator?hD(t,qge):`https://${t.authDomain}/${Kge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="webStorageSupport";class Xge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yD,this._completeRedirectFn=yge,this._overrideRedirectResult=gge}async _openPopup(e,r,n,a){var s;Zh((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qU(e,r,n,NT(),a);return $ge(e,o,bD())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await qU(e,r,n,NT(),a);return ege(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Zh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Mge(e),n=new wge(e);return r.register("authEvent",a=>(pn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(d3,{type:d3},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[d3];o!==void 0&&r(!!o),tf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Sge(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return MY()||TY()||mD()}}const Yge=Xge;var zU="@firebase/auth",WU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){pn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function exe(t){vv(new Up("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;pn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LY(t)},u=new vpe(n,a,s,c);return Ipe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),vv(new Up("auth-internal",e=>{const r=vm(e.getProvider("auth").getImmediate());return(n=>new Jge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$0(zU,WU,Zge(t)),$0(zU,WU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const txe=5*60,rxe=mY("authIdTokenMaxAge")||txe;let XU=null;const nxe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rxe)return;const a=r==null?void 0:r.token;XU!==a&&(XU=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ET(t=uD()){const e=lD(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Spe(t,{popupRedirectResolver:Yge,persistence:[ZY,vD,yD]}),n=mY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=nxe(s.toString());Wpe(r,o,()=>o(r.currentUser)),zpe(r,l=>o(l))}}const a=hY("auth");return a&&jpe(r,`http://${a}`),r}function axe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ype({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Mf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",axe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});exe("Browser");var sxe="firebase",ixe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$0(sxe,ixe,"app");var YU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vp,rJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function E(){}E.prototype=S.prototype,_.D=S.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(F,P,k){for(var D=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)D[Z-2]=arguments[Z];return S.prototype[P].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,S,E){E||(E=0);var F=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)F[P]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(P=0;16>P;++P)F[P]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=_.g[0],E=_.g[1],P=_.g[2];var k=_.g[3],D=S+(k^E&(P^k))+F[0]+3614090360&4294967295;S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[1]+3905402710&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[2]+606105819&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[3]+3250441966&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[4]+4118548399&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[5]+1200080426&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[6]+2821735955&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[7]+4249261313&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[8]+1770035416&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[9]+2336552879&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[10]+4294925233&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[11]+2304563134&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(k^E&(P^k))+F[12]+1804603682&4294967295,S=E+(D<<7&4294967295|D>>>25),D=k+(P^S&(E^P))+F[13]+4254626195&4294967295,k=S+(D<<12&4294967295|D>>>20),D=P+(E^k&(S^E))+F[14]+2792965006&4294967295,P=k+(D<<17&4294967295|D>>>15),D=E+(S^P&(k^S))+F[15]+1236535329&4294967295,E=P+(D<<22&4294967295|D>>>10),D=S+(P^k&(E^P))+F[1]+4129170786&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[6]+3225465664&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[11]+643717713&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[0]+3921069994&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[5]+3593408605&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[10]+38016083&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[15]+3634488961&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[4]+3889429448&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[9]+568446438&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[14]+3275163606&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[3]+4107603335&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[8]+1163531501&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(P^k&(E^P))+F[13]+2850285829&4294967295,S=E+(D<<5&4294967295|D>>>27),D=k+(E^P&(S^E))+F[2]+4243563512&4294967295,k=S+(D<<9&4294967295|D>>>23),D=P+(S^E&(k^S))+F[7]+1735328473&4294967295,P=k+(D<<14&4294967295|D>>>18),D=E+(k^S&(P^k))+F[12]+2368359562&4294967295,E=P+(D<<20&4294967295|D>>>12),D=S+(E^P^k)+F[5]+4294588738&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[8]+2272392833&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[11]+1839030562&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[14]+4259657740&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[1]+2763975236&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[4]+1272893353&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[7]+4139469664&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[10]+3200236656&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[13]+681279174&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[0]+3936430074&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[3]+3572445317&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[6]+76029189&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(E^P^k)+F[9]+3654602809&4294967295,S=E+(D<<4&4294967295|D>>>28),D=k+(S^E^P)+F[12]+3873151461&4294967295,k=S+(D<<11&4294967295|D>>>21),D=P+(k^S^E)+F[15]+530742520&4294967295,P=k+(D<<16&4294967295|D>>>16),D=E+(P^k^S)+F[2]+3299628645&4294967295,E=P+(D<<23&4294967295|D>>>9),D=S+(P^(E|~k))+F[0]+4096336452&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[7]+1126891415&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[14]+2878612391&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[5]+4237533241&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[12]+1700485571&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[3]+2399980690&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[10]+4293915773&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[1]+2240044497&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[8]+1873313359&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[15]+4264355552&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[6]+2734768916&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[13]+1309151649&4294967295,E=P+(D<<21&4294967295|D>>>11),D=S+(P^(E|~k))+F[4]+4149444226&4294967295,S=E+(D<<6&4294967295|D>>>26),D=k+(E^(S|~P))+F[11]+3174756917&4294967295,k=S+(D<<10&4294967295|D>>>22),D=P+(S^(k|~E))+F[2]+718787259&4294967295,P=k+(D<<15&4294967295|D>>>17),D=E+(k^(P|~S))+F[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+k&4294967295}n.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var E=S-this.blockSize,F=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=E;)a(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<S;)if(F[P++]=_.charCodeAt(k++),P==this.blockSize){a(this,F),P=0;break}}else for(;k<S;)if(F[P++]=_[k++],P==this.blockSize){a(this,F),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var E=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=E&255,E/=256;for(this.u(_),_=Array(16),S=E=0;4>S;++S)for(var F=0;32>F;F+=8)_[E++]=this.g[S]>>>F&255;return _};function s(_,S){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=S(_)}function o(_,S){this.h=S;for(var E=[],F=!0,P=_.length-1;0<=P;P--){var k=_[P]|0;F&&k==S||(E[P]=k,F=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new o([S|0],0>S?-1:0)}):new o([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var S=[],E=1,F=0;_>=E;F++)S[F]=_/E|0,E*=4294967296;return new o(S,0)}function d(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return g(d(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(S,8)),F=f,P=0;P<_.length;P+=8){var k=Math.min(8,_.length-P),D=parseInt(_.substring(P,P+k),S);8>k?(k=u(Math.pow(S,k)),F=F.j(k).add(u(D))):(F=F.j(E),F=F.add(u(D)))}return F}var f=c(0),A=c(1),h=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,S=1,E=0;E<this.g.length;E++){var F=this.i(E);_+=(0<=F?F:4294967296+F)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var S=u(Math.pow(_,6)),E=this,F="";;){var P=w(E,S).g;E=x(E,P.j(S));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=P,m(E))return k+F;for(;6>k.length;)k="0"+k;F=k+F}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=x(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var S=_.g.length,E=[],F=0;F<S;F++)E[F]=~_.g[F];return new o(E,~_.h).add(A)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0,P=0;P<=S;P++){var k=F+(this.i(P)&65535)+(_.i(P)&65535),D=(k>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);F=D>>>16,k&=65535,D&=65535,E[P]=D<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(_,S){return _.add(g(S))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(h)&&0>_.l(h))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,E=[],F=0;F<2*S;F++)E[F]=0;for(F=0;F<this.g.length;F++)for(var P=0;P<_.g.length;P++){var k=this.i(F)>>>16,D=this.i(F)&65535,Z=_.i(P)>>>16,fe=_.i(P)&65535;E[2*F+2*P]+=D*fe,y(E,2*F+2*P),E[2*F+2*P+1]+=k*fe,y(E,2*F+2*P+1),E[2*F+2*P+1]+=D*Z,y(E,2*F+2*P+1),E[2*F+2*P+2]+=k*Z,y(E,2*F+2*P+2)}for(F=0;F<S;F++)E[F]=E[2*F+1]<<16|E[2*F];for(F=S;F<2*S;F++)E[F]=0;return new o(E,0)};function y(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function b(_,S){this.g=_,this.h=S}function w(_,S){if(m(S))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return S=w(g(_),S),new b(g(S.g),g(S.h));if(p(S))return S=w(_,g(S)),new b(g(S.g),S.h);if(30<_.g.length){if(p(_)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var E=A,F=S;0>=F.l(_);)E=j(E),F=j(F);var P=I(E,1),k=I(F,1);for(F=I(F,2),E=I(E,2);!m(F);){var D=k.add(F);0>=D.l(_)&&(P=P.add(E),k=D),F=I(F,1),E=I(E,1)}return S=x(_,P.j(S)),new b(P,S)}for(P=f;0<=_.l(S);){for(E=Math.max(1,Math.floor(_.m()/S.m())),F=Math.ceil(Math.log(E)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),k=u(E),D=k.j(S);p(D)||0<D.l(_);)E-=F,k=u(E),D=k.j(S);m(k)&&(k=A),P=P.add(k),_=x(_,D)}return new b(P,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)&_.i(F);return new o(E,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)|_.i(F);return new o(E,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)^_.i(F);return new o(E,this.h^_.h)};function j(_){for(var S=_.g.length+1,E=[],F=0;F<S;F++)E[F]=_.i(F)<<1|_.i(F-1)>>>31;return new o(E,_.h)}function I(_,S){var E=S>>5;S%=32;for(var F=_.g.length-E,P=[],k=0;k<F;k++)P[k]=0<S?_.i(k+E)>>>S|_.i(k+E+1)<<32-S:_.i(k+E);return new o(P,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,rJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,vp=o}).apply(typeof YU<"u"?YU:typeof self<"u"?self:typeof window<"u"?window:{});var GN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nJ,jy,aJ,K_,ST,sJ,iJ,oJ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,X,ve){return C==Array.prototype||C==Object.prototype||(C[X]=ve.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof GN=="object"&&GN];for(var X=0;X<C.length;++X){var ve=C[X];if(ve&&ve.Math==Math)return ve}throw Error("Cannot find global object")}var n=r(this);function a(C,X){if(X)e:{var ve=n;C=C.split(".");for(var $e=0;$e<C.length-1;$e++){var kt=C[$e];if(!(kt in ve))break e;ve=ve[kt]}C=C[C.length-1],$e=ve[C],X=X($e),X!=$e&&X!=null&&e(ve,C,{configurable:!0,writable:!0,value:X})}}function s(C,X){C instanceof String&&(C+="");var ve=0,$e=!1,kt={next:function(){if(!$e&&ve<C.length){var Kt=ve++;return{value:X(Kt,C[Kt]),done:!1}}return $e=!0,{done:!0,value:void 0}}};return kt[Symbol.iterator]=function(){return kt},kt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(X,ve){return ve})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(C){var X=typeof C;return X=X!="object"?X:C?Array.isArray(C)?"array":X:"null",X=="array"||X=="object"&&typeof C.length=="number"}function u(C){var X=typeof C;return X=="object"&&C!=null||X=="function"}function d(C,X,ve){return C.call.apply(C.bind,arguments)}function f(C,X,ve){if(!C)throw Error();if(2<arguments.length){var $e=Array.prototype.slice.call(arguments,2);return function(){var kt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(kt,$e),C.apply(X,kt)}}return function(){return C.apply(X,arguments)}}function A(C,X,ve){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function h(C,X){var ve=Array.prototype.slice.call(arguments,1);return function(){var $e=ve.slice();return $e.push.apply($e,arguments),C.apply(this,$e)}}function m(C,X){function ve(){}ve.prototype=X.prototype,C.aa=X.prototype,C.prototype=new ve,C.prototype.constructor=C,C.Qb=function($e,kt,Kt){for(var wr=Array(arguments.length-2),qn=2;qn<arguments.length;qn++)wr[qn-2]=arguments[qn];return X.prototype[kt].apply($e,wr)}}function p(C){const X=C.length;if(0<X){const ve=Array(X);for(let $e=0;$e<X;$e++)ve[$e]=C[$e];return ve}return[]}function g(C,X){for(let ve=1;ve<arguments.length;ve++){const $e=arguments[ve];if(c($e)){const kt=C.length||0,Kt=$e.length||0;C.length=kt+Kt;for(let wr=0;wr<Kt;wr++)C[kt+wr]=$e[wr]}else C.push($e)}}class x{constructor(X,ve){this.i=X,this.j=ve,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,X,ve){for(const $e in C)X.call(ve,C[$e],$e,C)}function _(C,X){for(const ve in C)X.call(void 0,C[ve],ve,C)}function S(C){const X={};for(const ve in C)X[ve]=C[ve];return X}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(C,X){let ve,$e;for(let kt=1;kt<arguments.length;kt++){$e=arguments[kt];for(ve in $e)C[ve]=$e[ve];for(let Kt=0;Kt<E.length;Kt++)ve=E[Kt],Object.prototype.hasOwnProperty.call($e,ve)&&(C[ve]=$e[ve])}}function P(C){var X=1;C=C.split(":");const ve=[];for(;0<X&&C.length;)ve.push(C.shift()),X--;return C.length&&ve.push(C.join(":")),ve}function k(C){l.setTimeout(()=>{throw C},0)}function D(){var C=ae;let X=null;return C.g&&(X=C.g,C.g=C.g.next,C.g||(C.h=null),X.next=null),X}class Z{constructor(){this.h=this.g=null}add(X,ve){const $e=fe.get();$e.set(X,ve),this.h?this.h.next=$e:this.g=$e,this.h=$e}}var fe=new x(()=>new me,C=>C.reset());class me{constructor(){this.next=this.g=this.h=null}set(X,ve){this.h=X,this.g=ve,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ye=!1,ae=new Z,je=()=>{const C=l.Promise.resolve(void 0);pe=()=>{C.then(Be)}};var Be=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(ve){k(ve)}var X=fe;X.j(C),100>X.h&&(X.h++,C.next=X.g,X.g=C)}ye=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(C,X){this.type=C,this.g=this.target=X,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,X=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const ve=()=>{};l.addEventListener("test",ve,X),l.removeEventListener("test",ve,X)}catch{}return C}();function L(C,X){if(G.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var ve=this.type=C.type,$e=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=X,X=C.relatedTarget){if(j){e:{try{w(X.nodeName);var kt=!0;break e}catch{}kt=!1}kt||(X=null)}}else ve=="mouseover"?X=C.fromElement:ve=="mouseout"&&(X=C.toElement);this.relatedTarget=X,$e?(this.clientX=$e.clientX!==void 0?$e.clientX:$e.pageX,this.clientY=$e.clientY!==void 0?$e.clientY:$e.pageY,this.screenX=$e.screenX||0,this.screenY=$e.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:Y[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&L.aa.h.call(this)}}m(L,G);var Y={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),R=0;function H(C,X,ve,$e,kt){this.listener=C,this.proxy=null,this.src=X,this.type=ve,this.capture=!!$e,this.ha=kt,this.key=++R,this.da=this.fa=!1}function ne(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ge(C){this.src=C,this.g={},this.h=0}ge.prototype.add=function(C,X,ve,$e,kt){var Kt=C.toString();C=this.g[Kt],C||(C=this.g[Kt]=[],this.h++);var wr=Ue(C,X,$e,kt);return-1<wr?(X=C[wr],ve||(X.fa=!1)):(X=new H(X,this.src,Kt,!!$e,kt),X.fa=ve,C.push(X)),X};function U(C,X){var ve=X.type;if(ve in C.g){var $e=C.g[ve],kt=Array.prototype.indexOf.call($e,X,void 0),Kt;(Kt=0<=kt)&&Array.prototype.splice.call($e,kt,1),Kt&&(ne(X),C.g[ve].length==0&&(delete C.g[ve],C.h--))}}function Ue(C,X,ve,$e){for(var kt=0;kt<C.length;++kt){var Kt=C[kt];if(!Kt.da&&Kt.listener==X&&Kt.capture==!!ve&&Kt.ha==$e)return kt}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),te={};function Ee(C,X,ve,$e,kt){if(Array.isArray(X)){for(var Kt=0;Kt<X.length;Kt++)Ee(C,X[Kt],ve,$e,kt);return null}return ve=ut(ve),C&&C[J]?C.K(X,ve,u($e)?!!$e.capture:!1,kt):ce(C,X,ve,!1,$e,kt)}function ce(C,X,ve,$e,kt,Kt){if(!X)throw Error("Invalid event type");var wr=u(kt)?!!kt.capture:!!kt,qn=He(C);if(qn||(C[ie]=qn=new ge(C)),ve=qn.add(X,ve,$e,wr,Kt),ve.proxy)return ve;if($e=we(),ve.proxy=$e,$e.src=C,$e.listener=ve,C.addEventListener)z||(kt=wr),kt===void 0&&(kt=!1),C.addEventListener(X.toString(),$e,kt);else if(C.attachEvent)C.attachEvent(pt(X.toString()),$e);else if(C.addListener&&C.removeListener)C.addListener($e);else throw Error("addEventListener and attachEvent are unavailable.");return ve}function we(){function C(ve){return X.call(C.src,C.listener,ve)}const X=_t;return C}function Re(C,X,ve,$e,kt){if(Array.isArray(X))for(var Kt=0;Kt<X.length;Kt++)Re(C,X[Kt],ve,$e,kt);else $e=u($e)?!!$e.capture:!!$e,ve=ut(ve),C&&C[J]?(C=C.i,X=String(X).toString(),X in C.g&&(Kt=C.g[X],ve=Ue(Kt,ve,$e,kt),-1<ve&&(ne(Kt[ve]),Array.prototype.splice.call(Kt,ve,1),Kt.length==0&&(delete C.g[X],C.h--)))):C&&(C=He(C))&&(X=C.g[X.toString()],C=-1,X&&(C=Ue(X,ve,$e,kt)),(ve=-1<C?X[C]:null)&&We(ve))}function We(C){if(typeof C!="number"&&C&&!C.da){var X=C.src;if(X&&X[J])U(X.i,C);else{var ve=C.type,$e=C.proxy;X.removeEventListener?X.removeEventListener(ve,$e,C.capture):X.detachEvent?X.detachEvent(pt(ve),$e):X.addListener&&X.removeListener&&X.removeListener($e),(ve=He(X))?(U(ve,C),ve.h==0&&(ve.src=null,X[ie]=null)):ne(C)}}}function pt(C){return C in te?te[C]:te[C]="on"+C}function _t(C,X){if(C.da)C=!0;else{X=new L(X,this);var ve=C.listener,$e=C.ha||C.src;C.fa&&We(C),C=ve.call($e,X)}return C}function He(C){return C=C[ie],C instanceof ge?C:null}var gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(C){return typeof C=="function"?C:(C[gt]||(C[gt]=function(X){return C.handleEvent(X)}),C[gt])}function vt(){O.call(this),this.i=new ge(this),this.M=this,this.F=null}m(vt,O),vt.prototype[J]=!0,vt.prototype.removeEventListener=function(C,X,ve,$e){Re(this,C,X,ve,$e)};function Pe(C,X){var ve,$e=C.F;if($e)for(ve=[];$e;$e=$e.F)ve.push($e);if(C=C.M,$e=X.type||X,typeof X=="string")X=new G(X,C);else if(X instanceof G)X.target=X.target||C;else{var kt=X;X=new G($e,C),F(X,kt)}if(kt=!0,ve)for(var Kt=ve.length-1;0<=Kt;Kt--){var wr=X.g=ve[Kt];kt=ct(wr,$e,!0,X)&&kt}if(wr=X.g=C,kt=ct(wr,$e,!0,X)&&kt,kt=ct(wr,$e,!1,X)&&kt,ve)for(Kt=0;Kt<ve.length;Kt++)wr=X.g=ve[Kt],kt=ct(wr,$e,!1,X)&&kt}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var C=this.i,X;for(X in C.g){for(var ve=C.g[X],$e=0;$e<ve.length;$e++)ne(ve[$e]);delete C.g[X],C.h--}}this.F=null},vt.prototype.K=function(C,X,ve,$e){return this.i.add(String(C),X,!1,ve,$e)},vt.prototype.L=function(C,X,ve,$e){return this.i.add(String(C),X,!0,ve,$e)};function ct(C,X,ve,$e){if(X=C.i.g[String(X)],!X)return!0;X=X.concat();for(var kt=!0,Kt=0;Kt<X.length;++Kt){var wr=X[Kt];if(wr&&!wr.da&&wr.capture==ve){var qn=wr.listener,Os=wr.ha||wr.src;wr.fa&&U(C.i,wr),kt=qn.call(Os,$e)!==!1&&kt}}return kt&&!$e.defaultPrevented}function lt(C,X,ve){if(typeof C=="function")ve&&(C=A(C,ve));else if(C&&typeof C.handleEvent=="function")C=A(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:l.setTimeout(C,X||0)}function be(C){C.g=lt(()=>{C.g=null,C.i&&(C.i=!1,be(C))},C.l);const X=C.h;C.h=null,C.m.apply(null,X)}class ue extends O{constructor(X,ve){super(),this.m=X,this.l=ve,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:be(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(C){O.call(this),this.h=C,this.g={}}m(Le,O);var ke=[];function Ae(C){I(C.g,function(X,ve){this.g.hasOwnProperty(ve)&&We(X)},C),C.g={}}Le.prototype.N=function(){Le.aa.N.call(this),Ae(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=l.JSON.stringify,yt=l.JSON.parse,At=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function he(){}he.prototype.h=null;function re(C){return C.h||(C.h=C.i())}function oe(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function de(){G.call(this,"d")}m(de,G);function Se(){G.call(this,"c")}m(Se,G);var dt={},xt=null;function ht(){return xt=xt||new vt}dt.La="serverreachability";function bt(C){G.call(this,dt.La,C)}m(bt,G);function et(C){const X=ht();Pe(X,new bt(X))}dt.STAT_EVENT="statevent";function Ne(C,X){G.call(this,dt.STAT_EVENT,C),this.stat=X}m(Ne,G);function mt(C){const X=ht();Pe(X,new Ne(X,C))}dt.Ma="timingevent";function W(C,X){G.call(this,dt.Ma,C),this.size=X}m(W,G);function Ie(C,X){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},X)}function Je(){this.g=!0}Je.prototype.xa=function(){this.g=!1};function tt(C,X,ve,$e,kt,Kt){C.info(function(){if(C.g)if(Kt)for(var wr="",qn=Kt.split("&"),Os=0;Os<qn.length;Os++){var Rn=qn[Os].split("=");if(1<Rn.length){var aa=Rn[0];Rn=Rn[1];var Ja=aa.split("_");wr=2<=Ja.length&&Ja[1]=="type"?wr+(aa+"="+Rn+"&"):wr+(aa+"=redacted&")}}else wr=null;else wr=Kt;return"XMLHTTP REQ ("+$e+") [attempt "+kt+"]: "+X+`
`+ve+`
`+wr})}function ft(C,X,ve,$e,kt,Kt,wr){C.info(function(){return"XMLHTTP RESP ("+$e+") [ attempt "+kt+"]: "+X+`
`+ve+`
`+Kt+" "+wr})}function T(C,X,ve,$e){C.info(function(){return"XMLHTTP TEXT ("+X+"): "+V(C,ve)+($e?" "+$e:"")})}function M(C,X){C.info(function(){return"TIMEOUT: "+X})}Je.prototype.info=function(){};function V(C,X){if(!C.g)return X;if(!X)return null;try{var ve=JSON.parse(X);if(ve){for(C=0;C<ve.length;C++)if(Array.isArray(ve[C])){var $e=ve[C];if(!(2>$e.length)){var kt=$e[1];if(Array.isArray(kt)&&!(1>kt.length)){var Kt=kt[0];if(Kt!="noop"&&Kt!="stop"&&Kt!="close")for(var wr=1;wr<kt.length;wr++)kt[wr]=""}}}}return Ye(ve)}catch{return X}}var q={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ee={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},se;function Oe(){}m(Oe,he),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},se=new Oe;function Ke(C,X,ve,$e){this.j=C,this.i=X,this.l=ve,this.R=$e||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ot}function ot(){this.i=null,this.g="",this.h=!1}var Fe={},Xe={};function xe(C,X,ve){C.L=1,C.v=br(Rt(X)),C.m=ve,C.P=!0,Ge(C,null)}function Ge(C,X){C.F=Date.now(),Et(C),C.A=Rt(C.v);var ve=C.A,$e=C.R;Array.isArray($e)||($e=[String($e)]),Fg(ve.i,"t",$e),C.C=0,ve=C.j.J,C.h=new ot,C.g=Ys(C.j,ve?X:null,!C.m),0<C.O&&(C.M=new ue(A(C.Y,C,C.g),C.O)),X=C.U,ve=C.g,$e=C.ca;var kt="readystatechange";Array.isArray(kt)||(kt&&(ke[0]=kt.toString()),kt=ke);for(var Kt=0;Kt<kt.length;Kt++){var wr=Ee(ve,kt[Kt],$e||X.handleEvent,!1,X.h||X);if(!wr)break;X.g[wr.key]=wr}X=C.H?S(C.H):{},C.m?(C.u||(C.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,X)):(C.u="GET",C.g.ea(C.A,C.u,null,X)),et(),tt(C.i,C.u,C.A,C.l,C.R,C.m)}Ke.prototype.ca=function(C){C=C.target;const X=this.M;X&&Ql(C)==3?X.j():this.Y(C)},Ke.prototype.Y=function(C){try{if(C==this.g)e:{const Ja=Ql(this.g);var X=this.g.Ba();const Lc=this.g.Z();if(!(3>Ja)&&(Ja!=3||this.g&&(this.h.h||this.g.oa()||jm(this.g)))){this.J||Ja!=4||X==7||(X==8||0>=Lc?et(3):et(2)),pr(this);var ve=this.g.Z();this.X=ve;t:if(qe(this)){var $e=jm(this.g);C="";var kt=$e.length,Kt=Ql(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dt(this),Ot(this);var wr="";break t}this.h.i=new l.TextDecoder}for(X=0;X<kt;X++)this.h.h=!0,C+=this.h.i.decode($e[X],{stream:!(Kt&&X==kt-1)});$e.length=0,this.h.g+=C,this.C=0,wr=this.h.g}else wr=this.g.oa();if(this.o=ve==200,ft(this.i,this.u,this.A,this.l,this.R,Ja,ve),this.o){if(this.T&&!this.K){t:{if(this.g){var qn,Os=this.g;if((qn=Os.g?Os.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(qn)){var Rn=qn;break t}}Rn=null}if(ve=Rn)T(this.i,this.l,ve,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fr(this,ve);else{this.o=!1,this.s=3,mt(12),Dt(this),Ot(this);break e}}if(this.P){ve=!0;let fl;for(;!this.J&&this.C<wr.length;)if(fl=it(this,wr),fl==Xe){Ja==4&&(this.s=4,mt(14),ve=!1),T(this.i,this.l,null,"[Incomplete Response]");break}else if(fl==Fe){this.s=4,mt(15),T(this.i,this.l,wr,"[Invalid Chunk]"),ve=!1;break}else T(this.i,this.l,fl,null),fr(this,fl);if(qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ja!=4||wr.length!=0||this.h.h||(this.s=1,mt(16),ve=!1),this.o=this.o&&ve,!ve)T(this.i,this.l,wr,"[Invalid Chunked Response]"),Dt(this),Ot(this);else if(0<wr.length&&!this.W){this.W=!0;var aa=this.j;aa.g==this&&aa.ba&&!aa.M&&(aa.j.info("Great, no buffering proxy detected. Bytes received: "+wr.length),Mr(aa),aa.M=!0,mt(11))}}else T(this.i,this.l,wr,null),fr(this,wr);Ja==4&&Dt(this),this.o&&!this.J&&(Ja==4?bn(this.j,this):(this.o=!1,Et(this)))}else Dg(this.g),ve==400&&0<wr.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Dt(this),Ot(this)}}}catch{}finally{}};function qe(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function it(C,X){var ve=C.C,$e=X.indexOf(`
`,ve);return $e==-1?Xe:(ve=Number(X.substring(ve,$e)),isNaN(ve)?Fe:($e+=1,$e+ve>X.length?Xe:(X=X.slice($e,$e+ve),C.C=$e+ve,X)))}Ke.prototype.cancel=function(){this.J=!0,Dt(this)};function Et(C){C.S=Date.now()+C.I,Pt(C,C.I)}function Pt(C,X){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Ie(A(C.ba,C),X)}function pr(C){C.B&&(l.clearTimeout(C.B),C.B=null)}Ke.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(M(this.i,this.A),this.L!=2&&(et(),mt(17)),Dt(this),this.s=2,Ot(this)):Pt(this,this.S-C)};function Ot(C){C.j.G==0||C.J||bn(C.j,C)}function Dt(C){pr(C);var X=C.M;X&&typeof X.ma=="function"&&X.ma(),C.M=null,Ae(C.U),C.g&&(X=C.g,C.g=null,X.abort(),X.ma())}function fr(C,X){try{var ve=C.j;if(ve.G!=0&&(ve.g==C||Pr(ve.h,C))){if(!C.K&&Pr(ve.h,C)&&ve.G==3){try{var $e=ve.Da.g.parse(X)}catch{$e=null}if(Array.isArray($e)&&$e.length==3){var kt=$e;if(kt[0]==0){e:if(!ve.u){if(ve.g)if(ve.g.F+3e3<C.F)fn(ve),Cu(ve);else break e;lr(ve),mt(18)}}else ve.za=kt[1],0<ve.za-ve.T&&37500>kt[2]&&ve.F&&ve.v==0&&!ve.C&&(ve.C=Ie(A(ve.Za,ve),6e3));if(1>=Or(ve.h)&&ve.ca){try{ve.ca()}catch{}ve.ca=void 0}}else ua(ve,11)}else if((C.K||ve.g==C)&&fn(ve),!y(X))for(kt=ve.Da.g.parse(X),X=0;X<kt.length;X++){let Rn=kt[X];if(ve.T=Rn[0],Rn=Rn[1],ve.G==2)if(Rn[0]=="c"){ve.K=Rn[1],ve.ia=Rn[2];const aa=Rn[3];aa!=null&&(ve.la=aa,ve.j.info("VER="+ve.la));const Ja=Rn[4];Ja!=null&&(ve.Aa=Ja,ve.j.info("SVER="+ve.Aa));const Lc=Rn[5];Lc!=null&&typeof Lc=="number"&&0<Lc&&($e=1.5*Lc,ve.L=$e,ve.j.info("backChannelRequestTimeoutMs_="+$e)),$e=ve;const fl=C.g;if(fl){const Uo=fl.g?fl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uo){var Kt=$e.h;Kt.g||Uo.indexOf("spdy")==-1&&Uo.indexOf("quic")==-1&&Uo.indexOf("h2")==-1||(Kt.j=Kt.l,Kt.g=new Set,Kt.h&&(Vr(Kt,Kt.h),Kt.h=null))}if($e.D){const wd=fl.g?fl.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&($e.ya=wd,Xt($e.I,$e.D,wd))}}ve.G=3,ve.l&&ve.l.ua(),ve.ba&&(ve.R=Date.now()-C.F,ve.j.info("Handshake RTT: "+ve.R+"ms")),$e=ve;var wr=C;if($e.qa=ba($e,$e.J?$e.ia:null,$e.W),wr.K){Rr($e.h,wr);var qn=wr,Os=$e.L;Os&&(qn.I=Os),qn.B&&(pr(qn),Et(qn)),$e.g=wr}else nr($e);0<ve.i.length&&Q(ve)}else Rn[0]!="stop"&&Rn[0]!="close"||ua(ve,7);else ve.G==3&&(Rn[0]=="stop"||Rn[0]=="close"?Rn[0]=="stop"?ua(ve,7):BA(ve):Rn[0]!="noop"&&ve.l&&ve.l.ta(Rn),ve.v=0)}}et(4)}catch{}}var ir=class{constructor(C,X){this.g=C,this.map=X}};function Bt(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gr(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Or(C){return C.h?1:C.g?C.g.size:0}function Pr(C,X){return C.h?C.h==X:C.g?C.g.has(X):!1}function Vr(C,X){C.g?C.g.add(X):C.h=X}function Rr(C,X){C.h&&C.h==X?C.h=null:C.g&&C.g.has(X)&&C.g.delete(X)}Bt.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function an(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let X=C.i;for(const ve of C.g.values())X=X.concat(ve.D);return X}return p(C.i)}function Wn(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var X=[],ve=C.length,$e=0;$e<ve;$e++)X.push(C[$e]);return X}X=[],ve=0;for($e in C)X[ve++]=C[$e];return X}function Nt(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var X=[];C=C.length;for(var ve=0;ve<C;ve++)X.push(ve);return X}X=[],ve=0;for(const $e in C)X[ve++]=$e;return X}}}function _r(C,X){if(C.forEach&&typeof C.forEach=="function")C.forEach(X,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,X,void 0);else for(var ve=Nt(C),$e=Wn(C),kt=$e.length,Kt=0;Kt<kt;Kt++)X.call(void 0,$e[Kt],ve&&ve[Kt],C)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(C,X){if(C){C=C.split("&");for(var ve=0;ve<C.length;ve++){var $e=C[ve].indexOf("="),kt=null;if(0<=$e){var Kt=C[ve].substring(0,$e);kt=C[ve].substring($e+1)}else Kt=C[ve];X(Kt,kt?decodeURIComponent(kt.replace(/\+/g," ")):"")}}}function Qt(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Qt){this.h=C.h,Mt(this,C.j),this.o=C.o,this.g=C.g,qt(this,C.s),this.l=C.l;var X=C.i,ve=new ya;ve.i=X.i,X.g&&(ve.g=new Map(X.g),ve.h=X.h),Yt(this,ve),this.m=C.m}else C&&(X=String(C).match(st))?(this.h=!1,Mt(this,X[1]||"",!0),this.o=zt(X[2]||""),this.g=zt(X[3]||"",!0),qt(this,X[4]),this.l=zt(X[5]||"",!0),Yt(this,X[6]||"",!0),this.m=zt(X[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}Qt.prototype.toString=function(){var C=[],X=this.j;X&&C.push(hr(X,Ya,!0),":");var ve=this.g;return(ve||X=="file")&&(C.push("//"),(X=this.o)&&C.push(hr(X,Ya,!0),"@"),C.push(encodeURIComponent(String(ve)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ve=this.s,ve!=null&&C.push(":",String(ve))),(ve=this.l)&&(this.g&&ve.charAt(0)!="/"&&C.push("/"),C.push(hr(ve,ve.charAt(0)=="/"?Va:Dn,!0))),(ve=this.i.toString())&&C.push("?",ve),(ve=this.m)&&C.push("#",hr(ve,Qi)),C.join("")};function Rt(C){return new Qt(C)}function Mt(C,X,ve){C.j=ve?zt(X,!0):X,C.j&&(C.j=C.j.replace(/:$/,""))}function qt(C,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);C.s=X}else C.s=null}function Yt(C,X,ve){X instanceof ya?(C.i=X,w1(C.i,C.h)):(ve||(X=hr(X,Lo)),C.i=new ya(X,C.h))}function Xt(C,X,ve){C.i.set(X,ve)}function br(C){return Xt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function zt(C,X){return C?X?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function hr(C,X,ve){return typeof C=="string"?(C=encodeURI(C).replace(X,rn),ve&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function rn(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Ya=/[#\/\?@]/g,Dn=/[#\?:]/g,Va=/[#\?]/g,Lo=/[#\?@]/g,Qi=/#/g;function ya(C,X){this.h=this.g=null,this.i=C||null,this.j=!!X}function Ha(C){C.g||(C.g=new Map,C.h=0,C.i&&St(C.i,function(X,ve){C.add(decodeURIComponent(X.replace(/\+/g," ")),ve)}))}t=ya.prototype,t.add=function(C,X){Ha(this),this.i=null,C=dn(this,C);var ve=this.g.get(C);return ve||this.g.set(C,ve=[]),ve.push(X),this.h+=1,this};function Rc(C,X){Ha(C),X=dn(C,X),C.g.has(X)&&(C.i=null,C.h-=C.g.get(X).length,C.g.delete(X))}function vd(C,X){return Ha(C),X=dn(C,X),C.g.has(X)}t.forEach=function(C,X){Ha(this),this.g.forEach(function(ve,$e){ve.forEach(function(kt){C.call(X,kt,$e,this)},this)},this)},t.na=function(){Ha(this);const C=Array.from(this.g.values()),X=Array.from(this.g.keys()),ve=[];for(let $e=0;$e<X.length;$e++){const kt=C[$e];for(let Kt=0;Kt<kt.length;Kt++)ve.push(X[$e])}return ve},t.V=function(C){Ha(this);let X=[];if(typeof C=="string")vd(this,C)&&(X=X.concat(this.g.get(dn(this,C))));else{C=Array.from(this.g.values());for(let ve=0;ve<C.length;ve++)X=X.concat(C[ve])}return X},t.set=function(C,X){return Ha(this),this.i=null,C=dn(this,C),vd(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[X]),this.h+=1,this},t.get=function(C,X){return C?(C=this.V(C),0<C.length?String(C[0]):X):X};function Fg(C,X,ve){Rc(C,X),0<ve.length&&(C.i=null,C.g.set(dn(C,X),p(ve)),C.h+=ve.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],X=Array.from(this.g.keys());for(var ve=0;ve<X.length;ve++){var $e=X[ve];const Kt=encodeURIComponent(String($e)),wr=this.V($e);for($e=0;$e<wr.length;$e++){var kt=Kt;wr[$e]!==""&&(kt+="="+encodeURIComponent(String(wr[$e]))),C.push(kt)}}return this.i=C.join("&")};function dn(C,X){return X=String(X),C.j&&(X=X.toLowerCase()),X}function w1(C,X){X&&!C.j&&(Ha(C),C.i=null,C.g.forEach(function(ve,$e){var kt=$e.toLowerCase();$e!=kt&&(Rc(this,$e),Fg(this,kt,ve))},C)),C.j=X}function N1(C,X){const ve=new Je;if(l.Image){const $e=new Image;$e.onload=h(po,ve,"TestLoadImage: loaded",!0,X,$e),$e.onerror=h(po,ve,"TestLoadImage: error",!1,X,$e),$e.onabort=h(po,ve,"TestLoadImage: abort",!1,X,$e),$e.ontimeout=h(po,ve,"TestLoadImage: timeout",!1,X,$e),l.setTimeout(function(){$e.ontimeout&&$e.ontimeout()},1e4),$e.src=C}else X(!1)}function C1(C,X){const ve=new Je,$e=new AbortController,kt=setTimeout(()=>{$e.abort(),po(ve,"TestPingServer: timeout",!1,X)},1e4);fetch(C,{signal:$e.signal}).then(Kt=>{clearTimeout(kt),Kt.ok?po(ve,"TestPingServer: ok",!0,X):po(ve,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(kt),po(ve,"TestPingServer: error",!1,X)})}function po(C,X,ve,$e,kt){try{kt&&(kt.onload=null,kt.onerror=null,kt.onabort=null,kt.ontimeout=null),$e(ve)}catch{}}function yd(){this.g=new At}function _1(C,X,ve){const $e=ve||"";try{_r(C,function(kt,Kt){let wr=kt;u(kt)&&(wr=Ye(kt)),X.push($e+Kt+"="+encodeURIComponent(wr))})}catch(kt){throw X.push($e+"type="+encodeURIComponent("_badmap")),kt}}function IA(C){this.l=C.Ub||null,this.j=C.eb||!1}m(IA,he),IA.prototype.g=function(){return new bd(this.l,this.j)},IA.prototype.i=function(C){return function(){return C}}({});function bd(C,X){vt.call(this),this.D=C,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(bd,vt),t=bd.prototype,t.open=function(C,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=X,this.readyState=1,eh(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(X.body=C),(this.D||l).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,eh(this)),this.g&&(this.readyState=3,eh(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jA(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function jA(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var X=C.value?C.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!C.done}))&&(this.response=this.responseText+=X)}C.done?Mc(this):eh(this),this.readyState==3&&jA(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Mc(this))},t.Qa=function(C){this.g&&(this.response=C,Mc(this))},t.ga=function(){this.g&&Mc(this)};function Mc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,eh(C)}t.setRequestHeader=function(C,X){this.u.append(C,X)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],X=this.h.entries();for(var ve=X.next();!ve.done;)ve=ve.value,C.push(ve[0]+": "+ve[1]),ve=X.next();return C.join(`\r
`)};function eh(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(bd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function bu(C){let X="";return I(C,function(ve,$e){X+=$e,X+=":",X+=ve,X+=`\r
`}),X}function Sm(C,X,ve){e:{for($e in ve){var $e=!1;break e}$e=!0}$e||(ve=bu(ve),typeof C=="string"?ve!=null&&encodeURIComponent(String(ve)):Xt(C,X,ve))}function Da(C){vt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Da,vt);var Im=/^https?$/i,Og=["POST","PUT"];t=Da.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,X,ve,$e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);X=X?X.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():se.g(),this.v=this.o?re(this.o):re(se),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(X,String(C),!0),this.B=!1}catch(Kt){wu(this,Kt);return}if(C=ve||"",ve=new Map(this.headers),$e)if(Object.getPrototypeOf($e)===Object.prototype)for(var kt in $e)ve.set(kt,$e[kt]);else if(typeof $e.keys=="function"&&typeof $e.get=="function")for(const Kt of $e.keys())ve.set(Kt,$e.get(Kt));else throw Error("Unknown input type for opt_headers: "+String($e));$e=Array.from(ve.keys()).find(Kt=>Kt.toLowerCase()=="content-type"),kt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Og,X,void 0))||$e||kt||ve.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Kt,wr]of ve)this.g.setRequestHeader(Kt,wr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ff(this),this.u=!0,this.g.send(C),this.u=!1}catch(Kt){wu(this,Kt)}};function wu(C,X){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=X,C.m=5,PA(C),df(C)}function PA(C){C.A||(C.A=!0,Pe(C,"complete"),Pe(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Pe(this,"complete"),Pe(this,"abort"),df(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),df(this,!0)),Da.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?th(this):this.bb())},t.bb=function(){th(this)};function th(C){if(C.h&&typeof o<"u"&&(!C.v[1]||Ql(C)!=4||C.Z()!=2)){if(C.u&&Ql(C)==4)lt(C.Ea,0,C);else if(Pe(C,"readystatechange"),Ql(C)==4){C.h=!1;try{const wr=C.Z();e:switch(wr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var ve;if(!(ve=X)){var $e;if($e=wr===0){var kt=String(C.D).match(st)[1]||null;!kt&&l.self&&l.self.location&&(kt=l.self.location.protocol.slice(0,-1)),$e=!Im.test(kt?kt.toLowerCase():"")}ve=$e}if(ve)Pe(C,"complete"),Pe(C,"success");else{C.m=6;try{var Kt=2<Ql(C)?C.g.statusText:""}catch{Kt=""}C.l=Kt+" ["+C.Z()+"]",PA(C)}}finally{df(C)}}}}function df(C,X){if(C.g){ff(C);const ve=C.g,$e=C.v[0]?()=>{}:null;C.g=null,C.v=null,X||Pe(C,"ready");try{ve.onreadystatechange=$e}catch{}}}function ff(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Ql(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Ql(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var X=this.g.responseText;return C&&X.indexOf(C)==0&&(X=X.substring(C.length)),yt(X)}};function jm(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Dg(C){const X={};C=(C.g&&2<=Ql(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let $e=0;$e<C.length;$e++){if(y(C[$e]))continue;var ve=P(C[$e]);const kt=ve[0];if(ve=ve[1],typeof ve!="string")continue;ve=ve.trim();const Kt=X[kt]||[];X[kt]=Kt,Kt.push(ve)}_(X,function($e){return $e.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(C,X,ve){return ve&&ve.internalChannelParams&&ve.internalChannelParams[C]||X}function Nu(C){this.Aa=0,this.i=[],this.j=new Je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,C),this.cb=Vl("retryDelaySeedMs",1e4,C),this.Wa=Vl("forwardChannelMaxRetries",2,C),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Bt(C&&C.concurrentRequestLimit),this.Da=new yd,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nu.prototype,t.la=8,t.G=1,t.connect=function(C,X,ve,$e){mt(0),this.W=C,this.H=X||{},ve&&$e!==void 0&&(this.H.OSID=ve,this.H.OAID=$e),this.F=this.X,this.I=ba(this,null,this.W),Q(this)};function BA(C){if(Pm(C),C.G==3){var X=C.U++,ve=Rt(C.I);if(Xt(ve,"SID",C.K),Xt(ve,"RID",X),Xt(ve,"TYPE","terminate"),wt(C,ve),X=new Ke(C,C.j,X),X.L=2,X.v=br(Rt(ve)),ve=!1,l.navigator&&l.navigator.sendBeacon)try{ve=l.navigator.sendBeacon(X.v.toString(),"")}catch{}!ve&&l.Image&&(new Image().src=X.v,ve=!0),ve||(X.g=Ys(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Et(X)}Ts(C)}function Cu(C){C.g&&(Mr(C),C.g.cancel(),C.g=null)}function Pm(C){Cu(C),C.u&&(l.clearTimeout(C.u),C.u=null),fn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function Q(C){if(!gr(C.h)&&!C.s){C.s=!0;var X=C.Ga;pe||je(),ye||(pe(),ye=!0),ae.add(X,C),C.B=0}}function Ce(C,X){return Or(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=X.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Ie(A(C.Ga,C,X),Vn(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const kt=new Ke(this,this.j,C);let Kt=this.o;if(this.S&&(Kt?(Kt=S(Kt),F(Kt,this.S)):Kt=this.S),this.m!==null||this.O||(kt.H=Kt,Kt=null),this.P)e:{for(var X=0,ve=0;ve<this.i.length;ve++){t:{var $e=this.i[ve];if("__data__"in $e.map&&($e=$e.map.__data__,typeof $e=="string")){$e=$e.length;break t}$e=void 0}if($e===void 0)break;if(X+=$e,4096<X){X=ve;break e}if(X===4096||ve===this.i.length-1){X=ve+1;break e}}X=1e3}else X=1e3;X=Tt(this,kt,X),ve=Rt(this.I),Xt(ve,"RID",C),Xt(ve,"CVER",22),this.D&&Xt(ve,"X-HTTP-Session-Id",this.D),wt(this,ve),Kt&&(this.O?X="headers="+encodeURIComponent(String(bu(Kt)))+"&"+X:this.m&&Sm(ve,this.m,Kt)),Vr(this.h,kt),this.Ua&&Xt(ve,"TYPE","init"),this.P?(Xt(ve,"$req",X),Xt(ve,"SID","null"),kt.T=!0,xe(kt,ve,null)):xe(kt,ve,X),this.G=2}}else this.G==3&&(C?rt(this,C):this.i.length==0||gr(this.h)||rt(this))};function rt(C,X){var ve;X?ve=X.l:ve=C.U++;const $e=Rt(C.I);Xt($e,"SID",C.K),Xt($e,"RID",ve),Xt($e,"AID",C.T),wt(C,$e),C.m&&C.o&&Sm($e,C.m,C.o),ve=new Ke(C,C.j,ve,C.B+1),C.m===null&&(ve.H=C.o),X&&(C.i=X.D.concat(C.i)),X=Tt(C,ve,1e3),ve.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Vr(C.h,ve),xe(ve,$e,X)}function wt(C,X){C.H&&I(C.H,function(ve,$e){Xt(X,$e,ve)}),C.l&&_r({},function(ve,$e){Xt(X,$e,ve)})}function Tt(C,X,ve){ve=Math.min(C.i.length,ve);var $e=C.l?A(C.l.Na,C.l,C):null;e:{var kt=C.i;let Kt=-1;for(;;){const wr=["count="+ve];Kt==-1?0<ve?(Kt=kt[0].g,wr.push("ofs="+Kt)):Kt=0:wr.push("ofs="+Kt);let qn=!0;for(let Os=0;Os<ve;Os++){let Rn=kt[Os].g;const aa=kt[Os].map;if(Rn-=Kt,0>Rn)Kt=Math.max(0,kt[Os].g-100),qn=!1;else try{_1(aa,wr,"req"+Rn+"_")}catch{$e&&$e(aa)}}if(qn){$e=wr.join("&");break e}}}return C=C.i.splice(0,ve),X.D=C,$e}function nr(C){if(!C.g&&!C.u){C.Y=1;var X=C.Fa;pe||je(),ye||(pe(),ye=!0),ae.add(X,C),C.v=0}}function lr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Ie(A(C.Fa,C),Vn(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Kr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Ie(A(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Cu(this),Kr(this))};function Mr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Kr(C){C.g=new Ke(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var X=Rt(C.qa);Xt(X,"RID","rpc"),Xt(X,"SID",C.K),Xt(X,"AID",C.T),Xt(X,"CI",C.F?"0":"1"),!C.F&&C.ja&&Xt(X,"TO",C.ja),Xt(X,"TYPE","xmlhttp"),wt(C,X),C.m&&C.o&&Sm(X,C.m,C.o),C.L&&(C.g.I=C.L);var ve=C.g;C=C.ia,ve.L=1,ve.v=br(Rt(X)),ve.m=null,ve.P=!0,Ge(ve,C)}t.Za=function(){this.C!=null&&(this.C=null,Cu(this),lr(this),mt(19))};function fn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function bn(C,X){var ve=null;if(C.g==X){fn(C),Mr(C),C.g=null;var $e=2}else if(Pr(C.h,X))ve=X.D,Rr(C.h,X),$e=1;else return;if(C.G!=0){if(X.o)if($e==1){ve=X.m?X.m.length:0,X=Date.now()-X.F;var kt=C.B;$e=ht(),Pe($e,new W($e,ve)),Q(C)}else nr(C);else if(kt=X.s,kt==3||kt==0&&0<X.X||!($e==1&&Ce(C,X)||$e==2&&lr(C)))switch(ve&&0<ve.length&&(X=C.h,X.i=X.i.concat(ve)),kt){case 1:ua(C,5);break;case 4:ua(C,10);break;case 3:ua(C,6);break;default:ua(C,2)}}}function Vn(C,X){let ve=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(ve*=2),ve*X}function ua(C,X){if(C.j.info("Error code "+X),X==2){var ve=A(C.fb,C),$e=C.Xa;const kt=!$e;$e=new Qt($e||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Mt($e,"https"),br($e),kt?N1($e.toString(),ve):C1($e.toString(),ve)}else mt(2);C.G=0,C.l&&C.l.sa(X),Ts(C),Pm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Ts(C){if(C.G=0,C.ka=[],C.l){const X=an(C.h);(X.length!=0||C.i.length!=0)&&(g(C.ka,X),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function ba(C,X,ve){var $e=ve instanceof Qt?Rt(ve):new Qt(ve);if($e.g!="")X&&($e.g=X+"."+$e.g),qt($e,$e.s);else{var kt=l.location;$e=kt.protocol,X=X?X+"."+kt.hostname:kt.hostname,kt=+kt.port;var Kt=new Qt(null);$e&&Mt(Kt,$e),X&&(Kt.g=X),kt&&qt(Kt,kt),ve&&(Kt.l=ve),$e=Kt}return ve=C.D,X=C.ya,ve&&X&&Xt($e,ve,X),Xt($e,"VER",C.la),wt(C,$e),$e}function Ys(C,X,ve){if(X&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=C.Ca&&!C.pa?new Da(new IA({eb:ve})):new Da(C.pa),X.Ha(C.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ks(){}t=ks.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Js(){}Js.prototype.g=function(C,X){return new Fs(C,X)};function Fs(C,X){vt.call(this),this.g=new Nu(X),this.l=C,this.h=X&&X.messageUrlParams||null,C=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(C?C["X-WebChannel-Content-Type"]=X.messageContentType:C={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(C?C["X-WebChannel-Client-Profile"]=X.va:C={"X-WebChannel-Client-Profile":X.va}),this.g.S=C,(C=X&&X.Sb)&&!y(C)&&(this.g.m=C),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!y(X)&&(this.g.D=X,C=this.h,C!==null&&X in C&&(C=this.h,X in C&&delete C[X])),this.j=new Eu(this)}m(Fs,vt),Fs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fs.prototype.close=function(){BA(this.g)},Fs.prototype.o=function(C){var X=this.g;if(typeof C=="string"){var ve={};ve.__data__=C,C=ve}else this.u&&(ve={},ve.__data__=Ye(C),C=ve);X.i.push(new ir(X.Ya++,C)),X.G==3&&Q(X)},Fs.prototype.N=function(){this.g.l=null,delete this.j,BA(this.g),delete this.g,Fs.aa.N.call(this)};function hc(C){de.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var X=C.__sm__;if(X){e:{for(const ve in X){C=ve;break e}C=void 0}(this.i=C)&&(C=this.i,X=X!==null&&C in X?X[C]:void 0),this.data=X}else this.data=C}m(hc,de);function _u(){Se.call(this),this.status=1}m(_u,Se);function Eu(C){this.g=C}m(Eu,ks),Eu.prototype.ua=function(){Pe(this.g,"a")},Eu.prototype.ta=function(C){Pe(this.g,new hc(C))},Eu.prototype.sa=function(C){Pe(this.g,new _u)},Eu.prototype.ra=function(){Pe(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Fs.prototype.send=Fs.prototype.o,Fs.prototype.open=Fs.prototype.m,Fs.prototype.close=Fs.prototype.close,oJ=function(){return new Js},iJ=function(){return ht()},sJ=dt,ST={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},q.NO_ERROR=0,q.TIMEOUT=8,q.HTTP_ERROR=6,K_=q,ee.COMPLETE="complete",aJ=ee,oe.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",vt.prototype.listen=vt.prototype.K,jy=oe,Da.prototype.listenOnce=Da.prototype.L,Da.prototype.getLastError=Da.prototype.Ka,Da.prototype.getLastErrorCode=Da.prototype.Ba,Da.prototype.getStatus=Da.prototype.Z,Da.prototype.getResponseJson=Da.prototype.Oa,Da.prototype.getResponseText=Da.prototype.oa,Da.prototype.send=Da.prototype.ea,Da.prototype.setWithCredentials=Da.prototype.Ha,nJ=Da}).apply(typeof GN<"u"?GN:typeof self<"u"?self:typeof window<"u"?window:{});const JU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tl.UNAUTHENTICATED=new tl(null),tl.GOOGLE_CREDENTIALS=new tl("google-credentials-uid"),tl.FIRST_PARTY=new tl("first-party-uid"),tl.MOCK_USER=new tl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new iD("@firebase/firestore");function Ax(){return Hp.logLevel}function xr(t,...e){if(Hp.logLevel<=Gn.DEBUG){const r=e.map(ND);Hp.debug(`Firestore (${Xv}): ${t}`,...r)}}function rc(t,...e){if(Hp.logLevel<=Gn.ERROR){const r=e.map(ND);Hp.error(`Firestore (${Xv}): ${t}`,...r)}}function em(t,...e){if(Hp.logLevel<=Gn.WARN){const r=e.map(ND);Hp.warn(`Firestore (${Xv}): ${t}`,...r)}}function ND(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t="Unexpected state"){const e=`FIRESTORE (${Xv}) INTERNAL ASSERTION FAILED: `+t;throw rc(e),new Error(e)}function Xr(t,e){t||Gr()}function yn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Er extends AA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(tl.UNAUTHENTICATED))}shutdown(){}}class oxe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lxe{constructor(e){this.t=e,this.currentUser=tl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Xr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new qd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qd,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{xr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(xr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qd)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(xr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Xr(typeof n.accessToken=="string"),new lJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xr(e===null||typeof e=="string"),new tl(e)}}class cxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=tl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new cxe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(tl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dxe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Xr(this.o===void 0);const n=s=>{s.error!=null&&xr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,xr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{xr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):xr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Xr(typeof r.token=="string"),this.R=r.token,new dxe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=hxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function _n(t,e){return t<e?-1:t>e?1:0}function yv(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function uJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Er(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Er(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Er(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Er(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ur(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_n(this.nanoseconds,e.nanoseconds):_n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new ur(0,0))}static max(){return new tn(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,r,n){r===void 0?r=0:r>e.length&&Gr(),n===void 0?n=e.length-r:n>e.length-r&&Gr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return r2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof r2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class oa extends r2{construct(e,r,n){return new oa(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Er(tr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new oa(r)}static emptyPath(){return new oa([])}}const Axe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _s extends r2{construct(e,r,n){return new _s(e,r,n)}static isValidIdentifier(e){return Axe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_s.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _s(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Er(tr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Er(tr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Er(tr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Er(tr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _s(r)}static emptyPath(){return new _s([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.path=e}static fromPath(e){return new kr(oa.fromString(e))}static fromName(e){return new kr(oa.fromString(e).popFirst(5))}static empty(){return new kr(oa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&oa.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return oa.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kr(new oa(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function IT(t){return t.fields.find(e=>e.kind===2)}function Km(t){return t.fields.filter(e=>e.kind!==2)}zE.UNKNOWN_ID=-1;class q_{constructor(e,r){this.fieldPath=e,this.kind=r}}class n2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new n2(0,Au.min())}}function mxe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=tn.fromTimestamp(n===1e9?new ur(r+1,0):new ur(r,n));return new Au(a,kr.empty(),e)}function dJ(t){return new Au(t.readTime,t.key,-1)}class Au{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Au(tn.min(),kr.empty(),-1)}static max(){return new Au(tn.max(),kr.empty(),-1)}}function _D(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=kr.comparator(t.documentKey,e.documentKey),r!==0?r:_n(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(t){if(t.code!==tr.FAILED_PRECONDITION||t.message!==fJ)throw t;xr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Gr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new $t((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof $t?r:$t.resolve(r)}catch(r){return $t.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):$t.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):$t.reject(r)}static resolve(e){return new $t((r,n)=>{r(e)})}static reject(e){return new $t((r,n)=>{n(e)})}static waitFor(e){return new $t((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=$t.resolve(!1);for(const n of e)r=r.next(a=>a?$t.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new $t((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new $t((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new qd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new sb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=ED(n.target.error);this.V.reject(new sb(e,a))}}static open(e,r,n,a){try{return new cj(r,e.transaction(a,n))}catch(s){throw new sb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(xr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new gxe(r)}}class G0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,G0.S(lo())===12.2&&rc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xr("SimpleDb","Removing database:",e),ep(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gY())return!1;if(G0.v())return!0;const e=lo(),r=G0.S(e),n=0<r&&r<10,a=AJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(xr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new sb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new Er(tr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new Er(tr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new sb(e,o))},a.onupgradeneeded=s=>{xr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{xr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=cj.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),$t.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(xr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class pxe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ep(this.B.delete())}}class sb extends Er{constructor(e,r){super(tr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ym(t){return t.name==="IndexedDbTransactionError"}class gxe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(xr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(xr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ep(n)}add(e){return xr("SimpleDb","ADD",this.store.name,e,e),ep(this.store.add(e))}get(e){return ep(this.store.get(e)).next(r=>(r===void 0&&(r=null),xr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return xr("SimpleDb","DELETE",this.store.name,e),ep(this.store.delete(e))}count(){return xr("SimpleDb","COUNT",this.store.name),ep(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new $t((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new $t((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(e,r){xr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new $t((n,a)=>{r.onerror=s=>{const o=ED(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(e,r){const n=[];return new $t((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new pxe(l),u=r(l.primaryKey,l.value,c);if(u instanceof $t){const d=u.catch(f=>(c.done(),$t.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>$t.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ep(t){return new $t((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=ED(n.target.error);r(a)}})}let ZU=!1;function ED(t){const e=G0.S(lo());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Er("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZU||(ZU=!0,setTimeout(()=>{throw n},0)),n}}return t}class xxe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){xr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{xr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ym(r)?xr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await mg(r)}await this.X(6e4)})}}class vxe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return $t.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return xr("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(a,s)).next(l=>(xr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=dJ(s);_D(o,n)>0&&(n=o)}),new Au(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yu.oe=-1;function mw(t){return t==null}function a2(t){return t===0&&1/t==-1/0}function yxe(t){return typeof t=="number"&&Number.isInteger(t)&&!a2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=e7(e)),e=bxe(t.get(r),e);return e7(e)}function bxe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function e7(t){return t+""}function Pf(t){const e=t.length;if(Xr(e>=2),e===2)return Xr(t.charAt(0)===""&&t.charAt(1)===""),oa.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>r)&&Gr(),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:Gr()}s=o+2}return new oa(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){return[t,sc(e)]}function mJ(t,e,r){return[t,sc(e),r]}const wxe={},Nxe=["prefixPath","collectionGroup","readTime","documentId"],Cxe=["prefixPath","collectionGroup","documentId"],_xe=["collectionGroup","readTime","prefixPath","documentId"],Exe=["canonicalId","targetId"],Sxe=["targetId","path"],Ixe=["path","targetId"],jxe=["collectionId","parent"],Pxe=["indexId","uid"],Bxe=["uid","sequenceNumber"],Txe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kxe=["indexId","uid","orderedDocumentKey"],Fxe=["userId","collectionPath","documentId"],Oxe=["userId","collectionPath","largestBatchId"],Dxe=["userId","collectionGroup","largestBatchId"],pJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rxe=[...pJ,"documentOverlays"],gJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xJ=gJ,SD=[...xJ,"indexConfiguration","indexState","indexEntries"],Mxe=SD,Lxe=[...SD,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends hJ{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function uo(t,e){const r=yn(t);return G0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function pg(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,r){this.comparator=e,this.root=r||rl.EMPTY}insert(e,r){return new Ps(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,rl.BLACK,null,null))}remove(e){return new Ps(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rl.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KN(this.root,e,this.comparator,!1)}getReverseIterator(){return new KN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KN(this.root,e,this.comparator,!0)}}class KN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rl{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??rl.RED,this.left=a??rl.EMPTY,this.right=s??rl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new rl(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return rl.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gr();const e=this.left.check();if(e!==this.right.check())throw Gr();return e+(this.isRed()?0:1)}}rl.EMPTY=null,rl.RED=!0,rl.BLACK=!1;rl.EMPTY=new class{constructor(){this.size=0}get key(){throw Gr()}get value(){throw Gr()}get color(){throw Gr()}get left(){throw Gr()}get right(){throw Gr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new rl(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.comparator=e,this.data=new Ps(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new n7(this.data.getIterator())}getIteratorFrom(e){return new n7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Qa(this.comparator);return r.data=e,r}}class n7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.fields=e,e.sort(_s.comparator)}static empty(){return new Sc([])}unionWith(e){let r=new Qa(_s.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Sc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yv(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yJ("Invalid base64 string: "+s):s}}(e);return new Si(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new Si(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const Uxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eA(t){if(Xr(!!t),typeof t=="string"){let e=0;const r=Uxe.exec(t);if(Xr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ws(t.seconds),nanos:ws(t.nanos)}}function ws(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function tm(t){return typeof t=="string"?Si.fromBase64String(t):Si.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function jD(t){const e=t.mapValue.fields.__previous_value__;return ID(e)?jD(e):e}function s2(t){const e=eA(t.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qxe{constructor(e,r,n,a,s,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class rm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new rm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},W_={nullValue:"NULL_VALUE"};function $p(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ID(t)?4:bJ(t)?9007199254740991:uj(t)?10:11:Gr()}function Qf(t,e){if(t===e)return!0;const r=$p(t);if(r!==$p(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return s2(t).isEqual(s2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=eA(a.timestampValue),l=eA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return tm(a.bytesValue).isEqual(tm(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return ws(a.geoPointValue.latitude)===ws(s.geoPointValue.latitude)&&ws(a.geoPointValue.longitude)===ws(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return ws(a.integerValue)===ws(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=ws(a.doubleValue),l=ws(s.doubleValue);return o===l?a2(o)===a2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return yv(t.arrayValue.values||[],e.arrayValue.values||[],Qf);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(r7(o)!==r7(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Qf(o[c],l[c])))return!1;return!0}(t,e);default:return Gr()}}function i2(t,e){return(t.values||[]).find(r=>Qf(r,e))!==void 0}function nm(t,e){if(t===e)return 0;const r=$p(t),n=$p(e);if(r!==n)return _n(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return _n(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=ws(s.integerValue||s.doubleValue),c=ws(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return a7(t.timestampValue,e.timestampValue);case 4:return a7(s2(t),s2(e));case 5:return _n(t.stringValue,e.stringValue);case 6:return function(s,o){const l=tm(s),c=tm(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=_n(l[u],c[u]);if(d!==0)return d}return _n(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=_n(ws(s.latitude),ws(o.latitude));return l!==0?l:_n(ws(s.longitude),ws(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return s7(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,u,d;const f=s.fields||{},A=o.fields||{},h=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=A.value)===null||c===void 0?void 0:c.arrayValue,p=_n(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:s7(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===E0.mapValue&&o===E0.mapValue)return 0;if(s===E0.mapValue)return 1;if(o===E0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=_n(c[f],d[f]);if(A!==0)return A;const h=nm(l[c[f]],u[d[f]]);if(h!==0)return h}return _n(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Gr()}}function a7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _n(t,e);const r=eA(t),n=eA(e),a=_n(r.seconds,n.seconds);return a!==0?a:_n(r.nanos,n.nanos)}function s7(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=nm(r[a],n[a]);if(s)return s}return _n(r.length,n.length)}function bv(t){return PT(t)}function PT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=eA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return tm(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return kr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=PT(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${PT(r.fields[o])}`;return a+"}"}(t.mapValue):Gr()}function o2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function BT(t){return!!t&&"integerValue"in t}function l2(t){return!!t&&"arrayValue"in t}function i7(t){return!!t&&"nullValue"in t}function o7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function X_(t){return!!t&&"mapValue"in t}function uj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ib(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pg(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ib(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ib(t.arrayValue.values[r]);return e}return Object.assign({},t)}function bJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const wJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Vxe(t){return"nullValue"in t?W_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?o2(rm.empty(),kr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?uj(t)?wJ:{mapValue:{}}:Gr()}function Hxe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?o2(rm.empty(),kr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?wJ:"mapValue"in t?uj(t)?{mapValue:{}}:E0:Gr()}function l7(t,e){const r=nm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function c7(t,e){const r=nm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.value=e}static empty(){return new al({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!X_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ib(r)}setAll(e){let r=_s.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=ib(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());X_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qf(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];X_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){pg(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new al(ib(this.value))}}function NJ(t){const e=[];return pg(t.fields,(r,n)=>{const a=new _s([r]);if(X_(n)){const s=NJ(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new Sc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Cs(e,0,tn.min(),tn.min(),tn.min(),al.empty(),0)}static newFoundDocument(e,r,n,a){return new Cs(e,1,r,tn.min(),n,a,0)}static newNoDocument(e,r){return new Cs(e,2,r,tn.min(),tn.min(),al.empty(),0)}static newUnknownDocument(e,r){return new Cs(e,3,r,tn.min(),tn.min(),al.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=al.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=al.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,r){this.position=e,this.inclusive=r}}function u7(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=kr.comparator(kr.fromName(o.referenceValue),r.key):n=nm(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function d7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Qf(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,r="asc"){this.field=e,this.dir=r}}function $xe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{}class Kn extends CJ{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Gxe(e,r,n):r==="array-contains"?new zxe(e,n):r==="in"?new PJ(e,n):r==="not-in"?new Wxe(e,n):r==="array-contains-any"?new Xxe(e,n):new Kn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Kxe(e,n):new qxe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(nm(r,this.value)):r!==null&&$p(this.value)===$p(r)&&this.matchesComparison(nm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Gr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ta extends CJ{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Ta(e,r)}matches(e){return Nv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nv(t){return t.op==="and"}function TT(t){return t.op==="or"}function PD(t){return _J(t)&&Nv(t)}function _J(t){for(const e of t.filters)if(e instanceof Ta)return!1;return!0}function kT(t){if(t instanceof Kn)return t.field.canonicalString()+t.op.toString()+bv(t.value);if(PD(t))return t.filters.map(e=>kT(e)).join(",");{const e=t.filters.map(r=>kT(r)).join(",");return`${t.op}(${e})`}}function EJ(t,e){return t instanceof Kn?function(n,a){return a instanceof Kn&&n.op===a.op&&n.field.isEqual(a.field)&&Qf(n.value,a.value)}(t,e):t instanceof Ta?function(n,a){return a instanceof Ta&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&EJ(o,a.filters[l]),!0):!1}(t,e):void Gr()}function SJ(t,e){const r=t.filters.concat(e);return Ta.create(r,t.op)}function IJ(t){return t instanceof Kn?function(r){return`${r.field.canonicalString()} ${r.op} ${bv(r.value)}`}(t):t instanceof Ta?function(r){return r.op.toString()+" {"+r.getFilters().map(IJ).join(" ,")+"}"}(t):"Filter"}class Gxe extends Kn{constructor(e,r,n){super(e,r,n),this.key=kr.fromName(n.referenceValue)}matches(e){const r=kr.comparator(e.key,this.key);return this.matchesComparison(r)}}class Kxe extends Kn{constructor(e,r){super(e,"in",r),this.keys=jJ("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class qxe extends Kn{constructor(e,r){super(e,"not-in",r),this.keys=jJ("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function jJ(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>kr.fromName(n.referenceValue))}class zxe extends Kn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return l2(r)&&i2(r.arrayValue,this.value)}}class PJ extends Kn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&i2(this.value.arrayValue,r)}}class Wxe extends Kn{constructor(e,r){super(e,"not-in",r)}matches(e){if(i2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!i2(this.value.arrayValue,r)}}class Xxe extends Kn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!l2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>i2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxe{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function FT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new Yxe(t,e,r,n,a,s,o)}function Gp(t){const e=yn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>kT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),mw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>bv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>bv(n)).join(",")),e.ue=r}return e.ue}function pw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!$xe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!EJ(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d7(t.startAt,e.startAt)&&d7(t.endAt,e.endAt)}function WE(t){return kr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function XE(t,e){return t.filters.filter(r=>r instanceof Kn&&r.field.isEqual(e))}function f7(t,e,r){let n=W_,a=!0;for(const s of XE(t,e)){let o=W_,l=!0;switch(s.op){case"<":case"<=":o=Vxe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=W_}l7({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];l7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function h7(t,e,r){let n=E0,a=!0;for(const s of XE(t,e)){let o=E0,l=!0;switch(s.op){case">=":case">":o=Hxe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=E0}c7({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];c7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jxe(t,e,r,n,a,s,o,l){return new Yv(t,e,r,n,a,s,o,l)}function gw(t){return new Yv(t)}function A7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BJ(t){return t.collectionGroup!==null}function ob(t){const e=yn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Qa(_s.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new c2(s,n))}),r.has(_s.keyField().canonicalString())||e.ce.push(new c2(_s.keyField(),n))}return e.ce}function nd(t){const e=yn(t);return e.le||(e.le=Zxe(e,ob(t))),e.le}function Zxe(t,e){if(t.limitType==="F")return FT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new c2(a.field,s)});const r=t.endAt?new wv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new wv(t.startAt.position,t.startAt.inclusive):null;return FT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function OT(t,e){const r=t.filters.concat([e]);return new Yv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function YE(t,e,r){return new Yv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function dj(t,e){return pw(nd(t),nd(e))&&t.limitType===e.limitType}function TJ(t){return`${Gp(nd(t))}|lt:${t.limitType}`}function mx(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>IJ(a)).join(", ")}]`),mw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>bv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>bv(a)).join(",")),`Target(${n})`}(nd(t))}; limitType=${t.limitType})`}function xw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):kr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of ob(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=u7(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,ob(n),a)||n.endAt&&!function(o,l,c){const u=u7(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,ob(n),a))}(t,e)}function eve(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kJ(t){return(e,r)=>{let n=!1;for(const a of ob(t)){const s=tve(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function tve(t,e,r){const n=t.field.isKeyField()?kr.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?nm(c,u):Gr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Gr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pg(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return vJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rve=new Ps(kr.comparator);function ou(){return rve}const FJ=new Ps(kr.comparator);function Py(...t){let e=FJ;for(const r of t)e=e.insert(r.key,r);return e}function OJ(t){let e=FJ;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Bf(){return lb()}function DJ(){return lb()}function lb(){return new bm(t=>t.toString(),(t,e)=>t.isEqual(e))}const nve=new Ps(kr.comparator),ave=new Qa(kr.comparator);function On(...t){let e=ave;for(const r of t)e=e.add(r);return e}const sve=new Qa(_n);function ive(){return sve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a2(e)?"-0":e}}function RJ(t){return{integerValue:""+t}}function ove(t,e){return yxe(e)?RJ(e):BD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this._=void 0}}function lve(t,e,r){return t instanceof u2?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&ID(s)&&(s=jD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof Kp?LJ(t,e):t instanceof Cv?UJ(t,e):function(a,s){const o=MJ(a,s),l=m7(o)+m7(a.Pe);return BT(o)&&BT(a.Pe)?RJ(l):BD(a.serializer,l)}(t,e)}function cve(t,e,r){return t instanceof Kp?LJ(t,e):t instanceof Cv?UJ(t,e):r}function MJ(t,e){return t instanceof d2?function(n){return BT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class u2 extends fj{}class Kp extends fj{constructor(e){super(),this.elements=e}}function LJ(t,e){const r=QJ(e);for(const n of t.elements)r.some(a=>Qf(a,n))||r.push(n);return{arrayValue:{values:r}}}class Cv extends fj{constructor(e){super(),this.elements=e}}function UJ(t,e){let r=QJ(e);for(const n of t.elements)r=r.filter(a=>!Qf(a,n));return{arrayValue:{values:r}}}class d2 extends fj{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function m7(t){return ws(t.integerValue||t.doubleValue)}function QJ(t){return l2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e,r){this.field=e,this.transform=r}}function uve(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Kp&&a instanceof Kp||n instanceof Cv&&a instanceof Cv?yv(n.elements,a.elements,Qf):n instanceof d2&&a instanceof d2?Qf(n.Pe,a.Pe):n instanceof u2&&a instanceof u2}(t.transform,e.transform)}class dve{constructor(e,r){this.version=e,this.transformResults=r}}class Es{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Es}static exists(e){return new Es(void 0,e)}static updateTime(e){return new Es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Y_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hj{}function HJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zv(t.key,Es.none()):new Jv(t.key,t.data,Es.none());{const r=t.data,n=al.empty();let a=new Qa(_s.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new gA(t.key,n,new Sc(a.toArray()),Es.none())}}function fve(t,e,r){t instanceof Jv?function(a,s,o){const l=a.value.clone(),c=g7(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof gA?function(a,s,o){if(!Y_(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=g7(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($J(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function cb(t,e,r,n){return t instanceof Jv?function(s,o,l,c){if(!Y_(s.precondition,o))return l;const u=s.value.clone(),d=x7(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof gA?function(s,o,l,c){if(!Y_(s.precondition,o))return l;const u=x7(s.fieldTransforms,c,o),d=o.data;return d.setAll($J(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return Y_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function hve(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=MJ(n.transform,a||null);s!=null&&(r===null&&(r=al.empty()),r.set(n.field,s))}return r||null}function p7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&yv(n,a,(s,o)=>uve(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jv extends hj{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gA extends hj{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $J(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function g7(t,e,r){const n=new Map;Xr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,cve(o,l,r[a]))}return n}function x7(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,lve(s,o,e))}return n}class Zv extends hj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TD extends hj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&fve(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=cb(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=cb(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=DJ();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=HJ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(tn.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),On())}isEqual(e){return this.batchId===e.batchId&&yv(this.mutations,e.mutations,(r,n)=>p7(r,n))&&yv(this.baseMutations,e.baseMutations,(r,n)=>p7(r,n))}}class FD{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Xr(e.mutations.length===n.length);let a=function(){return nve}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new FD(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pi,Yn;function GJ(t){switch(t){default:return Gr();case tr.CANCELLED:case tr.UNKNOWN:case tr.DEADLINE_EXCEEDED:case tr.RESOURCE_EXHAUSTED:case tr.INTERNAL:case tr.UNAVAILABLE:case tr.UNAUTHENTICATED:return!1;case tr.INVALID_ARGUMENT:case tr.NOT_FOUND:case tr.ALREADY_EXISTS:case tr.PERMISSION_DENIED:case tr.FAILED_PRECONDITION:case tr.ABORTED:case tr.OUT_OF_RANGE:case tr.UNIMPLEMENTED:case tr.DATA_LOSS:return!0}}function KJ(t){if(t===void 0)return rc("GRPC error has no .code"),tr.UNKNOWN;switch(t){case Pi.OK:return tr.OK;case Pi.CANCELLED:return tr.CANCELLED;case Pi.UNKNOWN:return tr.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return tr.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return tr.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return tr.INTERNAL;case Pi.UNAVAILABLE:return tr.UNAVAILABLE;case Pi.UNAUTHENTICATED:return tr.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return tr.INVALID_ARGUMENT;case Pi.NOT_FOUND:return tr.NOT_FOUND;case Pi.ALREADY_EXISTS:return tr.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return tr.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return tr.FAILED_PRECONDITION;case Pi.ABORTED:return tr.ABORTED;case Pi.OUT_OF_RANGE:return tr.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return tr.UNIMPLEMENTED;case Pi.DATA_LOSS:return tr.DATA_LOSS;default:return Gr()}}(Yn=Pi||(Pi={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pve=new vp([4294967295,4294967295],0);function v7(t){const e=mve().encode(t),r=new rJ;return r.update(e),new Uint8Array(r.digest())}function y7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vp([r,n],0),new vp([a,s],0)]}class DD{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new By(`Invalid padding: ${r}`);if(n<0)throw new By(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new By(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new By(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=vp.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(vp.fromNumber(n)));return a.compare(pve)===1&&(a=new vp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=v7(e),[n,a]=y7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new DD(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=v7(e),[n,a]=y7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class By extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,vw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Aj(tn.min(),a,new Ps(_n),ou(),On())}}class vw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new vw(n,r,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class qJ{constructor(e,r){this.targetId=e,this.me=r}}class zJ{constructor(e,r,n=Si.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class b7{constructor(){this.fe=0,this.ge=N7(),this.pe=Si.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=On(),r=On(),n=On();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Gr()}}),new vw(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=N7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gve{constructor(e){this.Le=e,this.Be=new Map,this.ke=ou(),this.qe=w7(),this.Qe=new Ps(_n)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Gr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(WE(s))if(n===0){const o=new kr(s.path);this.Ue(r,o,Cs.newNoDocument(o,tn.min()))}else Xr(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=tm(n).toUint8Array()}catch(c){if(c instanceof yJ)return em("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new DD(o,a,s)}catch(c){return em(c instanceof By?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&WE(l.target)){const c=new kr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Cs.newNoDocument(c,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=On();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const a=new Aj(e,r,this.Qe,this.ke,n);return this.ke=ou(),this.qe=w7(),this.Qe=new Ps(_n),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new b7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Qa(_n),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||xr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new b7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function w7(){return new Ps(kr.comparator)}function N7(){return new Ps(kr.comparator)}const xve={asc:"ASCENDING",desc:"DESCENDING"},vve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yve={and:"AND",or:"OR"};class bve{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function DT(t,e){return t.useProto3Json||mw(e)?e:{value:e}}function _v(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wve(t,e){return _v(t,e.toTimestamp())}function Fo(t){return Xr(!!t),tn.fromTimestamp(function(r){const n=eA(r);return new ur(n.seconds,n.nanos)}(t))}function RD(t,e){return RT(t,e).canonicalString()}function RT(t,e){const r=function(a){return new oa(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function XJ(t){const e=oa.fromString(t);return Xr(sZ(e)),e}function f2(t,e){return RD(t.databaseId,e.path)}function Lh(t,e){const r=XJ(e);if(r.get(1)!==t.databaseId.projectId)throw new Er(tr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Er(tr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new kr(ZJ(r))}function YJ(t,e){return RD(t.databaseId,e)}function JJ(t){const e=XJ(t);return e.length===4?oa.emptyPath():ZJ(e)}function MT(t){return new oa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZJ(t){return Xr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C7(t,e,r){return{name:f2(t,e),fields:r.value.mapValue.fields}}function Nve(t,e,r){const n=Lh(t,e.name),a=Fo(e.updateTime),s=e.createTime?Fo(e.createTime):tn.min(),o=new al({mapValue:{fields:e.fields}}),l=Cs.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Cve(t,e){return"found"in e?function(n,a){Xr(!!a.found),a.found.name,a.found.updateTime;const s=Lh(n,a.found.name),o=Fo(a.found.updateTime),l=a.found.createTime?Fo(a.found.createTime):tn.min(),c=new al({mapValue:{fields:a.found.fields}});return Cs.newFoundDocument(s,o,l,c)}(t,e):"missing"in e?function(n,a){Xr(!!a.missing),Xr(!!a.readTime);const s=Lh(n,a.missing),o=Fo(a.readTime);return Cs.newNoDocument(s,o)}(t,e):Gr()}function _ve(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Gr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Xr(d===void 0||typeof d=="string"),Si.fromBase64String(d||"")):(Xr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Si.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?tr.UNKNOWN:KJ(u.code);return new Er(d,u.message||"")}(o);r=new zJ(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Lh(t,n.document.name),s=Fo(n.document.updateTime),o=n.document.createTime?Fo(n.document.createTime):tn.min(),l=new al({mapValue:{fields:n.document.fields}}),c=Cs.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new J_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Lh(t,n.document),s=n.readTime?Fo(n.readTime):tn.min(),o=Cs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new J_([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Lh(t,n.document),s=n.removedTargetIds||[];r=new J_([],s,a,null)}else{if(!("filter"in e))return Gr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Ave(a,s),l=n.targetId;r=new qJ(l,o)}}return r}function h2(t,e){let r;if(e instanceof Jv)r={update:C7(t,e.key,e.value)};else if(e instanceof Zv)r={delete:f2(t,e.key)};else if(e instanceof gA)r={update:C7(t,e.key,e.data),updateMask:Bve(e.fieldMask)};else{if(!(e instanceof TD))return Gr();r={verify:f2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof u2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof d2)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Gr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:wve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Gr()}(t,e.precondition)),r}function LT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Es.updateTime(Fo(s.updateTime)):s.exists!==void 0?Es.exists(s.exists):Es.none()}(e.currentDocument):Es.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)Xr(l.setToServerValue==="REQUEST_TIME"),c=new u2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Kp(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Cv(d)}else"increment"in l?c=new d2(o,l.increment):Gr();const u=_s.fromServerFormat(l.fieldPath);return new VJ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=Lh(t,e.update.name),s=new al({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Sc(u.map(d=>_s.fromServerFormat(d)))}(e.updateMask);return new gA(a,s,o,r,n)}return new Jv(a,s,r,n)}if(e.delete){const a=Lh(t,e.delete);return new Zv(a,r)}if(e.verify){const a=Lh(t,e.verify);return new TD(a,r)}return Gr()}function Eve(t,e){return t&&t.length>0?(Xr(e!==void 0),t.map(r=>function(a,s){let o=a.updateTime?Fo(a.updateTime):Fo(s);return o.isEqual(tn.min())&&(o=Fo(s)),new dve(o,a.transformResults||[])}(r,e))):[]}function eZ(t,e){return{documents:[YJ(t,e.path)]}}function tZ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YJ(t,a);const s=function(u){if(u.length!==0)return aZ(Ta.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:px(A.field),direction:Ive(A.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=DT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function rZ(t){let e=JJ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Xr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=nZ(f);return A instanceof Ta&&PD(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(m){return new c2(gx(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,mw(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,h=f.values||[];return new wv(h,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,h=f.values||[];return new wv(h,A)}(r.endAt)),Jxe(e,a,o,s,l,"F",c,u)}function Sve(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function nZ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gx(r.unaryFilter.field);return Kn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=gx(r.unaryFilter.field);return Kn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gx(r.unaryFilter.field);return Kn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gx(r.unaryFilter.field);return Kn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Gr()}}(t):t.fieldFilter!==void 0?function(r){return Kn.create(gx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ta.create(r.compositeFilter.filters.map(n=>nZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Gr()}}(r.compositeFilter.op))}(t):Gr()}function Ive(t){return xve[t]}function jve(t){return vve[t]}function Pve(t){return yve[t]}function px(t){return{fieldPath:t.canonicalString()}}function gx(t){return _s.fromServerFormat(t.fieldPath)}function aZ(t){return t instanceof Kn?function(r){if(r.op==="=="){if(o7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NAN"}};if(i7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(o7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NOT_NAN"}};if(i7(r.value))return{unaryFilter:{field:px(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:px(r.field),op:jve(r.op),value:r.value}}}(t):t instanceof Ta?function(r){const n=r.getFilters().map(a=>aZ(a));return n.length===1?n[0]:{compositeFilter:{op:Pve(r.op),filters:n}}}(t):Gr()}function Bve(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function sZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,r,n,a,s=tn.min(),o=tn.min(),l=Si.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(e){this.ct=e}}function Tve(t,e){let r;if(e.document)r=Nve(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=kr.fromSegments(e.noDocument.path),a=zp(e.noDocument.readTime);r=Cs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Gr();{const n=kr.fromSegments(e.unknownDocument.path),a=zp(e.unknownDocument.version);r=Cs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new ur(a[0],a[1]);return tn.fromTimestamp(s)}(e.readTime)),r}function _7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:JE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:f2(s,o.key),fields:o.data.value.mapValue.fields,updateTime:_v(s,o.version.toTimestamp()),createTime:_v(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:qp(e.version)};else{if(!e.isUnknownDocument())return Gr();n.unknownDocument={path:r.path.toArray(),version:qp(e.version)}}return n}function JE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zp(t){const e=new ur(t.seconds,t.nanoseconds);return tn.fromTimestamp(e)}function tp(t,e){const r=(e.baseMutations||[]).map(s=>LT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>LT(t.ct,s)),a=ur.fromMillis(e.localWriteTimeMs);return new kD(e.batchId,a,r,n)}function Ty(t){const e=zp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?zp(t.lastLimboFreeSnapshotVersion):tn.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Xr(s.documents.length===1),nd(gw(JJ(s.documents[0])))}(t.query):function(s){return nd(rZ(s))}(t.query),new Bh(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Si.fromBase64String(t.resumeToken))}function oZ(t,e){const r=qp(e.snapshotVersion),n=qp(e.lastLimboFreeSnapshotVersion);let a;a=WE(e.target)?eZ(t.ct,e.target):tZ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function lZ(t){const e=rZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?YE(e,e.limit,"L"):e}function f3(t,e){return new OD(e.largestBatchId,LT(t.ct,e.overlayMutation))}function E7(t,e){const r=e.path.lastSegment();return[t,sc(e.path.popLast()),r]}function S7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:qp(n.readTime),documentKey:sc(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{getBundleMetadata(e,r){return I7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:zp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return I7(e).put(function(a){return{bundleId:a.id,createTime:qp(Fo(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return j7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:lZ(s.bundledQuery),readTime:zp(s.readTime)}}(n)})}saveNamedQuery(e,r){return j7(e).put(function(a){return{name:a.name,readTime:qp(Fo(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function I7(t){return uo(t,"bundles")}function j7(t){return uo(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new mj(e,n)}getOverlay(e,r){return W1(e).get(E7(this.userId,r)).next(n=>n?f3(this.serializer,n):null)}getOverlays(e,r){const n=Bf();return $t.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new OD(r,o);a.push(this.ht(e,l))}),$t.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(sc(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(W1(e).j("collectionPathOverlayIndex",l))}),$t.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Bf(),s=sc(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return W1(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=f3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Bf();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return W1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=f3(this.serializer,u);s.size()<a||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return W1(e).put(function(a,s,o){const[l,c,u]=E7(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:h2(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function W1(t){return uo(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{Pt(e){return uo(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Si.fromUint8Array(n):Si.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(ws(e.integerValue));else if("doubleValue"in e){const n=ws(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),a2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=eA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(tm(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?bJ(e)?this.dt(r,Number.MAX_SAFE_INTEGER):uj(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Gr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(ws(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),kr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}rp.vt=new rp;function Ove(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function P7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Ove(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class Dve{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=P7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=P7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Rve{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Mve{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class X1{constructor(){this.jt=new Dve,this.Ht=new Rve(this.jt),this.Jt=new Mve(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new np(this.indexId,this.documentKey,this.arrayValue,n)}}function qA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=B7(t.arrayValue,e.arrayValue),r!==0?r:(r=B7(t.directionalValue,e.directionalValue),r!==0?r:kr.comparator(t.documentKey,e.documentKey)))}function B7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e){this.Xt=new Qa((r,n)=>_s.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Xr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=IT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Km(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Qa(_s.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new q_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new q_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new q_(n.field,n.dir==="asc"?0:1)));return new zE(zE.UNKNOWN_ID,this.collectionId,r,n2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cZ(t){var e,r;if(Xr(t instanceof Kn||t instanceof Ta),t instanceof Kn){if(t instanceof PJ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>Kn.create(t.field,"==",s)))||[];return Ta.create(a,"or")}return t}const n=t.filters.map(a=>cZ(a));return Ta.create(n,t.op)}function Lve(t){if(t.getFilters().length===0)return[];const e=VT(cZ(t));return Xr(uZ(e)),UT(e)||QT(e)?[e]:e.getFilters()}function UT(t){return t instanceof Kn}function QT(t){return t instanceof Ta&&PD(t)}function uZ(t){return UT(t)||QT(t)||function(r){if(r instanceof Ta&&TT(r)){for(const n of r.getFilters())if(!UT(n)&&!QT(n))return!1;return!0}return!1}(t)}function VT(t){if(Xr(t instanceof Kn||t instanceof Ta),t instanceof Kn)return t;if(t.filters.length===1)return VT(t.filters[0]);const e=t.filters.map(n=>VT(n));let r=Ta.create(e,t.op);return r=ZE(r),uZ(r)?r:(Xr(r instanceof Ta),Xr(Nv(r)),Xr(r.filters.length>1),r.filters.reduce((n,a)=>MD(n,a)))}function MD(t,e){let r;return Xr(t instanceof Kn||t instanceof Ta),Xr(e instanceof Kn||e instanceof Ta),r=t instanceof Kn?e instanceof Kn?function(a,s){return Ta.create([a,s],"and")}(t,e):k7(t,e):e instanceof Kn?k7(e,t):function(a,s){if(Xr(a.filters.length>0&&s.filters.length>0),Nv(a)&&Nv(s))return SJ(a,s.getFilters());const o=TT(a)?a:s,l=TT(a)?s:a,c=o.filters.map(u=>MD(u,l));return Ta.create(c,"or")}(t,e),ZE(r)}function k7(t,e){if(Nv(e))return SJ(e,t.getFilters());{const r=e.filters.map(n=>MD(t,n));return Ta.create(r,"or")}}function ZE(t){if(Xr(t instanceof Kn||t instanceof Ta),t instanceof Kn)return t;const e=t.getFilters();if(e.length===1)return ZE(e[0]);if(_J(t))return t;const r=e.map(a=>ZE(a)),n=[];return r.forEach(a=>{a instanceof Kn?n.push(a):a instanceof Ta&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Ta.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(){this.un=new LD}addToCollectionParentIndex(e,r){return this.un.add(r),$t.resolve()}getCollectionParents(e,r){return $t.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return $t.resolve()}deleteFieldIndex(e,r){return $t.resolve()}deleteAllFieldIndexes(e){return $t.resolve()}createTargetIndexes(e,r){return $t.resolve()}getDocumentsMatchingTarget(e,r){return $t.resolve(null)}getIndexType(e,r){return $t.resolve(0)}getFieldIndexes(e,r){return $t.resolve([])}getNextCollectionGroupToUpdate(e){return $t.resolve(null)}getMinOffset(e,r){return $t.resolve(Au.min())}getMinOffsetFromCollectionGroup(e,r){return $t.resolve(Au.min())}updateCollectionGroup(e,r,n){return $t.resolve()}updateIndexEntries(e,r){return $t.resolve()}}class LD{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Qa(oa.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Qa(oa.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new Uint8Array(0);class Qve{constructor(e,r){this.databaseId=r,this.cn=new LD,this.ln=new bm(n=>Gp(n),(n,a)=>pw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:sc(a)};return F7(e).put(s)}return $t.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[uJ(r),""],!1,!0);return F7(e).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Pf(o.parent))}return n})}addFieldIndex(e,r){const n=Y1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Hg(e);return s.next(l=>{o.put(S7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=Y1(e),a=Hg(e),s=Vg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Y1(e),n=Vg(e),a=Hg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return $t.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new T7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Vg(e);let a=!0;const s=new Map;return $t.forEach(this.hn(r),o=>this.Pn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=On();const l=[];return $t.forEach(s,(c,u)=>{xr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Gp(r)}`);const d=function(b,w){const j=IT(w);if(j===void 0)return null;for(const I of XE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of Km(w))for(const _ of XE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of Km(w)){const S=_.kind===0?f7(b,_.fieldPath,b.startAt):h7(b,_.fieldPath,b.startAt);j.push(S.value),I&&(I=S.inclusive)}return new wv(j,I)}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of Km(w)){const S=_.kind===0?h7(b,_.fieldPath,b.endAt):f7(b,_.fieldPath,b.endAt);j.push(S.value),I&&(I=S.inclusive)}return new wv(j,I)}(u,c),m=this.In(c,u,A),p=this.In(c,u,h),g=this.Tn(c,u,f),x=this.En(c.indexId,d,m,A.inclusive,p,h.inclusive,g);return $t.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=kr.fromSegments(w.documentKey);o.has(j)||(o=o.add(j),l.push(j))})}))}).next(()=>l)}return $t.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Lve(Ta.create(e.filters,"and")).map(n=>FT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const A=r?this.dn(r[f/u]):qN,h=this.An(e,A,n[f%u],a),m=this.Rn(e,A,s[f%u],o),p=l.map(g=>this.An(e,A,g,!0));d.push(...this.createRange(h,m,p))}return d}An(e,r,n,a){const s=new np(e,kr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new np(e,kr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new T7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.hn(r);return $t.forEach(a,s=>this.Pn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new Qa(_s.comparator),d=!1;for(const f of c.filters)for(const A of f.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?d=!0:u=u.add(A.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new X1;for(const a of Km(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);rp.vt.It(s,o)}return n.zt()}dn(e){const r=new X1;return rp.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new X1;return rp.vt.It(o2(this.databaseId,r),n.Yt(function(s){const o=Km(s);return o.length===0?0:o[o.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new X1);let s=0;for(const o of Km(e)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&l2(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);rp.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new X1;c.seed(l.zt()),rp.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof Kn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Y1(e),a=Hg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return $t.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,f){const A=f?new n2(f.sequenceNumber,new Au(zp(f.readTime),new kr(Pf(f.documentKey)),f.largestBatchId)):n2.empty(),h=d.fields.map(([m,p])=>new q_(_s.fromServerFormat(m),p));return new zE(d.indexId,d.collectionGroup,h,A)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:_n(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=Y1(e),s=Hg(e);return this.yn(e).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>$t.forEach(l,c=>s.put(S7(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return $t.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?$t.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),$t.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?$t.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Vg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Vg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Vg(e);let s=new Qa(qA);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new np(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Qa(qA);const a=this.Vn(r,e);if(a==null)return n;const s=IT(r);if(s!=null){const o=e.data.field(s.fieldPath);if(l2(o))for(const l of o.arrayValue.values||[])n=n.add(new np(r.indexId,e.key,this.dn(l),a))}else n=n.add(new np(r.indexId,e.key,qN,a));return n}bn(e,r,n,a,s){xr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,f,A){const h=c.getIterator(),m=u.getIterator();let p=Qg(h),g=Qg(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(f(g),g=Qg(m)):y?(A(p),p=Qg(h)):(p=Qg(h),g=Qg(m))}}(a,s,qA,l=>{o.push(this.Dn(e,r,n,l))},l=>{o.push(this.vn(e,r,n,l))}),$t.waitFor(o)}yn(e){let r=1;return Hg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>qA(o,l)).filter((o,l,c)=>!l||qA(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=qA(o,e),c=qA(o,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,qN,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,qN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return qA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(O7)}getMinOffset(e,r){return $t.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Gr())).next(O7)}}function F7(t){return uo(t,"collectionParents")}function Vg(t){return uo(t,"indexEntries")}function Y1(t){return uo(t,"indexConfiguration")}function Hg(t){return uo(t,"indexState")}function O7(t){Xr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;_D(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Au(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new wc(e,wc.DEFAULT_COLLECTION_PERCENTILE,wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,f,A)=>(l++,A.delete()));s.push(c.next(()=>{Xr(l===1)}));const u=[];for(const d of r.mutations){const f=mJ(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return $t.waitFor(s).next(()=>u)}function eS(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Gr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wc.DEFAULT_COLLECTION_PERCENTILE=10,wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wc.DEFAULT=new wc(41943040,wc.DEFAULT_COLLECTION_PERCENTILE,wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wc.DISABLED=new wc(-1,0,0);class pj{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Xr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new pj(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zA(e).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=xx(e),o=zA(e);return o.add({}).next(l=>{Xr(typeof l=="number");const c=new kD(l,r,n,a),u=function(h,m,p){const g=p.baseMutations.map(y=>h2(h.ct,y)),x=p.mutations.map(y=>h2(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let f=new Qa((A,h)=>_n(A.canonicalString(),h.canonicalString()));for(const A of a){const h=mJ(this.userId,A.key.path,l);f=f.add(A.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,wxe))}return f.forEach(A=>{d.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),$t.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return zA(e).get(r).next(n=>n?(Xr(n.userId===this.userId),tp(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?$t.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return zA(e).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(Xr(l.batchId>=n),s=tp(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zA(e).U("userMutationsIndex",r).next(n=>n.map(a=>tp(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=z_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return xx(e).J({range:a},(o,l,c)=>{const[u,d,f]=o,A=Pf(d);if(u===this.userId&&r.path.isEqual(A))return zA(e).get(f).next(h=>{if(!h)throw Gr();Xr(h.userId===this.userId),s.push(tp(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qa(_n);const a=[];return r.forEach(s=>{const o=z_(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=xx(e).J({range:l},(u,d,f)=>{const[A,h,m]=u,p=Pf(h);A===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),$t.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=z_(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new Qa(_n);return xx(e).J({range:o},(c,u,d)=>{const[f,A,h]=c,m=Pf(A);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(zA(e).get(s).next(o=>{if(o===null)throw Gr();Xr(o.userId===this.userId),n.push(tp(this.serializer,o))}))}),$t.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return dZ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),$t.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return $t.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return xx(e).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Pf(s[1]);a.push(c)}else l.done()}).next(()=>{Xr(a.length===0)})})}containsKey(e,r){return fZ(e,this.userId,r)}Nn(e){return hZ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fZ(t,e,r){const n=z_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return xx(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,A]=l;d===e&&f===a&&(o=!0),u.done()}).next(()=>o)}function zA(t){return uo(t,"mutations")}function xx(t){return uo(t,"documentMutations")}function hZ(t){return uo(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wp(0)}static kn(){return new Wp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Wp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>tn.fromTimestamp(new ur(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>$g(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Xr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return $g(e).J((o,l)=>{const c=Ty(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>$t.waitFor(s)).next(()=>a)}forEachTarget(e,r){return $g(e).J((n,a)=>{const s=Ty(a);r(s)})}qn(e){return R7(e).get("targetGlobalKey").next(r=>(Xr(r!==null),r))}Qn(e,r){return R7(e).put("targetGlobalKey",r)}Kn(e,r){return $g(e).put(oZ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Gp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return $g(e).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Ty(l);pw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=y0(e);return r.forEach(o=>{const l=sc(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),$t.waitFor(a)}removeMatchingKeys(e,r,n){const a=y0(e);return $t.forEach(r,s=>{const o=sc(s.path);return $t.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=y0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=y0(e);let s=On();return a.J({range:n,H:!0},(o,l,c)=>{const u=Pf(o[1]),d=new kr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=sc(r.path),a=IDBKeyRange.bound([n],[uJ(n)],!1,!0);let s=0;return y0(e).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return $g(e).get(r).next(n=>n?Ty(n):null)}}function $g(t){return uo(t,"targets")}function R7(t){return uo(t,"targetGlobal")}function y0(t){return uo(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7([t,e],[r,n]){const a=_n(t,r);return a===0?_n(e,n):a}class Hve{constructor(e){this.Un=e,this.buffer=new Qa(M7),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();M7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class $ve{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){xr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ym(r)?xr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await mg(r)}await this.Hn(3e5)})}}class Gve{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return $t.resolve(Yu.oe);const n=new Hve(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(xr("LruGarbageCollector","Garbage collection skipped; disabled"),$t.resolve(D7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(xr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(xr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Ax()<=Gn.DEBUG&&xr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),$t.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Kve(t,e){return new Gve(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qve{constructor(e,r){this.db=e,this.garbageCollector=Kve(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return zN(e,n)}removeReference(e,r,n){return zN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return zN(e,r)}nr(e,r){return function(a,s){let o=!1;return hZ(a).Y(l=>fZ(a,l,s).next(c=>(c&&(o=!0),$t.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(o,l)=>{if(l<=r){const c=this.nr(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,tn.min()),y0(e).delete(function(f){return[0,sc(f.path)]}(o))))});a.push(c)}}).next(()=>$t.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return zN(e,r)}tr(e,r){const n=y0(e);let a,s=Yu.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==Yu.oe&&r(new kr(Pf(a)),s),s=u,a=c):s=Yu.oe}).next(()=>{s!==Yu.oe&&r(new kr(Pf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zN(t,e){return y0(t).put(function(n,a){return{targetId:0,path:sc(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(){this.changes=new bm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?$t.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Om(e).put(n)}removeEntry(e,r,n){return Om(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],JE(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Cs.newInvalidDocument(r);return Om(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(J1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Cs.newInvalidDocument(r)};return Om(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(J1(r))},(a,s)=>{n={document:this.ir(r,s),size:eS(s)}}).next(()=>n)}getEntries(e,r){let n=ou();return this._r(e,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(e,r){let n=ou(),a=new Ps(kr.comparator);return this._r(e,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,eS(o))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return $t.resolve();let a=new Qa(Q7);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(J1(a.first()),J1(a.last())),o=a.getIterator();let l=o.getNext();return Om(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=kr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&Q7(l,f)<0;)n(l,null),l=o.getNext();l&&l.isEqual(f)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(J1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),JE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Om(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=ou();for(const f of u){const A=this.ir(kr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);A.isFoundDocument()&&(xw(r,A)||a.has(A.key))&&(d=d.insert(A.key,A))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=ou();const o=U7(r,n),l=U7(r,Au.max());return Om(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const f=this.ir(kr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Wve(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return L7(e).get("remoteDocumentGlobalKey").next(r=>(Xr(!!r),r))}rr(e,r){return L7(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Tve(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(tn.min())))return n}return Cs.newInvalidDocument(e)}}function mZ(t){return new zve(t)}class Wve extends AZ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new bm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Qa((s,o)=>_n(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=_7(this.cr.serializer,o);a=a.add(s.path.popLast());const u=eS(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=_7(this.cr.serializer,o.convertToNoDocument(tn.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),$t.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function L7(t){return uo(t,"remoteDocumentGlobal")}function Om(t){return uo(t,"remoteDocumentsV14")}function J1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U7(t,e){const r=e.documentKey.path.toArray();return[t,JE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Q7(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=_n(r[s],n[s]),a)return a;return a=_n(r.length,n.length),a||(a=_n(r[r.length-2],n[n.length-2]),a||_n(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&cb(n.mutation,a,Sc.empty(),ur.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,On()).next(()=>n))}getLocalViewOfDocuments(e,r,n=On()){const a=Bf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=Py();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Bf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,On()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=ou();const o=lb(),l=function(){return lb()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof gA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),cb(d.mutation,u,d.mutation.getFieldMask(),ur.now())):o.set(u.key,Sc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new Xve(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=lb();let a=new Ps((o,l)=>o-l),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Sc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||On()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=DJ();d.forEach(A=>{if(!s.has(A)){const h=HJ(r.get(A),n.get(A));h!==null&&f.set(A,h),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return $t.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return kr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):BJ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):$t.resolve(Bf());let l=-1,c=s;return o.next(u=>$t.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?$t.resolve():this.remoteDocumentCache.getEntry(e,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,On())).next(d=>({batchId:l,changes:OJ(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new kr(r)).next(n=>{let a=Py();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=Py();return this.indexManager.getCollectionParents(e,s).next(l=>$t.forEach(l,c=>{const u=function(f,A){return new Yv(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Cs.newInvalidDocument(d)))});let l=Py();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&cb(d.mutation,u,Sc.empty(),ur.now()),xw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yve{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return $t.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Fo(a.createTime)}}(r)),$t.resolve()}getNamedQuery(e,r){return $t.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:lZ(a.bundledQuery),readTime:Fo(a.readTime)}}(r)),$t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jve{constructor(){this.overlays=new Ps(kr.comparator),this.Ir=new Map}getOverlay(e,r){return $t.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bf();return $t.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),$t.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),$t.resolve()}getOverlaysForCollection(e,r,n){const a=Bf(),s=r.length+1,o=new kr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return $t.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Ps((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Bf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Bf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return $t.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new OD(r,n));let s=this.Ir.get(r);s===void 0&&(s=On(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zve{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(e){return $t.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,$t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.Tr=new Qa(_o.Er),this.dr=new Qa(_o.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new _o(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new _o(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new kr(new oa([])),n=new _o(r,e),a=new _o(r,e+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new kr(new oa([])),n=new _o(r,e),a=new _o(r,e+1);let s=On();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new _o(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class _o{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return kr.comparator(e.key,r.key)||_n(e.wr,r.wr)}static Ar(e,r){return _n(e.wr,r.wr)||kr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1e{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Qa(_o.Er)}checkEmpty(e){return $t.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kD(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new _o(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $t.resolve(o)}lookupMutationBatch(e,r){return $t.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return $t.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $t.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new _o(r,0),a=new _o(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),$t.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qa(_n);return r.forEach(a=>{const s=new _o(a,0),o=new _o(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),$t.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;kr.isDocumentKey(s)||(s=s.child(""));const o=new _o(new kr(s),0);let l=new Qa(_n);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),$t.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Xr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return $t.forEach(r.mutations,a=>{const s=new _o(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new _o(r,0),a=this.br.firstAfterOrEqual(n);return $t.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$t.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1e{constructor(e){this.Mr=e,this.docs=function(){return new Ps(kr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return $t.resolve(n?n.document.mutableCopy():Cs.newInvalidDocument(r))}getEntries(e,r){let n=ou();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Cs.newInvalidDocument(a))}),$t.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=ou();const o=r.path,l=new kr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||_D(dJ(d),n)<=0||(a.has(d.key)||xw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return $t.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Gr()}Or(e,r){return $t.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new r1e(this)}getSize(e){return $t.resolve(this.size)}}class r1e extends AZ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),$t.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1e{constructor(e){this.persistence=e,this.Nr=new bm(r=>Gp(r),pw),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new UD,this.targetCount=0,this.kr=Wp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),$t.resolve()}getLastRemoteSnapshotVersion(e){return $t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $t.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$t.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),$t.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Wp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,$t.resolve()}updateTargetData(e,r){return this.Kn(r),$t.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,$t.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),$t.waitFor(s).next(()=>a)}getTargetCount(e){return $t.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return $t.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),$t.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),$t.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),$t.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return $t.resolve(n)}containsKey(e,r){return $t.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Yu(0),this.Kr=!1,this.Kr=!0,this.$r=new Zve,this.referenceDelegate=e(this),this.Ur=new n1e(this),this.indexManager=new Uve,this.remoteDocumentCache=function(a){return new t1e(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new iZ(r),this.Gr=new Yve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Jve,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new e1e(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){xr("MemoryPersistence","Starting transaction:",e);const a=new a1e(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return $t.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class a1e extends hJ{constructor(e){super(),this.currentSequenceNumber=e}}class gj{constructor(e){this.persistence=e,this.Jr=new UD,this.Yr=null}static Zr(e){return new gj(e)}get Xr(){if(this.Yr)return this.Yr;throw Gr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),$t.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),$t.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),$t.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $t.forEach(this.Xr,n=>{const a=kr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,tn.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return $t.or([()=>$t.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(e){this.serializer=e}O(e,r,n,a){const s=new cj("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t7,{unique:!0}),c.createObjectStore("documentMutations")}(e),V7(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=$t.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),V7(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tn.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t7,{unique:!0});const f=u.store("mutations"),A=d.map(h=>f.put(h));return $t.waitFor(A)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Fxe});u.createIndex("collectionPathOverlayIndex",Oxe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Dxe,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Nxe});u.createIndex("documentKeyIndex",Cxe),u.createIndex("collectionGroupIndex",_xe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Pxe}).createIndex("sequenceNumberIndex",Bxe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Txe}).createIndex("documentKeyIndex",kxe,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=eS(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>$t.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>$t.forEach(l,c=>{Xr(c.userId===s.userId);const u=tp(this.serializer,c);return dZ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new oa(o),u=function(f){return[0,sc(f)]}(c);s.push(r.get(u).next(d=>d?$t.resolve():(f=>r.put({targetId:0,path:sc(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>$t.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:jxe});const n=r.store("collectionParents"),a=new LD,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:sc(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new oa(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=Pf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=Ty(a),o=oZ(this.serializer,s);return r.put(o)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new kr(oa.fromString(f.document.name).popFirst(5)):f.noDocument?kr.fromSegments(f.noDocument.path):f.unknownDocument?kr.fromSegments(f.unknownDocument.path):Gr()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>$t.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=mZ(this.serializer),s=new gZ(gj.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:On();tp(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),$t.forEach(l,(c,u)=>{const d=new tl(u),f=mj.lt(this.serializer,d),A=s.getIndexManager(d),h=pj.lt(d,this.serializer,A,s.referenceDelegate);return new pZ(a,h,f,A).recalculateAndSaveOverlaysForDocumentKeys(new jT(r,Yu.oe),c).next()})})}}function V7(t){t.createObjectStore("targetDocuments",{keyPath:Sxe}).createIndex("documentTargetsIndex",Ixe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Exe,{unique:!0}),t.createObjectStore("targetGlobal")}const h3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QD{constructor(e,r,n,a,s,o,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!QD.D())throw new Er(tr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qve(this,a),this.Ai=r+"main",this.serializer=new iZ(c),this.Ri=new G0(this.Ai,this.hi,new s1e(this.serializer)),this.$r=new Fve,this.Ur=new Vve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=mZ(this.serializer),this.Gr=new kve,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&rc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Er(tr.FAILED_PRECONDITION,h3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yu(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ym(e))return xr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Z1(e).get("owner").next(r=>$t.resolve(this.vi(r)))}Ci(e){return WN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=uo(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return $t.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$t.resolve(!0):Z1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Er(tr.FAILED_PRECONDITION,h3);return!1}}return!(!this.networkEnabled||!this.inForeground)||WN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&xr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new jT(e,Yu.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>WN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return pj.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qve(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return mj.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){xr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Lxe:c===16?Mxe:c===15?SD:c===14?xJ:c===13?gJ:c===12?Rxe:c===11?pJ:void Gr()}(this.hi);let o;return this.Ri.runTransaction(e,a,s,l=>(o=new jT(l,this.Qr?this.Qr.next():Yu.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw rc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Er(tr.FAILED_PRECONDITION,fJ);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Z1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Er(tr.FAILED_PRECONDITION,h3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Z1(e).put("owner",r)}static D(){return G0.D()}bi(e){const r=Z1(e);return r.get("owner").next(n=>this.vi(n)?(xr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):$t.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(rc(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;pY()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return xr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return rc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rc("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Z1(t){return uo(t,"owner")}function WN(t){return uo(t,"clientMetadata")}function i1e(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=On(),a=On();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new VD(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pY()?8:AJ(lo())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new o1e;return this.Xi(e,r,o).next(l=>{if(s.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Ax()<=Gn.DEBUG&&xr("QueryEngine","SDK will not create cache indexes for query:",mx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$t.resolve()):(Ax()<=Gn.DEBUG&&xr("QueryEngine","Query:",mx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Ax()<=Gn.DEBUG&&xr("QueryEngine","The SDK decides to create cache indexes for query:",mx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nd(r))):$t.resolve())}Yi(e,r){if(A7(r))return $t.resolve(null);let n=nd(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=YE(r,null,"F"),n=nd(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=On(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,YE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return A7(r)||a.isEqual(tn.min())?$t.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?$t.resolve(null):(Ax()<=Gn.DEBUG&&xr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),mx(r)),this.rs(e,o,r,mxe(a,-1)).next(l=>l))})}ts(e,r){let n=new Qa(kJ(e));return r.forEach((a,s)=>{xw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Ax()<=Gn.DEBUG&&xr("QueryEngine","Using full collection scan to execute query:",mx(r)),this.Ji.getDocumentsMatchingQuery(e,r,Au.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1e{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Ps(_n),this._s=new bm(s=>Gp(s),pw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function vZ(t,e,r,n){return new l1e(t,e,r,n)}async function yZ(t,e){const r=yn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=On();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function c1e(t,e){const r=yn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let h=$t.resolve();return A.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Xr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=On();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function bZ(t){const e=yn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function u1e(t,e){const r=yn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let h=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(Si.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(f,h),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(A,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=ou(),u=On();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(d1e(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(tn.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return $t.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function d1e(t,e,r){let n=On(),a=On();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=ou();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(tn.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):xr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function f1e(t,e){const r=yn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function h1e(t,e){const r=yn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,$t.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new Bh(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function HT(t,e,r){const n=yn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!ym(o))throw o;xr("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function H7(t,e,r){const n=yn(t);let a=tn.min(),s=On();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=yn(c),A=f._s.get(d);return A!==void 0?$t.resolve(f.os.get(A)):f.Ur.getTargetData(u,d)}(n,o,nd(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:tn.min(),r?s:On())).next(l=>(A1e(n,eve(e),l),{documents:l,Ts:s})))}function A1e(t,e,r){let n=t.us.get(e)||tn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class $7{constructor(){this.activeTargetIds=ive()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wZ{constructor(){this.so=new $7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){xr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){xr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XN=null;function A3(){return XN===null?XN=function(){return 268435456+Math.round(2147483648*Math.random())}():XN++,"0x"+XN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="WebChannelConnection";class x1e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=A3(),c=this.xo(r,n.toUriEncodedString());xr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(xr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw em("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=p1e[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=A3();return new Promise((o,l)=>{const c=new nJ;c.setWithCredentials(!0),c.listenOnce(aJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case K_.NO_ERROR:const d=c.getResponseJson();xr(pl,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case K_.TIMEOUT:xr(pl,`RPC '${e}' ${s} timed out`),l(new Er(tr.DEADLINE_EXCEEDED,"Request time out"));break;case K_.HTTP_ERROR:const f=c.getStatus();if(xr(pl,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let A=c.getResponseJson();Array.isArray(A)&&(A=A[0]);const h=A==null?void 0:A.error;if(h&&h.status&&h.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(tr).indexOf(x)>=0?x:tr.UNKNOWN}(h.status);l(new Er(m,h.message))}else l(new Er(tr.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Er(tr.UNAVAILABLE,"Connection failed."));break;default:Gr()}}finally{xr(pl,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);xr(pl,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=A3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oJ(),l=iJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");xr(pl,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);let A=!1,h=!1;const m=new g1e({Io:g=>{h?xr(pl,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(A||(xr(pl,`Opening RPC '${e}' stream ${a} transport.`),f.open(),A=!0),xr(pl,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,jy.EventType.OPEN,()=>{h||(xr(pl,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,jy.EventType.CLOSE,()=>{h||(h=!0,xr(pl,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,jy.EventType.ERROR,g=>{h||(h=!0,em(pl,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new Er(tr.UNAVAILABLE,"The operation could not be completed")))}),p(f,jy.EventType.MESSAGE,g=>{var x;if(!h){const y=g.data[0];Xr(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){xr(pl,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(E){const F=Pi[E];if(F!==void 0)return KJ(F)}(j),_=w.message;I===void 0&&(I=tr.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),h=!0,m.So(new Er(I,_)),f.close()}else xr(pl,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,sJ.STAT_EVENT,g=>{g.stat===ST.PROXY?xr(pl,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===ST.NOPROXY&&xr(pl,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(){return typeof window<"u"?window:null}function Z_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t){return new bve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&xr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e,r,n,a,s,o,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new HD(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===tr.RESOURCE_EXHAUSTED?(rc(r.toString()),rc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===tr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new Er(tr.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return xr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(xr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y1e extends NZ{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=_ve(this.serializer,e),n=function(s){if(!("targetChange"in s))return tn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?tn.min():o.readTime?Fo(o.readTime):tn.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=MT(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=WE(c)?{documents:eZ(s,c)}:{query:tZ(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=WJ(s,o.resumeToken);const u=DT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(tn.min())>0){l.readTime=_v(s,o.snapshotVersion.toTimestamp());const u=DT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Sve(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=MT(this.serializer),r.removeTarget=e,this.a_(r)}}class b1e extends NZ{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Xr(!!e.streamToken),this.lastStreamToken=e.streamToken,Xr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Eve(e.writeResults,e.commitTime),n=Fo(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=MT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>h2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1e extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Er(tr.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,RT(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===tr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Er(tr.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,RT(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===tr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Er(tr.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class N1e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rc(r),this.D_=!1):xr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1e{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{gg(this)&&(xr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=yn(c);u.L_.add(4),await yw(u),u.q_.set("Unknown"),u.L_.delete(4),await vj(u)}(this))})}),this.q_=new N1e(n,a)}}async function vj(t){if(gg(t))for(const e of t.B_)await e(!0)}async function yw(t){for(const e of t.B_)await e(!1)}function CZ(t,e){const r=yn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),qD(r)?KD(r):e1(r).r_()&&GD(r,e))}function $D(t,e){const r=yn(t),n=e1(r);r.N_.delete(e),n.r_()&&_Z(r,e),r.N_.size===0&&(n.r_()?n.o_():gg(r)&&r.q_.set("Unknown"))}function GD(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}e1(t).A_(e)}function _Z(t,e){t.Q_.xe(e),e1(t).R_(e)}function KD(t){t.Q_=new gve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),e1(t).start(),t.q_.v_()}function qD(t){return gg(t)&&!e1(t).n_()&&t.N_.size>0}function gg(t){return yn(t).L_.size===0}function EZ(t){t.Q_=void 0}async function _1e(t){t.q_.set("Online")}async function E1e(t){t.N_.forEach((e,r)=>{GD(t,e)})}async function S1e(t,e){EZ(t),qD(t)?(t.q_.M_(e),KD(t)):t.q_.set("Unknown")}async function I1e(t,e,r){if(t.q_.set("Online"),e instanceof zJ&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){xr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await tS(t,n)}else if(e instanceof J_?t.Q_.Ke(e):e instanceof qJ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(tn.min()))try{const n=await bZ(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Si.EMPTY_BYTE_STRING,d.snapshotVersion)),_Z(s,c);const f=new Bh(d.target,c,u,d.sequenceNumber);GD(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){xr("RemoteStore","Failed to raise snapshot:",n),await tS(t,n)}}async function tS(t,e,r){if(!ym(e))throw e;t.L_.add(1),await yw(t),t.q_.set("Offline"),r||(r=()=>bZ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await vj(t)})}function SZ(t,e){return e().catch(r=>tS(t,r,e))}async function bw(t){const e=yn(t),r=am(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;j1e(e);)try{const a=await f1e(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,P1e(e,a)}catch(a){await tS(e,a)}IZ(e)&&jZ(e)}function j1e(t){return gg(t)&&t.O_.length<10}function P1e(t,e){t.O_.push(e);const r=am(t);r.r_()&&r.V_&&r.m_(e.mutations)}function IZ(t){return gg(t)&&!am(t).n_()&&t.O_.length>0}function jZ(t){am(t).start()}async function B1e(t){am(t).p_()}async function T1e(t){const e=am(t);for(const r of t.O_)e.m_(r.mutations)}async function k1e(t,e,r){const n=t.O_.shift(),a=FD.from(n,e,r);await SZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await bw(t)}async function F1e(t,e){e&&am(t).V_&&await async function(n,a){if(function(o){return GJ(o)&&o!==tr.ABORTED}(a.code)){const s=n.O_.shift();am(n).s_(),await SZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await bw(n)}}(t,e),IZ(t)&&jZ(t)}async function K7(t,e){const r=yn(t);r.asyncQueue.verifyOperationInProgress(),xr("RemoteStore","RemoteStore received new credentials");const n=gg(r);r.L_.add(3),await yw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await vj(r)}async function O1e(t,e){const r=yn(t);e?(r.L_.delete(2),await vj(r)):e||(r.L_.add(2),await yw(r),r.q_.set("Unknown"))}function e1(t){return t.K_||(t.K_=function(r,n,a){const s=yn(r);return s.w_(),new y1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:_1e.bind(null,t),Ro:E1e.bind(null,t),mo:S1e.bind(null,t),d_:I1e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),qD(t)?KD(t):t.q_.set("Unknown")):(await t.K_.stop(),EZ(t))})),t.K_}function am(t){return t.U_||(t.U_=function(r,n,a){const s=yn(r);return s.w_(),new b1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:B1e.bind(null,t),mo:F1e.bind(null,t),f_:T1e.bind(null,t),g_:k1e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bw(t)):(await t.U_.stop(),t.O_.length>0&&(xr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new qd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new zD(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Er(tr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WD(t,e){if(rc("AsyncQueue",`${e}: ${t}`),ym(t))return new Er(tr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.comparator=e?(r,n)=>e(r,n)||kr.comparator(r.key,n.key):(r,n)=>kr.comparator(r.key,n.key),this.keyedMap=Py(),this.sortedSet=new Ps(this.comparator)}static emptySet(e){return new rv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof rv)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new rv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.W_=new Ps(kr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Gr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ev{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ev(e,r,rv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dj(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class R1e{constructor(){this.queries=z7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=yn(r),s=a.queries;a.queries=z7(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new Er(tr.ABORTED,"Firestore shutting down"))}}function z7(){return new bm(t=>TJ(t),dj)}async function XD(t,e){const r=yn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new D1e,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=WD(o,`Initialization of query '${mx(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&JD(r)}async function YD(t,e){const r=yn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function M1e(t,e){const r=yn(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&JD(r)}function L1e(t,e,r){const n=yn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function JD(t){t.Y_.forEach(e=>{e.next()})}var $T,W7;(W7=$T||($T={})).ea="default",W7.Cache="cache";class ZD{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Ev(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$T.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(e){this.key=e}}class BZ{constructor(e){this.key=e}}class U1e{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=On(),this.mutatedKeys=On(),this.Aa=kJ(e),this.Ra=new rv(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new q7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const A=a.get(d),h=xw(this.query,f)?f:null,m=!!A&&this.mutatedKeys.has(A.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;A&&h?A.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),g=!0):this.ga(A,h)||(n.track({type:2,doc:h}),g=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!A&&h?(n.track({type:0,doc:h}),g=!0):A&&!h&&(n.track({type:1,doc:A}),g=!0,(c||u)&&(l=!0)),g&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gr()}};return p(h)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ev(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new q7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=On(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new BZ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new PZ(n))}),r}ba(e){this.Ta=e.Ts,this.da=On();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ev.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Q1e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class V1e{constructor(e){this.key=e,this.va=!1}}class H1e{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bm(l=>TJ(l),dj),this.Ma=new Map,this.xa=new Set,this.Oa=new Ps(kr.comparator),this.Na=new Map,this.La=new UD,this.Ba={},this.ka=new Map,this.qa=Wp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $1e(t,e,r=!0){const n=RZ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await TZ(n,e,r,!0),a}async function G1e(t,e){const r=RZ(t);await TZ(r,e,!0,!1)}async function TZ(t,e,r,n){const a=await h1e(t.localStore,nd(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await K1e(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&CZ(t.remoteStore,a),l}async function K1e(t,e,r,n,a){t.Ka=(f,A,h)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await H7(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),j=y&&y.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(b,p.isPrimaryClient,w,j);return Y7(p,g.targetId,I.wa),I.snapshot}(t,f,A,h);const s=await H7(t.localStore,e,!0),o=new U1e(e,s.Ts),l=o.ma(s.documents),c=vw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);Y7(t,r,u.wa);const d=new Q1e(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function q1e(t,e,r){const n=yn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!dj(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await HT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&$D(n.remoteStore,a.targetId),GT(n,a.targetId)}).catch(mg)):(GT(n,a.targetId),await HT(n.localStore,a.targetId,!0))}async function z1e(t,e){const r=yn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$D(r.remoteStore,n.targetId))}async function W1e(t,e,r){const n=MZ(t);try{const a=await function(o,l){const c=yn(o),u=ur.now(),d=l.reduce((h,m)=>h.add(m.key),On());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=ou(),p=On();return c.cs.getEntries(h,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(g=>{f=g;const x=[];for(const y of l){const b=hve(y,f.get(y.key).overlayedDocument);b!=null&&x.push(new gA(y.key,b,NJ(b.value.mapValue),Es.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,x,l)}).next(g=>{A=g;const x=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(h,g.batchId,x)})}).then(()=>({batchId:A.batchId,changes:OJ(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ps(_n)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await ww(n,a.changes),await bw(n.remoteStore)}catch(a){const s=WD(a,"Failed to persist write");r.reject(s)}}async function kZ(t,e){const r=yn(t);try{const n=await u1e(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(Xr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Xr(o.va):a.removedDocuments.size>0&&(Xr(o.va),o.va=!1))}),await ww(r,n,e)}catch(n){await mg(n)}}function X7(t,e,r){const n=yn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=yn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.j_)A.Z_(l)&&(u=!0)}),u&&JD(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function X1e(t,e,r){const n=yn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Ps(kr.comparator);o=o.insert(s,Cs.newNoDocument(s,tn.min()));const l=On().add(s),c=new Aj(tn.min(),new Map,new Ps(_n),o,l);await kZ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),e6(n)}else await HT(n.localStore,e,!1).then(()=>GT(n,e,r)).catch(mg)}async function Y1e(t,e){const r=yn(t),n=e.batch.batchId;try{const a=await c1e(r.localStore,e);OZ(r,n,null),FZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ww(r,a)}catch(a){await mg(a)}}async function J1e(t,e,r){const n=yn(t);try{const a=await function(o,l){const c=yn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Xr(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);OZ(n,e,r),FZ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ww(n,a)}catch(a){await mg(a)}}function FZ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function OZ(t,e,r){const n=yn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function GT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||DZ(t,n)})}function DZ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&($D(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),e6(t))}function Y7(t,e,r){for(const n of r)n instanceof PZ?(t.La.addReference(n.key,e),Z1e(t,n)):n instanceof BZ?(xr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||DZ(t,n.key)):Gr()}function Z1e(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(xr("SyncEngine","New document in limbo: "+r),t.xa.add(n),e6(t))}function e6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new kr(oa.fromString(e)),n=t.qa.next();t.Na.set(n,new V1e(r)),t.Oa=t.Oa.insert(r,n),CZ(t.remoteStore,new Bh(nd(gw(r.path)),n,"TargetPurposeLimboResolution",Yu.oe))}}async function ww(t,e,r){const n=yn(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=VD.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=yn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$t.forEach(u,A=>$t.forEach(A.$i,h=>d.persistence.referenceDelegate.addReference(f,A.targetId,h)).next(()=>$t.forEach(A.Ui,h=>d.persistence.referenceDelegate.removeReference(f,A.targetId,h)))))}catch(f){if(!ym(f))throw f;xr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const h=d.os.get(A),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(A,p)}}}(n.localStore,s))}async function eye(t,e){const r=yn(t);if(!r.currentUser.isEqual(e)){xr("SyncEngine","User change. New user:",e.toKey());const n=await yZ(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Er(tr.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ww(r,n.hs)}}function tye(t,e){const r=yn(t),n=r.Na.get(e);if(n&&n.va)return On().add(n.key);{let a=On();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function RZ(t){const e=yn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X1e.bind(null,e),e.Ca.d_=M1e.bind(null,e.eventManager),e.Ca.$a=L1e.bind(null,e.eventManager),e}function MZ(t){const e=yn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y1e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J1e.bind(null,e),e}class A2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return vZ(this.persistence,new xZ,e.initialUser,this.serializer)}Ga(e){return new gZ(gj.Zr,this.serializer)}Wa(e){return new wZ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A2.provider={build:()=>new A2};class rye extends A2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await MZ(this.Ja.syncEngine),await bw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return vZ(this.persistence,new xZ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new $ve(n,e.asyncQueue,r)}Ha(e,r){const n=new vxe(r,this.persistence);return new xxe(e.asyncQueue,n)}Ga(e){const r=i1e(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?wc.withCacheSize(this.cacheSizeBytes):wc.DEFAULT;return new QD(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,v1e(),Z_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new wZ}}class rS{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>X7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=eye.bind(null,this.syncEngine),await O1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R1e}()}createDatastore(e){const r=xj(e.databaseInfo.databaseId),n=function(s){return new x1e(s)}(e.databaseInfo);return function(s,o,l,c){return new w1e(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new C1e(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>X7(this.syncEngine,r,0),function(){return G7.D()?new G7:new m1e}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new H1e(a,s,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=yn(a);xr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await yw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}rS.provider={build:()=>new rS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Er(tr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=yn(a),l={documents:s.map(f=>f2(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,oa.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const A=Cve(o.serializer,f);u.set(A.key.toString(),A)});const d=[];return s.forEach(f=>{const A=u.get(f.toString());Xr(!!A),d.push(A)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=kr.fromPath(n);this.mutations.push(new TD(a,this.precondition(a)))}),await async function(n,a){const s=yn(n),o={writes:a.map(l=>h2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,oa.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Gr();r=tn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Er(tr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(tn.min())?Es.exists(!1):Es.updateTime(r):Es.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(tn.min()))throw new Er(tr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Es.updateTime(r)}return Es.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aye{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new HD(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new nye(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!mw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!GJ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sye{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=tl.UNAUTHENTICATED,this.clientId=CD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{xr("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(xr("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=WD(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function m3(t,e){t.asyncQueue.verifyOperationInProgress(),xr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await yZ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function J7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await iye(t);xr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>K7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>K7(e.remoteStore,a)),t._onlineComponents=e}async function iye(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xr("FirestoreClient","Using user provided OfflineComponentProvider");try{await m3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===tr.FAILED_PRECONDITION||a.code===tr.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;em("Error using user provided cache. Falling back to memory cache: "+r),await m3(t,new A2)}}else xr("FirestoreClient","Using default OfflineComponentProvider"),await m3(t,new A2);return t._offlineComponents}async function r6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xr("FirestoreClient","Using user provided OnlineComponentProvider"),await J7(t,t._uninitializedComponentsProvider._online)):(xr("FirestoreClient","Using default OnlineComponentProvider"),await J7(t,new rS))),t._onlineComponents}function oye(t){return r6(t).then(e=>e.syncEngine)}function lye(t){return r6(t).then(e=>e.datastore)}async function nS(t){const e=await r6(t),r=e.eventManager;return r.onListen=$1e.bind(null,e.syncEngine),r.onUnlisten=q1e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=G1e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=z1e.bind(null,e.syncEngine),r}function cye(t,e,r={}){const n=new qd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new t6({next:A=>{d.Za(),o.enqueueAndForget(()=>YD(s,f));const h=A.docs.has(l);!h&&A.fromCache?u.reject(new Er(tr.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&A.fromCache&&c&&c.source==="server"?u.reject(new Er(tr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new ZD(gw(l.path),d,{includeMetadataChanges:!0,_a:!0});return XD(s,f)}(await nS(t),t.asyncQueue,e,r,n)),n.promise}function uye(t,e,r={}){const n=new qd;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new t6({next:A=>{d.Za(),o.enqueueAndForget(()=>YD(s,f)),A.fromCache&&c.source==="server"?u.reject(new Er(tr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new ZD(l,d,{includeMetadataChanges:!0,_a:!0});return XD(s,f)}(await nS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LZ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UZ(t,e,r){if(!r)throw new Er(tr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QZ(t,e,r,n){if(e===!0&&n===!0)throw new Er(tr.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function e9(t){if(!kr.isDocumentKey(t))throw new Er(tr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t9(t){if(kr.isDocumentKey(t))throw new Er(tr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Gr()}function Oo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Er(tr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=yj(t);throw new Er(tr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Er(tr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Er(tr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LZ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Er(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Er(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Er(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bj{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Er(tr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Er(tr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r9(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cJ;switch(n.type){case"firstParty":return new uxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Er(tr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Z7.get(r);n&&(xr("ComponentProvider","Removing Datastore"),Z7.delete(r),n.terminate())}(this),Promise.resolve()}}function VZ(t,e,r,n={}){var a;const s=(t=Oo(t,bj))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&em("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=tl.MOCK_USER;else{l=E0e(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Er(tr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tl(u)}t._authCredentials=new oxe(new lJ(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qf(this.firestore,e,this._query)}}class Do{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Do(this.firestore,e,this._key)}}class Uh extends qf{constructor(e,r,n){super(e,r,gw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Do(this.firestore,null,new kr(e))}withConverter(e){return new Uh(this.firestore,e,this._path)}}function Ct(t,e,...r){if(t=qs(t),UZ("collection","path",e),t instanceof bj){const n=oa.fromString(e,...r);return t9(n),new Uh(t,null,n)}{if(!(t instanceof Do||t instanceof Uh))throw new Er(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(oa.fromString(e,...r));return t9(n),new Uh(t.firestore,null,n)}}function Wt(t,e,...r){if(t=qs(t),arguments.length===1&&(e=CD.newId()),UZ("doc","path",e),t instanceof bj){const n=oa.fromString(e,...r);return e9(n),new Do(t,null,new kr(n))}{if(!(t instanceof Do||t instanceof Uh))throw new Er(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(oa.fromString(e,...r));return e9(n),new Do(t.firestore,t instanceof Uh?t.converter:null,new kr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new HD(this,"async_queue_retry"),this.Vu=()=>{const n=Z_();n&&xr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Z_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Z_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new qd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ym(e))throw e;xr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw rc("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=zD.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Gr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function a9(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class mu extends bj{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new n9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n9(e),this._firestoreClient=void 0,await e}}}function HZ(t,e){const r=typeof t=="object"?t:uD(),n=typeof t=="string"?t:"(default)",a=lD(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=C0e("firestore");s&&VZ(a,...s)}return a}function xg(t){if(t._terminated)throw new Er(tr.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$Z(t),t._firestoreClient}function $Z(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Qxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,LZ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new sye(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function GZ(t,e){em("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return dye(t,rS.provider,{build:n=>new rye(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function dye(t,e,r){if((t=Oo(t,mu))._firestoreClient||t._terminated)throw new Er(tr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Er(tr.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},$Z(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sm(Si.fromBase64String(e))}catch(r){throw new Er(tr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new sm(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Er(tr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _s(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Er(tr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Er(tr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _n(this._lat,e._lat)||_n(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fye=/^__.*__$/;class hye{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new gA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Jv(e,this.data,r,this.fieldTransforms)}}class KZ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new gA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function qZ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gr()}}class Cj{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return aS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qZ(this.Cu)&&fye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Aye{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||xj(e)}Qu(e,r,n,a=!1){return new Cj({Cu:e,methodName:r,qu:n,path:_s.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t1(t){const e=t._freezeSettings(),r=xj(t._databaseId);return new Aye(t._databaseId,!!e.ignoreUndefinedProperties,r)}function _j(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);i6("Data must be an object, but it was:",o,n);const l=zZ(n,o);let c,u;if(s.merge)c=new Sc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=KT(e,f,r);if(!o.contains(A))throw new Er(tr.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);XZ(d,A)||d.push(A)}c=new Sc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new hye(new al(l),c,u)}class Ej extends Nw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ej}}function mye(t,e,r){return new Cj({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n6 extends Nw{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=mye(this,e,!0),n=this.Ku.map(s=>r1(s,r)),a=new Kp(n);return new VJ(e.path,a)}isEqual(e){return e instanceof n6&&Jb(this.Ku,e.Ku)}}function a6(t,e,r,n){const a=t.Qu(1,e,r);i6("Data must be an object, but it was:",a,n);const s=[],o=al.empty();pg(n,(c,u)=>{const d=o6(e,c,r);u=qs(u);const f=a.Nu(d);if(u instanceof Ej)s.push(d);else{const A=r1(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new Sc(s);return new KZ(o,l,a.fieldTransforms)}function s6(t,e,r,n,a,s){const o=t.Qu(1,e,r),l=[KT(e,n,r)],c=[a];if(s.length%2!=0)throw new Er(tr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(KT(e,s[A])),c.push(s[A+1]);const u=[],d=al.empty();for(let A=l.length-1;A>=0;--A)if(!XZ(u,l[A])){const h=l[A];let m=c[A];m=qs(m);const p=o.Nu(h);if(m instanceof Ej)u.push(h);else{const g=r1(m,p);g!=null&&(u.push(h),d.set(h,g))}}const f=new Sc(u);return new KZ(d,f,o.fieldTransforms)}function pye(t,e,r,n=!1){return r1(r,t.Qu(n?4:3,e))}function r1(t,e){if(WZ(t=qs(t)))return i6("Unsupported field value:",e,t),zZ(t,e);if(t instanceof Nw)return function(n,a){if(!qZ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=r1(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=qs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ove(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ur.fromDate(n);return{timestampValue:_v(a.serializer,s)}}if(n instanceof ur){const s=new ur(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:_v(a.serializer,s)}}if(n instanceof wj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof sm)return{bytesValue:WJ(a.serializer,n._byteString)};if(n instanceof Do){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Nj)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return BD(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${yj(n)}`)}(t,e)}function zZ(t,e){const r={};return vJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pg(t,(n,a)=>{const s=r1(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function WZ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ur||t instanceof wj||t instanceof sm||t instanceof Do||t instanceof Nw||t instanceof Nj)}function i6(t,e,r){if(!WZ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=yj(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function KT(t,e,r){if((e=qs(e))instanceof vg)return e._internalPath;if(typeof e=="string")return o6(t,e);throw aS("Field path arguments must be of type string or ",t,!1,void 0,r)}const gye=new RegExp("[~\\*/\\[\\]]");function o6(t,e,r){if(e.search(gye)>=0)throw aS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vg(...e.split("."))._internalPath}catch{throw aS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function aS(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Er(tr.INVALID_ARGUMENT,l+t+c)}function XZ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Do(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class xye extends sS{data(){return super.data()}}function Sj(t,e){return typeof e=="string"?o6(t,e):e instanceof vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Er(tr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l6{}class Ij extends l6{}function rr(t,e,...r){let n=[];e instanceof l6&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof jj).length,l=s.filter(c=>c instanceof Cw).length;if(o>1||o>0&&l>0)throw new Er(tr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Cw extends Ij{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Cw(e,r,n)}_apply(e){const r=this._parse(e);return JZ(e._query,r),new qf(e.firestore,e.converter,OT(e._query,r))}_parse(e){const r=t1(e.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Er(tr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){i9(f,d);const h=[];for(const m of f)h.push(s9(c,s,m));A={arrayValue:{values:h}}}else A=s9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||i9(f,d),A=pye(l,o,f,d==="in"||d==="not-in");return Kn.create(u,d,A)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function or(t,e,r){const n=e,a=Sj("where",t);return Cw._create(a,n,r)}class jj extends l6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new jj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ta.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)JZ(o,c),o=OT(o,c)}(e._query,r),new qf(e.firestore,e.converter,OT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pj extends Ij{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Pj(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new Er(tr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Er(tr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new c2(s,o)}(e._query,this._field,this._direction);return new qf(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Yv(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function gn(t,e="asc"){const r=e,n=Sj("orderBy",t);return Pj._create(n,r)}class Bj extends Ij{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Bj(e,r,n)}_apply(e){return new qf(e.firestore,e.converter,YE(e._query,this._limit,this._limitType))}}function iS(t){return Bj._create("limit",t,"F")}function s9(t,e,r){if(typeof(r=qs(r))=="string"){if(r==="")throw new Er(tr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BJ(e)&&r.indexOf("/")!==-1)throw new Er(tr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(oa.fromString(r));if(!kr.isDocumentKey(n))throw new Er(tr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return o2(t,new kr(n))}if(r instanceof Do)return o2(t,r._key);throw new Er(tr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yj(r)}.`)}function i9(t,e){if(!Array.isArray(t)||t.length===0)throw new Er(tr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JZ(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Er(tr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Er(tr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class c6{convertValue(e,r="none"){switch($p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ws(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(tm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Gr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return pg(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>ws(o.doubleValue));return new Nj(s)}convertGeoPoint(e){return new wj(ws(e.latitude),ws(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=jD(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(s2(e));default:return null}}convertTimestamp(e){const r=eA(e);return new ur(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=oa.fromString(e);Xr(sZ(n));const a=new rm(n.get(1),n.get(3)),s=new kr(n.popFirst(5));return a.isEqual(r)||rc(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class vye extends c6{constructor(e){super(),this.firestore=e}convertBytes(e){return new sm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Do(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kj extends sS{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ub(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Sj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ub extends kj{data(e={}){return super.data(e)}}class u6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new cp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ub(this._firestore,this._userDataWriter,n.key,n,new cp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Er(tr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new ub(a._firestore,a._userDataWriter,l.doc.key,l.doc,new cp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ub(a._firestore,a._userDataWriter,l.doc.key,l.doc,new cp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:yye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yye(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){t=Oo(t,Do);const e=Oo(t.firestore,mu);return cye(xg(e),t._key).then(r=>eee(e,t,r))}class Fj extends c6{constructor(e){super(),this.firestore=e}convertBytes(e){return new sm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Do(this.firestore,null,r)}}function Lt(t){t=Oo(t,qf);const e=Oo(t.firestore,mu),r=xg(e),n=new Fj(e);return YZ(t._query),uye(r,t._query).then(a=>new u6(e,n,t,a))}function ZZ(t,e,r){t=Oo(t,Do);const n=Oo(t.firestore,mu),a=Tj(t.converter,e,r);return n1(n,[_j(t1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Es.none())])}function xn(t,e,r,...n){t=Oo(t,Do);const a=Oo(t.firestore,mu),s=t1(a);let o;return o=typeof(e=qs(e))=="string"||e instanceof vg?s6(s,"updateDoc",t._key,e,r,n):a6(s,"updateDoc",t._key,e),n1(a,[o.toMutation(t._key,Es.exists(!0))])}function Bn(t){return n1(Oo(t.firestore,mu),[new Zv(t._key,Es.none())])}function Tn(t,e){const r=Oo(t.firestore,mu),n=Wt(t),a=Tj(t.converter,e);return n1(r,[_j(t1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Es.exists(!1))]).then(()=>n)}function ad(t,...e){var r,n,a;t=qs(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||a9(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(a9(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof Do)u=Oo(t.firestore,mu),d=gw(t._key.path),c={next:f=>{e[o]&&e[o](eee(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Oo(t,qf);u=Oo(f.firestore,mu),d=f._query;const A=new Fj(u);c={next:h=>{e[o]&&e[o](new u6(u,A,f,h))},error:e[o+1],complete:e[o+2]},YZ(t._query)}return function(A,h,m,p){const g=new t6(p),x=new ZD(h,g,m);return A.asyncQueue.enqueueAndForget(async()=>XD(await nS(A),x)),()=>{g.Za(),A.asyncQueue.enqueueAndForget(async()=>YD(await nS(A),x))}}(xg(u),d,l,c)}function n1(t,e){return function(n,a){const s=new qd;return n.asyncQueue.enqueueAndForget(async()=>W1e(await oye(n),a,s)),s.promise}(xg(t),e)}function eee(t,e,r){const n=r.docs.get(e._key),a=new Fj(t);return new kj(t,a,e._key,n,new cp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=t1(e)}set(e,r,n){this._verifyNotCommitted();const a=b0(e,this._firestore),s=Tj(a.converter,r,n),o=_j(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Es.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=b0(e,this._firestore);let o;return o=typeof(r=qs(r))=="string"||r instanceof vg?s6(this._dataReader,"WriteBatch.update",s._key,r,n,a):a6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Es.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=b0(e,this._firestore);return this._mutations=this._mutations.concat(new Zv(r._key,Es.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Er(tr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function b0(t,e){if((t=qs(t)).firestore!==e)throw new Er(tr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=t1(r)}get(r){const n=b0(r,this._firestore),a=new vye(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Gr();const o=s[0];if(o.isFoundDocument())return new sS(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new sS(this._firestore,a,n._key,null,n.converter);throw Gr()})}set(r,n,a){const s=b0(r,this._firestore),o=Tj(s.converter,n,a),l=_j(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=b0(r,this._firestore);let l;return l=typeof(n=qs(n))=="string"||n instanceof vg?s6(this._dataReader,"Transaction.update",o._key,n,a,s):a6(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=b0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=b0(e,this._firestore),n=new Fj(this._firestore);return super.get(e).then(a=>new kj(this._firestore,n,r._key,a._document,new cp(!1,!1),r.converter))}}function Ri(t,e,r){t=Oo(t,mu);const n=Object.assign(Object.assign({},bye),r);return function(s){if(s.maxAttempts<1)throw new Er(tr.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new qd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await lye(s);new aye(s.asyncQueue,u,l,o,c).au()}),c.promise}(xg(t),a=>e(new ree(t,a)),n)}function nee(...t){return new n6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){return xg(t=Oo(t,mu)),new tee(t,e=>n1(t,e))}(function(e,r=!0){(function(a){Xv=a})(zv),vv(new Up("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new mu(new lxe(n.getProvider("auth-internal")),new fxe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Er(tr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rm(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),$0(JU,"4.7.3",e),$0(JU,"4.7.3","esm2017")})();const wye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:c6,Bytes:sm,CollectionReference:Uh,DocumentReference:Do,DocumentSnapshot:kj,FieldPath:vg,FieldValue:Nw,Firestore:mu,FirestoreError:Er,GeoPoint:wj,Query:qf,QueryCompositeFilterConstraint:jj,QueryConstraint:Ij,QueryDocumentSnapshot:ub,QueryFieldFilterConstraint:Cw,QueryLimitConstraint:Bj,QueryOrderByConstraint:Pj,QuerySnapshot:u6,SnapshotMetadata:cp,Timestamp:ur,Transaction:ree,VectorValue:Nj,WriteBatch:tee,_AutoId:CD,_ByteString:Si,_DatabaseId:rm,_DocumentKey:kr,_EmptyAuthCredentialsProvider:cJ,_FieldPath:_s,_cast:Oo,_logWarn:em,_validateIsNotUsedTogether:QZ,addDoc:Tn,arrayUnion:nee,collection:Ct,connectFirestoreEmulator:VZ,deleteDoc:Bn,doc:Wt,enableIndexedDbPersistence:GZ,ensureFirestoreConfigured:xg,executeWrite:n1,getDoc:js,getDocs:Lt,getFirestore:HZ,limit:iS,onSnapshot:ad,orderBy:gn,query:rr,runTransaction:Ri,setDoc:ZZ,updateDoc:xn,where:or,writeBatch:zd},Symbol.toStringTag,{value:"Module"})),Nye={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},aee=cD(Nye),Te=HZ(aee),Wd=ET(aee),Cye=(async()=>{try{return await H_(Wd,vD),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await H_(Wd,ZY),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await H_(Wd,yD),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();GZ(Te).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function _ye(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[o,l]=v.useState(""),[c,u]=v.useState(!1),d=ow();v.useEffect(()=>{let h=!0;const m=ij(Wd,async p=>{if(!(!p||!h))try{const g=await js(Wt(Te,"users",p.uid));if(!g.exists())return;const x=g.data(),y=Array.isArray(x.roles)?x.roles:x.role?[x.role]:[],b=y[0]||"",w=x.name||"";localStorage.setItem("user_email",p.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin",{replace:!0})}catch{}});return()=>{h=!1,m()}},[d]);const f=h=>{if(Array.isArray(h)){if(h.length!==1)return localStorage.setItem("role",h[0]||""),d("/admin");h=h[0]||""}const m=String(h||"");if(localStorage.setItem("role",m),ln(m,"admin"))return d("/admin");if(ln(m,"vendedor_pollo"))return d("/admin/salesV2");if(ln(m,"vendedor_ropa"))return d("/admin/salesClothes");if(ln(m,"vendedor_dulces"))return d("/admin/salesCandies");if(ln(m,"supervisor_pollo")||ln(m,"contador"))return d("/admin/batches")},A=async h=>{if(h.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await H_(Wd,vD);const m=await qpe(Wd,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await js(Wt(Te,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data();console.info&&console.info("[Login] user profile:",x);const y=Array.isArray(x.roles)?x.roles:x.role?[x.role]:[],b=y[0]||"",w=x.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:A,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:h=>e(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function jn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const o=ij(Wd,async l=>{if(l){const c=Wt(Te,"users",l.uid),u=await js(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let A=!1;for(const h of e)if(ln(f,h)){A=!0;break}s(A)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>o()},[e]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:i.jsx(xh,{to:"/"})}const Eye={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},financialDashboard:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function see(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function $n(t,e,r="view"){const n=see(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,o;return!!((o=(s=Eye[a])==null?void 0:s[e])!=null&&o[r])})}const Sye={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function Iye(t,e,r){const n=see(t);return n.some(a=>a==="admin")?!0:$n(t,e,"view")?n.some(a=>{var o;const s=(o=Sye[a])==null?void 0:o[e];return!!(s!=null&&s[r])}):!1}function jye({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=ow(),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,A]=v.useState(!1),[h,m]=v.useState(!1),[p,g]=v.useState(!1),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[j,I]=v.useState(!1),[_,S]=v.useState(!1),[E,F]=v.useState(!1),[P,k]=v.useState(!1),[D,Z]=v.useState(!1),[fe,me]=v.useState(!1),[pe,ye]=v.useState(!1),[ae,je]=v.useState(!1),[Be,O]=v.useState(!1),[G,z]=v.useState(!1),L=async()=>{z(!0)},Y=async()=>{try{await xD(Wd)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}z(!1),a("/")}},J=({open:ie,onClick:te,children:Ee})=>i.jsxs("button",{type:"button",onClick:te,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:Ee}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),R=({open:ie,onClick:te,title:Ee})=>i.jsxs("button",{type:"button",onClick:te,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:Ee}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),H=e&&e.length?e:t,ne=ln(H,"admin");ln(H,"vendedor_pollo");const ge=ln(H,"vendedor_ropa");ln(H,"vendedor_dulces"),ln(H,"supervisor_pollo")||ln(H,"contador"),ln(H,"contador");const U=$n(H,"salesV2","view")||$n(H,"customersPollo","view")||$n(H,"transactionsPollo","view")||$n(H,"bills","view")||$n(H,"batches","view"),Ue=$n(H,"salesCandies","view")||$n(H,"productsVendorsCandies","view")||$n(H,"customersCandies","view")||$n(H,"productsPricesCandies","view")||$n(H,"transactionCandies","view")||$n(H,"cierreVentasCandies","view");return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>o(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[ne&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:p,onClick:()=>g(ie=>!ie),title:"Operaciones"}),p&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(on,{to:`${r}/salesV2`,className:n,children:"Vender"}),i.jsx(on,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),i.jsx(on,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),i.jsx(on,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),i.jsx(R,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(on,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),i.jsx(on,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),i.jsx(R,{open:f,onClick:()=>A(ie=>!ie),title:"Finanzas"}),f&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(on,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),i.jsx(on,{to:`${r}/billing`,className:n,children:"Facturacion"}),i.jsx(on,{to:`${r}/expenses`,className:n,children:"Gastos"}),i.jsx(on,{to:`${r}/salesV2`,className:n,children:"Venta"}),i.jsx(on,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),i.jsx(on,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),i.jsx(R,{open:h,onClick:()=>m(ie=>!ie),title:"Productos"}),h&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:x,onClick:()=>y(ie=>!ie),children:"Gonper"}),x&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:D,onClick:()=>Z(ie=>!ie),children:"CandyShop"}),D&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:pe,onClick:()=>ye(ie=>!ie),title:"Vendedores"}),pe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),pe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),pe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),i.jsx(R,{open:fe,onClick:()=>me(ie=>!ie),title:"Inventario"}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),i.jsx(R,{open:ae,onClick:()=>je(ie=>!ie),title:"Finanzas"}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:Be,onClick:()=>O(ie=>!ie),children:"Operaciones Otras"}),Be&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(on,{to:`${r}/users`,className:n,children:"Usuarios"}),i.jsx(on,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),i.jsx(on,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!ne&&U&&i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[$n(H,"salesV2")&&i.jsx(on,{to:`${r}/salesV2`,className:n,children:"Vender"}),$n(H,"financialDashboard")&&i.jsx(on,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),$n(H,"batches")&&i.jsx(on,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),$n(H,"bills")&&i.jsx(on,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),$n(H,"transactionsPollo")&&i.jsx(on,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),$n(H,"customersPollo")&&i.jsx(on,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!ne&&Ue&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:$n(H,"salesCandies")&&i.jsx(on,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:$n(H,"transactionCandies")&&i.jsx(on,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:$n(H,"cierreVentasCandies")&&i.jsx(on,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:$n(H,"productsVendorsCandies")&&i.jsx(on,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:$n(H,"customersCandies")&&i.jsx(on,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:$n(H,"productsPricesCandies")&&i.jsx(on,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ge&&i.jsxs("div",{className:"border rounded",children:[i.jsx(J,{open:x,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),x&&i.jsxs("div",{className:"pb-2",children:[i.jsx(R,{open:E,onClick:()=>F(ie=>!ie),title:"Ventas"}),E&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(on,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),i.jsx(on,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),i.jsx(R,{open:j,onClick:()=>I(ie=>!ie),title:"Productos"}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),i.jsx(R,{open:_,onClick:()=>S(ie=>!ie),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(on,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:L,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),G&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>z(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:Y,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(nY,{})})]})}function ey(...t){return t.filter(Boolean).join(" ")}function Pye({role:t,roles:e}){const r=ow(),n=hA(),a="/admin",s=e&&e.length?e:t,o=ln(s,"admin"),l=ln(s,"vendedor_pollo"),c=ln(s,"vendedor_dulces"),u=ln(s,"supervisor_pollo")||ln(s,"contador"),d=ln(s,"contador"),f=$n(s,"salesV2","view")||$n(s,"batches","view")||$n(s,"bills","view")||$n(s,"transactionsPollo","view")||$n(s,"customersPollo","view"),A=$n(s,"salesCandies","view")||$n(s,"productsVendorsCandies","view")||$n(s,"customersCandies","view")||$n(s,"productsPricesCandies","view")||$n(s,"transactionCandies","view")||$n(s,"cierreVentasCandies","view"),h=f&&A,[m,p]=v.useState(()=>{try{const F=typeof window<"u"?localStorage.getItem("rubro"):null;if(F==="POLLO"||F==="DULCES")return F}catch{}return f?"POLLO":A?"DULCES":"POLLO"}),[g,x]=v.useState(!1),[y,b]=v.useState(!1),w=v.useMemo(()=>{let F=[];if(o||h){if(m==="POLLO")if(o)F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const D=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];ln(s,"contador")&&(F=D)}else l?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(o?F=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const D=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];ln(s,"contador"),F=D}else l?F=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];const P=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","financialDashboard","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return F.filter(D=>{const fe=D.to.replace(`${a}/`,"");return P.has(fe)?$n(s,fe,"view"):!0})},[a,m,o,h,u,l,c,d,s]);v.useEffect(()=>{if((o||h)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),v.useEffect(()=>{g&&x(!1)},[n.pathname]),v.useEffect(()=>{const F=P=>{P.key==="Escape"&&x(!1)};return g&&window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[g]);const j=async()=>{b(!0)},I=async()=>{try{await xD(Wd)}catch(F){console.error("signOut error:",F)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),x(!1),r("/")}},_=({isActive:F})=>ey("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",F?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),S=w.length<=2,E=({isActive:F})=>ey("w-full flex items-center justify-between px-4 py-3 rounded-xl border",F?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[o||h?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:ey("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),i.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:ey("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),g&&i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>x(!1),"aria-label":"Cerrar men"}),i.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),i.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),i.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(F=>i.jsxs(on,{to:F.to,className:E,children:[i.jsx("span",{className:"font-semibold",children:F.label}),i.jsx("span",{className:"text-sm opacity-80",children:""})]},F.key))}),i.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[i.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),i.jsx("main",{className:ey("flex-1 overflow-y-auto px-3 pt-3",S?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:i.jsx(nY,{})}),S&&i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(F=>i.jsx(on,{to:F.to,className:_,children:F.label},F.key))})})]})}const iee=6048e5,Bye=864e5,Tye=6e4,kye=36e5,Fye=1e3,o9=Symbol.for("constructDateFrom");function Ui(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&o9 in t?t[o9](e):t instanceof Date?new t.constructor(e):new Date(e)}function zs(t,e){return Ui(e||t,t)}function d6(t,e,r){const n=zs(t,r==null?void 0:r.in);return isNaN(e)?Ui((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Oye(t,e,r){const n=zs(t,r==null?void 0:r.in);if(isNaN(e))return Ui(t,NaN);const a=n.getDate(),s=Ui(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Dye={};function a1(){return Dye}function im(t,e){var l,c,u,d;const r=a1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=zs(t,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Sv(t,e){return im(t,{...e,weekStartsOn:1})}function oee(t,e){const r=zs(t,e==null?void 0:e.in),n=r.getFullYear(),a=Ui(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Sv(a),o=Ui(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Sv(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function oS(t){const e=zs(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Rye(t,...e){const r=Ui.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function l9(t,e){const r=zs(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Mye(t,e,r){const[n,a]=Rye(r==null?void 0:r.in,t,e),s=l9(n),o=l9(a),l=+s-oS(s),c=+o-oS(o);return Math.round((l-c)/Bye)}function Lye(t,e){const r=oee(t,e),n=Ui(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Sv(n)}function Uye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function f6(t){return!(!Uye(t)&&typeof t!="number"||isNaN(+zs(t)))}function Ad(t,e){const r=zs(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function md(t,e){const r=zs(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Qye(t,e){const r=zs(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Vye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hye=(t,e,r)=>{let n;const a=Vye[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function p3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const $ye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qye={date:p3({formats:$ye,defaultWidth:"full"}),time:p3({formats:Gye,defaultWidth:"full"}),dateTime:p3({formats:Kye,defaultWidth:"full"})},zye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wye=(t,e,r,n)=>zye[t];function ty(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const Xye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ebe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rbe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},nbe={ordinalNumber:rbe,era:ty({values:Xye,defaultWidth:"wide"}),quarter:ty({values:Yye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ty({values:Jye,defaultWidth:"wide"}),day:ty({values:Zye,defaultWidth:"wide"}),dayPeriod:ty({values:ebe,defaultWidth:"wide",formattingValues:tbe,defaultFormattingWidth:"wide"})};function ry(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?sbe(l,f=>f.test(o)):abe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function abe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function sbe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function ibe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const obe=/^(\d+)(th|st|nd|rd)?/i,lbe=/\d+/i,cbe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ube={any:[/^b/i,/^(a|c)/i]},dbe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fbe={any:[/1/i,/2/i,/3/i,/4/i]},hbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Abe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mbe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xbe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vbe={ordinalNumber:ibe({matchPattern:obe,parsePattern:lbe,valueCallback:t=>parseInt(t,10)}),era:ry({matchPatterns:cbe,defaultMatchWidth:"wide",parsePatterns:ube,defaultParseWidth:"any"}),quarter:ry({matchPatterns:dbe,defaultMatchWidth:"wide",parsePatterns:fbe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ry({matchPatterns:hbe,defaultMatchWidth:"wide",parsePatterns:Abe,defaultParseWidth:"any"}),day:ry({matchPatterns:mbe,defaultMatchWidth:"wide",parsePatterns:pbe,defaultParseWidth:"any"}),dayPeriod:ry({matchPatterns:gbe,defaultMatchWidth:"any",parsePatterns:xbe,defaultParseWidth:"any"})},lee={code:"en-US",formatDistance:Hye,formatLong:qye,formatRelative:Wye,localize:nbe,match:vbe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ybe(t,e){const r=zs(t,e==null?void 0:e.in);return Mye(r,Qye(r))+1}function cee(t,e){const r=zs(t,e==null?void 0:e.in),n=+Sv(r)-+Lye(r);return Math.round(n/iee)+1}function h6(t,e){var d,f,A,h;const r=zs(t,e==null?void 0:e.in),n=r.getFullYear(),a=a1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=Ui((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=im(o,e),c=Ui((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=im(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function bbe(t,e){var l,c,u,d;const r=a1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=h6(t,e),s=Ui((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),im(s,e)}function uee(t,e){const r=zs(t,e==null?void 0:e.in),n=+im(r,e)-+bbe(r,e);return Math.round(n/iee)+1}function Ia(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const WA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ia(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ia(r+1,2)},d(t,e){return Ia(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ia(t.getHours()%12||12,e.length)},H(t,e){return Ia(t.getHours(),e.length)},m(t,e){return Ia(t.getMinutes(),e.length)},s(t,e){return Ia(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ia(a,e.length)}},Gg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},c9={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return WA.y(t,e)},Y:function(t,e,r,n){const a=h6(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return Ia(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Ia(s,e.length)},R:function(t,e){const r=oee(t);return Ia(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ia(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ia(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ia(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return WA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ia(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=uee(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Ia(a,e.length)},I:function(t,e,r){const n=cee(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ia(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):WA.d(t,e)},D:function(t,e,r){const n=ybe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ia(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ia(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ia(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Ia(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Gg.noon:n===0?a=Gg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Gg.evening:n>=12?a=Gg.afternoon:n>=4?a=Gg.morning:a=Gg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return WA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):WA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ia(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ia(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):WA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):WA.s(t,e)},S:function(t,e){return WA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return d9(n);case"XXXX":case"XX":return qm(n);case"XXXXX":case"XXX":default:return qm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return d9(n);case"xxxx":case"xx":return qm(n);case"xxxxx":case"xxx":default:return qm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+u9(n,":");case"OOOO":default:return"GMT"+qm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+u9(n,":");case"zzzz":default:return"GMT"+qm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Ia(n,e.length)},T:function(t,e,r){return Ia(+t,e.length)}};function u9(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Ia(s,2)}function d9(t,e){return t%60===0?(t>0?"-":"+")+Ia(Math.abs(t)/60,2):qm(t,e)}function qm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ia(Math.trunc(n/60),2),s=Ia(n%60,2);return r+a+e+s}const f9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},dee=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wbe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return f9(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",f9(n,e)).replace("{{time}}",dee(a,e))},qT={p:dee,P:wbe},Nbe=/^D+$/,Cbe=/^Y+$/,_be=["D","DD","YY","YYYY"];function fee(t){return Nbe.test(t)}function hee(t){return Cbe.test(t)}function zT(t,e,r){const n=Ebe(t,e,r);if(console.warn(n),_be.includes(t))throw new RangeError(n)}function Ebe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Sbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ibe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jbe=/^'([^]*?)'?$/,Pbe=/''/g,Bbe=/[a-zA-Z]/;function Cr(t,e,r){var d,f,A,h;const n=a1(),a=n.locale??lee,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.weekStartsOn)??0,l=zs(t,r==null?void 0:r.in);if(!f6(l))throw new RangeError("Invalid time value");let c=e.match(Ibe).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=qT[p];return g(m,a.formatLong)}return m}).join("").match(Sbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Tbe(m)};if(c9[p])return{isToken:!0,value:m};if(p.match(Bbe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(hee(p)||fee(p))&&zT(p,e,String(t));const g=c9[p[0]];return g(l,p,a.localize,u)}).join("")}function Tbe(t){const e=t.match(jbe);return e?e[1].replace(Pbe,"'"):t}function kbe(){return Object.assign({},a1())}function Fbe(t,e){const r=zs(t,e==null?void 0:e.in).getDay();return r===0?7:r}function Obe(t,e){const r=Dbe(e)?new e(0):Ui(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function Dbe(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Rbe=10;class Aee{constructor(){Ar(this,"subPriority",0)}validate(e,r){return!0}}class Mbe extends Aee{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class Lbe extends Aee{constructor(r,n){super();Ar(this,"priority",Rbe);Ar(this,"subPriority",-1);this.context=r||(a=>Ui(n,a))}set(r,n){return n.timestampIsSet?r:Ui(r,Obe(r,this.context))}}let ma=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new Mbe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class Ube extends ma{constructor(){super(...arguments);Ar(this,"priority",140);Ar(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const Ci={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Sf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function _i(t,e){return t&&{value:e(t.value),rest:t.rest}}function Vs(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function If(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*kye+s*Tye+o*Fye),rest:e.slice(r[0].length)}}function mee(t){return Vs(Ci.anyDigitsSigned,t)}function li(t,e){switch(t){case 1:return Vs(Ci.singleDigit,e);case 2:return Vs(Ci.twoDigits,e);case 3:return Vs(Ci.threeDigits,e);case 4:return Vs(Ci.fourDigits,e);default:return Vs(new RegExp("^\\d{1,"+t+"}"),e)}}function lS(t,e){switch(t){case 1:return Vs(Ci.singleDigitSigned,e);case 2:return Vs(Ci.twoDigitsSigned,e);case 3:return Vs(Ci.threeDigitsSigned,e);case 4:return Vs(Ci.fourDigitsSigned,e);default:return Vs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function A6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function pee(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,l=t>=s%100;a=t+o-(l?100:0)}return r?a:1-a}function gee(t){return t%400===0||t%4===0&&t%100!==0}class Qbe extends ma{constructor(){super(...arguments);Ar(this,"priority",130);Ar(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return _i(li(4,r),s);case"yo":return _i(a.ordinalNumber(r,{unit:"year"}),s);default:return _i(li(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=pee(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class Vbe extends ma{constructor(){super(...arguments);Ar(this,"priority",130);Ar(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return _i(li(4,r),s);case"Yo":return _i(a.ordinalNumber(r,{unit:"year"}),s);default:return _i(li(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const o=h6(r,s);if(a.isTwoDigitYear){const c=pee(a.year,o);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),im(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),im(r,s)}}class Hbe extends ma{constructor(){super(...arguments);Ar(this,"priority",130);Ar(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return lS(n==="R"?4:n.length,r)}set(r,n,a){const s=Ui(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),Sv(s)}}class $be extends ma{constructor(){super(...arguments);Ar(this,"priority",130);Ar(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return lS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class Gbe extends ma{constructor(){super(...arguments);Ar(this,"priority",120);Ar(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return li(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class Kbe extends ma{constructor(){super(...arguments);Ar(this,"priority",120);Ar(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return li(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class qbe extends ma{constructor(){super(...arguments);Ar(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ar(this,"priority",110)}parse(r,n,a){const s=o=>o-1;switch(n){case"M":return _i(Vs(Ci.month,r),s);case"MM":return _i(li(2,r),s);case"Mo":return _i(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class zbe extends ma{constructor(){super(...arguments);Ar(this,"priority",110);Ar(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=o=>o-1;switch(n){case"L":return _i(Vs(Ci.month,r),s);case"LL":return _i(li(2,r),s);case"Lo":return _i(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function Wbe(t,e,r){const n=zs(t,r==null?void 0:r.in),a=uee(n,r)-e;return n.setDate(n.getDate()-a*7),zs(n,r==null?void 0:r.in)}class Xbe extends ma{constructor(){super(...arguments);Ar(this,"priority",100);Ar(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return Vs(Ci.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return li(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return im(Wbe(r,a,s),s)}}function Ybe(t,e,r){const n=zs(t,r==null?void 0:r.in),a=cee(n,r)-e;return n.setDate(n.getDate()-a*7),n}class Jbe extends ma{constructor(){super(...arguments);Ar(this,"priority",100);Ar(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return Vs(Ci.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return li(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return Sv(Ybe(r,a))}}const Zbe=[31,28,31,30,31,30,31,31,30,31,30,31],e2e=[31,29,31,30,31,30,31,31,30,31,30,31];class t2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"subPriority",1);Ar(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return Vs(Ci.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return li(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=gee(a),o=r.getMonth();return s?n>=1&&n<=e2e[o]:n>=1&&n<=Zbe[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class r2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"subpriority",1);Ar(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return Vs(Ci.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return li(n.length,r)}}validate(r,n){const a=r.getFullYear();return gee(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function m6(t,e,r){var f,A,h,m;const n=a1(),a=(r==null?void 0:r.weekStartsOn)??((A=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=zs(t,r==null?void 0:r.in),o=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return d6(s,d,r)}class n2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=m6(r,a,s),r.setHours(0,0,0,0),r}}class a2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return _i(li(n.length,r),o);case"eo":return _i(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=m6(r,a,s),r.setHours(0,0,0,0),r}}class s2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return _i(li(n.length,r),o);case"co":return _i(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=m6(r,a,s),r.setHours(0,0,0,0),r}}function i2e(t,e,r){const n=zs(t,r==null?void 0:r.in),a=Fbe(n,r),s=e-a;return d6(n,s,r)}class o2e extends ma{constructor(){super(...arguments);Ar(this,"priority",90);Ar(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=o=>o===0?7:o;switch(n){case"i":case"ii":return li(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return _i(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return _i(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return _i(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return _i(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=i2e(r,a),r.setHours(0,0,0,0),r}}class l2e extends ma{constructor(){super(...arguments);Ar(this,"priority",80);Ar(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(A6(a),0,0,0),r}}class c2e extends ma{constructor(){super(...arguments);Ar(this,"priority",80);Ar(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(A6(a),0,0,0),r}}class u2e extends ma{constructor(){super(...arguments);Ar(this,"priority",80);Ar(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(A6(a),0,0,0),r}}class d2e extends ma{constructor(){super(...arguments);Ar(this,"priority",70);Ar(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return Vs(Ci.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return li(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class f2e extends ma{constructor(){super(...arguments);Ar(this,"priority",70);Ar(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return Vs(Ci.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return li(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class h2e extends ma{constructor(){super(...arguments);Ar(this,"priority",70);Ar(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return Vs(Ci.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return li(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class A2e extends ma{constructor(){super(...arguments);Ar(this,"priority",70);Ar(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return Vs(Ci.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return li(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class m2e extends ma{constructor(){super(...arguments);Ar(this,"priority",60);Ar(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return Vs(Ci.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return li(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class p2e extends ma{constructor(){super(...arguments);Ar(this,"priority",50);Ar(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return Vs(Ci.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return li(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class g2e extends ma{constructor(){super(...arguments);Ar(this,"priority",30);Ar(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return _i(li(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class x2e extends ma{constructor(){super(...arguments);Ar(this,"priority",10);Ar(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return If(Sf.basicOptionalMinutes,r);case"XX":return If(Sf.basic,r);case"XXXX":return If(Sf.basicOptionalSeconds,r);case"XXXXX":return If(Sf.extendedOptionalSeconds,r);case"XXX":default:return If(Sf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Ui(r,r.getTime()-oS(r)-a)}}class v2e extends ma{constructor(){super(...arguments);Ar(this,"priority",10);Ar(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return If(Sf.basicOptionalMinutes,r);case"xx":return If(Sf.basic,r);case"xxxx":return If(Sf.basicOptionalSeconds,r);case"xxxxx":return If(Sf.extendedOptionalSeconds,r);case"xxx":default:return If(Sf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Ui(r,r.getTime()-oS(r)-a)}}class y2e extends ma{constructor(){super(...arguments);Ar(this,"priority",40);Ar(this,"incompatibleTokens","*")}parse(r){return mee(r)}set(r,n,a){return[Ui(r,a*1e3),{timestampIsSet:!0}]}}class b2e extends ma{constructor(){super(...arguments);Ar(this,"priority",20);Ar(this,"incompatibleTokens","*")}parse(r){return mee(r)}set(r,n,a){return[Ui(r,a),{timestampIsSet:!0}]}}const w2e={G:new Ube,y:new Qbe,Y:new Vbe,R:new Hbe,u:new $be,Q:new Gbe,q:new Kbe,M:new qbe,L:new zbe,w:new Xbe,I:new Jbe,d:new t2e,D:new r2e,E:new n2e,e:new a2e,c:new s2e,i:new o2e,a:new l2e,b:new c2e,B:new u2e,h:new d2e,H:new f2e,K:new h2e,k:new A2e,m:new m2e,s:new p2e,S:new g2e,X:new x2e,x:new v2e,t:new y2e,T:new b2e},N2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_2e=/^'([^]*?)'?$/,E2e=/''/g,S2e=/\S/,I2e=/[a-zA-Z]/;function cS(t,e,r,n){var g,x,y,b;const a=()=>Ui(r,NaN),s=kbe(),o=s.locale??lee,l=s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():zs(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},d=[new Lbe(n==null?void 0:n.in,r)],f=e.match(C2e).map(w=>{const j=w[0];if(j in qT){const I=qT[j];return I(w,o.formatLong)}return w}).join("").match(N2e),A=[];for(let w of f){hee(w)&&zT(w,e,t),fee(w)&&zT(w,e,t);const j=w[0],I=w2e[j];if(I){const{incompatibleTokens:_}=I;if(Array.isArray(_)){const E=A.find(F=>_.includes(F.token)||F.token===j);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(I.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);A.push({token:j,fullToken:w});const S=I.run(t,w,o.match,u);if(!S)return a();d.push(S.setter),t=S.rest}else{if(j.match(I2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(w==="''"?w="'":j==="'"&&(w=j2e(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&S2e.test(t))return a();const h=d.map(w=>w.priority).sort((w,j)=>j-w).filter((w,j,I)=>I.indexOf(w)===j).map(w=>d.filter(j=>j.priority===w).sort((j,I)=>I.subPriority-j.subPriority)).map(w=>w[0]);let m=zs(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of h){if(!w.validate(m,u))return a();const j=w.set(m,p,u);Array.isArray(j)?(m=j[0],Object.assign(p,j[1])):m=j}return m}function j2e(t){return t.match(_2e)[1].replace(E2e,"'")}function xee(t,e,r){return d6(t,-14,r)}function P2e(t,e,r){return Oye(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WT=function(t,e){return WT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},WT(t,e)};function of(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");WT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var XT=function(){return XT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},XT.apply(this,arguments)};function Xl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function El(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function YN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var tA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Oj=function(t,e){return tA.fromClientRect(t,e.getBoundingClientRect())},B2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new tA(0,0,n,a)},Dj=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},xi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},h9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var JN=0;JN<h9.length;JN++)T2e[h9.charCodeAt(JN)]=JN;var A9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ky=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ZN=0;ZN<A9.length;ZN++)ky[A9.charCodeAt(ZN)]=ZN;var k2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ky[t.charCodeAt(n)],o=ky[t.charCodeAt(n+1)],l=ky[t.charCodeAt(n+2)],c=ky[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},F2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},O2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},yp=5,p6=11,g3=2,D2e=p6-yp,vee=65536>>yp,R2e=1<<yp,x3=R2e-1,M2e=1024>>yp,L2e=vee+M2e,U2e=L2e,Q2e=32,V2e=U2e+Q2e,H2e=65536>>p6,$2e=1<<D2e,G2e=$2e-1,m9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},K2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},q2e=function(t,e){var r=k2e(t),n=Array.isArray(r)?O2e(r):new Uint32Array(r),a=Array.isArray(r)?F2e(r):new Uint16Array(r),s=24,o=m9(a,s/2,n[4]/2),l=n[5]===2?m9(a,(s+n[4])/2):K2e(n,Math.ceil((s+n[4])/4));return new z2e(n[0],n[1],n[2],n[3],o,l)},z2e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>yp],r=(r<<g3)+(e&x3),this.data[r];if(e<=65535)return r=this.index[vee+(e-55296>>yp)],r=(r<<g3)+(e&x3),this.data[r];if(e<this.highStart)return r=V2e-H2e+(e>>p6),r=this.index[r],r+=e>>yp&G2e,r=this.index[r],r=(r<<g3)+(e&x3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),p9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eC=0;eC<p9.length;eC++)W2e[p9.charCodeAt(eC)]=eC;var X2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",g9=50,Y2e=1,yee=2,bee=3,J2e=4,Z2e=5,x9=7,wee=8,v9=9,S0=10,YT=11,y9=12,JT=13,ewe=14,Fy=15,ZT=16,tC=17,ny=18,twe=19,b9=20,ek=21,ay=22,v3=23,Kg=24,Jc=25,Oy=26,Dy=27,qg=28,rwe=29,ap=30,nwe=31,rC=32,nC=33,tk=34,rk=35,nk=36,m2=37,ak=38,eE=39,tE=40,y3=41,Nee=42,awe=43,swe=[9001,65288],Cee="!",Hn="",aC="",sk=q2e(X2e),oh=[ap,nk],ik=[Y2e,yee,bee,Z2e],_ee=[S0,wee],w9=[Dy,Oy],iwe=ik.concat(_ee),N9=[ak,eE,tE,tk,rk],owe=[Fy,JT],lwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,o){var l=sk.get(s);if(l>g9?(a.push(!0),l-=g9):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(ZT);if(l===J2e||l===YT){if(o===0)return n.push(o),r.push(ap);var c=r[o-1];return iwe.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(ap))}if(n.push(o),l===nwe)return r.push(e==="strict"?ek:m2);if(l===Nee||l===rwe)return r.push(ap);if(l===awe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(m2):r.push(ap);r.push(l)}),[n,r,a]},b3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==S0)break}if(a===S0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===e)return!0;if(o!==S0)break}if(l!==S0)break}return!1},C9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===S0)r--;else return n}return 0},cwe=function(t,e,r,n,a){if(r[n]===0)return Hn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Hn;var o=s-1,l=s+1,c=e[s],u=o>=0?e[o]:0,d=e[l];if(c===yee&&d===bee)return Hn;if(ik.indexOf(c)!==-1)return Cee;if(ik.indexOf(d)!==-1||_ee.indexOf(d)!==-1)return Hn;if(C9(s,e)===wee)return aC;if(sk.get(t[s])===YT||(c===rC||c===nC)&&sk.get(t[l])===YT||c===x9||d===x9||c===v9||[S0,JT,Fy].indexOf(c)===-1&&d===v9||[tC,ny,twe,Kg,qg].indexOf(d)!==-1||C9(s,e)===ay||b3(v3,ay,s,e)||b3([tC,ny],ek,s,e)||b3(y9,y9,s,e))return Hn;if(c===S0)return aC;if(c===v3||d===v3)return Hn;if(d===ZT||c===ZT)return aC;if([JT,Fy,ek].indexOf(d)!==-1||c===ewe||u===nk&&owe.indexOf(c)!==-1||c===qg&&d===nk||d===b9||oh.indexOf(d)!==-1&&c===Jc||oh.indexOf(c)!==-1&&d===Jc||c===Dy&&[m2,rC,nC].indexOf(d)!==-1||[m2,rC,nC].indexOf(c)!==-1&&d===Oy||oh.indexOf(c)!==-1&&w9.indexOf(d)!==-1||w9.indexOf(c)!==-1&&oh.indexOf(d)!==-1||[Dy,Oy].indexOf(c)!==-1&&(d===Jc||[ay,Fy].indexOf(d)!==-1&&e[l+1]===Jc)||[ay,Fy].indexOf(c)!==-1&&d===Jc||c===Jc&&[Jc,qg,Kg].indexOf(d)!==-1)return Hn;if([Jc,qg,Kg,tC,ny].indexOf(d)!==-1)for(var f=s;f>=0;){var A=e[f];if(A===Jc)return Hn;if([qg,Kg].indexOf(A)!==-1)f--;else break}if([Dy,Oy].indexOf(d)!==-1)for(var f=[tC,ny].indexOf(c)!==-1?o:s;f>=0;){var A=e[f];if(A===Jc)return Hn;if([qg,Kg].indexOf(A)!==-1)f--;else break}if(ak===c&&[ak,eE,tk,rk].indexOf(d)!==-1||[eE,tk].indexOf(c)!==-1&&[eE,tE].indexOf(d)!==-1||[tE,rk].indexOf(c)!==-1&&d===tE||N9.indexOf(c)!==-1&&[b9,Oy].indexOf(d)!==-1||N9.indexOf(d)!==-1&&c===Dy||oh.indexOf(c)!==-1&&oh.indexOf(d)!==-1||c===Kg&&oh.indexOf(d)!==-1||oh.concat(Jc).indexOf(c)!==-1&&d===ay&&swe.indexOf(t[l])===-1||oh.concat(Jc).indexOf(d)!==-1&&c===ny)return Hn;if(c===y3&&d===y3){for(var h=r[s],m=1;h>0&&(h--,e[h]===y3);)m++;if(m%2!==0)return Hn}return c===rC&&d===nC?Hn:aC},uwe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=lwe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Jc,ap,Nee].indexOf(l)!==-1?m2:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,o]},dwe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===Cee,this.start=n,this.end=a}return t.prototype.slice=function(){return xi.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),fwe=function(t,e){var r=Dj(t),n=uwe(r,e),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Hn;u<l&&(d=cwe(r,s,a,++u,o))===Hn;);if(d!==Hn||u===l){var f=new dwe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},hwe=1,Awe=2,_w=4,_9=8,uS=10,E9=47,db=92,mwe=9,pwe=32,sC=34,sy=61,gwe=35,xwe=36,vwe=37,iC=39,oC=40,iy=41,ywe=95,Nc=45,bwe=33,wwe=60,Nwe=62,Cwe=64,_we=91,Ewe=93,Swe=61,Iwe=123,lC=63,jwe=125,S9=124,Pwe=126,Bwe=128,I9=65533,w3=42,up=43,Twe=44,kwe=58,Fwe=59,p2=46,Owe=0,Dwe=8,Rwe=11,Mwe=14,Lwe=31,Uwe=127,gf=-1,Eee=48,See=97,Iee=101,Qwe=102,Vwe=117,Hwe=122,jee=65,Pee=69,Bee=70,$we=85,Gwe=90,jl=function(t){return t>=Eee&&t<=57},Kwe=function(t){return t>=55296&&t<=57343},zg=function(t){return jl(t)||t>=jee&&t<=Bee||t>=See&&t<=Qwe},qwe=function(t){return t>=See&&t<=Hwe},zwe=function(t){return t>=jee&&t<=Gwe},Wwe=function(t){return qwe(t)||zwe(t)},Xwe=function(t){return t>=Bwe},cC=function(t){return t===uS||t===mwe||t===pwe},dS=function(t){return Wwe(t)||Xwe(t)||t===ywe},j9=function(t){return dS(t)||jl(t)||t===Nc},Ywe=function(t){return t>=Owe&&t<=Dwe||t===Rwe||t>=Mwe&&t<=Lwe||t===Uwe},u0=function(t,e){return t!==db?!1:e!==uS},uC=function(t,e,r){return t===Nc?dS(e)||u0(e,r):dS(t)?!0:!!(t===db&&u0(t,e))},N3=function(t,e,r){return t===up||t===Nc?jl(e)?!0:e===p2&&jl(r):jl(t===p2?e:t)},Jwe=function(t){var e=0,r=1;(t[e]===up||t[e]===Nc)&&(t[e]===Nc&&(r=-1),e++);for(var n=[];jl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(xi.apply(void 0,n),10):0;t[e]===p2&&e++;for(var s=[];jl(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(xi.apply(void 0,s),10):0;(t[e]===Pee||t[e]===Iee)&&e++;var c=1;(t[e]===up||t[e]===Nc)&&(t[e]===Nc&&(c=-1),e++);for(var u=[];jl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(xi.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},Zwe={type:2},eNe={type:3},tNe={type:4},rNe={type:13},nNe={type:8},aNe={type:21},sNe={type:9},iNe={type:10},oNe={type:11},lNe={type:12},cNe={type:14},dC={type:23},uNe={type:1},dNe={type:25},fNe={type:24},hNe={type:26},ANe={type:27},mNe={type:28},pNe={type:29},gNe={type:31},ok={type:32},Tee=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Dj(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==ok;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case sC:return this.consumeStringToken(sC);case gwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(j9(r)||u0(n,a)){var s=uC(r,n,a)?Awe:hwe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case xwe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),rNe;break;case iC:return this.consumeStringToken(iC);case oC:return Zwe;case iy:return eNe;case w3:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),cNe;break;case up:if(N3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Twe:return tNe;case Nc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(N3(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(uC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Nc&&u===Nwe)return this.consumeCodePoint(),this.consumeCodePoint(),fNe;break;case p2:if(N3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case E9:if(this.peekCodePoint(0)===w3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===w3&&(d=this.consumeCodePoint(),d===E9))return this.consumeToken();if(d===gf)return this.consumeToken()}break;case kwe:return hNe;case Fwe:return ANe;case wwe:if(this.peekCodePoint(0)===bwe&&this.peekCodePoint(1)===Nc&&this.peekCodePoint(2)===Nc)return this.consumeCodePoint(),this.consumeCodePoint(),dNe;break;case Cwe:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(uC(f,A,h)){var o=this.consumeName();return{type:7,value:o}}break;case _we:return mNe;case db:if(u0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Ewe:return pNe;case Swe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),nNe;break;case Iwe:return oNe;case jwe:return lNe;case Vwe:case $we:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===up&&(zg(p)||p===lC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case S9:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),sNe;if(this.peekCodePoint(0)===S9)return this.consumeCodePoint(),aNe;break;case Pwe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),iNe;break;case gf:return ok}return cC(e)?(this.consumeWhiteSpace(),gNe):jl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):dS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:xi(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();zg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===lC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(xi.apply(void 0,e.map(function(c){return c===lC?Eee:c})),16),s=parseInt(xi.apply(void 0,e.map(function(c){return c===lC?Bee:c})),16);return{type:30,start:a,end:s}}var o=parseInt(xi.apply(void 0,e),16);if(this.peekCodePoint(0)===Nc&&zg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];zg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(xi.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===oC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===oC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===iC||r===sC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gf||this.peekCodePoint(0)===iy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),dC)}for(;;){var a=this.consumeCodePoint();if(a===gf||a===iy)return{type:22,value:xi.apply(void 0,e)};if(cC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gf||this.peekCodePoint(0)===iy?(this.consumeCodePoint(),{type:22,value:xi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dC);if(a===sC||a===iC||a===oC||Ywe(a))return this.consumeBadUrlRemnants(),dC;if(a===db)if(u0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;cC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===iy||e===gf)return;u0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=xi.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===gf||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===uS)return this._value.splice(0,n),uNe;if(a===db){var s=this._value[n+1];s!==gf&&s!==void 0&&(s===uS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):u0(a,s)&&(r+=this.consumeStringSlice(n),r+=xi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=_w,n=this.peekCodePoint(0);for((n===up||n===Nc)&&e.push(this.consumeCodePoint());jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===p2&&jl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_9;jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Pee||n===Iee)&&((a===up||a===Nc)&&jl(s)||jl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=_9;jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Jwe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(uC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===vwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(zg(e)){for(var r=xi(e);zg(this.peekCodePoint(0))&&r.length<6;)r+=xi(this.consumeCodePoint());cC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Kwe(n)||n>1114111?I9:n}return e===gf?I9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(j9(r))e+=xi(r);else if(u0(r,this.peekCodePoint(0)))e+=xi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),kee=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new Tee;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||vNe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ok:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ew=function(t){return t.type===15},s1=function(t){return t.type===17},La=function(t){return t.type===20},xNe=function(t){return t.type===0},lk=function(t,e){return La(t)&&t.value===e},Fee=function(t){return t.type!==31},Iv=function(t){return t.type!==31&&t.type!==4},zf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},vNe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},om=function(t){return t.type===17||t.type===15},Fi=function(t){return t.type===16||om(t)},Oee=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},il={type:17,number:0,flags:_w},g6={type:16,number:50,flags:_w},I0={type:16,number:100,flags:_w},Ry=function(t,e,r){var n=t[0],a=t[1];return[ts(n,e),ts(typeof a<"u"?a:n,r)]},ts=function(t,e){if(t.type===16)return t.number/100*e;if(Ew(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Dee="deg",Ree="grad",Mee="rad",Lee="turn",Rj={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Dee:return Math.PI*e.number/180;case Ree:return Math.PI/200*e.number;case Mee:return e.number;case Lee:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Uee=function(t){return t.type===15&&(t.unit===Dee||t.unit===Ree||t.unit===Mee||t.unit===Lee)},Qee=function(t){var e=t.filter(La).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[il,il];case"to top":case"bottom":return Ju(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[il,I0];case"to right":case"left":return Ju(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[I0,I0];case"to bottom":case"top":return Ju(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[I0,il];case"to left":case"right":return Ju(270)}return 0},Ju=function(t){return Math.PI*t/180},K0={name:"color",parse:function(t,e){if(e.type===18){var r=yNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return j0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return j0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return j0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return j0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=Qh[e.value.toUpperCase()];if(typeof l<"u")return l}return Qh.TRANSPARENT}},q0=function(t){return(255&t)===0},yo=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},j0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},P9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},B9=function(t,e){var r=e.filter(Iv);if(r.length===3){var n=r.map(P9),a=n[0],s=n[1],o=n[2];return j0(a,s,o,1)}if(r.length===4){var l=r.map(P9),a=l[0],s=l[1],o=l[2],c=l[3];return j0(a,s,o,c)}return 0};function C3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var T9=function(t,e){var r=e.filter(Iv),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Ju(n.number):Rj.parse(t,n))/(Math.PI*2),c=Fi(a)?a.number/100:0,u=Fi(s)?s.number/100:0,d=typeof o<"u"&&Fi(o)?ts(o,1):1;if(c===0)return j0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,h=C3(A,f,l+1/3),m=C3(A,f,l),p=C3(A,f,l-1/3);return j0(h*255,m*255,p*255,d)},yNe={hsl:T9,hsla:T9,rgb:B9,rgba:B9},fb=function(t,e){return K0.parse(t,kee.create(e).parseComponentValue())},Qh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},bNe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(La(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wNe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mj=function(t,e){var r=K0.parse(t,e[0]),n=e[1];return n&&Fi(n)?{color:r,stop:n}:{color:r,stop:null}},k9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=il),n.stop===null&&(n.stop=I0);for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=ts(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],h=(d-A)/(f+1),m=1;m<=f;m++)a[u+m-1]=h*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},NNe=function(t,e,r){var n=e/2,a=r/2,s=ts(t[0],e)-n,o=a-ts(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},CNe=function(t,e,r){var n=typeof t=="number"?t:NNe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},Fd=function(t,e){return Math.sqrt(t*t+e*e)},F9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=Fd(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},_Ne=function(t,e,r,n,a){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=o=Math.min(Fd(e,r),Fd(e,r-a),Fd(e-n,r),Fd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=F9(n,a,e,r,!0),u=c[0],d=c[1];s=Fd(u-e,(d-r)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=o=Math.max(Fd(e,r),Fd(e,r-a),Fd(e-n,r),Fd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=F9(n,a,e,r,!1),u=f[0],d=f[1];s=Fd(u-e,(d-r)/l),o=l*s}break}return Array.isArray(t.size)&&(s=ts(t.size[0],n),o=t.size.length===2?ts(t.size[1],a):s),[s,o]},ENe=function(t,e){var r=Ju(180),n=[];return zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Qee(a);return}else if(Uee(o)){r=Rj.parse(t,o);return}}var l=Mj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},fC=function(t,e){var r=Ju(180),n=[];return zf(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Qee(a);return}else if(Uee(o)){r=(Rj.parse(t,o)+Ju(270))%Ju(360);return}}var l=Mj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},SNe=function(t,e){var r=Ju(180),n=[],a=1,s=0,o=3,l=[];return zf(e).forEach(function(c,u){var d=c[0];if(u===0){if(La(d)&&d.value==="linear"){a=1;return}else if(La(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=K0.parse(t,d.values[0]);n.push({stop:il,color:f})}else if(d.name==="to"){var f=K0.parse(t,d.values[0]);n.push({stop:I0,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(Iv);if(A.length===2){var f=K0.parse(t,A[1]),h=A[0];s1(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),a===1?{angle:(r+Ju(180))%Ju(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Vee="closest-side",Hee="farthest-side",$ee="closest-corner",Gee="farthest-corner",Kee="circle",qee="ellipse",zee="cover",Wee="contain",INe=function(t,e){var r=0,n=3,a=[],s=[];return zf(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(La(A))switch(A.value){case"center":return s.push(g6),f;case"top":case"left":return s.push(il),f;case"right":case"bottom":return s.push(I0),f}else(Fi(A)||om(A))&&s.push(A);else if(La(A))switch(A.value){case Kee:return r=0,!1;case qee:return r=1,!1;case"at":return u=!0,!1;case Vee:return n=0,!1;case zee:case Hee:return n=1,!1;case Wee:case $ee:return n=2,!1;case Gee:return n=3,!1}else if(om(A)||Fi(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=Mj(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},hC=function(t,e){var r=0,n=3,a=[],s=[];return zf(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(La(f))switch(f.value){case"center":return s.push(g6),!1;case"top":case"left":return s.push(il),!1;case"right":case"bottom":return s.push(I0),!1}else if(Fi(f)||om(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(La(f))switch(f.value){case Kee:return r=0,!1;case qee:return r=1,!1;case Wee:case Vee:return n=0,!1;case Hee:return n=1,!1;case $ee:return n=2,!1;case zee:case Gee:return n=3,!1}else if(om(f)||Fi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Mj(t,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},jNe=function(t){return t.type===1},PNe=function(t){return t.type===2},x6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Xee[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function BNe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Xee[t.name])}var Xee={"linear-gradient":ENe,"-moz-linear-gradient":fC,"-ms-linear-gradient":fC,"-o-linear-gradient":fC,"-webkit-linear-gradient":fC,"radial-gradient":INe,"-moz-radial-gradient":hC,"-ms-radial-gradient":hC,"-o-radial-gradient":hC,"-webkit-radial-gradient":hC,"-webkit-gradient":SNe},TNe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Iv(n)&&BNe(n)}).map(function(n){return x6.parse(t,n)})}},kNe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(La(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},FNe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return zf(e).map(function(r){return r.filter(Fi)}).map(Oee)}},ONe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return zf(e).map(function(r){return r.filter(La).map(function(n){return n.value}).join(" ")}).map(DNe)}},DNe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},nv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(nv||(nv={}));var RNe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return zf(e).map(function(r){return r.filter(MNe)})}},MNe=function(t){return La(t)||Fi(t)},Lj=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},LNe=Lj("top"),UNe=Lj("right"),QNe=Lj("bottom"),VNe=Lj("left"),Uj=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Oee(r.filter(Fi))}}},HNe=Uj("top-left"),$Ne=Uj("top-right"),GNe=Uj("bottom-right"),KNe=Uj("bottom-left"),Qj=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},qNe=Qj("top"),zNe=Qj("right"),WNe=Qj("bottom"),XNe=Qj("left"),Vj=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Ew(r)?r.number:0}}},YNe=Vj("top"),JNe=Vj("right"),ZNe=Vj("bottom"),eCe=Vj("left"),tCe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rCe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},nCe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(La).reduce(function(r,n){return r|aCe(n.value)},0)}},aCe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},sCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},iCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},fS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(fS||(fS={}));var oCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return fS.STRICT;case"normal":default:return fS.NORMAL}}},lCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},O9=function(t,e){return La(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Fi(t)?ts(t,e):e},cCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:x6.parse(t,e)}},uCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ck={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Hj=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},dCe=Hj("top"),fCe=Hj("right"),hCe=Hj("bottom"),ACe=Hj("left"),mCe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(La).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},pCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},$j=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},gCe=$j("top"),xCe=$j("right"),vCe=$j("bottom"),yCe=$j("left"),bCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},wCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},NCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lk(e[0],"none")?[]:zf(e).map(function(r){for(var n={color:Qh.TRANSPARENT,offsetX:il,offsetY:il,blur:il},a=0,s=0;s<r.length;s++){var o=r[s];om(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=K0.parse(t,o)}return n})}},CCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_Ce={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=ICe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},ECe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},SCe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,o,l]:null},ICe={matrix:ECe,matrix3d:SCe},D9={type:16,number:50,flags:_w},jCe=[D9,D9],PCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Fi);return r.length!==2?jCe:[r[0],r[1]]}},BCe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},hb;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(hb||(hb={}));var TCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return hb.BREAK_ALL;case"keep-all":return hb.KEEP_ALL;case"normal":default:return hb.NORMAL}}},kCe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(s1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Yee={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},FCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return s1(e)?e.number:1}},OCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},DCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(La).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},RCe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},MCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},LCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(s1(e))return e.number;if(La(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},UCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(La).map(function(r){return r.value})}},QCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ro=function(t,e){return(t&e)!==0},VCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},HCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(Fee),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&s1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},$Ce={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(Fee),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(La(s)&&s.value!=="none"){var l=o&&s1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},GCe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ew).map(function(r){return Yee.parse(t,r)})}},KCe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(xNe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},R9=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},qCe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lk(e[0],"none")?[]:zf(e).map(function(r){for(var n={color:255,offsetX:il,offsetY:il,blur:il,spread:il,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];lk(o,"inset")?n.inset=!0:om(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=K0.parse(t,o)}return n})}},zCe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(La).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},WCe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},XCe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ew(e)?e.number:0}},YCe=function(){function t(e,r){var n,a;this.animationDuration=Dr(e,GCe,r.animationDuration),this.backgroundClip=Dr(e,bNe,r.backgroundClip),this.backgroundColor=Dr(e,wNe,r.backgroundColor),this.backgroundImage=Dr(e,TNe,r.backgroundImage),this.backgroundOrigin=Dr(e,kNe,r.backgroundOrigin),this.backgroundPosition=Dr(e,FNe,r.backgroundPosition),this.backgroundRepeat=Dr(e,ONe,r.backgroundRepeat),this.backgroundSize=Dr(e,RNe,r.backgroundSize),this.borderTopColor=Dr(e,LNe,r.borderTopColor),this.borderRightColor=Dr(e,UNe,r.borderRightColor),this.borderBottomColor=Dr(e,QNe,r.borderBottomColor),this.borderLeftColor=Dr(e,VNe,r.borderLeftColor),this.borderTopLeftRadius=Dr(e,HNe,r.borderTopLeftRadius),this.borderTopRightRadius=Dr(e,$Ne,r.borderTopRightRadius),this.borderBottomRightRadius=Dr(e,GNe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Dr(e,KNe,r.borderBottomLeftRadius),this.borderTopStyle=Dr(e,qNe,r.borderTopStyle),this.borderRightStyle=Dr(e,zNe,r.borderRightStyle),this.borderBottomStyle=Dr(e,WNe,r.borderBottomStyle),this.borderLeftStyle=Dr(e,XNe,r.borderLeftStyle),this.borderTopWidth=Dr(e,YNe,r.borderTopWidth),this.borderRightWidth=Dr(e,JNe,r.borderRightWidth),this.borderBottomWidth=Dr(e,ZNe,r.borderBottomWidth),this.borderLeftWidth=Dr(e,eCe,r.borderLeftWidth),this.boxShadow=Dr(e,qCe,r.boxShadow),this.color=Dr(e,tCe,r.color),this.direction=Dr(e,rCe,r.direction),this.display=Dr(e,nCe,r.display),this.float=Dr(e,sCe,r.cssFloat),this.fontFamily=Dr(e,RCe,r.fontFamily),this.fontSize=Dr(e,MCe,r.fontSize),this.fontStyle=Dr(e,QCe,r.fontStyle),this.fontVariant=Dr(e,UCe,r.fontVariant),this.fontWeight=Dr(e,LCe,r.fontWeight),this.letterSpacing=Dr(e,iCe,r.letterSpacing),this.lineBreak=Dr(e,oCe,r.lineBreak),this.lineHeight=Dr(e,lCe,r.lineHeight),this.listStyleImage=Dr(e,cCe,r.listStyleImage),this.listStylePosition=Dr(e,uCe,r.listStylePosition),this.listStyleType=Dr(e,ck,r.listStyleType),this.marginTop=Dr(e,dCe,r.marginTop),this.marginRight=Dr(e,fCe,r.marginRight),this.marginBottom=Dr(e,hCe,r.marginBottom),this.marginLeft=Dr(e,ACe,r.marginLeft),this.opacity=Dr(e,FCe,r.opacity);var s=Dr(e,mCe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Dr(e,pCe,r.overflowWrap),this.paddingTop=Dr(e,gCe,r.paddingTop),this.paddingRight=Dr(e,xCe,r.paddingRight),this.paddingBottom=Dr(e,vCe,r.paddingBottom),this.paddingLeft=Dr(e,yCe,r.paddingLeft),this.paintOrder=Dr(e,zCe,r.paintOrder),this.position=Dr(e,wCe,r.position),this.textAlign=Dr(e,bCe,r.textAlign),this.textDecorationColor=Dr(e,OCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Dr(e,DCe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Dr(e,NCe,r.textShadow),this.textTransform=Dr(e,CCe,r.textTransform),this.transform=Dr(e,_Ce,r.transform),this.transformOrigin=Dr(e,PCe,r.transformOrigin),this.visibility=Dr(e,BCe,r.visibility),this.webkitTextStrokeColor=Dr(e,WCe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Dr(e,XCe,r.webkitTextStrokeWidth),this.wordBreak=Dr(e,TCe,r.wordBreak),this.zIndex=Dr(e,kCe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return q0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return ro(this.display,4)||ro(this.display,33554432)||ro(this.display,268435456)||ro(this.display,536870912)||ro(this.display,67108864)||ro(this.display,134217728)},t}(),JCe=function(){function t(e,r){this.content=Dr(e,VCe,r.content),this.quotes=Dr(e,KCe,r.quotes)}return t}(),M9=function(){function t(e,r){this.counterIncrement=Dr(e,HCe,r.counterIncrement),this.counterReset=Dr(e,$Ce,r.counterReset)}return t}(),Dr=function(t,e,r){var n=new Tee,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new kee(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,La(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Rj.parse(t,s.parseComponentValue());case"color":return K0.parse(t,s.parseComponentValue());case"image":return x6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return om(l)?l:il;case"length-percentage":var c=s.parseComponentValue();return Fi(c)?c:il;case"time":return Yee.parse(t,s.parseComponentValue())}break}},ZCe="data-html2canvas-debug",e_e=function(t){var e=t.getAttribute(ZCe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},uk=function(t,e){var r=e_e(t);return r===1||e===r},Wf=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,uk(r,3))debugger;this.styles=new YCe(e,window.getComputedStyle(r,null)),hk(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Oj(this.context,r),uk(r,4)&&(this.flags|=16)}return t}(),t_e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",L9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",My=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var AC=0;AC<L9.length;AC++)My[L9.charCodeAt(AC)]=AC;var r_e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=My[t.charCodeAt(n)],o=My[t.charCodeAt(n+1)],l=My[t.charCodeAt(n+2)],c=My[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},n_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},a_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},bp=5,v6=11,_3=2,s_e=v6-bp,Jee=65536>>bp,i_e=1<<bp,E3=i_e-1,o_e=1024>>bp,l_e=Jee+o_e,c_e=l_e,u_e=32,d_e=c_e+u_e,f_e=65536>>v6,h_e=1<<s_e,A_e=h_e-1,U9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},m_e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},p_e=function(t,e){var r=r_e(t),n=Array.isArray(r)?a_e(r):new Uint32Array(r),a=Array.isArray(r)?n_e(r):new Uint16Array(r),s=24,o=U9(a,s/2,n[4]/2),l=n[5]===2?U9(a,(s+n[4])/2):m_e(n,Math.ceil((s+n[4])/4));return new g_e(n[0],n[1],n[2],n[3],o,l)},g_e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>bp],r=(r<<_3)+(e&E3),this.data[r];if(e<=65535)return r=this.index[Jee+(e-55296>>bp)],r=(r<<_3)+(e&E3),this.data[r];if(e<this.highStart)return r=d_e-f_e+(e>>v6),r=this.index[r],r+=e>>bp&A_e,r=this.index[r],r=(r<<_3)+(e&E3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Q9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mC=0;mC<Q9.length;mC++)x_e[Q9.charCodeAt(mC)]=mC;var v_e=1,S3=2,I3=3,V9=4,H9=5,y_e=7,$9=8,j3=9,P3=10,G9=11,K9=12,q9=13,z9=14,B3=15,b_e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},w_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},N_e=p_e(t_e),$u="",T3="",C_e=function(t){return N_e.get(t)},__e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],o=e[r];if(s===S3&&o===I3)return $u;if(s===S3||s===I3||s===V9||o===S3||o===I3||o===V9)return T3;if(s===$9&&[$9,j3,G9,K9].indexOf(o)!==-1||(s===G9||s===j3)&&(o===j3||o===P3)||(s===K9||s===P3)&&o===P3||o===q9||o===H9||o===y_e||s===v_e)return $u;if(s===q9&&o===z9){for(;a===H9;)a=e[--n];if(a===z9)return $u}if(s===B3&&o===B3){for(var l=0;a===B3;)l++,a=e[--n];if(l%2===0)return $u}return T3},E_e=function(t){var e=b_e(t),r=e.length,n=0,a=0,s=e.map(C_e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=$u;n<r&&(o=__e(e,s,++n))===$u;);if(o!==$u||n===r){var l=w_e.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},S_e=function(t){for(var e=E_e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},I_e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},j_e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Dj(n.data).map(function(c){return xi(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return t.body.removeChild(e),l},P_e=function(){return typeof new Image().crossOrigin<"u"},B_e=function(){return typeof new XMLHttpRequest().responseType=="string"},T_e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},W9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},k_e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var o=dk(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),X9(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",W9(c)?X9(dk(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),W9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},dk=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},X9=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},el={get SUPPORT_RANGE_BOUNDS(){var t=I_e(document);return Object.defineProperty(el,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=el.SUPPORT_RANGE_BOUNDS&&j_e(document);return Object.defineProperty(el,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=T_e(document);return Object.defineProperty(el,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?k_e(document):Promise.resolve(!1);return Object.defineProperty(el,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=P_e();return Object.defineProperty(el,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=B_e();return Object.defineProperty(el,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(el,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(el,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ab=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),F_e=function(t,e,r,n){var a=R_e(e,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(el.SUPPORT_RANGE_BOUNDS){var c=Y9(n,o,l.length).getClientRects();if(c.length>1){var u=y6(l),d=0;u.forEach(function(A){s.push(new Ab(A,tA.fromDOMRectList(t,Y9(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new Ab(l,tA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new Ab(l,O_e(t,n))),n=f}else el.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},O_e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Oj(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return tA.EMPTY},Y9=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},y6=function(t){if(el.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return S_e(t)},D_e=function(t,e){if(el.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return L_e(t,e)},R_e=function(t,e){return e.letterSpacing!==0?y6(t):D_e(t,e)},M_e=[32,160,4961,65792,65793,4153,4241],L_e=function(t,e){for(var r=fwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=Dj(o),c="";l.forEach(function(u){M_e.indexOf(u)===-1?c+=xi(u):(c.length&&n.push(c),n.push(xi(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},U_e=function(){function t(e,r,n){this.text=Q_e(r.data,n.textTransform),this.textBounds=F_e(e,this.text,n,r)}return t}(),Q_e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(V_e,H_e);case 2:return t.toUpperCase();default:return t}},V_e=/(^|\s|:|-|\(|\))([a-z])/g,H_e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Zee=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Wf),ete=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Wf),tte=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,o=Oj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Wf),rte=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Wf),fk=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Wf),$_e=[{type:15,flags:0,unit:"px",number:3}],G_e=[{type:16,flags:0,number:50}],K_e=function(t){return t.width>t.height?new tA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new tA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},q_e=function(t){var e=t.type===z_e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},hS="checkbox",AS="radio",z_e="password",J9=707406591,b6=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=q_e(n),(a.type===hS||a.type===AS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=K_e(a.bounds)),a.type){case hS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=$_e;break;case AS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=G_e;break}return a}return e}(Wf),nte=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Wf),ate=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Wf),ste=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=ote(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?fb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Qh.TRANSPARENT,o=n.contentWindow.document.body?fb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Qh.TRANSPARENT;a.backgroundColor=q0(s)?q0(o)?a.styles.backgroundColor:o:s}}catch{}return a}return e}(Wf),W_e=["OL","UL","MENU"],rE=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,lte(a)&&a.data.trim().length>0)r.textNodes.push(new U_e(t,a,r.styles));else if(Mx(a))if(fte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return rE(t,l,r,n)});else{var o=ite(t,a);o.styles.isVisible()&&(X_e(a,o,n)?o.flags|=4:Y_e(o.styles)&&(o.flags|=2),W_e.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?rE(t,a.shadowRoot,o,n):!mS(a)&&!cte(a)&&!pS(a)&&rE(t,a,o,n))}},ite=function(t,e){return Ak(e)?new Zee(t,e):ute(e)?new ete(t,e):cte(e)?new tte(t,e):J_e(e)?new rte(t,e):Z_e(e)?new fk(t,e):eEe(e)?new b6(t,e):pS(e)?new nte(t,e):mS(e)?new ate(t,e):dte(e)?new ste(t,e):new Wf(t,e)},ote=function(t,e){var r=ite(t,e);return r.flags|=4,rE(t,e,r,r),r},X_e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||w6(t)&&r.styles.isTransparent()},Y_e=function(t){return t.isPositioned()||t.isFloating()},lte=function(t){return t.nodeType===Node.TEXT_NODE},Mx=function(t){return t.nodeType===Node.ELEMENT_NODE},hk=function(t){return Mx(t)&&typeof t.style<"u"&&!nE(t)},nE=function(t){return typeof t.className=="object"},J_e=function(t){return t.tagName==="LI"},Z_e=function(t){return t.tagName==="OL"},eEe=function(t){return t.tagName==="INPUT"},tEe=function(t){return t.tagName==="HTML"},cte=function(t){return t.tagName==="svg"},w6=function(t){return t.tagName==="BODY"},ute=function(t){return t.tagName==="CANVAS"},Z9=function(t){return t.tagName==="VIDEO"},Ak=function(t){return t.tagName==="IMG"},dte=function(t){return t.tagName==="IFRAME"},eQ=function(t){return t.tagName==="STYLE"},rEe=function(t){return t.tagName==="SCRIPT"},mS=function(t){return t.tagName==="TEXTAREA"},pS=function(t){return t.tagName==="SELECT"},fte=function(t){return t.tagName==="SLOT"},tQ=function(t){return t.tagName.indexOf("-")>0},nEe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),rQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},nQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wg=function(t,e,r,n,a,s){return t<e||t>r?g2(t,a,s.length>0):n.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=n.values[c];return o},"")+s},hte=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Ai=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(hte(Math.abs(t),s,n,function(o){return xi(Math.floor(o%s)+e)})+a)},Dm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return hte(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},vx=1,i0=2,o0=4,Ly=8,lh=function(t,e,r,n,a,s){if(t<-9999||t>9999)return g2(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ro(s,vx)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ro(s,i0)||u===1&&c===1&&ro(s,o0)&&t>100||u===1&&c>1&&ro(s,Ly)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},aQ="",sQ="",iQ="",k3="",g2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Ai(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Dm(t,"",a);case 6:return Wg(t,1,3999,rQ,3,n).toLowerCase();case 7:return Wg(t,1,3999,rQ,3,n);case 8:return Ai(t,945,969,!1,n);case 9:return Ai(t,97,122,!1,n);case 10:return Ai(t,65,90,!1,n);case 11:return Ai(t,1632,1641,!0,n);case 12:case 49:return Wg(t,1,9999,nQ,3,n);case 35:return Wg(t,1,9999,nQ,3,n).toLowerCase();case 13:return Ai(t,2534,2543,!0,n);case 14:case 30:return Ai(t,6112,6121,!0,n);case 15:return Dm(t,"",a);case 16:return Dm(t,"",a);case 17:case 48:return lh(t,"",aQ,"",a,i0|o0|Ly);case 47:return lh(t,"",sQ,"",a,vx|i0|o0|Ly);case 42:return lh(t,"",aQ,"",a,i0|o0|Ly);case 41:return lh(t,"",sQ,"",a,vx|i0|o0|Ly);case 26:return lh(t,"","",iQ,a,0);case 25:return lh(t,"","",iQ,a,vx|i0|o0);case 31:return lh(t,"","",k3,s,vx|i0|o0);case 33:return lh(t,"","",k3,s,0);case 32:return lh(t,"","",k3,s,vx|i0|o0);case 18:return Ai(t,2406,2415,!0,n);case 20:return Wg(t,1,19999,sEe,3,n);case 21:return Ai(t,2790,2799,!0,n);case 22:return Ai(t,2662,2671,!0,n);case 22:return Wg(t,1,10999,aEe,3,n);case 23:return Dm(t,"");case 24:return Dm(t,"");case 27:return Ai(t,3302,3311,!0,n);case 28:return Dm(t,"",a);case 29:return Dm(t,"",a);case 34:return Ai(t,3792,3801,!0,n);case 37:return Ai(t,6160,6169,!0,n);case 38:return Ai(t,4160,4169,!0,n);case 39:return Ai(t,2918,2927,!0,n);case 40:return Ai(t,1776,1785,!0,n);case 43:return Ai(t,3046,3055,!0,n);case 44:return Ai(t,3174,3183,!0,n);case 45:return Ai(t,3664,3673,!0,n);case 46:return Ai(t,3872,3881,!0,n);case 3:default:return Ai(t,48,57,!0,n)}},Ate="data-html2canvas-ignore",oQ=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new nEe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=iEe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=cEe(a).then(function(){return Xl(n,void 0,void 0,function(){var d,f;return El(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(hEe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,lEe(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(dEe(document.doctype)+"<html></html>"),fEe(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(uk(e,2))debugger;if(ute(e))return this.createCanvasClone(e);if(Z9(e))return this.createVideoClone(e);if(eQ(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Ak(r)&&(Ak(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),tQ(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return F3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!Mx(r)||!rEe(r)&&!r.hasAttribute(Ate)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Mx(r)||!eQ(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Mx(s)&&fte(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(lte(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Mx(e)&&(hk(e)||nE(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&hk(a)&&(this.clonedReferenceElement=a),w6(a)&&pEe(a);var c=this.counters.parse(new M9(this.context,s)),u=this.resolvePseudoContent(e,a,o,mb.BEFORE);tQ(e)&&(r=!0),Z9(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,mb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||nE(e))&&!dte(e)||r)&&F3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(mS(e)||pS(e))&&(mS(a)||pS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new M9(this.context,n));var c=new JCe(this.context,n),u=l.createElement("html2canvaspseudoelement");F3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(La);h.length&&u.appendChild(l.createTextNode(e.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(Iv),p=m[0],g=m[1];if(p&&La(p)){var x=s.counters.getCounterValue(p.value),y=g&&La(g)?ck.parse(s.context,g.value):3;u.appendChild(l.createTextNode(g2(x,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(Iv),p=b[0],w=b[1],g=b[2];if(p&&La(p)){var j=s.counters.getCounterValues(p.value),I=g&&La(g)?ck.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",S=j.map(function(P){return g2(P,I,!1)}).join(_);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(R9(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(R9(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=mk+" "+pk;var d=a===mb.BEFORE?" "+mk:" "+pk;return nE(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),mb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(mb||(mb={}));var iEe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Ate,"true"),t.body.appendChild(r),r},oEe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},lEe=function(t){return Promise.all([].slice.call(t.images,0).map(oEe))},cEe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},uEe=["all","d","content"],F3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);uEe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},dEe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},fEe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},hEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},AEe=":before",mEe=":after",mk="___html2canvas___pseudoelement_before",pk="___html2canvas___pseudoelement_after",lQ=`{
    content: "" !important;
    display: none !important;
}`,pEe=function(t){gEe(t,"."+mk+AEe+lQ+`
         .`+pk+mEe+lQ)},gEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},mte=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),xEe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(D3(e)||wEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Xl(this,void 0,void 0,function(){var r,n,a,s,o=this;return El(this,function(l){switch(l.label){case 0:return r=mte.isSameOrigin(e),n=!O3(e)&&this._options.useCORS===!0&&el.SUPPORT_CORS_IMAGES&&!r,a=!O3(e)&&!r&&!D3(e)&&typeof this._options.proxy=="string"&&el.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!O3(e)&&!D3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(NEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,o){var l=el.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),vEe=/^data:image\/svg\+xml/i,yEe=/^data:image\/.*;base64,/i,bEe=/^data:image\/.*/i,wEe=function(t){return el.SUPPORT_SVG_DRAWING||!CEe(t)},O3=function(t){return bEe.test(t)},NEe=function(t){return yEe.test(t)},D3=function(t){return t.substr(0,4)==="blob"},CEe=function(t){return t.substr(-3).toLowerCase()==="svg"||vEe.test(t)},Fr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Xg=function(t,e,r){return new Fr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},pC=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=Xg(this.start,this.startControl,e),a=Xg(this.startControl,this.endControl,e),s=Xg(this.endControl,this.end,e),o=Xg(n,a,e),l=Xg(a,s,e),c=Xg(o,l,e);return r?new t(this.start,n,o,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Wu=function(t){return t.type===1},_Ee=function(){function t(e){var r=e.styles,n=e.bounds,a=Ry(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Ry(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Ry(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],h=Ry(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((o+p)/n.height),g.push((u+A)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,o/=x,c/=x,u/=x,f/=x,A/=x,m/=x,p/=x);var y=n.width-c,b=n.height-A,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,S=r.borderBottomWidth,E=r.borderLeftWidth,F=ts(r.paddingTop,e.bounds.width),P=ts(r.paddingRight,e.bounds.width),k=ts(r.paddingBottom,e.bounds.width),D=ts(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?gs(n.left+E/3,n.top+I/3,s-E/3,o-I/3,va.TOP_LEFT):new Fr(n.left+E/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?gs(n.left+y,n.top+I/3,c-_/3,u-I/3,va.TOP_RIGHT):new Fr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?gs(n.left+w,n.top+b,f-_/3,A-S/3,va.BOTTOM_RIGHT):new Fr(n.left+n.width-_/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?gs(n.left+E/3,n.top+j,m-E/3,p-S/3,va.BOTTOM_LEFT):new Fr(n.left+E/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?gs(n.left+E*2/3,n.top+I*2/3,s-E*2/3,o-I*2/3,va.TOP_LEFT):new Fr(n.left+E*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?gs(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,va.TOP_RIGHT):new Fr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?gs(n.left+w,n.top+b,f-_*2/3,A-S*2/3,va.BOTTOM_RIGHT):new Fr(n.left+n.width-_*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?gs(n.left+E*2/3,n.top+j,m-E*2/3,p-S*2/3,va.BOTTOM_LEFT):new Fr(n.left+E*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?gs(n.left+E/2,n.top+I/2,s-E/2,o-I/2,va.TOP_LEFT):new Fr(n.left+E/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?gs(n.left+y,n.top+I/2,c-_/2,u-I/2,va.TOP_RIGHT):new Fr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?gs(n.left+w,n.top+b,f-_/2,A-S/2,va.BOTTOM_RIGHT):new Fr(n.left+n.width-_/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?gs(n.left+E/2,n.top+j,m-E/2,p-S/2,va.BOTTOM_LEFT):new Fr(n.left+E/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?gs(n.left,n.top,s,o,va.TOP_LEFT):new Fr(n.left,n.top),this.topRightBorderBox=c>0||u>0?gs(n.left+y,n.top,c,u,va.TOP_RIGHT):new Fr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?gs(n.left+w,n.top+b,f,A,va.BOTTOM_RIGHT):new Fr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?gs(n.left,n.top+j,m,p,va.BOTTOM_LEFT):new Fr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?gs(n.left+E,n.top+I,Math.max(0,s-E),Math.max(0,o-I),va.TOP_LEFT):new Fr(n.left+E,n.top+I),this.topRightPaddingBox=c>0||u>0?gs(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),va.TOP_RIGHT):new Fr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||A>0?gs(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-S),Math.max(0,f-_),Math.max(0,A-S),va.BOTTOM_RIGHT):new Fr(n.left+n.width-_,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?gs(n.left+E,n.top+Math.min(j,n.height-S),Math.max(0,m-E),Math.max(0,p-S),va.BOTTOM_LEFT):new Fr(n.left+E,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?gs(n.left+E+D,n.top+I+F,Math.max(0,s-(E+D)),Math.max(0,o-(I+F)),va.TOP_LEFT):new Fr(n.left+E+D,n.top+I+F),this.topRightContentBox=c>0||u>0?gs(n.left+Math.min(y,n.width+E+D),n.top+I+F,y>n.width+E+D?0:c-E+D,u-(I+F),va.TOP_RIGHT):new Fr(n.left+n.width-(_+P),n.top+I+F),this.bottomRightContentBox=f>0||A>0?gs(n.left+Math.min(w,n.width-(E+D)),n.top+Math.min(b,n.height+I+F),Math.max(0,f-(_+P)),A-(S+k),va.BOTTOM_RIGHT):new Fr(n.left+n.width-(_+P),n.top+n.height-(S+k)),this.bottomLeftContentBox=m>0||p>0?gs(n.left+E+D,n.top+j,Math.max(0,m-(E+D)),p-(S+k),va.BOTTOM_LEFT):new Fr(n.left+E+D,n.top+n.height-(S+k))}return t}(),va;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(va||(va={}));var gs=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=t+r,u=e+n;switch(a){case va.TOP_LEFT:return new pC(new Fr(t,u),new Fr(t,u-l),new Fr(c-o,e),new Fr(c,e));case va.TOP_RIGHT:return new pC(new Fr(t,e),new Fr(t+o,e),new Fr(c,u-l),new Fr(c,u));case va.BOTTOM_RIGHT:return new pC(new Fr(c,e),new Fr(c,e+l),new Fr(t+o,u),new Fr(t,u));case va.BOTTOM_LEFT:default:return new pC(new Fr(c,u),new Fr(c-o,u),new Fr(t,e+l),new Fr(t,e))}},gS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},EEe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},xS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},SEe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),gC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),IEe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),jEe=function(t){return t.type===0},pte=function(t){return t.type===1},PEe=function(t){return t.type===2},cQ=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},BEe=function(t,e,r,n,a){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},gte=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),xte=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new _Ee(this.container),this.container.styles.opacity<1&&this.effects.push(new IEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new SEe(n,a,s))}if(this.container.styles.overflowX!==0){var o=gS(this.curves),l=xS(this.curves);cQ(o,l)?this.effects.push(new gC(o,6)):(this.effects.push(new gC(o,2)),this.effects.push(new gC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!pte(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=gS(n.curves),l=xS(n.curves);cQ(o,l)||a.unshift(new gC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ro(c.target,e)})},t}(),gk=function(t,e,r,n){t.container.elements.forEach(function(a){var s=ro(a.flags,4),o=ro(a.flags,2),l=new xte(a,t);ro(a.styles.display,2048)&&n.push(l);var c=ro(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:e,d=new gte(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(A=p,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var h=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);gk(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),gk(l,e,r,c);ro(a.flags,8)&&vte(a,c)})},vte=function(t,e){for(var r=t instanceof fk?t.start:1,n=t instanceof fk?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof rte&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=g2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},TEe=function(t){var e=new xte(t,null),r=new gte(e),n=[];return gk(e,r,r,n),vte(e.container,n),r},uQ=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Zu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Zu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Zu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},kEe=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Zu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Zu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Zu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},FEe=function(t,e){switch(e){case 0:return Zu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Zu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Zu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Zu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},OEe=function(t,e){switch(e){case 0:return xC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return xC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return xC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return xC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},xC=function(t,e){var r=[];return Wu(t)?r.push(t.subdivide(.5,!1)):r.push(t),Wu(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Zu=function(t,e,r,n){var a=[];return Wu(t)?a.push(t.subdivide(.5,!1)):a.push(t),Wu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Wu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Wu(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},yte=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},vS=function(t){var e=t.styles,r=t.bounds,n=ts(e.paddingLeft,r.width),a=ts(e.paddingRight,r.width),s=ts(e.paddingTop,r.width),o=ts(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+o))},DEe=function(t,e){return t===0?e.bounds:t===2?vS(e):yte(e)},REe=function(t,e){return t===0?e.bounds:t===2?vS(e):yte(e)},R3=function(t,e,r){var n=DEe(yx(t.styles.backgroundOrigin,e),t),a=REe(yx(t.styles.backgroundClip,e),t),s=MEe(yx(t.styles.backgroundSize,e),r,n),o=s[0],l=s[1],c=Ry(yx(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=LEe(yx(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},Yg=function(t){return La(t)&&t.value===nv.AUTO},vC=function(t){return typeof t=="number"},MEe=function(t,e,r){var n=e[0],a=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Fi(o)&&l&&Fi(l))return[ts(o,r.width),ts(l,r.height)];var c=vC(s);if(La(o)&&(o.value===nv.CONTAIN||o.value===nv.COVER)){if(vC(s)){var u=r.width/r.height;return u<s!=(o.value===nv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=vC(n),f=vC(a),A=d||f;if(Yg(o)&&(!l||Yg(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var h=d?n:a*s,m=f?a:n/s;return[h,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var x=0,y=0;return Fi(o)?x=ts(o,r.width):Fi(l)&&(y=ts(l,r.height)),Yg(o)?x=y*s:(!l||Yg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(Fi(o)?b=ts(o,r.width):l&&Fi(l)&&(w=ts(l,r.height)),b!==null&&(!l||Yg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&Yg(o)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},yx=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},LEe=function(t,e,r,n,a){var s=e[0],o=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Fr(Math.round(n.left),Math.round(n.top+o)),new Fr(Math.round(n.left+n.width),Math.round(n.top+o)),new Fr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new Fr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new Fr(Math.round(n.left+s),Math.round(n.top)),new Fr(Math.round(n.left+s+l),Math.round(n.top)),new Fr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Fr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Fr(Math.round(n.left+s),Math.round(n.top+o)),new Fr(Math.round(n.left+s+l),Math.round(n.top+o)),new Fr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new Fr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new Fr(Math.round(a.left),Math.round(a.top)),new Fr(Math.round(a.left+a.width),Math.round(a.top)),new Fr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Fr(Math.round(a.left),Math.round(a.height+a.top))]}},UEe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",dQ="Hidden Text",QEe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=UEe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(dQ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(dQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),bte=function(){function t(e,r){this.context=e,this.options=r}return t}(),VEe=1e4,HEe=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new QEe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),PEe(r)&&(this.ctx.globalAlpha=r.opacity),jEe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),pte(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Xl(this,void 0,void 0,function(){var n;return El(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Xl(this,void 0,void 0,function(){return El(this,function(n){switch(n.label){case 0:if(ro(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=y6(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=zEe(r.fontFamily).join(", "),s=Ew(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Xl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return El(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:A.ctx.fillStyle=yo(n.color),A.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){A.ctx.shadowColor=yo(x.color),A.ctx.shadowOffsetX=x.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=x.offsetY.number*A.options.scale,A.ctx.shadowBlur=x.blur.number,A.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=yo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=yo(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=vS(r),o=xS(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,f,A,w,h,m,j,p,g,x,y,b,w,j;return El(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof Zee))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof ete&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof tte))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ste&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof b6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===hS?n.checked&&(this.ctx.save(),this.path([new Fr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Fr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Fr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Fr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Fr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Fr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Fr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=yo(J9),this.ctx.fill(),this.ctx.restore()):n.type===AS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=yo(J9),this.ctx.fill(),this.ctx.restore())),$Ee(n)&&n.value.length){switch(A=this.createFontStyle(s),w=A[0],h=A[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=yo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=KEe(n.styles.textAlign),j=vS(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}g=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Fr(j.left,j.top),new Fr(j.left+j.width,j.top),new Fr(j.left+j.width,j.top+j.height),new Fr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ab(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ro(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=yo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new tA(n.bounds.left,n.bounds.top+ts(n.styles.paddingTop,n.bounds.width),n.bounds.width,O9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ab(r.listValue,j),s.letterSpacing,O9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Xl(this,void 0,void 0,function(){var n,a,x,s,o,x,l,c,x,u,d,x,f,A,x,h,m,x,p,g,x;return El(this,function(y){switch(y.label){case 0:if(ro(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(x=o[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,y.label=19;case 19:return f<A.length?(x=A[f],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(x=m[h],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=Wu(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Wu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c;return El(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,h,F,me,pe,D,Z,S,m,F,me,pe,D,Z,p,g,x,y,b,w,j,I,_,S,E,F,P,k,D,Z,fe,me,pe,ye,ae,je,Be,O,G,z,L;return El(this,function(Y){switch(Y.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=Y.sent(),[3,4];case 3:return Y.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(h=R3(r,n,[f.width,f.height,f.width/f.height]),F=h[0],me=h[1],pe=h[2],D=h[3],Z=h[4],S=s.ctx.createPattern(s.resizeImage(f,D,Z),"repeat"),s.renderRepeat(F,S,me,pe)),[3,6];case 5:jNe(d)?(m=R3(r,n,[null,null,null]),F=m[0],me=m[1],pe=m[2],D=m[3],Z=m[4],p=CNe(d.angle,D,Z),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=D,j.height=Z,I=j.getContext("2d"),_=I.createLinearGradient(x,b,y,w),k9(d.stops,g).forEach(function(J){return _.addColorStop(J.stop,yo(J.color))}),I.fillStyle=_,I.fillRect(0,0,D,Z),D>0&&Z>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(F,S,me,pe))):PNe(d)&&(E=R3(r,n,[null,null,null]),F=E[0],P=E[1],k=E[2],D=E[3],Z=E[4],fe=d.position.length===0?[g6]:d.position,me=ts(fe[0],D),pe=ts(fe[fe.length-1],Z),ye=_Ne(d,me,pe,D,Z),ae=ye[0],je=ye[1],ae>0&&je>0&&(Be=s.ctx.createRadialGradient(P+me,k+pe,0,P+me,k+pe,ae),k9(d.stops,ae*2).forEach(function(J){return Be.addColorStop(J.stop,yo(J.color))}),s.path(F),s.ctx.fillStyle=Be,ae!==je?(O=r.bounds.left+.5*r.bounds.width,G=r.bounds.top+.5*r.bounds.height,z=je/ae,L=1/z,s.ctx.save(),s.ctx.translate(O,G),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-O,-G),s.ctx.fillRect(P,L*(k-G)+G,D,Z*L),s.ctx.restore()):s.ctx.fill())),Y.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Xl(this,void 0,void 0,function(){return El(this,function(s){return this.path(uQ(a,n)),this.ctx.fillStyle=yo(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Xl(this,void 0,void 0,function(){var o,l;return El(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=kEe(s,a),this.path(o),this.ctx.fillStyle=yo(r),this.ctx.fill(),l=FEe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return El(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!q0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=GEe(yx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),q0(n.backgroundColor)||(this.ctx.fillStyle=yo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var m=gS(r.curves),p=h.inset?0:VEe,g=BEe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=h.offsetX.number+p,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=yo(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?yo(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!q0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return Xl(this,void 0,void 0,function(){var l,c,u,d,f,A,h,m,p,g,x,y,b,w,j,I,j,I;return El(this,function(_){return this.ctx.save(),l=OEe(s,a),c=uQ(s,a),o===2&&(this.path(c),this.ctx.clip()),Wu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Wu(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?h=Math.abs(u-f):h=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),g=!0,h<=m*2?g=!1:h<=m*2+p?(x=h/(2*m+p),m*=x,p*=x):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),w=(h-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=yo(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Wu(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Fr(j.end.x,j.end.y),new Fr(I.start.x,I.start.y)]),this.ctx.stroke()),Wu(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Fr(j.end.x,j.end.y),new Fr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Xl(this,void 0,void 0,function(){var n;return El(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=TEe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(bte),$Ee=function(t){return t instanceof ate||t instanceof nte?!0:t instanceof b6&&t.type!==AS&&t.type!==hS},GEe=function(t,e){switch(t){case 0:return gS(e);case 2:return EEe(e);case 1:default:return xS(e)}},KEe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},qEe=["-apple-system","system-ui"],zEe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return qEe.indexOf(e)===-1}):t},WEe=function(t){of(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Xl(this,void 0,void 0,function(){var n,a;return El(this,function(s){switch(s.label){case 0:return n=dk(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,XEe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(bte),XEe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},YEe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,YN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,YN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),JEe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new YEe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new xEe(this,e)}return t.instanceCount=1,t}(),yg=function(t,e){return e===void 0&&(e={}),ZEe(t,e)};typeof window<"u"&&mte.setContext(window);var ZEe=function(t,e){return Xl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,x,y,b,w,j,_,I,_,S,E,F,P,k,D,Z,fe,me,pe,ye,ae,je,Be,O,G,z;return El(this,function(L){switch(L.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},s=XT({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},a),o={windowWidth:(k=e.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(Z=e.scrollX)!==null&&Z!==void 0?Z:n.pageXOffset,scrollY:(fe=e.scrollY)!==null&&fe!==void 0?fe:n.pageYOffset},l=new tA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new JEe(s,l),u=(me=e.foreignObjectRendering)!==null&&me!==void 0?me:!1,d={allowTaint:(pe=e.allowTaint)!==null&&pe!==void 0?pe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new oQ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=L.sent(),m=w6(A)||tEe(A)?B2e(A.ownerDocument):Oj(c,A),p=m.width,g=m.height,x=m.left,y=m.top,b=eSe(c,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ae=(ye=e.scale)!==null&&ye!==void 0?ye:n.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((je=e.x)!==null&&je!==void 0?je:0)+x,y:((Be=e.y)!==null&&Be!==void 0?Be:0)+y,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(p),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new WEe(c,w),[4,_.render(A)]):[3,3];case 2:return j=L.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=ote(c,A),b===I.styles.backgroundColor&&(I.styles.backgroundColor=Qh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new HEe(c,w),[4,_.render(I)];case 4:j=L.sent(),L.label=5;case 5:return(!((z=e.removeContainer)!==null&&z!==void 0)||z)&&(oQ.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},eSe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?fb(t,getComputedStyle(n.documentElement).backgroundColor):Qh.TRANSPARENT,s=n.body?fb(t,getComputedStyle(n.body).backgroundColor):Qh.TRANSPARENT,o=typeof r=="string"?fb(t,r):r===null?Qh.TRANSPARENT:4294967295;return e===n.documentElement?q0(a)?q0(s)?o:s:a:o};const N6=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),tSe="modulepreload",rSe=function(t){return"/"+t},fQ={},Vh=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=rSe(c),c in fQ)return;fQ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":tSe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((A,h)=>{f.addEventListener("load",A),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Ba(t){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(t)}var rf=Uint8Array,lu=Uint16Array,C6=Int32Array,_6=new rf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E6=new rf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hQ=new rf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wte=function(t,e){for(var r=new lu(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new C6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Nte=wte(_6,2),nSe=Nte.b,xk=Nte.r;nSe[28]=258,xk[258]=28;var aSe=wte(E6,0),AQ=aSe.r,vk=new lu(32768);for(var fs=0;fs<32768;++fs){var XA=(fs&43690)>>1|(fs&21845)<<1;XA=(XA&52428)>>2|(XA&13107)<<2,XA=(XA&61680)>>4|(XA&3855)<<4,vk[fs]=((XA&65280)>>8|(XA&255)<<8)>>1}var pb=function(t,e,r){for(var n=t.length,a=0,s=new lu(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new lu(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new lu(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[vk[f]>>c]=u}else for(l=new lu(n),a=0;a<n;++a)t[a]&&(l[a]=vk[o[t[a]-1]++]>>15-t[a]);return l},Xp=new rf(288);for(var fs=0;fs<144;++fs)Xp[fs]=8;for(var fs=144;fs<256;++fs)Xp[fs]=9;for(var fs=256;fs<280;++fs)Xp[fs]=7;for(var fs=280;fs<288;++fs)Xp[fs]=8;var yS=new rf(32);for(var fs=0;fs<32;++fs)yS[fs]=5;var sSe=pb(Xp,9,0),iSe=pb(yS,5,0),Cte=function(t){return(t+7)/8|0},oSe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new rf(t.subarray(e,r))},ch=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},oy=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},M3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Ete,l:0};if(a==1){var o=new rf(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var h=new lu(A+1),m=yk(r[d-1],h,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(I,_){return h[_.s]-h[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(h[y]>e)p+=x-(1<<m-h[y]),h[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;h[w]==e&&(--h[w],++p)}m=e}return{t:new rf(h),l:m}},yk=function(t,e,r){return t.s==-1?Math.max(yk(t.l,e,r+1),yk(t.r,e,r+1)):e[t.s]=r},mQ=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new lu(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},ly=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},_te=function(t,e,r){var n=r.length,a=Cte(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},pQ=function(t,e,r,n,a,s,o,l,c,u,d){ch(e,d++,r),++a[256];for(var f=M3(a,15),A=f.t,h=f.l,m=M3(s,15),p=m.t,g=m.l,x=mQ(A),y=x.c,b=x.n,w=mQ(p),j=w.c,I=w.n,_=new lu(19),S=0;S<y.length;++S)++_[y[S]&31];for(var S=0;S<j.length;++S)++_[j[S]&31];for(var E=M3(_,7),F=E.t,P=E.l,k=19;k>4&&!F[hQ[k-1]];--k);var D=u+5<<3,Z=ly(a,Xp)+ly(s,yS)+o,fe=ly(a,A)+ly(s,p)+o+14+3*k+ly(_,F)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&D<=Z&&D<=fe)return _te(e,d,t.subarray(c,c+u));var me,pe,ye,ae;if(ch(e,d,1+(fe<Z)),d+=2,fe<Z){me=pb(A,h,0),pe=A,ye=pb(p,g,0),ae=p;var je=pb(F,P,0);ch(e,d,b-257),ch(e,d+5,I-1),ch(e,d+10,k-4),d+=14;for(var S=0;S<k;++S)ch(e,d+3*S,F[hQ[S]]);d+=3*k;for(var Be=[y,j],O=0;O<2;++O)for(var G=Be[O],S=0;S<G.length;++S){var z=G[S]&31;ch(e,d,je[z]),d+=F[z],z>15&&(ch(e,d,G[S]>>5&127),d+=G[S]>>12)}}else me=sSe,pe=Xp,ye=iSe,ae=yS;for(var S=0;S<l;++S){var L=n[S];if(L>255){var z=L>>18&31;oy(e,d,me[z+257]),d+=pe[z+257],z>7&&(ch(e,d,L>>23&31),d+=_6[z]);var Y=L&31;oy(e,d,ye[Y]),d+=ae[Y],Y>3&&(oy(e,d,L>>5&8191),d+=E6[Y])}else oy(e,d,me[L]),d+=pe[L]}return oy(e,d,me[256]),d+pe[256]},lSe=new C6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ete=new rf(0),cSe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new rf(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=lSe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=s.p||new lu(32768),g=s.h||new lu(m+1),x=Math.ceil(r/3),y=2*x,b=function(ie){return(t[ie]^t[ie+1]<<x^t[ie+2]<<y)&m},w=new C6(25e3),j=new lu(288),I=new lu(32),_=0,S=0,E=s.i||0,F=0,P=s.w||0,k=0;E+2<o;++E){var D=b(E),Z=E&32767,fe=g[D];if(p[Z]=fe,g[D]=Z,P<=E){var me=o-E;if((_>7e3||F>24576)&&(me>423||!u)){d=pQ(t,c,0,w,j,I,S,F,k,E-k,d),F=_=S=0,k=E;for(var pe=0;pe<286;++pe)j[pe]=0;for(var pe=0;pe<30;++pe)I[pe]=0}var ye=2,ae=0,je=h,Be=Z-fe&32767;if(me>2&&D==b(E-Be))for(var O=Math.min(A,me)-1,G=Math.min(32767,E),z=Math.min(258,me);Be<=G&&--je&&Z!=fe;){if(t[E+ye]==t[E+ye-Be]){for(var L=0;L<z&&t[E+L]==t[E+L-Be];++L);if(L>ye){if(ye=L,ae=Be,L>O)break;for(var Y=Math.min(Be,L-2),J=0,pe=0;pe<Y;++pe){var R=E-Be+pe&32767,H=p[R],ne=R-H&32767;ne>J&&(J=ne,fe=R)}}}Z=fe,fe=p[Z],Be+=Z-fe&32767}if(ae){w[F++]=268435456|xk[ye]<<18|AQ[ae];var ge=xk[ye]&31,U=AQ[ae]&31;S+=_6[ge]+E6[U],++j[257+ge],++I[U],P=E+ye,++_}else w[F++]=t[E],++j[t[E]]}}for(E=Math.max(E,P);E<o;++E)w[F++]=t[E],++j[t[E]];d=pQ(t,c,u,w,j,I,S,F,k,E-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=E,s.w=P)}else{for(var E=s.w||0;E<o+u;E+=65535){var Ue=E+65535;Ue>=o&&(c[d/8|0]=u,Ue=o),d=_te(c,d+1,t.subarray(E,Ue))}s.i=o}return oSe(l,0,n+Cte(d)+a)},Ste=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},uSe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new rf(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return cSe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Ite=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},dSe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Ste();a.p(e.dictionary),Ite(t,2,a.d())}};function bk(t,e){e||(e={});var r=Ste();r.p(t);var n=uSe(t,e,e.dictionary?6:2,4);return dSe(n,e),Ite(n,n.length-4,r.d()),n}var fSe=typeof TextDecoder<"u"&&new TextDecoder,hSe=0;try{fSe.decode(Ete,{stream:!0}),hSe=1}catch{}function ASe(t){if(Array.isArray(t))return t}function mSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function pSe(t,e){if(t){if(typeof t=="string")return gQ(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gQ(t,e):void 0}}function gSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xQ(t,e){return ASe(t)||mSe(t,e)||pSe(t,e)||gSe()}function vQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const xSe=new TextEncoder;function vSe(t){return xSe.encode(t)}const ySe=1024*8,bSe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),L3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class S6{constructor(e=ySe,r={}){Ar(this,"buffer");Ar(this,"byteLength");Ar(this,"byteOffset");Ar(this,"length");Ar(this,"offset");Ar(this,"lastWrittenByte");Ar(this,"littleEndian");Ar(this,"_data");Ar(this,"_mark");Ar(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof S6)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=L3[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===bSe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new L3[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new L3[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return vQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return vQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(vSe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function i1(t){let e=t.length;for(;--e>=0;)t[e]=0}const wSe=3,NSe=258,jte=29,CSe=256,_Se=CSe+1+jte,Pte=30,ESe=512,SSe=new Array((_Se+2)*2);i1(SSe);const ISe=new Array(Pte*2);i1(ISe);const jSe=new Array(ESe);i1(jSe);const PSe=new Array(NSe-wSe+1);i1(PSe);const BSe=new Array(jte);i1(BSe);const TSe=new Array(Pte);i1(TSe);const kSe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var wk=kSe;const FSe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},OSe=new Uint32Array(FSe()),DSe=(t,e,r,n)=>{const a=OSe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var xf=DSe,Nk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Bte={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const RSe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var MSe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)RSe(r,n)&&(t[n]=r[n])}}return t},LSe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},Tte={assign:MSe,flattenChunks:LSe};let kte=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{kte=!1}const x2=new Uint8Array(256);for(let t=0;t<256;t++)x2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;x2[254]=x2[254]=1;var USe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const QSe=(t,e)=>{if(e<65534&&t.subarray&&kte)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var VSe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=x2[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return QSe(s,a)},HSe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+x2[t[r]]>e?r:e},Ck={string2buf:USe,buf2string:VSe,utf8border:HSe};function $Se(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var GSe=$Se;const yC=16209,KSe=16191;var qSe=function(e,r){let n,a,s,o,l,c,u,d,f,A,h,m,p,g,x,y,b,w,j,I,_,S,E,F;const P=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,f=P.wnext,A=P.window,h=P.hold,m=P.bits,p=P.lencode,g=P.distcode,x=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=p[h&x];t:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w===0)F[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(h+=E[n++]<<m,m+=8),j+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=g[h&y];r:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(h+=E[n++]<<m,m+=8,m<w&&(h+=E[n++]<<m,m+=8)),I+=h&(1<<w)-1,I>c){e.msg="invalid distance too far back",P.mode=yC;break e}if(h>>>=w,m-=w,w=s-o,I>w){if(w=I-w,w>d&&P.sane){e.msg="invalid distance too far back",P.mode=yC;break e}if(_=0,S=A,f===0){if(_+=u-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do F[s++]=A[_++];while(--w);if(_=0,f<j){w=f,j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}}else if(_+=f-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}for(;j>2;)F[s++]=S[_++],F[s++]=S[_++],F[s++]=S[_++],j-=3;j&&(F[s++]=S[_++],j>1&&(F[s++]=S[_++]))}else{_=s-I;do F[s++]=F[_++],F[s++]=F[_++],F[s++]=F[_++],j-=3;while(j>2);j&&(F[s++]=F[_++],j>1&&(F[s++]=F[_++]))}}else if(w&64){e.msg="invalid distance code",P.mode=yC;break e}else{b=g[(b&65535)+(h&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){P.mode=KSe;break e}else{e.msg="invalid literal/length code",P.mode=yC;break e}else{b=p[(b&65535)+(h&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=h,P.bits=m};const Jg=15,yQ=852,bQ=592,wQ=0,U3=1,NQ=2,zSe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),WSe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),YSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),JSe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,x=0,y=0,b,w,j,I,_,S=null,E;const F=new Uint16Array(Jg+1),P=new Uint16Array(Jg+1);let k=null,D,Z,fe;for(u=0;u<=Jg;u++)F[u]=0;for(d=0;d<n;d++)F[e[r+d]]++;for(h=c,A=Jg;A>=1&&F[A]===0;A--);if(h>A&&(h=A),A===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&F[f]===0;f++);for(h<f&&(h=f),g=1,u=1;u<=Jg;u++)if(g<<=1,g-=F[u],g<0)return-1;if(g>0&&(t===wQ||A!==1))return-1;for(P[1]=0,u=1;u<Jg;u++)P[u+1]=P[u]+F[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[P[e[r+d]]++]=d);if(t===wQ?(S=k=o,E=20):t===U3?(S=zSe,k=WSe,E=257):(S=XSe,k=YSe,E=0),y=0,d=0,u=f,_=s,m=h,p=0,j=-1,x=1<<h,I=x-1,t===U3&&x>yQ||t===NQ&&x>bQ)return 1;for(;;){D=u-p,o[d]+1<E?(Z=0,fe=o[d]):o[d]>=E?(Z=k[o[d]-E],fe=S[o[d]-E]):(Z=96,fe=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=D<<24|Z<<16|fe|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--F[u]===0){if(u===A)break;u=e[r+o[d]]}if(u>h&&(y&I)!==j){for(p===0&&(p=h),_+=f,m=u-p,g=1<<m;m+p<A&&(g-=F[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===U3&&x>yQ||t===NQ&&x>bQ)return 1;j=y&I,a[j]=h<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=h,0};var gb=JSe;const ZSe=0,Fte=1,Ote=2,{Z_FINISH:CQ,Z_BLOCK:eIe,Z_TREES:bC,Z_OK:Yp,Z_STREAM_END:tIe,Z_NEED_DICT:rIe,Z_STREAM_ERROR:cd,Z_DATA_ERROR:Dte,Z_MEM_ERROR:Rte,Z_BUF_ERROR:nIe,Z_DEFLATED:_Q}=Bte,Gj=16180,EQ=16181,SQ=16182,IQ=16183,jQ=16184,PQ=16185,BQ=16186,TQ=16187,kQ=16188,FQ=16189,bS=16190,uh=16191,Q3=16192,OQ=16193,V3=16194,DQ=16195,RQ=16196,MQ=16197,LQ=16198,wC=16199,NC=16200,UQ=16201,QQ=16202,VQ=16203,HQ=16204,$Q=16205,H3=16206,GQ=16207,KQ=16208,xs=16209,Mte=16210,Lte=16211,aIe=852,sIe=592,iIe=15,oIe=iIe,qQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function lIe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const bg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Gj||e.mode>Lte?1:0},Ute=t=>{if(bg(t))return cd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Gj,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(aIe),e.distcode=e.distdyn=new Int32Array(sIe),e.sane=1,e.back=-1,Yp},Qte=t=>{if(bg(t))return cd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ute(t)},Vte=(t,e)=>{let r;if(bg(t))return cd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?cd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Qte(t))},Hte=(t,e)=>{if(!t)return cd;const r=new lIe;t.state=r,r.strm=t,r.window=null,r.mode=Gj;const n=Vte(t,e);return n!==Yp&&(t.state=null),n},cIe=t=>Hte(t,oIe);let zQ=!0,$3,G3;const uIe=t=>{if(zQ){$3=new Int32Array(512),G3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(gb(Fte,t.lens,0,288,$3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;gb(Ote,t.lens,0,32,G3,0,t.work,{bits:5}),zQ=!1}t.lencode=$3,t.lenbits=9,t.distcode=G3,t.distbits=5},$te=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},dIe=(t,e)=>{let r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=0,x,y,b,w,j,I,_,S;const E=new Uint8Array(4);let F,P;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(bg(t)||!t.output||!t.input&&t.avail_in!==0)return cd;r=t.state,r.mode===uh&&(r.mode=Q3),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,A=c,S=Yp;e:for(;;)switch(r.mode){case Gj:if(r.wrap===0){r.mode=Q3;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=xf(r.check,E,2,0),u=0,d=0,r.mode=EQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=xs;break}if((u&15)!==_Q){t.msg="unknown compression method",r.mode=xs;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=xs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?FQ:uh,u=0,d=0;break;case EQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==_Q){t.msg="unknown compression method",r.mode=xs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=xs;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=xf(r.check,E,2,0)),u=0,d=0,r.mode=SQ;case SQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=xf(r.check,E,4,0)),u=0,d=0,r.mode=IQ;case IQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=xf(r.check,E,2,0)),u=0,d=0,r.mode=jQ;case jQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=xf(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=PQ;case PQ:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),_)),r.flags&512&&r.wrap&4&&(r.check=xf(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=BQ;case BQ:if(r.flags&2048){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=xf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=TQ;case TQ:if(r.flags&4096){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=xf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.comment=null);r.mode=kQ;case kQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=xs;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=uh;break;case FQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=qQ(u),u=0,d=0,r.mode=bS;case bS:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,rIe;t.adler=r.check=1,r.mode=uh;case uh:if(e===eIe||e===bC)break e;case Q3:if(r.last){u>>>=d&7,d-=d&7,r.mode=H3;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=OQ;break;case 1:if(uIe(r),r.mode=wC,e===bC){u>>>=2,d-=2;break e}break;case 2:r.mode=RQ;break;case 3:t.msg="invalid block type",r.mode=xs}u>>>=2,d-=2;break;case OQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=xs;break}if(r.length=u&65535,u=0,d=0,r.mode=V3,e===bC)break e;case V3:r.mode=DQ;case DQ:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=uh;break;case RQ:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=xs;break}r.have=0,r.mode=MQ;case MQ:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[k[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[k[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},S=gb(ZSe,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid code lengths set",r.mode=xs;break}r.have=0,r.mode=LQ;case LQ:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(P=x+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=xs;break}_=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(P=x+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,h=3+(u&7),u>>>=3,d-=3}else{for(P=x+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=xs;break}for(;h--;)r.lens[r.have++]=_}}if(r.mode===xs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=xs;break}if(r.lenbits=9,F={bits:r.lenbits},S=gb(Fte,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid literal/lengths set",r.mode=xs;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},S=gb(Ote,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,S){t.msg="invalid distances set",r.mode=xs;break}if(r.mode=wC,e===bC)break e;case wC:r.mode=NC;case NC:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,qSe(t,A),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===uh&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,j=y,I=b;g=r.lencode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=$Q;break}if(y&32){r.back=-1,r.mode=uh;break}if(y&64){t.msg="invalid literal/length code",r.mode=xs;break}r.extra=y&15,r.mode=UQ;case UQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=QQ;case QQ:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,j=y,I=b;g=r.distcode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=xs;break}r.offset=b,r.extra=y&15,r.mode=VQ;case VQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=xs;break}r.mode=HQ;case HQ:if(c===0)break e;if(h=A-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=xs;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=NC);break;case $Q:if(c===0)break e;a[o++]=r.length,c--,r.mode=NC;break;case H3:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(A-=c,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?xf(r.check,a,A,o-A):wk(r.check,a,A,o-A)),A=c,r.wrap&4&&(r.flags?u:qQ(u))!==r.check){t.msg="incorrect data check",r.mode=xs;break}u=0,d=0}r.mode=GQ;case GQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=xs;break}u=0,d=0}r.mode=KQ;case KQ:S=tIe;break e;case xs:S=Dte;break e;case Mte:return Rte;case Lte:default:return cd}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||A!==t.avail_out&&r.mode<xs&&(r.mode<H3||e!==CQ))&&$te(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?xf(r.check,a,A,t.next_out-A):wk(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===uh?128:0)+(r.mode===wC||r.mode===V3?256:0),(f===0&&A===0||e===CQ)&&S===Yp&&(S=nIe),S},fIe=t=>{if(bg(t))return cd;let e=t.state;return e.window&&(e.window=null),t.state=null,Yp},hIe=(t,e)=>{if(bg(t))return cd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Yp):cd},AIe=(t,e)=>{const r=e.length;let n,a,s;return bg(t)||(n=t.state,n.wrap!==0&&n.mode!==bS)?cd:n.mode===bS&&(a=1,a=wk(a,e,r,0),a!==n.check)?Dte:(s=$te(t,e,r,r),s?(n.mode=Mte,Rte):(n.havedict=1,Yp))};var mIe=Qte,pIe=Vte,gIe=Ute,xIe=cIe,vIe=Hte,yIe=dIe,bIe=fIe,wIe=hIe,NIe=AIe,CIe="pako inflate (from Nodeca project)",wh={inflateReset:mIe,inflateReset2:pIe,inflateResetKeep:gIe,inflateInit:xIe,inflateInit2:vIe,inflate:yIe,inflateEnd:bIe,inflateGetHeader:wIe,inflateSetDictionary:NIe,inflateInfo:CIe};function _Ie(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EIe=_Ie;const Gte=Object.prototype.toString,{Z_NO_FLUSH:SIe,Z_FINISH:IIe,Z_OK:v2,Z_STREAM_END:K3,Z_NEED_DICT:q3,Z_STREAM_ERROR:jIe,Z_DATA_ERROR:WQ,Z_MEM_ERROR:PIe}=Bte;function Sw(t){this.options=Tte.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GSe,this.strm.avail_out=0;let r=wh.inflateInit2(this.strm,e.windowBits);if(r!==v2)throw new Error(Nk[r]);if(this.header=new EIe,wh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ck.string2buf(e.dictionary):Gte.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=wh.inflateSetDictionary(this.strm,e.dictionary),r!==v2)))throw new Error(Nk[r])}Sw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?IIe:SIe,Gte.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=wh.inflate(r,o),s===q3&&a&&(s=wh.inflateSetDictionary(r,a),s===v2?s=wh.inflate(r,o):s===WQ&&(s=q3));r.avail_in>0&&s===K3&&r.state.wrap>0&&t[r.next_in]!==0;)wh.inflateReset(r),s=wh.inflate(r,o);switch(s){case jIe:case WQ:case q3:case PIe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===K3))if(this.options.to==="string"){let c=Ck.utf8border(r.output,r.next_out),u=r.next_out-c,d=Ck.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===v2&&l===0)){if(s===K3)return s=wh.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Sw.prototype.onData=function(t){this.chunks.push(t)};Sw.prototype.onEnd=function(t){t===v2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Tte.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function BIe(t,e){const r=new Sw(e);if(r.push(t),r.err)throw r.msg||Nk[r.err];return r.result}var TIe=Sw,kIe=BIe,FIe={Inflate:TIe,inflate:kIe};const{Inflate:OIe,inflate:DIe}=FIe;var XQ=OIe,RIe=DIe;const Kte=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Kte[t]=e}const YQ=4294967295;function MIe(t,e,r){let n=t;for(let a=0;a<r;a++)n=Kte[(n^e[a])&255]^n>>>8;return n}function LIe(t,e){return(MIe(YQ,t,e)^YQ)>>>0}function JQ(t,e,r){const n=t.readUint32(),a=LIe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function qte(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function zte(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Wte(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Xte(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Yte(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+UIe(e[s-a],r[s],r[s-a])&255}}function UIe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function QIe(t,e,r,n,a,s){switch(t){case 0:qte(e,r,a);break;case 1:zte(e,r,a,s);break;case 2:Wte(e,r,n,a);break;case 3:Xte(e,r,n,a,s);break;case 4:Yte(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const VIe=new Uint16Array([255]),HIe=new Uint8Array(VIe.buffer),$Ie=HIe[0]===255;function GIe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],A=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(A<=0||h<=0)continue;const m=A*l,p=new Uint8Array(m);for(let g=0;g<h;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);QIe(x,y,b,p,m,l),p.set(b);for(let w=0;w<A;w++){const j=f.x+w*f.xStep,I=f.y+g*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if($Ie)for(let f=0;f<d.length;f++)d[f]=KIe(d[f]);return d}else return c}function KIe(t){return(t&255)<<8|t>>8&255}const qIe=new Uint16Array([255]),zIe=new Uint8Array(qIe.buffer),WIe=zIe[0]===255,XIe=new Uint8Array(0);function ZQ(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=XIe,d=0,f,A;for(let h=0;h<n;h++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(h*l,(h+1)*l),e[d]){case 0:qte(f,A,l);break;case 1:zte(f,A,l,o);break;case 2:Wte(f,A,u,l);break;case 3:Xte(f,A,u,l,o);break;case 4:Yte(f,A,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(WIe)for(let m=0;m<h.length;m++)h[m]=YIe(h[m]);return h}else return c}function YIe(t){return(t&255)<<8|t>>8&255}const aE=Uint8Array.of(137,80,78,71,13,10,26,10);function eV(t){if(!JIe(t.readBytes(aE.length)))throw new Error("wrong PNG signature")}function JIe(t){if(t.length<aE.length)return!1;for(let e=0;e<aE.length;e++)if(t[e]!==aE[e])return!1;return!0}const ZIe="tEXt",eje=0,Jte=new TextDecoder("latin1");function tje(t){if(nje(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const rje=/^[\u0000-\u00FF]*$/;function nje(t){if(!rje.test(t))throw new Error("invalid latin1 text")}function aje(t,e,r){const n=Zte(e);t[n]=sje(e,r-n.length-1)}function Zte(t){for(t.mark();t.readByte()!==eje;);const e=t.offset;t.reset();const r=Jte.decode(t.readBytes(e-t.offset-1));return t.skip(1),tje(r),r}function sje(t,e){return Jte.decode(t.readBytes(e))}const zc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},z3={UNKNOWN:-1,DEFLATE:0},tV={UNKNOWN:-1,ADAPTIVE:0},W3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},CC={NONE:0,BACKGROUND:1,PREVIOUS:2},X3={SOURCE:0,OVER:1};class ije extends S6{constructor(r,n={}){super(r);Ar(this,"_checkCrc");Ar(this,"_inflator");Ar(this,"_png");Ar(this,"_apng");Ar(this,"_end");Ar(this,"_hasPalette");Ar(this,"_palette");Ar(this,"_hasTransparency");Ar(this,"_transparency");Ar(this,"_compressionMethod");Ar(this,"_filterMethod");Ar(this,"_interlaceMethod");Ar(this,"_colorType");Ar(this,"_isAnimated");Ar(this,"_numberOfFrames");Ar(this,"_numberOfPlays");Ar(this,"_frames");Ar(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new XQ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=z3.UNKNOWN,this._filterMethod=tV.UNKNOWN,this._interlaceMethod=W3.UNKNOWN,this._colorType=zc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(eV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(eV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case ZIe:aje(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?JQ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?JQ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=oje(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case zc.GREYSCALE:a=1;break;case zc.TRUECOLOUR:a=3;break;case zc.INDEXED_COLOUR:a=1;break;case zc.GREYSCALE_ALPHA:a=2;break;case zc.TRUECOLOUR_ALPHA:a=4;break;case zc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==z3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case zc.GREYSCALE:case zc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case zc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case zc.UNKNOWN:case zc.GREYSCALE_ALPHA:case zc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Zte(this),a=this.readUint8();if(a!==z3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:RIe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=ZQ({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case CC.NONE:break;case CC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case CC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case X3.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case X3.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,A=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*A+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==tV.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===W3.NO_INTERLACE)this._png.data=ZQ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===W3.ADAM7)this._png.data=GIe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:CC.NONE,blendOp:X3.SOURCE,data:r}),this._inflator=new XQ,this._writingDataChunks=!1}}function oje(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var rV;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(rV||(rV={}));function lje(t,e){return new ije(t,e).decode()}var vn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Y3(){vn.console&&typeof vn.console.log=="function"&&vn.console.log.apply(vn.console,arguments)}var qa={log:Y3,warn:function(t){vn.console&&(typeof vn.console.warn=="function"?vn.console.warn.apply(vn.console,arguments):Y3.call(null,arguments))},error:function(t){vn.console&&(typeof vn.console.error=="function"?vn.console.error.apply(vn.console,arguments):Y3(t))}};function J3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){zm(n.response,e,r)},n.onerror=function(){qa.error("could not download file")},n.send()}function nV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function _C(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var zm=vn.saveAs||((typeof window>"u"?"undefined":Ba(window))!=="object"||window!==vn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=vn.URL||vn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?nV(a.href)?J3(t,e,r):_C(a,a.target="_blank"):_C(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){_C(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(nV(t))J3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){_C(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Ba(s)!=="object"&&(qa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return J3(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(vn.HTMLElement)||vn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Ba(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=vn.URL||vn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ere(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var sE=vn.atob.bind(vn),aV=vn.btoa.bind(vn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z3(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=gl(r,n,a,s,e[0],7,-680876936),s=gl(s,r,n,a,e[1],12,-389564586),a=gl(a,s,r,n,e[2],17,606105819),n=gl(n,a,s,r,e[3],22,-1044525330),r=gl(r,n,a,s,e[4],7,-176418897),s=gl(s,r,n,a,e[5],12,1200080426),a=gl(a,s,r,n,e[6],17,-1473231341),n=gl(n,a,s,r,e[7],22,-45705983),r=gl(r,n,a,s,e[8],7,1770035416),s=gl(s,r,n,a,e[9],12,-1958414417),a=gl(a,s,r,n,e[10],17,-42063),n=gl(n,a,s,r,e[11],22,-1990404162),r=gl(r,n,a,s,e[12],7,1804603682),s=gl(s,r,n,a,e[13],12,-40341101),a=gl(a,s,r,n,e[14],17,-1502002290),r=xl(r,n=gl(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=xl(s,r,n,a,e[6],9,-1069501632),a=xl(a,s,r,n,e[11],14,643717713),n=xl(n,a,s,r,e[0],20,-373897302),r=xl(r,n,a,s,e[5],5,-701558691),s=xl(s,r,n,a,e[10],9,38016083),a=xl(a,s,r,n,e[15],14,-660478335),n=xl(n,a,s,r,e[4],20,-405537848),r=xl(r,n,a,s,e[9],5,568446438),s=xl(s,r,n,a,e[14],9,-1019803690),a=xl(a,s,r,n,e[3],14,-187363961),n=xl(n,a,s,r,e[8],20,1163531501),r=xl(r,n,a,s,e[13],5,-1444681467),s=xl(s,r,n,a,e[2],9,-51403784),a=xl(a,s,r,n,e[7],14,1735328473),r=vl(r,n=xl(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=vl(s,r,n,a,e[8],11,-2022574463),a=vl(a,s,r,n,e[11],16,1839030562),n=vl(n,a,s,r,e[14],23,-35309556),r=vl(r,n,a,s,e[1],4,-1530992060),s=vl(s,r,n,a,e[4],11,1272893353),a=vl(a,s,r,n,e[7],16,-155497632),n=vl(n,a,s,r,e[10],23,-1094730640),r=vl(r,n,a,s,e[13],4,681279174),s=vl(s,r,n,a,e[0],11,-358537222),a=vl(a,s,r,n,e[3],16,-722521979),n=vl(n,a,s,r,e[6],23,76029189),r=vl(r,n,a,s,e[9],4,-640364487),s=vl(s,r,n,a,e[12],11,-421815835),a=vl(a,s,r,n,e[15],16,530742520),r=yl(r,n=vl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=yl(s,r,n,a,e[7],10,1126891415),a=yl(a,s,r,n,e[14],15,-1416354905),n=yl(n,a,s,r,e[5],21,-57434055),r=yl(r,n,a,s,e[12],6,1700485571),s=yl(s,r,n,a,e[3],10,-1894986606),a=yl(a,s,r,n,e[10],15,-1051523),n=yl(n,a,s,r,e[1],21,-2054922799),r=yl(r,n,a,s,e[8],6,1873313359),s=yl(s,r,n,a,e[15],10,-30611744),a=yl(a,s,r,n,e[6],15,-1560198380),n=yl(n,a,s,r,e[13],21,1309151649),r=yl(r,n,a,s,e[4],6,-145523070),s=yl(s,r,n,a,e[11],10,-1120210379),a=yl(a,s,r,n,e[2],15,718787259),n=yl(n,a,s,r,e[9],21,-343485551),t[0]=P0(r,t[0]),t[1]=P0(n,t[1]),t[2]=P0(a,t[2]),t[3]=P0(s,t[3])}function Kj(t,e,r,n,a,s){return e=P0(P0(e,t),P0(n,s)),P0(e<<a|e>>>32-a,r)}function gl(t,e,r,n,a,s,o){return Kj(e&r|~e&n,t,e,a,s,o)}function xl(t,e,r,n,a,s,o){return Kj(e&n|r&~n,t,e,a,s,o)}function vl(t,e,r,n,a,s,o){return Kj(e^r^n,t,e,a,s,o)}function yl(t,e,r,n,a,s,o){return Kj(r^(e|~n),t,e,a,s,o)}function tre(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Z3(n,cje(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Z3(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,Z3(n,a),n}function cje(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var sV="0123456789abcdef".split("");function uje(t){for(var e="",r=0;r<4;r++)e+=sV[t>>8*r+4&15]+sV[t>>8*r&15];return e}function dje(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function _k(t){return tre(t).map(dje).join("")}var fje=function(t){for(var e=0;e<t.length;e++)t[e]=uje(t[e]);return t.join("")}(tre("hello"))!="5d41402abc4b2a76b9719d911017c592";function P0(t,e){if(fje){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ek(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var iV={print:4,modify:8,copy:16,"annot-forms":32};function bx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(iV.perm!==void 0)throw new Error("Invalid permission: "+l);a+=iV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=_k(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ek(this.encryptionKey,this.padding)}function wx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function oV(t){if(Ba(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){vn.console&&qa.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function y2(t){if(!(this instanceof y2))return new y2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function rre(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function w0(t,e,r,n,a){if(!(this instanceof w0))return new w0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,rre.call(this,n,a)}function dp(t,e,r,n,a){if(!(this instanceof dp))return new dp(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,rre.call(this,n,a)}function Lr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Ba(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=oV;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(Q){m=Q};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var x=h.__private__.getPageFormat=function(Q){return g[Q]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),te(new Ne(be,0,0,-be,0,Cu()*be).toString()+" cm"),this.setFontSize(this.getFontSize()/be),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=h.__private__.combineFontStyleAndFontWeight=function(Q,Ce){if(Q=="bold"&&Ce=="normal"||Q=="bold"&&Ce==400||Q=="normal"&&Ce=="italic"||Q=="bold"&&Ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ce&&(Q=Ce==400||Ce==="normal"?Q==="italic"?"italic":"normal":Ce!=700&&Ce!=="bold"||Q!=="normal"?(Ce==700?"bold":Ce)+""+Q:"bold"),Q};h.advancedAPI=function(Q){var Ce=w===y;return Ce&&j.call(this),typeof Q!="function"||(Q(this),Ce&&I.call(this)),this},h.compatAPI=function(Q){var Ce=w===b;return Ce&&I.call(this),typeof Q!="function"||(Q(this),Ce&&j.call(this)),this},h.isAdvancedAPI=function(){return w===b};var S,E=function(Q){if(w!==b)throw new Error(Q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(Q,Ce){var rt=e||Ce;if(isNaN(Q)||isNaN(rt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Q.toFixed(rt).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Q,c)}:c==="smart"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Q,Q>-1&&Q<1?16:5)}:function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Q,16)};var P=h.f2=h.__private__.f2=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f2");return F(Q,2)},k=h.__private__.f3=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f3");return F(Q,3)},D=h.scale=h.__private__.scale=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?Q*be:w===b?Q:void 0},Z=function(Q){return D(function(Ce){return w===y?Cu()-Ce:w===b?Ce:void 0}(Q))};h.__private__.setPrecision=h.setPrecision=function(Q){typeof parseInt(Q,10)=="number"&&(e=parseInt(Q,10))};var fe,me="00000000000000000000000000000000",pe=h.__private__.getFileId=function(){return me},ye=h.__private__.setFileId=function(Q){return me=Q!==void 0&&/^[a-fA-F0-9]{32}$/.test(Q)?Q.toUpperCase():me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Qt=new bx(d.userPermissions,d.userPassword,d.ownerPassword,me)),me};h.setFileId=function(Q){return ye(Q),this},h.getFileId=function(){return pe()};var ae=h.__private__.convertDateToPDFDate=function(Q){var Ce=Q.getTimezoneOffset(),rt=Ce<0?"+":"-",wt=Math.floor(Math.abs(Ce/60)),Tt=Math.abs(Ce%60),nr=[rt,z(wt),"'",z(Tt),"'"].join("");return["D:",Q.getFullYear(),z(Q.getMonth()+1),z(Q.getDate()),z(Q.getHours()),z(Q.getMinutes()),z(Q.getSeconds()),nr].join("")},je=h.__private__.convertPDFDateToDate=function(Q){var Ce=parseInt(Q.substr(2,4),10),rt=parseInt(Q.substr(6,2),10)-1,wt=parseInt(Q.substr(8,2),10),Tt=parseInt(Q.substr(10,2),10),nr=parseInt(Q.substr(12,2),10),lr=parseInt(Q.substr(14,2),10);return new Date(Ce,rt,wt,Tt,nr,lr,0)},Be=h.__private__.setCreationDate=function(Q){var Ce;if(Q===void 0&&(Q=new Date),Q instanceof Date)Ce=ae(Q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ce=Q}return fe=Ce},O=h.__private__.getCreationDate=function(Q){var Ce=fe;return Q==="jsDate"&&(Ce=je(fe)),Ce};h.setCreationDate=function(Q){return Be(Q),this},h.getCreationDate=function(Q){return O(Q)};var G,z=h.__private__.padd2=function(Q){return("0"+parseInt(Q)).slice(-2)},L=h.__private__.padd2Hex=function(Q){return("00"+(Q=Q.toString())).substr(Q.length)},Y=0,J=[],R=[],H=0,ne=[],ge=[],U=!1,Ue=R;h.__private__.setCustomOutputDestination=function(Q){U=!0,Ue=Q};var ie=function(Q){U||(Ue=Q)};h.__private__.resetCustomOutputDestination=function(){U=!1,Ue=R};var te=h.__private__.out=function(Q){return Q=Q.toString(),H+=Q.length+1,Ue.push(Q),Ue},Ee=h.__private__.write=function(Q){return te(arguments.length===1?Q.toString():Array.prototype.join.call(arguments," "))},ce=h.__private__.getArrayBuffer=function(Q){for(var Ce=Q.length,rt=new ArrayBuffer(Ce),wt=new Uint8Array(rt);Ce--;)wt[Ce]=Q.charCodeAt(Ce);return rt},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return we};var Re=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(Q){return Re=w===b?Q/be:Q,this};var We,pt=h.__private__.getFontSize=h.getFontSize=function(){return w===y?Re:Re*be},_t=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(Q){return _t=Q,this},h.__private__.getR2L=h.getR2L=function(){return _t};var He,gt=h.__private__.setZoomMode=function(Q){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Q))We=Q;else if(isNaN(Q)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Q+'" is not recognized.');We=Q}else We=parseInt(Q,10)};h.__private__.getZoomMode=function(){return We};var ut,vt=h.__private__.setPageMode=function(Q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Q+'" is not recognized.');He=Q};h.__private__.getPageMode=function(){return He};var Pe=h.__private__.setLayoutMode=function(Q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Q+'" is not recognized.');ut=Q};h.__private__.getLayoutMode=function(){return ut},h.__private__.setDisplayMode=h.setDisplayMode=function(Q,Ce,rt){return gt(Q),Pe(Ce),vt(rt),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(Q){if(Object.keys(ct).indexOf(Q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[Q]},h.__private__.getDocumentProperties=function(){return ct},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(Q){for(var Ce in ct)ct.hasOwnProperty(Ce)&&Q[Ce]&&(ct[Ce]=Q[Ce]);return this},h.__private__.setDocumentProperty=function(Q,Ce){if(Object.keys(ct).indexOf(Q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[Q]=Ce};var lt,be,ue,Le,ke,Ae={},Ye={},yt=[],At={},he={},re={},oe={},Ve=null,de=0,Se=[],dt=new oV(h),xt=t.hotfixes||[],ht={},bt={},et=[],Ne=function Q(Ce,rt,wt,Tt,nr,lr){if(!(this instanceof Q))return new Q(Ce,rt,wt,Tt,nr,lr);isNaN(Ce)&&(Ce=1),isNaN(rt)&&(rt=0),isNaN(wt)&&(wt=0),isNaN(Tt)&&(Tt=1),isNaN(nr)&&(nr=0),isNaN(lr)&&(lr=0),this._matrix=[Ce,rt,wt,Tt,nr,lr]};Object.defineProperty(Ne.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Ne.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Ne.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Ne.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Ne.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Ne.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Ne.prototype,"a",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Ne.prototype,"b",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Ne.prototype,"c",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Ne.prototype,"d",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Ne.prototype,"e",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Ne.prototype,"f",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Ne.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ne.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ne.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ne.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ne.prototype.join=function(Q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(Q)},Ne.prototype.multiply=function(Q){var Ce=Q.sx*this.sx+Q.shy*this.shx,rt=Q.sx*this.shy+Q.shy*this.sy,wt=Q.shx*this.sx+Q.sy*this.shx,Tt=Q.shx*this.shy+Q.sy*this.sy,nr=Q.tx*this.sx+Q.ty*this.shx+this.tx,lr=Q.tx*this.shy+Q.ty*this.sy+this.ty;return new Ne(Ce,rt,wt,Tt,nr,lr)},Ne.prototype.decompose=function(){var Q=this.sx,Ce=this.shy,rt=this.shx,wt=this.sy,Tt=this.tx,nr=this.ty,lr=Math.sqrt(Q*Q+Ce*Ce),Mr=(Q/=lr)*rt+(Ce/=lr)*wt;rt-=Q*Mr,wt-=Ce*Mr;var Kr=Math.sqrt(rt*rt+wt*wt);return Mr/=Kr,Q*(wt/=Kr)<Ce*(rt/=Kr)&&(Q=-Q,Ce=-Ce,Mr=-Mr,lr=-lr),{scale:new Ne(lr,0,0,Kr,0,0),translate:new Ne(1,0,0,1,Tt,nr),rotate:new Ne(Q,Ce,-Ce,Q,0,0),skew:new Ne(1,0,Mr,1,0,0)}},Ne.prototype.toString=function(Q){return this.join(" ")},Ne.prototype.inversed=function(){var Q=this.sx,Ce=this.shy,rt=this.shx,wt=this.sy,Tt=this.tx,nr=this.ty,lr=1/(Q*wt-Ce*rt),Mr=wt*lr,Kr=-Ce*lr,fn=-rt*lr,bn=Q*lr;return new Ne(Mr,Kr,fn,bn,-Mr*Tt-fn*nr,-Kr*Tt-bn*nr)},Ne.prototype.applyToPoint=function(Q){var Ce=Q.x*this.sx+Q.y*this.shx+this.tx,rt=Q.x*this.shy+Q.y*this.sy+this.ty;return new wu(Ce,rt)},Ne.prototype.applyToRectangle=function(Q){var Ce=this.applyToPoint(Q),rt=this.applyToPoint(new wu(Q.x+Q.w,Q.y+Q.h));return new PA(Ce.x,Ce.y,rt.x-Ce.x,rt.y-Ce.y)},Ne.prototype.clone=function(){var Q=this.sx,Ce=this.shy,rt=this.shx,wt=this.sy,Tt=this.tx,nr=this.ty;return new Ne(Q,Ce,rt,wt,Tt,nr)},h.Matrix=Ne;var mt=h.matrixMult=function(Q,Ce){return Ce.multiply(Q)},W=new Ne(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=W;var Ie=function(Q,Ce){if(!he[Q]){var rt=(Ce instanceof w0?"Sh":"P")+(Object.keys(At).length+1).toString(10);Ce.id=rt,he[Q]=rt,At[rt]=Ce,dt.publish("addPattern",Ce)}};h.ShadingPattern=w0,h.TilingPattern=dp,h.addShadingPattern=function(Q,Ce){return E("addShadingPattern()"),Ie(Q,Ce),this},h.beginTilingPattern=function(Q){E("beginTilingPattern()"),df(Q.boundingBox[0],Q.boundingBox[1],Q.boundingBox[2]-Q.boundingBox[0],Q.boundingBox[3]-Q.boundingBox[1],Q.matrix)},h.endTilingPattern=function(Q,Ce){E("endTilingPattern()"),Ce.stream=ge[G].join(`
`),Ie(Q,Ce),dt.publish("endTilingPattern",Ce),et.pop().restore()};var Je,tt=h.__private__.newObject=function(){var Q=ft();return T(Q,!0),Q},ft=h.__private__.newObjectDeferred=function(){return Y++,J[Y]=function(){return H},Y},T=function(Q,Ce){return Ce=typeof Ce=="boolean"&&Ce,J[Q]=H,Ce&&te(Q+" 0 obj"),Q},M=h.__private__.newAdditionalObject=function(){var Q={objId:ft(),content:""};return ne.push(Q),Q},V=ft(),q=ft(),ee=h.__private__.decodeColorString=function(Q){var Ce=Q.split(" ");if(Ce.length!==2||Ce[1]!=="g"&&Ce[1]!=="G")Ce.length!==5||Ce[4]!=="k"&&Ce[4]!=="K"||(Ce=[(1-Ce[0])*(1-Ce[3]),(1-Ce[1])*(1-Ce[3]),(1-Ce[2])*(1-Ce[3]),"r"]);else{var rt=parseFloat(Ce[0]);Ce=[rt,rt,rt,"r"]}for(var wt="#",Tt=0;Tt<3;Tt++)wt+=("0"+Math.floor(255*parseFloat(Ce[Tt])).toString(16)).slice(-2);return wt},se=h.__private__.encodeColorString=function(Q){var Ce;typeof Q=="string"&&(Q={ch1:Q});var rt=Q.ch1,wt=Q.ch2,Tt=Q.ch3,nr=Q.ch4,lr=Q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof rt=="string"&&rt.charAt(0)!=="#"){var Mr=new ere(rt);if(Mr.ok)rt=Mr.toHex();else if(!/^\d*\.?\d*$/.test(rt))throw new Error('Invalid color "'+rt+'" passed to jsPDF.encodeColorString.')}if(typeof rt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(rt)&&(rt="#"+rt[1]+rt[1]+rt[2]+rt[2]+rt[3]+rt[3]),typeof rt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(rt)){var Kr=parseInt(rt.substr(1),16);rt=Kr>>16&255,wt=Kr>>8&255,Tt=255&Kr}if(wt===void 0||nr===void 0&&rt===wt&&wt===Tt)Ce=typeof rt=="string"?rt+" "+lr[0]:Q.precision===2?P(rt/255)+" "+lr[0]:k(rt/255)+" "+lr[0];else if(nr===void 0||Ba(nr)==="object"){if(nr&&!isNaN(nr.a)&&nr.a===0)return["1.","1.","1.",lr[1]].join(" ");Ce=typeof rt=="string"?[rt,wt,Tt,lr[1]].join(" "):Q.precision===2?[P(rt/255),P(wt/255),P(Tt/255),lr[1]].join(" "):[k(rt/255),k(wt/255),k(Tt/255),lr[1]].join(" ")}else Ce=typeof rt=="string"?[rt,wt,Tt,nr,lr[2]].join(" "):Q.precision===2?[P(rt),P(wt),P(Tt),P(nr),lr[2]].join(" "):[k(rt),k(wt),k(Tt),k(nr),lr[2]].join(" ");return Ce},Oe=h.__private__.getFilters=function(){return o},Ke=h.__private__.putStream=function(Q){var Ce=(Q=Q||{}).data||"",rt=Q.filters||Oe(),wt=Q.alreadyAppliedFilters||[],Tt=Q.addLength1||!1,nr=Ce.length,lr=Q.objectId,Mr=function(Ys){return Ys};if(d!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Mr=Qt.encryptor(lr,0));var Kr={};rt===!0&&(rt=["FlateEncode"]);var fn=Q.additionalKeyValues||[],bn=(Kr=Lr.API.processDataByFilters!==void 0?Lr.API.processDataByFilters(Ce,rt):{data:Ce,reverseChain:[]}).reverseChain+(Array.isArray(wt)?wt.join(" "):wt.toString());if(Kr.data.length!==0&&(fn.push({key:"Length",value:Kr.data.length}),Tt===!0&&fn.push({key:"Length1",value:nr})),bn.length!=0)if(bn.split("/").length-1==1)fn.push({key:"Filter",value:bn});else{fn.push({key:"Filter",value:"["+bn+"]"});for(var Vn=0;Vn<fn.length;Vn+=1)if(fn[Vn].key==="DecodeParms"){for(var ua=[],Ts=0;Ts<Kr.reverseChain.split("/").length-1;Ts+=1)ua.push("null");ua.push(fn[Vn].value),fn[Vn].value="["+ua.join(" ")+"]"}}te("<<");for(var ba=0;ba<fn.length;ba++)te("/"+fn[ba].key+" "+fn[ba].value);te(">>"),Kr.data.length!==0&&(te("stream"),te(Mr(Kr.data)),te("endstream"))},ot=h.__private__.putPage=function(Q){var Ce=Q.number,rt=Q.data,wt=Q.objId,Tt=Q.contentsObjId;T(wt,!0),te("<</Type /Page"),te("/Parent "+Q.rootDictionaryObjId+" 0 R"),te("/Resources "+Q.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(S(Q.mediaBox.bottomLeftX))+" "+parseFloat(S(Q.mediaBox.bottomLeftY))+" "+S(Q.mediaBox.topRightX)+" "+S(Q.mediaBox.topRightY)+"]"),Q.cropBox!==null&&te("/CropBox ["+S(Q.cropBox.bottomLeftX)+" "+S(Q.cropBox.bottomLeftY)+" "+S(Q.cropBox.topRightX)+" "+S(Q.cropBox.topRightY)+"]"),Q.bleedBox!==null&&te("/BleedBox ["+S(Q.bleedBox.bottomLeftX)+" "+S(Q.bleedBox.bottomLeftY)+" "+S(Q.bleedBox.topRightX)+" "+S(Q.bleedBox.topRightY)+"]"),Q.trimBox!==null&&te("/TrimBox ["+S(Q.trimBox.bottomLeftX)+" "+S(Q.trimBox.bottomLeftY)+" "+S(Q.trimBox.topRightX)+" "+S(Q.trimBox.topRightY)+"]"),Q.artBox!==null&&te("/ArtBox ["+S(Q.artBox.bottomLeftX)+" "+S(Q.artBox.bottomLeftY)+" "+S(Q.artBox.topRightX)+" "+S(Q.artBox.topRightY)+"]"),typeof Q.userUnit=="number"&&Q.userUnit!==1&&te("/UserUnit "+Q.userUnit),dt.publish("putPage",{objId:wt,pageContext:Se[Ce],pageNumber:Ce,page:rt}),te("/Contents "+Tt+" 0 R"),te(">>"),te("endobj");var nr=rt.join(`
`);return w===b&&(nr+=`
Q`),T(Tt,!0),Ke({data:nr,filters:Oe(),objectId:Tt}),te("endobj"),wt},Fe=h.__private__.putPages=function(){var Q,Ce,rt=[];for(Q=1;Q<=de;Q++)Se[Q].objId=ft(),Se[Q].contentsObjId=ft();for(Q=1;Q<=de;Q++)rt.push(ot({number:Q,data:ge[Q],objId:Se[Q].objId,contentsObjId:Se[Q].contentsObjId,mediaBox:Se[Q].mediaBox,cropBox:Se[Q].cropBox,bleedBox:Se[Q].bleedBox,trimBox:Se[Q].trimBox,artBox:Se[Q].artBox,userUnit:Se[Q].userUnit,rootDictionaryObjId:V,resourceDictionaryObjId:q}));T(V,!0),te("<</Type /Pages");var wt="/Kids [";for(Ce=0;Ce<de;Ce++)wt+=rt[Ce]+" 0 R ";te(wt+"]"),te("/Count "+de),te(">>"),te("endobj"),dt.publish("postPutPages")},Xe=function(Q){dt.publish("putFont",{font:Q,out:te,newObject:tt,putStream:Ke}),Q.isAlreadyPutted!==!0&&(Q.objectNumber=tt(),te("<<"),te("/Type /Font"),te("/BaseFont /"+wx(Q.postScriptName)),te("/Subtype /Type1"),typeof Q.encoding=="string"&&te("/Encoding /"+Q.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},xe=function(Q){Q.objectNumber=tt();var Ce=[];Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Form"}),Ce.push({key:"BBox",value:"["+[S(Q.x),S(Q.y),S(Q.x+Q.width),S(Q.y+Q.height)].join(" ")+"]"}),Ce.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"});var rt=Q.pages[1].join(`
`);Ke({data:rt,additionalKeyValues:Ce,objectId:Q.objectNumber}),te("endobj")},Ge=function(Q,Ce){Ce||(Ce=21);var rt=tt(),wt=function(lr,Mr){var Kr,fn=[],bn=1/(Mr-1);for(Kr=0;Kr<1;Kr+=bn)fn.push(Kr);if(fn.push(1),lr[0].offset!=0){var Vn={offset:0,color:lr[0].color};lr.unshift(Vn)}if(lr[lr.length-1].offset!=1){var ua={offset:1,color:lr[lr.length-1].color};lr.push(ua)}for(var Ts="",ba=0,Ys=0;Ys<fn.length;Ys++){for(Kr=fn[Ys];Kr>lr[ba+1].offset;)ba++;var ks=lr[ba].offset,Js=(Kr-ks)/(lr[ba+1].offset-ks),Fs=lr[ba].color,hc=lr[ba+1].color;Ts+=L(Math.round((1-Js)*Fs[0]+Js*hc[0]).toString(16))+L(Math.round((1-Js)*Fs[1]+Js*hc[1]).toString(16))+L(Math.round((1-Js)*Fs[2]+Js*hc[2]).toString(16))}return Ts.trim()}(Q.colors,Ce),Tt=[];Tt.push({key:"FunctionType",value:"0"}),Tt.push({key:"Domain",value:"[0.0 1.0]"}),Tt.push({key:"Size",value:"["+Ce+"]"}),Tt.push({key:"BitsPerSample",value:"8"}),Tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke({data:wt,additionalKeyValues:Tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:rt}),te("endobj"),Q.objectNumber=tt(),te("<< /ShadingType "+Q.type),te("/ColorSpace /DeviceRGB");var nr="/Coords ["+S(parseFloat(Q.coords[0]))+" "+S(parseFloat(Q.coords[1]))+" ";Q.type===2?nr+=S(parseFloat(Q.coords[2]))+" "+S(parseFloat(Q.coords[3])):nr+=S(parseFloat(Q.coords[2]))+" "+S(parseFloat(Q.coords[3]))+" "+S(parseFloat(Q.coords[4]))+" "+S(parseFloat(Q.coords[5])),te(nr+="]"),Q.matrix&&te("/Matrix ["+Q.matrix.toString()+"]"),te("/Function "+rt+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},qe=function(Q,Ce){var rt=ft(),wt=tt();Ce.push({resourcesOid:rt,objectOid:wt}),Q.objectNumber=wt;var Tt=[];Tt.push({key:"Type",value:"/Pattern"}),Tt.push({key:"PatternType",value:"1"}),Tt.push({key:"PaintType",value:"1"}),Tt.push({key:"TilingType",value:"1"}),Tt.push({key:"BBox",value:"["+Q.boundingBox.map(S).join(" ")+"]"}),Tt.push({key:"XStep",value:S(Q.xStep)}),Tt.push({key:"YStep",value:S(Q.yStep)}),Tt.push({key:"Resources",value:rt+" 0 R"}),Q.matrix&&Tt.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"}),Ke({data:Q.stream,additionalKeyValues:Tt,objectId:Q.objectNumber}),te("endobj")},it=function(Q){for(var Ce in Q.objectNumber=tt(),te("<<"),Q)switch(Ce){case"opacity":te("/ca "+P(Q[Ce]));break;case"stroke-opacity":te("/CA "+P(Q[Ce]))}te(">>"),te("endobj")},Et=function(Q){T(Q.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ce in te("/Font <<"),Ae)Ae.hasOwnProperty(Ce)&&(f===!1||f===!0&&A.hasOwnProperty(Ce))&&te("/"+Ce+" "+Ae[Ce].objectNumber+" 0 R");te(">>")}(),function(){if(Object.keys(At).length>0){for(var Ce in te("/Shading <<"),At)At.hasOwnProperty(Ce)&&At[Ce]instanceof w0&&At[Ce].objectNumber>=0&&te("/"+Ce+" "+At[Ce].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),te(">>")}}(),function(Ce){if(Object.keys(At).length>0){for(var rt in te("/Pattern <<"),At)At.hasOwnProperty(rt)&&At[rt]instanceof h.TilingPattern&&At[rt].objectNumber>=0&&At[rt].objectNumber<Ce&&te("/"+rt+" "+At[rt].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),te(">>")}}(Q.objectOid),function(){if(Object.keys(re).length>0){var Ce;for(Ce in te("/ExtGState <<"),re)re.hasOwnProperty(Ce)&&re[Ce].objectNumber>=0&&te("/"+Ce+" "+re[Ce].objectNumber+" 0 R");dt.publish("putGStateDict"),te(">>")}}(),function(){for(var Ce in te("/XObject <<"),ht)ht.hasOwnProperty(Ce)&&ht[Ce].objectNumber>=0&&te("/"+Ce+" "+ht[Ce].objectNumber+" 0 R");dt.publish("putXobjectDict"),te(">>")}(),te(">>"),te("endobj")},Pt=function(Q){Ye[Q.fontName]=Ye[Q.fontName]||{},Ye[Q.fontName][Q.fontStyle]=Q.id},pr=function(Q,Ce,rt,wt,Tt){var nr={id:"F"+(Object.keys(Ae).length+1).toString(10),postScriptName:Q,fontName:Ce,fontStyle:rt,encoding:wt,isStandardFont:Tt||!1,metadata:{}};return dt.publish("addFont",{font:nr,instance:this}),Ae[nr.id]=nr,Pt(nr),nr.id},Ot=h.__private__.pdfEscape=h.pdfEscape=function(Q,Ce){return function(rt,wt){var Tt,nr,lr,Mr,Kr,fn,bn,Vn,ua;if(lr=(wt=wt||{}).sourceEncoding||"Unicode",Kr=wt.outputEncoding,(wt.autoencode||Kr)&&Ae[lt].metadata&&Ae[lt].metadata[lr]&&Ae[lt].metadata[lr].encoding&&(Mr=Ae[lt].metadata[lr].encoding,!Kr&&Ae[lt].encoding&&(Kr=Ae[lt].encoding),!Kr&&Mr.codePages&&(Kr=Mr.codePages[0]),typeof Kr=="string"&&(Kr=Mr[Kr]),Kr)){for(bn=!1,fn=[],Tt=0,nr=rt.length;Tt<nr;Tt++)(Vn=Kr[rt.charCodeAt(Tt)])?fn.push(String.fromCharCode(Vn)):fn.push(rt[Tt]),fn[Tt].charCodeAt(0)>>8&&(bn=!0);rt=fn.join("")}for(Tt=rt.length;bn===void 0&&Tt!==0;)rt.charCodeAt(Tt-1)>>8&&(bn=!0),Tt--;if(!bn)return rt;for(fn=wt.noBOM?[]:[254,255],Tt=0,nr=rt.length;Tt<nr;Tt++){if((ua=(Vn=rt.charCodeAt(Tt))>>8)>>8)throw new Error("Character at position "+Tt+" of string '"+rt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");fn.push(ua),fn.push(Vn-(ua<<8))}return String.fromCharCode.apply(void 0,fn)}(Q,Ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dt=h.__private__.beginPage=function(Q){ge[++de]=[],Se[de]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Q[0]),topRightY:Number(Q[1])}},Bt(de),ie(ge[G])},fr=function(Q,Ce){var rt,wt,Tt;switch(r=Ce||r,typeof Q=="string"&&(rt=x(Q.toLowerCase()),Array.isArray(rt)&&(wt=rt[0],Tt=rt[1])),Array.isArray(Q)&&(wt=Q[0]*be,Tt=Q[1]*be),isNaN(wt)&&(wt=a[0],Tt=a[1]),(wt>14400||Tt>14400)&&(qa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),wt=Math.min(14400,wt),Tt=Math.min(14400,Tt)),a=[wt,Tt],r.substr(0,1)){case"l":Tt>wt&&(a=[Tt,wt]);break;case"p":wt>Tt&&(a=[Tt,wt])}Dt(a),dn(vd),te(bd),Da!==0&&te(Da+" J"),Im!==0&&te(Im+" j"),dt.publish("addPage",{pageNumber:de})},ir=function(Q){Q>0&&Q<=de&&(ge.splice(Q,1),Se.splice(Q,1),de--,G>de&&(G=de),this.setPage(G))},Bt=function(Q){Q>0&&Q<=de&&(G=Q)},gr=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ge.length-1},Or=function(Q,Ce,rt){var wt,Tt=void 0;return rt=rt||{},Q=Q!==void 0?Q:Ae[lt].fontName,Ce=Ce!==void 0?Ce:Ae[lt].fontStyle,wt=Q.toLowerCase(),Ye[wt]!==void 0&&Ye[wt][Ce]!==void 0?Tt=Ye[wt][Ce]:Ye[Q]!==void 0&&Ye[Q][Ce]!==void 0?Tt=Ye[Q][Ce]:rt.disableWarning===!1&&qa.warn("Unable to look up font label for font '"+Q+"', '"+Ce+"'. Refer to getFontList() for available fonts."),Tt||rt.noFallback||(Tt=Ye.times[Ce])==null&&(Tt=Ye.times.normal),Tt},Pr=h.__private__.putInfo=function(){var Q=tt(),Ce=function(wt){return wt};for(var rt in d!==null&&(Ce=Qt.encryptor(Q,0)),te("<<"),te("/Producer ("+Ot(Ce("jsPDF "+Lr.version))+")"),ct)ct.hasOwnProperty(rt)&&ct[rt]&&te("/"+rt.substr(0,1).toUpperCase()+rt.substr(1)+" ("+Ot(Ce(ct[rt]))+")");te("/CreationDate ("+Ot(Ce(fe))+")"),te(">>"),te("endobj")},Vr=h.__private__.putCatalog=function(Q){var Ce=(Q=Q||{}).rootDictionaryObjId||V;switch(tt(),te("<<"),te("/Type /Catalog"),te("/Pages "+Ce+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var rt=""+We;rt.substr(rt.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&te("/OpenAction [3 0 R /XYZ null null "+P(We)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}He&&te("/PageMode /"+He),dt.publish("putCatalog"),te(">>"),te("endobj")},Rr=h.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(Y+1)),te("/Root "+Y+" 0 R"),te("/Info "+(Y-1)+" 0 R"),d!==null&&te("/Encrypt "+Qt.oid+" 0 R"),te("/ID [ <"+me+"> <"+me+"> ]"),te(">>")},an=h.__private__.putHeader=function(){te("%PDF-"+m),te("%")},Wn=h.__private__.putXRef=function(){var Q="0000000000";te("xref"),te("0 "+(Y+1)),te("0000000000 65535 f ");for(var Ce=1;Ce<=Y;Ce++)typeof J[Ce]=="function"?te((Q+J[Ce]()).slice(-10)+" 00000 n "):J[Ce]!==void 0?te((Q+J[Ce]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Nt=h.__private__.buildDocument=function(){var Q;Y=0,H=0,R=[],J=[],ne=[],V=ft(),q=ft(),ie(R),dt.publish("buildDocument"),an(),Fe(),function(){dt.publish("putAdditionalObjects");for(var rt=0;rt<ne.length;rt++){var wt=ne[rt];T(wt.objId,!0),te(wt.content),te("endobj")}dt.publish("postPutAdditionalObjects")}(),Q=[],function(){for(var rt in Ae)Ae.hasOwnProperty(rt)&&(f===!1||f===!0&&A.hasOwnProperty(rt))&&Xe(Ae[rt])}(),function(){var rt;for(rt in re)re.hasOwnProperty(rt)&&it(re[rt])}(),function(){for(var rt in ht)ht.hasOwnProperty(rt)&&xe(ht[rt])}(),function(rt){var wt;for(wt in At)At.hasOwnProperty(wt)&&(At[wt]instanceof w0?Ge(At[wt]):At[wt]instanceof dp&&qe(At[wt],rt))}(Q),dt.publish("putResources"),Q.forEach(Et),Et({resourcesOid:q,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources"),d!==null&&(Qt.oid=tt(),te("<<"),te("/Filter /Standard"),te("/V "+Qt.v),te("/R "+Qt.r),te("/U <"+Qt.toHexString(Qt.U)+">"),te("/O <"+Qt.toHexString(Qt.O)+">"),te("/P "+Qt.P),te(">>"),te("endobj")),Pr(),Vr();var Ce=H;return Wn(),Rr(),te("startxref"),te(""+Ce),te("%%EOF"),ie(ge[G]),R.join(`
`)},_r=h.__private__.getBlob=function(Q){return new Blob([ce(Q)],{type:"application/pdf"})},st=h.output=h.__private__.output=(Je=function(Q,Ce){switch(typeof(Ce=Ce||{})=="string"?Ce={filename:Ce}:Ce.filename=Ce.filename||"generated.pdf",Q){case void 0:return Nt();case"save":h.save(Ce.filename);break;case"arraybuffer":return ce(Nt());case"blob":return _r(Nt());case"bloburi":case"bloburl":if(vn.URL!==void 0&&typeof vn.URL.createObjectURL=="function")return vn.URL&&vn.URL.createObjectURL(_r(Nt()))||void 0;qa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var rt="",wt=Nt();try{rt=aV(wt)}catch{rt=aV(unescape(encodeURIComponent(wt)))}return"data:application/pdf;filename="+Ce.filename+";base64,"+rt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var Tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",nr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ce.pdfObjectUrl&&(Tt=Ce.pdfObjectUrl,nr="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Tt+'"'+nr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ce)+");<\/script></body></html>",Mr=vn.open();return Mr!==null&&Mr.document.write(lr),Mr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var Kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ce.filename+'" width="500px" height="400px" /></body></html>',fn=vn.open();if(fn!==null){fn.document.write(Kr);var bn=this;fn.document.documentElement.querySelector("#pdfViewer").onload=function(){fn.document.title=Ce.filename,fn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bn.output("bloburl"))}}return fn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ce)+'"></iframe></body></html>',ua=vn.open();if(ua!==null&&(ua.document.write(Vn),ua.document.title=Ce.filename),ua||typeof safari>"u")return ua;break;case"datauri":case"dataurl":return vn.document.location.href=this.output("datauristring",Ce);default:return null}},Je.foo=function(){try{return Je.apply(this,arguments)}catch(rt){var Q=rt.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var Ce="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+rt.message;if(!vn.console)throw new Error(Ce);vn.console.error(Ce,rt),vn.alert&&alert(Ce)}},Je.foo.bar=Je,Je.foo),St=function(Q){return Array.isArray(xt)===!0&&xt.indexOf(Q)>-1};switch(n){case"pt":be=1;break;case"mm":be=72/25.4;break;case"cm":be=72/2.54;break;case"in":be=72;break;case"px":be=St("px_scaling")==1?.75:96/72;break;case"pc":case"em":be=12;break;case"ex":be=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);be=n}var Qt=null;Be(),ye();var Rt=h.__private__.getPageInfo=h.getPageInfo=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Se[Q].objId,pageNumber:Q,pageContext:Se[Q]}},Mt=h.__private__.getPageInfoByObjId=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ce in Se)if(Se[Ce].objId===Q)break;return Rt(Ce)},qt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Se[G].objId,pageNumber:G,pageContext:Se[G]}};h.addPage=function(){return fr.apply(this,arguments),this},h.setPage=function(){return Bt.apply(this,arguments),ie.call(this,ge[G]),this},h.insertPage=function(Q){return this.addPage(),this.movePage(G,Q),this},h.movePage=function(Q,Ce){var rt,wt;if(Q>Ce){rt=ge[Q],wt=Se[Q];for(var Tt=Q;Tt>Ce;Tt--)ge[Tt]=ge[Tt-1],Se[Tt]=Se[Tt-1];ge[Ce]=rt,Se[Ce]=wt,this.setPage(Ce)}else if(Q<Ce){rt=ge[Q],wt=Se[Q];for(var nr=Q;nr<Ce;nr++)ge[nr]=ge[nr+1],Se[nr]=Se[nr+1];ge[Ce]=rt,Se[Ce]=wt,this.setPage(Ce)}return this},h.deletePage=function(){return ir.apply(this,arguments),this},h.__private__.text=h.text=function(Q,Ce,rt,wt,Tt){var nr,lr,Mr,Kr,fn,bn,Vn,ua,Ts,ba=(wt=wt||{}).scope||this;if(typeof Q=="number"&&typeof Ce=="number"&&(typeof rt=="string"||Array.isArray(rt))){var Ys=rt;rt=Ce,Ce=Q,Q=Ys}if(arguments[3]instanceof Ne==0?(Mr=arguments[4],Kr=arguments[5],Ba(Vn=arguments[3])==="object"&&Vn!==null||(typeof Mr=="string"&&(Kr=Mr,Mr=null),typeof Vn=="string"&&(Kr=Vn,Vn=null),typeof Vn=="number"&&(Mr=Vn,Vn=null),wt={flags:Vn,angle:Mr,align:Kr})):(E("The transform parameter of text() with a Matrix value"),Ts=Tt),isNaN(Ce)||isNaN(rt)||Q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Q.length===0)return ba;var ks,Js="",Fs=typeof wt.lineHeightFactor=="number"?wt.lineHeightFactor:Rc,hc=ba.internal.scaleFactor;function _u(pa){return pa=pa.split("	").join(Array(wt.TabLen||9).join(" ")),Ot(pa,Vn)}function Eu(pa){for(var $a,di=pa.concat(),Vi=[],nh=di.length;nh--;)typeof($a=di.shift())=="string"?Vi.push($a):Array.isArray(pa)&&($a.length===1||$a[1]===void 0&&$a[2]===void 0)?Vi.push($a[0]):Vi.push([$a[0],$a[1],$a[2]]);return Vi}function C(pa,$a){var di;if(typeof pa=="string")di=$a(pa)[0];else if(Array.isArray(pa)){for(var Vi,nh,k1=pa.concat(),Mg=[],cN=k1.length;cN--;)typeof(Vi=k1.shift())=="string"?Mg.push($a(Vi)[0]):Array.isArray(Vi)&&typeof Vi[0]=="string"&&(nh=$a(Vi[0],Vi[1],Vi[2]),Mg.push([nh[0],nh[1],nh[2]]));di=Mg}return di}var X=!1,ve=!0;if(typeof Q=="string")X=!0;else if(Array.isArray(Q)){var $e=Q.concat();lr=[];for(var kt,Kt=$e.length;Kt--;)(typeof(kt=$e.shift())!="string"||Array.isArray(kt)&&typeof kt[0]!="string")&&(ve=!1);X=ve}if(X===!1)throw new Error('Type of text must be string or Array. "'+Q+'" is not recognized.');typeof Q=="string"&&(Q=Q.match(/[\r?\n]/)?Q.split(/\r\n|\r|\n/g):[Q]);var wr=Re/ba.internal.scaleFactor,qn=wr*(Fs-1);switch(wt.baseline){case"bottom":rt-=qn;break;case"top":rt+=wr-qn;break;case"hanging":rt+=wr-2*qn;break;case"middle":rt+=wr/2-qn}if((bn=wt.maxWidth||0)>0&&(typeof Q=="string"?Q=ba.splitTextToSize(Q,bn):Object.prototype.toString.call(Q)==="[object Array]"&&(Q=Q.reduce(function(pa,$a){return pa.concat(ba.splitTextToSize($a,bn))},[]))),nr={text:Q,x:Ce,y:rt,options:wt,mutex:{pdfEscape:Ot,activeFontKey:lt,fonts:Ae,activeFontSize:Re}},dt.publish("preProcessText",nr),Q=nr.text,Mr=(wt=nr.options).angle,Ts instanceof Ne==0&&Mr&&typeof Mr=="number"){Mr*=Math.PI/180,wt.rotationDirection===0&&(Mr=-Mr),w===b&&(Mr=-Mr);var Os=Math.cos(Mr),Rn=Math.sin(Mr);Ts=new Ne(Os,Rn,-Rn,Os,0,0)}else Mr&&Mr instanceof Ne&&(Ts=Mr);w!==b||Ts||(Ts=W),(fn=wt.charSpace||bu)!==void 0&&(Js+=S(D(fn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ua=wt.horizontalScale)!==void 0&&(Js+=S(100*ua)+` Tz
`),wt.lang;var aa=-1,Ja=wt.renderingMode!==void 0?wt.renderingMode:wt.stroke,Lc=ba.internal.getCurrentPageInfo().pageContext;switch(Ja){case 0:case!1:case"fill":aa=0;break;case 1:case!0:case"stroke":aa=1;break;case 2:case"fillThenStroke":aa=2;break;case 3:case"invisible":aa=3;break;case 4:case"fillAndAddForClipping":aa=4;break;case 5:case"strokeAndAddPathForClipping":aa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":aa=6;break;case 7:case"addToPathForClipping":aa=7}var fl=Lc.usedRenderingMode!==void 0?Lc.usedRenderingMode:-1;aa!==-1?Js+=aa+` Tr
`:fl!==-1&&(Js+=`0 Tr
`),aa!==-1&&(Lc.usedRenderingMode=aa),Kr=wt.align||"left";var Uo,wd=Re*Fs,E1=ba.internal.pageSize.getWidth(),S1=Ae[lt];fn=wt.charSpace||bu,bn=wt.maxWidth||0,Vn=Object.assign({autoencode:!0,noBOM:!0},wt.flags);var TA=[],Bm=function(pa){return ba.getStringUnitWidth(pa,{font:S1,charSpace:fn,fontSize:Re,doKerning:!1})*Re/hc};if(Object.prototype.toString.call(Q)==="[object Array]"){var Uc;lr=Eu(Q),Kr!=="left"&&(Uo=lr.map(Bm));var Qc,kA=0;if(Kr==="right"){Ce-=Uo[0],Q=[],Kt=lr.length;for(var rh=0;rh<Kt;rh++)rh===0?(Qc=po(Ce),Uc=yd(rt)):(Qc=D(kA-Uo[rh]),Uc=-wd),Q.push([lr[rh],Qc,Uc]),kA=Uo[rh]}else if(Kr==="center"){Ce-=Uo[0]/2,Q=[],Kt=lr.length;for(var FA=0;FA<Kt;FA++)FA===0?(Qc=po(Ce),Uc=yd(rt)):(Qc=D((kA-Uo[FA])/2),Uc=-wd),Q.push([lr[FA],Qc,Uc]),kA=Uo[FA]}else if(Kr==="left"){Q=[],Kt=lr.length;for(var I1=0;I1<Kt;I1++)Q.push(lr[I1])}else if(Kr==="justify"&&S1.encoding==="Identity-H"){Q=[],Kt=lr.length,bn=bn!==0?bn:E1;for(var Rg=0,ui=0;ui<Kt;ui++)if(Uc=ui===0?yd(rt):-wd,Qc=ui===0?po(Ce):Rg,ui<Kt-1){var lN=D((bn-Uo[ui])/(lr[ui].split(" ").length-1)),hf=lr[ui].split(" ");Q.push([hf[0]+" ",Qc,Uc]),Rg=0;for(var Af=1;Af<hf.length;Af++){var j1=(Bm(hf[Af-1]+" "+hf[Af])-Bm(hf[Af]))*hc+lN;Af==hf.length-1?Q.push([hf[Af],j1,0]):Q.push([hf[Af]+" ",j1,0]),Rg-=j1}}else Q.push([lr[ui],Qc,Uc]);Q.push(["",Rg,0])}else{if(Kr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Q=[],Kt=lr.length,bn=bn!==0?bn:E1,ui=0;ui<Kt;ui++){Uc=ui===0?yd(rt):-wd,Qc=ui===0?po(Ce):0;var P1=lr[ui].split(" ").length-1,B1=P1>0?(bn-Uo[ui])/P1:0;ui<Kt-1?TA.push(S(D(B1))):TA.push(0),Q.push([lr[ui],Qc,Uc])}}}(typeof wt.R2L=="boolean"?wt.R2L:_t)===!0&&(Q=C(Q,function(pa,$a,di){return[pa.split("").reverse().join(""),$a,di]})),nr={text:Q,x:Ce,y:rt,options:wt,mutex:{pdfEscape:Ot,activeFontKey:lt,fonts:Ae,activeFontSize:Re}},dt.publish("postProcessText",nr),Q=nr.text,ks=nr.mutex.isHex||!1;var T1=Ae[lt].encoding;T1!=="WinAnsiEncoding"&&T1!=="StandardEncoding"||(Q=C(Q,function(pa,$a,di){return[_u(pa),$a,di]})),lr=Eu(Q),Q=[];for(var OA,DA,RA,Tm=Array.isArray(lr[0])?1:0,MA="",km=function(pa,$a,di){var Vi="";return di instanceof Ne?(di=typeof wt.angle=="number"?mt(di,new Ne(1,0,0,1,pa,$a)):mt(new Ne(1,0,0,1,pa,$a),di),w===b&&(di=mt(new Ne(1,0,0,-1,0,0),di)),Vi=di.join(" ")+` Tm
`):Vi=S(pa)+" "+S($a)+` Td
`,Vi},Su=0;Su<lr.length;Su++){switch(MA="",Tm){case 1:RA=(ks?"<":"(")+lr[Su][0]+(ks?">":")"),OA=parseFloat(lr[Su][1]),DA=parseFloat(lr[Su][2]);break;case 0:RA=(ks?"<":"(")+lr[Su]+(ks?">":")"),OA=po(Ce),DA=yd(rt)}TA!==void 0&&TA[Su]!==void 0&&(MA=TA[Su]+` Tw
`),Su===0?Q.push(MA+km(OA,DA,Ts)+RA):Tm===0?Q.push(MA+RA):Tm===1&&Q.push(MA+km(OA,DA,Ts)+RA)}Q=Tm===0?Q.join(` Tj
T* `):Q.join(` Tj
`),Q+=` Tj
`;var mf=`BT
/`;return mf+=lt+" "+Re+` Tf
`,mf+=S(Re*Fs)+` TL
`,mf+=Mc+`
`,mf+=Js,mf+=Q,te(mf+="ET"),A[lt]=!0,ba};var Yt=h.__private__.clip=h.clip=function(Q){return te(Q==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Yt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return te("n"),this};var Xt=h.__private__.isValidStyle=function(Q){var Ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Q)!==-1&&(Ce=!0),Ce};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(Q){return Xt(Q)&&(u=Q),this};var br=h.__private__.getStyle=h.getStyle=function(Q){var Ce=u;switch(Q){case"D":case"S":Ce="S";break;case"F":Ce="f";break;case"FD":case"DF":Ce="B";break;case"f":case"f*":case"B":case"B*":Ce=Q}return Ce},zt=h.close=function(){return te("h"),this};h.stroke=function(){return te("S"),this},h.fill=function(Q){return hr("f",Q),this},h.fillEvenOdd=function(Q){return hr("f*",Q),this},h.fillStroke=function(Q){return hr("B",Q),this},h.fillStrokeEvenOdd=function(Q){return hr("B*",Q),this};var hr=function(Q,Ce){Ba(Ce)==="object"?Dn(Ce,Q):te(Q)},rn=function(Q){Q===null||w===b&&Q===void 0||(Q=br(Q),te(Q))};function Ya(Q,Ce,rt,wt,Tt){var nr=new dp(Ce||this.boundingBox,rt||this.xStep,wt||this.yStep,this.gState,Tt||this.matrix);nr.stream=this.stream;var lr=Q+"$$"+this.cloneIndex+++"$$";return Ie(lr,nr),nr}var Dn=function(Q,Ce){var rt=he[Q.key],wt=At[rt];if(wt instanceof w0)te("q"),te(Va(Ce)),wt.gState&&h.setGState(wt.gState),te(Q.matrix.toString()+" cm"),te("/"+rt+" sh"),te("Q");else if(wt instanceof dp){var Tt=new Ne(1,0,0,-1,0,Cu());Q.matrix&&(Tt=Tt.multiply(Q.matrix||W),rt=Ya.call(wt,Q.key,Q.boundingBox,Q.xStep,Q.yStep,Tt).id),te("q"),te("/Pattern cs"),te("/"+rt+" scn"),wt.gState&&h.setGState(wt.gState),te(Ce),te("Q")}},Va=function(Q){switch(Q){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Lo=h.moveTo=function(Q,Ce){return te(S(D(Q))+" "+S(Z(Ce))+" m"),this},Qi=h.lineTo=function(Q,Ce){return te(S(D(Q))+" "+S(Z(Ce))+" l"),this},ya=h.curveTo=function(Q,Ce,rt,wt,Tt,nr){return te([S(D(Q)),S(Z(Ce)),S(D(rt)),S(Z(wt)),S(D(Tt)),S(Z(nr)),"c"].join(" ")),this};h.__private__.line=h.line=function(Q,Ce,rt,wt,Tt){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||isNaN(wt)||!Xt(Tt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[rt-Q,wt-Ce]],Q,Ce,[1,1],Tt||"S"):this.lines([[rt-Q,wt-Ce]],Q,Ce,[1,1]).stroke()},h.__private__.lines=h.lines=function(Q,Ce,rt,wt,Tt,nr){var lr,Mr,Kr,fn,bn,Vn,ua,Ts,ba,Ys,ks,Js;if(typeof Q=="number"&&(Js=rt,rt=Ce,Ce=Q,Q=Js),wt=wt||[1,1],nr=nr||!1,isNaN(Ce)||isNaN(rt)||!Array.isArray(Q)||!Array.isArray(wt)||!Xt(Tt)||typeof nr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lo(Ce,rt),lr=wt[0],Mr=wt[1],fn=Q.length,Ys=Ce,ks=rt,Kr=0;Kr<fn;Kr++)(bn=Q[Kr]).length===2?(Ys=bn[0]*lr+Ys,ks=bn[1]*Mr+ks,Qi(Ys,ks)):(Vn=bn[0]*lr+Ys,ua=bn[1]*Mr+ks,Ts=bn[2]*lr+Ys,ba=bn[3]*Mr+ks,Ys=bn[4]*lr+Ys,ks=bn[5]*Mr+ks,ya(Vn,ua,Ts,ba,Ys,ks));return nr&&zt(),rn(Tt),this},h.path=function(Q){for(var Ce=0;Ce<Q.length;Ce++){var rt=Q[Ce],wt=rt.c;switch(rt.op){case"m":Lo(wt[0],wt[1]);break;case"l":Qi(wt[0],wt[1]);break;case"c":ya.apply(this,wt);break;case"h":zt()}}return this},h.__private__.rect=h.rect=function(Q,Ce,rt,wt,Tt){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||isNaN(wt)||!Xt(Tt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(wt=-wt),te([S(D(Q)),S(Z(Ce)),S(D(rt)),S(D(wt)),"re"].join(" ")),rn(Tt),this},h.__private__.triangle=h.triangle=function(Q,Ce,rt,wt,Tt,nr,lr){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||isNaN(wt)||isNaN(Tt)||isNaN(nr)||!Xt(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[rt-Q,wt-Ce],[Tt-rt,nr-wt],[Q-Tt,Ce-nr]],Q,Ce,[1,1],lr,!0),this},h.__private__.roundedRect=h.roundedRect=function(Q,Ce,rt,wt,Tt,nr,lr){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||isNaN(wt)||isNaN(Tt)||isNaN(nr)||!Xt(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mr=4/3*(Math.SQRT2-1);return Tt=Math.min(Tt,.5*rt),nr=Math.min(nr,.5*wt),this.lines([[rt-2*Tt,0],[Tt*Mr,0,Tt,nr-nr*Mr,Tt,nr],[0,wt-2*nr],[0,nr*Mr,-Tt*Mr,nr,-Tt,nr],[2*Tt-rt,0],[-Tt*Mr,0,-Tt,-nr*Mr,-Tt,-nr],[0,2*nr-wt],[0,-nr*Mr,Tt*Mr,-nr,Tt,-nr]],Q+Tt,Ce,[1,1],lr,!0),this},h.__private__.ellipse=h.ellipse=function(Q,Ce,rt,wt,Tt){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||isNaN(wt)||!Xt(Tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var nr=4/3*(Math.SQRT2-1)*rt,lr=4/3*(Math.SQRT2-1)*wt;return Lo(Q+rt,Ce),ya(Q+rt,Ce-lr,Q+nr,Ce-wt,Q,Ce-wt),ya(Q-nr,Ce-wt,Q-rt,Ce-lr,Q-rt,Ce),ya(Q-rt,Ce+lr,Q-nr,Ce+wt,Q,Ce+wt),ya(Q+nr,Ce+wt,Q+rt,Ce+lr,Q+rt,Ce),rn(Tt),this},h.__private__.circle=h.circle=function(Q,Ce,rt,wt){if(isNaN(Q)||isNaN(Ce)||isNaN(rt)||!Xt(wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Q,Ce,rt,rt,wt)},h.setFont=function(Q,Ce,rt){return rt&&(Ce=_(Ce,rt)),lt=Or(Q,Ce,{disableWarning:!1}),this};var Ha=h.__private__.getFont=h.getFont=function(){return Ae[Or.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var Q,Ce,rt={};for(Q in Ye)if(Ye.hasOwnProperty(Q))for(Ce in rt[Q]=[],Ye[Q])Ye[Q].hasOwnProperty(Ce)&&rt[Q].push(Ce);return rt},h.addFont=function(Q,Ce,rt,wt,Tt){var nr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&nr.indexOf(arguments[3])!==-1?Tt=arguments[3]:arguments[3]&&nr.indexOf(arguments[3])==-1&&(rt=_(rt,wt)),pr.call(this,Q,Ce,rt,Tt=Tt||"Identity-H")};var Rc,vd=t.lineWidth||.200025,Fg=h.__private__.getLineWidth=h.getLineWidth=function(){return vd},dn=h.__private__.setLineWidth=h.setLineWidth=function(Q){return vd=Q,te(S(D(Q))+" w"),this};h.__private__.setLineDash=Lr.API.setLineDash=Lr.API.setLineDashPattern=function(Q,Ce){if(Q=Q||[],Ce=Ce||0,isNaN(Ce)||!Array.isArray(Q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Q=Q.map(function(rt){return S(D(rt))}).join(" "),Ce=S(D(Ce)),te("["+Q+"] "+Ce+" d"),this};var w1=h.__private__.getLineHeight=h.getLineHeight=function(){return Re*Rc};h.__private__.getLineHeight=h.getLineHeight=function(){return Re*Rc};var N1=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(Q){return typeof(Q=Q||1.15)=="number"&&(Rc=Q),this},C1=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Rc};N1(t.lineHeight);var po=h.__private__.getHorizontalCoordinate=function(Q){return D(Q)},yd=h.__private__.getVerticalCoordinate=function(Q){return w===b?Q:Se[G].mediaBox.topRightY-Se[G].mediaBox.bottomLeftY-D(Q)},_1=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(Q){return S(po(Q))},IA=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(Q){return S(yd(Q))},bd=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ee(bd)},h.__private__.setStrokeColor=h.setDrawColor=function(Q,Ce,rt,wt){return bd=se({ch1:Q,ch2:Ce,ch3:rt,ch4:wt,pdfColorType:"draw",precision:2}),te(bd),this};var jA=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ee(jA)},h.__private__.setFillColor=h.setFillColor=function(Q,Ce,rt,wt){return jA=se({ch1:Q,ch2:Ce,ch3:rt,ch4:wt,pdfColorType:"fill",precision:2}),te(jA),this};var Mc=t.textColor||"0 g",eh=h.__private__.getTextColor=h.getTextColor=function(){return ee(Mc)};h.__private__.setTextColor=h.setTextColor=function(Q,Ce,rt,wt){return Mc=se({ch1:Q,ch2:Ce,ch3:rt,ch4:wt,pdfColorType:"text",precision:3}),this};var bu=t.charSpace,Sm=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(bu||0)};h.__private__.setCharSpace=h.setCharSpace=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bu=Q,this};var Da=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(Q){var Ce=h.CapJoinStyles[Q];if(Ce===void 0)throw new Error("Line cap style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Da=Ce,te(Ce+" J"),this};var Im=0;h.__private__.setLineJoin=h.setLineJoin=function(Q){var Ce=h.CapJoinStyles[Q];if(Ce===void 0)throw new Error("Line join style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Im=Ce,te(Ce+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(Q){if(Q=Q||0,isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(S(D(Q))+" M"),this},h.GState=y2,h.setGState=function(Q){(Q=typeof Q=="string"?re[oe[Q]]:Og(null,Q)).equals(Ve)||(te("/"+Q.id+" gs"),Ve=Q)};var Og=function(Q,Ce){if(!Q||!oe[Q]){var rt=!1;for(var wt in re)if(re.hasOwnProperty(wt)&&re[wt].equals(Ce)){rt=!0;break}if(rt)Ce=re[wt];else{var Tt="GS"+(Object.keys(re).length+1).toString(10);re[Tt]=Ce,Ce.id=Tt}return Q&&(oe[Q]=Ce.id),dt.publish("addGState",Ce),Ce}};h.addGState=function(Q,Ce){return Og(Q,Ce),this},h.saveGraphicsState=function(){return te("q"),yt.push({key:lt,size:Re,color:Mc}),this},h.restoreGraphicsState=function(){te("Q");var Q=yt.pop();return lt=Q.key,Re=Q.size,Mc=Q.color,Ve=null,this},h.setCurrentTransformationMatrix=function(Q){return te(Q.toString()+" cm"),this},h.comment=function(Q){return te("#"+Q),this};var wu=function(Q,Ce){var rt=Q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return rt},set:function(nr){isNaN(nr)||(rt=parseFloat(nr))}});var wt=Ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return wt},set:function(nr){isNaN(nr)||(wt=parseFloat(nr))}});var Tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Tt},set:function(nr){Tt=nr.toString()}}),this},PA=function(Q,Ce,rt,wt){wu.call(this,Q,Ce),this.type="rect";var Tt=rt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Tt},set:function(lr){isNaN(lr)||(Tt=parseFloat(lr))}});var nr=wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return nr},set:function(lr){isNaN(lr)||(nr=parseFloat(lr))}}),this},th=function(){this.page=de,this.currentPage=G,this.pages=ge.slice(0),this.pagesContext=Se.slice(0),this.x=ue,this.y=Le,this.matrix=ke,this.width=Ql(G),this.height=Dg(G),this.outputDestination=Ue,this.id="",this.objectNumber=-1};th.prototype.restore=function(){de=this.page,G=this.currentPage,Se=this.pagesContext,ge=this.pages,ue=this.x,Le=this.y,ke=this.matrix,jm(G,this.width),Vl(G,this.height),Ue=this.outputDestination};var df=function(Q,Ce,rt,wt,Tt){et.push(new th),de=G=0,ge=[],ue=Q,Le=Ce,ke=Tt,Dt([rt,wt])};for(var ff in h.beginFormObject=function(Q,Ce,rt,wt,Tt){return df(Q,Ce,rt,wt,Tt),this},h.endFormObject=function(Q){return function(Ce){if(bt[Ce])et.pop().restore();else{var rt=new th,wt="Xo"+(Object.keys(ht).length+1).toString(10);rt.id=wt,bt[Ce]=wt,ht[wt]=rt,dt.publish("addFormObject",rt),et.pop().restore()}}(Q),this},h.doFormObject=function(Q,Ce){var rt=ht[bt[Q]];return te("q"),te(Ce.toString()+" cm"),te("/"+rt.id+" Do"),te("Q"),this},h.getFormObject=function(Q){var Ce=ht[bt[Q]];return{x:Ce.x,y:Ce.y,width:Ce.width,height:Ce.height,matrix:Ce.matrix}},h.save=function(Q,Ce){return Q=Q||"generated.pdf",(Ce=Ce||{}).returnPromise=Ce.returnPromise||!1,Ce.returnPromise===!1?(zm(_r(Nt()),Q),typeof zm.unload=="function"&&vn.setTimeout&&setTimeout(zm.unload,911),this):new Promise(function(rt,wt){try{var Tt=zm(_r(Nt()),Q);typeof zm.unload=="function"&&vn.setTimeout&&setTimeout(zm.unload,911),rt(Tt)}catch(nr){wt(nr.message)}})},Lr.API)Lr.API.hasOwnProperty(ff)&&(ff==="events"&&Lr.API.events.length?function(Q,Ce){var rt,wt,Tt;for(Tt=Ce.length-1;Tt!==-1;Tt--)rt=Ce[Tt][0],wt=Ce[Tt][1],Q.subscribe.apply(Q,[rt].concat(typeof wt=="function"?[wt]:wt))}(dt,Lr.API.events):h[ff]=Lr.API[ff]);function Ql(Q){return Se[Q].mediaBox.topRightX-Se[Q].mediaBox.bottomLeftX}function jm(Q,Ce){Se[Q].mediaBox.topRightX=Ce+Se[Q].mediaBox.bottomLeftX}function Dg(Q){return Se[Q].mediaBox.topRightY-Se[Q].mediaBox.bottomLeftY}function Vl(Q,Ce){Se[Q].mediaBox.topRightY=Ce+Se[Q].mediaBox.bottomLeftY}var Nu=h.getPageWidth=function(Q){return Ql(Q=Q||G)/be},BA=h.setPageWidth=function(Q,Ce){jm(Q,Ce*be)},Cu=h.getPageHeight=function(Q){return Dg(Q=Q||G)/be},Pm=h.setPageHeight=function(Q,Ce){Vl(Q,Ce*be)};return h.internal={pdfEscape:Ot,getStyle:br,getFont:Ha,getFontSize:pt,getCharSpace:Sm,getTextColor:eh,getLineHeight:w1,getLineHeightFactor:C1,getLineWidth:Fg,write:Ee,getHorizontalCoordinate:po,getVerticalCoordinate:yd,getCoordinateString:_1,getVerticalCoordinateString:IA,collections:{},newObject:tt,newAdditionalObject:M,newObjectDeferred:ft,newObjectDeferredBegin:T,getFilters:Oe,putStream:Ke,events:dt,scaleFactor:be,pageSize:{getWidth:function(){return Nu(G)},setWidth:function(Q){BA(G,Q)},getHeight:function(){return Cu(G)},setHeight:function(Q){Pm(G,Q)}},encryptionOptions:d,encryption:Qt,getEncryptor:function(Q){return d!==null?Qt.encryptor(Q,0):function(Ce){return Ce}},output:st,getNumberOfPages:gr,get pages(){return ge},out:te,f2:P,f3:k,getPageInfo:Rt,getPageInfoByObjId:Mt,getCurrentPageInfo:qt,getPDFVersion:p,Point:wu,Rectangle:PA,Matrix:Ne,hasHotfix:St},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Nu(G)},set:function(Q){BA(G,Q)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Cu(G)},set:function(Q){Pm(G,Q)},enumerable:!0,configurable:!0}),(function(Q){for(var Ce=0,rt=we.length;Ce<rt;Ce++){var wt=pr.call(this,Q[Ce][0],Q[Ce][1],Q[Ce][2],we[Ce][3],!0);f===!1&&(A[wt]=!0);var Tt=Q[Ce][0].split("-");Pt({id:wt,fontName:Tt[0],fontStyle:Tt[1]||""})}dt.publish("addFonts",{fonts:Ae,dictionary:Ye})}).call(h,we),lt="F1",fr(a,r),dt.publish("initialized"),h}bx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},bx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},bx.prototype.processOwnerPassword=function(t,e){return Ek(_k(e).substr(0,5),t)},bx.prototype.encryptor=function(t,e){var r=_k(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Ek(r,n)}},y2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ba(t)!==Ba(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Lr.API={events:[]},Lr.version="3.0.4";var ri=Lr.API,I6=1,wg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nn=function(t){return t.toFixed(2)},YA=function(t){return t.toFixed(5)};ri.__acroform__={};var Fc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},lV=function(t){return t*I6},wf=function(t){var e=new are,r=$r.internal.getHeight(t)||0,n=$r.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Nn(n)),Number(Nn(r))],e},hje=ri.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Aje=ri.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},mje=ri.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},bi=ri.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mje(t,e-1)},wi=ri.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hje(t,e-1)},Ni=ri.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Aje(t,e-1)},pje=ri.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(Nn(c.lowerLeft_X)),Number(Nn(c.lowerLeft_Y)),Number(Nn(c.upperRight_X)),Number(Nn(c.upperRight_Y))]},gje=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Sk(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Nn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=wf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Sk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=$r.internal.getHeight(t)||0;o=o<0?-o:o;var l=$r.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,k,D){if(P+1<a.length){var Z=k+" "+a[P+1][0];return EC(Z,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=EC("3",t,s).height,A=t.multiline?o-s:(o-f)/2,h=A+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+EC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>o)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(b),I=c(j,x,s),_=b>=a.length-1;if(I&&!_){x+=" ",g=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>o)continue e;p=j}}for(var S="",E=m;E<=p;E++){var F=a[E];if(t.multiline){if(E===p){S+=F[g]+" ",g=(g+1)%F.length;continue}if(E===m){S+=F[F.length-1]+" ";continue}}S+=F[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=EC(S,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=Nn(u)+" "+Nn(h)+` Td
`,e+="("+wg(S)+`) Tj
`,e+=-Nn(u)+` 0 Td
`,h=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},EC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},xje={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vje=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},yje=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(lf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xje)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");I6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new sre,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&vje(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=pje(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=$r.createDefaultAppearanceStream(l),Ba(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=gje(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),Ba(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},nre=ri.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Ba(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+wg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},e5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+wg(n(t))+")"},Tf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tf.prototype.toString=function(){return this.objId+" 0 R"},Tf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Tf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:nre(a,this.objId,this.scope)}):a instanceof Tf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var are=function(){Tf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Fc(are,Tf);var sre=function(){Tf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wg(r(t))+")"}},set:function(r){t=r}})};Fc(sre,Tf);var lf=function t(){Tf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bi(e,3)},set:function(x){x?this.F=wi(e,3):this.F=Ni(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof wS)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+wg(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/I6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof wS||this instanceof z0))return e5(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Ji==0?e5(A,this.objId,this.scope):A},set:function(x){x=x.toString(),A=this instanceof Ji==0?x.substr(0,1)==="("?Zg(x.substr(1,x.length-2)):Zg(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Zg(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof Ji==1?"/"+x:x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ji==0?e5(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Ji==0?x.substr(0,1)==="("?Zg(x.substr(1,x.length-2)):Zg(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Zg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Ji==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,1)},set:function(x){x?this.Ff=wi(this.Ff,1):this.Ff=Ni(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,2)},set:function(x){x?this.Ff=wi(this.Ff,2):this.Ff=Ni(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,3)},set:function(x){x?this.Ff=wi(this.Ff,3):this.Ff=Ni(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Fc(lf,Tf);var wp=function(){lf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nre(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,18)},set:function(r){r?this.Ff=wi(this.Ff,18):this.Ff=Ni(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=wi(this.Ff,19):this.Ff=Ni(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,20)},set:function(r){r?(this.Ff=wi(this.Ff,20),e.sort()):this.Ff=Ni(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,22)},set:function(r){r?this.Ff=wi(this.Ff,22):this.Ff=Ni(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(r){r?this.Ff=wi(this.Ff,23):this.Ff=Ni(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,27)},set:function(r){r?this.Ff=wi(this.Ff,27):this.Ff=Ni(this.Ff,27)}}),this.hasAppearanceStream=!1};Fc(wp,lf);var Np=function(){wp.call(this),this.fontName="helvetica",this.combo=!1};Fc(Np,wp);var Cp=function(){Np.call(this),this.combo=!0};Fc(Cp,Np);var xb=function(){Cp.call(this),this.edit=!0};Fc(xb,Cp);var Ji=function(){lf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,15)},set:function(r){r?this.Ff=wi(this.Ff,15):this.Ff=Ni(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,16)},set:function(r){r?this.Ff=wi(this.Ff,16):this.Ff=Ni(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,17)},set:function(r){r?this.Ff=wi(this.Ff,17):this.Ff=Ni(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(r){r?this.Ff=wi(this.Ff,26):this.Ff=Ni(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+wg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ba(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Fc(Ji,lf);var vb=function(){Ji.call(this),this.pushButton=!0};Fc(vb,Ji);var _p=function(){Ji.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Fc(_p,Ji);var wS=function(){var t,e;lf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+wg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Ba(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$r.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fc(wS,lf),_p.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},_p.prototype.createOption=function(t){var e=new wS;return e.Parent=this,e.optionName=t,this.Kids.push(e),bje.call(this.scope,e),e};var yb=function(){Ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$r.CheckBox.createAppearanceStream()};Fc(yb,Ji);var z0=function(){lf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,13)},set:function(e){e?this.Ff=wi(this.Ff,13):this.Ff=Ni(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,21)},set:function(e){e?this.Ff=wi(this.Ff,21):this.Ff=Ni(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,23)},set:function(e){e?this.Ff=wi(this.Ff,23):this.Ff=Ni(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,24)},set:function(e){e?this.Ff=wi(this.Ff,24):this.Ff=Ni(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,25)},set:function(e){e?this.Ff=wi(this.Ff,25):this.Ff=Ni(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,26)},set:function(e){e?this.Ff=wi(this.Ff,26):this.Ff=Ni(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fc(z0,lf);var bb=function(){z0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bi(this.Ff,14)},set:function(t){t?this.Ff=wi(this.Ff,14):this.Ff=Ni(this.Ff,14)}}),this.password=!0};Fc(bb,z0);var $r={CheckBox:{createAppearanceStream:function(){return{N:{On:$r.CheckBox.YesNormal},D:{On:$r.CheckBox.YesPushDown,Off:$r.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Sk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Nn($r.internal.getWidth(t))+" "+Nn($r.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Nn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=wf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=$r.internal.getHeight(t),o=$r.internal.getWidth(t),l=Sk(t,t.caption);return a.push("1 g"),a.push("0 0 "+Nn(o)+" "+Nn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Nn(o-1)+" "+Nn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Nn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn($r.internal.getWidth(t))+" "+Nn($r.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:$r.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=$r.RadioButton.Circle.YesNormal,e.D[t]=$r.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=wf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=$r.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*$r.internal.Bezier_C).toFixed(5)),o=Number((n*$r.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=[],n=$r.internal.getWidth(t)<=$r.internal.getHeight(t)?$r.internal.getWidth(t)/4:$r.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*$r.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+YA($r.internal.getWidth(t)/2)+" "+YA($r.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:$r.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=$r.RadioButton.Cross.YesNormal,e.D[t]=$r.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=wf(t);e.scope=t.scope;var r=[],n=$r.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Nn($r.internal.getWidth(t)-2)+" "+Nn($r.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Nn(n.x1.x)+" "+Nn(n.x1.y)+" m"),r.push(Nn(n.x2.x)+" "+Nn(n.x2.y)+" l"),r.push(Nn(n.x4.x)+" "+Nn(n.x4.y)+" m"),r.push(Nn(n.x3.x)+" "+Nn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=$r.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Nn($r.internal.getWidth(t))+" "+Nn($r.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Nn($r.internal.getWidth(t)-2)+" "+Nn($r.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Nn(r.x1.x)+" "+Nn(r.x1.y)+" m"),n.push(Nn(r.x2.x)+" "+Nn(r.x2.y)+" l"),n.push(Nn(r.x4.x)+" "+Nn(r.x4.y)+" m"),n.push(Nn(r.x3.x)+" "+Nn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=wf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn($r.internal.getWidth(t))+" "+Nn($r.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};$r.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=$r.internal.getWidth(t),r=$r.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},$r.internal.getWidth=function(t){var e=0;return Ba(t)==="object"&&(e=lV(t.Rect[2])),e},$r.internal.getHeight=function(t){var e=0;return Ba(t)==="object"&&(e=lV(t.Rect[3])),e};var bje=ri.addField=function(t){if(yje(this,t),!(t instanceof lf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ri.AcroFormChoiceField=wp,ri.AcroFormListBox=Np,ri.AcroFormComboBox=Cp,ri.AcroFormEditBox=xb,ri.AcroFormButton=Ji,ri.AcroFormPushButton=vb,ri.AcroFormRadioButton=_p,ri.AcroFormCheckBox=yb,ri.AcroFormTextField=z0,ri.AcroFormPasswordField=bb,ri.AcroFormAppearance=$r,ri.AcroForm={ChoiceField:wp,ListBox:Np,ComboBox:Cp,EditBox:xb,Button:Ji,PushButton:vb,RadioButton:_p,CheckBox:yb,TextField:z0,PasswordField:bb,Appearance:$r},Lr.AcroForm={ChoiceField:wp,ListBox:Np,ComboBox:Cp,EditBox:xb,Button:Ji,PushButton:vb,RadioButton:_p,CheckBox:yb,TextField:z0,PasswordField:bb,Appearance:$r};var wje=Lr.AcroForm;function ire(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,k){var D,Z,fe,me,pe,ye=r;if((k=k||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(pe in n)for(fe=n[pe],D=0;D<fe.length;D+=1){for(me=!0,Z=0;Z<fe[D].length;Z+=1)if(fe[D][Z]!==void 0&&fe[D][Z]!==P[Z]){me=!1;break}if(me===!0){ye=pe;break}}else for(pe in n)for(fe=n[pe],D=0;D<fe.length;D+=1){for(me=!0,Z=0;Z<fe[D].length;Z+=1)if(fe[D][Z]!==void 0&&fe[D][Z]!==P.charCodeAt(Z)){me=!1;break}if(me===!0){ye=pe;break}}return ye===r&&k!==r&&(ye=k),ye},s=function P(k){for(var D=this.internal.write,Z=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var me=[];if(me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Image"}),me.push({key:"Width",value:k.width}),me.push({key:"Height",value:k.height}),k.colorSpace===x.INDEXED?me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(me.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===x.DEVICE_CMYK&&me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),me.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&me.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)&&k.transparency.length>0){for(var pe="",ye=0,ae=k.transparency.length;ye<ae;ye++)pe+=k.transparency[ye]+" "+k.transparency[ye]+" ";me.push({key:"Mask",value:"["+pe+"]"})}k.sMask!==void 0&&me.push({key:"SMask",value:k.objectId+1+" 0 R"});var je=k.filter!==void 0?["/"+k.filter]:void 0;if(Z({data:k.data,additionalKeyValues:me,alreadyAppliedFilters:je,objectId:k.objectId}),D("endobj"),"sMask"in k&&k.sMask!==void 0){var Be,O=(Be=k.sMaskBitsPerComponent)!==null&&Be!==void 0?Be:k.bitsPerComponent,G={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:k.sMask};"filter"in k&&(G.decodeParameters="/Predictor ".concat(k.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(k.width),G.filter=k.filter),P.call(this,G)}if(k.colorSpace===x.INDEXED){var z=this.internal.newObject();Z({data:S(new Uint8Array(k.palette)),objectId:z}),D("endobj")}},o=function(){var P=this.internal.collections[e+"images"];for(var k in P)s.call(this,P[k])},l=function(){var P,k=this.internal.collections[e+"images"],D=this.internal.write;for(var Z in k)D("/I"+(P=k[Z]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(P){return typeof t["process"+P.toUpperCase()]=="function"},A=function(P){return Ba(P)==="object"&&P.nodeType===1},h=function(P,k){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var D=""+P.getAttribute("src");if(D.indexOf("data:image/")===0)return sE(unescape(D).split("base64,").pop());var Z=t.loadFile(D,!0);if(Z!==void 0)return Z}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var fe;switch(k){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;default:fe="image/jpeg"}return sE(P.toDataURL(fe,1).split("base64,").pop())}},m=function(P){var k=this.internal.collections[e+"images"];if(k){for(var D in k)if(P===k[D].alias)return k[D]}},p=function(P,k,D){return P||k||(P=-96,k=-96),P<0&&(P=-1*D.width*72/P/this.internal.scaleFactor),k<0&&(k=-1*D.height*72/k/this.internal.scaleFactor),P===0&&(P=k*D.width/D.height),k===0&&(k=P*D.height/D.width),[P,k]},g=function(P,k,D,Z,fe,me){var pe=p.call(this,D,Z,fe),ye=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,je=u.call(this);if(D=pe[0],Z=pe[1],je[fe.index]=fe,me){me*=Math.PI/180;var Be=Math.cos(me),O=Math.sin(me),G=function(L){return L.toFixed(4)},z=[G(Be),G(O),G(-1*O),G(Be),0,0,"cm"]}this.internal.write("q"),me?(this.internal.write([1,"0","0",1,ye(P),ae(k+Z),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([ye(D),"0","0",ye(Z),"0","0","cm"].join(" "))):this.internal.write([ye(D),"0","0",ye(Z),ye(P),ae(k+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(P){var k,D,Z=0;if(typeof P=="string")for(D=P.length,k=0;k<D;k++)Z=(Z<<5)-Z+P.charCodeAt(k),Z|=0;else if(I(P))for(D=P.byteLength/2,k=0;k<D;k++)Z=(Z<<5)-Z+P[k],Z|=0;return Z},w=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var k=!0;return P.length===0&&(k=!1),P.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(k=!1),k},j=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var k=P.indexOf(",");return k<0?null:P.substring(0,k).trim().endsWith("base64")?P.substring(k+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(P){for(var k=P.length,D=new Uint8Array(k),Z=0;Z<k;Z++)D[Z]=P.charCodeAt(Z);return D},S=t.__addimage__.arrayBufferToBinaryString=function(P){for(var k="",D=I(P)?P:new Uint8Array(P),Z=0;Z<D.length;Z+=8192)k+=String.fromCharCode.apply(null,D.subarray(Z,Z+8192));return k};t.addImage=function(){var P,k,D,Z,fe,me,pe,ye,ae;if(typeof arguments[1]=="number"?(k=r,D=arguments[1],Z=arguments[2],fe=arguments[3],me=arguments[4],pe=arguments[5],ye=arguments[6],ae=arguments[7]):(k=arguments[1],D=arguments[2],Z=arguments[3],fe=arguments[4],me=arguments[5],pe=arguments[6],ye=arguments[7],ae=arguments[8]),Ba(P=arguments[0])==="object"&&!A(P)&&"imageData"in P){var je=P;P=je.imageData,k=je.format||k||r,D=je.x||D||0,Z=je.y||Z||0,fe=je.w||je.width||fe,me=je.h||je.height||me,pe=je.alias||pe,ye=je.compression||ye,ae=je.rotation||je.angle||ae}var Be=this.internal.getFilters();if(ye===void 0&&Be.indexOf("FlateEncode")!==-1&&(ye="SLOW"),isNaN(D)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=E.call(this,P,k,pe,ye);return g.call(this,D,Z,fe,me,O,ae),this};var E=function(P,k,D,Z){var fe,me,pe;if(typeof P=="string"&&a(P)===r){P=unescape(P);var ye=F(P,!1);(ye!==""||(ye=t.loadFile(P,!0))!==void 0)&&(P=ye)}if(A(P)&&(P=h(P,k)),k=a(P,k),!f(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((pe=D)==null||pe.length===0)&&(D=function(ae){return typeof ae=="string"||I(ae)?b(ae):I(ae.data)?b(ae.data):null}(P)),(fe=m.call(this,D))||(P instanceof Uint8Array||k==="RGBA"||(me=P,P=_(P)),fe=this["process"+k.toUpperCase()](P,d.call(this),D,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:y.NONE}(Z),me)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},F=t.__addimage__.convertBase64ToBinaryString=function(P,k){k=typeof k!="boolean"||k;var D,Z="";if(typeof P=="string"){var fe;D=(fe=j(P))!==null&&fe!==void 0?fe:P;try{Z=sE(D)}catch(me){if(k)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(P){var k,D,Z="";if(A(P)&&(P=h(P)),typeof P=="string"&&a(P)===r&&((Z=F(P,!1))===""&&(Z=t.loadFile(P)||""),P=Z),D=a(P),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(P instanceof Uint8Array||(P=_(P)),!(k=this["process"+D.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=D,k}})(Lr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Lr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Lr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,g,x){return o(p)?s(p)===!1?-1:!u(p)||!o(g)&&!o(x)||!o(x)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(x)&&u(x)?3:l(p)||!o(x)?1:2:-1},h=function(p){var g=0,x=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(g=0;g<I.length;g+=1){for(_.push(""),x=0;x<I[g].length;x+=1)b=I[g][x],w=I[g][x-1],j=I[g][x+1],o(b)?(y=A(b,w,j),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([h(g[y][0]),g[y][1],g[y][2]]):x.push([h(g[y])]);p=x}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Lr.API),Lr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Lr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,g,x=[],y=[],b=[],w={},j={},I=[],_=[],S=(A=A||{}).autoSize||!1,E=A.printHeaders!==!1,F=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,P=A.margins||Object.assign({width:this.getPageWidth()},e),k=typeof A.padding=="number"?A.padding:3,D=A.headerBackgroundColor||"#c8c8c8",Z=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=Z,this.setFontSize(F),f==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&Ba(f[0])==="object")for(x=f.map(function(je){return je.name}),y=f.map(function(je){return je.prompt||je.name||""}),b=f.map(function(je){return je.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=x=f,b=x.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<x.length;h+=1){for(w[g=x[h]]=d.map(function(je){return je[g]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,I)+k+k,I=[]}if(E){var fe={};for(h=0;h<x.length;h+=1)fe[x[h]]={},fe[x[h]].text=y[h],fe[x[h]].align=b[h];var me=l.call(this,fe,j);_=x.map(function(je){return new s(c,u,j[je],me,fe[je].text,void 0,fe[je].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var pe=f.reduce(function(je,Be){return je[Be.name]=Be.align,je},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var ye=l.call(this,d[h],j);for(p=0;p<x.length;p+=1){var ae=d[h][x[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:ae},this),o.call(this,new s(c,u,j[x[p]],ye,ae,h+2,pe[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(Lr.API);var ore={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lre=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ik=ire(lre),cre=[100,200,300,400,500,600,700,800,900],Nje=ire(cre);function t5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return ore[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Ik[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function cV(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Cje={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function fV(t){return t.trimLeft()}function _je(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Eje(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var SC,hV,AV,ex,IC,mV,pV,gV,r5=["times"];function xV(t,e,r,n,a){var s=4,o=yV;switch(a){case Lr.API.image_compression.FAST:s=1,o=vV;break;case Lr.API.image_compression.MEDIUM:s=6,o=bV;break;case Lr.API.image_compression.SLOW:s=9,o=wV}t=function(c,u,d,f){for(var A,h=c.length/u,m=new Uint8Array(c.length+h),p=[Sje,vV,yV,bV,wV],g=0;g<h;g+=1){var x=g*u,y=c.subarray(x,x+u);if(f)m.set(f(y,d,A),x+g);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,A);var I=jje(w.concat());m.set(w[I],x+g)}A=y}return m}(t,e,Math.ceil(r*n/8),o);var l=bk(t,{level:s});return Lr.API.__addimage__.arrayBufferToBinaryString(l)}function Sje(t){var e=Array.apply([],t);return e.unshift(0),e}function vV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function yV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function bV(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function wV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=Ije(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function Ije(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function jje(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function n5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return ure(t,a)>>s&o}function NV(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,s,ure(t,s)&~(l<<o)&65535|c)}function ure(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Pje(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&p||(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,S=c,E=!1;w>>7&&(E=!0,_=e,S=I,e+=3*I);var F=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:g,y:x,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:S,data_offset:F,data_length:e-F,transparent_index:A,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,D){var Z=this.frameInfo(k),fe=Z.width*Z.height,me=new Uint8Array(fe);CV(t,Z.data_offset,me,fe);var pe=Z.palette_offset,ye=Z.transparent_index;ye===null&&(ye=256);var ae=Z.width,je=r-ae,Be=ae,O=4*(Z.y*r+Z.x),G=4*((Z.y+Z.height)*r+Z.x),z=O,L=4*je;Z.interlaced===!0&&(L+=4*r*7);for(var Y=8,J=0,R=me.length;J<R;++J){var H=me[J];if(Be===0&&(Be=ae,(z+=L)>=G&&(L=4*je+4*r*(Y-1),z=O+(ae+je)*(Y<<1),Y>>=1)),H===ye)z+=4;else{var ne=t[pe+3*H],ge=t[pe+3*H+1],U=t[pe+3*H+2];D[z++]=U,D[z++]=ge,D[z++]=ne,D[z++]=255}--Be}},this.decodeAndBlitFrameRGBA=function(k,D){var Z=this.frameInfo(k),fe=Z.width*Z.height,me=new Uint8Array(fe);CV(t,Z.data_offset,me,fe);var pe=Z.palette_offset,ye=Z.transparent_index;ye===null&&(ye=256);var ae=Z.width,je=r-ae,Be=ae,O=4*(Z.y*r+Z.x),G=4*((Z.y+Z.height)*r+Z.x),z=O,L=4*je;Z.interlaced===!0&&(L+=4*r*7);for(var Y=8,J=0,R=me.length;J<R;++J){var H=me[J];if(Be===0&&(Be=ae,(z+=L)>=G&&(L=4*je+4*r*(Y-1),z=O+(ae+je)*(Y<<1),Y>>=1)),H===ye)z+=4;else{var ne=t[pe+3*H],ge=t[pe+3*H+1],U=t[pe+3*H+2];D[z++]=ne,D[z++]=ge,D[z++]=U,D[z++]=255}--Be}}}function CV(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===o)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(A+y+(x!==g?1:0)>n)return void qa.log("Warning, gif stream longer than expected.");r[A++]=w;var j=A+=y;for(x!==g&&(r[A++]=w),b=x;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&qa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function a5(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function me(O,G){for(var z=0,L=0,Y=new Array,J=1;J<=16;J++){for(var R=1;R<=O[J];R++)Y[G[L]]=[],Y[G[L]][0]=z,Y[G[L]][1]=J,L++,z++;z*=2}return Y}function pe(O){for(var G=O[0],z=O[1]-1;z>=0;)G&1<<z&&(g|=1<<x),z--,--x<0&&(g==255?(ye(255),ye(0)):ye(g),x=7,g=0)}function ye(O){p.push(O)}function ae(O){ye(O>>8&255),ye(255&O)}function je(O,G,z,L,Y){for(var J,R=Y[0],H=Y[240],ne=function(Re,We){var pt,_t,He,gt,ut,vt,Pe,ct,lt,be,ue=0;for(lt=0;lt<8;++lt){pt=Re[ue],_t=Re[ue+1],He=Re[ue+2],gt=Re[ue+3],ut=Re[ue+4],vt=Re[ue+5],Pe=Re[ue+6];var Le=pt+(ct=Re[ue+7]),ke=pt-ct,Ae=_t+Pe,Ye=_t-Pe,yt=He+vt,At=He-vt,he=gt+ut,re=gt-ut,oe=Le+he,Ve=Le-he,de=Ae+yt,Se=Ae-yt;Re[ue]=oe+de,Re[ue+4]=oe-de;var dt=.707106781*(Se+Ve);Re[ue+2]=Ve+dt,Re[ue+6]=Ve-dt;var xt=.382683433*((oe=re+At)-(Se=Ye+ke)),ht=.5411961*oe+xt,bt=1.306562965*Se+xt,et=.707106781*(de=At+Ye),Ne=ke+et,mt=ke-et;Re[ue+5]=mt+ht,Re[ue+3]=mt-ht,Re[ue+1]=Ne+bt,Re[ue+7]=Ne-bt,ue+=8}for(ue=0,lt=0;lt<8;++lt){pt=Re[ue],_t=Re[ue+8],He=Re[ue+16],gt=Re[ue+24],ut=Re[ue+32],vt=Re[ue+40],Pe=Re[ue+48];var W=pt+(ct=Re[ue+56]),Ie=pt-ct,Je=_t+Pe,tt=_t-Pe,ft=He+vt,T=He-vt,M=gt+ut,V=gt-ut,q=W+M,ee=W-M,se=Je+ft,Oe=Je-ft;Re[ue]=q+se,Re[ue+32]=q-se;var Ke=.707106781*(Oe+ee);Re[ue+16]=ee+Ke,Re[ue+48]=ee-Ke;var ot=.382683433*((q=V+T)-(Oe=tt+Ie)),Fe=.5411961*q+ot,Xe=1.306562965*Oe+ot,xe=.707106781*(se=T+tt),Ge=Ie+xe,qe=Ie-xe;Re[ue+40]=qe+Fe,Re[ue+24]=qe-Fe,Re[ue+8]=Ge+Xe,Re[ue+56]=Ge-Xe,ue++}for(lt=0;lt<64;++lt)be=Re[lt]*We[lt],h[lt]=be>0?be+.5|0:be-.5|0;return h}(O,G),ge=0;ge<64;++ge)m[_[ge]]=ne[ge];var U=m[0]-z;z=m[0],U==0?pe(L[0]):(pe(L[A[J=32767+U]]),pe(f[J]));for(var Ue=63;Ue>0&&m[Ue]==0;)Ue--;if(Ue==0)return pe(R),z;for(var ie,te=1;te<=Ue;){for(var Ee=te;m[te]==0&&te<=Ue;)++te;var ce=te-Ee;if(ce>=16){ie=ce>>4;for(var we=1;we<=ie;++we)pe(H);ce&=15}J=32767+m[te],pe(Y[(ce<<4)+A[J]]),pe(f[J]),te++}return Ue!=63&&pe(R),z}function Be(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(G){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],L=0;L<64;L++){var Y=o((z[L]*G+50)/100);Y=Math.min(Math.max(Y,1),255),l[_[L]]=Y}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var H=o((J[R]*G+50)/100);H=Math.min(Math.max(H,1),255),c[_[R]]=H}for(var ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,U=0;U<8;U++)for(var Ue=0;Ue<8;Ue++)u[ge]=1/(l[_[ge]]*ne[U]*ne[Ue]*8),d[ge]=1/(c[_[ge]]*ne[U]*ne[Ue]*8),ge++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,G){G&&Be(G),p=new Array,g=0,x=7,ae(65496),ae(65504),ae(16),ye(74),ye(70),ye(73),ye(70),ye(0),ye(1),ye(1),ye(0),ae(1),ae(1),ye(0),ye(0),function(){ae(65499),ae(132),ye(0);for(var _t=0;_t<64;_t++)ye(l[_t]);ye(1);for(var He=0;He<64;He++)ye(c[He])}(),function(_t,He){ae(65472),ae(17),ye(8),ae(He),ae(_t),ye(3),ye(1),ye(17),ye(0),ye(2),ye(17),ye(1),ye(3),ye(17),ye(1)}(O.width,O.height),function(){ae(65476),ae(418),ye(0);for(var _t=0;_t<16;_t++)ye(S[_t+1]);for(var He=0;He<=11;He++)ye(E[He]);ye(16);for(var gt=0;gt<16;gt++)ye(F[gt+1]);for(var ut=0;ut<=161;ut++)ye(P[ut]);ye(1);for(var vt=0;vt<16;vt++)ye(k[vt+1]);for(var Pe=0;Pe<=11;Pe++)ye(D[Pe]);ye(17);for(var ct=0;ct<16;ct++)ye(Z[ct+1]);for(var lt=0;lt<=161;lt++)ye(fe[lt])}(),ae(65498),ae(12),ye(3),ye(1),ye(0),ye(2),ye(17),ye(3),ye(17),ye(0),ye(63),ye(0);var z=0,L=0,Y=0;g=0,x=7,this.encode.displayName="_encode_";for(var J,R,H,ne,ge,U,Ue,ie,te,Ee=O.data,ce=O.width,we=O.height,Re=4*ce,We=0;We<we;){for(J=0;J<Re;){for(ge=Re*We+J,Ue=-1,ie=0,te=0;te<64;te++)U=ge+(ie=te>>3)*Re+(Ue=4*(7&te)),We+ie>=we&&(U-=Re*(We+1+ie-we)),J+Ue>=Re&&(U-=J+Ue-Re+4),R=Ee[U++],H=Ee[U++],ne=Ee[U++],y[te]=(I[R]+I[H+256|0]+I[ne+512|0]>>16)-128,b[te]=(I[R+768|0]+I[H+1024|0]+I[ne+1280|0]>>16)-128,w[te]=(I[R+1280|0]+I[H+1536|0]+I[ne+1792|0]>>16)-128;z=je(y,u,z,e,n),L=je(b,d,L,r,a),Y=je(w,d,Y,r,a),J+=32}We+=8}if(x>=0){var pt=[];pt[1]=x+1,pt[0]=(1<<x+1)-1,pe(pt)}return ae(65497),new Uint8Array(p)},t=t||50,function(){for(var O=String.fromCharCode,G=0;G<256;G++)j[G]=O(G)}(),e=me(S,E),r=me(k,D),n=me(F,P),a=me(Z,fe),function(){for(var O=1,G=2,z=1;z<=15;z++){for(var L=O;L<G;L++)A[32767+L]=z,f[32767+L]=[],f[32767+L][1]=z,f[32767+L][0]=L;for(var Y=-(G-1);Y<=-O;Y++)A[32767+Y]=z,f[32767+Y]=[],f[32767+Y][1]=z,f[32767+Y][0]=G-1+Y;O<<=1,G<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),Be(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Sd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _V(t){function e(E){if(!E)throw Error("assert :P")}function r(E,F,P){for(var k=0;4>k;k++)if(E[F+k]!=P.charCodeAt(k))return!0;return!1}function n(E,F,P,k,D){for(var Z=0;Z<D;Z++)E[F+Z]=P[k+Z]}function a(E,F,P,k){for(var D=0;D<k;D++)E[F+D]=P}function s(E){return new Int32Array(E)}function o(E,F){for(var P=[],k=0;k<E;k++)P.push(new F);return P}function l(E,F){var P=[];return function k(D,Z,fe){for(var me=fe[Z],pe=0;pe<me&&(D.push(fe.length>Z+1?[]:new F),!(fe.length<Z+1));pe++)k(D[pe],Z+1,fe)}(P,0,E),P}var c=function(){var E=this;function F(N,B){for(var K=1<<B-1>>>0;N&K;)K>>>=1;return K?(N&K-1)+K:N}function P(N,B,K,le,_e){e(!(le%K));do N[B+(le-=K)]=_e;while(0<le)}function k(N,B,K,le,_e){if(e(2328>=_e),512>=_e)var De=s(512);else if((De=s(_e))==null)return 0;return function(Me,Qe,ze,nt,It,Ht){var at,jt,Ft=Qe,er=1<<ze,Vt=s(16),ar=s(16);for(e(It!=0),e(nt!=null),e(Me!=null),e(0<ze),jt=0;jt<It;++jt){if(15<nt[jt])return 0;++Vt[nt[jt]]}if(Vt[0]==It)return 0;for(ar[1]=0,at=1;15>at;++at){if(Vt[at]>1<<at)return 0;ar[at+1]=ar[at]+Vt[at]}for(jt=0;jt<It;++jt)at=nt[jt],0<nt[jt]&&(Ht[ar[at]++]=jt);if(ar[15]==1)return(nt=new D).g=0,nt.value=Ht[0],P(Me,Ft,1,er,nt),er;var sr,mr=-1,dr=er-1,Zr=0,Hr=1,Sn=1,zr=1<<ze;for(jt=0,at=1,It=2;at<=ze;++at,It<<=1){if(Hr+=Sn<<=1,0>(Sn-=Vt[at]))return 0;for(;0<Vt[at];--Vt[at])(nt=new D).g=at,nt.value=Ht[jt++],P(Me,Ft+Zr,It,zr,nt),Zr=F(Zr,at)}for(at=ze+1,It=2;15>=at;++at,It<<=1){if(Hr+=Sn<<=1,0>(Sn-=Vt[at]))return 0;for(;0<Vt[at];--Vt[at]){if(nt=new D,(Zr&dr)!=mr){for(Ft+=zr,sr=1<<(mr=at)-ze;15>mr&&!(0>=(sr-=Vt[mr]));)++mr,sr<<=1;er+=zr=1<<(sr=mr-ze),Me[Qe+(mr=Zr&dr)].g=sr+ze,Me[Qe+mr].value=Ft-Qe-mr}nt.g=at-ze,nt.value=Ht[jt++],P(Me,Ft+(Zr>>ze),It,zr,nt),Zr=F(Zr,at)}}return Hr!=2*ar[15]-1?0:er}(N,B,K,le,_e,De)}function D(){this.value=this.g=0}function Z(){this.value=this.g=0}function fe(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bm,Z)}function me(N,B,K,le){e(N!=null),e(B!=null),e(2147483648>le),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=B,N.pa=K,N.Jd=B,N.Yc=K+le,N.Zc=4<=le?K+le-4+1:K,R(N)}function pe(N,B){for(var K=0;0<B--;)K|=ne(N,128)<<B;return K}function ye(N,B){var K=pe(N,B);return H(N)?-K:K}function ae(N,B,K,le){var _e,De=0;for(e(N!=null),e(B!=null),e(4294967288>le),N.Sb=le,N.Ra=0,N.u=0,N.h=0,4<le&&(le=4),_e=0;_e<le;++_e)De+=B[K+_e]<<8*_e;N.Ra=De,N.bb=le,N.oa=B,N.pa=K}function je(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<kA-8>>>0,++N.bb,N.u-=8;L(N)&&(N.h=1,N.u=0)}function Be(N,B){if(e(0<=B),!N.h&&B<=Qc){var K=z(N)&Uc[B];return N.u+=B,je(N),K}return N.h=1,N.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(N){return N.Ra>>>(N.u&kA-1)>>>0}function L(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>kA}function Y(N,B){N.u=B,N.h=L(N)}function J(N){N.u>=rh&&(e(N.u>=rh),je(N))}function R(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function H(N){return pe(N,1)}function ne(N,B){var K=N.Ca;0>N.b&&R(N);var le=N.b,_e=K*B>>>8,De=(N.I>>>le>_e)+0;for(De?(K-=_e,N.I-=_e+1<<le>>>0):K=_e+1,le=K,_e=0;256<=le;)_e+=8,le>>=8;return le=7^_e+FA[le],N.b-=le,N.Ca=(K<<le)-1,De}function ge(N,B,K){N[B+0]=K>>24&255,N[B+1]=K>>16&255,N[B+2]=K>>8&255,N[B+3]=255&K}function U(N,B){return N[B+0]|N[B+1]<<8}function Ue(N,B){return U(N,B)|N[B+2]<<16}function ie(N,B){return U(N,B)|U(N,B+2)<<16}function te(N,B){var K=1<<B;return e(N!=null),e(0<B),N.X=s(K),N.X==null?0:(N.Mb=32-B,N.Xa=B,1)}function Ee(N,B){e(N!=null),e(B!=null),e(N.Xa==B.Xa),n(B.X,0,N.X,0,1<<B.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function we(N,B,K,le){e(K!=null),e(le!=null);var _e=K[0],De=le[0];return _e==0&&(_e=(N*De+B/2)/B),De==0&&(De=(B*_e+N/2)/N),0>=_e||0>=De?0:(K[0]=_e,le[0]=De,1)}function Re(N,B){return N+(1<<B)-1>>>B}function We(N,B){return((4278255360&N)+(4278255360&B)>>>0&4278255360)+((16711935&N)+(16711935&B)>>>0&16711935)>>>0}function pt(N,B){E[B]=function(K,le,_e,De,Me,Qe,ze){var nt;for(nt=0;nt<Me;++nt){var It=E[N](Qe[ze+nt-1],_e,De+nt);Qe[ze+nt]=We(K[le+nt],It)}}}function _t(){this.ud=this.hd=this.jd=0}function He(N,B){return((4278124286&(N^B))>>>1)+(N&B)>>>0}function gt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function ut(N,B){return gt(N+(N-B+.5>>1))}function vt(N,B,K){return Math.abs(B-K)-Math.abs(N-K)}function Pe(N,B,K,le,_e,De,Me){for(le=De[Me-1],K=0;K<_e;++K)De[Me+K]=le=We(N[B+K],le)}function ct(N,B,K,le,_e){var De;for(De=0;De<K;++De){var Me=N[B+De],Qe=Me>>8&255,ze=16711935&(ze=(ze=16711935&Me)+((Qe<<16)+Qe));le[_e+De]=(4278255360&Me)+ze>>>0}}function lt(N,B){B.jd=255&N,B.hd=N>>8&255,B.ud=N>>16&255}function be(N,B,K,le,_e,De){var Me;for(Me=0;Me<le;++Me){var Qe=B[K+Me],ze=Qe>>>8,nt=Qe,It=255&(It=(It=Qe>>>16)+((N.jd<<24>>24)*(ze<<24>>24)>>>5));nt=255&(nt=(nt+=(N.hd<<24>>24)*(ze<<24>>24)>>>5)+((N.ud<<24>>24)*(It<<24>>24)>>>5)),_e[De+Me]=(4278255360&Qe)+(It<<16)+nt}}function ue(N,B,K,le,_e){E[B]=function(De,Me,Qe,ze,nt,It,Ht,at,jt){for(ze=Ht;ze<at;++ze)for(Ht=0;Ht<jt;++Ht)nt[It++]=_e(Qe[le(De[Me++])])},E[N]=function(De,Me,Qe,ze,nt,It,Ht){var at=8>>De.b,jt=De.Ea,Ft=De.K[0],er=De.w;if(8>at)for(De=(1<<De.b)-1,er=(1<<at)-1;Me<Qe;++Me){var Vt,ar=0;for(Vt=0;Vt<jt;++Vt)Vt&De||(ar=le(ze[nt++])),It[Ht++]=_e(Ft[ar&er]),ar>>=at}else E["VP8LMapColor"+K](ze,nt,Ft,er,It,Ht,Me,Qe,jt)}}function Le(N,B,K,le,_e){for(K=B+K;B<K;){var De=N[B++];le[_e++]=De>>16&255,le[_e++]=De>>8&255,le[_e++]=255&De}}function ke(N,B,K,le,_e){for(K=B+K;B<K;){var De=N[B++];le[_e++]=De>>16&255,le[_e++]=De>>8&255,le[_e++]=255&De,le[_e++]=De>>24&255}}function Ae(N,B,K,le,_e){for(K=B+K;B<K;){var De=(Me=N[B++])>>16&240|Me>>12&15,Me=240&Me|Me>>28&15;le[_e++]=De,le[_e++]=Me}}function Ye(N,B,K,le,_e){for(K=B+K;B<K;){var De=(Me=N[B++])>>16&248|Me>>13&7,Me=Me>>5&224|Me>>3&31;le[_e++]=De,le[_e++]=Me}}function yt(N,B,K,le,_e){for(K=B+K;B<K;){var De=N[B++];le[_e++]=255&De,le[_e++]=De>>8&255,le[_e++]=De>>16&255}}function At(N,B,K,le,_e,De){if(De==0)for(K=B+K;B<K;)ge(le,((De=N[B++])[0]>>24|De[1]>>8&65280|De[2]<<8&16711680|De[3]<<24)>>>0),_e+=32;else n(le,_e,N,B,K)}function he(N,B){E[B][0]=E[N+"0"],E[B][1]=E[N+"1"],E[B][2]=E[N+"2"],E[B][3]=E[N+"3"],E[B][4]=E[N+"4"],E[B][5]=E[N+"5"],E[B][6]=E[N+"6"],E[B][7]=E[N+"7"],E[B][8]=E[N+"8"],E[B][9]=E[N+"9"],E[B][10]=E[N+"10"],E[B][11]=E[N+"11"],E[B][12]=E[N+"12"],E[B][13]=E[N+"13"],E[B][14]=E[N+"0"],E[B][15]=E[N+"0"]}function re(N){return N==gP||N==xP||N==mN||N==vP}function oe(){this.eb=[],this.size=this.A=this.fb=0}function Ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function de(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new oe,this.f.kb=new Ve,this.sd=null}function Se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function ht(N,B){var K=N.T,le=B.ba.f.RGBA,_e=le.eb,De=le.fb+N.ka*le.A,Me=ju[B.ba.S],Qe=N.y,ze=N.O,nt=N.f,It=N.N,Ht=N.ea,at=N.W,jt=B.cc,Ft=B.dc,er=B.Mc,Vt=B.Nc,ar=N.ka,sr=N.ka+N.T,mr=N.U,dr=mr+1>>1;for(ar==0?Me(Qe,ze,null,null,nt,It,Ht,at,nt,It,Ht,at,_e,De,null,null,mr):(Me(B.ec,B.fc,Qe,ze,jt,Ft,er,Vt,nt,It,Ht,at,_e,De-le.A,_e,De,mr),++K);ar+2<sr;ar+=2)jt=nt,Ft=It,er=Ht,Vt=at,It+=N.Rc,at+=N.Rc,De+=2*le.A,Me(Qe,(ze+=2*N.fa)-N.fa,Qe,ze,jt,Ft,er,Vt,nt,It,Ht,at,_e,De-le.A,_e,De,mr);return ze+=N.fa,N.j+sr<N.o?(n(B.ec,B.fc,Qe,ze,mr),n(B.cc,B.dc,nt,It,dr),n(B.Mc,B.Nc,Ht,at,dr),K--):1&sr||Me(Qe,ze,null,null,nt,It,Ht,at,nt,It,Ht,at,_e,De+le.A,null,null,mr),K}function bt(N,B,K){var le=N.F,_e=[N.J];if(le!=null){var De=N.U,Me=B.ba.S,Qe=Me==AN||Me==mN;B=B.ba.f.RGBA;var ze=[0],nt=N.ka;ze[0]=N.T,N.Kb&&(nt==0?--ze[0]:(--nt,_e[0]-=N.width),N.j+N.ka+N.T==N.o&&(ze[0]=N.o-N.j-nt));var It=B.eb;nt=B.fb+nt*B.A,N=TM(le,_e[0],N.width,De,ze,It,nt+(Qe?0:3),B.A),e(K==ze),N&&re(Me)&&F1(It,nt,Qe,De,ze,B.A)}return 0}function et(N){var B=N.ma,K=B.ba.S,le=11>K,_e=K==fN||K==hN||K==AN||K==pP||K==12||re(K);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!E1(B.Oa,N,_e?11:12))return 0;if(_e&&re(K)&&Eu(),N.da)alert("todo:use_scaling");else{if(le){if(B.Ib=xt,N.Kb){if(K=N.U+1>>1,B.memory=s(N.U+2*K),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+N.U,B.Mc=B.cc,B.Nc=B.dc+K,B.Ib=ht,Eu()}}else alert("todo:EmitYUV");_e&&(B.Jb=bt,le&&hc())}if(le&&!zM){for(N=0;256>N;++N)ede[N]=89858*(N-128)+gN>>pN,nde[N]=-22014*(N-128)+gN,rde[N]=-45773*(N-128),tde[N]=113618*(N-128)+gN>>pN;for(N=D1;N<wP;++N)B=76283*(N-16)+gN>>pN,ade[N-D1]=Pr(B,255),sde[N-D1]=Pr(B+8>>4,15);zM=1}return 1}function Ne(N){var B=N.ma,K=N.U,le=N.T;return e(!(1&N.ka)),0>=K||0>=le?0:(K=B.Ib(N,B),B.Jb!=null&&B.Jb(N,B,K),B.Dc+=K,1)}function mt(N){N.ma.memory=null}function W(N,B,K,le){return Be(N,8)!=47?0:(B[0]=Be(N,14)+1,K[0]=Be(N,14)+1,le[0]=Be(N,1),Be(N,3)!=0?0:!N.h)}function Ie(N,B){if(4>N)return N+1;var K=N-2>>1;return(2+(1&N)<<K)+Be(B,K)+1}function Je(N,B){return 120<B?B-120:1<=(K=((K=Uue[B-1])>>4)*N+(8-(15&K)))?K:1;var K}function tt(N,B,K){var le=z(K),_e=N[B+=255&le].g-8;return 0<_e&&(Y(K,K.u+8),le=z(K),B+=N[B].value,B+=le&(1<<_e)-1),Y(K,K.u+N[B].g),N[B].value}function ft(N,B,K){return K.g+=N.g,K.value+=N.value<<B>>>0,e(8>=K.g),N.g}function T(N,B,K){var le=N.xc;return e((B=le==0?0:N.vc[N.md*(K>>le)+(B>>le)])<N.Wb),N.Ya[B]}function M(N,B,K,le){var _e=N.ab,De=N.c*B,Me=N.C;B=Me+B;var Qe=K,ze=le;for(le=N.Ta,K=N.Ua;0<_e--;){var nt=N.gc[_e],It=Me,Ht=B,at=Qe,jt=ze,Ft=(ze=le,Qe=K,nt.Ea);switch(e(It<Ht),e(Ht<=nt.nc),nt.hc){case 2:ui(at,jt,(Ht-It)*Ft,ze,Qe);break;case 0:var er=It,Vt=Ht,ar=ze,sr=Qe,mr=(zr=nt).Ea;er==0&&(I1(at,jt,null,null,1,ar,sr),Pe(at,jt+1,0,0,mr-1,ar,sr+1),jt+=mr,sr+=mr,++er);for(var dr=1<<zr.b,Zr=dr-1,Hr=Re(mr,zr.b),Sn=zr.K,zr=zr.w+(er>>zr.b)*Hr;er<Vt;){var zn=Sn,Hi=zr,In=1;for(Rg(at,jt,ar,sr-mr,1,ar,sr);In<mr;){var Wr=(In&~Zr)+dr;Wr>mr&&(Wr=mr),(0,P1[zn[Hi++]>>8&15])(at,jt+ +In,ar,sr+In-mr,Wr-In,ar,sr+In),In=Wr}jt+=mr,sr+=mr,++er&Zr||(zr+=Hr)}Ht!=nt.nc&&n(ze,Qe-Ft,ze,Qe+(Ht-It-1)*Ft,Ft);break;case 1:for(Ft=at,Vt=jt,mr=(at=nt.Ea)-(sr=at&~(ar=(jt=1<<nt.b)-1)),er=Re(at,nt.b),dr=nt.K,nt=nt.w+(It>>nt.b)*er;It<Ht;){for(Zr=dr,Hr=nt,Sn=new _t,zr=Vt+sr,zn=Vt+at;Vt<zr;)lt(Zr[Hr++],Sn),B1(Sn,Ft,Vt,jt,ze,Qe),Vt+=jt,Qe+=jt;Vt<zn&&(lt(Zr[Hr++],Sn),B1(Sn,Ft,Vt,mr,ze,Qe),Vt+=mr,Qe+=mr),++It&ar||(nt+=er)}break;case 3:if(at==ze&&jt==Qe&&0<nt.b){for(Vt=ze,at=Ft=Qe+(Ht-It)*Ft-(sr=(Ht-It)*Re(nt.Ea,nt.b)),jt=ze,ar=Qe,er=[],sr=(mr=sr)-1;0<=sr;--sr)er[sr]=jt[ar+sr];for(sr=mr-1;0<=sr;--sr)Vt[at+sr]=er[sr];lN(nt,It,Ht,ze,Ft,ze,Qe)}else lN(nt,It,Ht,at,jt,ze,Qe)}Qe=le,ze=K}ze!=K&&n(le,K,Qe,ze,De)}function V(N,B){var K=N.V,le=N.Ba+N.c*N.C,_e=B-N.C;if(e(B<=N.l.o),e(16>=_e),0<_e){var De=N.l,Me=N.Ta,Qe=N.Ua,ze=De.width;if(M(N,_e,K,le),_e=Qe=[Qe],e((K=N.C)<(le=B)),e(De.v<De.va),le>De.o&&(le=De.o),K<De.j){var nt=De.j-K;K=De.j,_e[0]+=nt*ze}if(K>=le?K=0:(_e[0]+=4*De.v,De.ka=K-De.j,De.U=De.va-De.v,De.T=le-K,K=1),K){if(Qe=Qe[0],11>(K=N.ca).S){var It=K.f.RGBA,Ht=(le=K.S,_e=De.U,De=De.T,nt=It.eb,It.A),at=De;for(It=It.fb+N.Ma*It.A;0<at--;){var jt=Me,Ft=Qe,er=_e,Vt=nt,ar=It;switch(le){case dN:T1(jt,Ft,er,Vt,ar);break;case fN:OA(jt,Ft,er,Vt,ar);break;case gP:OA(jt,Ft,er,Vt,ar),F1(Vt,ar,0,er,1,0);break;case LM:Tm(jt,Ft,er,Vt,ar);break;case hN:At(jt,Ft,er,Vt,ar,1);break;case xP:At(jt,Ft,er,Vt,ar,1),F1(Vt,ar,0,er,1,0);break;case AN:At(jt,Ft,er,Vt,ar,0);break;case mN:At(jt,Ft,er,Vt,ar,0),F1(Vt,ar,1,er,1,0);break;case pP:DA(jt,Ft,er,Vt,ar);break;case vP:DA(jt,Ft,er,Vt,ar),BM(Vt,ar,er,1,0);break;case UM:RA(jt,Ft,er,Vt,ar);break;default:e(0)}Qe+=ze,It+=Ht}N.Ma+=De}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=K.height)}}N.C=B,e(N.C<=N.i)}function q(N){var B;if(0<N.ua)return 0;for(B=0;B<N.Wb;++B){var K=N.Ya[B].G,le=N.Ya[B].H;if(0<K[1][le[1]+0].g||0<K[2][le[2]+0].g||0<K[3][le[3]+0].g)return 0}return 1}function ee(N,B,K,le,_e,De){if(N.Z!=0){var Me=N.qd,Qe=N.rd;for(e(UA[N.Z]!=null);B<K;++B)UA[N.Z](Me,Qe,le,_e,le,_e,De),Me=le,Qe=_e,_e+=De;N.qd=Me,N.rd=Qe}}function se(N,B){var K=N.l.ma,le=K.Z==0||K.Z==1?N.l.j:N.C;if(le=N.C<le?le:N.C,e(B<=N.l.o),B>le){var _e=N.l.width,De=K.ca,Me=K.tb+_e*le,Qe=N.V,ze=N.Ba+N.c*le,nt=N.gc;e(N.ab==1),e(nt[0].hc==3),Af(nt[0],le,B,Qe,ze,De,Me),ee(K,le,B,De,Me,_e)}N.C=N.Ma=B}function Oe(N,B,K,le,_e,De,Me){var Qe=N.$/le,ze=N.$%le,nt=N.m,It=N.s,Ht=K+N.$,at=Ht;_e=K+le*_e;var jt=K+le*De,Ft=280+It.ua,er=N.Pb?Qe:16777216,Vt=0<It.ua?It.Wa:null,ar=It.wc,sr=Ht<jt?T(It,ze,Qe):null;e(N.C<De),e(jt<=_e);var mr=!1;e:for(;;){for(;mr||Ht<jt;){var dr=0;if(Qe>=er){var Zr=Ht-K;e((er=N).Pb),er.wd=er.m,er.xd=Zr,0<er.s.ua&&Ee(er.s.Wa,er.s.vb),er=Qe+Vue}if(ze&ar||(sr=T(It,ze,Qe)),e(sr!=null),sr.Qb&&(B[Ht]=sr.qb,mr=!0),!mr)if(J(nt),sr.jc){dr=nt,Zr=B;var Hr=Ht,Sn=sr.pd[z(dr)&Bm-1];e(sr.jc),256>Sn.g?(Y(dr,dr.u+Sn.g),Zr[Hr]=Sn.value,dr=0):(Y(dr,dr.u+Sn.g-256),e(256<=Sn.value),dr=Sn.value),dr==0&&(mr=!0)}else dr=tt(sr.G[0],sr.H[0],nt);if(nt.h)break;if(mr||256>dr){if(!mr)if(sr.nd)B[Ht]=(sr.qb|dr<<8)>>>0;else{if(J(nt),mr=tt(sr.G[1],sr.H[1],nt),J(nt),Zr=tt(sr.G[2],sr.H[2],nt),Hr=tt(sr.G[3],sr.H[3],nt),nt.h)break;B[Ht]=(Hr<<24|mr<<16|dr<<8|Zr)>>>0}if(mr=!1,++Ht,++ze>=le&&(ze=0,++Qe,Me!=null&&Qe<=De&&!(Qe%16)&&Me(N,Qe),Vt!=null))for(;at<Ht;)dr=B[at++],Vt.X[(506832829*dr&4294967295)>>>Vt.Mb]=dr}else if(280>dr){if(dr=Ie(dr-256,nt),Zr=tt(sr.G[4],sr.H[4],nt),J(nt),Zr=Je(le,Zr=Ie(Zr,nt)),nt.h)break;if(Ht-K<Zr||_e-Ht<dr)break e;for(Hr=0;Hr<dr;++Hr)B[Ht+Hr]=B[Ht+Hr-Zr];for(Ht+=dr,ze+=dr;ze>=le;)ze-=le,++Qe,Me!=null&&Qe<=De&&!(Qe%16)&&Me(N,Qe);if(e(Ht<=_e),ze&ar&&(sr=T(It,ze,Qe)),Vt!=null)for(;at<Ht;)dr=B[at++],Vt.X[(506832829*dr&4294967295)>>>Vt.Mb]=dr}else{if(!(dr<Ft))break e;for(mr=dr-280,e(Vt!=null);at<Ht;)dr=B[at++],Vt.X[(506832829*dr&4294967295)>>>Vt.Mb]=dr;dr=Ht,e(!(mr>>>(Zr=Vt).Xa)),B[dr]=Zr.X[mr],mr=!0}mr||e(nt.h==L(nt))}if(N.Pb&&nt.h&&Ht<_e)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Ee(N.s.vb,N.s.Wa);else{if(nt.h)break e;Me!=null&&Me(N,Qe>De?De:Qe),N.a=0,N.$=Ht-K}return 1}return N.a=3,0}function Ke(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var B=N.Wa;B!=null&&(B.X=null),N.vb=null,e(N!=null)}function ot(){var N=new fn;return N==null?null:(N.a=0,N.xb=HM,he("Predictor","VP8LPredictors"),he("Predictor","VP8LPredictors_C"),he("PredictorAdd","VP8LPredictorsAdd"),he("PredictorAdd","VP8LPredictorsAdd_C"),ui=ct,B1=be,T1=Le,OA=ke,DA=Ae,RA=Ye,Tm=yt,E.VP8LMapColor32b=hf,E.VP8LMapColor8b=j1,N)}function Fe(N,B,K,le,_e){var De=1,Me=[N],Qe=[B],ze=le.m,nt=le.s,It=null,Ht=0;e:for(;;){if(K)for(;De&&Be(ze,1);){var at=Me,jt=Qe,Ft=le,er=1,Vt=Ft.m,ar=Ft.gc[Ft.ab],sr=Be(Vt,2);if(Ft.Oc&1<<sr)De=0;else{switch(Ft.Oc|=1<<sr,ar.hc=sr,ar.Ea=at[0],ar.nc=jt[0],ar.K=[null],++Ft.ab,e(4>=Ft.ab),sr){case 0:case 1:ar.b=Be(Vt,3)+2,er=Fe(Re(ar.Ea,ar.b),Re(ar.nc,ar.b),0,Ft,ar.K),ar.K=ar.K[0];break;case 3:var mr,dr=Be(Vt,8)+1,Zr=16<dr?0:4<dr?1:2<dr?2:3;if(at[0]=Re(ar.Ea,Zr),ar.b=Zr,mr=er=Fe(dr,1,0,Ft,ar.K)){var Hr,Sn=dr,zr=ar,zn=1<<(8>>zr.b),Hi=s(zn);if(Hi==null)mr=0;else{var In=zr.K[0],Wr=zr.w;for(Hi[0]=zr.K[0][0],Hr=1;Hr<1*Sn;++Hr)Hi[Hr]=We(In[Wr+Hr],Hi[Hr-1]);for(;Hr<4*zn;++Hr)Hi[Hr]=0;zr.K[0]=null,zr.K[0]=Hi,mr=1}}er=mr;break;case 2:break;default:e(0)}De=er}}if(Me=Me[0],Qe=Qe[0],De&&Be(ze,1)&&!(De=1<=(Ht=Be(ze,4))&&11>=Ht)){le.a=3;break e}var Tr;if(Tr=De)t:{var fi,Cn,Xn,is=le,Qo=Me,Hl=Qe,Zs=Ht,hl=K,$l=is.m,$i=is.s,Zn=[null],wa=1,ei=0,Na=Que[Zs];r:for(;;){if(hl&&Be($l,1)){var Vo=Be($l,3)+2,Cd=Re(Qo,Vo),hi=Re(Hl,Vo),Ac=Cd*hi;if(!Fe(Cd,hi,0,is,Zn))break r;for(Zn=Zn[0],$i.xc=Vo,fi=0;fi<Ac;++fi){var Ga=Zn[fi]>>8&65535;Zn[fi]=Ga,Ga>=wa&&(wa=Ga+1)}}if($l.h)break r;for(Cn=0;5>Cn;++Cn){var Gi=QM[Cn];!Cn&&0<Zs&&(Gi+=1<<Zs),ei<Gi&&(ei=Gi)}var Hc=o(wa*Na,D),Gl=wa,$c=o(Gl,fe);if($c==null)var Gc=null;else e(65536>=Gl),Gc=$c;var mc=s(ei);if(Gc==null||mc==null||Hc==null){is.a=1;break r}var Kc=Hc;for(fi=Xn=0;fi<wa;++fi){var Za=Gc[fi],qc=Za.G,_d=Za.H,Fm=0,sh=1,Ho=0;for(Cn=0;5>Cn;++Cn){Gi=QM[Cn],qc[Cn]=Kc,_d[Cn]=Xn,!Cn&&0<Zs&&(Gi+=1<<Zs);a:{var vN,NP=Gi,yN=is,R1=mc,lde=Kc,cde=Xn,CP=0,QA=yN.m,ude=Be(QA,1);if(a(R1,0,0,NP),ude){var dde=Be(QA,1)+1,fde=Be(QA,1),YM=Be(QA,fde==0?1:8);R1[YM]=1,dde==2&&(R1[YM=Be(QA,8)]=1);var bN=1}else{var JM=s(19),ZM=Be(QA,4)+4;if(19<ZM){yN.a=3;var wN=0;break a}for(vN=0;vN<ZM;++vN)JM[Lue[vN]]=Be(QA,3);var _P=void 0,M1=void 0,eL=yN,hde=JM,NN=NP,tL=R1,EP=0,VA=eL.m,rL=8,nL=o(128,D);n:for(;k(nL,0,7,hde,19);){if(Be(VA,1)){var Ade=2+2*Be(VA,3);if((_P=2+Be(VA,Ade))>NN)break n}else _P=NN;for(M1=0;M1<NN&&_P--;){J(VA);var aL=nL[0+(127&z(VA))];Y(VA,VA.u+aL.g);var Lg=aL.value;if(16>Lg)tL[M1++]=Lg,Lg!=0&&(rL=Lg);else{var mde=Lg==16,sL=Lg-16,pde=Rue[sL],iL=Be(VA,Due[sL])+pde;if(M1+iL>NN)break n;for(var gde=mde?rL:0;0<iL--;)tL[M1++]=gde}}EP=1;break n}EP||(eL.a=3),bN=EP}(bN=bN&&!QA.h)&&(CP=k(lde,cde,8,R1,NP)),bN&&CP!=0?wN=CP:(yN.a=3,wN=0)}if(wN==0)break r;if(sh&&Mue[Cn]==1&&(sh=Kc[Xn].g==0),Fm+=Kc[Xn].g,Xn+=wN,3>=Cn){var L1,SP=mc[0];for(L1=1;L1<Gi;++L1)mc[L1]>SP&&(SP=mc[L1]);Ho+=SP}}if(Za.nd=sh,Za.Qb=0,sh&&(Za.qb=(qc[3][_d[3]+0].value<<24|qc[1][_d[1]+0].value<<16|qc[2][_d[2]+0].value)>>>0,Fm==0&&256>qc[0][_d[0]+0].value&&(Za.Qb=1,Za.qb+=qc[0][_d[0]+0].value<<8)),Za.jc=!Za.Qb&&6>Ho,Za.jc){var CN,ih=Za;for(CN=0;CN<Bm;++CN){var HA=CN,$A=ih.pd[HA],_N=ih.G[0][ih.H[0]+HA];256<=_N.value?($A.g=_N.g+256,$A.value=_N.value):($A.g=0,$A.value=0,HA>>=ft(_N,8,$A),HA>>=ft(ih.G[1][ih.H[1]+HA],16,$A),HA>>=ft(ih.G[2][ih.H[2]+HA],0,$A),ft(ih.G[3][ih.H[3]+HA],24,$A))}}}$i.vc=Zn,$i.Wb=wa,$i.Ya=Gc,$i.yc=Hc,Tr=1;break t}Tr=0}if(!(De=Tr)){le.a=3;break e}if(0<Ht){if(nt.ua=1<<Ht,!te(nt.Wa,Ht)){le.a=1,De=0;break e}}else nt.ua=0;var IP=le,oL=Me,xde=Qe,jP=IP.s,PP=jP.xc;if(IP.c=oL,IP.i=xde,jP.md=Re(oL,PP),jP.wc=PP==0?-1:(1<<PP)-1,K){le.xb=Wue;break e}if((It=s(Me*Qe))==null){le.a=1,De=0;break e}De=(De=Oe(le,It,0,Me,Qe,Qe,null))&&!ze.h;break e}return De?(_e!=null?_e[0]=It:(e(It==null),e(K)),le.$=0,K||Ke(nt)):Ke(nt),De}function Xe(N,B){var K=N.c*N.i,le=K+B+16*B;return e(N.c<=B),N.V=s(le),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+K+B,1)}function xe(N,B){var K=N.C,le=B-K,_e=N.V,De=N.Ba+N.c*K;for(e(B<=N.l.o);0<le;){var Me=16<le?16:le,Qe=N.l.ma,ze=N.l.width,nt=ze*Me,It=Qe.ca,Ht=Qe.tb+ze*K,at=N.Ta,jt=N.Ua;M(N,Me,_e,De),kM(at,jt,It,Ht,nt),ee(Qe,K,K+Me,It,Ht,ze),le-=Me,_e+=Me*N.c,K+=Me}e(K==B),N.C=N.Ma=B}function Ge(){this.ub=this.yd=this.td=this.Rb=0}function qe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function it(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Et(){this.Yb=function(){var N=[];return function B(K,le,_e){for(var De=_e[le],Me=0;Me<De&&(K.push(_e.length>le+1?[]:0),!(_e.length<le+1));Me++)B(K[Me],le+1,_e)}(N,0,[3,11]),N}()}function Pt(){this.jb=s(3),this.Wc=l([4,8],Et),this.Xc=l([4,17],Et)}function pr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ot(){this.ld=this.La=this.dd=this.tc=0}function Dt(){this.Na=this.la=0}function fr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ir(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ot),this.Y=0,this.ya=Array(new ir),this.aa=0,this.l=new Vr}function gr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Or(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Ge,this.Kc=new qe,this.ed=new pr,this.Qa=new it,this.Ic=this.$c=this.Aa=0,this.D=new Bt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,O),this.ia=0,this.pb=o(4,fr),this.Pa=new Pt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gr),this.Hd=0,this.rb=Array(new Dt),this.sb=0,this.wa=Array(new Ot),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ir),this.L=this.aa=0,this.gd=l([4,2],Ot),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(N,B){return 0>N?0:N>B?B:N}function Vr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rr(){var N=new Or;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,O1||(O1=_r)),N}function an(N,B,K){return N.a==0&&(N.a=B,N.sc=K,N.cb=0),0}function Wn(N,B,K){return 3<=K&&N[B+0]==157&&N[B+1]==1&&N[B+2]==42}function Nt(N,B){if(N==null)return 0;if(N.a=0,N.sc="OK",B==null)return an(N,2,"null VP8Io passed to VP8GetHeaders()");var K=B.data,le=B.w,_e=B.ha;if(4>_e)return an(N,7,"Truncated header.");var De=K[le+0]|K[le+1]<<8|K[le+2]<<16,Me=N.Od;if(Me.Rb=!(1&De),Me.td=De>>1&7,Me.yd=De>>4&1,Me.ub=De>>5,3<Me.td)return an(N,3,"Incorrect keyframe parameters.");if(!Me.yd)return an(N,4,"Frame not displayable.");le+=3,_e-=3;var Qe=N.Kc;if(Me.Rb){if(7>_e)return an(N,7,"cannot parse picture header");if(!Wn(K,le,_e))return an(N,3,"Bad code word");Qe.c=16383&(K[le+4]<<8|K[le+3]),Qe.Td=K[le+4]>>6,Qe.i=16383&(K[le+6]<<8|K[le+5]),Qe.Ud=K[le+6]>>6,le+=7,_e-=7,N.za=Qe.c+15>>4,N.Ub=Qe.i+15>>4,B.width=Qe.c,B.height=Qe.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((De=N.Pa).jb,0,255,De.jb.length),e((De=N.Qa)!=null),De.Cb=0,De.Bb=0,De.Fb=1,a(De.Zb,0,0,De.Zb.length),a(De.Lb,0,0,De.Lb)}if(Me.ub>_e)return an(N,7,"bad partition length");me(De=N.m,K,le,Me.ub),le+=Me.ub,_e-=Me.ub,Me.Rb&&(Qe.Ld=H(De),Qe.Kd=H(De)),Qe=N.Qa;var ze,nt=N.Pa;if(e(De!=null),e(Qe!=null),Qe.Cb=H(De),Qe.Cb){if(Qe.Bb=H(De),H(De)){for(Qe.Fb=H(De),ze=0;4>ze;++ze)Qe.Zb[ze]=H(De)?ye(De,7):0;for(ze=0;4>ze;++ze)Qe.Lb[ze]=H(De)?ye(De,6):0}if(Qe.Bb)for(ze=0;3>ze;++ze)nt.jb[ze]=H(De)?pe(De,8):255}else Qe.Bb=0;if(De.Ka)return an(N,3,"cannot parse segment header");if((Qe=N.ed).zd=H(De),Qe.Tb=pe(De,6),Qe.wb=pe(De,3),Qe.Pc=H(De),Qe.Pc&&H(De)){for(nt=0;4>nt;++nt)H(De)&&(Qe.vd[nt]=ye(De,6));for(nt=0;4>nt;++nt)H(De)&&(Qe.od[nt]=ye(De,6))}if(N.L=Qe.Tb==0?0:Qe.zd?1:2,De.Ka)return an(N,3,"cannot parse filter header");var It=_e;if(_e=ze=le,le=ze+It,Qe=It,N.Xb=(1<<pe(N.m,2))-1,It<3*(nt=N.Xb))K=7;else{for(ze+=3*nt,Qe-=3*nt,It=0;It<nt;++It){var Ht=K[_e+0]|K[_e+1]<<8|K[_e+2]<<16;Ht>Qe&&(Ht=Qe),me(N.Jc[+It],K,ze,Ht),ze+=Ht,Qe-=Ht,_e+=3}me(N.Jc[+nt],K,ze,Qe),K=ze<le?0:5}if(K!=0)return an(N,K,"cannot parse partitions");for(K=pe(ze=N.m,7),_e=H(ze)?ye(ze,4):0,le=H(ze)?ye(ze,4):0,Qe=H(ze)?ye(ze,4):0,nt=H(ze)?ye(ze,4):0,ze=H(ze)?ye(ze,4):0,It=N.Qa,Ht=0;4>Ht;++Ht){if(It.Cb){var at=It.Zb[Ht];It.Fb||(at+=K)}else{if(0<Ht){N.pb[Ht]=N.pb[0];continue}at=K}var jt=N.pb[Ht];jt.Sc[0]=yP[Pr(at+_e,127)],jt.Sc[1]=bP[Pr(at+0,127)],jt.Eb[0]=2*yP[Pr(at+le,127)],jt.Eb[1]=101581*bP[Pr(at+Qe,127)]>>16,8>jt.Eb[1]&&(jt.Eb[1]=8),jt.Qc[0]=yP[Pr(at+nt,117)],jt.Qc[1]=bP[Pr(at+ze,127)],jt.lc=at+ze}if(!Me.Rb)return an(N,4,"Not a key frame.");for(H(De),Me=N.Pa,K=0;4>K;++K){for(_e=0;8>_e;++_e)for(le=0;3>le;++le)for(Qe=0;11>Qe;++Qe)nt=ne(De,que[K][_e][le][Qe])?pe(De,8):Gue[K][_e][le][Qe],Me.Wc[K][_e].Yb[le][Qe]=nt;for(_e=0;17>_e;++_e)Me.Xc[K][_e]=Me.Wc[K][zue[_e]]}return N.kc=H(De),N.kc&&(N.Bd=pe(De,8)),N.cb=1}function _r(N,B,K,le,_e,De,Me){var Qe=B[_e].Yb[K];for(K=0;16>_e;++_e){if(!ne(N,Qe[K+0]))return _e;for(;!ne(N,Qe[K+1]);)if(Qe=B[++_e].Yb[0],K=0,_e==16)return 16;var ze=B[_e+1].Yb;if(ne(N,Qe[K+2])){var nt=N,It=0;if(ne(nt,(at=Qe)[(Ht=K)+3]))if(ne(nt,at[Ht+6])){for(Qe=0,Ht=2*(It=ne(nt,at[Ht+8]))+(at=ne(nt,at[Ht+9+It])),It=0,at=Hue[Ht];at[Qe];++Qe)It+=It+ne(nt,at[Qe]);It+=3+(8<<Ht)}else ne(nt,at[Ht+7])?(It=7+2*ne(nt,165),It+=ne(nt,145)):It=5+ne(nt,159);else It=ne(nt,at[Ht+4])?3+ne(nt,at[Ht+5]):2;Qe=ze[2]}else It=1,Qe=ze[1];ze=Me+$ue[_e],0>(nt=N).b&&R(nt);var Ht,at=nt.b,jt=(Ht=nt.Ca>>1)-(nt.I>>at)>>31;--nt.b,nt.Ca+=jt,nt.Ca|=1,nt.I-=(Ht+1&jt)<<at,De[ze]=((It^jt)-jt)*le[(0<_e)+0]}return 16}function st(N){var B=N.rb[N.sb-1];B.la=0,B.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function St(N,B,K,le,_e){_e=N[B+K+32*le]+(_e>>3),N[B+K+32*le]=-256&_e?0>_e?0:255:_e}function Qt(N,B,K,le,_e,De){St(N,B,0,K,le+_e),St(N,B,1,K,le+De),St(N,B,2,K,le-De),St(N,B,3,K,le-_e)}function Rt(N){return(20091*N>>16)+N}function Mt(N,B,K,le){var _e,De=0,Me=s(16);for(_e=0;4>_e;++_e){var Qe=N[B+0]+N[B+8],ze=N[B+0]-N[B+8],nt=(35468*N[B+4]>>16)-Rt(N[B+12]),It=Rt(N[B+4])+(35468*N[B+12]>>16);Me[De+0]=Qe+It,Me[De+1]=ze+nt,Me[De+2]=ze-nt,Me[De+3]=Qe-It,De+=4,B++}for(_e=De=0;4>_e;++_e)Qe=(N=Me[De+0]+4)+Me[De+8],ze=N-Me[De+8],nt=(35468*Me[De+4]>>16)-Rt(Me[De+12]),St(K,le,0,0,Qe+(It=Rt(Me[De+4])+(35468*Me[De+12]>>16))),St(K,le,1,0,ze+nt),St(K,le,2,0,ze-nt),St(K,le,3,0,Qe-It),De++,le+=32}function qt(N,B,K,le){var _e=N[B+0]+4,De=35468*N[B+4]>>16,Me=Rt(N[B+4]),Qe=35468*N[B+1]>>16;Qt(K,le,0,_e+Me,N=Rt(N[B+1]),Qe),Qt(K,le,1,_e+De,N,Qe),Qt(K,le,2,_e-De,N,Qe),Qt(K,le,3,_e-Me,N,Qe)}function Yt(N,B,K,le,_e){Mt(N,B,K,le),_e&&Mt(N,B+16,K,le+4)}function Xt(N,B,K,le){km(N,B+0,K,le,1),km(N,B+32,K,le+128,1)}function br(N,B,K,le){var _e;for(N=N[B+0]+4,_e=0;4>_e;++_e)for(B=0;4>B;++B)St(K,le,B,_e,N)}function zt(N,B,K,le){N[B+0]&&pa(N,B+0,K,le),N[B+16]&&pa(N,B+16,K,le+4),N[B+32]&&pa(N,B+32,K,le+128),N[B+48]&&pa(N,B+48,K,le+128+4)}function hr(N,B,K,le){var _e,De=s(16);for(_e=0;4>_e;++_e){var Me=N[B+0+_e]+N[B+12+_e],Qe=N[B+4+_e]+N[B+8+_e],ze=N[B+4+_e]-N[B+8+_e],nt=N[B+0+_e]-N[B+12+_e];De[0+_e]=Me+Qe,De[8+_e]=Me-Qe,De[4+_e]=nt+ze,De[12+_e]=nt-ze}for(_e=0;4>_e;++_e)Me=(N=De[0+4*_e]+3)+De[3+4*_e],Qe=De[1+4*_e]+De[2+4*_e],ze=De[1+4*_e]-De[2+4*_e],nt=N-De[3+4*_e],K[le+0]=Me+Qe>>3,K[le+16]=nt+ze>>3,K[le+32]=Me-Qe>>3,K[le+48]=nt-ze>>3,le+=64}function rn(N,B,K){var le,_e=B-32,De=Vc,Me=255-N[_e-1];for(le=0;le<K;++le){var Qe,ze=De,nt=Me+N[B-1];for(Qe=0;Qe<K;++Qe)N[B+Qe]=ze[nt+N[_e+Qe]];B+=32}}function Ya(N,B){rn(N,B,4)}function Dn(N,B){rn(N,B,8)}function Va(N,B){rn(N,B,16)}function Lo(N,B){var K;for(K=0;16>K;++K)n(N,B+32*K,N,B-32,16)}function Qi(N,B){var K;for(K=16;0<K;--K)a(N,B,N[B-1],16),B+=32}function ya(N,B,K){var le;for(le=0;16>le;++le)a(B,K+32*le,N,16)}function Ha(N,B){var K,le=16;for(K=0;16>K;++K)le+=N[B-1+32*K]+N[B+K-32];ya(le>>5,N,B)}function Rc(N,B){var K,le=8;for(K=0;16>K;++K)le+=N[B-1+32*K];ya(le>>4,N,B)}function vd(N,B){var K,le=8;for(K=0;16>K;++K)le+=N[B+K-32];ya(le>>4,N,B)}function Fg(N,B){ya(128,N,B)}function dn(N,B,K){return N+2*B+K+2>>2}function w1(N,B){var K,le=B-32;for(le=new Uint8Array([dn(N[le-1],N[le+0],N[le+1]),dn(N[le+0],N[le+1],N[le+2]),dn(N[le+1],N[le+2],N[le+3]),dn(N[le+2],N[le+3],N[le+4])]),K=0;4>K;++K)n(N,B+32*K,le,0,le.length)}function N1(N,B){var K=N[B-1],le=N[B-1+32],_e=N[B-1+64],De=N[B-1+96];ge(N,B+0,16843009*dn(N[B-1-32],K,le)),ge(N,B+32,16843009*dn(K,le,_e)),ge(N,B+64,16843009*dn(le,_e,De)),ge(N,B+96,16843009*dn(_e,De,De))}function C1(N,B){var K,le=4;for(K=0;4>K;++K)le+=N[B+K-32]+N[B-1+32*K];for(le>>=3,K=0;4>K;++K)a(N,B+32*K,le,4)}function po(N,B){var K=N[B-1+0],le=N[B-1+32],_e=N[B-1+64],De=N[B-1-32],Me=N[B+0-32],Qe=N[B+1-32],ze=N[B+2-32],nt=N[B+3-32];N[B+0+96]=dn(le,_e,N[B-1+96]),N[B+1+96]=N[B+0+64]=dn(K,le,_e),N[B+2+96]=N[B+1+64]=N[B+0+32]=dn(De,K,le),N[B+3+96]=N[B+2+64]=N[B+1+32]=N[B+0+0]=dn(Me,De,K),N[B+3+64]=N[B+2+32]=N[B+1+0]=dn(Qe,Me,De),N[B+3+32]=N[B+2+0]=dn(ze,Qe,Me),N[B+3+0]=dn(nt,ze,Qe)}function yd(N,B){var K=N[B+1-32],le=N[B+2-32],_e=N[B+3-32],De=N[B+4-32],Me=N[B+5-32],Qe=N[B+6-32],ze=N[B+7-32];N[B+0+0]=dn(N[B+0-32],K,le),N[B+1+0]=N[B+0+32]=dn(K,le,_e),N[B+2+0]=N[B+1+32]=N[B+0+64]=dn(le,_e,De),N[B+3+0]=N[B+2+32]=N[B+1+64]=N[B+0+96]=dn(_e,De,Me),N[B+3+32]=N[B+2+64]=N[B+1+96]=dn(De,Me,Qe),N[B+3+64]=N[B+2+96]=dn(Me,Qe,ze),N[B+3+96]=dn(Qe,ze,ze)}function _1(N,B){var K=N[B-1+0],le=N[B-1+32],_e=N[B-1+64],De=N[B-1-32],Me=N[B+0-32],Qe=N[B+1-32],ze=N[B+2-32],nt=N[B+3-32];N[B+0+0]=N[B+1+64]=De+Me+1>>1,N[B+1+0]=N[B+2+64]=Me+Qe+1>>1,N[B+2+0]=N[B+3+64]=Qe+ze+1>>1,N[B+3+0]=ze+nt+1>>1,N[B+0+96]=dn(_e,le,K),N[B+0+64]=dn(le,K,De),N[B+0+32]=N[B+1+96]=dn(K,De,Me),N[B+1+32]=N[B+2+96]=dn(De,Me,Qe),N[B+2+32]=N[B+3+96]=dn(Me,Qe,ze),N[B+3+32]=dn(Qe,ze,nt)}function IA(N,B){var K=N[B+0-32],le=N[B+1-32],_e=N[B+2-32],De=N[B+3-32],Me=N[B+4-32],Qe=N[B+5-32],ze=N[B+6-32],nt=N[B+7-32];N[B+0+0]=K+le+1>>1,N[B+1+0]=N[B+0+64]=le+_e+1>>1,N[B+2+0]=N[B+1+64]=_e+De+1>>1,N[B+3+0]=N[B+2+64]=De+Me+1>>1,N[B+0+32]=dn(K,le,_e),N[B+1+32]=N[B+0+96]=dn(le,_e,De),N[B+2+32]=N[B+1+96]=dn(_e,De,Me),N[B+3+32]=N[B+2+96]=dn(De,Me,Qe),N[B+3+64]=dn(Me,Qe,ze),N[B+3+96]=dn(Qe,ze,nt)}function bd(N,B){var K=N[B-1+0],le=N[B-1+32],_e=N[B-1+64],De=N[B-1+96];N[B+0+0]=K+le+1>>1,N[B+2+0]=N[B+0+32]=le+_e+1>>1,N[B+2+32]=N[B+0+64]=_e+De+1>>1,N[B+1+0]=dn(K,le,_e),N[B+3+0]=N[B+1+32]=dn(le,_e,De),N[B+3+32]=N[B+1+64]=dn(_e,De,De),N[B+3+64]=N[B+2+64]=N[B+0+96]=N[B+1+96]=N[B+2+96]=N[B+3+96]=De}function jA(N,B){var K=N[B-1+0],le=N[B-1+32],_e=N[B-1+64],De=N[B-1+96],Me=N[B-1-32],Qe=N[B+0-32],ze=N[B+1-32],nt=N[B+2-32];N[B+0+0]=N[B+2+32]=K+Me+1>>1,N[B+0+32]=N[B+2+64]=le+K+1>>1,N[B+0+64]=N[B+2+96]=_e+le+1>>1,N[B+0+96]=De+_e+1>>1,N[B+3+0]=dn(Qe,ze,nt),N[B+2+0]=dn(Me,Qe,ze),N[B+1+0]=N[B+3+32]=dn(K,Me,Qe),N[B+1+32]=N[B+3+64]=dn(le,K,Me),N[B+1+64]=N[B+3+96]=dn(_e,le,K),N[B+1+96]=dn(De,_e,le)}function Mc(N,B){var K;for(K=0;8>K;++K)n(N,B+32*K,N,B-32,8)}function eh(N,B){var K;for(K=0;8>K;++K)a(N,B,N[B-1],8),B+=32}function bu(N,B,K){var le;for(le=0;8>le;++le)a(B,K+32*le,N,8)}function Sm(N,B){var K,le=8;for(K=0;8>K;++K)le+=N[B+K-32]+N[B-1+32*K];bu(le>>4,N,B)}function Da(N,B){var K,le=4;for(K=0;8>K;++K)le+=N[B+K-32];bu(le>>3,N,B)}function Im(N,B){var K,le=4;for(K=0;8>K;++K)le+=N[B-1+32*K];bu(le>>3,N,B)}function Og(N,B){bu(128,N,B)}function wu(N,B,K){var le=N[B-K],_e=N[B+0],De=3*(_e-le)+mP[1020+N[B-2*K]-N[B+K]],Me=uN[112+(De+4>>3)];N[B-K]=Vc[255+le+uN[112+(De+3>>3)]],N[B+0]=Vc[255+_e-Me]}function PA(N,B,K,le){var _e=N[B+0],De=N[B+K];return Iu[255+N[B-2*K]-N[B-K]]>le||Iu[255+De-_e]>le}function th(N,B,K,le){return 4*Iu[255+N[B-K]-N[B+0]]+Iu[255+N[B-2*K]-N[B+K]]<=le}function df(N,B,K,le,_e){var De=N[B-3*K],Me=N[B-2*K],Qe=N[B-K],ze=N[B+0],nt=N[B+K],It=N[B+2*K],Ht=N[B+3*K];return 4*Iu[255+Qe-ze]+Iu[255+Me-nt]>le?0:Iu[255+N[B-4*K]-De]<=_e&&Iu[255+De-Me]<=_e&&Iu[255+Me-Qe]<=_e&&Iu[255+Ht-It]<=_e&&Iu[255+It-nt]<=_e&&Iu[255+nt-ze]<=_e}function ff(N,B,K,le){var _e=2*le+1;for(le=0;16>le;++le)th(N,B+le,K,_e)&&wu(N,B+le,K)}function Ql(N,B,K,le){var _e=2*le+1;for(le=0;16>le;++le)th(N,B+le*K,1,_e)&&wu(N,B+le*K,1)}function jm(N,B,K,le){var _e;for(_e=3;0<_e;--_e)ff(N,B+=4*K,K,le)}function Dg(N,B,K,le){var _e;for(_e=3;0<_e;--_e)Ql(N,B+=4,K,le)}function Vl(N,B,K,le,_e,De,Me,Qe){for(De=2*De+1;0<_e--;){if(df(N,B,K,De,Me))if(PA(N,B,K,Qe))wu(N,B,K);else{var ze=N,nt=B,It=K,Ht=ze[nt-2*It],at=ze[nt-It],jt=ze[nt+0],Ft=ze[nt+It],er=ze[nt+2*It],Vt=27*(sr=mP[1020+3*(jt-at)+mP[1020+Ht-Ft]])+63>>7,ar=18*sr+63>>7,sr=9*sr+63>>7;ze[nt-3*It]=Vc[255+ze[nt-3*It]+sr],ze[nt-2*It]=Vc[255+Ht+ar],ze[nt-It]=Vc[255+at+Vt],ze[nt+0]=Vc[255+jt-Vt],ze[nt+It]=Vc[255+Ft-ar],ze[nt+2*It]=Vc[255+er-sr]}B+=le}}function Nu(N,B,K,le,_e,De,Me,Qe){for(De=2*De+1;0<_e--;){if(df(N,B,K,De,Me))if(PA(N,B,K,Qe))wu(N,B,K);else{var ze=N,nt=B,It=K,Ht=ze[nt-It],at=ze[nt+0],jt=ze[nt+It],Ft=uN[112+(4+(er=3*(at-Ht))>>3)],er=uN[112+(er+3>>3)],Vt=Ft+1>>1;ze[nt-2*It]=Vc[255+ze[nt-2*It]+Vt],ze[nt-It]=Vc[255+Ht+er],ze[nt+0]=Vc[255+at-Ft],ze[nt+It]=Vc[255+jt-Vt]}B+=le}}function BA(N,B,K,le,_e,De){Vl(N,B,K,1,16,le,_e,De)}function Cu(N,B,K,le,_e,De){Vl(N,B,1,K,16,le,_e,De)}function Pm(N,B,K,le,_e,De){var Me;for(Me=3;0<Me;--Me)Nu(N,B+=4*K,K,1,16,le,_e,De)}function Q(N,B,K,le,_e,De){var Me;for(Me=3;0<Me;--Me)Nu(N,B+=4,1,K,16,le,_e,De)}function Ce(N,B,K,le,_e,De,Me,Qe){Vl(N,B,_e,1,8,De,Me,Qe),Vl(K,le,_e,1,8,De,Me,Qe)}function rt(N,B,K,le,_e,De,Me,Qe){Vl(N,B,1,_e,8,De,Me,Qe),Vl(K,le,1,_e,8,De,Me,Qe)}function wt(N,B,K,le,_e,De,Me,Qe){Nu(N,B+4*_e,_e,1,8,De,Me,Qe),Nu(K,le+4*_e,_e,1,8,De,Me,Qe)}function Tt(N,B,K,le,_e,De,Me,Qe){Nu(N,B+4,1,_e,8,De,Me,Qe),Nu(K,le+4,1,_e,8,De,Me,Qe)}function nr(){this.ba=new de,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function lr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Kr(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new fe,this.yc=new D}function fn(){this.xb=this.a=0,this.l=new Vr,this.ca=new de,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Kr,this.ab=0,this.gc=o(4,Mr),this.Oc=0}function bn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vn(N,B,K,le,_e,De,Me){for(N=N==null?0:N[B+0],B=0;B<Me;++B)_e[De+B]=N+K[le+B]&255,N=_e[De+B]}function ua(N,B,K,le,_e,De,Me){var Qe;if(N==null)Vn(null,null,K,le,_e,De,Me);else for(Qe=0;Qe<Me;++Qe)_e[De+Qe]=N[B+Qe]+K[le+Qe]&255}function Ts(N,B,K,le,_e,De,Me){if(N==null)Vn(null,null,K,le,_e,De,Me);else{var Qe,ze=N[B+0],nt=ze,It=ze;for(Qe=0;Qe<Me;++Qe)nt=It+(ze=N[B+Qe])-nt,It=K[le+Qe]+(-256&nt?0>nt?0:255:nt)&255,nt=ze,_e[De+Qe]=It}}function ba(N,B,K,le){var _e=B.width,De=B.o;if(e(N!=null&&B!=null),0>K||0>=le||K+le>De)return null;if(!N.Cc){if(N.ga==null){var Me;if(N.ga=new bn,(Me=N.ga==null)||(Me=B.width*B.o,e(N.Gb.length==0),N.Gb=s(Me),N.Uc=0,N.Gb==null?Me=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Me=1),Me=!Me),!Me){Me=N.ga;var Qe=N.Fa,ze=N.P,nt=N.qc,It=N.mb,Ht=N.nb,at=ze+1,jt=nt-1,Ft=Me.l;if(e(Qe!=null&&It!=null&&B!=null),UA[0]=null,UA[1]=Vn,UA[2]=ua,UA[3]=Ts,Me.ca=It,Me.tb=Ht,Me.c=B.width,Me.i=B.height,e(0<Me.c&&0<Me.i),1>=nt)B=0;else if(Me.$a=3&Qe[ze+0],Me.Z=Qe[ze+0]>>2&3,Me.Lc=Qe[ze+0]>>4&3,ze=Qe[ze+0]>>6&3,0>Me.$a||1<Me.$a||4<=Me.Z||1<Me.Lc||ze)B=0;else if(Ft.put=Ne,Ft.ac=et,Ft.bc=mt,Ft.ma=Me,Ft.width=B.width,Ft.height=B.height,Ft.Da=B.Da,Ft.v=B.v,Ft.va=B.va,Ft.j=B.j,Ft.o=B.o,Me.$a)e:{e(Me.$a==1),B=ot();t:for(;;){if(B==null){B=0;break e}if(e(Me!=null),Me.mc=B,B.c=Me.c,B.i=Me.i,B.l=Me.l,B.l.ma=Me,B.l.width=Me.c,B.l.height=Me.i,B.a=0,ae(B.m,Qe,at,jt),!Fe(Me.c,Me.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&q(B.s)?(Me.ic=1,Qe=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(Qe),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Me.ic=0,B=Xe(B,Me.c)),!B))break t;B=1;break e}Me.mc=null,B=0}else B=jt>=Me.c*Me.i;Me=!B}if(Me)return null;N.ga.Lc!=1?N.Ga=0:le=De-K}e(N.ga!=null),e(K+le<=De);e:{if(B=(Qe=N.ga).c,De=Qe.l.o,Qe.$a==0){if(at=N.rc,jt=N.Vc,Ft=N.Fa,ze=N.P+1+K*B,nt=N.mb,It=N.nb+K*B,e(ze<=N.P+N.qc),Qe.Z!=0)for(e(UA[Qe.Z]!=null),Me=0;Me<le;++Me)UA[Qe.Z](at,jt,Ft,ze,nt,It,B),at=nt,jt=It,It+=B,ze+=B;else for(Me=0;Me<le;++Me)n(nt,It,Ft,ze,B),at=nt,jt=It,It+=B,ze+=B;N.rc=at,N.Vc=jt}else{if(e(Qe.mc!=null),B=K+le,e((Me=Qe.mc)!=null),e(B<=Me.i),Me.C>=B)B=1;else if(Qe.ic||hc(),Qe.ic){Qe=Me.V,at=Me.Ba,jt=Me.c;var er=Me.i,Vt=(Ft=1,ze=Me.$/jt,nt=Me.$%jt,It=Me.m,Ht=Me.s,Me.$),ar=jt*er,sr=jt*B,mr=Ht.wc,dr=Vt<sr?T(Ht,nt,ze):null;e(Vt<=ar),e(B<=er),e(q(Ht));t:for(;;){for(;!It.h&&Vt<sr;){if(nt&mr||(dr=T(Ht,nt,ze)),e(dr!=null),J(It),256>(er=tt(dr.G[0],dr.H[0],It)))Qe[at+Vt]=er,++Vt,++nt>=jt&&(nt=0,++ze<=B&&!(ze%16)&&se(Me,ze));else{if(!(280>er)){Ft=0;break t}er=Ie(er-256,It);var Zr,Hr=tt(dr.G[4],dr.H[4],It);if(J(It),!(Vt>=(Hr=Je(jt,Hr=Ie(Hr,It)))&&ar-Vt>=er)){Ft=0;break t}for(Zr=0;Zr<er;++Zr)Qe[at+Vt+Zr]=Qe[at+Vt+Zr-Hr];for(Vt+=er,nt+=er;nt>=jt;)nt-=jt,++ze<=B&&!(ze%16)&&se(Me,ze);Vt<sr&&nt&mr&&(dr=T(Ht,nt,ze))}e(It.h==L(It))}se(Me,ze>B?B:ze);break t}!Ft||It.h&&Vt<ar?(Ft=0,Me.a=It.h?5:3):Me.$=Vt,B=Ft}else B=Oe(Me,Me.V,Me.Ba,Me.c,Me.i,B,xe);if(!B){le=0;break e}}K+le>=De&&(N.Cc=1),le=1}if(!le)return null;if(N.Cc&&((le=N.ga)!=null&&(le.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+K*_e}function Ys(N,B,K,le,_e,De){for(;0<_e--;){var Me,Qe=N,ze=B+(K?1:0),nt=N,It=B+(K?0:3);for(Me=0;Me<le;++Me){var Ht=nt[It+4*Me];Ht!=255&&(Ht*=32897,Qe[ze+4*Me+0]=Qe[ze+4*Me+0]*Ht>>23,Qe[ze+4*Me+1]=Qe[ze+4*Me+1]*Ht>>23,Qe[ze+4*Me+2]=Qe[ze+4*Me+2]*Ht>>23)}B+=De}}function ks(N,B,K,le,_e){for(;0<le--;){var De;for(De=0;De<K;++De){var Me=N[B+2*De+0],Qe=15&(nt=N[B+2*De+1]),ze=4369*Qe,nt=(240&nt|nt>>4)*ze>>16;N[B+2*De+0]=(240&Me|Me>>4)*ze>>16&240|(15&Me|Me<<4)*ze>>16>>4&15,N[B+2*De+1]=240&nt|Qe}B+=_e}}function Js(N,B,K,le,_e,De,Me,Qe){var ze,nt,It=255;for(nt=0;nt<_e;++nt){for(ze=0;ze<le;++ze){var Ht=N[B+ze];De[Me+4*ze]=Ht,It&=Ht}B+=K,Me+=Qe}return It!=255}function Fs(N,B,K,le,_e){var De;for(De=0;De<_e;++De)K[le+De]=N[B+De]>>8}function hc(){F1=Ys,BM=ks,TM=Js,kM=Fs}function _u(N,B,K){E[N]=function(le,_e,De,Me,Qe,ze,nt,It,Ht,at,jt,Ft,er,Vt,ar,sr,mr){var dr,Zr=mr-1>>1,Hr=Qe[ze+0]|nt[It+0]<<16,Sn=Ht[at+0]|jt[Ft+0]<<16;e(le!=null);var zr=3*Hr+Sn+131074>>2;for(B(le[_e+0],255&zr,zr>>16,er,Vt),De!=null&&(zr=3*Sn+Hr+131074>>2,B(De[Me+0],255&zr,zr>>16,ar,sr)),dr=1;dr<=Zr;++dr){var zn=Qe[ze+dr]|nt[It+dr]<<16,Hi=Ht[at+dr]|jt[Ft+dr]<<16,In=Hr+zn+Sn+Hi+524296,Wr=In+2*(zn+Sn)>>3;zr=Wr+Hr>>1,Hr=(In=In+2*(Hr+Hi)>>3)+zn>>1,B(le[_e+2*dr-1],255&zr,zr>>16,er,Vt+(2*dr-1)*K),B(le[_e+2*dr-0],255&Hr,Hr>>16,er,Vt+(2*dr-0)*K),De!=null&&(zr=In+Sn>>1,Hr=Wr+Hi>>1,B(De[Me+2*dr-1],255&zr,zr>>16,ar,sr+(2*dr-1)*K),B(De[Me+2*dr+0],255&Hr,Hr>>16,ar,sr+(2*dr+0)*K)),Hr=zn,Sn=Hi}1&mr||(zr=3*Hr+Sn+131074>>2,B(le[_e+mr-1],255&zr,zr>>16,er,Vt+(mr-1)*K),De!=null&&(zr=3*Sn+Hr+131074>>2,B(De[Me+mr-1],255&zr,zr>>16,ar,sr+(mr-1)*K)))}}function Eu(){ju[dN]=Xue,ju[fN]=$M,ju[LM]=Yue,ju[hN]=GM,ju[AN]=KM,ju[pP]=qM,ju[UM]=Jue,ju[gP]=$M,ju[xP]=GM,ju[mN]=KM,ju[vP]=qM}function C(N){return N&-16384?0>N?0:255:N>>Zue}function X(N,B){return C((19077*N>>8)+(26149*B>>8)-14234)}function ve(N,B,K){return C((19077*N>>8)-(6419*B>>8)-(13320*K>>8)+8708)}function $e(N,B){return C((19077*N>>8)+(33050*B>>8)-17685)}function kt(N,B,K,le,_e){le[_e+0]=X(N,K),le[_e+1]=ve(N,B,K),le[_e+2]=$e(N,B)}function Kt(N,B,K,le,_e){le[_e+0]=$e(N,B),le[_e+1]=ve(N,B,K),le[_e+2]=X(N,K)}function wr(N,B,K,le,_e){var De=ve(N,B,K);B=De<<3&224|$e(N,B)>>3,le[_e+0]=248&X(N,K)|De>>5,le[_e+1]=B}function qn(N,B,K,le,_e){var De=240&$e(N,B)|15;le[_e+0]=240&X(N,K)|ve(N,B,K)>>4,le[_e+1]=De}function Os(N,B,K,le,_e){le[_e+0]=255,kt(N,B,K,le,_e+1)}function Rn(N,B,K,le,_e){Kt(N,B,K,le,_e),le[_e+3]=255}function aa(N,B,K,le,_e){kt(N,B,K,le,_e),le[_e+3]=255}function Ja(N,B,K){E[N]=function(le,_e,De,Me,Qe,ze,nt,It,Ht){for(var at=It+(-2&Ht)*K;It!=at;)B(le[_e+0],De[Me+0],Qe[ze+0],nt,It),B(le[_e+1],De[Me+0],Qe[ze+0],nt,It+K),_e+=2,++Me,++ze,It+=2*K;1&Ht&&B(le[_e+0],De[Me+0],Qe[ze+0],nt,It)}}function Lc(N,B,K){return K==0?N==0?B==0?6:5:B==0?4:0:K}function fl(N,B,K,le,_e){switch(N>>>30){case 3:km(B,K,le,_e,0);break;case 2:Su(B,K,le,_e);break;case 1:pa(B,K,le,_e)}}function Uo(N,B){var K,le,_e=B.M,De=B.Nb,Me=N.oc,Qe=N.pc+40,ze=N.oc,nt=N.pc+584,It=N.oc,Ht=N.pc+600;for(K=0;16>K;++K)Me[Qe+32*K-1]=129;for(K=0;8>K;++K)ze[nt+32*K-1]=129,It[Ht+32*K-1]=129;for(0<_e?Me[Qe-1-32]=ze[nt-1-32]=It[Ht-1-32]=129:(a(Me,Qe-32-1,127,21),a(ze,nt-32-1,127,9),a(It,Ht-32-1,127,9)),le=0;le<N.za;++le){var at=B.ya[B.aa+le];if(0<le){for(K=-1;16>K;++K)n(Me,Qe+32*K-4,Me,Qe+32*K+12,4);for(K=-1;8>K;++K)n(ze,nt+32*K-4,ze,nt+32*K+4,4),n(It,Ht+32*K-4,It,Ht+32*K+4,4)}var jt=N.Gd,Ft=N.Hd+le,er=at.ad,Vt=at.Hc;if(0<_e&&(n(Me,Qe-32,jt[Ft].y,0,16),n(ze,nt-32,jt[Ft].f,0,8),n(It,Ht-32,jt[Ft].ea,0,8)),at.Za){var ar=Me,sr=Qe-32+16;for(0<_e&&(le>=N.za-1?a(ar,sr,jt[Ft].y[15],4):n(ar,sr,jt[Ft+1].y,0,4)),K=0;4>K;K++)ar[sr+128+K]=ar[sr+256+K]=ar[sr+384+K]=ar[sr+0+K];for(K=0;16>K;++K,Vt<<=2)ar=Me,sr=Qe+WM[K],Nd[at.Ob[K]](ar,sr),fl(Vt,er,16*+K,ar,sr)}else if(ar=Lc(le,_e,at.Ob[0]),LA[ar](Me,Qe),Vt!=0)for(K=0;16>K;++K,Vt<<=2)fl(Vt,er,16*+K,Me,Qe+WM[K]);for(K=at.Gc,ar=Lc(le,_e,at.Dd),ah[ar](ze,nt),ah[ar](It,Ht),Vt=er,ar=ze,sr=nt,255&(at=0|K)&&(170&at?mf(Vt,256,ar,sr):$a(Vt,256,ar,sr)),at=It,Vt=Ht,255&(K>>=8)&&(170&K?mf(er,320,at,Vt):$a(er,320,at,Vt)),_e<N.Ub-1&&(n(jt[Ft].y,0,Me,Qe+480,16),n(jt[Ft].f,0,ze,nt+224,8),n(jt[Ft].ea,0,It,Ht+224,8)),K=8*De*N.B,jt=N.sa,Ft=N.ta+16*le+16*De*N.R,er=N.qa,at=N.ra+8*le+K,Vt=N.Ha,ar=N.Ia+8*le+K,K=0;16>K;++K)n(jt,Ft+K*N.R,Me,Qe+32*K,16);for(K=0;8>K;++K)n(er,at+K*N.B,ze,nt+32*K,8),n(Vt,ar+K*N.B,It,Ht+32*K,8)}}function wd(N,B,K,le,_e,De,Me,Qe,ze){var nt=[0],It=[0],Ht=0,at=ze!=null?ze.kd:0,jt=ze??new lr;if(N==null||12>K)return 7;jt.data=N,jt.w=B,jt.ha=K,B=[B],K=[K],jt.gb=[jt.gb];e:{var Ft=B,er=K,Vt=jt.gb;if(e(N!=null),e(er!=null),e(Vt!=null),Vt[0]=0,12<=er[0]&&!r(N,Ft[0],"RIFF")){if(r(N,Ft[0]+8,"WEBP")){Vt=3;break e}var ar=ie(N,Ft[0]+4);if(12>ar||4294967286<ar){Vt=3;break e}if(at&&ar>er[0]-8){Vt=7;break e}Vt[0]=ar,Ft[0]+=12,er[0]-=12}Vt=0}if(Vt!=0)return Vt;for(ar=0<jt.gb[0],K=K[0];;){e:{var sr=N;er=B,Vt=K;var mr=nt,dr=It,Zr=Ft=[0];if((zr=Ht=[Ht])[0]=0,8>Vt[0])Vt=7;else{if(!r(sr,er[0],"VP8X")){if(ie(sr,er[0]+4)!=10){Vt=3;break e}if(18>Vt[0]){Vt=7;break e}var Hr=ie(sr,er[0]+8),Sn=1+Ue(sr,er[0]+12);if(2147483648<=Sn*(sr=1+Ue(sr,er[0]+15))){Vt=3;break e}Zr!=null&&(Zr[0]=Hr),mr!=null&&(mr[0]=Sn),dr!=null&&(dr[0]=sr),er[0]+=18,Vt[0]-=18,zr[0]=1}Vt=0}}if(Ht=Ht[0],Ft=Ft[0],Vt!=0)return Vt;if(er=!!(2&Ft),!ar&&Ht)return 3;if(De!=null&&(De[0]=!!(16&Ft)),Me!=null&&(Me[0]=er),Qe!=null&&(Qe[0]=0),Me=nt[0],Ft=It[0],Ht&&er&&ze==null){Vt=0;break}if(4>K){Vt=7;break}if(ar&&Ht||!ar&&!Ht&&!r(N,B[0],"ALPH")){K=[K],jt.na=[jt.na],jt.P=[jt.P],jt.Sa=[jt.Sa];e:{Hr=N,Vt=B,ar=K;var zr=jt.gb;mr=jt.na,dr=jt.P,Zr=jt.Sa,Sn=22,e(Hr!=null),e(ar!=null),sr=Vt[0];var zn=ar[0];for(e(mr!=null),e(Zr!=null),mr[0]=null,dr[0]=null,Zr[0]=0;;){if(Vt[0]=sr,ar[0]=zn,8>zn){Vt=7;break e}var Hi=ie(Hr,sr+4);if(4294967286<Hi){Vt=3;break e}var In=8+Hi+1&-2;if(Sn+=In,0<zr&&Sn>zr){Vt=3;break e}if(!r(Hr,sr,"VP8 ")||!r(Hr,sr,"VP8L")){Vt=0;break e}if(zn[0]<In){Vt=7;break e}r(Hr,sr,"ALPH")||(mr[0]=Hr,dr[0]=sr+8,Zr[0]=Hi),sr+=In,zn-=In}}if(K=K[0],jt.na=jt.na[0],jt.P=jt.P[0],jt.Sa=jt.Sa[0],Vt!=0)break}K=[K],jt.Ja=[jt.Ja],jt.xa=[jt.xa];e:if(zr=N,Vt=B,ar=K,mr=jt.gb[0],dr=jt.Ja,Zr=jt.xa,Hr=Vt[0],sr=!r(zr,Hr,"VP8 "),Sn=!r(zr,Hr,"VP8L"),e(zr!=null),e(ar!=null),e(dr!=null),e(Zr!=null),8>ar[0])Vt=7;else{if(sr||Sn){if(zr=ie(zr,Hr+4),12<=mr&&zr>mr-12){Vt=3;break e}if(at&&zr>ar[0]-8){Vt=7;break e}dr[0]=zr,Vt[0]+=8,ar[0]-=8,Zr[0]=Sn}else Zr[0]=5<=ar[0]&&zr[Hr+0]==47&&!(zr[Hr+4]>>5),dr[0]=ar[0];Vt=0}if(K=K[0],jt.Ja=jt.Ja[0],jt.xa=jt.xa[0],B=B[0],Vt!=0)break;if(4294967286<jt.Ja)return 3;if(Qe==null||er||(Qe[0]=jt.xa?2:1),Me=[Me],Ft=[Ft],jt.xa){if(5>K){Vt=7;break}Qe=Me,at=Ft,er=De,N==null||5>K?N=0:5<=K&&N[B+0]==47&&!(N[B+4]>>5)?(ar=[0],zr=[0],mr=[0],ae(dr=new G,N,B,K),W(dr,ar,zr,mr)?(Qe!=null&&(Qe[0]=ar[0]),at!=null&&(at[0]=zr[0]),er!=null&&(er[0]=mr[0]),N=1):N=0):N=0}else{if(10>K){Vt=7;break}Qe=Ft,N==null||10>K||!Wn(N,B+3,K-3)?N=0:(at=N[B+0]|N[B+1]<<8|N[B+2]<<16,er=16383&(N[B+7]<<8|N[B+6]),N=16383&(N[B+9]<<8|N[B+8]),1&at||3<(at>>1&7)||!(at>>4&1)||at>>5>=jt.Ja||!er||!N?N=0:(Me&&(Me[0]=er),Qe&&(Qe[0]=N),N=1))}if(!N||(Me=Me[0],Ft=Ft[0],Ht&&(nt[0]!=Me||It[0]!=Ft)))return 3;ze!=null&&(ze[0]=jt,ze.offset=B-ze.w,e(4294967286>B-ze.w),e(ze.offset==ze.ha-K));break}return Vt==0||Vt==7&&Ht&&ze==null?(De!=null&&(De[0]|=jt.na!=null&&0<jt.na.length),le!=null&&(le[0]=Me),_e!=null&&(_e[0]=Ft),0):Vt}function E1(N,B,K){var le=B.width,_e=B.height,De=0,Me=0,Qe=le,ze=_e;if(B.Da=N!=null&&0<N.Da,B.Da&&(Qe=N.cd,ze=N.bd,De=N.v,Me=N.j,11>K||(De&=-2,Me&=-2),0>De||0>Me||0>=Qe||0>=ze||De+Qe>le||Me+ze>_e))return 0;if(B.v=De,B.j=Me,B.va=De+Qe,B.o=Me+ze,B.U=Qe,B.T=ze,B.da=N!=null&&0<N.da,B.da){if(!we(Qe,ze,K=[N.ib],De=[N.hb]))return 0;B.ib=K[0],B.hb=De[0]}return B.ob=N!=null&&N.ob,B.Kb=N==null||!N.Sd,B.da&&(B.ob=B.ib<3*le/4&&B.hb<3*_e/4,B.Kb=0),1}function S1(N){if(N==null)return 2;if(11>N.S){var B=N.f.RGBA;B.fb+=(N.height-1)*B.A,B.A=-B.A}else B=N.f.kb,N=N.height,B.O+=(N-1)*B.fa,B.fa=-B.fa,B.N+=(N-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(N-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(N-1)*B.lb,B.lb=-B.lb);return 0}function TA(N,B,K,le){if(le==null||0>=N||0>=B)return 2;if(K!=null){if(K.Da){var _e=K.cd,De=K.bd,Me=-2&K.v,Qe=-2&K.j;if(0>Me||0>Qe||0>=_e||0>=De||Me+_e>N||Qe+De>B)return 2;N=_e,B=De}if(K.da){if(!we(N,B,_e=[K.ib],De=[K.hb]))return 2;N=_e[0],B=De[0]}}le.width=N,le.height=B;e:{var ze=le.width,nt=le.height;if(N=le.S,0>=ze||0>=nt||!(N>=dN&&13>N))N=2;else{if(0>=le.Rd&&le.sd==null){Me=De=_e=B=0;var It=(Qe=ze*XM[N])*nt;if(11>N||(De=(nt+1)/2*(B=(ze+1)/2),N==12&&(Me=(_e=ze)*nt)),(nt=s(It+2*De+Me))==null){N=1;break e}le.sd=nt,11>N?((ze=le.f.RGBA).eb=nt,ze.fb=0,ze.A=Qe,ze.size=It):((ze=le.f.kb).y=nt,ze.O=0,ze.fa=Qe,ze.Fd=It,ze.f=nt,ze.N=0+It,ze.Ab=B,ze.Cd=De,ze.ea=nt,ze.W=0+It+De,ze.Db=B,ze.Ed=De,N==12&&(ze.F=nt,ze.J=0+It+2*De),ze.Tc=Me,ze.lb=_e)}if(B=1,_e=le.S,De=le.width,Me=le.height,_e>=dN&&13>_e)if(11>_e)N=le.f.RGBA,B&=(Qe=Math.abs(N.A))*(Me-1)+De<=N.size,B&=Qe>=De*XM[_e],B&=N.eb!=null;else{N=le.f.kb,Qe=(De+1)/2,It=(Me+1)/2,ze=Math.abs(N.fa),nt=Math.abs(N.Ab);var Ht=Math.abs(N.Db),at=Math.abs(N.lb),jt=at*(Me-1)+De;B&=ze*(Me-1)+De<=N.Fd,B&=nt*(It-1)+Qe<=N.Cd,B=(B&=Ht*(It-1)+Qe<=N.Ed)&ze>=De&nt>=Qe&Ht>=Qe,B&=N.y!=null,B&=N.f!=null,B&=N.ea!=null,_e==12&&(B&=at>=De,B&=jt<=N.Tc,B&=N.F!=null)}else B=0;N=B?0:2}}return N!=0||K!=null&&K.fd&&(N=S1(le)),N}var Bm=64,Uc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qc=24,kA=32,rh=8,FA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,B,K){return B[K+0]},E.Predictor3=function(N,B,K){return B[K+1]},E.Predictor4=function(N,B,K){return B[K-1]},E.Predictor5=function(N,B,K){return He(He(N,B[K+1]),B[K+0])},E.Predictor6=function(N,B,K){return He(N,B[K-1])},E.Predictor7=function(N,B,K){return He(N,B[K+0])},E.Predictor8=function(N,B,K){return He(B[K-1],B[K+0])},E.Predictor9=function(N,B,K){return He(B[K+0],B[K+1])},E.Predictor10=function(N,B,K){return He(He(N,B[K-1]),He(B[K+0],B[K+1]))},E.Predictor11=function(N,B,K){var le=B[K+0];return 0>=vt(le>>24&255,N>>24&255,(B=B[K-1])>>24&255)+vt(le>>16&255,N>>16&255,B>>16&255)+vt(le>>8&255,N>>8&255,B>>8&255)+vt(255&le,255&N,255&B)?le:N},E.Predictor12=function(N,B,K){var le=B[K+0];return(gt((N>>24&255)+(le>>24&255)-((B=B[K-1])>>24&255))<<24|gt((N>>16&255)+(le>>16&255)-(B>>16&255))<<16|gt((N>>8&255)+(le>>8&255)-(B>>8&255))<<8|gt((255&N)+(255&le)-(255&B)))>>>0},E.Predictor13=function(N,B,K){var le=B[K-1];return(ut((N=He(N,B[K+0]))>>24&255,le>>24&255)<<24|ut(N>>16&255,le>>16&255)<<16|ut(N>>8&255,le>>8&255)<<8|ut(255&N,255&le))>>>0};var I1=E.PredictorAdd0;E.PredictorAdd1=Pe,pt("Predictor2","PredictorAdd2"),pt("Predictor3","PredictorAdd3"),pt("Predictor4","PredictorAdd4"),pt("Predictor5","PredictorAdd5"),pt("Predictor6","PredictorAdd6"),pt("Predictor7","PredictorAdd7"),pt("Predictor8","PredictorAdd8"),pt("Predictor9","PredictorAdd9"),pt("Predictor10","PredictorAdd10"),pt("Predictor11","PredictorAdd11"),pt("Predictor12","PredictorAdd12"),pt("Predictor13","PredictorAdd13");var Rg=E.PredictorAdd2;ue("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),ue("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var ui,lN=E.ColorIndexInverseTransform,hf=E.MapARGB,Af=E.VP8LColorIndexInverseTransformAlpha,j1=E.MapAlpha,P1=E.VP8LPredictorsAdd=[];P1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var B1,T1,OA,DA,RA,Tm,MA,km,Su,mf,pa,$a,di,Vi,nh,k1,Mg,cN,_M,EM,SM,IM,jM,PM,F1,BM,TM,kM,FM=s(511),OM=s(2041),DM=s(225),RM=s(767),MM=0,mP=OM,uN=DM,Vc=RM,Iu=FM,dN=0,fN=1,LM=2,hN=3,AN=4,pP=5,UM=6,gP=7,xP=8,mN=9,vP=10,Due=[2,3,7],Rue=[3,3,11],QM=[280,256,256,256,40],Mue=[0,1,1,1,0],Lue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Uue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Que=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Vue=8,yP=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bP=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],O1=null,Hue=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$ue=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],VM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gue=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Kue=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],que=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zue=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],LA=[],Nd=[],ah=[],Wue=1,HM=2,UA=[],ju=[];_u("UpsampleRgbLinePair",kt,3),_u("UpsampleBgrLinePair",Kt,3),_u("UpsampleRgbaLinePair",aa,4),_u("UpsampleBgraLinePair",Rn,4),_u("UpsampleArgbLinePair",Os,4),_u("UpsampleRgba4444LinePair",qn,2),_u("UpsampleRgb565LinePair",wr,2);var Xue=E.UpsampleRgbLinePair,Yue=E.UpsampleBgrLinePair,$M=E.UpsampleRgbaLinePair,GM=E.UpsampleBgraLinePair,KM=E.UpsampleArgbLinePair,qM=E.UpsampleRgba4444LinePair,Jue=E.UpsampleRgb565LinePair,pN=16,gN=1<<pN-1,D1=-227,wP=482,Zue=6,zM=0,ede=s(256),tde=s(256),rde=s(256),nde=s(256),ade=s(wP-D1),sde=s(wP-D1);Ja("YuvToRgbRow",kt,3),Ja("YuvToBgrRow",Kt,3),Ja("YuvToRgbaRow",aa,4),Ja("YuvToBgraRow",Rn,4),Ja("YuvToArgbRow",Os,4),Ja("YuvToRgba4444Row",qn,2),Ja("YuvToRgb565Row",wr,2);var WM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xN=[0,2,8],ide=[8,7,6,4,4,2,2,2,1,1,1,1],ode=1;this.WebPDecodeRGBA=function(N,B,K,le,_e){var De=fN,Me=new nr,Qe=new de;Me.ba=Qe,Qe.S=De,Qe.width=[Qe.width],Qe.height=[Qe.height];var ze=Qe.width,nt=Qe.height,It=new Se;if(It==null||N==null)var Ht=2;else e(It!=null),Ht=wd(N,B,K,It.width,It.height,It.Pd,It.Qd,It.format,null);if(Ht!=0?ze=0:(ze!=null&&(ze[0]=It.width[0]),nt!=null&&(nt[0]=It.height[0]),ze=1),ze){Qe.width=Qe.width[0],Qe.height=Qe.height[0],le!=null&&(le[0]=Qe.width),_e!=null&&(_e[0]=Qe.height);e:{if(le=new Vr,(_e=new lr).data=N,_e.w=B,_e.ha=K,_e.kd=1,B=[0],e(_e!=null),((N=wd(_e.data,_e.w,_e.ha,null,null,null,B,null,_e))==0||N==7)&&B[0]&&(N=4),(B=N)==0){if(e(Me!=null),le.data=_e.data,le.w=_e.w+_e.offset,le.ha=_e.ha-_e.offset,le.put=Ne,le.ac=et,le.bc=mt,le.ma=Me,_e.xa){if((N=ot())==null){Me=1;break e}if(function(at,jt){var Ft=[0],er=[0],Vt=[0];t:for(;;){if(at==null)return 0;if(jt==null)return at.a=2,0;if(at.l=jt,at.a=0,ae(at.m,jt.data,jt.w,jt.ha),!W(at.m,Ft,er,Vt)){at.a=3;break t}if(at.xb=HM,jt.width=Ft[0],jt.height=er[0],!Fe(Ft[0],er[0],1,at,null))break t;return 1}return e(at.a!=0),0}(N,le)){if(le=(B=TA(le.width,le.height,Me.Oa,Me.ba))==0){t:{le=N;r:for(;;){if(le==null){le=0;break t}if(e(le.s.yc!=null),e(le.s.Ya!=null),e(0<le.s.Wb),e((K=le.l)!=null),e((_e=K.ma)!=null),le.xb!=0){if(le.ca=_e.ba,le.tb=_e.tb,e(le.ca!=null),!E1(_e.Oa,K,hN)){le.a=2;break r}if(!Xe(le,K.width)||K.da)break r;if((K.da||re(le.ca.S))&&hc(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&hc()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!te(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Oe(le,le.V,le.Ba,le.c,le.i,K.o,V))break r;_e.Dc=le.Ma,le=1;break t}e(le.a!=0),le=0}le=!le}le&&(B=N.a)}else B=N.a}else{if((N=new Rr)==null){Me=1;break e}if(N.Fa=_e.na,N.P=_e.P,N.qc=_e.Sa,Nt(N,le)){if((B=TA(le.width,le.height,Me.Oa,Me.ba))==0){if(N.Aa=0,K=Me.Oa,e((_e=N)!=null),K!=null){if(0<(ze=0>(ze=K.Md)?0:100<ze?255:255*ze/100)){for(nt=It=0;4>nt;++nt)12>(Ht=_e.pb[nt]).lc&&(Ht.ia=ze*ide[0>Ht.lc?0:Ht.lc]>>3),It|=Ht.ia;It&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=K.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}(function(at,jt){if(at==null)return 0;if(jt==null)return an(at,2,"NULL VP8Io parameter in VP8Decode().");if(!at.cb&&!Nt(at,jt))return 0;if(e(at.cb),jt.ac==null||jt.ac(jt)){jt.ob&&(at.L=0);var Ft=xN[at.L];if(at.L==2?(at.yb=0,at.zb=0):(at.yb=jt.v-Ft>>4,at.zb=jt.j-Ft>>4,0>at.yb&&(at.yb=0),0>at.zb&&(at.zb=0)),at.Va=jt.o+15+Ft>>4,at.Hb=jt.va+15+Ft>>4,at.Hb>at.za&&(at.Hb=at.za),at.Va>at.Ub&&(at.Va=at.Ub),0<at.L){var er=at.ed;for(Ft=0;4>Ft;++Ft){var Vt;if(at.Qa.Cb){var ar=at.Qa.Lb[Ft];at.Qa.Fb||(ar+=er.Tb)}else ar=er.Tb;for(Vt=0;1>=Vt;++Vt){var sr=at.gd[Ft][Vt],mr=ar;if(er.Pc&&(mr+=er.vd[0],Vt&&(mr+=er.od[0])),0<(mr=0>mr?0:63<mr?63:mr)){var dr=mr;0<er.wb&&(dr=4<er.wb?dr>>2:dr>>1)>9-er.wb&&(dr=9-er.wb),1>dr&&(dr=1),sr.dd=dr,sr.tc=2*mr+dr,sr.ld=40<=mr?2:15<=mr?1:0}else sr.tc=0;sr.La=Vt}}}Ft=0}else an(at,6,"Frame setup failed"),Ft=at.a;if(Ft=Ft==0){if(Ft){at.$c=0,0<at.Aa||(at.Ic=ode);t:{Ft=at.Ic,er=4*(dr=at.za);var Zr=32*dr,Hr=dr+1,Sn=0<at.L?dr*(0<at.Aa?2:1):0,zr=(at.Aa==2?2:1)*dr;if((sr=er+832+(Vt=3*(16*Ft+xN[at.L])/2*Zr)+(ar=at.Fa!=null&&0<at.Fa.length?at.Kc.c*at.Kc.i:0))!=sr)Ft=0;else{if(sr>at.Vb){if(at.Vb=0,at.Ec=s(sr),at.Fc=0,at.Ec==null){Ft=an(at,1,"no memory during frame initialization.");break t}at.Vb=sr}sr=at.Ec,mr=at.Fc,at.Ac=sr,at.Bc=mr,mr+=er,at.Gd=o(Zr,gr),at.Hd=0,at.rb=o(Hr+1,Dt),at.sb=1,at.wa=Sn?o(Sn,Ot):null,at.Y=0,at.D.Nb=0,at.D.wa=at.wa,at.D.Y=at.Y,0<at.Aa&&(at.D.Y+=dr),e(!0),at.oc=sr,at.pc=mr,mr+=832,at.ya=o(zr,ir),at.aa=0,at.D.ya=at.ya,at.D.aa=at.aa,at.Aa==2&&(at.D.aa+=dr),at.R=16*dr,at.B=8*dr,dr=(Zr=xN[at.L])*at.R,Zr=Zr/2*at.B,at.sa=sr,at.ta=mr+dr,at.qa=at.sa,at.ra=at.ta+16*Ft*at.R+Zr,at.Ha=at.qa,at.Ia=at.ra+8*Ft*at.B+Zr,at.$c=0,mr+=Vt,at.mb=ar?sr:null,at.nb=ar?mr:null,e(mr+ar<=at.Fc+at.Vb),st(at),a(at.Ac,at.Bc,0,er),Ft=1}}if(Ft){if(jt.ka=0,jt.y=at.sa,jt.O=at.ta,jt.f=at.qa,jt.N=at.ra,jt.ea=at.Ha,jt.Vd=at.Ia,jt.fa=at.R,jt.Rc=at.B,jt.F=null,jt.J=0,!MM){for(Ft=-255;255>=Ft;++Ft)FM[255+Ft]=0>Ft?-Ft:Ft;for(Ft=-1020;1020>=Ft;++Ft)OM[1020+Ft]=-128>Ft?-128:127<Ft?127:Ft;for(Ft=-112;112>=Ft;++Ft)DM[112+Ft]=-16>Ft?-16:15<Ft?15:Ft;for(Ft=-255;510>=Ft;++Ft)RM[255+Ft]=0>Ft?0:255<Ft?255:Ft;MM=1}MA=hr,km=Yt,mf=Xt,pa=br,$a=zt,Su=qt,di=BA,Vi=Cu,nh=Ce,k1=rt,Mg=Pm,cN=Q,_M=wt,EM=Tt,SM=ff,IM=Ql,jM=jm,PM=Dg,Nd[0]=C1,Nd[1]=Ya,Nd[2]=w1,Nd[3]=N1,Nd[4]=po,Nd[5]=_1,Nd[6]=yd,Nd[7]=IA,Nd[8]=jA,Nd[9]=bd,LA[0]=Ha,LA[1]=Va,LA[2]=Lo,LA[3]=Qi,LA[4]=Rc,LA[5]=vd,LA[6]=Fg,ah[0]=Sm,ah[1]=Dn,ah[2]=Mc,ah[3]=eh,ah[4]=Im,ah[5]=Da,ah[6]=Og,Ft=1}else Ft=0}Ft&&(Ft=function(zn,Hi){for(zn.M=0;zn.M<zn.Va;++zn.M){var In,Wr=zn.Jc[zn.M&zn.Xb],Tr=zn.m,fi=zn;for(In=0;In<fi.za;++In){var Cn=Tr,Xn=fi,is=Xn.Ac,Qo=Xn.Bc+4*In,Hl=Xn.zc,Zs=Xn.ya[Xn.aa+In];if(Xn.Qa.Bb?Zs.$b=ne(Cn,Xn.Pa.jb[0])?2+ne(Cn,Xn.Pa.jb[2]):ne(Cn,Xn.Pa.jb[1]):Zs.$b=0,Xn.kc&&(Zs.Ad=ne(Cn,Xn.Bd)),Zs.Za=!ne(Cn,145)+0,Zs.Za){var hl=Zs.Ob,$l=0;for(Xn=0;4>Xn;++Xn){var $i,Zn=Hl[0+Xn];for($i=0;4>$i;++$i){Zn=Kue[is[Qo+$i]][Zn];for(var wa=VM[ne(Cn,Zn[0])];0<wa;)wa=VM[2*wa+ne(Cn,Zn[wa])];Zn=-wa,is[Qo+$i]=Zn}n(hl,$l,is,Qo,4),$l+=4,Hl[0+Xn]=Zn}}else Zn=ne(Cn,156)?ne(Cn,128)?1:3:ne(Cn,163)?2:0,Zs.Ob[0]=Zn,a(is,Qo,Zn,4),a(Hl,0,Zn,4);Zs.Dd=ne(Cn,142)?ne(Cn,114)?ne(Cn,183)?1:3:2:0}if(fi.m.Ka)return an(zn,7,"Premature end-of-partition0 encountered.");for(;zn.ja<zn.za;++zn.ja){if(fi=Wr,Cn=(Tr=zn).rb[Tr.sb-1],is=Tr.rb[Tr.sb+Tr.ja],In=Tr.ya[Tr.aa+Tr.ja],Qo=Tr.kc?In.Ad:0)Cn.la=is.la=0,In.Za||(Cn.Na=is.Na=0),In.Hc=0,In.Gc=0,In.ia=0;else{var ei,Na;if(Cn=is,is=fi,Qo=Tr.Pa.Xc,Hl=Tr.ya[Tr.aa+Tr.ja],Zs=Tr.pb[Hl.$b],Xn=Hl.ad,hl=0,$l=Tr.rb[Tr.sb-1],Zn=$i=0,a(Xn,hl,0,384),Hl.Za)var Vo=0,Cd=Qo[3];else{wa=s(16);var hi=Cn.Na+$l.Na;if(hi=O1(is,Qo[1],hi,Zs.Eb,0,wa,0),Cn.Na=$l.Na=(0<hi)+0,1<hi)MA(wa,0,Xn,hl);else{var Ac=wa[0]+3>>3;for(wa=0;256>wa;wa+=16)Xn[hl+wa]=Ac}Vo=1,Cd=Qo[0]}var Ga=15&Cn.la,Gi=15&$l.la;for(wa=0;4>wa;++wa){var Hc=1&Gi;for(Ac=Na=0;4>Ac;++Ac)Ga=Ga>>1|(Hc=(hi=O1(is,Cd,hi=Hc+(1&Ga),Zs.Sc,Vo,Xn,hl))>Vo)<<7,Na=Na<<2|(3<hi?3:1<hi?2:Xn[hl+0]!=0),hl+=16;Ga>>=4,Gi=Gi>>1|Hc<<7,$i=($i<<8|Na)>>>0}for(Cd=Ga,Vo=Gi>>4,ei=0;4>ei;ei+=2){for(Na=0,Ga=Cn.la>>4+ei,Gi=$l.la>>4+ei,wa=0;2>wa;++wa){for(Hc=1&Gi,Ac=0;2>Ac;++Ac)hi=Hc+(1&Ga),Ga=Ga>>1|(Hc=0<(hi=O1(is,Qo[2],hi,Zs.Qc,0,Xn,hl)))<<3,Na=Na<<2|(3<hi?3:1<hi?2:Xn[hl+0]!=0),hl+=16;Ga>>=2,Gi=Gi>>1|Hc<<5}Zn|=Na<<4*ei,Cd|=Ga<<4<<ei,Vo|=(240&Gi)<<ei}Cn.la=Cd,$l.la=Vo,Hl.Hc=$i,Hl.Gc=Zn,Hl.ia=43690&Zn?0:Zs.ia,Qo=!($i|Zn)}if(0<Tr.L&&(Tr.wa[Tr.Y+Tr.ja]=Tr.gd[In.$b][In.Za],Tr.wa[Tr.Y+Tr.ja].La|=!Qo),fi.Ka)return an(zn,7,"Premature end-of-file encountered.")}if(st(zn),Tr=Hi,fi=1,In=(Wr=zn).D,Cn=0<Wr.L&&Wr.M>=Wr.zb&&Wr.M<=Wr.Va,Wr.Aa==0)t:{if(In.M=Wr.M,In.uc=Cn,Uo(Wr,In),fi=1,In=(Na=Wr.D).Nb,Cn=(Zn=xN[Wr.L])*Wr.R,is=Zn/2*Wr.B,wa=16*In*Wr.R,Ac=8*In*Wr.B,Qo=Wr.sa,Hl=Wr.ta-Cn+wa,Zs=Wr.qa,Xn=Wr.ra-is+Ac,hl=Wr.Ha,$l=Wr.Ia-is+Ac,Gi=(Ga=Na.M)==0,$i=Ga>=Wr.Va-1,Wr.Aa==2&&Uo(Wr,Na),Na.uc)for(Hc=(hi=Wr).D.M,e(hi.D.uc),Na=hi.yb;Na<hi.Hb;++Na){Vo=Na,Cd=Hc;var Gl=($c=(Ho=hi).D).Nb;ei=Ho.R;var $c=$c.wa[$c.Y+Vo],Gc=Ho.sa,mc=Ho.ta+16*Gl*ei+16*Vo,Kc=$c.dd,Za=$c.tc;if(Za!=0)if(e(3<=Za),Ho.L==1)0<Vo&&IM(Gc,mc,ei,Za+4),$c.La&&PM(Gc,mc,ei,Za),0<Cd&&SM(Gc,mc,ei,Za+4),$c.La&&jM(Gc,mc,ei,Za);else{var qc=Ho.B,_d=Ho.qa,Fm=Ho.ra+8*Gl*qc+8*Vo,sh=Ho.Ha,Ho=Ho.Ia+8*Gl*qc+8*Vo;Gl=$c.ld,0<Vo&&(Vi(Gc,mc,ei,Za+4,Kc,Gl),k1(_d,Fm,sh,Ho,qc,Za+4,Kc,Gl)),$c.La&&(cN(Gc,mc,ei,Za,Kc,Gl),EM(_d,Fm,sh,Ho,qc,Za,Kc,Gl)),0<Cd&&(di(Gc,mc,ei,Za+4,Kc,Gl),nh(_d,Fm,sh,Ho,qc,Za+4,Kc,Gl)),$c.La&&(Mg(Gc,mc,ei,Za,Kc,Gl),_M(_d,Fm,sh,Ho,qc,Za,Kc,Gl))}}if(Wr.ia&&alert("todo:DitherRow"),Tr.put!=null){if(Na=16*Ga,Ga=16*(Ga+1),Gi?(Tr.y=Wr.sa,Tr.O=Wr.ta+wa,Tr.f=Wr.qa,Tr.N=Wr.ra+Ac,Tr.ea=Wr.Ha,Tr.W=Wr.Ia+Ac):(Na-=Zn,Tr.y=Qo,Tr.O=Hl,Tr.f=Zs,Tr.N=Xn,Tr.ea=hl,Tr.W=$l),$i||(Ga-=Zn),Ga>Tr.o&&(Ga=Tr.o),Tr.F=null,Tr.J=null,Wr.Fa!=null&&0<Wr.Fa.length&&Na<Ga&&(Tr.J=ba(Wr,Tr,Na,Ga-Na),Tr.F=Wr.mb,Tr.F==null&&Tr.F.length==0)){fi=an(Wr,3,"Could not decode alpha data.");break t}Na<Tr.j&&(Zn=Tr.j-Na,Na=Tr.j,e(!(1&Zn)),Tr.O+=Wr.R*Zn,Tr.N+=Wr.B*(Zn>>1),Tr.W+=Wr.B*(Zn>>1),Tr.F!=null&&(Tr.J+=Tr.width*Zn)),Na<Ga&&(Tr.O+=Tr.v,Tr.N+=Tr.v>>1,Tr.W+=Tr.v>>1,Tr.F!=null&&(Tr.J+=Tr.v),Tr.ka=Na-Tr.j,Tr.U=Tr.va-Tr.v,Tr.T=Ga-Na,fi=Tr.put(Tr))}In+1!=Wr.Ic||$i||(n(Wr.sa,Wr.ta-Cn,Qo,Hl+16*Wr.R,Cn),n(Wr.qa,Wr.ra-is,Zs,Xn+8*Wr.B,is),n(Wr.Ha,Wr.Ia-is,hl,$l+8*Wr.B,is))}if(!fi)return an(zn,6,"Output aborted.")}return 1}(at,jt)),jt.bc!=null&&jt.bc(jt),Ft&=1}return Ft?(at.cb=0,Ft):0})(N,le)||(B=N.a)}}else B=N.a}B==0&&Me.Oa!=null&&Me.Oa.fd&&(B=S1(Me.ba))}Me=B}De=Me!=0?null:11>De?Qe.f.RGBA.eb:Qe.f.kb.y}else De=null;return De};var XM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,F){for(var P="",k=0;k<4;k++)P+=String.fromCharCode(E[F++]);return P}function d(E,F){return E[F+0]|E[F+1]<<8}function f(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16)>>>0}function A(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],g=new c,x=t,y=function(E,F){var P={},k=0,D=!1,Z=0,fe=0;if(P.frames=[],!function(O,G){for(var z=0;z<4;z++)if(O[G+z]!="RIFF".charCodeAt(z))return!0;return!1}(E,F)){for(A(E,F+=4),F+=8;F<E.length;){var me=u(E,F),pe=A(E,F+=4);F+=4;var ye=pe+(1&pe);switch(me){case"VP8 ":case"VP8L":P.frames[k]===void 0&&(P.frames[k]={}),(Be=P.frames[k]).src_off=D?fe:F-8,Be.src_size=Z+pe+8,k++,D&&(D=!1,Z=0,fe=0);break;case"VP8X":(Be=P.header={}).feature_flags=E[F];var ae=F+4;Be.canvas_width=1+f(E,ae),ae+=3,Be.canvas_height=1+f(E,ae),ae+=3;break;case"ALPH":D=!0,Z=ye+8,fe=F-8;break;case"ANIM":(Be=P.header).bgcolor=A(E,F),ae=F+4,Be.loop_count=d(E,ae),ae+=2;break;case"ANMF":var je,Be;(Be=P.frames[k]={}).offset_x=2*f(E,F),F+=3,Be.offset_y=2*f(E,F),F+=3,Be.width=1+f(E,F),F+=3,Be.height=1+f(E,F),F+=3,Be.duration=f(E,F),F+=3,je=E[F++],Be.dispose=1&je,Be.blend=je>>1&1}me!="ANMF"&&(F+=ye)}return P}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=g.WebPDecodeRGBA(x,I.src_off,I.src_size,m,h);I.rgba=_,I.imgwidth=m[0],I.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)p[S]=_[S];return this.width=m,this.height=h,this.data=p,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=O;Object.defineProperty(this,"pdf",{get:function(){return G}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(te){z=!!te}});var L=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return L},set:function(te){L=!!te}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(te){isNaN(te)||(Y=te)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(te){isNaN(te)||(J=te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(te){var Ee;typeof te=="number"?Ee=[te,te,te,te]:((Ee=new Array(4))[0]=te[0],Ee[1]=te.length>=2?te[1]:Ee[0],Ee[2]=te.length>=3?te[2]:Ee[0],Ee[3]=te.length>=4?te[3]:Ee[1]),u.margin=Ee}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(te){R=te}});var H=0;Object.defineProperty(this,"lastBreak",{get:function(){return H},set:function(te){H=te}});var ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ne},set:function(te){ne=te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(te){te instanceof d&&(u=te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(te){u.path=te}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(te){ge=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var Ee;Ee=A(te),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var Ee=A(te);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var U=null,Ue=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(te){U=null,Ue=null,ie=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var Ee;if(this.ctx.font=te,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(te))!==null){var ce=Ee[1];Ee[2];var we=Ee[3],Re=Ee[4];Ee[5];var We=Ee[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor(pt==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var _t=function(ue){var Le,ke,Ae=[],Ye=ue.trim();if(Ye==="")return r5;if(Ye in uV)return[uV[Ye]];for(;Ye!=="";){switch(ke=null,Le=(Ye=fV(Ye)).charAt(0)){case'"':case"'":ke=_je(Ye.substring(1),Le);break;default:ke=Eje(Ye)}if(ke===null||(Ae.push(ke[0]),(Ye=fV(ke[1]))!==""&&Ye.charAt(0)!==","))return r5;Ye=Ye.replace(/^,/,"")}return Ae}(We);if(this.fontFaces){var He=function(ue,Le){var ke=ue.getFontList(),Ae=JSON.stringify(ke);if(U===null||Ue!==Ae){var Ye=function(yt){var At=[];return Object.keys(yt).forEach(function(he){yt[he].forEach(function(re){var oe=null;switch(re){case"bold":oe={family:he,weight:"bold"};break;case"italic":oe={family:he,style:"italic"};break;case"bolditalic":oe={family:he,weight:"bold",style:"italic"};break;case"":case"normal":oe={family:he}}oe!==null&&(oe.ref={name:he,style:re},At.push(oe))})}),At}(ke);U=function(yt){for(var At={},he=0;he<yt.length;++he){var re=t5(yt[he]),oe=re.family,Ve=re.stretch,de=re.style,Se=re.weight;At[oe]=At[oe]||{},At[oe][Ve]=At[oe][Ve]||{},At[oe][Ve][de]=At[oe][Ve][de]||{},At[oe][Ve][de][Se]=re}return At}(Ye.concat(Le)),Ue=Ae}return U}(this.pdf,this.fontFaces),gt=_t.map(function(ue){return{family:ue,stretch:"normal",weight:we,style:ce}}),ut=function(ue,Le,ke){for(var Ae=(ke=ke||{}).defaultFontFamily||"times",Ye=Object.assign({},Cje,ke.genericFontFamilies||{}),yt=null,At=null,he=0;he<Le.length;++he)if(Ye[(yt=t5(Le[he])).family]&&(yt.family=Ye[yt.family]),ue.hasOwnProperty(yt.family)){At=ue[yt.family];break}if(!(At=At||ue[Ae]))throw new Error("Could not find a font-family for the rule '"+dV(yt)+"' and default family '"+Ae+"'.");if(At=function(re,oe){if(oe[re])return oe[re];var Ve=Ik[re],de=Ve<=Ik.normal?-1:1,Se=cV(oe,lre,Ve,de);if(!Se)throw new Error("Could not find a matching font-stretch value for "+re);return Se}(yt.stretch,At),At=function(re,oe){if(oe[re])return oe[re];for(var Ve=ore[re],de=0;de<Ve.length;++de)if(oe[Ve[de]])return oe[Ve[de]];throw new Error("Could not find a matching font-style for "+re)}(yt.style,At),!(At=function(re,oe){if(oe[re])return oe[re];if(re===400&&oe[500])return oe[500];if(re===500&&oe[400])return oe[400];var Ve=Nje[re],de=cV(oe,cre,Ve,re<400?-1:1);if(!de)throw new Error("Could not find a matching font-weight for value "+re);return de}(yt.weight,At)))throw new Error("Failed to resolve a font for the rule '"+dV(yt)+"'.");return At}(He,gt);this.pdf.setFont(ut.ref.name,ut.ref.style)}else{var vt="";(we==="bold"||parseInt(we,10)>=700||ce==="bold")&&(vt="bold"),ce==="italic"&&(vt+="italic"),vt.length===0&&(vt="normal");for(var Pe="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<_t.length;lt++){if(this.pdf.internal.getFont(_t[lt],vt,{noFallback:!0,disableWarning:!0})!==void 0){Pe=_t[lt];break}if(vt==="bolditalic"&&this.pdf.internal.getFont(_t[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pe=_t[lt],vt="bold";else if(this.pdf.internal.getFont(_t[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pe=_t[lt],vt="normal";break}}if(Pe===""){for(var be=0;be<_t.length;be++)if(ct[_t[be]]){Pe=ct[_t[be]];break}}Pe=Pe===""?"Times":Pe,this.pdf.setFont(Pe,vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,Be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,Be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,G){if(isNaN(O)||isNaN(G))throw qa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(O,G)},f.prototype.closePath=function(){var O=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Ba(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){O=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,G){if(isNaN(O)||isNaN(G))throw qa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,G,z,L){if(isNaN(z)||isNaN(L)||isNaN(O)||isNaN(G))throw qa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new o(z,L)),J=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"qct",x1:J.x,y1:J.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.bezierCurveTo=function(O,G,z,L,Y,J){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L))throw qa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new o(Y,J)),H=this.ctx.transform.applyToPoint(new o(O,G)),ne=this.ctx.transform.applyToPoint(new o(z,L));this.path.push({type:"bct",x1:H.x,y1:H.y,x2:ne.x,y2:ne.y,x:R.x,y:R.y}),this.ctx.lastPoint=new o(R.x,R.y)},f.prototype.arc=function(O,G,z,L,Y,J){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L)||isNaN(Y))throw qa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new o(O,G));O=R.x,G=R.y;var H=this.ctx.transform.applyToPoint(new o(0,z)),ne=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(H.x-ne.x,2)+Math.pow(H.y-ne.y,2))}Math.abs(Y-L)>=2*Math.PI&&(L=0,Y=2*Math.PI),this.path.push({type:"arc",x:O,y:G,radius:z,startAngle:L,endAngle:Y,counterclockwise:J})},f.prototype.arcTo=function(O,G,z,L,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,G,z,L){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L))throw qa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,G),this.lineTo(O+z,G),this.lineTo(O+z,G+L),this.lineTo(O,G+L),this.lineTo(O,G),this.lineTo(O+z,G),this.lineTo(O,G)},f.prototype.fillRect=function(O,G,z,L){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L))throw qa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,G,z,L),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(O,G,z,L){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L))throw qa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(O,G,z,L),this.stroke())},f.prototype.clearRect=function(O,G,z,L){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L))throw qa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,G,z,L))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var L=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=L}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(G),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(O){var G,z,L,Y;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))G=0,z=0,L=0,Y=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(J!==null)G=parseInt(J[1]),z=parseInt(J[2]),L=parseInt(J[3]),Y=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)G=parseInt(J[1]),z=parseInt(J[2]),L=parseInt(J[3]),Y=parseFloat(J[4]);else{if(Y=1,typeof O=="string"&&O.charAt(0)!=="#"){var R=new ere(O);O=R.ok?R.toHex():"#000000"}O.length===4?(G=O.substring(1,2),G+=G,z=O.substring(2,3),z+=z,L=O.substring(3,4),L+=L):(G=O.substring(1,3),z=O.substring(3,5),L=O.substring(5,7)),G=parseInt(G,16),z=parseInt(z,16),L=parseInt(L,16)}}return{r:G,g:z,b:L,a:Y,style:O}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,G,z,L){if(isNaN(G)||isNaN(z)||typeof O!="string")throw qa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(L=isNaN(L)?void 0:L,!h.call(this)){var Y=ye(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;k.call(this,{text:O,x:G,y:z,scale:J,angle:Y,align:this.textAlign,maxWidth:L})}},f.prototype.strokeText=function(O,G,z,L){if(isNaN(G)||isNaN(z)||typeof O!="string")throw qa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){L=isNaN(L)?void 0:L;var Y=ye(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;k.call(this,{text:O,x:G,y:z,scale:J,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:L})}},f.prototype.measureText=function(O){if(typeof O!="string")throw qa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,z=this.pdf.internal.scaleFactor,L=G.internal.getFontSize(),Y=G.getStringUnitWidth(O)*L/G.internal.scaleFactor;return new function(J){var R=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return R}}),this}({width:Y*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(O,G){if(isNaN(O)||isNaN(G))throw qa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(O,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(O){if(isNaN(O))throw qa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(O,G){if(isNaN(O)||isNaN(G))throw qa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,O,G);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(O,G,z,L,Y,J){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(L)||isNaN(Y)||isNaN(J))throw qa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new c(O,G,z,L,Y,J);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.setTransform=function(O,G,z,L,Y,J){O=isNaN(O)?1:O,G=isNaN(G)?0:G,z=isNaN(z)?0:z,L=isNaN(L)?1:L,Y=isNaN(Y)?0:Y,J=isNaN(J)?0:J,this.ctx.transform=new c(O,G,z,L,Y,J)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,G,z,L,Y,J,R,H,ne){var ge=this.pdf.getImageProperties(O),U=1,Ue=1,ie=1,te=1;L!==void 0&&H!==void 0&&(ie=H/L,te=ne/Y,U=ge.width/L*H/L,Ue=ge.height/Y*ne/Y),J===void 0&&(J=G,R=z,G=0,z=0),L!==void 0&&H===void 0&&(H=L,ne=Y),L===void 0&&H===void 0&&(H=ge.width,ne=ge.height);var Ee=this.ctx.transform.decompose(),ce=ye(Ee.rotate.shx),we=new c,Re=(we=(we=(we=we.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new l(J-G*ie,R-z*te,L*U,Y*Ue));if(this.autoPaging){for(var We,pt=g.call(this,Re),_t=[],He=0;He<pt.length;He+=1)_t.indexOf(pt[He])===-1&&_t.push(pt[He]);b(_t);for(var gt=_t[0],ut=_t[_t.length-1],vt=gt;vt<ut+1;vt++){this.pdf.setPage(vt);var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=vt===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ue=vt===1?0:lt+(vt-2)*be;if(this.ctx.clip_path.length!==0){var Le=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(We,this.posX+this.margin[3],-ue+ct+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Le}var ke=JSON.parse(JSON.stringify(Re));ke=y([ke],this.posX+this.margin[3],-ue+ct+this.ctx.prevPageLastElemOffset)[0];var Ae=(vt>gt||vt<ut)&&p.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,be,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,ce),Ae&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,ce)};var g=function(O,G,z){var L=[];G=G||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":L.push(Math.floor((O.y+Y)/z)+1);break;case"arc":L.push(Math.floor((O.y+Y-O.radius)/z)+1),L.push(Math.floor((O.y+Y+O.radius)/z)+1);break;case"qct":var J=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);L.push(Math.floor((J.y+Y)/z)+1),L.push(Math.floor((J.y+J.h+Y)/z)+1);break;case"bct":var R=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);L.push(Math.floor((R.y+Y)/z)+1),L.push(Math.floor((R.y+R.h+Y)/z)+1);break;case"rect":L.push(Math.floor((O.y+Y)/z)+1),L.push(Math.floor((O.y+O.h+Y)/z)+1)}for(var H=0;H<L.length;H+=1)for(;this.pdf.internal.getNumberOfPages()<L[H];)x.call(this);return L},x=function(){var O=this.fillStyle,G=this.strokeStyle,z=this.font,L=this.lineCap,Y=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=G,this.font=z,this.lineCap=L,this.lineWidth=Y,this.lineJoin=J},y=function(O,G,z){for(var L=0;L<O.length;L++)switch(O[L].type){case"bct":O[L].x2+=G,O[L].y2+=z;case"qct":O[L].x1+=G,O[L].y1+=z;default:O[L].x+=G,O[L].y+=z}return O},b=function(O){return O.sort(function(G,z){return G-z})},w=function(O,G){var z=this.fillStyle,L=this.strokeStyle,Y=this.lineCap,J=this.lineWidth,R=Math.abs(J*this.ctx.transform.scaleX),H=this.lineJoin;if(this.autoPaging){for(var ne,ge,U=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),ie=[],te=0;te<Ue.length;te++)if(Ue[te].x!==void 0)for(var Ee=g.call(this,Ue[te]),ce=0;ce<Ee.length;ce+=1)ie.indexOf(Ee[ce])===-1&&ie.push(Ee[ce]);for(var we=0;we<ie.length;we++)for(;this.pdf.internal.getNumberOfPages()<ie[we];)x.call(this);b(ie);for(var Re=ie[0],We=ie[ie.length-1],pt=Re;pt<We+1;pt++){this.pdf.setPage(pt),this.fillStyle=z,this.strokeStyle=L,this.lineCap=Y,this.lineWidth=R,this.lineJoin=H;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=pt===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=pt===1?0:gt+(pt-2)*ut;if(this.ctx.clip_path.length!==0){var Pe=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ne,this.posX+this.margin[3],-vt+He+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=Pe}if(ge=JSON.parse(JSON.stringify(U)),this.path=y(ge,this.posX+this.margin[3],-vt+He+this.ctx.prevPageLastElemOffset),G===!1||pt===0){var ct=(pt>Re||pt<We)&&p.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,ut,null).clip().discardPath()),j.call(this,O,G),ct&&this.pdf.restoreGraphicsState()}this.lineWidth=J}this.path=U}else this.lineWidth=R,j.call(this,O,G),this.lineWidth=J},j=function(O,G){if((O!=="stroke"||G||!m.call(this))&&(O==="stroke"||G||!h.call(this))){for(var z,L,Y=[],J=this.path,R=0;R<J.length;R++){var H=J[R];switch(H.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:H,deltas:[],abs:[]});break;case"lt":var ne=Y.length;if(J[R-1]&&!isNaN(J[R-1].x)&&(z=[H.x-J[R-1].x,H.y-J[R-1].y],ne>0)){for(;ne>=0;ne--)if(Y[ne-1].close!==!0&&Y[ne-1].begin!==!0){Y[ne-1].deltas.push(z),Y[ne-1].abs.push(H);break}}break;case"bct":z=[H.x1-J[R-1].x,H.y1-J[R-1].y,H.x2-J[R-1].x,H.y2-J[R-1].y,H.x-J[R-1].x,H.y-J[R-1].y],Y[Y.length-1].deltas.push(z);break;case"qct":var ge=J[R-1].x+2/3*(H.x1-J[R-1].x),U=J[R-1].y+2/3*(H.y1-J[R-1].y),Ue=H.x+2/3*(H.x1-H.x),ie=H.y+2/3*(H.y1-H.y),te=H.x,Ee=H.y;z=[ge-J[R-1].x,U-J[R-1].y,Ue-J[R-1].x,ie-J[R-1].y,te-J[R-1].x,Ee-J[R-1].y],Y[Y.length-1].deltas.push(z);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(H)}}L=G?null:O==="stroke"?"stroke":"fill";for(var ce=!1,we=0;we<Y.length;we++)if(Y[we].arc)for(var Re=Y[we].abs,We=0;We<Re.length;We++){var pt=Re[We];pt.type==="arc"?S.call(this,pt.x,pt.y,pt.radius,pt.startAngle,pt.endAngle,pt.counterclockwise,void 0,G,!ce):D.call(this,pt.x,pt.y),ce=!0}else if(Y[we].close===!0)this.pdf.internal.out("h"),ce=!1;else if(Y[we].begin!==!0){var _t=Y[we].start.x,He=Y[we].start.y;Z.call(this,Y[we].deltas,_t,He),ce=!0}L&&E.call(this,L),G&&F.call(this)}},I=function(O){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-z;case"top":return O+G-z;case"hanging":return O+G-2*z;case"middle":return O+G/2-z;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(G,z){this.colorStops.push([G,z])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,G,z,L,Y,J,R,H,ne){for(var ge=me.call(this,z,L,Y,J),U=0;U<ge.length;U++){var Ue=ge[U];U===0&&(ne?P.call(this,Ue.x1+O,Ue.y1+G):D.call(this,Ue.x1+O,Ue.y1+G)),fe.call(this,O,G,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}H?F.call(this):E.call(this,R)},E=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(O,G){this.pdf.internal.out(r(O)+" "+n(G)+" m")},k=function(O){var G;switch(O.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var z,L,Y,J=this.pdf.getTextDimensions(O.text),R=I.call(this,O.y),H=_.call(this,R)-J.h,ne=this.ctx.transform.applyToPoint(new o(O.x,R));if(this.autoPaging){var ge=this.ctx.transform.decompose(),U=new c;U=(U=(U=U.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Ue=this.ctx.transform.applyToRectangle(new l(O.x,R,J.w,J.h)),ie=U.applyToRectangle(new l(O.x,H,J.w,J.h)),te=g.call(this,ie),Ee=[],ce=0;ce<te.length;ce+=1)Ee.indexOf(te[ce])===-1&&Ee.push(te[ce]);b(Ee);for(var we=Ee[0],Re=Ee[Ee.length-1],We=we;We<Re+1;We++){this.pdf.setPage(We);var pt=We===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],gt=He-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],vt=ut-this.margin[3],Pe=We===1?0:_t+(We-2)*gt;if(this.ctx.clip_path.length!==0){var ct=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(z,this.posX+this.margin[3],-1*Pe+pt),j.call(this,"fill",!0),this.path=ct}var lt=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-Pe+pt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(L=this.pdf.internal.getFontSize(),this.pdf.setFontSize(L*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale);var be=this.autoPaging!=="text";if(be||lt.y+lt.h<=He){if(be||lt.y>=pt&&lt.x<=ut){var ue=be?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||ut-lt.x)[0],Le=y([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Pe+pt+this.ctx.prevPageLastElemOffset)[0],ke=be&&(We>we||We<Re)&&p.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,gt,null).clip().discardPath()),this.pdf.text(ue,Le.x,Le.y,{angle:O.angle,align:G,renderingMode:O.renderingMode}),ke&&this.pdf.restoreGraphicsState()}}else lt.y<He&&(this.ctx.prevPageLastElemOffset+=He-lt.y);O.scale>=.01&&(this.pdf.setFontSize(L),this.lineWidth=Y)}}else O.scale>=.01&&(L=this.pdf.internal.getFontSize(),this.pdf.setFontSize(L*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale),this.pdf.text(O.text,ne.x+this.posX,ne.y+this.posY,{angle:O.angle,align:G,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(L),this.lineWidth=Y)},D=function(O,G,z,L){z=z||0,L=L||0,this.pdf.internal.out(r(O+z)+" "+n(G+L)+" l")},Z=function(O,G,z){return this.pdf.lines(O,G,z,null,null)},fe=function(O,G,z,L,Y,J,R,H){this.pdf.internal.out([e(a(z+O)),e(s(L+G)),e(a(Y+O)),e(s(J+G)),e(a(R+O)),e(s(H+G)),"c"].join(" "))},me=function(O,G,z,L){for(var Y=2*Math.PI,J=Math.PI/2;G>z;)G-=Y;var R=Math.abs(z-G);R<Y&&L&&(R=Y-R);for(var H=[],ne=L?-1:1,ge=G;R>1e-5;){var U=ge+ne*Math.min(R,J);H.push(pe.call(this,O,ge,U)),R-=Math.abs(U-ge),ge=U}return H},pe=function(O,G,z){var L=(z-G)/2,Y=O*Math.cos(L),J=O*Math.sin(L),R=Y,H=-J,ne=R*R+H*H,ge=ne+R*Y+H*J,U=4/3*(Math.sqrt(2*ne*ge)-ge)/(R*J-H*Y),Ue=R-U*H,ie=H+U*R,te=Ue,Ee=-ie,ce=L+G,we=Math.cos(ce),Re=Math.sin(ce);return{x1:O*Math.cos(G),y1:O*Math.sin(G),x2:Ue*we-ie*Re,y2:Ue*Re+ie*we,x3:te*we-Ee*Re,y3:te*Re+Ee*we,x4:O*Math.cos(z),y4:O*Math.sin(z)}},ye=function(O){return 180*O/Math.PI},ae=function(O,G,z,L,Y,J){var R=O+.5*(z-O),H=G+.5*(L-G),ne=Y+.5*(z-Y),ge=J+.5*(L-J),U=Math.min(O,Y,R,ne),Ue=Math.max(O,Y,R,ne),ie=Math.min(G,J,H,ge),te=Math.max(G,J,H,ge);return new l(U,ie,Ue-U,te-ie)},je=function(O,G,z,L,Y,J,R,H){var ne,ge,U,Ue,ie,te,Ee,ce,we,Re,We,pt,_t,He,gt=z-O,ut=L-G,vt=Y-z,Pe=J-L,ct=R-Y,lt=H-J;for(ge=0;ge<41;ge++)we=(Ee=(U=O+(ne=ge/40)*gt)+ne*((ie=z+ne*vt)-U))+ne*(ie+ne*(Y+ne*ct-ie)-Ee),Re=(ce=(Ue=G+ne*ut)+ne*((te=L+ne*Pe)-Ue))+ne*(te+ne*(J+ne*lt-te)-ce),ge==0?(We=we,pt=Re,_t=we,He=Re):(We=Math.min(We,we),pt=Math.min(pt,Re),_t=Math.max(_t,we),He=Math.max(He,Re));return new l(Math.round(We),Math.round(pt),Math.round(_t-We),Math.round(He-pt))},Be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,G,z=(O=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:G}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Lr.API),function(t){var e=function(o){var l,c,u,d,f,A,h,m,p,g;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(A+33,h+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,A=String,h="length",m=255,p="charCodeAt",g="slice",x="replace";for(o[g](-2),o=o[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[g](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[h]),A.fromCharCode.apply(A,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=bk(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Lr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,g=[],x=String.fromCharCode;for(A=0;A<p;A+=1)g.push(x(255&m.charCodeAt(A)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Lr.API),function(t){function e(){return(vn.html2canvas?Promise.resolve(vn.html2canvas):Vh(()=>Promise.resolve().then(()=>N6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(vn.DOMPurify?Promise.resolve(vn.DOMPurify):Vh(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Ba(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Lr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return o.convert(A,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Lr.getPageSize=function(l,c,u){if(Ba(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(h.hasOwnProperty(A))p=h[A][1]/f,g=h[A][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(t5):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Lr.API),Lr.API.addJS=function(t){return AV=t,this.internal.events.subscribe("postPutResources",function(){SC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(SC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+AV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){SC!==void 0&&hV!==void 0&&this.internal.out("/Names <</JavaScript "+SC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Lr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=h,e.indexOf(f.charCodeAt(g+1))!==-1){A=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:A,numcomponents:f.charCodeAt(g+9)};break}h=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Lr.API),Lr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=lje(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var E=S.width,F=S.height,P=S.data,k=S.palette,D=S.depth,Z=!1,fe=[],me=[],pe=void 0,ye=!1,ae=0,je=0;je<k.length;je++){var Be=xQ(k[je],4),O=Be[0],G=Be[1],z=Be[2],L=Be[3];fe.push(O,G,z),L!=null&&(L===0?(ae++,me.length<1&&me.push(je)):L<255&&(ye=!0))}if(ye||ae>1){Z=!0,me=void 0;var Y=E*F;pe=new Uint8Array(Y);for(var J=new DataView(P.buffer),R=0;R<Y;R++){var H=n5(J,R,D),ne=xQ(k[H],4)[3];pe[R]=ne}}else ae===0&&(me=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Z?8:void 0,colorBytes:P,alphaBytes:pe,needSMask:Z,palette:fe,mask:me}}(s):c===2||c===4?function(S){for(var E=S.data,F=S.width,P=S.height,k=S.channels,D=S.depth,Z=k===2?"DeviceGray":"DeviceRGB",fe=k-1,me=F*P,pe=fe,ye=me*pe,ae=1*me,je=Math.ceil(ye*D/8),Be=Math.ceil(ae*D/8),O=new Uint8Array(je),G=new Uint8Array(Be),z=new DataView(E.buffer),L=new DataView(O.buffer),Y=new DataView(G.buffer),J=!1,R=0;R<me;R++){for(var H=R*k,ne=0;ne<pe;ne++)NV(L,n5(z,H+ne,D),R*pe+ne,D);var ge=n5(z,H+pe,D);ge<(1<<D)-1&&(J=!0),NV(Y,ge,1*R,D)}return{colorSpace:Z,colorsPerPixel:fe,sMaskBitsPerComponent:J?D:void 0,colorBytes:O,alphaBytes:G,needSMask:J}}(s):function(S){var E=S.data,F=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(P){for(var k=P.length,D=new Uint8Array(2*k),Z=new DataView(D.buffer,D.byteOffset,D.byteLength),fe=0;fe<k;fe++)Z.setUint16(2*fe,P[fe],!1);return D}(E):E,needSMask:!1}}(s);var f,A,h,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==Lr.API.image_compression.NONE&&typeof bk=="function"?(_=function(S){var E;switch(S){case Lr.API.image_compression.FAST:E=11;break;case Lr.API.image_compression.MEDIUM:E=13;break;case Lr.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=xV(y,Math.ceil(o*g*d/8),g,d,n),w&&(h=xV(b,Math.ceil(o*x/8),1,x,n))):(f=void 0,A=void 0,t=y,w&&(h=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:f,decodeParameters:A,transparency:I,palette:j,sMask:h,predictor:_,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new Pje(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new a5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Lr.API),Sd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Sd.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){qa.log("bit decode error:"+r)}},Sd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Sd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Sd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Sd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},Sd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Sd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Sd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Sd.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Sd(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new a5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Lr.API),_V.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new _V(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new a5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Lr.API),Lr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Lr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ex=Lr.API,IC=ex.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Ba(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+A)),m=n;return g},mV=ex.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ex.processArabic&&(t=ex.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:IC.apply(this,arguments).reduce(function(s,o){return s+o},0)},pV=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},gV=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),g=IC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=mV.apply(this,[x,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=IC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=pV.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),A=m+c,h=g}else d.push(n),A+=h+m,h=g}return u=c?function(w,j){return(j?x:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},ex.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(gV.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var h,m,p,g,x=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),g="-"):(p=o(h).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(Ba(h)!=="object")throw new Error("Don't know what to do with value type "+Ba(h)+".");p=l(h)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,g,x={},y=1,b=x,w=[],j="",I="",_=A.length-1,S=1;S<_;S+=1)(g=A[S])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(j+=n[g],p=parseInt(j,16)*y,y=1,j=""):j+=g:n.hasOwnProperty(g)?(I+=n[g],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var h=A.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Lr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(sE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Lr),Lr.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw qa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw qa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(vn.canvg?Promise.resolve(vn.canvg):Vh(()=>import("./index.es-C44FMICw.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},Lr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Lr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ba(t)==="object"){for(a in t)if(s=t[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Lr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+wx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+wx(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+wx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+wx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+wx(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),o||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=A(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Lr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Lr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(P){var k=P.charCodeAt(),D=k>>8,Z=p[D];return Z!==void 0?f[256*Z+(255&k)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},j=function(P){for(var k,D=0;D<P.length;D++){if((k=w(P.charAt(D)))==="L")return!1;if(k==="R")return!0}return!1},I=function(P,k,D,Z){var fe,me,pe,ye,ae=k[Z];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ae="AN");break;case"AL":y=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":Z<1||Z+1>=k.length||(fe=D[Z-1])!=="EN"&&fe!=="AN"||(me=k[Z+1])!=="EN"&&me!=="AN"?ae="N":y&&(me="AN"),ae=me===fe?me:"N";break;case"ES":ae=(fe=Z>0?D[Z-1]:"B")==="EN"&&Z+1<k.length&&k[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&D[Z-1]==="EN"){ae="EN";break}if(y){ae="N";break}for(pe=Z+1,ye=k.length;pe<ye&&k[pe]==="ET";)pe++;ae=pe<ye&&k[pe]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ye=k.length,pe=Z+1;pe<ye&&k[pe]==="NSM";)pe++;if(pe<ye){var je=P[Z],Be=je>=1425&&je<=2303||je===64286;if(fe=k[pe],Be&&(fe==="R"||fe==="AL")){ae="R";break}}}ae=Z<1||(fe=k[Z-1])==="B"?"N":D[Z-1];break;case"B":y=!1,a=!0,ae=b;break;case"S":s=!0,ae="N"}return ae},_=function(P,k,D){var Z=P.split("");return D&&S(Z,D,{hiLevel:b}),Z.reverse(),k&&k.reverse(),Z.join("")},S=function(P,k,D){var Z,fe,me,pe,ye,ae=-1,je=P.length,Be=0,O=[],G=b?h:A,z=[];for(y=!1,a=!1,s=!1,fe=0;fe<je;fe++)z[fe]=w(P[fe]);for(me=0;me<je;me++){if(ye=Be,O[me]=I(P,z,O,me),Z=240&(Be=G[ye][m[O[me]]]),Be&=15,k[me]=pe=G[Be][5],Z>0)if(Z===16){for(fe=ae;fe<me;fe++)k[fe]=1;ae=-1}else ae=-1;if(G[Be][6])ae===-1&&(ae=me);else if(ae>-1){for(fe=ae;fe<me;fe++)k[fe]=pe;ae=-1}z[me]==="B"&&(k[me]=0),D.hiLevel|=pe}s&&function(L,Y,J){for(var R=0;R<J;R++)if(L[R]==="S"){Y[R]=b;for(var H=R-1;H>=0&&L[H]==="WS";H--)Y[H]=b}}(z,k,je)},E=function(P,k,D,Z,fe){if(!(fe.hiLevel<P)){if(P===1&&b===1&&!a)return k.reverse(),void(D&&D.reverse());for(var me,pe,ye,ae,je=k.length,Be=0;Be<je;){if(Z[Be]>=P){for(ye=Be+1;ye<je&&Z[ye]>=P;)ye++;for(ae=Be,pe=ye-1;ae<pe;ae++,pe--)me=k[ae],k[ae]=k[pe],k[pe]=me,D&&(me=D[ae],D[ae]=D[pe],D[pe]=me);Be=ye}Be++}}},F=function(P,k,D){var Z=P.split(""),fe={hiLevel:b};return D||(D=[]),S(Z,D,fe),function(me,pe,ye){if(ye.hiLevel!==0&&d)for(var ae,je=0;je<me.length;je++)pe[je]===1&&(ae=g.indexOf(me[je]))>=0&&(me[je]=g[ae+1])}(Z,D,fe),E(2,Z,k,D,fe),E(1,Z,k,D,fe),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(P,k,D){if(function(fe,me){if(me)for(var pe=0;pe<fe.length;pe++)me[pe]=pe;l===void 0&&(l=j(fe)),u===void 0&&(u=j(fe))}(P,k),o||!c||u)if(o&&c&&l^u)b=l?1:0,P=_(P,k,D);else if(!o&&c&&u)b=l?1:0,P=F(P,k,D),P=_(P,k);else if(!o||l||c||u){if(o&&!c&&l^u)P=_(P,k),l?(b=0,P=F(P,k,D)):(b=1,P=F(P,k,D),P=_(P,k));else if(o&&l&&!c&&u)b=1,P=F(P,k,D),P=_(P,k);else if(!o&&!c&&l^u){var Z=d;l?(b=1,P=F(P,k,D),b=0,d=!1,P=F(P,k,D),d=Z):(b=0,P=F(P,k,D),P=_(P,k),b=1,d=!1,P=F(P,k,D),d=Z,P=_(P,k))}}else b=0,P=F(P,k,D);else b=l?1:0,P=F(P,k,D);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Lr),Lr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new lm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Gje(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Bje(this.contents),this.head=new kje(this),this.name=new Mje(this),this.cmap=new dre(this),this.toUnicode={},this.hhea=new Fje(this),this.maxp=new Lje(this),this.hmtx=new Uje(this),this.post=new Dje(this),this.os2=new Oje(this),this.loca=new $je(this),this.glyf=new Qje(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var cf,lm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Bje=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new lm).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=fre.call(r);r.length%4;)r.push(0);for(s=new lm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Tje={}.hasOwnProperty,Xf=function(t,e){for(var r in e)Tje.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};cf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var kje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new lm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),EV=function(){function t(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,x,y,b,w,j,I,_,S,E,F,P,k,D,Z,fe,me,pe,ye,ae,je,Be,O,G,z,L,Y,J,R,H,ne,ge,U;switch(Z=new lm,o=Object.keys(e).sort(function(Ue,ie){return Ue-ie}),r){case"macroman":for(p=0,g=function(){var Ue=[];for(m=0;m<256;++m)Ue.push(0);return Ue}(),y={0:0},s={},fe=0,ae=o.length;fe<ae;fe++)y[H=e[a=o[fe]]]==null&&(y[H]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(g),{charMap:s,subtable:Z.data,maxGlyphID:p+1};case"unicode":for(k=[],f=[],b=0,y={},n={},x=u=null,me=0,je=o.length;me<je;me++)y[j=e[a=o[me]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,x!=null&&l===u||(x&&f.push(x),k.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),k.push(65535),F=2*(E=k.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),A=Math.log(S/2)/Math.LN2,_=2*E-S,c=[],I=[],h=[],m=pe=0,Be=k.length;pe<Be;m=++pe){if(P=k[m],d=f[m],P===65535){c.push(0),I.push(0);break}if(P-(D=n[P].new)>=32768)for(c.push(0),I.push(2*(h.length+E-m)),a=ye=P;P<=d?ye<=d:ye>=d;a=P<=d?++ye:--ye)h.push(n[a].new);else c.push(D-P),I.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*E+2*h.length),Z.writeUInt16(0),Z.writeUInt16(F),Z.writeUInt16(S),Z.writeUInt16(A),Z.writeUInt16(_),J=0,O=f.length;J<O;J++)a=f[J],Z.writeUInt16(a);for(Z.writeUInt16(0),R=0,G=k.length;R<G;R++)a=k[R],Z.writeUInt16(a);for(ne=0,z=c.length;ne<z;ne++)l=c[ne],Z.writeUInt16(l);for(ge=0,L=I.length;ge<L;ge++)w=I[ge],Z.writeUInt16(w);for(U=0,Y=h.length;U<Y;U++)p=h[U],Z.writeUInt16(p);return{charMap:n,subtable:Z.data,maxGlyphID:b+1}}},t}(),dre=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new EV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=EV.encode(e,r),(a=new lm).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),Fje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Oje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Dje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),Rje=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Mje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new Rje(u,a),c[A=a.nameID]==null&&(c[A]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Lje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Uje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],A.push(s.advance);return A}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),fre=[].slice,Qje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new lm(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new Hje(l,u,f,c,d):new Vje(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),Vje=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Hje=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new lm(fre.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),$je=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xf(t,cf),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),Gje=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,g,x;for(a in n=dre.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},x=n.charMap)h[(c=x[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(h),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Lr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const jk=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:wje,AcroFormAppearance:$r,AcroFormButton:Ji,AcroFormCheckBox:yb,AcroFormChoiceField:wp,AcroFormComboBox:Cp,AcroFormEditBox:xb,AcroFormListBox:Np,AcroFormPasswordField:bb,AcroFormPushButton:vb,AcroFormRadioButton:_p,AcroFormTextField:z0,GState:y2,ShadingPattern:w0,TilingPattern:dp,default:Lr,jsPDF:Lr},Symbol.toStringTag,{value:"Module"}));async function SV(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:ur.now()};return Tn(Ct(Te,"inventory_batches"),e)}async function hre(t,e){await xn(Wt(Te,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:ur.now()})}async function Kje(t,e){const r=rr(Ct(Te,"batch_allocations"),or("saleDate",">=",t),or("saleDate","<=",e)),n=await Lt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function Are(t){const e=Wt(Te,"salesV2",t),r=await js(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Ri(Te,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await Ri(Te,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>Wt(Te,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,A],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(A||0)).toFixed(3));l.update(u[h],{remaining:x}),o+=Number(A||0)}),l.delete(e)}),{restored:o}}var mre={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IV=jo.createContext&&jo.createContext(mre),qje=["attr","size","title"];function zje(t,e){if(t==null)return{};var r=Wje(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wje(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NS.apply(this,arguments)}function jV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(r),!0).forEach(function(n){Xje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xje(t,e,r){return e=Yje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yje(t){var e=Jje(t,"string");return typeof e=="symbol"?e:e+""}function Jje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pre(t){return t&&t.map((e,r)=>jo.createElement(e.tag,CS({key:r},e.attr),pre(e.child)))}function Zje(t){return e=>jo.createElement(e4e,NS({attr:CS({},t.attr)},e),pre(t.child))}function e4e(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=zje(t,qje),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),jo.createElement("svg",NS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:CS(CS({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&jo.createElement("title",null,s),t.children)};return IV!==void 0?jo.createElement(IV.Consumer,null,r=>e(r)):e(mre)}function t4e(t){return Zje({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function dc({onClick:t,loading:e,className:r=""}){return i.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(t4e,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function fc(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Ko=t=>Math.round((Number(t)||0)*100)/100,dh=t=>Math.round((Number(t)||0)*1e3)/1e3,Pu=t=>Number(t??0).toFixed(2),fh=t=>Number(t??0).toFixed(3),PV=(t,e)=>{var o;const r=t.date?String(t.date):"",n=(o=t.timestamp)!=null&&o.toDate?Cr(t.timestamp.toDate(),"yyyy-MM-dd"):"";let a=r||n;if(r&&n){const l=new Date(r+"T00:00:00").getTime(),c=new Date(n+"T00:00:00").getTime(),u=Math.abs(l-c)/(1e3*60*60*24);isFinite(u)&&u>30&&(a=n)}if(!a)return[];const s=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((l,c)=>{const u=Number((l==null?void 0:l.qty)??0),d=Number((l==null?void 0:l.lineFinal)??0)||Math.max(0,Number((l==null?void 0:l.unitPrice)||0)*u-Number((l==null?void 0:l.discount)||0));return{id:`${e}#${c}`,productName:String((l==null?void 0:l.productName)??"(sin nombre)"),quantity:u,amount:Ko(d),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String((l==null?void 0:l.measurement)??t.measurement??""),allocations:Array.isArray(l==null?void 0:l.allocations)?l.allocations:t.allocations,avgUnitCost:Number((l==null?void 0:l.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((l==null?void 0:l.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function r4e({role:t,roles:e}){const[r,n]=v.useState([]),[a,s]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[A,h]=v.useState("ALL"),[m,p]=v.useState("ALL"),[g,x]=v.useState({}),[y,b]=v.useState(null),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(""),[F,P]=v.useState(0),[k,D]=v.useState("0"),Z=Cr(new Date,"yyyy-MM-dd"),[fe,me]=v.useState(Z),[pe,ye]=v.useState(Z),[ae,je]=v.useState(!1),[Be,O]=v.useState(!1),[G,z]=v.useState(!1),[L,Y]=v.useState(""),J=v.useRef(null),{refreshKey:R,refresh:H}=fc(),ne=e&&e.length?e:t,ge=Iye(ne,"bills","cerrarVentas"),U=ln(ne,"admin"),Ue=({title:de,open:Se,onToggle:dt,right:xt})=>i.jsxs("button",{type:"button",onClick:dt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"font-semibold truncate",children:de}),xt?i.jsx("span",{className:"text-xs text-gray-600",children:xt}):null]}),i.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:Se?"":"+"})]});v.useEffect(()=>{if(!fe||!pe)return;u(!0);const de=rr(Ct(Te,"salesV2"),or("date",">=",fe),or("date","<=",pe)),Se=ad(de,dt=>{const xt=[];dt.forEach(ht=>{const bt=PV(ht.data(),ht.id);xt.push(...bt)}),n(xt),u(!1)},dt=>{console.error("Error cargando ventas por periodo:",dt),n([]),u(!1)});return()=>Se()},[fe,pe,R]),v.useEffect(()=>{if(!fe||!pe)return;const de=rr(Ct(Te,"salesV2"),or("status","==","FLOTANTE"),or("date",">=",fe),or("date","<=",pe)),Se=ad(de,dt=>{const xt=[];dt.forEach(ht=>{const bt=PV(ht.data(),ht.id);xt.push(...bt)}),s(xt)});return()=>Se()},[fe,pe,R]),v.useEffect(()=>{(async()=>{try{const de=await Lt(Ct(Te,"users")),Se={};de.forEach(dt=>{const xt=dt.data(),ht=String(xt.email||"").trim().toLowerCase(),bt=String(xt.name||"").trim();ht&&(Se[ht]=bt||xt.email||"")}),x(Se)}catch(de){console.error("Error cargando usuarios:",de),x({})}})()},[]);const ie=de=>{const Se=String(de||"").trim().toLowerCase();return g[Se]||de||""};v.useEffect(()=>{(async()=>{const Se=rr(Ct(Te,"daily_closures"),or("date","==",Z)),dt=await Lt(Se);if(dt.empty)l(null);else{const xt=dt.docs[0];l({id:xt.id,...xt.data()})}})()},[Z,R]);const te=jo.useMemo(()=>{let de=[];if(A==="FLOTANTE"){const dt=[...r,...a],xt=new Map;for(const ht of dt)ht.status==="FLOTANTE"&&xt.set(ht.id,ht);de=Array.from(xt.values())}else if(A==="ALL"){const dt=[...r,...a],xt=new Map;for(const ht of dt)xt.set(ht.id,ht);de=Array.from(xt.values())}else de=r.filter(dt=>dt.status==="PROCESADA");m!=="ALL"&&(de=de.filter(dt=>dt.type===m));const Se=L.trim().toLowerCase();if(Se){const dt=ht=>String(ht||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),xt=dt(Se);de=de.filter(ht=>dt(ht.productName).includes(xt))}return de},[A,r,a,L,m]),Ee=Ko(te.reduce((de,Se)=>de+(Se.amount||0),0)),ce=Ko(te.reduce((de,Se)=>de+Number(Se.cogsAmount??0),0)),we=de=>String(de||"").trim().toLowerCase()!=="lb",Re=te.filter(de=>de.type==="CONTADO"),We=te.filter(de=>de.type==="CREDITO"),pt=dh(Re.filter(de=>we(de.measurement)).reduce((de,Se)=>de+(Se.quantity||0),0)),_t=dh(Re.filter(de=>!we(de.measurement)).reduce((de,Se)=>de+(Se.quantity||0),0)),He=dh(We.filter(de=>we(de.measurement)).reduce((de,Se)=>de+(Se.quantity||0),0)),gt=dh(We.filter(de=>!we(de.measurement)).reduce((de,Se)=>de+(Se.quantity||0),0)),ut=Ko(Re.reduce((de,Se)=>de+(Se.amount||0),0)),vt=Ko(We.reduce((de,Se)=>de+(Se.amount||0),0)),Pe=Ko(Re.reduce((de,Se)=>de+Number(Se.cogsAmount??0),0)),ct=Ko(We.reduce((de,Se)=>de+Number(Se.cogsAmount??0),0)),lt=Ko(ut-Pe),be=Ko(vt-ct),ue=dh(pt+He),Le=dh(_t+gt),ke=Ko(ut+vt),Ae={};te.forEach(de=>{const Se=de.productName||"(sin nombre)";Ae[Se]||(Ae[Se]={totalQuantity:0,totalAmount:0}),Ae[Se].totalQuantity=dh(Ae[Se].totalQuantity+(de.quantity||0)),Ae[Se].totalAmount=Ko(Ae[Se].totalAmount+(de.amount||0))});const Ye=Object.entries(Ae).map(([de,Se])=>({productName:de,totalQuantity:Se.totalQuantity,totalAmount:Se.totalAmount})),yt=async()=>{try{const de=te.filter(Ne=>Ne.status==="FLOTANTE"),Se=de.length>0?de:r.filter(Ne=>Ne.status!=="PROCESADA");if(Se.length===0){f("No hay ventas para procesar.");return}const dt={totalCharged:Ko(Se.reduce((Ne,mt)=>Ne+(mt.amount||0),0)),totalSuggested:Ko(Se.reduce((Ne,mt)=>Ne+(mt.amountSuggested||0),0)),totalUnits:dh(Se.reduce((Ne,mt)=>Ne+(mt.quantity||0),0)),totalCOGS:Ko(Se.reduce((Ne,mt)=>Ne+Number(mt.cogsAmount??0),0))},xt=Ko(dt.totalCharged-dt.totalSuggested),ht=Ko(dt.totalCharged-dt.totalCOGS),bt=await Tn(Ct(Te,"daily_closures"),{date:Z,createdAt:ur.now(),periodStart:fe,periodEnd:pe,totalCharged:dt.totalCharged,totalSuggested:dt.totalSuggested,totalDifference:xt,totalUnits:dt.totalUnits,totalCOGS:dt.totalCOGS,grossProfit:ht,products:Se.map(Ne=>({productName:Ne.productName,quantity:Ne.quantity,amount:Ne.amount})),salesV2:Se.map(Ne=>({id:Ne.id,productName:Ne.productName,quantity:Ne.quantity,amount:Ne.amount,amountSuggested:Ne.amountSuggested,userEmail:Ne.userEmail,clientName:Ne.clientName,amountReceived:Ne.amountReceived,change:Ne.change,status:Ne.status,cogsAmount:Ne.cogsAmount??0,avgUnitCost:Ne.avgUnitCost??null,allocations:Ne.allocations??[],date:Ne.date})),productSummary:Object.entries(Se.reduce((Ne,mt)=>{const W=mt.productName||"(sin nombre)";return Ne[W]||(Ne[W]={totalQuantity:0,totalAmount:0}),Ne[W].totalQuantity=dh(Ne[W].totalQuantity+(mt.quantity||0)),Ne[W].totalAmount=Ko(Ne[W].totalAmount+(mt.amount||0)),Ne},{})).map(([Ne,mt])=>({productName:Ne,totalQuantity:mt.totalQuantity,totalAmount:mt.totalAmount}))}),et=zd(Te);Se.forEach(Ne=>{et.update(Wt(Te,"salesV2",Ne.id.split("#")[0]),{status:"PROCESADA",closureId:bt.id,closureDate:Z,date:Ne.date})}),await et.commit(),f(` Cierre guardado. Ventas procesadas: ${Se.length}.`)}catch(de){console.error(de),f(" Error al guardar el cierre.")}},At=async de=>{if(!U){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await xn(Wt(Te,"salesV2",de.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(Se){console.error(Se),f(" No se pudo revertir la venta.")}},he=de=>{if(!U){f(" No tienes permisos para editar esta venta.");return}b(de),j(de.quantity),_(de.amount),E(de.clientName),P(de.amountReceived),D(de.change)},re=async()=>{if(!U){f(" No tienes permisos para guardar cambios.");return}if(y)try{await xn(Wt(Te,"salesV2",y.id.split("#")[0]),{quantity:w,amount:I,amountCharged:I,clientName:S,amountReceived:F,change:k}),b(null),f(" Venta actualizada.")}catch(de){console.error(de),f(" No se pudo actualizar la venta.")}},oe=async de=>{if(!U){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Se}=await Are(de.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(Se).toFixed(2)}.`)}catch(Se){console.error(Se),f(" No se pudo eliminar la venta.")}},Ve=async()=>{if(J.current){J.current.classList.add("force-pdf-colors"),J.current.classList.add("pdf-print-mode");try{const Se=(await yg(J.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),dt=new Lr;dt.addImage(Se,"PNG",10,10,190,0),dt.save(`cierre_${Z}.pdf`)}finally{J.current.classList.remove("pdf-print-mode"),J.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",fe,"  ",pe]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(dc,{onClick:H})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(Ue,{title:"Filtros",open:ae,onToggle:()=>je(de=>!de),right:i.jsxs("span",{className:"ml-1",children:[fe,"  ",pe,A!=="ALL"?`  ${A}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",L.trim()?`  "${L.trim()}"`:""]})}),ae&&i.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:fe,onChange:de=>me(de.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:pe,onChange:de=>ye(de.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:A,onChange:de=>h(de.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:de=>p(de.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"CREDITO",children:"Crdito"}),i.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:L,onChange:de=>Y(de.target.value)})]})]})})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:J,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[te.map(de=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${de.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:de.status})}),i.jsx("td",{className:"border p-1",children:de.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:de.productName}),i.jsx("td",{className:"border p-1",children:fh(de.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Pu(de.amount)]}),i.jsx("td",{className:"border p-1",children:de.date}),i.jsx("td",{className:"border p-1",children:ie(de.userEmail)}),i.jsx("td",{className:"border p-1",children:de.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:U?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>he(de),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>oe(de.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):de.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:U?i.jsx("button",{onClick:()=>At(de.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},de.id)),te.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[i.jsx(Ue,{title:"Ventas",open:Be,onToggle:()=>O(de=>!de),right:i.jsxs("span",{className:"ml-1",children:[te.length,"  C$",Pu(Ee)]})}),Be&&i.jsxs("div",{className:"mt-3 space-y-3",children:[te.map(de=>i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:de.productName}),i.jsx("div",{className:"text-xs text-gray-500",children:de.date})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",Pu(de.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${de.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:de.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cantidad"}),i.jsx("strong",{children:fh(de.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("strong",{children:de.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ie(de.userEmail)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("strong",{className:"text-right break-all",children:de.clientName||""})]}),i.jsx("div",{className:"pt-2",children:de.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:U?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>he(de),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>oe(de.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):de.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:U?i.jsx("button",{onClick:()=>At(de.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},de.id)),te.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Total libras Cash: ",i.jsx("strong",{children:fh(_t)})]}),i.jsxs("div",{children:["Total Unidades cash: ",i.jsx("strong",{children:fh(pt)})]}),i.jsxs("div",{children:["Total libras credito: ",i.jsx("strong",{children:fh(gt)})]}),i.jsxs("div",{children:["Total Unidades credito: ",i.jsx("strong",{children:fh(He)})]}),i.jsxs("div",{children:["Total facturado Cash: ",i.jsxs("strong",{children:["C$",Pu(Pe)]})]}),i.jsxs("div",{children:["Total facturado credito:"," ",i.jsxs("strong",{children:["C$",Pu(ct)]})]}),i.jsxs("div",{children:["Total venta Cash: ",i.jsxs("strong",{children:["C$",Pu(ut)]})]}),i.jsxs("div",{children:["Total venta Credito: ",i.jsxs("strong",{children:["C$",Pu(vt)]})]}),i.jsxs("div",{children:["Utilidad bruta Cash: ",i.jsxs("strong",{children:["C$",Pu(lt)]})]}),i.jsxs("div",{children:["Utilidad bruta credito:"," ",i.jsxs("strong",{children:["C$",Pu(be)]})]}),i.jsxs("div",{children:["Total libras cash y credito: ",i.jsx("strong",{children:fh(Le)})]}),i.jsxs("div",{children:["Total unidades cash y credito:"," ",i.jsx("strong",{children:fh(ue)})]}),i.jsxs("div",{children:["Total ventas Cash y credito:"," ",i.jsxs("strong",{children:["C$",Pu(ke)]})]}),i.jsxs("div",{children:["Total facturado a precio compra:"," ",i.jsxs("strong",{children:["C$",Pu(ce)]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(Ue,{title:"Consolidado por producto",open:G,onToggle:()=>z(de=>!de),right:i.jsx("span",{className:"ml-1",children:Ye.length})}),G&&i.jsx("div",{className:"mt-3",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[Ye.map(de=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:de.productName}),i.jsx("td",{className:"border p-1",children:fh(de.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Pu(de.totalAmount)]})]},de.productName)),Ye.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{disabled:!ge,onClick:yt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:Ve,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ie(y.userEmail)]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:de=>j(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:de=>_(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:de=>E(de.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:de=>P(parseFloat(de.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:k,onChange:de=>D(de.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:re,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Bu=t=>Number(t??0).toFixed(2),tx=t=>Number(t??0).toFixed(3);function n4e(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const S=await Lt(rr(Ct(Te,"salesV2"),or("closureId","==",I.id)));if(!S.empty){const E=zd(Te);S.forEach(F=>{E.update(Wt(Te,"salesV2",F.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await Bn(Wt(Te,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),A(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),A(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(Cr(xee(new Date),"yyyy-MM-dd")),[n,a]=v.useState(Cr(new Date,"yyyy-MM-dd")),[s,o]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[f,A]=v.useState(""),h=v.useRef(null),m=async()=>{try{o(!0);const I=rr(Ct(Te,"daily_closures"),or("date",">=",e),or("date","<=",n)),_=await Lt(I),S=[];_.forEach(E=>S.push({id:E.id,...E.data()})),S.sort((E,F)=>E.date<F.date?1:E.date>F.date?-1:0),c(S)}catch(I){console.error(I),A(" Error cargando el historial.")}finally{o(!1)}};v.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(S-_)?S-_:0)),F=Number(u.totalCOGS??0),P=Number(u.grossProfit??(isFinite(S-F)?S-F:0));return{units:I,sug:_,chg:S,diff:E,cogs:F,profit:P}},[u]),x=async()=>{if(!h.current||!u)return;const I=h.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:S}]=await Promise.all([Vh(()=>Promise.resolve().then(()=>N6),void 0),Vh(()=>Promise.resolve().then(()=>jk),void 0)]),F=(await _(I,{backgroundColor:"#ffffff",onclone:D=>{const Z=D.defaultView;D.body.querySelectorAll("*").forEach(me=>{const pe=Z.getComputedStyle(me);pe.color&&(me.style.color=pe.color),pe.backgroundColor&&pe.backgroundColor!=="rgba(0, 0, 0, 0)"&&(me.style.backgroundColor=pe.backgroundColor),pe.borderColor&&(me.style.borderColor=pe.borderColor)})}})).toDataURL("image/png"),{jsPDF:P}=await Vh(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>jk);return{jsPDF:D}},void 0),k=new P;k.addImage(F,"PNG",10,10,190,0),k.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(I=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.date}),i.jsx("td",{className:"border p-1",children:tx(I.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:tx(g.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",Bu(g.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",Bu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:I.date??""}),i.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]}),i.jsx("td",{className:"border p-1",children:I.userEmail??""}),i.jsx("td",{className:"border p-1",children:I.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof I.change=="number"?Bu(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:tx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.amount)]})]},_))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:tx(I.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Bu(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&i.jsx("p",{className:"mt-3 text-sm",children:f})]})}function a4e(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[o,l]=v.useState(!1),[c,u]=v.useState(["vendedor_pollo"]),[d,f]=v.useState(""),[A,h]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,j]=v.useState(["vendedor_pollo"]),[I,_]=v.useState(""),[S,E]=v.useState(""),[F,P]=v.useState(!1),[k,D]=v.useState([]),Z=L=>!L||L==="vendedor"?"vendedor_pollo":L==="admin"||L==="supervisor_pollo"||L==="contador"||L==="vendedor_pollo"||L==="vendedor_ropa"||L==="vendedor_dulces"?L:"vendedor_pollo",fe=L=>L?Array.isArray(L)?L.map(Y=>Z(String(Y))):[Z(String(L))]:["vendedor_pollo"],me=async()=>{x(!0);const L=await Lt(Ct(Te,"users")),Y=[];L.forEach(J=>{const R=J.data();Y.push({id:J.id,email:R.email??"",name:R.name??"",roles:fe(R.roles??R.role),sellerCandyId:R.sellerCandyId??""})}),p(Y),x(!1)},pe=async()=>{try{const L=await Lt(Ct(Te,"sellers_candies")),Y=[];L.forEach(J=>{const R=J.data();Y.push({id:J.id,name:R.name??"(sin nombre)",branchLabel:R.branch??"",commissionPercent:Number(R.commissionPercent??0)})}),D(Y)}catch(L){console.error("Error cargando sellers_candies:",L)}};v.useEffect(()=>{me(),pe()},[]);const ye=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),h("")},ae=async L=>{if(L.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const U=Wt(Te,"users",y),Ue=w.length?w:["vendedor_pollo"],ie=Ue.includes("vendedor_dulces")&&(I||A)||"";if(await xn(U,{email:r,name:t.trim(),roles:Ue,role:Ue[0]||"vendedor_pollo",sellerCandyId:ie}),p(te=>te.map(Ee=>Ee.id===y?{...Ee,email:r,name:t.trim(),roles:Ue,sellerCandyId:ie}:Ee)),a&&a.length>=6)try{const te=ET(),Ee=S||r;await Gpe(te,Ee),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Ee}`)}catch(te){console.error("Error sending password reset:",te),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Be();return}const Y=uD(),J=cD(Y.options,"Secondary"),R=ET(J),H=await Kpe(R,r,a),ne=c.length?c:["vendedor_pollo"],ge=ne.includes("vendedor_dulces")&&A||"";await ZZ(Wt(Ct(Te,"users"),H.user.uid),{email:r,name:t.trim(),roles:ne,role:ne[0]||"vendedor_pollo",sellerCandyId:ge}),await xD(R),await Mme(J),p(U=>[{id:H.user.uid,email:r,name:t.trim(),roles:ne,sellerCandyId:ge},...U]),f(" Usuario creado correctamente."),ye(),P(!1)}catch(Y){console.error(Y),f(" Error al crear el usuario: "+Y.message)}},je=L=>{b(L.id),e(L.name||""),n(L.email||""),E(L.email||""),j(L.roles&&L.roles.length?L.roles:["vendedor_pollo"]),h(L.sellerCandyId||""),_(L.sellerCandyId||""),s(""),P(!0)},Be=()=>{b(null),j(["vendedor_pollo"]),_(""),E(""),ye(),P(!1)},O=async L=>{confirm("Eliminar este usuario del listado?")&&(await Bn(Wt(Te,"users",L)),p(J=>J.filter(R=>R.id!==L)))},G=L=>{const Y=L==="admin"?"admin":L==="supervisor_pollo"?"supervisor_pollo":L==="vendedor_ropa"?"vendedor_ropa":L==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",J=Y==="admin"?"bg-blue-100 text-blue-700":Y==="supervisor_pollo"?"bg-amber-100 text-amber-700":Y==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":Y==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${J}`,children:Y})},z=L=>`${L.name}  ${L.branchLabel||"Sin sucursal"}  ${L.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>P(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:g?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(L=>{const Y=y===L.id,J=(Y?w:L.roles).includes("vendedor_dulces");return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:L.name||""}),i.jsx("td",{className:"p-2 border",children:L.email}),i.jsx("td",{className:"p-2 border",children:Y?i.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(R=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(R),onChange:()=>j(H=>H.includes(R)?H.filter(ne=>ne!==R):[...H,R])}),i.jsx("span",{className:"text-sm",children:R})]},R)),w.includes("vendedor_dulces")&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:R=>_(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),k.map(R=>i.jsx("option",{value:R.id,children:z(R)},R.id))]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex gap-2 justify-center",children:L.roles.map(R=>i.jsx("span",{children:G(R)},R))}),J&&L.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>je(L),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(L.id),children:"Eliminar"})]})})]},L.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),F&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>P(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:L=>e(L.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:L=>n(L.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:L=>s(L.target.value),required:!y}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(L=>!L),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(L=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(L):c.includes(L),onChange:()=>{y?j(Y=>Y.includes(L)?Y.filter(J=>J!==L):[...Y,L]):u(Y=>Y.includes(L)?Y.filter(J=>J!==L):[...Y,L])}}),i.jsx("span",{className:"text-sm",children:L})]},L))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:A,onChange:L=>h(L.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),k.map(L=>i.jsx("option",{value:L.id,children:z(L)},L.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const BV=t=>`C$${(Number(t)||0).toFixed(2)}`;function s4e(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(0),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(""),[A,h]=v.useState([]),[m,p]=v.useState(!0),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[S,E]=v.useState(""),[F,P]=v.useState(0),[k,D]=v.useState(0),[Z,fe]=v.useState(!1),me=async()=>{p(!0);const z=await Lt(Ct(Te,"products")),L=[];z.forEach(Y=>{const J=Y.data();L.push({id:Y.id,name:J.name??"",price:Number(J.price??0),providerPrice:Number(J.providerPrice??0),category:J.category??"",measurement:J.measurement??"",active:J.active!==!1})}),h(L),p(!1)};v.useEffect(()=>{me()},[]);const pe=async z=>{if(z.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const L={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},Y=await Tn(Ct(Te,"products"),L);h(J=>[{id:Y.id,...L},...J]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),fe(!1)}catch(L){l(" Error: "+L.message)}},ye=z=>{b(z.id),j(z.name),_(z.category),E(z.measurement),P(z.price),D(z.providerPrice||0)},ae=()=>{b(null),j(""),_(""),E(""),P(0)},je=async()=>{if(!y)return;const z=Wt(Te,"products",y);await xn(z,{name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((k||0).toFixed(2))}),h(L=>L.map(Y=>Y.id===y?{...Y,name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((k||0).toFixed(2))}:Y)),ae()},Be=async z=>{const L=Wt(Te,"products",z.id),Y=z.active===!1;await xn(L,{active:Y}),h(J=>J.map(R=>R.id===z.id?{...R,active:Y}:R))},O=async z=>{const L=rr(Ct(Te,"inventory_batches"),or("productId","==",z),iS(1));if(!(await Lt(L)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Bn(Wt(Te,"products",z)),h(R=>R.filter(H=>H.id!==z)))},G=g?A:A.filter(z=>z.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),fe(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),Z&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>fe(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>fe(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:c,onChange:z=>u(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:z=>e(z.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:z=>s(parseFloat(z.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:z=>n(parseFloat(z.target.value)),onFocus:z=>z.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),o&&i.jsx("p",{className:"text-sm mt-2",children:o})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:z=>x(z.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):G.map(z=>{const L=y===z.id,Y=z.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:J=>j(J.target.value)}):z.name}),i.jsx("td",{className:"p-2 border",children:L?i.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:J=>_(J.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):z.category}),i.jsx("td",{className:"p-2 border",children:L?i.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:J=>E(J.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):z.measurement}),i.jsx("td",{className:"p-2 border",children:L?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:J=>D(parseFloat(J.target.value))}):BV(z.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:L?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:J=>P(parseFloat(J.target.value))}):BV(z.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Y?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Y?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:L?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:je,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ae,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ye(z),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${Y?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Be(z),children:Y?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(z.id),children:"Eliminar"})]})})]},z.id)})})]})})]})}const qo=[];for(let t=0;t<256;++t)qo.push((t+256).toString(16).slice(1));function i4e(t,e=0){return(qo[t[e+0]]+qo[t[e+1]]+qo[t[e+2]]+qo[t[e+3]]+"-"+qo[t[e+4]]+qo[t[e+5]]+"-"+qo[t[e+6]]+qo[t[e+7]]+"-"+qo[t[e+8]]+qo[t[e+9]]+"-"+qo[t[e+10]]+qo[t[e+11]]+qo[t[e+12]]+qo[t[e+13]]+qo[t[e+14]]+qo[t[e+15]]).toLowerCase()}let s5;const o4e=new Uint8Array(16);function l4e(){if(!s5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s5=crypto.getRandomValues.bind(crypto)}return s5(o4e)}const c4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),TV={randomUUID:c4e};function u4e(t,e,r){var a;if(TV.randomUUID&&!t)return TV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??l4e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,i4e(n)}async function d4e(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=Ct(t,"inventory_batches"),s=rr(a,or("productName","==",e)),c=(await Lt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",A=d.data.date??"";if(f!==A)return f<A?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return h-m}).map(u=>Wt(t,"inventory_batches",u.id));return Ri(t,async u=>{let d=Number(r);const f=[],A=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),S=Number((j-_).toFixed(3));u.update(x,{remaining:S}),f.push({batchId:x.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const h=Number(f.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=f.reduce((g,x)=>g+x.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:h}})}const gre=3,f4e=.5*10**-gre;function za(t){const e=Number(t??0);return Number(e.toFixed(gre))}function i5(t,e){return za((t??0)+(e??0))}function jC(t,e){return za(t)+f4e>=za(e)}async function h4e(t,e){const r=await Lt(Ct(Te,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==e&&(await xn(Wt(Te,"inventory_batches",s.id),{productId:e}),a++)}return a}const JA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=v.useState([]),[s,o]=v.useState([]),[l,c]=v.useState(""),[u,d]=v.useState(Cr(new Date,"yyyy-MM-dd")),[f,A]=v.useState(""),[h,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState(0),[b,w]=v.useState(0),[j,I]=v.useState("0"),[_,S]=v.useState(""),[E,F]=v.useState(!1),[P,k]=v.useState({}),D=Pe=>Math.round(Pe*100)/100,Z=Pe=>za(Pe).toFixed(3),[fe,me]=v.useState("CONTADO"),[pe,ye]=v.useState([]),[ae,je]=v.useState(""),[Be,O]=v.useState(0),G=Pe=>{me(Pe),Pe==="CREDITO"?(A(""),w(0),I("0.00")):(je(""),O(0))},z=Pe=>{const ct=Number(Pe.specialPrice||0);return ct>0?ct:Number(Pe.price||0)},L=async Pe=>{if(!Pe)return 0;const ct=rr(Ct(Te,"inventory_batches"),or("productId","==",Pe)),lt=await Lt(ct);let be=0;return lt.forEach(ue=>{const Le=ue.data();be=i5(be,Number(Le.remaining||0))}),za(be)},Y=async Pe=>{if(!Pe)return 0;const ct=await Lt(Ct(Te,"inventory_batches"));let lt=0;return ct.forEach(be=>{const ue=be.data();(ue.productName||"").trim().toLowerCase()===Pe.trim().toLowerCase()&&(lt=i5(lt,Number(ue.remaining||0)))}),za(lt)};v.useEffect(()=>{(async()=>{const Pe=await Lt(Ct(Te,"products")),ct=[];Pe.forEach(lt=>{const be=lt.data();(be==null?void 0:be.active)!==!1&&ct.push({id:lt.id,productName:be.name??be.productName??"(sin nombre)",price:Number(be.price??0),measurement:be.measurement??"(sin unidad)",category:be.category??"(sin categora)"})}),a(ct)})()},[]),v.useEffect(()=>{(async()=>{const Pe=await Lt(Ct(Te,"inventory_batches")),ct={};Pe.forEach(lt=>{const be=lt.data(),ue=be.productId,Le=Number(be.remaining||0);ue&&(ct[ue]=i5(ct[ue]||0,Le))}),Object.keys(ct).forEach(lt=>ct[lt]=za(ct[lt])),k(ct)})()},[]),v.useEffect(()=>{(async()=>{const Pe=await Lt(Ct(Te,"users")),ct=[];Pe.forEach(lt=>{const be=lt.data();ct.push({id:lt.id,email:be.email??"(sin email)",role:be.role??"USER"})}),o(ct)})()},[]);const J=async()=>{if(!l)return;const Pe=n.find(lt=>lt.id===l);if(!Pe)return;if(p.some(lt=>lt.productId===Pe.id)){c("");return}const ct=await L(Pe.id);g(lt=>[...lt,{productId:Pe.id,productName:Pe.productName,measurement:Pe.measurement,price:Number(Pe.price||0),specialPrice:0,stock:ct,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},R=async Pe=>{if(!Pe)return;const ct=n.find(be=>be.id===Pe);if(!ct||p.some(be=>be.productId===ct.id))return;const lt=await L(ct.id);g(be=>[...be,{productId:ct.id,productName:ct.productName,measurement:ct.measurement,price:Number(ct.price||0),specialPrice:0,stock:lt,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},H=Pe=>{g(ct=>ct.filter(lt=>lt.productId!==Pe))},ne=Pe=>{const ct=String(Pe||"").replace(",",".");if(ct==="")return"";const lt=ct.split(".");return lt.length===1?ct:`${lt[0]}.${lt.slice(1).join("")}`},ge=async(Pe,ct)=>{g(lt=>lt.map(be=>{if(be.productId!==Pe)return be;const ue=(be.measurement||"").toLowerCase()!=="lb",Le=ne(ct);if(Le.trim()==="")return{...be,qty:0,qtyInput:""};if(!ue&&Le===".")return{...be,qty:0,qtyInput:"0."};const ke=Number(Le),Ae=Number.isFinite(ke)?ke:0;let Ye=ue?Math.max(0,Math.round(Ae)):za(Ae);const yt=ue?Math.max(0,Math.floor(Number(be.stock||0))):za(Number(be.stock||0));if(Ye>yt){Ye=yt,S(` Cantidad limitada a existencias (${yt})`);const he=ue?String(Ye):Ye===0?"":String(Ye);return{...be,qty:Ye,qtyInput:he}}const At=ue?String(Ye):Le.endsWith(".")?Le:String(Ye);return{...be,qty:Ye,qtyInput:At}}))},U=(Pe,ct)=>{g(lt=>lt.map(be=>{if(be.productId!==Pe)return be;const ue=ne(ct);if(ue.trim()==="")return{...be,specialPrice:0,specialPriceInput:""};if(ue===".")return{...be,specialPrice:0,specialPriceInput:"0."};const Le=Number(ue),ke=Number.isFinite(Le)?Math.max(0,D(Le)):0,Ae=ue.endsWith(".")?ue:String(ke);return{...be,specialPrice:ke,specialPriceInput:Ae}}))},Ue=(Pe,ct)=>{g(lt=>lt.map(be=>{if(be.productId!==Pe)return be;const ue=ne(ct);if(ue.trim()==="")return{...be,discount:0,discountInput:""};if(ue===".")return{...be,discount:0,discountInput:"0."};const Le=Number(ue),ke=Number.isFinite(Le)?Math.max(0,Math.floor(Le)):0,Ae=ue.endsWith(".")?ue:String(ke);return{...be,discount:ke,discountInput:Ae}}))},ie=v.useMemo(()=>{let Pe=0;for(const ct of p){const lt=z(ct),be=Number(lt||0)*Number(ct.qty||0),ue=Math.max(0,be-Math.max(0,Number(ct.discount||0)));Pe+=ue}return D(Pe)},[p]);v.useEffect(()=>{y(ie)},[ie]),v.useEffect(()=>{const Pe=Number(b)||0,ct=Number(x)||0;I((Pe-ct).toFixed(2))},[b,x]);const te=Pe=>{Pe.key===","&&(Pe.preventDefault(),Pe.target.value+=".")},[Ee,ce]=v.useState(!1);v.useEffect(()=>{var lt;const Pe=window.matchMedia("(max-width: 900px)"),ct=()=>ce(Pe.matches);return ct(),(lt=Pe.addEventListener)==null||lt.call(Pe,"change",ct),()=>{var be;return(be=Pe.removeEventListener)==null?void 0:be.call(Pe,"change",ct)}},[]),v.useEffect(()=>{(async()=>{try{const Pe=await Lt(Ct(Te,"customers_pollo")),ct=[];Pe.forEach(lt=>{const be=lt.data();ct.push({id:lt.id,name:be.name??"",phone:be.phone??"",status:be.status??"ACTIVO",creditLimit:Number(be.creditLimit??0),vendorId:be.vendorId??"",vendorName:be.vendorName??"",balance:0})});for(const lt of ct)try{const be=rr(Ct(Te,"ar_movements_pollo"),or("customerId","==",lt.id)),ue=await Lt(be);let Le=0;ue.forEach(Ae=>{Le+=Number(Ae.data().amount||0)});const ke=Number(lt.initialDebt||0);lt.balance=Le+ke}catch{lt.balance=0}ct.sort((lt,be)=>(lt.name||"").localeCompare(be.name||"")),ye(ct)}catch(Pe){console.error("Error cargando customers_pollo:",Pe),ye([])}})()},[]);const we=v.useMemo(()=>pe.find(Pe=>Pe.id===ae)||null,[pe,ae]),Re=Number((we==null?void 0:we.balance)||0),We=fe==="CREDITO"?Math.max(0,Number(Re||0)+Math.max(0,Number(x||0))):0;v.useEffect(()=>{fe==="CREDITO"&&O(Pe=>Math.min(Math.max(0,Number(Pe||0)),We))},[fe,We]),v.useEffect(()=>{fe==="CREDITO"&&(w(Number(Be||0)),I("0.00"))},[fe,Be]);const pt=fe==="CREDITO"?Re+Math.max(0,Number(x||0))-Math.max(0,Number(Be||0)):0,_t=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const Pe of p){if(!Pe.qty||Pe.qty<=0)return`Cantidad invlida para "${Pe.productName}".`;const ct=await L(Pe.productId);if(!jC(ct,Pe.qty)){const lt=await Y(Pe.productName);if(jC(lt,0)&&!jC(ct,0)){const be=await h4e(Pe.productName,Pe.productId),ue=await L(Pe.productId);if(!jC(ue,Pe.qty))return`Stock insuficiente tras corregir ${be} lote(s) para "${Pe.productName}".`}else return`Stock insuficiente para "${Pe.productName}". Disponible: ${ct}`}}return null},He=async Pe=>{var lt,be;Pe.preventDefault(),S("");const ct=await _t();if(ct){S(" "+ct);return}try{F(!0);const ue=[];if(fe==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ae)return"Selecciona un cliente (crdito).";if(Be<0)return"El pago inicial no puede ser negativo.";if(Be>x)return"El pago inicial no puede superar el total.";if((we==null?void 0:we.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const he of p){const re=he.qty,{allocations:oe,avgUnitCost:Ve,cogsAmount:de}=await d4e(Te,he.productName,re,!1),Se=z(he),dt=Number(Se||0)*Number(re||0),xt=Math.max(0,Number(he.discount||0)),ht=Math.max(0,dt-xt);ue.push({productId:he.productId,productName:he.productName,measurement:he.measurement,unitPrice:Number(Se||0),regularPrice:Number(he.price||0),specialPrice:Number(he.specialPrice||0)>0?Number(he.specialPrice):null,qty:re,discount:xt,lineTotal:D(dt),lineFinal:D(ht),allocations:oe,avgUnitCost:Ve,cogsAmount:de})}const Le=ue.reduce((he,re)=>he+re.lineFinal,0),ke=ue.reduce((he,re)=>he+Number(re.qty||0),0),Ae=Number(fe==="CREDITO"?Be||0:b||0),Ye=fe==="CREDITO"?"0.00":j,yt={id:u4e(),quantity:ke,amount:Le,amountCharged:Le,timestamp:ur.now(),date:u,userEmail:(t==null?void 0:t.email)??((lt=s[0])==null?void 0:lt.email)??"sin usuario",vendor:e??((be=s[0])==null?void 0:be.role)??"sin usuario",status:"FLOTANTE",items:ue,itemsTotal:Le,type:fe,amountReceived:Ae,change:Ye,customerId:fe==="CREDITO"?ae:"",customerName:fe==="CREDITO"?(we==null?void 0:we.name)||"":f.trim(),clientName:fe==="CONTADO"?f.trim():""};if(fe==="CONTADO"){if(!f.trim()){S(" Ingresa el nombre del cliente (contado).");return}}else{if(!ae){S(" Selecciona un cliente (crdito).");return}if(Be<0){S(" El pago inicial no puede ser negativo.");return}if(Be>x){S(" El pago inicial no puede superar el total.");return}if((we==null?void 0:we.status)==="BLOQUEADO"){S(" El cliente est BLOQUEADO. No se puede fiar.");return}const he=Number((we==null?void 0:we.creditLimit)||0);if(he>0&&pt>he){S(` Supera el lmite de crdito (C$ ${he.toFixed(2)}).`);return}}const At=await Tn(Ct(Te,"salesV2"),yt);if(fe==="CREDITO"&&ae){const he={customerId:ae,date:u,createdAt:ur.now(),ref:{saleId:At.id}};await Tn(Ct(Te,"ar_movements_pollo"),{...he,type:"CARGO",amount:Number(Le)||0}),Number(Be)>0&&await Tn(Ct(Te,"ar_movements_pollo"),{...he,type:"ABONO",amount:-Number(Be)}),ye(re=>re.map(oe=>oe.id===ae?{...oe,balance:Number(oe.balance||0)+Number(Le||0)-Number(Be||0)}:oe))}S(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),I("0"),A(""),d(Cr(new Date,"yyyy-MM-dd")),je(""),O(0),me("CONTADO")}catch(ue){console.error(ue),S(` ${(ue==null?void 0:ue.message)||"Error al registrar la venta."}`)}finally{F(!1)}},gt=v.useMemo(()=>new Set(p.map(Pe=>Pe.productId)),[p]),ut=v.useMemo(()=>n.filter(Pe=>(P[Pe.id]||0)>0),[n,P]),vt=v.useMemo(()=>{const Pe=String(h||"").trim().toLowerCase();return Pe?ut.filter(ct=>`${ct.productName||""}`.toLowerCase().includes(Pe)):ut},[ut,h]);return Ee?i.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),i.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:Pe=>d(Pe.target.value),"aria-label":"Fecha de la venta"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:fe,onChange:Pe=>G(Pe.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),fe==="CONTADO"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:Pe=>A(Pe.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ae,onChange:Pe=>je(Pe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),pe.map(Pe=>i.jsxs("option",{value:Pe.status==="ACTIVO"?Pe.id:"",disabled:Pe.status==="BLOQUEADO",children:[Pe.name,"  Saldo: ",JA(Pe.balance||0)]},Pe.id))]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:JA(Re)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:JA(pt)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:We,value:Be===0?"":Be,onChange:Pe=>{const ct=Math.max(0,Number(Pe.target.value||0)),lt=Math.min(ct,We);O(lt)},placeholder:"0.00"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",JA(We)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:h,onChange:Pe=>m(Pe.target.value)}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"flex-1 border rounded px-1 py-2 text-sm",value:l,onChange:async Pe=>{const ct=Pe.target.value;c(ct),await R(ct)},children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),vt.map(Pe=>i.jsxs("option",{value:Pe.id,disabled:gt.has(Pe.id),children:[Pe.productName," | C$ ",Pe.price," | Disp:"," ",Z(P[Pe.id]||0)]},Pe.id))]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?i.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):i.jsx("div",{className:"space-y-2",children:p.map(Pe=>{const ct=z(Pe),lt=Number(ct||0)*Number(Pe.qty||0),be=Math.max(0,lt-Math.max(0,Number(Pe.discount||0))),ue=(Pe.measurement||"").toLowerCase()!=="lb";return i.jsxs("div",{className:"border rounded p-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-semibold",children:Pe.productName}),i.jsxs("div",{className:"text-sm",children:["C$ ",D(ct).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:ue?"numeric":"decimal",step:ue?1:.01,value:Pe.qtyInput??(Pe.qty===0?"":Pe.qty),onKeyDown:te,onChange:Le=>ge(Pe.productId,Le.target.value),placeholder:ue?"Unid":"Libras",title:ue?"Unidades":"Libras"}),i.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:Pe.discountInput??(Pe.discount===0?"":Pe.discount),onChange:Le=>Ue(Pe.productId,Le.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:Pe.specialPriceInput??(Pe.specialPrice===0?"":Pe.specialPrice),onChange:Le=>U(Pe.productId,Le.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",za(Number(Pe.stock)-Number(Pe.qty||0)).toFixed(3)]}),i.jsxs("div",{className:"font-semibold",children:["C$ ",D(be).toFixed(2)]})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>H(Pe.productId),children:"Quitar"})})]},Pe.productId)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),i.jsxs("div",{className:"text-xl font-bold",children:["C$ ",x.toFixed(2)]})]}),fe==="CONTADO"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:Pe=>w(Number(Pe.target.value||0)),placeholder:"Monto recibido"}),i.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),i.jsx("button",{onClick:He,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:He,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:Pe=>c(Pe.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),ut.map(Pe=>i.jsxs("option",{value:Pe.id,disabled:gt.has(Pe.id),title:gt.has(Pe.id)?"Ya est en la lista":`Disponible: ${Z(P[Pe.id]||0)}`,children:[Pe.productName,"  ",Pe.measurement,"  C$ ",Pe.price," (disp:"," ",Z(P[Pe.id]||0),")"]},Pe.id))]}),i.jsx("button",{type:"button",onClick:J,disabled:!l||gt.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:Pe=>d(Pe.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:fe,onChange:Pe=>G(Pe.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),fe==="CONTADO"?i.jsxs("div",{className:"md:col-span-2 space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:Pe=>A(Pe.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ae,onChange:Pe=>je(Pe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),pe.map(Pe=>i.jsxs("option",{value:Pe.status==="ACTIVO"?Pe.id:"",disabled:Pe.status==="BLOQUEADO",children:[Pe.name,"  Saldo: ",JA(Pe.balance||0)]},Pe.id))]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:JA(Re)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",JA(We)]}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:We,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Be===0?"":Be,onChange:Pe=>{const ct=Math.max(0,Number(Pe.target.value||0)),lt=Math.min(ct,We);O(lt)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:JA(pt)})]})]})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(Pe=>{const ct=z(Pe),lt=Number(ct||0)*Number(Pe.qty||0),be=Math.max(0,lt-Math.max(0,Number(Pe.discount||0))),ue=(Pe.measurement||"").toLowerCase()!=="lb",Le=za(Number(Pe.stock)-Number(Pe.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Pe.productName,"  ",Pe.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(Pe.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Pe.specialPrice===0?"":Pe.specialPrice,onKeyDown:te,onChange:ke=>U(Pe.productId,ke.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",D(ct).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Le.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:ue?1:.01,inputMode:ue?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:Pe.qtyInput??(Pe.qty===0?"":Pe.qty),onKeyDown:te,onChange:ke=>ge(Pe.productId,ke.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:Pe.discount===0?"":Pe.discount,onChange:ke=>Ue(Pe.productId,ke.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(be).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>H(Pe.productId),title:"Quitar",children:""})})]},Pe.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),fe==="CONTADO"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:Pe=>w(Number(Pe.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}const go=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function o5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function A4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(!0),[d,f]=v.useState(""),{refreshKey:A,refresh:h}=fc(),m=e&&e.length?e:t,p=ln(m,"admin"),g=p||ln(m,"contador"),[x,y]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[b,w]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[j,I]=v.useState(""),[_,S]=v.useState(!1),[E,F]=v.useState(""),[P,k]=v.useState(Cr(new Date,"yyyy-MM-dd")),[D,Z]=v.useState("lb"),[fe,me]=v.useState(""),[pe,ye]=v.useState(0),[ae,je]=v.useState(NaN),[Be,O]=v.useState(0),[G,z]=v.useState([]),[L,Y]=v.useState(null),[J,R]=v.useState([]),[H,ne]=v.useState(!1),[ge,U]=v.useState(null),[Ue,ie]=v.useState(!1),[te,Ee]=v.useState(null),[ce,we]=v.useState(null),Re=oe=>we(Ve=>Ve===oe?null:oe),[We,pt]=v.useState(!1),_t=()=>pt(oe=>!oe),He=oe=>{const Ve=(oe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ve)||Ve==="lb"};v.useEffect(()=>{(async()=>{u(!0),f("");const oe=await Lt(Ct(Te,"products")),Ve=[];oe.forEach(xt=>{const ht=xt.data();ht.active===!0&&Ve.push({id:xt.id,name:ht.name??ht.productName??"(sin nombre)",category:ht.category??"(sin categora)",measurement:ht.measurement??"lb",price:Number(ht.price??0),providerPrice:Object.prototype.hasOwnProperty.call(ht,"providerPrice")?Number(ht.providerPrice):void 0})}),s(Ve);const de=rr(Ct(Te,"inventory_batches"),gn("date","desc")),Se=await Lt(de),dt=[];Se.forEach(xt=>{const ht=xt.data(),bt=za(Number(ht.quantity||0)),et=Number(ht.purchasePrice||0),Ne=Number(ht.salePrice||0),mt=Number((bt*et).toFixed(2)),W=Number((bt*Ne).toFixed(2));dt.push({id:xt.id,productId:ht.productId,productName:ht.productName,category:ht.category,unit:ht.unit,quantity:bt,remaining:za(Number(ht.remaining||0)),purchasePrice:et,salePrice:Ne,invoiceTotal:ht.invoiceTotal!=null?Number(ht.invoiceTotal):mt,expectedTotal:ht.expectedTotal!=null?Number(ht.expectedTotal):W,date:ht.date,createdAt:ht.createdAt,status:ht.status,notes:ht.notes,paidAmount:Number(ht.paidAmount||0),paidAt:ht.paidAt,batchGroupId:ht.batchGroupId,orderName:ht.orderName})}),l(dt),u(!1)})()},[A]);const gt=v.useMemo(()=>o.filter(oe=>!(x&&oe.date<x||b&&oe.date>b||j&&oe.productId!==j)),[o,x,b,j]),ut=v.useMemo(()=>{const oe=gt.reduce((et,Ne)=>et+Number(Ne.invoiceTotal||0),0),Ve=gt.reduce((et,Ne)=>et+Number(Ne.expectedTotal||0),0);let de=0,Se=0,dt=0,xt=0;for(const et of gt)He(et.unit)?(de+=et.quantity,Se+=et.remaining):(dt+=et.quantity,xt+=et.remaining);const ht=gt.reduce((et,Ne)=>et+Ne.quantity,0),bt=gt.reduce((et,Ne)=>et+Ne.remaining,0);return{lbsIng:de,lbsRem:Se,udsIng:dt,udsRem:xt,qty:ht,rem:bt,totalFacturado:oe,totalEsperado:Ve}},[gt]),vt=v.useMemo(()=>{var de,Se;const oe=new Map;for(const dt of gt){const xt=dt.batchGroupId&&String(dt.batchGroupId).trim()||dt.id;oe.has(xt)||oe.set(xt,[]),oe.get(xt).push(dt)}const Ve=[];for(const[dt,xt]of oe.entries()){const ht=[...xt].sort((q,ee)=>{var Ke,ot;const se=((Ke=q.createdAt)==null?void 0:Ke.seconds)??0;return(((ot=ee.createdAt)==null?void 0:ot.seconds)??0)-se}),bt=((de=ht[0])==null?void 0:de.date)||"",et=String(((Se=ht[0])==null?void 0:Se.orderName)||"").trim()||`Pedido ${bt||""}`.trim()||"Pedido",Ne=new Set(ht.map(q=>String(q.category||"").trim()).filter(Boolean)),mt=Ne.size===1?Array.from(Ne)[0].toUpperCase():"MIXTO",W=ht.some(q=>q.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Ie=za(ht.reduce((q,ee)=>q+(He(ee.unit)?Number(ee.quantity||0):0),0)),Je=za(ht.reduce((q,ee)=>q+(He(ee.unit)?Number(ee.remaining||0):0),0)),tt=za(ht.reduce((q,ee)=>q+(He(ee.unit)?0:Number(ee.quantity||0)),0)),ft=za(ht.reduce((q,ee)=>q+(He(ee.unit)?0:Number(ee.remaining||0)),0)),T=Number(ht.reduce((q,ee)=>q+Number(ee.invoiceTotal||0),0).toFixed(2)),M=Number(ht.reduce((q,ee)=>q+Number(ee.expectedTotal||0),0).toFixed(2)),V=Number((M-T).toFixed(2));Ve.push({groupId:dt,orderName:et,date:bt,typeLabel:mt,status:W,lbsIn:Ie,lbsRem:Je,udsIn:tt,udsRem:ft,totalFacturado:T,totalEsperado:M,utilidadBruta:V,items:ht})}return Ve.sort((dt,xt)=>dt.date===xt.date?dt.groupId<xt.groupId?1:-1:dt.date<xt.date?1:-1),Ve},[gt]),Pe=v.useMemo(()=>{const oe=String(D||"").toLowerCase().trim();return a.filter(de=>String(de.measurement||"").toLowerCase().trim()===oe).sort((de,Se)=>de.name.localeCompare(Se.name,"es"))},[a,D]);v.useEffect(()=>{const oe=G.find(de=>de.productId===fe);if(oe){ye(Number(oe.quantity||0)),je(Number(oe.purchasePrice||0)),O(Number(oe.salePrice||0));return}const Ve=a.find(de=>de.id===fe);Ve?(ye(0),O(Number(Ve.price||0)),Ve.providerPrice!=null&&Number.isFinite(Number(Ve.providerPrice))?je(Number(Ve.providerPrice)):je(NaN)):(ye(0),O(0),je(NaN))},[fe,a,A,G]);const ct=()=>{f("");const oe=a.find(bt=>bt.id===fe);if(!oe)return f("Selecciona un producto.");if(pe<=0||!Number.isFinite(ae)||ae<=0)return f("Completa libras a ingresar y precio proveedor.");const Ve=za(pe),de=oe.measurement,Se=Number((Ve*Number(ae||0)).toFixed(2)),dt=Number((Ve*Number(Be||0)).toFixed(2)),xt=Number((dt-Se).toFixed(2)),ht=G.findIndex(bt=>bt.productId===oe.id);ht>=0?z(bt=>bt.map((et,Ne)=>Ne!==ht?et:{...et,quantity:Ve,remaining:Ve,purchasePrice:Number(ae||0),salePrice:Number(Be||0),invoiceTotal:Se,expectedTotal:dt,utilidadBruta:xt})):z(bt=>[...bt,{tempId:o5("IT"),productId:oe.id,productName:oe.name,category:oe.category,unit:de,quantity:Ve,remaining:Ve,purchasePrice:Number(ae||0),salePrice:Number(Be||0),invoiceTotal:Se,expectedTotal:dt,utilidadBruta:xt}]),me(""),ye(0),je(NaN),O(0)},lt=oe=>{z(Ve=>Ve.filter(de=>de.tempId!==oe))},be=(oe,Ve,de)=>{z(Se=>Se.map(dt=>{if(dt.tempId!==oe)return dt;const xt={...dt};return Ve==="quantity"&&(xt.quantity=za(Math.max(0,de)),L||(xt.remaining=xt.quantity)),Ve==="purchasePrice"&&(xt.purchasePrice=Math.max(0,Number(de||0))),Ve==="salePrice"&&(xt.salePrice=Math.max(0,Number(de||0))),xt.invoiceTotal=Number((xt.quantity*xt.purchasePrice).toFixed(2)),xt.expectedTotal=Number((xt.quantity*xt.salePrice).toFixed(2)),xt.utilidadBruta=Number((xt.expectedTotal-xt.invoiceTotal).toFixed(2)),xt}))},ue=v.useMemo(()=>{const oe=za(G.reduce((xt,ht)=>xt+(He(ht.unit)?Number(ht.quantity||0):0),0)),Ve=za(G.reduce((xt,ht)=>xt+(He(ht.unit)?Number(ht.remaining||0):0),0)),de=Number(G.reduce((xt,ht)=>xt+Number(ht.invoiceTotal||0),0).toFixed(2)),Se=Number(G.reduce((xt,ht)=>xt+Number(ht.expectedTotal||0),0).toFixed(2)),dt=Number((Se-de).toFixed(2));return{lbsIn:oe,lbsRem:Ve,totalFacturado:de,totalEsperado:Se,utilidadBruta:dt}},[G]),Le=()=>{Y(null),R([]),F(""),k(Cr(new Date,"yyyy-MM-dd")),Z("lb"),me(""),ye(0),je(NaN),O(0),z([])},ke=async()=>{if(f(""),!G.length)return f("Agrega al menos un producto al pedido.");const oe=P||Cr(new Date,"yyyy-MM-dd"),Ve=String(E||"").trim()||`Pedido ${oe}`,de=L||o5("BATCH");try{if(!L){for(const ht of G)await SV({productId:ht.productId,productName:ht.productName,category:ht.category,unit:ht.unit,quantity:za(ht.quantity),purchasePrice:Number(ht.purchasePrice||0),salePrice:Number(ht.salePrice||0),invoiceTotal:Number(ht.invoiceTotal||0),expectedTotal:Number(ht.expectedTotal||0),date:oe,notes:"",batchGroupId:de,orderName:Ve});f(" Pedido creado"),S(!1),Le(),h();return}const Se=J,dt=new Map;for(const ht of Se)dt.set(ht.productId,ht);const xt=new Set(G.map(ht=>ht.productId));for(const ht of G){const bt=dt.get(ht.productId),et=za(ht.quantity);if(bt){const Ne=za(bt.quantity-bt.remaining),mt=Math.max(0,za(et-Ne));await xn(Wt(Te,"inventory_batches",bt.id),{date:oe,orderName:Ve,batchGroupId:de,quantity:et,purchasePrice:Number(ht.purchasePrice||0),salePrice:Number(ht.salePrice||0),invoiceTotal:Number(ht.invoiceTotal||0),expectedTotal:Number(ht.expectedTotal||0),remaining:mt})}else await SV({productId:ht.productId,productName:ht.productName,category:ht.category,unit:ht.unit,quantity:et,purchasePrice:Number(ht.purchasePrice||0),salePrice:Number(ht.salePrice||0),invoiceTotal:Number(ht.invoiceTotal||0),expectedTotal:Number(ht.expectedTotal||0),date:oe,notes:"",batchGroupId:de,orderName:Ve})}for(const ht of Se)xt.has(ht.productId)||await Bn(Wt(Te,"inventory_batches",ht.id));f(" Pedido actualizado"),S(!1),Le(),h()}catch(Se){console.error(Se),f(" Error al guardar pedido")}},Ae=oe=>{U(oe),ne(!0)},Ye=oe=>{Y(oe.groupId),R(oe.items),F(oe.orderName),k(oe.date||Cr(new Date,"yyyy-MM-dd"));const Ve=oe.items.map(de=>{const Se=Number(de.invoiceTotal||0),dt=Number(de.expectedTotal||0);return{tempId:o5("IT"),productId:de.productId,productName:de.productName,category:de.category,unit:de.unit,quantity:za(de.quantity),remaining:za(de.remaining),purchasePrice:Number(de.purchasePrice||0),salePrice:Number(de.salePrice||0),invoiceTotal:Se,expectedTotal:dt,utilidadBruta:Number((dt-Se).toFixed(2))}});z(Ve),S(!0)},yt=async oe=>{if(confirm(`Eliminar el pedido "${oe.orderName}" del ${oe.date}?`))try{for(const de of oe.items)await Bn(Wt(Te,"inventory_batches",de.id));f(" Pedido eliminado"),h()}catch(de){console.error(de),f(" Error al eliminar pedido")}},At=oe=>{Ee(oe),ie(!0)},he=async()=>{if(te)try{for(const oe of te.items){if(oe.status!=="PENDIENTE")continue;await hre(oe.id),await xn(Wt(Te,"inventory_batches",oe.id),{remaining:0});const Ve={date:oe.date,productName:oe.productName,quantity:oe.quantity,amount:Number((oe.expectedTotal??oe.salePrice*oe.quantity).toFixed(2)),allocations:[{batchId:oe.id,qty:oe.quantity,unitCost:oe.purchasePrice,lineCost:Number((oe.purchasePrice*oe.quantity).toFixed(2))}],avgUnitCost:oe.purchasePrice,measurement:oe.unit,createdAt:ur.now(),autoGeneratedFromInventory:!0};await Tn(Ct(Te,"salesV2"),Ve)}f(" Pedido pagado y reflejado como venta"),h()}catch(oe){console.error(oe),f(" Error al pagar pedido")}finally{ie(!1),Ee(null)}},re=()=>{ie(!1),Ee(null)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),g&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{Le(),S(!0)},children:"Crear Lote"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:oe=>y(oe.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:oe=>w(oe.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:oe=>I(oe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),a.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category]},oe.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(dc,{onClick:()=>h(),loading:c})})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:_t,role:"button","aria-expanded":We,children:[i.jsxs("div",{className:"flex gap-6 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ut.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ut.lbsRem.toFixed(3)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:We?"Cerrar":"Ver ms"})]}),We&&i.jsx("div",{className:"mt-3",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ut.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ut.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ut.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ut.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",ut.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",ut.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(ut.totalEsperado-ut.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",gt.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"md:hidden space-y-3",children:c?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):vt.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):vt.map(oe=>{const Ve=ce===oe.groupId;return i.jsxs("div",{className:"bg-white border rounded-2xl",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Re(oe.groupId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold text-lg",children:oe.date}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:oe.orderName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status}),i.jsx("div",{className:"text-sm text-gray-500",children:oe.typeLabel})]})]}),Ve&&i.jsxs("div",{className:"p-4 pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:oe.typeLabel})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:go(oe.utilidadBruta)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:oe.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:oe.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:go(oe.totalFacturado)}),i.jsx("span",{children:go(oe.totalEsperado)})]})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>Ae(oe),children:"Ver detalle"}),p?i.jsxs(i.Fragment,{children:[oe.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>At(oe),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>Ye(oe),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>yt(oe),children:"Borrar"})]}):null]})]})]},oe.groupId)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Unidades ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Unidades restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):vt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin lotes"})}):vt.map(oe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>Ae(oe),title:oe.orderName,children:oe.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:oe.orderName})]}),i.jsx("td",{className:"p-2 border",children:oe.typeLabel}),i.jsx("td",{className:"p-2 border",children:oe.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.udsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.udsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:go(oe.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:go(oe.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:go(oe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})}),i.jsx("td",{className:"p-2 border",children:p?i.jsxs("div",{className:"flex gap-2 justify-center",children:[oe.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>At(oe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ye(oe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>yt(oe),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},oe.groupId))})]})}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),_&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:L?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:oe=>F(oe.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:oe=>k(oe.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:D,onChange:oe=>{Z(oe.target.value),me(""),ye(0),je(NaN),O(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:oe=>me(oe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),Pe.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category,"  ",oe.measurement]},oe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:pe===0?"":pe,onChange:oe=>{const Ve=oe.target.value.replace(",","."),de=parseFloat(Ve),Se=Number.isFinite(de)?parseFloat(de.toFixed(3)):0;ye(Math.max(0,Se));const dt=G.find(xt=>xt.productId===fe);dt&&be(dt.tempId,"quantity",Se)},disabled:!fe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ae)?"":ae,onChange:oe=>{const Ve=oe.target.value.replace(",",".");if(Ve==="")return je(NaN);const de=parseFloat(Ve),Se=Number.isFinite(de)?parseFloat(de.toFixed(2)):NaN;je(Number.isFinite(Se)?Math.max(0,Se):NaN);const dt=G.find(xt=>xt.productId===fe);dt&&Number.isFinite(Se)&&be(dt.tempId,"purchasePrice",Se)},disabled:!fe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Be===0?"":Be,onChange:oe=>{const Ve=oe.target.value.replace(",","."),de=parseFloat(Ve),Se=Number.isFinite(de)?parseFloat(de.toFixed(2)):0;O(Math.max(0,Se));const dt=G.find(xt=>xt.productId===fe);dt&&be(dt.tempId,"salePrice",Se)},disabled:!fe})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:ct,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):G.map(oe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[oe.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[oe.category,"  ",oe.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.quantity,onChange:Ve=>{const de=Ve.target.value.replace(",","."),Se=parseFloat(de),dt=Number.isFinite(Se)?parseFloat(Se.toFixed(3)):0;be(oe.tempId,"quantity",dt)}})}),i.jsx("td",{className:"p-2 border",children:Number(oe.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.purchasePrice,onChange:Ve=>{const de=Ve.target.value.replace(",","."),Se=parseFloat(de),dt=Number.isFinite(Se)?parseFloat(Se.toFixed(2)):0;be(oe.tempId,"purchasePrice",dt)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.salePrice,onChange:Ve=>{const de=Ve.target.value.replace(",","."),Se=parseFloat(de),dt=Number.isFinite(Se)?parseFloat(Se.toFixed(2)):0;be(oe.tempId,"salePrice",dt)}})}),i.jsx("td",{className:"p-2 border",children:go(oe.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:go(oe.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:go(oe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>lt(oe.tempId),children:"Quitar"})})]},oe.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:ue.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:ue.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:go(ue.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:go(ue.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:go(ue.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:ke,disabled:G.length===0,children:L?"Editar pedido":"Crear pedido"})]})]})]}),document.body),H&&ge&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{ne(!1),U(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:ge.orderName})," "," ",ge.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(!1),U(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:ge.items.map(oe=>{const Ve=Number(oe.invoiceTotal||0),de=Number(oe.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:oe.productName}),i.jsx("td",{className:"p-2 border",children:(oe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:oe.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:oe.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:go(oe.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:go(oe.salePrice)}),i.jsx("td",{className:"p-2 border",children:go(Ve)}),i.jsx("td",{className:"p-2 border",children:go(de)}),i.jsx("td",{className:"p-2 border",children:go(de-Ve)}),i.jsx("td",{className:"p-2 border",children:oe.status})]},oe.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:ge.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:ge.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:go(ge.utilidadBruta)})]})]})]})]}),document.body),Ue&&te&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:re}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:te.orderName})," "," ",te.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:he,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:re,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const hh=t=>`C$${(Number(t)||0).toFixed(2)}`;function m4e(){const t=P2e(new Date),[e,r]=v.useState(Cr(t,"yyyy-MM")),[n,a]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=Cr(md(new Date(g,x-1,1)),"yyyy-MM-dd"),b=Cr(Ad(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{o(!0);try{const g=await Kje(d.from,d.to),x=[];for(const y of g){const b=Wt(Te,"inventory_batches",y.batchId),w=await js(b);if(!w.exists())continue;const j=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{o(!1)}};v.useEffect(()=>{f()},[e]);const A=async g=>{confirm("Marcar este lote como PAGADO?")&&(await hre(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},h=v.useMemo(()=>{const g=n.reduce((w,j)=>w+j.soldQty,0),x=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([Vh(()=>Promise.resolve().then(()=>N6),void 0),Vh(()=>Promise.resolve().then(()=>jk),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),S=I,E=_.height*S/_.width;j.addImage(w,"PNG",10,10,S,E),j.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),i.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",hh(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",hh(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",hh(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.batchDate}),i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:g.soldQty}),i.jsx("td",{className:"p-2 border",children:hh(g.soldAmount)}),i.jsx("td",{className:"p-2 border",children:hh(x)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:hh(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),i.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>A(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.qty}),i.jsx("td",{className:"p-2 border",children:hh(g.revenue)}),i.jsx("td",{className:"p-2 border",children:hh(g.cogs)}),i.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:hh(g.profit)})]},g.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}function xre(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(d):t,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&A>=1){for(var m=0;m<f.length;m++)a.text(f[m],e-a.getStringUnitWidth(f[m])*h,r),r+=u;return a}e-=a.getStringUnitWidth(t)*h}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var FV={},av=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:FV=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return FV||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Pk=function(t,e){return Pk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Pk(t,e)};function vre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Pk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var yre=function(t){vre(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function p4e(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function g4e(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function _S(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function bre(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=wre(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function wre(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function qj(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Nre(t,e){var r=qj(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function x4e(t,e,r,n,a){var s={},o=1.3333333333333333,l=l5(e,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(s.fillColor=l);var c=l5(e,function(b){return a.getComputedStyle(b).color});c!=null&&(s.textColor=c);var u=y4e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var h=(parseFloat(A)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var m=l5(e,function(b){return a.getComputedStyle(b)[d]});m!=null&&(s.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var g=parseInt(n.fontSize||"");isNaN(g)||(s.fontSize=g/o);var x=v4e(n);x&&(s.fontStyle=x);var y=(n.fontFamily||"").toLowerCase();return t.indexOf(y)!==-1&&(s.font=y),s}function v4e(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function l5(t,e){var r=Cre(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Cre(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:Cre(t.parentElement,e):r}function y4e(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=qj(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function _re(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:A};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],p=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=b4e(c,u,r,m,n,a);g&&(p==="thead"?d.push(g):p==="tfoot"?A.push(g):f.push(g))}return{head:d,body:f,foot:A}}function b4e(t,e,r,n,a,s){for(var o=new yre(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=x4e(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:w4e(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function w4e(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function N4e(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Th(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Ere(t,e){var r=new av(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();N4e(a,n,e);var s=Th({},a,n,e),o;typeof window<"u"&&(o=window);var l=C4e(a,n,e),c=_4e(a,n,e),u=E4e(r,s),d=I4e(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function C4e(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],f=r[c];n.columnStyles=Th({},u,d,f)}else{var A=[t,e,r],h=A.map(function(m){return m[c]||{}});n[c]=Th({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function _4e(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function E4e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m=qj(e.margin,40/t.scaleFactor()),p=(r=S4e(t,e.startY))!==null&&r!==void 0?r:m.top,g;e.showFoot===!0?g="everyPage":e.showFoot===!1?g="never":g=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var x;e.showHead===!0?x="everyPage":e.showHead===!1?x="never":x=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var y=(s=e.useCss)!==null&&s!==void 0?s:!1,b=e.theme||(y?"plain":"striped"),w=!!e.horizontalPageBreak,j=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:b,startY:p,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:x,showFoot:g,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:w,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function S4e(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function I4e(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=_re(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||j4e(n,a,s);return{columns:c,head:n,body:a,foot:s}}function j4e(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Bk=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),P4e=function(t){vre(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(Bk),B4e=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new P4e(e,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Bk(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Bk(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Sre=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof yre&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),Ire=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=qj(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),T4e=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function k4e(t,e){F4e(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=Tk(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=Tk(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),D4e(e),R4e(e,t),O4e(e)}function F4e(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=Nre(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=_S(u.text,u.styles,t)+f;var A=_S(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Tk(t,e,r){for(var n=e,a=t.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;e-=f-o.width,o.width=f}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(h){return e<0?h.width>r(h):!0});A.length&&(e=Tk(A,e,r))}return e}function O4e(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:A,row:s}}}}}function D4e(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function R4e(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=OV(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=OV(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function OV(t,e,r,n,a){return t.map(function(s){return M4e(s,e,r,n,a)})}function M4e(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=_S(t,r,n))return t;for(;e<_S(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function jre(t,e){var r=new av(t),n=L4e(e,r.scaleFactor()),a=new B4e(e,n);return k4e(r,a),r.applyStyles(r.userStyles),a}function L4e(t,e){var r=t.content,n=Q4e(r.columns);if(r.head.length===0){var a=DV(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=DV(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:c5("head",r.head,n,o,s,e),body:c5("body",r.body,n,o,s,e),foot:c5("foot",r.foot,n,o,s,e)}}function c5(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,f={},A=0,h=0,m=0,p=r;m<p.length;m++){var g=p[m];if(o[g.index]==null||o[g.index].left===0)if(h===0){var x=void 0;Array.isArray(c)?x=c[g.index-A-d]:x=c[g.dataKey];var y={};typeof x=="object"&&!Array.isArray(x)&&(y=(x==null?void 0:x.styles)||{});var b=V4e(t,g,u,a,n,s,y),w=new Ire(x,b,t);f[g.dataKey]=w,f[g.index]=w,h=w.colSpan-1,o[g.index]={left:w.rowSpan-1,times:h}}else h--,A++;else o[g.index].left--,h=o[g.index].times,d++}return new Sre(c,u,t,f)});return l}function DV(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=U4e(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function U4e(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Q4e(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new T4e(a,e,r)})}function V4e(t,e,r,n,a,s,o){var l=g4e(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Th({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},f=t==="body"?d:{},A=t==="body"&&r%2===0?Th({},l.alternateRow,a.alternateRowStyles):{},h=p4e(s),m=Th({},h,u,A,f);return Th(m,o)}function H4e(t,e,r){var n;r===void 0&&(r={});var a=Nre(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var h=e.columns.find(function(m){return m.dataKey===A||m.index===A});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(e.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function $4e(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=H4e(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Pre(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(A,h){return A+h.height},0);l+=u}var d=new av(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Tre(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var f=Th({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?G4e(d,e,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(A){return rA(d,e,A,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(A,h){var m=h===e.body.length-1;ES(d,e,A,m,f,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(A){return rA(d,e,A,s,e.columns)})),bre(d,e,f,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function G4e(t,e,r,n){var a=$4e(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?wb(t,e,r,n,u.columns,!0):RV(t,e,n,u.columns),K4e(t,e,r,n,u.columns),u5(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?wb(t,e,r,n,d,!0):RV(t,e,n,d),u=MV(t,e,o+1,n,d),u5(t,e,n,d)}var f=u-o;a.slice(1).forEach(function(A){t.applyStyles(t.userStyles),wb(t,e,r,n,A.columns,!0),MV(t,e,o+1,n,A.columns,f),u5(t,e,n,A.columns)}),o=u};o<e.body.length-1;)c()}function RV(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return rA(t,e,s,r,n)})}function K4e(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;ES(t,e,s,l,r,n,a)})}function MV(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,f=Bre(t,e,d,n);c.canEntireRowFit(f,a)&&(rA(t,e,c,n,a),l=r+u)}),l}function u5(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return rA(t,e,s,r,n)})}function q4e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function z4e(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Ire(u.raw,u.styles,u.section);d=Th(d,u),d.text=[];var f=q4e(u,e,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,h),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var m=new Sre(t.raw,-1,t.section,a,!0);m.height=s;for(var p=0,g=r.columns;p<g.length;p++){var c=g[p],d=m.cells[c.index];d&&(d.height=m.height);var u=t.cells[c.index];u&&(u.height=t.height)}return m}function W4e(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function ES(t,e,r,n,a,s,o){var l=Bre(t,e,n,s);if(r.canEntireRowFit(l,o))rA(t,e,r,s,o);else if(W4e(t,r,l,e)){var c=z4e(r,l,e,t);rA(t,e,r,s,o),wb(t,e,a,s,o),ES(t,e,c,n,a,s,o)}else wb(t,e,a,s,o),ES(t,e,r,n,a,s,o)}function rA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}X4e(t,c,n);var d=c.getTextPos();xre(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function X4e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=wre(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Y4e(t,e,r,n.lineWidth))}function Y4e(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,A,h,"S")}}function Bre(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function wb(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return rA(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;bre(t,e,r,n),Tre(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return rA(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function Tre(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function J4e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=Ere(this,n),s=jre(this,a);return Pre(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){xre(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return av.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){av.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new av(this),s=_re(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var d5;function PC(t,e){var r=Ere(t,e),n=jre(t,r);Pre(t,n)}try{if(typeof window<"u"&&window){var LV=window,UV=LV.jsPDF||((d5=LV.jspdf)===null||d5===void 0?void 0:d5.jsPDF);UV&&J4e(UV)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Yr=t=>`C$${Number(t??0).toFixed(2)}`,Z4e=()=>Cr(new Date,"yyyy-MM-dd"),ga=t=>Number(t||0).toFixed(3);function ePe(){const[t,e]=v.useState(()=>{const re=new Date,oe=new Date(re.getFullYear(),re.getMonth(),1);return Cr(oe,"yyyy-MM-dd")}),[r,n]=v.useState(Z4e()),[a,s]=v.useState(!0),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[A,h]=v.useState(!1),[m,p]=v.useState(null),[g,x]=v.useState(0),[y,b]=v.useState(0),[w,j]=v.useState({}),[I,_]=v.useState({}),{refreshKey:S,refresh:E}=fc(),[F,P]=v.useState({}),[k,D]=v.useState({}),[Z,fe]=v.useState(!1),me=()=>fe(re=>!re),[pe,ye]=v.useState(!1),ae=()=>ye(re=>!re),[je,Be]=v.useState(!1),[O,G]=v.useState(!1),[z,L]=v.useState(!1),Y=()=>Be(re=>!re),J=()=>G(re=>!re),R=()=>L(re=>!re),[H,ne]=v.useState("");v.useEffect(()=>{(async()=>{s(!0);const oe=rr(Ct(Te,"salesV2"),or("date",">=",t),or("date","<=",r)),Ve=await Lt(oe),de=[];Ve.forEach(ht=>{const bt=ht.data(),et=bt.date??"";if(Array.isArray(bt.items)&&bt.items.length>0){bt.items.forEach((Ne,mt)=>{const W=String(Ne.productName??"(sin nombre)"),Ie=Number(Ne.qty??0),Je=Number(Ne.lineFinal??0)||Math.max(0,Number(Ne.unitPrice||0)*Ie-Number(Ne.discount||0));de.push({id:`${ht.id}#${mt}`,date:et,productName:W,quantity:Ie,amount:Je,allocations:Array.isArray(Ne.allocations)?Ne.allocations:bt.allocations,avgUnitCost:Number(Ne.avgUnitCost??bt.avgUnitCost??0),measurement:Ne.measurement??bt.measurement??"",type:bt.type??"CONTADO"})});return}de.push({id:ht.id,date:et,productName:bt.productName??"(sin nombre)",quantity:Number(bt.quantity??0),amount:Number(bt.amount??bt.amountCharged??0),allocations:Array.isArray(bt.allocations)?bt.allocations:[],avgUnitCost:Number(bt.avgUnitCost??0),measurement:bt.measurement??"",type:bt.type??"CONTADO"})}),l(de);const Se=rr(Ct(Te,"expenses"),or("date",">=",t),or("date","<=",r)),dt=await Lt(Se),xt=[];dt.forEach(ht=>{const bt=ht.data();xt.push({id:ht.id,date:bt.date??"",category:bt.category??"(sin categora)",description:bt.description??"",amount:Number(bt.amount??0),status:bt.status??"PAGADO",createdAt:bt.createdAt})}),u(xt),s(!1)})()},[t,r,S]),v.useMemo(()=>{const re=o.reduce((dt,xt)=>dt+(xt.amount||0),0);let oe=0;o.forEach(dt=>{var xt;(xt=dt.allocations)!=null&&xt.length?oe+=dt.allocations.reduce((ht,bt)=>ht+Number(bt.lineCost||0),0):dt.avgUnitCost&&dt.quantity&&(oe+=Number(dt.avgUnitCost)*Number(dt.quantity))});const Ve=re-oe,de=c.reduce((dt,xt)=>dt+(xt.amount||0),0),Se=Ve-de;return{revenue:re,cogsReal:oe,grossProfit:Ve,expensesSum:de,netProfit:Se}},[o,c]);const ge=v.useMemo(()=>H?o.filter(re=>(re.productName||"")===H):o,[o,H]),U=v.useMemo(()=>{const re=ge.reduce((dt,xt)=>dt+(xt.amount||0),0);let oe=0;ge.forEach(dt=>{var xt;(xt=dt.allocations)!=null&&xt.length?oe+=dt.allocations.reduce((ht,bt)=>ht+Number(bt.lineCost||0),0):dt.avgUnitCost&&dt.quantity&&(oe+=Number(dt.avgUnitCost)*Number(dt.quantity))});const Ve=re-oe,de=c.reduce((dt,xt)=>dt+(xt.amount||0),0),Se=Ve-de;return{revenue:re,cogsReal:oe,grossProfit:Ve,expensesSum:de,netProfit:Se}},[ge,c]),Ue=v.useMemo(()=>{const re=ge.filter(xt=>xt.type==="CONTADO"),oe=re.reduce((xt,ht)=>xt+(ht.amount||0),0);let Ve=0;re.forEach(xt=>{var ht;(ht=xt.allocations)!=null&&ht.length?Ve+=xt.allocations.reduce((bt,et)=>bt+Number(et.lineCost||0),0):xt.avgUnitCost&&xt.quantity&&(Ve+=Number(xt.avgUnitCost)*Number(xt.quantity))});const de=oe-Ve,Se=c.reduce((xt,ht)=>xt+(ht.amount||0),0),dt=de-Se;return{revenue:oe,cogsReal:Ve,grossProfit:de,expensesSum:Se,netProfit:dt}},[ge,c]),ie=v.useMemo(()=>{const re=ge.filter(Se=>Se.type==="CREDITO"),oe=re.reduce((Se,dt)=>Se+(dt.amount||0),0);let Ve=0;re.forEach(Se=>{var dt;(dt=Se.allocations)!=null&&dt.length?Ve+=Se.allocations.reduce((xt,ht)=>xt+Number(ht.lineCost||0),0):Se.avgUnitCost&&Se.quantity&&(Ve+=Number(Se.avgUnitCost)*Number(Se.quantity))});const de=oe-Ve;return{revenue:oe,cogsReal:Ve,grossProfit:de}},[ge]),te=re=>String(re??"").toLowerCase().trim(),Ee=re=>Number(re.qty??re.quantity??0),ce=re=>["lb","lbs","libra","libras"].includes(te(re)),we=re=>["unidad","unidades","ud","uds","pieza","piezas"].includes(te(re)),Re=re=>re?typeof re=="string"?re:re!=null&&re.toDate?Cr(re.toDate(),"yyyy-MM-dd"):"":"";v.useEffect(()=>{(async()=>{h(!0);try{const oe=await Lt(Ct(Te,"customers_pollo")),Ve={};oe.forEach(ee=>{const se=ee.data();Ve[ee.id]=String(se.name??"(sin nombre)")});const de=await Lt(Ct(Te,"ar_movements_pollo")),Se={},dt={},xt={},ht={},bt=new Set,et={},Ne={};let mt=0;de.forEach(ee=>{var Xe,xe,Ge;const se=ee.data(),Oe=String(se.customerId??"").trim();if(!Oe)return;const Ke=Number(se.amount??0);Se[Oe]=(Se[Oe]||0)+Ke;const ot=String(se.type??"").toUpperCase(),Fe=se.createdAt??null;if(ot==="ABONO"){mt+=Math.abs(Ke);const qe=(Xe=se==null?void 0:se.ref)!=null&&Xe.saleId?String(se.ref.saleId):"";qe?(et[qe]=(et[qe]||0)+Math.abs(Ke),bt.add(qe)):Ne[Oe]=(Ne[Oe]||0)+Math.abs(Ke);const it=xt[Oe],Et=!(it!=null&&it.ts)||(Fe!=null&&Fe.toDate&&((xe=it.ts)!=null&&xe.toDate)?Fe.toDate()>it.ts.toDate():!1);(!it||Et)&&(xt[Oe]={amount:Math.abs(Ke),date:se.date??"",ts:Fe})}if(ot==="CARGO"){dt[Oe]=(dt[Oe]||0)+Math.abs(Ke);const qe=(Ge=se==null?void 0:se.ref)!=null&&Ge.saleId?String(se.ref.saleId):"";qe&&(ht[Oe]||(ht[Oe]=new Set),ht[Oe].add(qe),bt.add(qe))}});const W=new Map;await Promise.all(Array.from(bt).map(async ee=>{const se=await js(Wt(Te,"salesV2",ee));se.exists()&&W.set(ee,se.data())}));let Ie=0;const Je=ee=>{const se=Number(ee.qty??ee.quantity??0);return Number(ee.lineFinal??0)||Math.max(0,Number(ee.unitPrice||0)*se-Number(ee.discount||0))},tt=ee=>{if(Array.isArray(ee.items)&&ee.items.length>0){let ot=0,Fe=0;return ee.items.forEach(Xe=>{const xe=Number(Xe.qty??Xe.quantity??0);if(ot+=Je(Xe),Array.isArray(Xe.allocations)&&Xe.allocations.length>0)Fe+=Xe.allocations.reduce((Ge,qe)=>Ge+Number(qe.lineCost||0),0);else{const Ge=Number(Xe.avgUnitCost??ee.avgUnitCost??0);Fe+=Ge*xe}}),{total:ot,cogs:Fe}}const se=Number(ee.quantity??0),Oe=Number(ee.amount??ee.amountCharged??0)||0;let Ke=0;return Array.isArray(ee.allocations)&&ee.allocations.length>0?Ke=ee.allocations.reduce((ot,Fe)=>ot+Number(Fe.lineCost||0),0):ee.avgUnitCost&&(Ke=Number(ee.avgUnitCost)*se),{total:Oe,cogs:Ke}},ft=new Map;W.forEach((ee,se)=>{const{total:Oe,cogs:Ke}=tt(ee);ft.set(se,{total:Oe,cogs:Ke,grossProfit:Oe-Ke})});const T={},M={};Object.keys(et).forEach(ee=>{const se=ft.get(ee);if(!(se!=null&&se.total))return;const Oe=Number(et[ee]||0);M[ee]=Oe;const Ke=Math.min(1,Oe/se.total),ot=se.grossProfit*Ke;T[ee]=ot,Ie+=ot}),Object.keys(Ne).forEach(ee=>{const se=ht[ee];if(!se||se.size===0)return;let Oe=0,Ke=0,ot=0,Fe=0;se.forEach(it=>{const Et=ft.get(it);Et&&(Oe+=Et.total,Ke+=Et.grossProfit,M[it]&&(ot+=Math.min(Et.total,M[it])),Fe+=T[it]||0)});const Xe=Math.max(0,Oe-ot),xe=Math.max(0,Ke-Fe);if(!Xe||!xe)return;const Ge=Number(Ne[ee]||0),qe=Math.min(1,Ge/Xe);Ie+=xe*qe});const V=[];Object.keys(Se).forEach(ee=>{const se=Number(Se[ee]||0);if(se<=0)return;const Oe=new Map;let Ke=0,ot=0,Fe="";(ht[ee]||new Set).forEach(Ge=>{const qe=W.get(Ge);if(!qe)return;const it=String(qe.date??"");it&&(!Fe||it>Fe)&&(Fe=it),(Array.isArray(qe.items)&&qe.items.length>0?qe.items:[{productName:qe.productName,qty:qe.quantity,unitPrice:qe.unitPrice,discount:qe.discount,lineFinal:qe.amount??qe.amountCharged,measurement:qe.measurement}]).forEach(Pt=>{const pr=String(Pt.productName??"(sin nombre)"),Ot=Number(Pt.qty??Pt.quantity??0),Dt=String(Pt.measurement??""),fr=Number(Pt.lineFinal??0)||Math.max(0,Number(Pt.unitPrice||0)*Ot-Number(Pt.discount||0));ce(Dt)?Ke+=Ot:ot+=Ot;const ir=`${pr}||${Dt}`,Bt=Oe.get(ir)||{productName:pr,qty:0,amount:0,measurement:Dt};Bt.qty+=Ot,Bt.amount+=fr,Oe.set(ir,Bt)})});const xe=xt[ee];V.push({customerId:ee,name:Ve[ee]||"(sin nombre)",balance:se,globalBalance:Number(dt[ee]||0),lbs:Ke,units:ot,lastPaymentAmount:Number((xe==null?void 0:xe.amount)||0),lastSaleDate:Fe||"",lastPaymentDate:Re((xe==null?void 0:xe.ts)||(xe==null?void 0:xe.date)),products:Array.from(Oe.values()).sort((Ge,qe)=>Ge.productName.localeCompare(qe.productName))})});const q=V.filter(ee=>ee.products.length);q.sort((ee,se)=>se.balance-ee.balance),f(q),x(mt),b(Ie)}catch(oe){console.error("Error cargando saldos pendientes:",oe),f([]),x(0)}finally{h(!1)}})()},[S]),v.useEffect(()=>{(async()=>{try{const oe=await Lt(rr(Ct(Te,"inventory_batches"))),Ve=cS(t,"yyyy-MM-dd",new Date),de=cS(r,"yyyy-MM-dd",new Date),Se=Cr(md(Ve),"yyyy-MM-dd"),dt=Cr(Ad(de),"yyyy-MM-dd"),xt={};oe.forEach(ht=>{var Je;const bt=ht.data(),et=String(bt.productName??"(sin nombre)"),Ne=Number(bt.quantity??0),mt=Number(bt.remaining??0),W=(Je=bt==null?void 0:bt.date)!=null&&Je.toDate?Cr(bt.date.toDate(),"yyyy-MM-dd"):String((bt==null?void 0:bt.date)??(bt==null?void 0:bt.createdAt)??""),Ie=W&&W>=Se&&W<=dt;xt[et]||(xt[et]={incomingQty:0,remainingQty:0}),Ie&&(xt[et].incomingQty+=Ne),xt[et].remainingQty+=mt}),j(xt)}catch(oe){console.error("Error cargando inventario:",oe),j({})}})()},[S,t,r]),v.useMemo(()=>o.reduce((re,oe)=>ce(oe.measurement)?re+Ee(oe):re,0),[o]),v.useMemo(()=>ge.reduce((re,oe)=>ce(oe.measurement)?re+Ee(oe):re,0),[ge]);const We=v.useMemo(()=>ge.filter(re=>re.type==="CONTADO"),[ge]),pt=v.useMemo(()=>ge.filter(re=>re.type==="CREDITO"),[ge]),_t=v.useMemo(()=>We.reduce((re,oe)=>re+(oe.amount||0),0),[We]),He=v.useMemo(()=>pt.reduce((re,oe)=>re+(oe.amount||0),0),[pt]),gt=v.useMemo(()=>d.reduce((re,oe)=>re+Number(oe.balance||0),0),[d]),ut=v.useMemo(()=>Ue.revenue+g,[Ue.revenue,g]),vt=v.useMemo(()=>_t+g,[_t,g]),Pe=v.useMemo(()=>Ue.grossProfit+y,[Ue.grossProfit,y]),ct=v.useMemo(()=>Ue.netProfit+y,[Ue.netProfit,y]),lt=v.useMemo(()=>We.reduce((re,oe)=>ce(oe.measurement)?re+Ee(oe):re,0),[We]),be=v.useMemo(()=>pt.reduce((re,oe)=>ce(oe.measurement)?re+Ee(oe):re,0),[pt]);v.useMemo(()=>o.reduce((re,oe)=>we(oe.measurement)?re+Ee(oe):re,0),[o]),v.useMemo(()=>ge.reduce((re,oe)=>we(oe.measurement)?re+Ee(oe):re,0),[ge]);const ue=v.useMemo(()=>We.reduce((re,oe)=>we(oe.measurement)?re+Ee(oe):re,0),[We]),Le=v.useMemo(()=>pt.reduce((re,oe)=>we(oe.measurement)?re+Ee(oe):re,0),[pt]),ke=v.useMemo(()=>Array.from(new Set(o.map(re=>re.productName||"(sin nombre)"))).sort(),[o]),Ae=v.useMemo(()=>{var oe;const re=new Map;for(const Ve of ge){const de=Ve.productName||"(sin nombre)";re.has(de)||re.set(de,{productName:de,units:0,revenue:0,cogs:0,profit:0,firstDate:Ve.date||"",lastDate:Ve.date||""});const Se=re.get(de);Se.units+=Number(Ve.quantity||0),Se.revenue+=Number(Ve.amount||0),(!Se.firstDate||Ve.date<(Se.firstDate||Ve.date))&&(Se.firstDate=Ve.date),(!Se.lastDate||Ve.date>(Se.lastDate||Ve.date))&&(Se.lastDate=Ve.date);let dt=0;(oe=Ve.allocations)!=null&&oe.length?dt=Ve.allocations.reduce((xt,ht)=>xt+Number(ht.lineCost||0),0):Ve.avgUnitCost&&(dt=Number(Ve.avgUnitCost)*Number(Ve.quantity||0)),Se.cogs+=dt,Se.profit=Se.revenue-Se.cogs}return Array.from(re.values()).sort((Ve,de)=>Ve.productName.localeCompare(de.productName))},[ge]),Ye=v.useMemo(()=>[...Ae].sort((re,oe)=>oe.units-re.units).slice(0,3).map((re,oe)=>({idx:oe+1,name:re.productName,units:re.units})),[Ae]),yt=re=>P(oe=>({...oe,[re]:!oe[re]})),At=re=>D(oe=>({...oe,[re]:!oe[re]})),he=()=>{var dt,xt,ht;const re=new Lr({unit:"pt",format:"a4"}),oe="Dashboard Financiero",Ve=`Rango: ${t} a ${r}`,de=H?`Producto: ${H}`:"Producto: Todos";re.setFontSize(16),re.text(oe,40,40),re.setFontSize(10),re.text(Ve,40,58),re.text(de,40,72);let Se=90;PC(re,{startY:Se,head:[["KPI","Valor"]],body:[["Ventas (rango)",Yr(U.revenue)],["Costo",Yr(U.cogsReal)],["Utilidad Bruta",Yr(U.grossProfit)],["Gastos",Yr(U.expensesSum)],["Utilidad Neta",Yr(U.netProfit)],["CxC",Yr(gt)],["Recaudacin (Abonos)",Yr(g)],["Utilidad Neta Crdito (Caja)",Yr(y)],["Utilidad Bruta Cash + Crdito",Yr(Pe)],["Utilidad Neta Cash + Crdito",Yr(ct)]],styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Se=(dt=re.lastAutoTable)!=null&&dt.finalY?re.lastAutoTable.finalY+18:110,PC(re,{startY:Se,head:[["Cliente","Libras","Unidades","Saldo Global","Saldo pendiente","ltimo abono","Fecha ult. abono"]],body:d.map(bt=>[bt.name,ga(bt.lbs),ga(bt.units),Yr(bt.globalBalance),Yr(bt.balance),Yr(bt.lastPaymentAmount),bt.lastPaymentDate||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]},didDrawPage:bt=>{bt.pageNumber>1&&(re.setFontSize(10),re.text(oe,40,30))}}),Se=(xt=re.lastAutoTable)!=null&&xt.finalY?re.lastAutoTable.finalY+18:110,PC(re,{startY:Se,head:[["Producto","Ingresado","Disponibilidad","Fechas","Cantidad","Venta","Costo","Utilidad"]],body:Ae.map(bt=>{var et,Ne;return[bt.productName,ga(((et=w[bt.productName])==null?void 0:et.incomingQty)||0),ga(((Ne=w[bt.productName])==null?void 0:Ne.remainingQty)||0),bt.firstDate&&bt.lastDate?bt.firstDate===bt.lastDate?bt.firstDate:`${bt.firstDate}  ${bt.lastDate}`:"",ga(bt.units),Yr(bt.revenue),Yr(bt.cogs),Yr(bt.profit)]}),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),Se=(ht=re.lastAutoTable)!=null&&ht.finalY?re.lastAutoTable.finalY+18:110,PC(re,{startY:Se,head:[["Fecha","Categora","Descripcin","Monto","Estado"]],body:c.map(bt=>[bt.date,bt.category,bt.description||"",Yr(bt.amount),bt.status||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),re.save(`dashboard_${t}_a_${r}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:he,className:"px-3 py-2 rounded-lg text-sm bg-gray-900 text-white hover:bg-black",children:"Exportar PDF"}),i.jsx(dc,{onClick:E,loading:a})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:re=>e(re.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:re=>n(re.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:Y,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Kpi Financiero"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",i.jsx("b",{children:Yr(U.revenue)}),"  Utilidad Neta:"," ",i.jsx("b",{children:Yr(U.netProfit)})]})]}),i.jsx("div",{className:"text-gray-500",children:je?"Cerrar":"Ver"})]}),je&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex gap-2 mb-2 items-center",children:i.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:H,onChange:re=>ne(re.target.value),children:[i.jsx("option",{value:"",children:"Todos los productos"}),ke.map(re=>i.jsx("option",{value:re,children:re},re))]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Ventas",subtitle:"Ventas cash",value:Yr(ut),valueClass:"text-[#1E4D2B]"}),i.jsx(vs,{title:"Costo",value:Yr(Ue.cogsReal)}),i.jsx(vs,{title:"Utilidad Bruta Cash",value:Yr(Ue.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Ventas Crdito",value:Yr(ie.revenue)}),i.jsx(vs,{title:"Costo",value:Yr(ie.cogsReal),negative:!0}),i.jsx(vs,{title:"Utilidad Bruta Crdito",value:Yr(ie.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"CxC",value:Yr(gt)}),i.jsx(vs,{title:"Recaudacin (Abonos)",value:Yr(g)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Utilidad Neta Crdito (Caja)",value:Yr(y),valueClass:"text-[#BF5700]"}),i.jsx(vs,{title:"Utilidad Bruta Cash + Crdito",value:Yr(Pe),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Gastos",value:Yr(Ue.expensesSum),negative:!0}),i.jsx(vs,{title:"Utilidad Neta Cash + Crdito",value:Yr(ct),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(bl,{title:"Ventas Cash",value:Yr(vt)}),i.jsx(bl,{title:"Ventas Crdito",value:Yr(He)}),i.jsx(bl,{title:"Libras Cash",value:ga(lt)}),i.jsx(bl,{title:"Libras Crdito",value:ga(be)}),i.jsx(bl,{title:"Unidades Cash",value:ga(ue)}),i.jsx(bl,{title:"Unidades Crdito",value:ga(Le)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(bl,{title:"Libras Cash + Credito",value:ga(lt+be)}),i.jsx(bl,{title:"Unidades Cash + Credito",value:ga(ue+Le)}),i.jsx(QV,{title:"Productos ms vendidos",items:Ye.map(re=>({key:`${re.idx}`,label:`${re.idx}. ${re.name}`,value:`(${ga(re.units)})`}))})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Ventas Cash",value:Yr(ut),positive:!0}),i.jsx(vs,{title:"Costo",value:Yr(Ue.cogsReal),negative:!0}),i.jsx(vs,{title:"Utilidad Bruta Cash",value:Yr(Ue.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Ventas Crdito",value:Yr(ie.revenue),positive:!0}),i.jsx(vs,{title:"Costo",value:Yr(ie.cogsReal),negative:!0}),i.jsx(vs,{title:"Utilidad Bruta Crdito",value:Yr(ie.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"CxC",value:Yr(gt),negative:!0}),i.jsx(vs,{title:"Recaudacin (Abonos)",value:Yr(g),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-4 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(vs,{title:"Utilidad Neta Crdito (Caja)",value:Yr(y),valueClass:"text-[#BF5700]"}),i.jsx(vs,{title:"Utilidad Bruta Cash + Crdito",value:Yr(Pe),positive:!0}),i.jsx(vs,{title:"Gastos",value:Yr(Ue.expensesSum),negative:!0}),i.jsx(vs,{title:"Utilidad Neta Cash + Crdito",value:Yr(ct),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(bl,{title:"Ventas Cash",value:Yr(vt)}),i.jsx(bl,{title:"Ventas Crdito",value:Yr(He)}),i.jsx(bl,{title:"Libras Cash",value:ga(lt)}),i.jsx(bl,{title:"Libras Crdito",value:ga(be)}),i.jsx(bl,{title:"Unidades Cash",value:ga(ue)}),i.jsx(bl,{title:"Unidades Crdito",value:ga(Le)})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(bl,{title:"Libras Cash + Credito",value:ga(lt+be)}),i.jsx(bl,{title:"Unidades Cash + Credito",value:ga(ue+Le)}),i.jsx(QV,{title:"Productos ms vendidos",items:Ye.map(re=>({key:`${re.idx}`,label:`${re.idx}. ${re.name}`,value:`(${ga(re.units)})`}))})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:J,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Saldos pendientes"}),i.jsx("div",{className:"text-gray-500",children:O?"Cerrar":"Ver"})]}),O&&i.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mt-3",children:A?i.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?i.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Libras"}),i.jsx("th",{className:"border p-2",children:"Unidades"}),i.jsx("th",{className:"border p-2",children:"Saldo Global"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:d.map(re=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1 text-left",children:re.name}),i.jsx("td",{className:"border p-1",children:ga(re.lbs)}),i.jsx("td",{className:"border p-1",children:ga(re.units)}),i.jsx("td",{className:"border p-1",children:Yr(re.globalBalance)}),i.jsx("td",{className:"border p-1",children:Yr(re.balance)}),i.jsx("td",{className:"border p-1",children:Yr(re.lastPaymentAmount)}),i.jsx("td",{className:"border p-1",children:re.lastPaymentDate||""}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",onClick:()=>p(re),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},re.customerId))})]})})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:R,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Ventas y Gastos"}),i.jsx("div",{className:"text-gray-500",children:z?"Cerrar":"Ver"})]}),z&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Ventas"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Ingresado Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Disponibilidad"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"}),i.jsx("th",{className:"border p-2",children:"Cantidad Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[Ae.map(re=>{var oe,Ve;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:re.productName}),i.jsx("td",{className:"border p-1",children:ga(((oe=w[re.productName])==null?void 0:oe.incomingQty)||0)}),i.jsx("td",{className:"border p-1",children:ga(((Ve=w[re.productName])==null?void 0:Ve.remainingQty)||0)}),i.jsx("td",{className:"border p-1",children:re.firstDate&&re.lastDate?re.firstDate===re.lastDate?re.firstDate:`${re.firstDate}  ${re.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:ga(re.units)}),i.jsx("td",{className:"border p-1",children:Yr(re.revenue)}),i.jsx("td",{className:"border p-1",children:Yr(re.cogs)}),i.jsx("td",{className:`border p-1 ${re.profit>=0?"text-green-700":"text-red-700"}`,children:Yr(re.profit)})]},re.productName)}),Ae.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:me,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Ventas por producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[Ae.length," productos"]})]}),i.jsx("div",{className:"text-gray-500",children:Z?"Cerrar":"Ver"})]}),Z&&i.jsx("div",{className:"space-y-2 mt-3",children:Ae.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):Ae.map(re=>{var de,Se,dt,xt;const oe=!!F[re.productName],Ve=re.firstDate&&re.lastDate?re.firstDate===re.lastDate?re.firstDate:`${re.firstDate}  ${re.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>yt(re.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:re.productName}),i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Libras/Unidades"}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendidas: ",i.jsx("b",{children:ga(re.units)}),"  Disponible:"," ",i.jsx("b",{className:((de=w[re.productName])==null?void 0:de.remainingQty)>0?"text-green-700":"text-red-700",children:ga(((Se=w[re.productName])==null?void 0:Se.remainingQty)||0)})]})]}),i.jsx("div",{className:"text-gray-500 text-xs pt-0.10",children:oe?"Cerrar":"Ver"})]}),oe&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Tu,{label:"Lb/Un Ingresadas",value:ga(((dt=w[re.productName])==null?void 0:dt.incomingQty)||0)}),i.jsx(Tu,{label:"Lb/Un Disponibles",value:ga(((xt=w[re.productName])==null?void 0:xt.remainingQty)||0)}),i.jsx(Tu,{label:"Fechas Venta",value:Ve}),i.jsx(Tu,{label:"Lb/Un Vendidas",value:ga(re.units)}),i.jsx(Tu,{label:"Facturado al costo",value:Yr(re.cogs)}),i.jsx(Tu,{label:"Monto Venta",value:Yr(re.revenue)}),i.jsx(Tu,{label:"Utilidad bruta",value:Yr(re.profit),valueClass:re.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},re.productName)})})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(re=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:re.date}),i.jsx("td",{className:"border p-1",children:re.category}),i.jsx("td",{className:"border p-1",children:re.description}),i.jsx("td",{className:"border p-1",children:Yr(re.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${re.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:re.status})})]},re.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:ae,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),i.jsx("div",{className:"text-gray-500",children:pe?"Cerrar":"Abrir"})]}),pe&&i.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(re=>{const oe=!!k[re.id],Ve=re.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>At(re.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:re.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${Ve}`,children:re.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[re.date,"  ",i.jsx("b",{children:Yr(re.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:oe?"Cerrar":"Ver"})]}),oe&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(Tu,{label:"Fecha",value:re.date}),i.jsx(Tu,{label:"Categora",value:re.category}),i.jsx(Tu,{label:"Descripcin",value:re.description||""}),i.jsx(Tu,{label:"Monto",value:Yr(re.amount)}),i.jsx(Tu,{label:"Estado",value:re.status||""})]})})]},re.id)})})]})]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:m.name}),i.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"})]})}),i.jsx("tbody",{children:m.products.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(re=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-1",children:re.productName}),i.jsx("td",{className:"border p-1 text-center",children:ga(re.qty)}),i.jsx("td",{className:"border p-1 text-center",children:Yr(re.amount)}),i.jsx("td",{className:"border p-1 text-center",children:m.lastSaleDate||""})]},`${re.productName}-${re.measurement}`))})]})})]})})]})}function vs({title:t,value:e,positive:r,negative:n,valueClass:a,subtitle:s}){const o=a||(r?"text-[#568203]":n?"text-[#AB274F]":"");return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),s?i.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:s}):null,i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${o}`,children:e})]})}function bl({title:t,value:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function QV({title:t,items:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?i.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Tu({label:t,value:e,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:t}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const BC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],rx=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function tPe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[o,l]=v.useState(Cr(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,f]=v.useState(""),[A,h]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,j]=v.useState(!0),[I,_]=v.useState(""),[S,E]=v.useState(null),[F,P]=v.useState(""),[k,D]=v.useState(""),[Z,fe]=v.useState(""),[me,pe]=v.useState(0),[ye,ae]=v.useState("PENDIENTE"),[je,Be]=v.useState(""),[O,G]=v.useState(!1),z=()=>G(ce=>!ce),[L,Y]=v.useState(null),J=ce=>Y(we=>we===ce?null:ce);v.useEffect(()=>{(async()=>{j(!0),_("");try{const ce=rr(Ct(Te,"expenses"),gn("date","desc")),we=await Lt(ce),Re=[];we.forEach(We=>{const pt=We.data();Re.push({id:We.id,date:pt.date||Cr(new Date,"yyyy-MM-dd"),category:pt.category||"",description:pt.description||"",amount:Number(pt.amount||0),status:pt.status||"PENDIENTE",notes:pt.notes||"",createdAt:pt.createdAt??ur.now()})}),b(Re)}catch(ce){console.error(ce),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const R=v.useMemo(()=>y.filter(ce=>!(r&&ce.date<r||a&&ce.date>a)),[y,r,a]),H=v.useMemo(()=>{const ce=R.reduce((We,pt)=>We+(pt.amount||0),0),we=R.filter(We=>We.status==="PAGADO").reduce((We,pt)=>We+(pt.amount||0),0),Re=ce-we;return{total:ce,pagado:we,pendiente:Re}},[R]),ne=()=>{l(Cr(new Date,"yyyy-MM-dd")),u(""),f(""),h(0),p("PENDIENTE"),x("")},ge=async ce=>{if(ce.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!A||A<=0)return _("Ingresa un monto vlido.");try{const we={date:o,category:c,description:d.trim(),amount:Number(Number(A||0).toFixed(2)),status:m,notes:g||"",createdAt:ur.now()},Re=await Tn(Ct(Te,"expenses"),we);b(We=>[{id:Re.id,...we},...We]),ne(),_(" Gasto registrado")}catch(we){console.error(we),_(" Error al guardar gasto")}},U=ce=>{_(""),E(ce.id),P(ce.date),D(ce.category||""),fe(ce.description||""),pe(Number(ce.amount||0)),ae(ce.status||"PENDIENTE"),Be(ce.notes||"")},Ue=()=>{E(null),P(""),D(""),fe(""),pe(0),ae("PENDIENTE"),Be("")},ie=async()=>{if(S){if(!k)return _("Selecciona una categora.");if(!Z.trim())return _("Ingresa una descripcin.");if(!me||me<=0)return _("Ingresa un monto vlido.");try{const ce={date:F,category:k,description:Z.trim(),amount:Number(Number(me||0).toFixed(2)),status:ye,notes:je||""};await xn(Wt(Te,"expenses",S),ce),b(we=>we.map(Re=>Re.id===S?{...Re,...ce}:Re)),Ue(),_(" Gasto actualizado")}catch(ce){console.error(ce),_(" Error al actualizar gasto")}}},te=async ce=>{if(confirm(`Eliminar el gasto "${ce.description}"?`))try{await Bn(Wt(Te,"expenses",ce.id)),b(Re=>Re.filter(We=>We.id!==ce.id)),_(" Gasto borrado")}catch(Re){console.error(Re),_(" Error al borrar gasto")}},Ee=ce=>ce==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(dc,{onClick:e,loading:w})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ce=>n(ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ce=>s(ce.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",rx(H.total)]}),i.jsxs("div",{children:["Pagado: ",rx(H.pagado)]}),i.jsxs("div",{children:["Pendiente: ",rx(H.pendiente)]})]})]}),i.jsxs("div",{className:"md:hidden mb-4",children:[i.jsxs("button",{type:"button",onClick:z,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Crear gasto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",o,"  Monto: ",A===0?"":rx(A)]})]}),i.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&i.jsxs("form",{onSubmit:ge,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ce=>l(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ce=>u(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ce=>f(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ce=>{const we=String(ce.target.value||"").replace(",","."),Re=parseFloat(we);h(Number.isFinite(Re)?Math.max(0,Re):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ce=>p(ce.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:ce=>x(ce.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})]}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("form",{onSubmit:ge,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ce=>l(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ce=>u(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ce=>f(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ce=>{const we=String(ce.target.value||"").replace(",","."),Re=parseFloat(we);h(Number.isFinite(Re)?Math.max(0,Re):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ce=>p(ce.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:ce=>x(ce.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:w?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):R.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):R.map(ce=>{const we=L===ce.id,Re=S===ce.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>J(ce.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ce.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ce.category||"","  ",ce.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:rx(ce.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ee(ce.status)}`,children:ce.status})]})]}),we&&i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:ce.notes?ce.notes:""}),Re?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:F,onChange:We=>P(We.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:We=>D(We.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(We=>i.jsx("option",{value:We,children:We},We))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:Z,onChange:We=>fe(We.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(me)?"":me,onChange:We=>{const pt=String(We.target.value||"").replace(",","."),_t=parseFloat(pt);pe(Number.isFinite(_t)?Math.max(0,_t):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ye,onChange:We=>ae(We.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:je,onChange:We=>Be(We.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ue,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>U(ce),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>te(ce),children:"Borrar"})]})]})]},ce.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:w?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):R.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):R.map(ce=>{const we=S===ce.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:F,onChange:Re=>P(Re.target.value)}):ce.date}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:Re=>D(Re.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),BC.map(Re=>i.jsx("option",{value:Re,children:Re},Re))]}):ce.category||""}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{className:"w-full border p-1 rounded",value:Z,onChange:Re=>fe(Re.target.value)}):i.jsx("span",{title:ce.description,children:ce.description.length>45?ce.description.slice(0,45)+"":ce.description})}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(me)?"":me,onChange:Re=>{const We=String(Re.target.value||"").replace(",","."),pt=parseFloat(We);pe(Number.isFinite(pt)?Math.max(0,pt):0)}}):rx(ce.amount)}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:ye,onChange:Re=>ae(Re.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ee(ce.status)}`,children:ce.status})}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:je,onChange:Re=>Be(Re.target.value),maxLength:500}):i.jsx("span",{title:ce.notes||"",children:(ce.notes||"").length>45?(ce.notes||"").slice(0,45)+"":ce.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:we?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ue,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>U(ce),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>te(ce),children:"Borrar"})]})})})]},ce.id)})})]})}),I&&i.jsx("p",{className:"mt-2 text-sm",children:I})]})}function SS(t){return(t||"").trim().toLowerCase()}async function kre(){const t=await Lt(Ct(Te,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=SS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function rPe(t=!1){const e=await kre(),r=await Lt(Ct(Te,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=SS(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await xn(Wt(Te,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function nPe(t,e=!1){const r=SS(t),a=(await kre()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Lt(Ct(Te,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();SS(c.productName)===r&&c.productId!==a&&(e||await xn(Wt(Te,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${o} lote(s)`),o}function aPe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await rPe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,o]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await nPe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const Wc=t=>`C$${Number(t||0).toFixed(2)}`,nx=t=>Number(t||0).toFixed(3),sPe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),f5=()=>{const t=new Date;return Cr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},TC=()=>Cr(new Date,"yyyy-MM-dd");function iPe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(f5()),[o,l]=v.useState(TC()),[c,u]=v.useState(""),d=v.useMemo(()=>{const be=new Map;return n.forEach(ue=>be.set(ue.productId,{id:ue.productId,name:ue.productName})),Array.from(be.values()).sort((ue,Le)=>ue.name.localeCompare(Le.name))},[n]),f=v.useMemo(()=>n.filter(be=>!(a&&be.date<a||o&&be.date>o||c&&be.productId!==c)),[n,a,o,c]),[A,h]=v.useState(TC()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(be=>{const ue=be.filter(Le=>f.some(ke=>ke.id===Le));return ue.length===0&&f.length>0?f.map(Le=>Le.id):ue})},[f]);const[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState(!1),[F,P]=v.useState(f5()),[k,D]=v.useState(TC());v.useEffect(()=>{(async()=>{try{E(!0);const be=rr(Ct(Te,"expenses"),gn("date","desc")),ue=await Lt(be),Le=[];ue.forEach(ke=>{const Ae=ke.data();Le.push({id:ke.id,date:Ae.date,description:Ae.description,amount:Number(Ae.amount||0)})}),j(Le)}catch(be){console.error(be)}finally{E(!1)}})()},[]);const Z=v.useMemo(()=>w.filter(be=>!(!be.date||F&&be.date<F||k&&be.date>k)),[w,F,k]),[fe,me]=v.useState([]),[pe,ye]=v.useState(!1),[ae,je]=v.useState(""),[Be,O]=v.useState("DEBITO"),[G,z]=v.useState(""),L=()=>{const be=Number(G);!ae.trim()||!isFinite(be)||be<=0||(me(ue=>[...ue,{id:`${Date.now()}_${ue.length+1}`,description:ae.trim(),type:Be,amount:Number(be.toFixed(2))}]),je(""),z(""))},[Y,J]=v.useState(null),[R,H]=v.useState(""),[ne,ge]=v.useState("DEBITO"),[U,Ue]=v.useState(""),ie=be=>{J(be.id),H(be.description),ge(be.type),Ue(be.amount.toFixed(2))},te=()=>{J(null),H(""),ge("DEBITO"),Ue("")},Ee=()=>{if(!Y)return;const be=Number(U);!isFinite(be)||be<=0||(me(ue=>ue.map(Le=>Le.id===Y?{...Le,description:R.trim(),type:ne,amount:Number(be.toFixed(2))}:Le)),te())},ce=be=>{me(ue=>ue.filter(Le=>Le.id!==be)),Y===be&&te()},we=(be,ue)=>{b(Le=>ue?[...new Set([...Le,be])]:Le.filter(ke=>ke!==be))},Re=be=>{b(be?f.map(ue=>ue.id):[])},We=(be,ue)=>{_(Le=>ue?[...new Set([...Le,be])]:Le.filter(ke=>ke!==be))},pt=v.useMemo(()=>f.filter(be=>y.includes(be.id)),[f,y]),_t=v.useMemo(()=>fe.filter(be=>be.type==="DEBITO").reduce((be,ue)=>be+ue.amount,0),[fe]),He=v.useMemo(()=>fe.filter(be=>be.type==="CREDITO").reduce((be,ue)=>be+ue.amount,0),[fe]),gt=v.useMemo(()=>{let be=0,ue=0,Le=0,ke=0;for(const yt of pt){sPe(yt.unit)?be+=Number(yt.quantity||0):ue+=Number(yt.quantity||0);const At=yt.expectedTotal??Number((Number(yt.quantity||0)*Number(yt.salePrice||0)).toFixed(2)),he=yt.invoiceTotal!==void 0&&yt.invoiceTotal!==null?Number(yt.invoiceTotal):Number((Number(yt.quantity||0)*Number(yt.purchasePrice||0)).toFixed(2));Le+=Number(At||0),ke+=Number(he||0)}const Ae=Z.filter(yt=>I.includes(yt.id)).reduce((yt,At)=>yt+Number(At.amount||0),0),Ye=Le-Ae-_t+He;return{totalLbs:be,totalUnits:ue,totalExpected:Number(Le.toFixed(2)),totalInvoiced:Number(ke.toFixed(2)),totalGastos:Number(Ae.toFixed(2)),debits:Number(_t.toFixed(2)),credits:Number(He.toFixed(2)),finalAmount:Number(Ye.toFixed(2)),grossProfit:Number((Le-ke).toFixed(2))}},[pt,Z,I,_t,He]),[ut,vt]=v.useState(!1),[Pe,ct]=v.useState(""),lt=async()=>{if(ct(""),pt.length===0){ct("Selecciona al menos 1 lote pagado.");return}try{vt(!0);const be={number:m.trim(),date:A,description:g.trim(),status:"PENDIENTE",createdAt:ur.now(),totalLbs:Number(nx(gt.totalLbs)),totalUnits:Number(nx(gt.totalUnits)),totalAmount:gt.totalExpected,invoiceTotal:gt.totalInvoiced,totalExpenses:gt.totalGastos,totalDebits:gt.debits,totalCredits:gt.credits,finalAmount:gt.finalAmount,batches:pt.map(ue=>{var Le;return{id:ue.id,productId:ue.productId,productName:ue.productName,unit:ue.unit,quantity:Number(nx(ue.quantity)),salePrice:Number(Number(ue.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ue.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ue.quantity||0)*Number(ue.salePrice||0)).toFixed(2)),invoiceTotal:ue.invoiceTotal!==void 0&&ue.invoiceTotal!==null?Number(ue.invoiceTotal):Number((Number(ue.quantity||0)*Number(ue.purchasePrice||0)).toFixed(2)),batchDate:ue.date,paidAt:(Le=ue.paidAt)!=null&&Le.toDate?Cr(ue.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:Z.filter(ue=>I.includes(ue.id)).map(ue=>({id:ue.id,date:ue.date||null,description:ue.description||"",amount:Number(Number(ue.amount||0).toFixed(2))})),adjustments:fe.map(ue=>({id:ue.id,description:ue.description,type:ue.type,amount:Number(ue.amount.toFixed(2))}))};await Tn(Ct(Te,"invoices"),be),ct(" Factura creada."),r()}catch(be){console.error(be),ct(` Error al crear factura: ${(be==null?void 0:be.message)||"desconocido"}`)}finally{vt(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:A,onChange:be=>h(be.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:be=>p(be.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:be=>x(be.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:be=>s(be.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:be=>l(be.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:be=>u(be.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(be=>i.jsx("option",{value:be.id,children:be.name},be.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(f5()),l(TC()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:be=>Re(be.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:f.map(be=>{var Ye;const ue=y.includes(be.id),Le=be.expectedTotal??Number((Number(be.quantity||0)*Number(be.salePrice||0)).toFixed(2)),ke=be.invoiceTotal!==void 0&&be.invoiceTotal!==null?Number(be.invoiceTotal):Number((Number(be.quantity||0)*Number(be.purchasePrice||0)).toFixed(2)),Ae=Le-ke;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ue,onChange:yt=>we(be.id,yt.target.checked)})}),i.jsx("td",{className:"p-2 border",children:be.date}),i.jsx("td",{className:"p-2 border",children:be.productName}),i.jsx("td",{className:"p-2 border",children:(be.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:nx(be.quantity)}),i.jsx("td",{className:"p-2 border",children:Wc(be.salePrice)}),i.jsx("td",{className:"p-2 border",children:Wc(ke)}),i.jsx("td",{className:"p-2 border",children:Wc(Le)}),i.jsx("td",{className:"p-2 border",children:Wc(Ae)}),i.jsx("td",{className:"p-2 border",children:(Ye=be.paidAt)!=null&&Ye.toDate?Cr(be.paidAt.toDate(),"yyyy-MM-dd"):""})]},be.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:F,onChange:be=>P(be.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k,onChange:be=>D(be.target.value)})]})]})]}),Z.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:Z.map(be=>{const ue=I.includes(be.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ue,onChange:Le=>We(be.id,Le.target.checked)})}),i.jsx("td",{className:"p-2 border",children:be.date||""}),i.jsx("td",{className:"p-2 border",children:be.description||""}),i.jsx("td",{className:"p-2 border",children:Wc(Number(be.amount||0))})]},be.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ye(!0),children:"Crear Cargo"})]}),fe.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:fe.map(be=>{const ue=Y===be.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:R,onChange:Le=>H(Le.target.value)}):i.jsx("span",{title:be.description,children:be.description.length>60?`${be.description.slice(0,60)}`:be.description})}),i.jsx("td",{className:"p-2 border",children:ue?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ne,onChange:Le=>ge(Le.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${be.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:be.type})}),i.jsx("td",{className:"p-2 border",children:ue?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:U,onChange:Le=>Ue(Le.target.value)}):Wc(be.amount)}),i.jsx("td",{className:"p-2 border",children:ue?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Ee,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:te,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ce(be.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(be),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ce(be.id),children:"Eliminar"})]})})]},be.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:nx(gt.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:nx(gt.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:Wc(gt.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:Wc(gt.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:Wc(gt.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Wc(gt.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Wc(gt.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Wc(gt.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:Wc(gt.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:ut,onClick:lt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:ut?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Pe&&i.jsx("span",{className:"text-sm ml-2",children:Pe})]}),ut&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),pe&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ye(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ae,onChange:be=>je(be.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Be,onChange:be=>O(be.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:G,onChange:be=>z(be.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:L,children:"Agregar"})})]})]})})]})}const ku=t=>`C$ ${Number(t||0).toFixed(2)}`,pc=t=>Number(t||0).toFixed(3),oPe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function lPe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState(Cr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=v.useState(Cr(new Date,"yyyy-MM-dd")),[A,h]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=fc(),[y,b]=v.useState(!1),w=()=>b(D=>!D),[j,I]=v.useState(null),_=D=>I(Z=>Z===D?null:D);v.useEffect(()=>{(async()=>{n(!0);const D=rr(Ct(Te,"inventory_batches"),or("status","==","PAGADO"),gn("date","desc")),Z=await Lt(D),fe=[];Z.forEach(me=>{const pe=me.data(),ye=Number(pe.quantity||0),ae=Number(pe.remaining||0),je=Number(pe.purchasePrice||0),Be=Number(pe.salePrice||0),O=Number((ye*je).toFixed(2)),G=Number((ye*Be).toFixed(2));fe.push({id:me.id,productId:pe.productId,productName:pe.productName,category:pe.category,unit:pe.unit,quantity:ye,remaining:ae,purchasePrice:je,salePrice:Be,invoiceTotal:pe.invoiceTotal!=null?Number(pe.invoiceTotal):O,expectedTotal:pe.expectedTotal!=null?Number(pe.expectedTotal):G,date:pe.date,status:pe.status,paidAt:pe.paidAt})}),e(fe),n(!1)})()},[g]);const S=v.useMemo(()=>t.filter(D=>!(c&&D.date<c||d&&D.date>d||A&&D.productId!==A)),[t,c,d,A]),E=v.useMemo(()=>{let D=0,Z=0,fe=0,me=0,pe=0,ye=0;for(const ae of S)oPe(ae.unit)?(D+=ae.quantity,Z+=ae.remaining):(fe+=ae.quantity,me+=ae.remaining),pe+=Number(ae.expectedTotal||0),ye+=Number(ae.invoiceTotal||0);return{lbsIng:D,lbsRem:Z,udsIng:fe,udsRem:me,totalEsperado:pe,totalFact:ye,gross:pe-ye}},[S]),F=D=>{l(D),s(!0)},P=async()=>{if(o)try{const D=Wt(Te,"inventory_batches",o.id);await xn(D,{status:"PENDIENTE",remaining:o.quantity});const Z=Ct(Te,"salesV2"),fe=await Lt(rr(Z,or("batchId","==",o.id))),me=await Lt(rr(Z,or("productName","==",o.productName),or("date","==",o.date))),pe=[...fe.docs,...me.docs];for(const ye of pe)await Bn(Wt(Te,"salesV2",ye.id));s(!1),l(null),x()}catch(D){console.error("Error al marcar pendiente:",D)}},k=v.useMemo(()=>{const D=new Map;return t.forEach(Z=>D.set(Z.productId,{id:Z.productId,name:Z.productName})),Array.from(D.values()).sort((Z,fe)=>Z.name.localeCompare(fe.name))},[t]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(dc,{onClick:x,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:D=>h(D.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),k.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Totales"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",i.jsx("b",{children:pc(E.lbsIng)}),"  Restantes:"," ",i.jsx("b",{children:pc(E.lbsRem)})]})]}),i.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&i.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",pc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",pc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ku(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",pc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",pc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ku(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ku(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",pc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",pc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ku(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",pc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",pc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ku(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ku(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):S.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):S.map(D=>{var fe;const Z=j===D.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>_(D.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:D.productName}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(D.category||"").toUpperCase(),"  ",D.date," "," ",(D.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:ku(D.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:Z?"Detalles":"Esperado"})]})]}),Z&&i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:pc(D.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:pc(D.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:ku(D.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(fe=D.paidAt)!=null&&fe.toDate?Cr(D.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]})]},D.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):S.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):S.map(D=>{var Z;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:(D.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:D.productName}),i.jsx("td",{className:"p-2 border",children:(D.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:pc(D.quantity)}),i.jsx("td",{className:"p-2 border",children:pc(D.remaining)}),i.jsx("td",{className:"p-2 border",children:ku(D.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:ku(D.salePrice)}),i.jsx("td",{className:"p-2 border",children:ku(D.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:ku(D.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(Z=D.paidAt)!=null&&Z.toDate?Cr(D.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]},D.id)})})]})}),m&&i.jsx(iPe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const xo=t=>`C$ ${(Number(t)||0).toFixed(2)}`,cPe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function kC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function uPe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function dPe(t){const e="ROP",r=kC(t.subcat).slice(0,3)||"GEN",n=uPe(t.gender),a=kC(t.color).slice(0,3)||"COL",s=kC(t.size)||"TLL",o=kC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${o}-${l}`}const cy=/^[A-Za-z0-9._-]{0,32}$/;function fPe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(Cr(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(0),[F,P]=v.useState(0),[k,D]=v.useState(""),[Z,fe]=v.useState(""),[me,pe]=v.useState(""),[ye,ae]=v.useState(""),[je,Be]=v.useState(""),[O,G]=v.useState(""),[z,L]=v.useState(""),[Y,J]=v.useState(!1),[R,H]=v.useState(""),[ne,ge]=v.useState("Camisa"),[U,Ue]=v.useState(null),[ie,te]=v.useState(""),[Ee,ce]=v.useState(0),[we,Re]=v.useState(0),[We,pt]=v.useState(0),[_t,He]=v.useState(0),[gt,ut]=v.useState(0),[vt,Pe]=v.useState(""),[ct,lt]=v.useState(""),[be,ue]=v.useState(""),[Le,ke]=v.useState(""),[Ae,Ye]=v.useState(""),[yt,At]=v.useState(""),[he,re]=v.useState(""),[oe,Ve]=v.useState(null),[de,Se]=v.useState({x:0,y:0}),[dt,xt]=v.useState(!1);v.useEffect(()=>{const M=()=>Ve(null),V=q=>q.key==="Escape"&&Ve(null);return document.addEventListener("click",M),document.addEventListener("keydown",V),()=>{document.removeEventListener("click",M),document.removeEventListener("keydown",V)}},[]);const ht=(M,V,q=192,ee=160)=>{let Oe=M;M+q+8>window.innerWidth&&(Oe=M-q),Oe=Math.max(8,Math.min(Oe,window.innerWidth-q-8));let Ke=V;return V+ee+8>window.innerHeight&&(Ke=window.innerHeight-ee-8),Ke=Math.max(8,Math.min(Ke,window.innerHeight-ee-8)),{x:Oe,y:Ke}},bt=(M,V)=>{M.stopPropagation();const q=M.currentTarget.getBoundingClientRect(),ee=q.right,se=q.bottom,Oe=ht(ee,se);Se(Oe),Ve(Ke=>Ke===V?null:V)};v.useEffect(()=>{const M=()=>Ve(null),V=q=>{q.key==="Escape"&&Ve(null)};return document.addEventListener("click",M),document.addEventListener("keydown",V),()=>{document.removeEventListener("click",M),document.removeEventListener("keydown",V)}},[]),v.useEffect(()=>{if(!oe)return;const M=()=>Ve(null);return window.addEventListener("scroll",M,!0),window.addEventListener("resize",M),()=>{window.removeEventListener("scroll",M,!0),window.removeEventListener("resize",M)}},[oe]),v.useEffect(()=>{(async()=>{const M=await Lt(Ct(Te,"products_clothes")),V=[];M.forEach(Oe=>{const Ke=Oe.data();V.push({id:Oe.id,name:Ke.name??"(sin nombre)",category:Ke.category??"(sin categora)",measurement:Ke.measurement??"unidad",price:Number(Ke.price??0),sku:Ke.sku||"",size:Ke.size||"",color:Ke.color||"",gender:Ke.gender||"",brand:Ke.brand||""})}),e(V);const q=rr(Ct(Te,"inventory_clothes_batches"),gn("date","desc")),ee=await Lt(q),se=[];ee.forEach(Oe=>{const Ke=Oe.data();se.push({id:Oe.id,productId:Ke.productId,productName:Ke.productName,category:Ke.category,unit:Ke.unit,quantity:Number(Ke.quantity||0),remaining:Number(Ke.remaining??Ke.quantity??0),purchasePrice:Number(Ke.purchasePrice||0),salePrice:Number(Ke.salePrice||0),invoiceTotal:Number(Ke.invoiceTotal??Number(Ke.quantity||0)*Number(Ke.purchasePrice||0)),expectedTotal:Number(Ke.expectedTotal??Number(Ke.quantity||0)*Number(Ke.salePrice||0)),date:Ke.date,createdAt:Ke.createdAt,status:Ke.status,notes:Ke.notes||"",sku:Ke.sku||"",size:Ke.size||"",color:Ke.color||"",gender:Ke.gender||"",brand:Ke.brand||"",clientCode:Ke.clientCode||""})}),n(se),s(!1)})()},[]),v.useEffect(()=>{const M=t.find(V=>V.id===m);M&&(_(Number(M.price||0)),M.sku&&fe(M.sku),M.size&&pe(V=>V||M.size),M.color&&ae(V=>V||M.color),M.gender&&Be(V=>V||M.gender),M.brand&&G(V=>V||M.brand))},[m,t]),v.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{P(Math.floor(y*I*100)/100)},[y,I]),v.useEffect(()=>{const M=t.find(ee=>ee.id===m);if(M!=null&&M.sku){fe(M.sku);return}const V=Y&&ne?ne:(M==null?void 0:M.category)||"";if(!V&&!je&&!ye&&!me&&!O){fe("");return}const q=dPe({subcat:V,gender:je||"",color:ye||"",size:me||"",brand:O||""});fe(q)},[Y,ne,m,je,ye,me,O,t]);const et=v.useMemo(()=>r.filter(M=>!(c&&M.date<c||d&&M.date>d||A&&M.productId!==A)),[r,c,d,A]),Ne=v.useMemo(()=>{const M=et.reduce((se,Oe)=>se+(Oe.invoiceTotal||0),0),V=et.reduce((se,Oe)=>se+(Oe.expectedTotal||0),0),q=et.reduce((se,Oe)=>se+Oe.quantity,0),ee=et.reduce((se,Oe)=>se+Oe.remaining,0);return{udsIng:q,udsRem:ee,totalFacturado:M,totalEsperado:V}},[et]),mt=async M=>{M.preventDefault(),l("");const V=!!m&&!Y,q=t.find(Ke=>Ke.id===m),ee=V?(q==null?void 0:q.name)||"":R||"",se=V?(q==null?void 0:q.category)||"":ne||"General",Oe=V&&(q==null?void 0:q.measurement)||"unidad";if(!ee||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(z&&!cy.test(z)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const Ke=await Tn(Ct(Te,"inventory_clothes_batches"),{productId:V?q.id:"",productName:ee,category:se,unit:Oe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:g,createdAt:ur.now(),status:"PENDIENTE",notes:k||"",sku:Z||"",size:me||"",color:ye||"",gender:je||"",brand:O||"",clientCode:z||""});n(ot=>[{id:Ke.id,productId:V?q.id:"",productName:ee,category:se,unit:Oe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:g,createdAt:ur.now(),status:"PENDIENTE",notes:k||"",sku:Z||"",size:me||"",color:ye||"",gender:je||"",brand:O||"",clientCode:z||""},...ot]),l(" Lote de ropa creado"),p(""),x(Cr(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),E(0),P(0),D(""),fe(""),pe(""),ae(""),Be(""),G(""),L(""),J(!1),H(""),ge("Camisa")}catch(Ke){console.error(Ke),l(" Error al crear lote")}},W=async M=>{confirm(`Marcar PAGADO el lote del ${M.date} (${M.productName})?`)&&(await xn(Wt(Te,"inventory_clothes_batches",M.id),{status:"PAGADO"}),n(q=>q.map(ee=>ee.id===M.id?{...ee,status:"PAGADO"}:ee)))},Ie=M=>{Ue(M.id),te(M.date),ce(M.quantity),Re(M.purchasePrice),pt(M.salePrice),He(Number((M.quantity*M.purchasePrice).toFixed(2))),ut(Number((M.quantity*M.salePrice).toFixed(2))),Pe(M.notes||""),lt(M.sku||""),ue(M.size||""),ke(M.color||""),Ye(M.gender||""),At(M.brand||""),re(M.clientCode||"")},Je=()=>{Ue(null),te(""),ce(0),Re(0),pt(0),He(0),ut(0),Pe(""),lt(""),ue(""),ke(""),Ye(""),At(""),re("")};v.useEffect(()=>{U&&He(Math.floor(Ee*we*100)/100)},[U,Ee,we]),v.useEffect(()=>{U&&ut(Math.floor(Ee*We*100)/100)},[U,Ee,We]);const tt=async()=>{if(!U)return;const M=r.find(se=>se.id===U);if(!M)return;const V=Math.max(0,M.quantity-M.remaining),q=Math.max(0,Ee-V);if(he&&!cy.test(he)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const ee=Wt(Te,"inventory_clothes_batches",U);await xn(ee,{date:ie,quantity:Ee,purchasePrice:we,salePrice:We,invoiceTotal:_t,expectedTotal:gt,notes:vt,remaining:q,sku:ct,size:be,color:Le,gender:Ae||"",brand:yt||"",clientCode:he||""}),n(se=>se.map(Oe=>Oe.id===U?{...Oe,date:ie,quantity:Ee,purchasePrice:we,salePrice:We,invoiceTotal:_t,expectedTotal:gt,notes:vt,remaining:q,sku:ct,size:be,color:Le,gender:Ae||"",brand:yt||"",clientCode:he||""}:Oe)),Je(),l(" Lote actualizado")},ft=async M=>{confirm(`Eliminar el lote del ${M.date} (${M.productName})?`)&&(await Bn(Wt(Te,"inventory_clothes_batches",M.id)),n(q=>q.filter(ee=>ee.id!==M.id)),l(" Lote eliminado"))},T=()=>{const M=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),V=Oe=>(Oe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q=et.map(Oe=>`
      <tr>
        <td>${Oe.date}</td>
        <td>${(Oe.category||"").toUpperCase()}</td>
        <td>${V(Oe.productName)}</td>
        <td>${V(Oe.sku||"")}</td>
        <td>${V(Oe.size||"")}</td>
        <td>${V(Oe.color||"")}</td>
        <td>${V(Oe.clientCode||"")}</td>
        <td>${V(Oe.gender||"")}</td>
        <td>${(Oe.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Oe.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Oe.remaining.toFixed(0)}</td>
        <td style="text-align:right">${xo(Oe.purchasePrice)}</td>
        <td style="text-align:right">${xo(Oe.salePrice)}</td>
        <td style="text-align:right">${xo(Oe.invoiceTotal||0)}</td>
        <td style="text-align:right">${xo(Oe.expectedTotal||0)}</td>
        <td>${V((Oe.notes||"").slice(0,120))}</td>
        <td>${Oe.status}</td>
      </tr>`).join(""),ee=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${M}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Ne.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Ne.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${xo(Ne.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${xo(Ne.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${xo(Number((Ne.totalEsperado-Ne.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${q||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,se=window.open("","_blank");se&&(se.document.open(),se.document.write(ee),se.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>xt(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>f(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(M=>i.jsxs("option",{value:M.id,children:[M.name,"  ",M.category]},M.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:T,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ne.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ne.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",xo(Ne.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",xo(Ne.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",xo(Number((Ne.totalEsperado-Ne.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):et.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):et.map(M=>{const V=U===M.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:V?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:q=>te(q.target.value)}):M.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(M.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:M.productName,children:M.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:V?i.jsx("input",{className:"w-full border p-1 rounded",value:ct,onChange:q=>lt(q.target.value)}):i.jsx("span",{className:"block truncate",title:M.sku||"",children:M.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:V?i.jsx("input",{className:"w-full border p-1 rounded",value:be,onChange:q=>ue(q.target.value)}):M.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:V?i.jsx("input",{className:"w-full border p-1 rounded",value:Le,onChange:q=>ke(q.target.value)}):M.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:V?i.jsx("input",{className:"w-full border p-1 rounded",value:he,onChange:q=>{const ee=q.target.value;cy.test(ee)&&re(ee)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:M.clientCode||"",children:M.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:V?i.jsx("select",{className:"w-full border p-1 rounded",value:Ae,onChange:q=>Ye(q.target.value),children:cPe.map(q=>i.jsx("option",{value:q,children:q||""},q))}):M.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(M.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:V?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Ee)?"":Ee,onChange:q=>ce(Math.max(0,parseInt(q.target.value||"0",10)))}):M.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:V?M.remaining:M.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:V?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(we)?"":we,onChange:q=>Re(Math.max(0,parseFloat(q.target.value||"0")))}):xo(M.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:V?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(We)?"":We,onChange:q=>pt(Math.max(0,parseFloat(q.target.value||"0")))}):xo(M.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:xo(V?_t:M.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:xo(V?gt:M.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:V?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:vt,onChange:q=>Pe(q.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:M.notes||"",children:M.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:V?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:tt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Je,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:q=>bt(q,M.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},M.id)})})]})})}),oe&&du.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>Ve(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:de.x,top:de.y},onClick:M=>M.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const M=et.find(V=>V.id===oe);return(M==null?void 0:M.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Ve(null),W(M)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const M=et.find(V=>V.id===oe);M&&(Ve(null),Ie(M))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const M=et.find(V=>V.id===oe);M&&(Ve(null),ft(M))},children:" Borrar"})]})})]}),document.body),dt&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>xt(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xt(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:mt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:M=>p(M.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(M=>i.jsxs("option",{value:M.id,children:[M.name,"  ",M.category,"  ",M.sku?`SKU: ${M.sku}`:""]},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:M=>x(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:M=>b(Math.max(0,parseInt(M.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:M=>j(Math.max(0,parseFloat(M.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:M=>_(Math.max(0,parseFloat(M.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Z,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0,onChange:M=>pe(M.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ye,readOnly:!0,onChange:M=>ae(M.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:je,readOnly:!0,onChange:M=>Be(M.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:O,onChange:M=>G(M.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:z,onChange:M=>{const V=M.target.value;cy.test(V)&&L(V)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!cy.test(z)&&z.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:k,onChange:M=>D(M.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[k.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:xo(S),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:xo(F),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xt(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const hPe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],APe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],mPe=["XS","S","M","L","XL","2XL"],pPe=["2","4","6","8","10","12","14"],gPe=["26","28","30","32","34","36","38"],xPe=["Shein","Usado","Otro"],vPe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function FC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function yPe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function bPe(t){const e="ROP",r=FC(t.subcat).slice(0,3)||"GEN",n=yPe(t.gender),a=FC(t.color).slice(0,3)||"COL",s=FC(t.size)||"TLL",o=FC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${o}`}const wPe=/^[A-Za-z0-9._-]{0,32}$/;function NPe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,f]=v.useState(""),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState(""),[S,E]=v.useState(""),F=v.useMemo(()=>{const L=Number(w||0),Y=Number(y||0);return Math.floor(L*Y*100)/100},[w,y]),[P,k]=v.useState([]),[D,Z]=v.useState(!0),[fe,me]=v.useState(""),{refreshKey:pe,refresh:ye}=fc(),[ae,je]=v.useState(!1),Be=v.useMemo(()=>r.toLowerCase()==="jean"?gPe:d==="NINO"||d==="NINA"?pPe:mPe,[r,d]);v.useEffect(()=>{p(bPe({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),v.useEffect(()=>{(async()=>{Z(!0);const L=rr(Ct(Te,"products_clothes"),gn("createdAt","desc")),Y=await Lt(L),J=[];Y.forEach(R=>{const H=R.data();J.push({id:R.id,name:H.name??"(sin nombre)",category:H.category??"",measurement:H.measurement??"unidad",sku:H.sku??"",size:H.size||"",color:H.color||"",brand:H.brand||"",gender:H.gender||"",clientCode:H.clientCode||"",notes:H.notes||"",createdAt:H.createdAt??ur.now()})}),k(J),Z(!1)})()},[pe]);const O=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),h(""),x(""),b(""),j("0"),_(""),E("")},G=async L=>{if(L.preventDefault(),me(""),!t.trim()){me("Ingresa el nombre del producto.");return}if(A&&!wPe.test(A)){me("Cdigo del cliente invlido");return}const Y=Number(w||0),J=Number(y||0);if(Y<0){me("La cantidad de piezas debe ser 0 o mayor.");return}if(J<0){me("El precio de venta no puede ser negativo.");return}try{const R=await Tn(Ct(Te,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:ur.now(),price:J||0});if(k(H=>[{id:R.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:g||"",createdAt:ur.now()},...H]),Y>0){const H=new Date().toISOString().slice(0,10),ne=I||H;await Tn(Ct(Te,"inventory_clothes_batches"),{productId:R.id,productName:t.trim(),category:r,unit:"unidad",quantity:Y,remaining:Y,purchasePrice:0,salePrice:J||0,invoiceTotal:0,expectedTotal:F||0,date:ne,createdAt:ur.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:A||""})}me(Y>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),O()}catch(R){console.error(R),me(" Error al crear producto")}},z=async L=>{confirm(`Eliminar el producto "${L.name}"?`)&&(await Bn(Wt(Te,"products_clothes",L.id)),k(J=>J.filter(R=>R.id!==L.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(dc,{onClick:ye,loading:D}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{je(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:L=>e(L.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:L=>n(L.target.value),children:hPe.map(L=>i.jsx("option",{value:L,children:L},L))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:L=>f(L.target.value),children:vPe.map(L=>i.jsx("option",{value:L,children:L||""},L))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:L=>s(L.target.value),children:[i.jsx("option",{value:"",children:""}),Be.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:L=>l(L.target.value),children:[i.jsx("option",{value:"",children:""}),APe.map(L=>i.jsx("option",{value:L,children:L},L))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:L=>u(L.target.value),children:xPe.map(L=>i.jsx("option",{value:L,children:L},L))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:L=>h(L.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:L=>b(L.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:L=>j(L.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:L=>_(L.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(F)?"":F.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>je(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:D?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):P.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):P.map(L=>{var Y;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Y=L.createdAt)!=null&&Y.toDate?L.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:L.category}),i.jsx("td",{className:"p-2 border",children:L.name}),i.jsx("td",{className:"p-2 border",children:L.sku}),i.jsx("td",{className:"p-2 border",children:L.size||""}),i.jsx("td",{className:"p-2 border",children:L.color||""}),i.jsx("td",{className:"p-2 border",children:L.brand||""}),i.jsx("td",{className:"p-2 border",children:L.gender||""}),i.jsx("td",{className:"p-2 border",children:L.clientCode||""}),i.jsx("td",{className:"p-2 border",children:L.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>z(L),children:"Borrar"})})]},L.id)})})]})}),fe&&i.jsx("p",{className:"mt-2 text-sm",children:fe})]})}async function CPe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",e)),u=(await Lt(o)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,A)=>{var x,y;const h=String(f.data.date||""),m=String(A.data.date||"");if(h!==m)return h<m?-1:1;const p=((x=f.data.createdAt)==null?void 0:x.seconds)??0,g=((y=A.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>Wt(Te,"inventory_clothes_batches",f.id)),d=[];return await Ri(Te,async f=>{const A=await Promise.all(u.map(m=>f.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],g=A[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,h),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),h-=w}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await Tn(Ct(Te,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:ur.now()})}),{allocations:d}}async function kk(t){const e=Wt(Te,"sales_clothes",t),r=await js(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Ri(Te,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Ri(Te,async c=>{const u=[];for(const f of a)for(const A of f.allocations||[])u.push({ref:Wt(Te,"inventory_clothes_batches",A.batchId),addBack:Math.max(0,Math.floor(Number(A.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const A=d[f];if(!A.exists())continue;const h=A.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Ri(Te,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",h.productId)),g=(await Lt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[h.productId]=g}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const g of h.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,h.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const f=Object.keys(d).map(h=>Wt(Te,"inventory_clothes_batches",h)),A=await Promise.all(f.map(h=>l.get(h)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[f[h].id]||0)));l.update(f[h],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const VV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Ah=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function OC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function HV(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}function _Pe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[o,l]=v.useState([]),c=async Ne=>{e(!0),n(!0),s(Ne),l([]);try{const W=(await Lt(rr(Ct(Te,"sales_clothes"),or("__name__","==",Ne)))).docs[0],Ie=W==null?void 0:W.data(),tt=(Array.isArray(Ie==null?void 0:Ie.items)?Ie.items:Ie!=null&&Ie.item?[Ie.item]:[]).map(ft=>({productName:String(ft.productName||""),qty:Number(ft.qty||0),unitPrice:Number(ft.unitPrice||0),discount:Number(ft.discount||0),total:Number(ft.total||0)}));l(tt)}catch(mt){console.error(mt)}finally{n(!1)}},[u,d]=v.useState(""),[f,A]=v.useState("+505 "),[h,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[j,I]=v.useState([]),[_,S]=v.useState(!0),[E,F]=v.useState(""),[P,k]=v.useState(null),[D,Z]=v.useState(""),[fe,me]=v.useState("+505 "),[pe,ye]=v.useState(""),[ae,je]=v.useState(""),[Be,O]=v.useState("ACTIVO"),[G,z]=v.useState(0),[L,Y]=v.useState(!1),[J,R]=v.useState(null),[H,ne]=v.useState(!1),[ge,U]=v.useState([]),[Ue,ie]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[te,Ee]=v.useState(!1),[ce,we]=v.useState(0),[Re,We]=v.useState(new Date().toISOString().slice(0,10)),[pt,_t]=v.useState(""),[He,gt]=v.useState(!1),[ut,vt]=v.useState(null),[Pe,ct]=v.useState(""),[lt,be]=v.useState(0),[ue,Le]=v.useState(""),[ke,Ae]=v.useState(!1);v.useEffect(()=>{(async()=>{const Ne=rr(Ct(Te,"customers_clothes"),gn("createdAt","desc")),mt=await Lt(Ne),W=[];mt.forEach(Ie=>{const Je=Ie.data();W.push({id:Ie.id,name:Je.name??"",phone:Je.phone??"+505 ",place:Je.place??"",notes:Je.notes??"",status:Je.status??"ACTIVO",creditLimit:Number(Je.creditLimit??0),createdAt:Je.createdAt??ur.now(),balance:0})});for(const Ie of W)try{const Je=rr(Ct(Te,"ar_movements"),or("customerId","==",Ie.id)),tt=await Lt(Je);let ft=0;tt.forEach(T=>ft+=Number(T.data().amount||0)),Ie.balance=ft}catch{Ie.balance=0}I(W),S(!1)})()},[]);const Ye=()=>{d(""),A("+505 "),m(""),g(""),y("ACTIVO"),w(0)},yt=async Ne=>{if(Ne.preventDefault(),F(""),!u.trim()){F("Ingresa el nombre.");return}const mt=OC(f);if(mt.length<6){F("Telfono incompleto.");return}try{const W=await Tn(Ct(Te,"customers_clothes"),{name:u.trim(),phone:mt,place:h||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:ur.now()});I(Ie=>[{id:W.id,name:u.trim(),phone:mt,place:h||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:ur.now(),balance:0},...Ie]),Ye(),Ae(!1),F(" Cliente creado")}catch(W){console.error(W),F(" Error al crear cliente")}},At=Ne=>{k(Ne.id),Z(Ne.name),me(Ne.phone||"+505 "),ye(Ne.place||""),je(Ne.notes||""),O(Ne.status||"ACTIVO"),z(Number(Ne.creditLimit||0))},he=()=>{k(null),Z(""),me("+505 "),ye(""),je(""),O("ACTIVO"),z(0)},re=async()=>{if(!P)return;const Ne=OC(fe);if(!D.trim()){F("Ingresa el nombre.");return}try{await xn(Wt(Te,"customers_clothes",P),{name:D.trim(),phone:Ne,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0)}),I(mt=>mt.map(W=>W.id===P?{...W,name:D.trim(),phone:Ne,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0)}:W)),he(),F(" Cliente actualizado")}catch(mt){console.error(mt),F(" Error al actualizar")}},oe=async Ne=>{if(confirm(`Eliminar al cliente "${Ne.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const W=rr(Ct(Te,"sales_clothes"),or("customerId","==",Ne.id)),Ie=await Lt(W);for(const ft of Ie.docs){const T=ft.id;try{await kk(T)}catch(M){console.warn("restoreSaleAndDeleteClothes error",M);try{await Bn(Wt(Te,"sales_clothes",T))}catch{}}await HV(T)}const Je=rr(Ct(Te,"ar_movements"),or("customerId","==",Ne.id)),tt=await Lt(Je);await Promise.all(tt.docs.map(ft=>Bn(Wt(Te,"ar_movements",ft.id)))),await Bn(Wt(Te,"customers_clothes",Ne.id)),I(ft=>ft.filter(T=>T.id!==Ne.id)),F(" Cliente eliminado y prendas devueltas al inventario")}catch(W){console.error(W),F(" No se pudo eliminar el cliente.")}finally{S(!1)}},Ve=async Ne=>{R(Ne),U([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),Y(!0),Ee(!1),we(0),We(new Date().toISOString().slice(0,10)),_t(""),vt(null),ne(!0);try{const mt=rr(Ct(Te,"ar_movements"),or("customerId","==",Ne.id)),W=await Lt(mt),Ie=[];W.forEach(Je=>{var ft,T;const tt=Je.data();Ie.push({id:Je.id,date:tt.date??((T=(ft=tt.createdAt)==null?void 0:ft.toDate)!=null&&T.call(ft)?tt.createdAt.toDate().toISOString().slice(0,10):""),type:tt.type??"CARGO",amount:Number(tt.amount||0),ref:tt.ref||{},comment:tt.comment||"",createdAt:tt.createdAt})}),Ie.sort((Je,tt)=>{var M,V;if(Je.date!==tt.date)return Je.date.localeCompare(tt.date);const ft=((M=Je.createdAt)==null?void 0:M.seconds)||0,T=((V=tt.createdAt)==null?void 0:V.seconds)||0;return ft-T}),U(Ie),de(Ie)}catch(mt){console.error(mt),F(" No se pudo cargar el estado de cuenta")}finally{ne(!1)}},de=Ne=>{const mt=Ne.reduce((Je,tt)=>Je+(Number(tt.amount)||0),0),W=Ne.filter(Je=>Number(Je.amount)<0).reduce((Je,tt)=>Je+Math.abs(Number(tt.amount)||0),0),Ie=Ne.filter(Je=>Number(Je.amount)>0).reduce((Je,tt)=>Je+Number(tt.amount)||0,0);ie({saldoActual:mt,totalAbonado:W,totalCargos:Ie})},Se=async()=>{if(!J)return;F("");const Ne=Number(ce||0);if(!(Ne>0)){F("Ingresa un monto de abono mayor a 0.");return}const mt=parseFloat(Ne.toFixed(2));if(!Re){F("Selecciona la fecha del abono.");return}try{gt(!0);const W={customerId:J.id,type:"ABONO",amount:-mt,date:Re,comment:pt||"",createdAt:ur.now()},Je={id:(await Tn(Ct(Te,"ar_movements"),W)).id,date:Re,type:"ABONO",amount:-mt,comment:pt||"",createdAt:ur.now()},tt=[...ge,Je].sort((ft,T)=>{var q,ee;if(ft.date!==T.date)return ft.date.localeCompare(T.date);const M=((q=ft.createdAt)==null?void 0:q.seconds)||0,V=((ee=T.createdAt)==null?void 0:ee.seconds)||0;return M-V});U(tt),de(tt),I(ft=>ft.map(T=>T.id===J.id?{...T,balance:(T.balance||0)-mt}:T)),R(ft=>ft&&{...ft,balance:(ft.balance||0)-mt}),we(0),_t(""),We(new Date().toISOString().slice(0,10)),Ee(!1),F(" Abono registrado")}catch(W){console.error(W),F(" Error al registrar el abono")}finally{gt(!1)}},dt=Ne=>{vt(Ne.id),ct(Ne.date||new Date().toISOString().slice(0,10)),be(Math.abs(Number(Ne.amount||0))),Le(Ne.comment||"")},xt=()=>{vt(null),ct(""),be(0),Le("")},ht=async()=>{if(!ut)return;const Ne=ge.findIndex(Je=>Je.id===ut);if(Ne===-1)return;const mt=ge[Ne],W=Number(lt||0);if(!(W>0)){F("El monto debe ser mayor a 0.");return}const Ie=mt.type==="ABONO"?-parseFloat(W.toFixed(2)):+parseFloat(W.toFixed(2));try{await xn(Wt(Te,"ar_movements",ut),{date:Pe,amount:Ie,comment:ue||""});const Je=[...ge];Je[Ne]={...mt,date:Pe,amount:Ie,comment:ue||""},Je.sort((ft,T)=>{var q,ee;if(ft.date!==T.date)return ft.date.localeCompare(T.date);const M=((q=ft.createdAt)==null?void 0:q.seconds)||0,V=((ee=T.createdAt)==null?void 0:ee.seconds)||0;return M-V}),U(Je),de(Je);const tt=Je.reduce((ft,T)=>ft+(Number(T.amount)||0),0);I(ft=>ft.map(T=>T.id===(J==null?void 0:J.id)?{...T,balance:tt}:T)),R(ft=>ft&&{...ft,balance:tt}),xt(),F(" Movimiento actualizado")}catch(Je){console.error(Je),F(" Error al actualizar movimiento")}},bt=async Ne=>{var W,Ie;if(confirm(`Eliminar este movimiento (${Ne.type==="ABONO"?"Abono":"Compra"}) del ${Ne.date}?${Ne.type==="CARGO"&&((W=Ne.ref)!=null&&W.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),Ne.type==="CARGO"&&((Ie=Ne.ref)!=null&&Ie.saleId)){try{await kk(Ne.ref.saleId)}catch(ft){console.warn("restoreSaleAndDeleteClothes error",ft),S(!1),F(" No se pudo devolver inventario de la venta.");return}await HV(Ne.ref.saleId)}else await Bn(Wt(Te,"ar_movements",Ne.id));const Je=ge.filter(ft=>{var T,M;return Ne.type==="CARGO"&&((T=Ne.ref)!=null&&T.saleId)?((M=ft.ref)==null?void 0:M.saleId)!==Ne.ref.saleId:ft.id!==Ne.id});U(Je),de(Je);const tt=Je.reduce((ft,T)=>ft+(Number(T.amount)||0),0);I(ft=>ft.map(T=>T.id===(J==null?void 0:J.id)?{...T,balance:tt}:T)),R(ft=>ft&&{...ft,balance:tt}),F(" Movimiento eliminado")}catch(Je){console.error(Je),F(" Error al eliminar movimiento")}finally{S(!1)}},et=v.useMemo(()=>[...j].sort((Ne,mt)=>{var W,Ie;return Ne.status!==mt.status?Ne.status==="BLOQUEADO"?1:-1:(((W=mt.createdAt)==null?void 0:W.seconds)||0)-(((Ie=Ne.createdAt)==null?void 0:Ie.seconds)||0)}),[j]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ae(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):et.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):et.map(Ne=>{var W;const mt=P===Ne.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(W=Ne.createdAt)!=null&&W.toDate?Ne.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:mt?i.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:Ie=>Z(Ie.target.value)}):Ne.name}),i.jsx("td",{className:"p-2 border",children:mt?i.jsx("input",{className:"w-full border p-1 rounded",value:fe,onChange:Ie=>me(OC(Ie.target.value))}):Ne.phone}),i.jsx("td",{className:"p-2 border",children:mt?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:Ie=>ye(Ie.target.value),children:[i.jsx("option",{value:"",children:""}),VV.map(Ie=>i.jsx("option",{value:Ie,children:Ie},Ie))]}):Ne.place||""}),i.jsx("td",{className:"p-2 border",children:mt?i.jsxs("select",{className:"w-full border p-1 rounded",value:Be,onChange:Ie=>O(Ie.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Ne.status})}),i.jsx("td",{className:"p-2 border",children:mt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:Ie=>z(Math.max(0,Number(Ie.target.value||0)))}):Ah(Ne.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Ah(Ne.balance||0)}),i.jsx("td",{className:"p-2 border",children:mt?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ae,onChange:Ie=>je(Ie.target.value),maxLength:500}):i.jsx("span",{title:Ne.notes||"",children:(Ne.notes||"").length>40?(Ne.notes||"").slice(0,40)+"":Ne.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:mt?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:re,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:he,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>At(Ne),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>oe(Ne),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Ve(Ne),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Ne.id)})})]})}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),ke&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ae(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ae(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:yt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:Ne=>d(Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:Ne=>A(OC(Ne.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:Ne=>m(Ne.target.value),children:[i.jsx("option",{value:"",children:""}),VV.map(Ne=>i.jsx("option",{value:Ne,children:Ne},Ne))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:Ne=>y(Ne.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Ne=>w(Math.max(0,Number(Ne.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:Ne=>g(Ne.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ae(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),L&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(J==null?void 0:J.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{we(0),We(new Date().toISOString().slice(0,10)),_t(""),Ee(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Y(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ue.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ue.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Ah(Ue.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:H?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ge.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ge.map(Ne=>{var W,Ie;const mt=ut===Ne.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:mt?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Pe,onChange:Je=>ct(Je.target.value)}):Ne.date||""}),i.jsx("td",{className:"p-2 border",children:Ne.amount>=0?(W=Ne.ref)!=null&&W.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(Ne.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Ie=Ne.ref)!=null&&Ie.saleId?`Venta #${Ne.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:mt?i.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:Je=>Le(Je.target.value),placeholder:"Comentario"}):i.jsx("span",{title:Ne.comment||"",children:(Ne.comment||"").length>40?(Ne.comment||"").slice(0,40)+"":Ne.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:mt?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(lt)?"":lt,onChange:Je=>{const tt=Number(Je.target.value||0),ft=Number.isFinite(tt)?Math.max(0,parseFloat(tt.toFixed(2))):0;be(ft)},placeholder:"0.00",title:Ne.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Ah(Ne.amount)}),i.jsx("td",{className:"p-2 border",children:mt?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ht,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:xt,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>dt(Ne),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>bt(Ne),children:"Borrar"})]})})]},Ne.id)})})]})})]})}),te&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(J==null?void 0:J.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Re,onChange:Ne=>We(Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ce===0?"":ce,onChange:Ne=>{const mt=Number(Ne.target.value||0),W=Number.isFinite(mt)?Math.max(0,parseFloat(mt.toFixed(2))):0;we(W)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:pt,onChange:Ne=>_t(Ne.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[pt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),disabled:He,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Se,disabled:He,children:He?"Guardando...":"Guardar abono"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((Ne,mt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Ne.productName}),i.jsx("td",{className:"p-2 border text-right",children:Ne.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Ne.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Ne.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ah(Ne.total)})]},mt))})]})})]})})]})}const ax=t=>`C$ ${(Number(t)||0).toFixed(2)}`,EPe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function SPe(t){if(!t)return 0;const e=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",t)),r=await Lt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function $V(t){if(!t)return 0;const e=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",t)),r=await Lt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function GV(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function IPe({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;ln(r,"admin"),ln(r,"vendedor_ropa");const[n,a]=v.useState([]),[s,o]=v.useState([]),[l,c]=v.useState({}),[u,d]=v.useState("CONTADO"),[f,A]=v.useState(""),[h,m]=v.useState(""),[p,g]=v.useState(new Date().toISOString().slice(0,10)),[x,y]=v.useState(""),[b,w]=v.useState([]),j=v.useMemo(()=>b.reduce((ce,we)=>ce+(we.qty||0),0),[b]),I=v.useMemo(()=>{const ce=b.reduce((we,Re)=>{const We=Math.max(0,(Number(Re.unitPrice)||0)*(Re.qty||0)-(Number(Re.discount)||0));return we+We},0);return Math.floor(ce*100)/100},[b]),[_,S]=v.useState(0),[E,F]=v.useState(""),[P,k]=v.useState(!1),[D,Z]=v.useState(!1),[fe,me]=v.useState(""),[pe,ye]=v.useState("+505 "),[ae,je]=v.useState(""),[Be,O]=v.useState(""),[G,z]=v.useState("ACTIVO"),[L,Y]=v.useState(0),J=()=>{me(""),ye("+505 "),je(""),O(""),z("ACTIVO"),Y(0)};v.useEffect(()=>{(async()=>{const ce=rr(Ct(Te,"customers_clothes"),gn("createdAt","desc")),we=await Lt(ce),Re=[];we.forEach(vt=>{const Pe=vt.data();Re.push({id:vt.id,name:Pe.name??"",phone:Pe.phone??"+505 ",place:Pe.place??"",status:Pe.status??"ACTIVO",creditLimit:Number(Pe.creditLimit??0),balance:0})});for(const vt of Re)try{const Pe=rr(Ct(Te,"ar_movements"),or("customerId","==",vt.id)),ct=await Lt(Pe);let lt=0;ct.forEach(be=>lt+=Number(be.data().amount||0)),vt.balance=lt}catch{vt.balance=0}a(Re);const We=rr(Ct(Te,"products_clothes"),gn("createdAt","desc")),pt=await Lt(We),_t=[];pt.forEach(vt=>{const Pe=vt.data();_t.push({id:vt.id,name:Pe.name??"(sin nombre)",sku:Pe.sku??""})}),o(_t);const He=rr(Ct(Te,"inventory_clothes_batches"),or("remaining",">",0)),gt=await Lt(He),ut={};gt.forEach(vt=>{const Pe=vt.data(),ct=Pe.productId||"",lt=Number(Pe.remaining||0);ct&&(ut[ct]=(ut[ct]||0)+lt)}),c(ut)})()},[]);const R=v.useMemo(()=>n.find(ce=>ce.id===f),[n,f]),H=(R==null?void 0:R.balance)||0,ne=u==="CREDITO"?H+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,ge=async ce=>{if(!ce)return;if(b.some(_t=>_t.productId===ce)){y("");return}const we=s.find(_t=>_t.id===ce);if(!we){y("");return}let Re=await SPe(ce);Re||(Re=Number((we==null?void 0:we.price)||0));const We=await $V(ce),pt={productId:ce,productName:we.name||"",sku:we.sku||"",unitPrice:Number(Re)||0,available:Number(We)||0,qty:0,discount:0};w(_t=>[..._t,pt]),y("")},U=(ce,we)=>{w(Re=>Re.map(We=>{if(We.productId!==ce)return We;if(we==="")return{...We,qty:0};const pt=Math.max(0,Math.floor(Number(we)));return{...We,qty:pt}}))},Ue=(ce,we)=>{w(Re=>Re.map(We=>{if(We.productId!==ce)return We;if(we==="")return{...We,discount:0};const pt=Math.max(0,Math.floor(Number(we)));return{...We,discount:pt}}))},ie=ce=>w(we=>we.filter(Re=>Re.productId!==ce)),te=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const ce=b.filter(we=>(we.qty||0)>0);if(ce.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!h.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((R==null?void 0:R.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const we of ce){const Re=await $V(we.productId);if(we.qty>Re)return`Inventario insuficiente para "${we.productName}". Disponible: ${Re} unidades.`;const We=(Number(we.unitPrice)||0)*(we.qty||0),pt=Number(we.discount)||0;if(!Number.isInteger(pt)||pt<0)return`El descuento en "${we.productName}" debe ser entero y  0.`;if(pt>We)return`El descuento en "${we.productName}" no puede exceder C$ ${We.toFixed(2)}.`}return null},Ee=async ce=>{ce.preventDefault(),F("");const we=await te();if(we){F(" "+we);return}try{k(!0);const Re=b.filter(He=>(He.qty||0)>0).map(He=>{const gt=(Number(He.unitPrice)||0)*(He.qty||0),ut=Math.max(0,Math.floor(Number(He.discount)||0)),vt=Math.max(0,gt-ut);return{productId:He.productId,productName:He.productName,sku:He.sku||"",qty:He.qty,unitPrice:Number(He.unitPrice)||0,discount:ut,total:Math.floor(vt*100)/100}}),We={type:u,date:p,createdAt:ur.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:Re};u==="CONTADO"?We.customerName=h.trim():(We.customerId=f,We.downPayment=Number(_)||0);const pt=await Tn(Ct(Te,"sales_clothes"),We);if(u==="CREDITO"&&f){const He={customerId:f,date:p,createdAt:ur.now(),ref:{saleId:pt.id}};await Tn(Ct(Te,"ar_movements"),{...He,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await Tn(Ct(Te,"ar_movements"),{...He,type:"ABONO",amount:-Number(_)})}const _t={};for(const He of Re)if(He.qty>0){const{allocations:gt}=await CPe({productId:He.productId,quantity:He.qty,saleDate:p,saleId:pt.id});_t[He.productId]={productId:He.productId,allocations:gt}}await xn(Wt(Te,"sales_clothes",pt.id),{allocationsByItem:_t}),d("CONTADO"),A(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),S(0),u==="CREDITO"&&f&&a(He=>He.map(gt=>gt.id===f?{...gt,balance:(gt.balance||0)+(Number(I)||0)-(Number(_)||0)}:gt)),F(" Venta registrada"),(async()=>{const He=rr(Ct(Te,"inventory_clothes_batches"),or("remaining",">",0)),gt=await Lt(He),ut={};gt.forEach(vt=>{const Pe=vt.data(),ct=Pe.productId||"",lt=Number(Pe.remaining||0);ct&&(ut[ct]=(ut[ct]||0)+lt)}),c(ut)})()}catch(Re){console.error(Re),F(" Error al guardar la venta")}finally{k(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:Ee,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:ce=>d(ce.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:h,onChange:ce=>m(ce.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:ce=>A(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(ce=>i.jsxs("option",{value:ce.status==="ACTIVO"?ce.id:"",disabled:ce.status==="BLOQUEADO",children:[ce.name," | ",ce.phone," | Saldo: ",ax(ce.balance||0)]},ce.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Z(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:ax(H)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:ce=>S(Math.max(0,Number(ce.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:ax(ne)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:ce=>g(ce.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:async ce=>{const we=ce.target.value;y(we),await ge(we)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(ce=>{const we=b.some(pt=>pt.productId===ce.id),Re=l[ce.id]||0,We=we||Re<=0;return i.jsxs("option",{value:We?"":ce.id,disabled:We,children:[ce.name," ",ce.sku?` ${ce.sku}`:""," ",Re>0?`(disp: ${Re})`:"(sin stock)",we?" (seleccionado)":""]},ce.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(ce=>{const we=Math.max(0,(ce.available||0)-(ce.qty||0)),Re=(Number(ce.unitPrice)||0)*(ce.qty||0),We=Math.max(0,Re-(Number(ce.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[ce.productName,ce.sku?`  ${ce.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:ax(ce.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:we}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.qty)||ce.qty===0?"":ce.qty,onChange:pt=>U(ce.productId,pt.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.discount)||ce.discount===0?"":ce.discount,onChange:pt=>Ue(ce.productId,pt.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:ax(We)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(ce.productId),title:"Quitar producto",children:""})})]},ce.productId)})]}),b.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:j})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:ax(I)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:P,children:P?"Guardando...":"Registrar venta"})})]}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:ce=>me(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:pe,onChange:ce=>ye(GV(ce.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:ce=>je(ce.target.value),children:[i.jsx("option",{value:"",children:""}),EPe.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:G,onChange:ce=>z(ce.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:L===0?"":L,onChange:ce=>Y(Math.max(0,Number(ce.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Be,onChange:ce=>O(ce.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{J(),Z(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(F(""),!fe.trim()){F("Ingresa el nombre del nuevo cliente.");return}const ce=GV(pe);try{const we=await Tn(Ct(Te,"customers_clothes"),{name:fe.trim(),phone:ce,place:ae||"",notes:Be||"",status:G,creditLimit:Number(L||0),createdAt:ur.now()}),Re={id:we.id,name:fe.trim(),phone:ce,place:ae||"",status:G,creditLimit:Number(L||0),balance:0};a(We=>[Re,...We]),A(we.id),J(),Z(!1),F(" Cliente creado")}catch(we){console.error(we),F(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),P&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Ki=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function iE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Cr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function jPe(t,e){const r=iE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function PPe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}function BPe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[A,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(!1),[S,E]=v.useState(null),[F,P]=v.useState([]),[k,D]=v.useState(!1),[Z,fe]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),j("");try{const O=await Lt(Ct(Te,"sales_clothes")),G=[],z=[];O.forEach(ie=>{const te=ie.data(),Ee=jPe(te,ie.id);Ee&&(Ee.date<=a&&G.push(Ee),Ee.date>=r&&Ee.date<=a&&z.push(Ee))}),u(G),l(z);const L=await Lt(Ct(Te,"inventory_clothes_batches")),Y=[];L.forEach(ie=>{const te=ie.data(),Ee=iE(te);!Ee||Ee>a||Y.push({id:ie.id,productId:te.productId,productName:te.productName||"",date:Ee,quantity:Number(te.quantity||0),remaining:Number(te.remaining||0),purchasePrice:Number(te.purchasePrice||0)})}),f(Y);const J=await Lt(Ct(Te,"expenses_clothes")),R=[];J.forEach(ie=>{const te=ie.data(),Ee=iE(te);Ee&&Ee>=r&&Ee<=a&&R.push({id:ie.id,date:Ee,category:te.category||"",description:te.description||"",amount:Number(te.amount||0),status:te.status||""})}),h(R);const H=await Lt(Ct(Te,"ar_movements")),ne=[],ge={};H.forEach(ie=>{const te=ie.data(),Ee=iE(te);if(!Ee)return;const ce=te.customerId,we=Number(te.amount||0);ce&&(ge[ce]=(ge[ce]||0)+we),te.type==="ABONO"&&Ee>=r&&Ee<=a&&ne.push({id:ie.id,customerId:ce,type:"ABONO",amount:we,date:Ee})}),p(ne);const U=await Lt(Ct(Te,"customers_clothes")),Ue=[];U.forEach(ie=>{const te=ie.data();Ue.push({id:ie.id,name:te.name||"",balance:ge[ie.id]||0})}),x(Ue)}catch(O){console.error(O),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const me=v.useMemo(()=>{try{return PPe(d,c,r,a)}catch(O){return console.error(O),0}},[d,c,r,a]),pe=v.useMemo(()=>{const O=o.reduce((ge,U)=>ge+(U.total||0),0),G=A.reduce((ge,U)=>ge+(U.amount||0),0),z=O-me,L=z-G,Y=m.reduce((ge,U)=>ge+Math.abs(U.amount||0),0),J=g.filter(ge=>(ge.balance||0)>0),R=J.reduce((ge,U)=>ge+(U.balance||0),0);let H=0,ne=0;for(const ge of o){const U=(ge.items||[]).reduce((Ue,ie)=>Ue+(Number(ie.qty)||0),0);ge.type==="CONTADO"?H+=U:ne+=U}return{ventasTotales:O,costoMercaderia:me,gastosPeriodo:G,gananciaAntes:z,gananciaDespues:L,abonosRecibidos:Y,saldosPendientes:R,clientesConSaldo:J.length,prendasCash:H,prendasCredito:ne}},[o,A,m,g,me]),ye=v.useMemo(()=>{const O={};for(const G of o){if(G.type!=="CREDITO"||!G.customerId)continue;const z=(G.items||[]).reduce((L,Y)=>L+(Number(Y.qty)||0),0);O[G.customerId]=(O[G.customerId]||0)+z}return g.filter(G=>(G.balance||0)>0).map(G=>({customerId:G.id,name:G.name,prendasCredito:O[G.id]||0,saldo:G.balance||0})).sort((G,z)=>z.saldo-G.saldo)},[g,o]),ae=v.useMemo(()=>{const O={};return g.forEach(G=>O[G.id]=G.name),O},[g]),je=v.useMemo(()=>[...o].sort((O,G)=>G.date.localeCompare(O.date)).map(O=>{var L;const G=(O.items||[]).reduce((Y,J)=>Y+(Number(J.qty)||0),0);let z="Cash";return O.type==="CREDITO"&&O.customerId?z=ae[O.customerId]||"":O.type==="CONTADO"&&(z=((L=O.customerName)==null?void 0:L.trim())||"Cash"),{id:O.id,date:O.date,type:O.type==="CREDITO"?"Crdito":"Cash",customer:z,piezas:G,total:Number(O.total||0)}}),[o,ae]),Be=async O=>{_(!0),E({id:O.customerId,name:O.name}),P([]),D(!0),fe({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const G=[];let z=0,L=0,Y=0;for(const ne of o)if(!(ne.type!=="CREDITO"||ne.customerId!==O.customerId))for(const ge of ne.items||[]){const U=Number(ge.qty||0),Ue=Number(ge.unitPrice||0),ie=U*Ue,te=Math.max(0,Number(ge.discount||0)),Ee=Math.max(0,ie-te);G.push({saleId:ne.id,date:ne.date,productName:ge.productName,sku:ge.sku||"",qty:U,unitPrice:Ue,lineTotal:ie,discount:te,lineFinal:Ee}),z+=ie,L+=te,Y+=Ee}let J=0;for(const ne of m)ne.customerId===O.customerId&&(J+=Math.abs(ne.amount||0));const R=g.find(ne=>ne.id===O.customerId),H=(R==null?void 0:R.balance)||0;P(G),fe({totalBruto:z,totalDescuento:L,totalFiado:Y,saldoActual:H,abonadoPeriodo:J})}catch(G){console.error(G),j(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(dc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:O=>s(O.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(pe.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(pe.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ki(pe.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(pe.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ki(pe.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(pe.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(pe.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:pe.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:pe.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:pe.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ye.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ye.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be({customerId:O.customerId,name:O.name}),title:"Ver piezas fiadas del periodo",children:O.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:Ki(O.saldo)})]},O.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):je.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.customer}),i.jsx("td",{className:"p-2 border",children:O.type}),i.jsx("td",{className:"p-2 border",children:O.piezas}),i.jsx("td",{className:"p-2 border",children:Ki(O.total)})]},O.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((O,G)=>O.date.localeCompare(G.date)).map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.category||""}),i.jsx("td",{className:"p-2 border",children:O.description?i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description}):""}),i.jsx("td",{className:"p-2 border",children:Ki(O.amount)}),i.jsx("td",{className:"p-2 border",children:O.status||""})]},O.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(Z.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(Z.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(Z.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(Z.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ki(Z.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:k?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):F.sort((O,G)=>O.date.localeCompare(G.date)).map((O,G)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.productName}),i.jsx("td",{className:"p-2 border",children:O.sku||""}),i.jsx("td",{className:"p-2 border",children:O.qty}),i.jsx("td",{className:"p-2 border",children:Ki(O.unitPrice)}),i.jsx("td",{className:"p-2 border",children:Ki(O.lineTotal)}),i.jsx("td",{className:"p-2 border",children:Ki(O.discount)}),i.jsx("td",{className:"p-2 border",children:Ki(O.lineFinal)})]},`${O.saleId}-${G}`))})]})})]})})]})}const KV=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],DC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function TPe(){const[t,e]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Cr(new Date,"yyyy-MM-dd")),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[A,h]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState(""),[F,P]=v.useState(""),[k,D]=v.useState(""),[Z,fe]=v.useState(0),[me,pe]=v.useState("PENDIENTE"),[ye,ae]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=rr(Ct(Te,"expenses_clothes"),gn("date","desc")),H=await Lt(R),ne=[];H.forEach(ge=>{const U=ge.data();ne.push({id:ge.id,date:U.date||Cr(new Date,"yyyy-MM-dd"),category:U.category||"",description:U.description||"",amount:Number(U.amount||0),status:U.status||"PENDIENTE",notes:U.notes||"",createdAt:U.createdAt??ur.now()})}),x(ne)}catch(R){console.error(R),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const je=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Be=v.useMemo(()=>{const R=je.reduce((ge,U)=>ge+(U.amount||0),0),H=je.filter(ge=>ge.status==="PAGADO").reduce((ge,U)=>ge+(U.amount||0),0),ne=R-H;return{total:R,pagado:H,pendiente:ne}},[je]),O=()=>{s(Cr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async R=>{if(R.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Tn(Ct(Te,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()});x(ne=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()},...ne]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},z=R=>{_(R.id),E(R.date),P(R.category||""),D(R.description||""),fe(Number(R.amount||0)),pe(R.status||"PENDIENTE"),ae(R.notes||"")},L=()=>{_(null),E(""),P(""),D(""),fe(0),pe("PENDIENTE"),ae("")},Y=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!k.trim()){j("Ingresa una descripcin.");return}if(!Z||Z<=0){j("Ingresa un monto vlido.");return}try{await xn(Wt(Te,"expenses_clothes",I),{date:S,category:F,description:k.trim(),amount:Number(Z.toFixed(2)),status:me,notes:ye||""}),x(R=>R.map(H=>H.id===I?{...H,date:S,category:F,description:k.trim(),amount:Number(Z.toFixed(2)),status:me,notes:ye||""}:H)),L(),j(" Gasto actualizado")}catch(R){console.error(R),j(" Error al actualizar gasto")}}},J=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Bn(Wt(Te,"expenses_clothes",R.id)),x(ne=>ne.filter(ge=>ge.id!==R.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",DC(Be.total)]}),i.jsxs("div",{children:["Pagado: ",DC(Be.pagado)]}),i.jsxs("div",{children:["Pendiente: ",DC(Be.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:R=>l(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),KV.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):je.slice().sort((R,H)=>R.date.localeCompare(H.date)).map(R=>{const H=I===R.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ne=>E(ne.target.value)}):R.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:ne=>P(ne.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),KV.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]}):R.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:k,onChange:ne=>D(ne.target.value)}):i.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z)?"":Z,onChange:ne=>fe(Math.max(0,Number(ne.target.value||0)))}):DC(R.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:ne=>pe(ne.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ye,onChange:ne=>ae(ne.target.value),maxLength:500}):i.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:L,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(R),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Id=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kPe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Cr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function FPe(t,e){const r=kPe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:o,total:a*o}}}async function OPe(t,e){if(e<=0)return;const r=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",t)),n=await Lt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await xn(Wt(Te,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function DPe(t,e){if(e<=0)return;const r=rr(Ct(Te,"inventory_clothes_batches"),or("productId","==",t)),n=await Lt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await xn(Wt(Te,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function Fre(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}async function RPe(t,e,r){if(await Fre(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:ur.now(),ref:{saleId:t.id}},{addDoc:a}=await Vh(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>wye);return{addDoc:o}},void 0);await a(Ct(Te,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(Ct(Te,"ar_movements"),{...n,type:"ABONO",amount:-s})}function MPe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[o,l]=v.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const Ee=(await Lt(rr(Ct(Te,"sales_clothes"),or("__name__","==",ie)))).docs[0],ce=Ee==null?void 0:Ee.data(),Re=(Array.isArray(ce==null?void 0:ce.items)?ce.items:ce!=null&&ce.item?[ce.item]:[]).map(We=>({productName:String(We.productName||""),qty:Number(We.qty||0),unitPrice:Number(We.unitPrice||0),discount:Number(We.discount||0),total:Number(We.total||0)}));l(Re)}catch(te){console.error(te)}finally{n(!1)}},[u,d]=v.useState(Cr(new Date,"yyyy-MM-01")),[f,A]=v.useState(Cr(new Date,"yyyy-MM-dd")),[h,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,S]=v.useState(""),[E,F]=v.useState(null),[P,k]=v.useState(!1),[D,Z]=v.useState(null),[fe,me]=v.useState(0),pe=15,[ye,ae]=v.useState(1),je=v.useMemo(()=>{const ie={};return h.forEach(te=>ie[te.id]=te.name),ie},[h]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await Lt(Ct(Te,"customers_clothes")),te=[];ie.forEach(we=>te.push({id:we.id,name:we.data().name||""})),m(te);const Ee=await Lt(rr(Ct(Te,"sales_clothes"),gn("createdAt","desc"))),ce=[];Ee.forEach(we=>{const Re=FPe(we.data(),we.id);Re&&Re.date>=u&&Re.date<=f&&ce.push(Re)}),g(ce.sort((we,Re)=>Re.date.localeCompare(we.date))),ae(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Be=v.useMemo(()=>p.filter(ie=>!(j&&ie.customerId!==j||_&&ie.type!==_)),[p,j,_]),O=v.useMemo(()=>{let ie=0,te=0,Ee=0,ce=0;for(const we of Be)we.type==="CONTADO"?(ie+=we.item.qty,Ee+=we.total):(te+=we.item.qty,ce+=we.total);return{piezasCash:ie,piezasCredito:te,montoCash:Ee,montoCredito:ce}},[Be]),G=Math.max(1,Math.ceil(Be.length/pe)),z=v.useMemo(()=>{const ie=(ye-1)*pe;return Be.slice(ie,ie+pe)},[Be,ye]),L=ie=>{F(null),Z(ie),me(ie.item.qty||0),k(!0)},Y=async ie=>{if(F(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await kk(ie.id),await Fre(ie.id),g(te=>te.filter(Ee=>Ee.id!==ie.id)),w(" Venta eliminada")}catch(te){console.error(te),w(" No se pudo eliminar la venta.")}finally{y(!1)}},J=async()=>{if(!D)return;const ie=Number(D.item.qty||0),te=Math.max(1,Math.floor(Number(fe)||0));if(te===ie){k(!1);return}const Ee=Number(D.item.unitPrice||0),ce=Number((Ee*te).toFixed(2));try{y(!0);const we=te-ie;we>0?await OPe(D.item.productId,we):we<0&&await DPe(D.item.productId,-we);const Re=Wt(Te,"sales_clothes",D.id);await xn(Re,{quantity:te,total:ce,itemsTotal:ce,"item.qty":te,"item.total":ce,updatedAt:ur.now()});const We=Math.min(Number(D.downPayment||0),ce);await RPe(D,ce,We),g(pt=>pt.map(_t=>_t.id===D.id?{..._t,quantity:te,total:ce,item:{..._t.item,qty:te,total:ce},downPayment:We}:_t)),w(" Venta actualizada"),k(!1)}catch(we){console.error(we),w(" No se pudo actualizar la venta.")}finally{y(!1)}},R=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,te=Re=>(Re||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ee=Be.map(Re=>{const We=Re.customerName||(Re.customerId?je[Re.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Re.date}</td>
          <td>${te(We)}</td>
          <td>${Re.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Re.item.qty}</td>
          <td style="text-align:right">${Id(Re.total)}</td>
        </tr>`}).join(""),ce=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${te(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${te(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${O.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${O.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Id(O.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Id(O.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Ee||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,we=window.open("","_blank");we&&(we.document.open(),we.document.write(ce),we.document.close())},H=()=>ae(1),ne=()=>ae(ie=>Math.max(1,ie-1)),ge=()=>ae(ie=>Math.min(G,ie+1)),U=()=>ae(G),Ue=()=>{const ie=[];if(G<=7)for(let Ee=1;Ee<=G;Ee++)ie.push(Ee);else{const Ee=Math.max(1,ye-2),ce=Math.min(G,ye+2);ie.push(1),Ee>2&&ie.push(-1);for(let we=Ee;we<=ce;we++)we!==1&&we!==G&&ie.push(we);ce<G-1&&ie.push(-2),ie.push(G)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:H,disabled:ye===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:ye===1,children:" Anterior"}),ie.map((Ee,ce)=>typeof Ee=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Ee===ye?"bg-blue-600 text-white":""}`,onClick:()=>ae(Ee),children:Ee},ce):i.jsx("span",{className:"px-2",children:""},ce)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ge,disabled:ye===G,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:U,disabled:ye===G,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ye," de ",G,"  ",Be.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),ae(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{A(ie.target.value),ae(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ie=>{I(ie.target.value),ae(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(ie=>i.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{S(ie.target.value),ae(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Id(O.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Id(O.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:x?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):z.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):z.map(ie=>{const te=ie.customerName||(ie.customerId?je[ie.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ie.date}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),i.jsx("td",{className:"p-2 border",children:Id(ie.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>F(Ee=>Ee===ie.id?null:ie.id),title:"Acciones",children:""}),E===ie.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>L(ie),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Y(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),Ue()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),P&&D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:fe,onChange:ie=>me(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:Id(D.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:Id(Number(D.item.unitPrice)*Number(fe||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{k(!1),Z(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:J,children:"Guardar cambios"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((ie,te)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ie.productName}),i.jsx("td",{className:"p-2 border text-right",children:ie.qty}),i.jsx("td",{className:"p-2 border text-right",children:Id(ie.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Id(ie.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Id(ie.total)})]},te))})]})})]})})]})}const qV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Xc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function zV(t){const e=rr(Ct(Te,"ar_movements_pollo"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements_pollo",n.id))))}function LPe({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=ln(a,"vendedor_pollo"),l=ln(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[S,E]=v.useState(null),[F,P]=v.useState([]),k=async Nt=>{var _r;j(!0),_(!0),E(Nt),P([]);try{const st=await js(Wt(Te,"salesV2",Nt));let St=null;if(st.exists()?St=st.data():St=(_r=(await Lt(rr(Ct(Te,"salesV2"),or("name","==",Nt)))).docs[0])==null?void 0:_r.data(),!St){P([]);return}let Qt=[];if(Array.isArray(St.items)&&St.items.length>0)Qt=St.items;else if(St.items&&typeof St.items=="object")try{Qt=Object.values(St.items)}catch{Qt=[]}else St.item?Qt=[St.item]:Array.isArray(St.products)&&St.products.length>0?Qt=St.products:Array.isArray(St.lines)&&St.lines.length>0?Qt=St.lines:Array.isArray(St.detalles)&&St.detalles.length>0?Qt=St.detalles:(St.productName||St.product)&&(Qt=[{productName:St.productName||St.product||"",qty:St.qty??St.quantity??St.lbs??0,unitPrice:St.unitPrice??St.price??0,discount:St.discount??0,total:St.total??St.amount??0}]);const Rt=zt=>{if(zt==null)return NaN;if(typeof zt=="number")return zt;let hr=String(zt).trim();if(!hr)return NaN;if(hr=hr.replace(/[^0-9.,-]/g,""),!hr)return NaN;hr.indexOf(".")>-1&&hr.indexOf(",")>-1?hr=hr.replace(/,/g,""):hr.indexOf(",")>-1&&hr.indexOf(".")===-1&&(hr=hr.replace(/,/g,"."));const rn=Number(hr);return Number.isNaN(rn)?NaN:rn},Mt=new Set;for(const zt of Qt)if(Array.isArray(zt==null?void 0:zt.allocations))for(const hr of zt.allocations){const rn=String((hr==null?void 0:hr.batchId)||"").trim();rn&&Mt.add(rn)}else if(zt!=null&&zt.allocations&&typeof zt.allocations=="object")try{for(const hr of Object.values(zt.allocations)){const rn=String((hr==null?void 0:hr.batchId)||"").trim();rn&&Mt.add(rn)}}catch{}if(Array.isArray(St==null?void 0:St.allocations))for(const zt of St.allocations){const hr=String((zt==null?void 0:zt.batchId)||"").trim();hr&&Mt.add(hr)}const qt={};Mt.size>0&&await Promise.all(Array.from(Mt).map(async zt=>{try{const hr=await js(Wt(Te,"inventory_batches",zt));if(hr.exists()){const rn=hr.data();qt[zt]=Number(rn.salePrice??rn.sale_price??rn.price??0)}}catch{}}));const Yt=new Set;for(const zt of Qt){const hr=String(zt.productId||"").trim();hr&&Yt.add(hr)}const Xt={};Yt.size>0&&await Promise.all(Array.from(Yt).map(async zt=>{try{const hr=await js(Wt(Te,"products",zt));if(hr.exists()){const rn=hr.data();Xt[zt]=Number(rn.salePrice??rn.price??0)}}catch{}}));const br=Qt.map(zt=>{const hr=String(zt.productName||zt.product||zt.name||"(sin nombre)"),rn=Number(zt.qty??zt.quantity??zt.lbs??zt.weight??0)||0,Ya=Rt(zt.total??zt.lineFinal??zt.amount??zt.monto??zt.line_total)||0;let Dn=0;const Va=[zt.unitPrice,zt.unitPricePackage,zt.salePrice,zt.sale_price,zt.price,zt.unit_price,zt.pricePerUnit,zt.price_per_unit];for(const ya of Va){const Ha=Rt(ya);if(!Number.isNaN(Ha)&&Ha!==0){Dn=Ha;break}}if(!Dn){const ya=(St==null?void 0:St.salePrice)??(St==null?void 0:St.sale_price)??(St==null?void 0:St.unitPrice)??(St==null?void 0:St.unit_price)??(St==null?void 0:St.price)??(St==null?void 0:St.pricePerUnit),Ha=Rt(ya);!Number.isNaN(Ha)&&Ha!==0&&(Dn=Ha)}if(!Dn){const ya=Array.isArray(zt.allocations)?zt.allocations[0]:zt.allocations&&typeof zt.allocations=="object"?Object.values(zt.allocations)[0]:null,Ha=ya?String(ya.batchId||"").trim():"";Ha&&qt[Ha]&&(Dn=qt[Ha]||0)}!Dn&&zt.productId&&(Dn=Xt[String(zt.productId)]||0),(!Dn||Dn===0)&&Ya>0&&rn>0&&(Dn=Ya/rn);const Lo=Rt(zt.discount??zt.desc??0)||0;let Qi=Ya;return(!Qi||Qi===0)&&(Qi=Number(Dn*rn||0)),Qi=Number(Qi)||0,{productName:hr,qty:rn,unitPrice:Dn,discount:Lo,total:Qi}});P(br)}catch(st){console.error(st)}finally{_(!1)}},[D,Z]=v.useState(""),[fe,me]=v.useState("+505 "),[pe,ye]=v.useState(""),[ae,je]=v.useState(""),[Be,O]=v.useState("ACTIVO"),[G,z]=v.useState(0),[L,Y]=v.useState(""),[J,R]=v.useState(0),[H,ne]=v.useState([]),[ge,U]=v.useState(!0),[Ue,ie]=v.useState(""),[te,Ee]=v.useState(null),[ce,we]=v.useState(""),[Re,We]=v.useState("+505 "),[pt,_t]=v.useState(""),[He,gt]=v.useState(""),[ut,vt]=v.useState("ACTIVO"),[Pe,ct]=v.useState(0),[lt,be]=v.useState(""),[ue,Le]=v.useState(!1),[ke,Ae]=v.useState(null),[Ye,yt]=v.useState(!1),[At,he]=v.useState([]),[re,oe]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[Ve,de]=v.useState(!1),[Se,dt]=v.useState(0),[xt,ht]=v.useState(new Date().toISOString().slice(0,10)),[bt,et]=v.useState(""),[Ne,mt]=v.useState(!1),[W,Ie]=v.useState(null),[Je,tt]=v.useState(""),[ft,T]=v.useState(0),[M,V]=v.useState(""),[q,ee]=v.useState(!1),[se,Oe]=v.useState(null),[Ke,ot]=v.useState(!1),[Fe,Xe]=v.useState(!1),[xe,Ge]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(U(!0),o&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const Nt=await Lt(Ct(Te,"sellers_candies")),_r=[];Nt.forEach(Rt=>{const Mt=Rt.data();_r.push({id:Rt.id,name:String(Mt.name||"")})}),u(_r);const st=o?rr(Ct(Te,"customers_pollo"),or("vendorId","==",s),gn("createdAt","desc")):rr(Ct(Te,"customers_pollo"),gn("createdAt","desc")),St=await Lt(st),Qt=[];St.forEach(Rt=>{const Mt=Rt.data();Qt.push({id:Rt.id,name:Mt.name??"",phone:Mt.phone??"+505 ",place:Mt.place??"",notes:Mt.notes??"",status:Mt.status??"ACTIVO",creditLimit:Number(Mt.creditLimit??0),createdAt:Mt.createdAt??ur.now(),balance:0,vendorId:Mt.vendorId||"",vendorName:Mt.vendorName||"",initialDebt:Number(Mt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Rt of Qt)try{const Mt=rr(Ct(Te,"ar_movements_pollo"),or("customerId","==",Rt.id)),qt=await Lt(Mt);let Yt=0,Xt=null;qt.forEach(zt=>{var Ya,Dn,Va;const hr=zt.data(),rn=Number(hr.amount||0);if(Yt+=rn,rn<0){const Lo=hr.date??((Dn=(Ya=hr.createdAt)==null?void 0:Ya.toDate)!=null&&Dn.call(Ya)?hr.createdAt.toDate().toISOString().slice(0,10):""),Qi=(Va=hr.createdAt)!=null&&Va.seconds?Number(hr.createdAt.seconds):0;(!Xt||Qi>=Xt.ts)&&(Xt={date:Lo,amount:Math.abs(rn),ts:Qi})}});const br=Number(Rt.initialDebt||0);Rt.balance=br+Yt,Xt?(Rt.lastAbonoDate=Xt==null?void 0:Xt.date,Rt.lastAbonoAmount=Xt==null?void 0:Xt.amount):(Rt.lastAbonoDate="",Rt.lastAbonoAmount=0)}catch{Rt.balance=Number(Rt.initialDebt||0),Rt.lastAbonoDate="",Rt.lastAbonoAmount=0}ne(Qt)}catch(Nt){console.error(Nt),ie(" Error cargando clientes.")}finally{U(!1)}})()},[o,s]);const qe=()=>{Z(""),me("+505 "),ye(""),je(""),O("ACTIVO"),z(0),Y(""),R(0)},it=async Nt=>{var Qt;if(Nt.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const _r=RC(fe);if(_r.length<6){ie("Telfono incompleto.");return}const st=o?s:String(L||""),St=st&&((Qt=c.find(Rt=>Rt.id===st))==null?void 0:Qt.name)||"";try{const Rt=Number(J||0),Mt=await Tn(Ct(Te,"customers_pollo"),{name:D.trim(),phone:_r,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0),vendorId:st,vendorName:St,initialDebt:Rt,createdAt:ur.now()});ne(qt=>[{id:Mt.id,name:D.trim(),phone:_r,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0),vendorId:st,vendorName:St,initialDebt:Rt,createdAt:ur.now(),balance:Rt,lastAbonoDate:"",lastAbonoAmount:0},...qt]),qe(),ee(!1),ie(" Cliente creado")}catch(Rt){console.error(Rt),ie(" Error al crear cliente")}},Et=Nt=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Ee(Nt.id),we(Nt.name),We(Nt.phone||"+505 "),_t(Nt.place||""),gt(Nt.notes||""),vt(Nt.status||"ACTIVO"),ct(Number(Nt.creditLimit||0)),be(String(Nt.vendorId||""))},Pt=()=>{Ee(null),we(""),We("+505 "),_t(""),gt(""),vt("ACTIVO"),ct(0),be("")},pr=async()=>{var Mt;if(o){ie(" No permitido.");return}if(!te)return;const Nt=RC(Re);if(!ce.trim()){ie("Ingresa el nombre.");return}const _r=H.find(qt=>qt.id===te),st=String((_r==null?void 0:_r.vendorId)||""),St=o?s:String(lt||"");if(o&&st&&st!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&st&&St&&st!==St){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Qt=o?s:String(lt||""),Rt=Qt&&((Mt=c.find(qt=>qt.id===Qt))==null?void 0:Mt.name)||"";try{await xn(Wt(Te,"customers_pollo",te),{name:ce.trim(),phone:Nt,place:pt||"",notes:He||"",status:ut,creditLimit:Number(Pe||0),vendorId:Qt,vendorName:Rt}),ne(qt=>qt.map(Yt=>Yt.id===te?{...Yt,name:ce.trim(),phone:Nt,place:pt||"",notes:He||"",status:ut,creditLimit:Number(Pe||0),vendorId:Qt,vendorName:Rt}:Yt)),Pt(),ie(" Cliente actualizado")}catch(qt){console.error(qt),ie(" Error al actualizar")}},Ot=async Nt=>{if(confirm(`Eliminar al cliente "${Nt.name}"?
Se borrarn todas sus ventas y movimientos.`))try{U(!0);const st=rr(Ct(Te,"salesV2"),or("customerId","==",Nt.id)),St=await Lt(st);for(const Mt of St.docs){const qt=Mt.id;try{await Bn(Wt(Te,"salesV2",qt))}catch(Yt){console.warn("delete sale error",Yt)}await zV(qt)}const Qt=rr(Ct(Te,"ar_movements_pollo"),or("customerId","==",Nt.id)),Rt=await Lt(Qt);await Promise.all(Rt.docs.map(Mt=>Bn(Wt(Te,"ar_movements_pollo",Mt.id)))),await Bn(Wt(Te,"customers_pollo",Nt.id)),ne(Mt=>Mt.filter(qt=>qt.id!==Nt.id)),ie(" Cliente eliminado y registros borrados")}catch(st){console.error(st),ie(" No se pudo eliminar el cliente.")}finally{U(!1)}},Dt=(Nt,_r)=>{const st=Nt.reduce((Mt,qt)=>Mt+(Number(qt.amount)||0),0),St=Nt.filter(Mt=>Number(Mt.amount)<0).reduce((Mt,qt)=>Mt+Math.abs(Number(qt.amount)||0),0),Qt=Nt.filter(Mt=>Number(Mt.amount)>0).reduce((Mt,qt)=>Mt+(Number(qt.amount)||0),0),Rt=Number(_r||0)+st;oe({saldoActual:Rt,totalAbonado:St,totalCargos:Number(_r||0)+Qt,saldoRestante:Rt})},fr=async Nt=>{Ae(Nt),he([]),oe({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Le(!0),ot(!1),Xe(!1),Ge(null),de(!1),dt(0),ht(new Date().toISOString().slice(0,10)),et(""),Ie(null),yt(!0);try{const _r=rr(Ct(Te,"ar_movements_pollo"),or("customerId","==",Nt.id)),st=await Lt(_r),St=[];st.forEach(Qt=>{var Yt,Xt;const Rt=Qt.data(),Mt=Rt.date??((Xt=(Yt=Rt.createdAt)==null?void 0:Yt.toDate)!=null&&Xt.call(Yt)?Rt.createdAt.toDate().toISOString().slice(0,10):""),qt=Number(Rt.amount||0);St.push({id:Qt.id,date:Mt,type:Rt.type??(qt<0?"ABONO":"CARGO"),amount:qt,ref:Rt.ref||{},comment:Rt.comment||"",createdAt:Rt.createdAt})}),St.sort((Qt,Rt)=>{var Yt,Xt;if(Qt.date!==Rt.date)return Qt.date.localeCompare(Rt.date);const Mt=((Yt=Qt.createdAt)==null?void 0:Yt.seconds)||0,qt=((Xt=Rt.createdAt)==null?void 0:Xt.seconds)||0;return Mt-qt}),he(St),Dt(St,Number(Nt.initialDebt||0))}catch(_r){console.error(_r),ie(" No se pudo cargar el estado de cuenta")}finally{yt(!1)}},ir=Nt=>{const _r=Nt.filter(st=>Number(st.amount)<0).map(st=>{var St;return{date:st.date,amount:Math.abs(Number(st.amount||0)),ts:((St=st.createdAt)==null?void 0:St.seconds)||0}}).sort((st,St)=>(st.ts||0)-(St.ts||0));return _r.length?_r[_r.length-1]:null},Bt=async()=>{if(!ke)return;ie("");const Nt=Number(Se||0);if(!(Nt>0)){ie("Ingresa un monto de abono mayor a 0.");return}const _r=parseFloat(Nt.toFixed(2));if(!xt){ie("Selecciona la fecha del abono.");return}try{mt(!0);const st={customerId:ke.id,type:"ABONO",amount:-_r,date:xt,comment:bt||"",createdAt:ur.now()},Qt={id:(await Tn(Ct(Te,"ar_movements_pollo"),st)).id,date:xt,type:"ABONO",amount:-_r,comment:bt||"",createdAt:ur.now()},Rt=[...At,Qt].sort((Mt,qt)=>{var br,zt;if(Mt.date!==qt.date)return Mt.date.localeCompare(qt.date);const Yt=((br=Mt.createdAt)==null?void 0:br.seconds)||0,Xt=((zt=qt.createdAt)==null?void 0:zt.seconds)||0;return Yt-Xt});he(Rt),Dt(Rt,Number(ke.initialDebt||0)),ne(Mt=>Mt.map(qt=>{if(qt.id!==ke.id)return qt;const Yt=(qt.balance||0)-_r;return{...qt,balance:Yt,lastAbonoDate:xt,lastAbonoAmount:_r}})),Ae(Mt=>Mt&&{...Mt,balance:(Mt.balance||0)-_r,lastAbonoDate:xt,lastAbonoAmount:_r}),dt(0),et(""),ht(new Date().toISOString().slice(0,10)),de(!1),ie(" Abono registrado")}catch(st){console.error(st),ie(" Error al registrar el abono")}finally{mt(!1)}},gr=Nt=>{Ie(Nt.id),tt(Nt.date||new Date().toISOString().slice(0,10)),T(Math.abs(Number(Nt.amount||0))),V(Nt.comment||"")},Or=()=>{Ie(null),tt(""),T(0),V("")},Pr=async()=>{if(!W||!ke)return;const Nt=At.findIndex(Qt=>Qt.id===W);if(Nt===-1)return;const _r=At[Nt],st=Number(ft||0);if(!(st>0)){ie("El monto debe ser mayor a 0.");return}const St=_r.type==="ABONO"?-parseFloat(st.toFixed(2)):+parseFloat(st.toFixed(2));try{await xn(Wt(Te,"ar_movements_pollo",W),{date:Je,amount:St,comment:M||""});const Qt=[...At];Qt[Nt]={..._r,date:Je,amount:St,comment:M||""},Qt.sort((Yt,Xt)=>{var hr,rn;if(Yt.date!==Xt.date)return Yt.date.localeCompare(Xt.date);const br=((hr=Yt.createdAt)==null?void 0:hr.seconds)||0,zt=((rn=Xt.createdAt)==null?void 0:rn.seconds)||0;return br-zt}),he(Qt),Dt(Qt,Number(ke.initialDebt||0));const Rt=Qt.reduce((Yt,Xt)=>Yt+(Number(Xt.amount)||0),0),Mt=Number(ke.initialDebt||0)+Rt,qt=ir(Qt);ne(Yt=>Yt.map(Xt=>Xt.id===ke.id?{...Xt,balance:Mt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Xt)),Ae(Yt=>Yt&&{...Yt,balance:Mt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),Or(),ie(" Movimiento actualizado")}catch(Qt){console.error(Qt),ie(" Error al actualizar movimiento")}},Vr=async Nt=>{var st,St;if(confirm(`Eliminar este movimiento (${Nt.type==="ABONO"?"Abono":"Compra"}) del ${Nt.date}?${Nt.type==="CARGO"&&((st=Nt.ref)!=null&&st.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&ke)try{if(U(!0),Nt.type==="CARGO"&&((St=Nt.ref)!=null&&St.saleId)){try{await Bn(Wt(Te,"salesV2",Nt.ref.saleId))}catch(Yt){console.warn("delete sale error",Yt),U(!1),ie(" No se pudo borrar la venta asociada.");return}await zV(Nt.ref.saleId)}else await Bn(Wt(Te,"ar_movements_pollo",Nt.id));const Qt=At.filter(Yt=>{var Xt,br;return Nt.type==="CARGO"&&((Xt=Nt.ref)!=null&&Xt.saleId)?((br=Yt.ref)==null?void 0:br.saleId)!==Nt.ref.saleId:Yt.id!==Nt.id});he(Qt),Dt(Qt,Number(ke.initialDebt||0));const Rt=Qt.reduce((Yt,Xt)=>Yt+(Number(Xt.amount)||0),0),Mt=Number(ke.initialDebt||0)+Rt,qt=ir(Qt);ne(Yt=>Yt.map(Xt=>Xt.id===ke.id?{...Xt,balance:Mt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Xt)),Ae(Yt=>Yt&&{...Yt,balance:Mt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),Ge(null),ie(" Movimiento eliminado")}catch(Qt){console.error(Qt),ie(" Error al eliminar movimiento")}finally{U(!1)}},Rr=v.useMemo(()=>[...H].sort((Nt,_r)=>{var st,St;return Nt.status!==_r.status?Nt.status==="BLOQUEADO"?1:-1:(((st=_r.createdAt)==null?void 0:st.seconds)||0)-(((St=Nt.createdAt)==null?void 0:St.seconds)||0)}),[H]),an=Nt=>Nt==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Wn=v.useMemo(()=>{const Nt=A.trim().toLowerCase(),_r=g.trim()===""?null:Number(g),st=y.trim()===""?null:Number(y);return Rr.filter(St=>{const Qt=!Nt||String(St.name||"").toLowerCase().includes(Nt),Rt=!m||St.status===m,Mt=Number(St.balance||0),qt=_r===null||!Number.isNaN(_r)&&Mt>=_r,Yt=st===null||!Number.isNaN(st)&&Mt<=st;return Qt&&Rt&&qt&&Yt})},[Rr,A,m,g,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{ee(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ge?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Wn.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Wn.map(Nt=>{var st;const _r=te===Nt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(st=Nt.createdAt)!=null&&st.toDate?Nt.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:_r?i.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:St=>we(St.target.value)}):i.jsx("div",{className:"font-medium",children:Nt.name})}),i.jsx("td",{className:"p-2 border",children:_r?i.jsx("input",{className:"w-full border p-1 rounded",value:Re,onChange:St=>We(RC(St.target.value))}):Nt.phone}),i.jsx("td",{className:"p-2 border",children:_r?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:lt,onChange:St=>be(St.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(St=>i.jsx("option",{value:St.id,children:St.name},St.id))]}):Nt.vendorName||""}),i.jsx("td",{className:"p-2 border",children:_r?i.jsxs("select",{className:"w-full border p-1 rounded",value:pt,onChange:St=>_t(St.target.value),children:[i.jsx("option",{value:"",children:""}),qV.map(St=>i.jsx("option",{value:St,children:St},St))]}):Nt.place||""}),i.jsx("td",{className:"p-2 border",children:_r?i.jsxs("select",{className:"w-full border p-1 rounded",value:ut,onChange:St=>vt(St.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${an(Nt.status)}`,children:Nt.status})}),i.jsx("td",{className:"p-2 border",children:_r?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Pe)?"":Pe,onChange:St=>ct(Math.max(0,Number(St.target.value||0)))}):Xc(Nt.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Xc(Nt.balance||0)}),i.jsx("td",{className:"p-2 border",children:_r?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:He,onChange:St=>gt(St.target.value),maxLength:500}):i.jsx("span",{title:Nt.notes||"",children:(Nt.notes||"").length>40?(Nt.notes||"").slice(0,40)+"":Nt.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:_r?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:pr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pt,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Et(Nt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(Nt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>fr(Nt),children:"Estado de cuenta"})]})})})]},Nt.id)})})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:ge?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):Wn.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):Wn.map(Nt=>i.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-base",children:Nt.name}),i.jsx("div",{className:"text-xs text-gray-600",children:Nt.phone||""}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:Nt.vendorName||""})]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${an(Nt.status)}`,children:Nt.status})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:Xc(Nt.balance||0)})]}),i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),i.jsx("div",{className:"font-semibold",children:Xc(Nt.creditLimit||0)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:Nt.lastAbonoDate?`${Nt.lastAbonoDate} (${Xc(Nt.lastAbonoAmount||0)})`:""})]}),Nt.notes?i.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(Nt.notes||"").length>80?(Nt.notes||"").slice(0,80)+"":Nt.notes]}):null,i.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>fr(Nt),children:"Estado de cuenta"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>Et(Nt),disabled:o,title:o?"Vendedor no edita":"Editar",children:"Editar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>Ot(Nt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},Nt.id))})]}),Ue&&i.jsx("p",{className:"mt-2 text-sm",children:Ue}),q&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ee(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ee(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:it,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:Nt=>Z(Nt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:Nt=>me(RC(Nt.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:Nt=>ye(Nt.target.value),children:[i.jsx("option",{value:"",children:""}),qV.map(Nt=>i.jsx("option",{value:Nt,children:Nt},Nt))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Be,onChange:Nt=>O(Nt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:L,onChange:Nt=>Y(Nt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Nt=>i.jsx("option",{value:Nt.id,children:Nt.name},Nt.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:Nt=>R(Math.max(0,Number(Nt.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:Nt=>z(Math.max(0,Number(Nt.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ae,onChange:Nt=>je(Nt.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ae.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ee(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),ue&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[50]",style:{zIndex:50},children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Le(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ke==null?void 0:ke.name)||""]}),i.jsxs("div",{className:"flex gap-2 shrink-0",children:[i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),ht(new Date().toISOString().slice(0,10)),et(""),de(!0)},children:"Abonar"}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Le(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Xc(Number((ke==null?void 0:ke.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Xc(re.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Xc(re.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Xc(re.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Ye?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):At.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):At.map(Nt=>{var st;const _r=W===Nt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:_r?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Je,onChange:St=>tt(St.target.value)}):Nt.date||""}),i.jsx("td",{className:"p-2 border",children:Nt.amount>=0?(st=Nt.ref)!=null&&st.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>k(Nt.ref.saleId),children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:_r?i.jsx("input",{className:"w-full border p-1 rounded",value:M,onChange:St=>V(St.target.value)}):i.jsx("span",{title:Nt.comment||"",children:(Nt.comment||"").length>40?(Nt.comment||"").slice(0,40)+"":Nt.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:_r?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ft)?"":ft,onChange:St=>T(Number(St.target.value||0))}):Xc(Nt.amount)}),i.jsx("td",{className:"p-2 border",children:_r?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pr,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Or,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gr(Nt),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Vr(Nt),children:"Borrar"})]})})]},Nt.id)})})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",style:{zIndex:60},children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," "]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((Nt,_r)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Nt.productName}),i.jsx("td",{className:"p-2 border text-right",children:Nt.qty}),i.jsx("td",{className:"p-2 border text-right",children:Xc(Nt.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Xc(Nt.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Xc(Nt.total)})]},_r))})]})})]})})]}),document.body),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ke==null?void 0:ke.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:xt,onChange:Nt=>ht(Nt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Se===0?"":Se,onChange:Nt=>{const _r=Number(Nt.target.value||0),st=Number.isFinite(_r)?Math.max(0,parseFloat(_r.toFixed(2))):0;dt(st)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:bt,onChange:Nt=>et(Nt.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[bt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>de(!1),disabled:Ne,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Bt,disabled:Ne,children:Ne?"Guardando...":"Guardar abono"})]})]})})]})}function UPe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function QPe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var VPe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HPe=function(t){VPe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),UPe(s,a.prototype),QPe(s),s}return e}(Error),$Pe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oc=function(t){$Pe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(HPe),GPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vi=function(t){GPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Oc),KPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),un=function(t){KPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Oc),Ore=function(){function t(e){if(this.binarizer=e,e===null)throw new un("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),qPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Di=function(t){qPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Oc),zPe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ns=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),WPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j6=function(t){WPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Oc),XPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WV=function(t){XPe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(j6),YPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new un("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new WV(r);if(n>e)throw new WV(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=YPe(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return ns.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var o=s+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)s=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Ln=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Bo=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ns.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=n[a]}var l=a*32+Ln.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=~n[a]}var l=a*32+Ln.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new un;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);s[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new un;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new un("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new un("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var o=a[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ao.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ao.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Fk;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Fk||(Fk={}));const as=Fk;var JPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(t){JPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Oc),ZPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_a;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(_a||(_a={}));var no=function(){function t(e,r,n){for(var a,s,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var A=ZPe(o),h=A.next();!h.done;h=A.next()){var m=h.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new jr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new jr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new jr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(_a.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(_a.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(_a.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(_a.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(_a.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(_a.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(_a.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(_a.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(_a.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(_a.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(_a.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(_a.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(_a.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(_a.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(_a.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(_a.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(_a.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(_a.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(_a.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(_a.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(_a.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(_a.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(_a.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(_a.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(_a.Big5,28,"Big5"),t.GB18030=new t(_a.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(_a.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),e3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oE=function(t){e3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Oc),sd=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof no?e:no.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,o=e.length;s<o;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(no.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new oE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(no.UTF8)||e.equals(no.ISO8859_1)||e.equals(no.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Jn=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return sd.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(as.CHARACTER_SET)!==void 0)return r.get(as.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,o=!0,l=0,c=0,u=0,d=0,f=0,A=0,h=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||o);b++){var w=e[b]&255;o&&(l>0?w&128?l--:o=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?o=!1:d++):u++):c++):o=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(A++,m=0,h++,h>p&&(p=h)):w>127?(f++,h=0,m++,m>g&&(g=m)):(h=0,m=0))}return o&&l>0&&(o=!1),s&&f>0&&(s=!1),o&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&A===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,A){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,m;switch(A){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(h||16);break;case"d":m=parseFloat(parseInt(r[a],h||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return sd.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=no.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=no.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=no.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),kn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Jn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),Vf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new un("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var o=e[s],l=0;l<n;l++)o[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new un("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new un("row lengths do not match");o=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new un("illegal character encountered: "+e.substring(u));if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new un("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new un("input matrix dimensions do not match");for(var r=new Bo(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,o=this.height;s<o;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new un("Left and top must be nonnegative");if(a<1||n<1)throw new un("Height and width must be at least 1");var s=e+n,o=r+a;if(o>this.height||s>this.width)throw new un("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Bo(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,a[s+o]);return r},t.prototype.setRow=function(e,r){ns.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Bo(e),a=new Bo(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<o&&(o=u),u>c&&(c=u),d*32<s){for(var A=0;!(f<<31-A&4294967295);)A++;d*32+A<s&&(s=d*32+A)}if(d*32+31>l){for(var A=31;!(f>>>A);)A--;d*32+A>l&&(l=d*32+A)}}}return l<s||c<o?null:Int32Array.from([s,o,l-s+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,o=r[n],l=0;!(o<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ao.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ao.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new kn,s=0,o=this.height;s<o;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jt=function(t){t3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Oc),r3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n3e=function(t){r3e(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Bo(s):n.clear(),this.initArrays(s);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(o[c]&255)<u&&n.set(c);else for(var d=o[0]&255,f=o[1]&255,c=1;c<s-1;c++){var A=o[c+1]&255;(f*4-d-A)/2<u&&n.set(c),d=f,f=A}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new Vf(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var A=u[f]&255;o[A>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var A=m[p+f]&255;A<h&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,o=0,l=0;l<n;l++)r[l]>o&&(s=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var A=s;s=c,c=A}if(c-s<=n/16)throw new Jt;for(var h=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(h=l,m=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(zPe),a3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dre=function(t){a3e(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,o,l,n,a),u=new Vf(n,a);e.calculateThresholdForBlock(s,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,o,l,c){for(var u=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var A=f<<e.BLOCK_SIZE_POWER;A>u&&(A=u);for(var h=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[h+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,A,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,o){for(var l=o-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var A=0;A<n;A++){var h=A<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=0,p=255,g=0,x=0,y=f*s+h;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&A>0)){var I=(u[d-1][A]+2*u[d][A-1]+u[d-1][A-1])/4;p<I&&(j=I)}u[d][A]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(n3e),Iw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new oE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new oE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new oE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new kn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var o=a[s]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zj=function(t){s3e(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Iw),i3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o3e=function(t){i3e(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new un("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new zj(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Iw),l3e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Kl=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},ql=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},c3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Kl(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return ql(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=c3e(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Kl(this,void 0,void 0,function(){var e;return ql(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new l3e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Kl(this,void 0,void 0,function(){var r;return ql(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Kl(this,void 0,void 0,function(){return ql(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Kl(this,void 0,void 0,function(){var n,a;return ql(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Kl(this,void 0,void 0,function(){var n;return ql(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Kl(this,void 0,void 0,function(){var n,a;return ql(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Kl(this,void 0,void 0,function(){return ql(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Kl(this,void 0,void 0,function(){var a,s;return ql(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Kl(this,void 0,void 0,function(){var a;return ql(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Kl(this,void 0,void 0,function(){var a;return ql(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Kl(this,void 0,void 0,function(){var n;return ql(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Kl(this,void 0,void 0,function(){return ql(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new vi("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new vi("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new vi("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new vi("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new vi("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new vi("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new vi("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new vi("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new vi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new vi("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Kl(this,void 0,void 0,function(){return ql(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Kl(this,void 0,void 0,function(){return ql(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,l){if(a._stopAsyncDecode){l(new Jt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(A){var u=r&&A instanceof Jt,d=A instanceof Di||A instanceof jr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,o,l);l(A)}};return new Promise(function(o,l){return s(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof Di||c instanceof jr,l=c instanceof Jt;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new o3e(n,r),s=new Dre(a);return new Ore(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Ll=function(){function t(e,r,n,a,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=ns.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,o==null?this.timestamp=ns.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ns.arraycopy(r,0,n,0,r.length),ns.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Ok;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ok||(Ok={}));const cn=Ok;var Dk;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Dk||(Dk={}));const ol=Dk;var Wj=function(){function t(e,r,n,a,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Uy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new un;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),W0=function(){function t(e,r){if(r.length===0)throw new un;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),ns.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var o=r[a];n=Uy.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Uy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new un("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ns.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=Uy.addOrSubtract(r[l-o],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new un("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)o[c+d]=Uy.addOrSubtract(o[c+d],l.multiply(u,a[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(s[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new un;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),o=this.field,l=0;l<a;l++)s[l]=o.multiply(n[l],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new un("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new un("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),u3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rre=function(t){u3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Oc),d3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_c=function(t){d3e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return s.logTable=u,s.zero=new W0(s,Int32Array.from([0])),s.one=new W0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new un;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new W0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Rre;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ln.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Uy),f3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MC=function(t){f3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Oc),h3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jw=function(t){h3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Oc),Xj=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new W0(n,e),s=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new W0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],A=d[1],h=this.findErrorLocations(f),m=this.findErrorMagnitudes(A,h),l=0;l<h.length;l++){var p=e.length-1-n.log(h[l]);if(p<0)throw new MC("Bad error location");e[p]=_c.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,o=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=o,f=c;if(o=l,c=u,o.isZero())throw new MC("r_{i-1} was zero");l=d;for(var A=s.getZero(),h=o.getCoefficient(o.getDegree()),m=s.inverse(h);l.getDegree()>=o.getDegree()&&!l.isZero();){var p=l.getDegree()-o.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);A=A.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(o.multiplyByMonomial(p,g))}if(u=A.multiply(c).addOrSubtract(f),l.getDegree()>=o.getDegree())throw new jw("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new MC("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,o=1;o<s.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=s.inverse(o),a++);if(a!==r)throw new MC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var l=s.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[o]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[o]=s.multiply(a[o],l))}return a},t}(),zo;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(zo||(zo={}));var XV=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new Wj(s,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=zo.UPPER,a=zo.UPPER,s="",o=0;o<r;)if(a===zo.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);s+=Jn.castAsNonUtf8Char(u),o+=8}a=n}else{var d=a===zo.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return zo.LOWER;case"P":return zo.PUNCT;case"M":return zo.MIXED;case"D":return zo.DIGIT;case"B":return zo.BINARY;case"U":default:return zo.UPPER}},t.getCharacter=function(e,r){switch(e){case zo.UPPER:return t.UPPER_TABLE[r];case zo.LOWER:return t.LOWER_TABLE[r];case zo.MIXED:return t.MIXED_TABLE[r];case zo.PUNCT:return t.PUNCT_TABLE[r];case zo.DIGIT:return t.DIGIT_TABLE[r];default:throw new jw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=_c.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=_c.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=_c.AZTEC_DATA_10):(n=12,r=_c.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new jr;for(var o=e.length%n,l=new Int32Array(s),c=0;c<s;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new Xj(r);u.decode(l,s-a)}catch(g){throw new jr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var A=l[c];if(A===0||A===d)throw new jr;(A===1||A===d-1)&&f++}for(var h=new Array(a*n-f),m=0,c=0;c<a;c++){var A=l[c];if(A===1||A===d-1)h.fill(A>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)h[m++]=(A&1<<p)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Ln.truncDivision(Ln.truncDivision(a,2)-1,15),u=a/2,d=Ln.truncDivision(c,2),l=0;l<u;l++){var f=l+Ln.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,A=0;l<n;l++){for(var h=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<h;g++)for(var x=g*2,y=0;y<2;y++)o[A+x+y]=e.get(s[m+y],s[m+g]),o[A+2*h+x+y]=e.get(s[m+g],s[p-y]),o[A+4*h+x+y]=e.get(s[p-y],s[p-g]),o[A+6*h+x+y]=e.get(s[p-g],s[m+y]);A+=h*8}return o},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ia=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,o=r-a;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Rk=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),qr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Rk.floatToIntBits(this.x)+Rk.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,o,l;if(n>=r&&n>=a?(o=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],s=e[0],l=e[2]):(o=e[2],s=e[0],l=e[1]),this.crossProductZ(s,o,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=o,e[2]=l},t.distance=function(e,r){return ia.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),P6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),A3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m3e=function(t){A3e(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(P6),Mk=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Jt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,o=!0,l=!1,c=!1,u=!1,d=!1,f=!1,A=this.width,h=this.height;o;){o=!1;for(var m=!0;(m||!c)&&r<A;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,c=!0):c||r++;if(r>=A){s=!0;break}for(var p=!0;(p||!u)&&a<h;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,o=!0,u=!0):u||a++;if(a>=h){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,o=!0,f=!0):f||n--;if(n<0){s=!0;break}o&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Jt;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new Jt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new Jt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new Jt;return this.centerEdges(_,b,I,j)}else throw new Jt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=ia.round(ia.distance(e,r,n,a)),o=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=ia.round(e+u*o),f=ia.round(r+u*l);if(c.get(d,f))return new qr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),A=a.getY(),h=t.CORR;return s<this.width/2?[new qr(f-h,A+h),new qr(l+h,c+h),new qr(u-h,d-h),new qr(s+h,o-h)]:[new qr(f+h,A+h),new qr(l+h,c-h),new qr(u-h,d+h),new qr(s-h,o-h)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),YV=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new Jt;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new Jt;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}},t}(),Mre=function(){function t(e,r,n,a,s,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,o,l,c,u,d,f,A,h,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,o,l,c),y=t.squareToQuadrilateral(u,d,f,A,h,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=0;A<r;A+=2){var h=e[A],m=e[A+1],p=s*h+c*m+f;e[A]=(n*h+o*m+u)/p,e[A+1]=(a*h+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=e.length,h=0;h<A;h++){var m=e[h],p=r[h],g=s*m+c*p+f;e[h]=(n*m+o*p+u)/g,r[h]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,o,l,c){var u=e-n+s-l,d=r-a+o-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,o-a,r,0,0,1);var f=n-s,A=l-s,h=a-o,m=c-o,p=f*m-A*h,g=(u*m-A*d)/p,x=(f*d-u*h)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,o,l,c){return t.squareToQuadrilateral(e,r,n,a,s,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g3e=function(t){p3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,o,l,c,u,d,f,A,h,m,p,g,x,y,b,w){var j=Mre.quadrilateralToQuadrilateral(s,o,l,c,u,d,f,A,h,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Jt;for(var o=new Vf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),YV.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&o.set(f/2,c)}catch{throw new Jt}}return o},e}(YV),B6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new g3e,t}(),gc=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new qr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),x3e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new m3e(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Jt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Ln.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Jt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new Xj(_c.AZTEC_PARAM);c.decode(o,s)}catch{throw new Jt}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Jt;this.compact=this.nbCenterLayers===5;var A=new qr(r.getX()+.5,r.getY()-.5),h=new qr(n.getX()+.5,n.getY()+.5),m=new qr(a.getX()-.5,a.getY()+.5),p=new qr(s.getX()-.5,s.getY()-.5);return this.expandSquare([A,h,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Mk(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new gc(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new gc(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new gc(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new gc(o-7,l-7),!1,-1,-1).toResultPoint()}var c=ia.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ia.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Mk(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new gc(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new gc(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new gc(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new gc(c-7,u-7),!1,-1,-1).toResultPoint()}return c=ia.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ia.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new gc(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var o=B6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),o=s/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/s,d=o*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(ia.round(l+f*u),ia.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new gc(e.getX()-s,e.getY()+s),r=new gc(r.getX()-s,r.getY()-s),n=new gc(n.getX()+s,n.getY()-s),a=new gc(a.getX()+s,a.getY()+s);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(ia.round(l),ia.round(c))!==u&&o++;var A=o/n;return A>.1&&A<.9?0:A<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,o=e.getY()+a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=a;for(s-=n,o-=a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=a;return o-=a,new gc(s,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new qr(l+a*s,c+a*o),d=new qr(l-a*s,c-a*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new qr(l+a*s,c+a*o),A=new qr(l-a*s,c-a*o),h=[u,f,d,A];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ia.round(e.getX()),n=ia.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ia.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ia.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ln.truncDivision(this.nbLayers-4,8)+1)+15},t}(),IS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new x3e(e.getBlackMatrix()),s=null,o=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new XV().decode(l)}catch(f){n=f}if(o==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new XV().decode(l)}catch(f){throw n??f}var c=new Ll(o.getText(),o.getRawBytes(),o.getNumBits(),s,cn.AZTEC,ns.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(ol.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&c.putMetadata(ol.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(as.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),v3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){v3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new IS,r)||this}return e})(o1);var oo=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(as.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),o=s.getResultMetadata(),l=270;o!==null&&o.get(ol.ORIENTATION)===!0&&(l=l+o.get(ol.ORIENTATION)%360),s.putMetadata(ol.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new qr(u-c[d].getY()-1,c[d].getX());return s}else throw new Jt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Bo(n),o=r&&r.get(as.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),A=(d&1)===0,h=u+l*(A?f:-f);if(h<0||h>=a)break;try{s=e.getBlackRow(h,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(as.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(as.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(h,s,r);if(y===1){w.putMetadata(ol.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new qr(n-j[0].getX()-1,j[0].getY()),j[1]=new qr(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Jt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new Jt;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new Jt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Jt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return Number.POSITIVE_INFINITY;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/s},t}(),y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JV=function(t){y3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)o[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,A=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=oo.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,A=h)}if(A>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,A]);l+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new Jt},e.decodeCode=function(r,n,a){oo.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=l)}if(o>=0)return o;throw new Jt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(as.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new jr}for(var f=!1,A=!1,h="",m=o[0],p=o[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var S=A;switch(A=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(pe,ye){return pe+ye},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new jr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Jt;if(b-=w*x,b%103!==x)throw new Di;var F=h.length;if(F===0)throw new Jt;F>0&&j&&(d===e.CODE_CODE_C?h=h.substring(0,F-2):h=h.substring(0,F-1));for(var P=(o[1]+o[0])/2,k=m+E/2,D=u.length,Z=new Uint8Array(D),fe=0;fe<D;fe++)Z[fe]=u[fe];var me=[new qr(P,r),new qr(k,r)];return new Ll(h,Z,0,me,cn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(oo),b3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZV=function(t){b3e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),A=n.getSize(),h,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Jt;h=e.patternToChar(p),this.decodeRowResult+=h,m=f;try{for(var g=(s=void 0,h5(u)),x=g.next();!x.done;x=g.next()){var y=x.value;f+=y}}catch(D){s={error:D}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=h5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(D){l={error:D}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==A&&I*2<b)throw new Jt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,S=0,E=0;E<_;E++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(S%43))throw new Di;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new Jt;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var P=(d[1]+d[0])/2,k=m+b/2;return new Ll(F,null,0,[new qr(P,r),new qr(k,r)],cn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),o=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new Jt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,h5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>o&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var A=0,h=0,m=0;m<s;m++){var f=r[m];f>o&&(h|=1<<s-1-m,l++,A+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>o&&(l--,f*2>=A))return-1}return h}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Jt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(s+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new jr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new jr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new jr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new jr;break}a+=c,s++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(oo),w3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eH=function(t){w3e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,A);var p=this.toPattern(A);if(p<0)throw new Jt;h=this.patternToChar(p),this.decodeRowResult+=h,m=d;try{for(var g=(s=void 0,A5(A)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(E){s={error:E}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=A5(A),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(E){l={error:E}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new Jt;if(this.decodeRowResult.length<2)throw new Jt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,S=m+b/2;return new Ll(I,null,0,[new qr(_,r),new qr(S,r)],cn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Jt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var o=A5(r),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var A=Math.round(r[f]*9/s);if(A<1||A>4)return-1;if(f&1)u<<=A;else for(var h=0;h<A;h++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Jt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o>="a"&&o<="d"){if(s>=n-1)throw new jr;var l=r.charAt(s+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new jr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new jr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new jr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new jr;break}a+=c,s++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,o=0,l=n-1;l>=0;l--)o+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Di},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(oo),N3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tH=function(t){N3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new kn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(as.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var A=d.length,h=!1,m=0;try{for(var p=C3e(f),g=p.next();!g.done;g=p.next()){var x=g.value;if(A===x){h=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}if(!h&&A>m&&(h=!0),!h)throw new jr;var y=[new qr(l[1],r),new qr(c[0],r)],b=new Ll(d,null,0,y,cn.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){oo.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;l[u]=o[d],c[u]=o[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),o.forEach(function(A){n+=A})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Jt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Jt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof Jt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,o=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;o.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)o[u]++;else{if(u===s-1){if(oo.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],ns.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new Jt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,o=0;o<s;o++){var l=e.PATTERNS[o],c=oo.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new Jt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(oo),_3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jv=function(t){_3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new jr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new jr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,A=n;A<l;A++)if(r.get(A)!==f)o[c]++;else{if(c===d-1){if(oo.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=o[0]+o[1];for(var h=o.slice(2,o.length),m=0;m<c-1;m++)o[m]=h[m];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new Jt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=oo.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,l=u)}if(l>=0)return l;throw new Jt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(oo),E3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S3e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new qr((n[0]+n[1])/2,e),new qr(s,e)],u=new Ll(o,null,0,c,cn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=jv.decodeDigit(e,o,c,jv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,E3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Jt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Jt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Jt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[ol.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+a+"."+o},t}(),I3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j3e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new qr((n[0]+n[1])/2,e),new qr(s,e)],u=new Ll(o,null,0,c,cn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=jv.decodeDigit(e,o,c,jv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,I3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Jt;if(parseInt(n.toString())%4!==u)throw new Jt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[ol.ISSUE_NUMBER,parseInt(e)]])},t}(),P3e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=jv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new S3e;return s.decodeRow(e,r,a)}catch{var o=new j3e;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),B3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zi=function(t){B3e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),o=0;o<a.length;o++)s[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),o=a==null?null:a.get(as.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new qr((s[0]+s[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(o!=null){var f=new qr(u,r);o.foundPossibleResultPoint(f)}var A=e.decodeEnd(n,u);if(o!=null){var h=new qr((A[0]+A[1])/2,r);o.foundPossibleResultPoint(h)}var m=A[1],p=m+(m-A[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Jt;var g=d.toString();if(g.length<8)throw new jr;if(!e.checkChecksum(g))throw new Di;var x=(s[1]+s[0])/2,y=(A[1]+A[0])/2,b=this.getBarcodeFormat(),w=[new qr(x,r),new qr(y,r)],j=new Ll(g,null,0,w,b,new Date().getTime()),I=0;try{var _=P3e.decodeRow(r,n,A[1]);j.putMetadata(ol.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var S=a==null?null:a.get(as.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=!1;for(var F in S)if(I.toString()===F){E=!0;break}if(!E)throw new Jt}return b===cn.EAN_13||cn.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new jr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new jr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(jv),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lk=function(t){T3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0,h=0;h<6&&f<d;h++){var m=Zi.decodeDigit(r,u,f,Zi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,rH(u)),g=p.next();!g.done;g=p.next()){var x=g.value;f+=x}}catch(j){s={error:j}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}m>=10&&(A|=1<<5-h)}a=e.determineFirstDigit(a,A);var y=Zi.findGuardPattern(r,f,!0,Zi.MIDDLE_PATTERN,new Int32Array(Zi.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<d;h++){var m=Zi.decodeDigit(r,u,f,Zi.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,rH(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return cn.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Jt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Zi),k3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(t){k3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0;A<4&&f<d;A++){var h=Zi.decodeDigit(r,u,f,Zi.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var m=(s=void 0,nH(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var x=Zi.findGuardPattern(r,f,!0,Zi.MIDDLE_PATTERN,new Int32Array(Zi.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var A=0;A<4&&f<d;A++){var h=Zi.decodeDigit(r,u,f,Zi.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(l=void 0,nH(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return cn.EAN_8},e}(Zi),F3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sH=function(t){F3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Lk,r}return e.prototype.getBarcodeFormat=function(){return cn.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Ll(n.substring(1),null,null,r.getResultPoints(),cn.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Jt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Zi),O3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iH=function(t){O3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var A=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);try{for(var h=(s=void 0,D3e(l)),m=h.next();!m.done;m=h.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}A>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new kn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Zi.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Jt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return cn.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new kn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Zi),R3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m5=function(t){R3e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(as.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(cn.EAN_13)>-1&&s.push(new Lk),a.indexOf(cn.UPC_A)>-1&&s.push(new sH),a.indexOf(cn.EAN_8)>-1&&s.push(new aH),a.indexOf(cn.UPC_E)>-1&&s.push(new iH)),s.length===0&&(s.push(new Lk),s.push(new sH),s.push(new aH),s.push(new iH)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,o;try{for(var l=oH(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===cn.EAN_13&&d.getText().charAt(0)==="0",A=a==null?null:a.get(as.POSSIBLE_FORMATS),h=A==null||A.includes(cn.UPC_A);if(f&&h){var m=d.getRawBytes(),p=new Ll(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),cn.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}throw new Jt},e.prototype.reset=function(){var r,n;try{for(var a=oH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;o.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(oo),M3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L3e=function(t){M3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Jt;var o=this.codaBarDecodeRow(s.row);if(!o)throw new Jt;return new Ll(o,null,0,[new qr(s.left,r),new qr(s.right,r)],cn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var o=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),o=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(oo),U3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wm=function(t){U3e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(oo.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Jt},e.count=function(r){return ia.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=Q3e(r),f=d.next();!f.done;f=d.next()){var A=f.value;A>u&&(u=A),A<c&&(c=A)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(oo),jS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Lre=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new qr(n,s)),this.resultPoints.push(new qr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),V3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,o=0;try{for(var l=V3e(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,A=e.length,h=0;h<A-1;h++){var m=void 0;for(m=1,f|=1<<h;m<e[h];m++,f&=~(1<<h)){var p=t.combins(o-m-1,A-h-2);if(n&&f===0&&o-m-(A-h-1)>=A-h-1&&(p-=t.combins(o-m-(A-h),A-h-2)),A-h-1>1){for(var g=0,x=o-m-(A-h-2);x>r;x--)g+=t.combins(o-m-x-1,A-h-3);p-=g*(A-1-h)}else o-m>r&&p--;d+=p}o-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,o=1,l=e;l>n;l--)s*=l,o<=a&&(s/=o,o++);for(;o<=a;)s/=o,o++;return s},t}(),H3e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Bo(n),s=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var A=u.getRightChar().getValue(),f=11;f>=0;--f)A&1<<f&&a.set(s),s++}return a},t}(),Rm=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),T6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),$3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jd=function(t){$3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(T6),G3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mm=function(t){G3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(T6),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sx=function(t){K3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new jr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(T6),LC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q3e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,o,l,c,u;if(!e)return null;if(e.length<2)throw new Jt;var d=e.substring(0,2);try{for(var f=LC(t.TWO_DIGIT_DATA_LENGTH),A=f.next();!A.done;A=f.next()){var h=A.value;if(h[0]===d)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new Jt;var m=e.substring(0,3);try{for(var p=LC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var h=g.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=LC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var h=y.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){o={error:I}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}if(e.length<4)throw new Jt;var b=e.substring(0,4);try{for(var w=LC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var h=j.value;if(h[0]===b)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Jt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Jt;var a=n.substring(0,e);if(n.length<e+r)throw new Jt;var s=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),l=n.substring(s),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),lE=function(){function t(e){this.buffer=new kn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),o=q3e.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new sx(this.information.getSize(),sx.FNC1,sx.FNC1):new sx(this.information.getSize(),r-1,sx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new sx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Mm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Mm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Mm(this.current.getPosition(),this.buffer.toString()):r=new Mm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Rm(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Mm(this.current.getPosition(),this.buffer.toString());return new Rm(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Rm(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Mm(this.current.getPosition(),this.buffer.toString());return new Rm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Rm(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Mm(this.current.getPosition(),this.buffer.toString());return new Rm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Rm(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new jd(e+5,jd.FNC1);if(r>=5&&r<15)return new jd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new jd(e+7,""+(n+1));if(n>=90&&n<116)return new jd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new jr}return new jd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new jd(e+5,jd.FNC1);if(r>=5&&r<15)return new jd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new jd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new jw("Decoding invalid alphanumeric value: "+n)}return new jd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Ure=function(){function t(e){this.information=e,this.generalDecoder=new lE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Md=function(t){z3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?o:3*o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Ure),W3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X3e=function(t){W3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new kn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Md),Y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J3e=function(t){Y3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new kn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Ure),Z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cE=function(t){Z3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var o=this.checkWeight(s),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e}(Md),e5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qre=function(t){e5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+cE.GTIN_SIZE+e.WEIGHT_SIZE)throw new Jt;var r=new kn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+cE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(cE),t5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r5e=function(t){t5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Qre),n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a5e=function(t){n5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Qre),s5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i5e=function(t){s5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Md.GTIN_SIZE)throw new Jt;var r=new kn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Md.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Md.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Md),o5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l5e=function(t){o5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Md.GTIN_SIZE)throw new Jt;var r=new kn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Md.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Md.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Md.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Md),c5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZA=function(t){c5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Jt;var r=new kn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(cE);function u5e(t){try{if(t.get(1))return new X3e(t);if(!t.get(2))return new J3e(t);var e=lE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new r5e(t);case 5:return new a5e(t)}var r=lE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new i5e(t);case 13:return new l5e(t)}var n=lE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new ZA(t,"310","11");case 57:return new ZA(t,"320","11");case 58:return new ZA(t,"310","13");case 59:return new ZA(t,"320","13");case 60:return new ZA(t,"310","15");case 61:return new ZA(t,"320","15");case 62:return new ZA(t,"310","17");case 63:return new ZA(t,"320","17")}}catch(a){throw console.log(a),new jw("unknown decoder: "+t)}}var lH=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),d5e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h5e=function(t){f5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Jt){if(!this.pairs.length)throw new Jt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new Jt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,e0(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(A){a={error:A}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,o+1)}catch(A){console.log(A)}}}throw new Jt},e.isValidSequence=function(r){var n,a;try{for(var s=e0(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new d5e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,o,l,c,u;try{for(var d=e0(n),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.getPairs().length!==r.length){var h=!0;try{for(var m=(o=void 0,e0(A.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,e0(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(lH.equals(g,w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(h=!1)}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,o,l,c,u;try{for(var d=e0(n),f=d.next();!f.done;f=d.next()){var A=f.value,h=!0;try{for(var m=(o=void 0,e0(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,e0(A.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){h=!1;break}}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}if(h)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=H3e.buildBitArray(r),a=u5e(n),s=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Ll(s,null,null,c,cn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,s),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Jt;var d;try{d=this.decodeDataCharacter(r,o,s,!1)}catch(f){d=null,console.log(f)}return new lH(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var f=0,A=l,h=l;h<o;h++)if(r.get(h)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=A,this.startEnd[1]=h;return}u&&e.reverseCounters(s),A+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new Jt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();ns.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Lre(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var f=17,A=ia.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(A-h)/h>.3)throw new Jt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var y=1*o[c]/A,b=y+.5;if(b<1){if(y<.3)throw new Jt;b=1}else if(b>8){if(y>8.7)throw new Jt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c];_+=m[c]*S}I+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c+1];E+=p[c]*S}var F=_+E;if(I&1||I>13||I<4)throw new Jt;var P=(13-I)/2,k=e.SYMBOL_WIDEST[P],D=9-k,Z=Lx.getRSSvalue(m,k,!0),fe=Lx.getRSSvalue(p,D,!1),me=e.EVEN_TOTAL_SUBSET[P],pe=e.GSUM[P],ye=Z*me+fe+pe;return new jS(ye,F)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=ia.sum(new Int32Array(this.getOddCounts())),a=ia.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new Jt;o=!0}else{if(!f)throw new Jt;c=!0}else if(u===-1)if(d){if(f)throw new Jt;s=!0}else{if(!f)throw new Jt;l=!0}else if(u===0){if(d){if(!f)throw new Jt;n<a?(s=!0,c=!0):(o=!0,l=!0)}else if(f)throw new Jt}else throw new Jt;if(s){if(o)throw new Jt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Jt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Wm),A5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m5e=function(t){A5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(jS),p5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cH=function(t){p5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=p5(this.possibleLeftPairs),A=f.next();!A.done;A=f.next()){var h=A.value;if(h.getCount()>1)try{for(var m=(l=void 0,p5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(h,g))return e.constructResult(h,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{A&&!A.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new Jt},e.addOrTally=function(r,n){var a,s;if(n!=null){var o=!1;try{for(var l=p5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),o=new kn,l=13-s.length;l>0;l--)o.append("0");o.append(s);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Ll(o.toString(),null,0,[d[0],d[1],f[0],f[1]],cn.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=s==null?null:s.get(as.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new qr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new m5e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)oo.recordPatternInReverse(r,n.getStartEnd()[0],s);else{oo.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=ia.sum(new Int32Array(s))/d,A=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(h[y]=x,p[y]=g-x):(A[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=A.length-1;l>=0;l--)w*=9,w+=A[l],b+=A[l];for(var j=0,I=0,l=h.length-1;l>=0;l--)j*=9,j+=h[l],I+=h[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new Jt;var S=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[S],F=9-E,P=Lx.getRSSvalue(A,E,!1),k=Lx.getRSSvalue(h,F,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],Z=e.OUTSIDE_GSUM[S];return new jS(P*D+k+Z,_)}else{if(I&1||I>10||I<4)throw new Jt;var S=(10-I)/2,E=e.INSIDE_ODD_WIDEST[S],F=9-E,P=Lx.getRSSvalue(A,E,!0),k=Lx.getRSSvalue(h,F,!1),fe=e.INSIDE_ODD_TOTAL_SUBSET[S],Z=e.INSIDE_GSUM[S];return new jS(k*fe+P+Z,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),o=!1,l=0;l<s&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==o)a[c]++;else{if(c===3){if(Wm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new Jt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var o=r.get(s[0]),l=s[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ns.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),A=l,h=s[1];return a&&(A=r.getSize()-1-A,h=r.getSize()-1-h),new Lre(f,[l,s[1]],A,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=ia.sum(new Int32Array(this.getOddCounts())),s=ia.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),A=(s&1)===1;if(d===1)if(f){if(A)throw new Jt;l=!0}else{if(!A)throw new Jt;u=!0}else if(d===-1)if(f){if(A)throw new Jt;o=!0}else{if(!A)throw new Jt;c=!0}else if(d===0){if(f){if(!A)throw new Jt;a<s?(o=!0,u=!0):(l=!0,c=!0)}else if(A)throw new Jt}else throw new Jt;if(o){if(l)throw new Jt;Wm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Wm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Jt;Wm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Wm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Wm),g5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ux=function(t){g5e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(as.POSSIBLE_FORMATS):null,s=r&&r.get(as.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(as.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(cn.EAN_13)||a.includes(cn.UPC_A)||a.includes(cn.EAN_8)||a.includes(cn.UPC_E))&&n.readers.push(new m5(r)),a.includes(cn.CODE_39)&&n.readers.push(new ZV(s,o)),a.includes(cn.CODE_93)&&n.readers.push(new eH),a.includes(cn.CODE_128)&&n.readers.push(new JV),a.includes(cn.ITF)&&n.readers.push(new tH),a.includes(cn.CODABAR)&&n.readers.push(new L3e),a.includes(cn.RSS_14)&&n.readers.push(new cH),a.includes(cn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new h5e))),n.readers.length===0&&(n.readers.push(new m5(r)),n.readers.push(new ZV),n.readers.push(new eH),n.readers.push(new m5(r)),n.readers.push(new JV),n.readers.push(new tH),n.readers.push(new cH)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Jt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(oo),x5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){x5e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Ux(n),r,n)||this}return e})(o1);var uH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xa=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),da=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),v5e=function(){function t(e,r,n,a,s,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var A=uH(f),h=A.next();!h.done;h=A.next()){var m=h.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{h&&!h.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new jr;try{for(var s=uH(t.VERSIONS),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new jr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new xa(5,new da(1,3))),new t(2,12,12,10,10,new xa(7,new da(1,5))),new t(3,14,14,12,12,new xa(10,new da(1,8))),new t(4,16,16,14,14,new xa(12,new da(1,12))),new t(5,18,18,16,16,new xa(14,new da(1,18))),new t(6,20,20,18,18,new xa(18,new da(1,22))),new t(7,22,22,20,20,new xa(20,new da(1,30))),new t(8,24,24,22,22,new xa(24,new da(1,36))),new t(9,26,26,24,24,new xa(28,new da(1,44))),new t(10,32,32,14,14,new xa(36,new da(1,62))),new t(11,36,36,16,16,new xa(42,new da(1,86))),new t(12,40,40,18,18,new xa(48,new da(1,114))),new t(13,44,44,20,20,new xa(56,new da(1,144))),new t(14,48,48,22,22,new xa(68,new da(1,174))),new t(15,52,52,24,24,new xa(42,new da(2,102))),new t(16,64,64,14,14,new xa(56,new da(2,140))),new t(17,72,72,16,16,new xa(36,new da(4,92))),new t(18,80,80,18,18,new xa(48,new da(4,114))),new t(19,88,88,20,20,new xa(56,new da(4,144))),new t(20,96,96,22,22,new xa(68,new da(4,174))),new t(21,104,104,24,24,new xa(56,new da(6,136))),new t(22,120,120,18,18,new xa(68,new da(6,175))),new t(23,132,132,20,20,new xa(62,new da(8,163))),new t(24,144,144,22,22,new xa(62,new da(8,156),new da(2,155))),new t(25,8,18,6,16,new xa(7,new da(1,5))),new t(26,8,32,6,14,new xa(11,new da(1,10))),new t(27,12,26,10,24,new xa(14,new da(1,16))),new t(28,12,36,10,16,new xa(18,new da(1,22))),new t(29,16,36,14,16,new xa(24,new da(1,32))),new t(30,16,48,14,22,new xa(28,new da(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),y5e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new jr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Vf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return v5e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,o)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&o&3&&!c)e[r++]=this.readCorner2(s,o)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(o&7)&&!u)e[r++]=this.readCorner3(s,o)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(s,o)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<o);if(r!==this.version.getTotalCodewords())throw new jr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new un("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/s|0,c=o*a,u=l*s,d=new Vf(u,c),f=0;f<o;++f)for(var A=f*a,h=0;h<l;++h)for(var m=h*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,x=A+p,y=0;y<s;++y){var b=h*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),dH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=dH(u),f=d.next();!f.done;f=d.next()){var A=f.value;c+=A.getCount()}}catch(Z){n={error:Z}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var h=new Array(c),m=0;try{for(var p=dH(u),g=p.next();!g.done;g=p.next())for(var A=g.value,x=0;x<A.getCount();x++){var y=A.getDataCodewords(),b=l.getECCodewords()+y;h[m++]=new t(y,new Uint8Array(b))}}catch(Z){s={error:Z}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}for(var w=h[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,x=0;x<I;x++)for(var S=0;S<m;S++)h[S].codewords[x]=e[_++];for(var E=r.getVersionNumber()===24,F=E?8:m,S=0;S<F;S++)h[S].codewords[j-1]=e[_++];for(var P=h[0].codewords.length,x=j;x<P;x++)for(var S=0;S<m;S++){var k=E?(S+8)%m:S,D=E&&k>7?x-1:x;h[k].codewords[D]=e[_++]}if(_!==e.length)throw new un;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Vre=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new un(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),zi;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(zi||(zi={}));var w5e=function(){function t(){}return t.decode=function(e){var r=new Vre(e),n=new kn,a=new kn,s=new Array,o=zi.ASCII_ENCODE;do if(o===zi.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case zi.C40_ENCODE:this.decodeC40Segment(r,n);break;case zi.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case zi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case zi.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case zi.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new jr}o=zi.ASCII_ENCODE}while(o!==zi.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new Wj(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new jr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),zi.ASCII_ENCODE;if(s===129)return zi.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return zi.C40_ENCODE;case 231:return zi.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return zi.ANSIX12_ENCODE;case 239:return zi.TEXT_ENCODE;case 240:return zi.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new jr;break}}while(e.available()>0);return zi.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new jr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new jr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new jr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new jr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new jr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new jr;break;default:throw new jr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new jr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new jr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new jr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(sd.decode(l,Jn.ISO88591))}catch(u){throw new jw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),N5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C5e=function(){function t(){this.rsDecoder=new Xj(_c.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new y5e(e),s=a.getVersion(),o=a.readCodewords(),l=b5e.getDataBlocks(o,s),c=0;try{for(var u=N5e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var A=new Uint8Array(c),h=l.length,m=0;m<h;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)A[y*h+m]=g[y]}return w5e.decode(A)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Di}for(var a=0;a<r;a++)e[a]=n[a]},t}(),_5e=function(){function t(e){this.image=e,this.rectangleDetector=new Mk(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Jt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(s,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,o,l,c);return new P6(u,[n,a,s,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new qr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new qr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=o,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new qr(s.getX()+(a.getX()-n.getX())/(o+1),s.getY()+(a.getY()-n.getY())/(o+1)),f=new qr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var A=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),h=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return A>h?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var A,h;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,o*4),A=t.shiftPoint(n,r,l*4),A=t.shiftPoint(A,a,o*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,o*4),h=t.shiftPoint(s,a,l*4),h=t.shiftPoint(h,r,o*4),[c,A,u,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,o,l){var c=B6.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=o,o=c}for(var u=Math.abs(s-n),d=Math.abs(o-a),f=-u/2,A=a<o?1:-1,h=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=h){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),f+=d,f>0){if(x===o)break;x+=A,f-=u}}return m},t}(),PS=function(){function t(){this.decoder=new C5e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(as.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var o=new _5e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new Ll(n.getText(),l,8*l.length,a,cn.DATA_MATRIX,ns.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(ol.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(ol.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Jt;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(o-s+1)/a;if(u<=0||d<=0)throw new Jt;var f=a/2;s+=f,l+=f;for(var A=new Vf(u,d),h=0;h<d;h++)for(var m=s+h*a,p=0;p<u;p++)e.get(l+p*a,m)&&A.set(p,h);return A},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Jt;var o=a-e[0];if(o===0)throw new Jt;return o},t.NO_POINTS=[],t}(),E5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){E5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new PS,r)||this}return e})(o1);var Qx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Qx||(Qx={}));var S5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new vi(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new un;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Qx.L,"L",1),t.M=new t(Qx.M,"M",0),t.Q=new t(Qx.Q,"Q",3),t.H=new t(Qx.H,"H",2),t}(),I5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hre=function(){function t(e){this.errorCorrectionLevel=S5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Ln.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=I5e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(o=u[1],s=f))}}catch(A){n={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),j5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=j5e(a),o=s.next();!o.done;o=s.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ze=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),P5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ep=function(){function t(e,r){for(var n,a,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=P5e(u),f=d.next();!f.done;f=d.next()){var A=f.value;l+=A.getCount()*(A.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new jr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new jr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new un;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var o=Hre.numBitsDiffering(e,s);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Vf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ut(7,new Ze(1,19)),new Ut(10,new Ze(1,16)),new Ut(13,new Ze(1,13)),new Ut(17,new Ze(1,9))),new t(2,Int32Array.from([6,18]),new Ut(10,new Ze(1,34)),new Ut(16,new Ze(1,28)),new Ut(22,new Ze(1,22)),new Ut(28,new Ze(1,16))),new t(3,Int32Array.from([6,22]),new Ut(15,new Ze(1,55)),new Ut(26,new Ze(1,44)),new Ut(18,new Ze(2,17)),new Ut(22,new Ze(2,13))),new t(4,Int32Array.from([6,26]),new Ut(20,new Ze(1,80)),new Ut(18,new Ze(2,32)),new Ut(26,new Ze(2,24)),new Ut(16,new Ze(4,9))),new t(5,Int32Array.from([6,30]),new Ut(26,new Ze(1,108)),new Ut(24,new Ze(2,43)),new Ut(18,new Ze(2,15),new Ze(2,16)),new Ut(22,new Ze(2,11),new Ze(2,12))),new t(6,Int32Array.from([6,34]),new Ut(18,new Ze(2,68)),new Ut(16,new Ze(4,27)),new Ut(24,new Ze(4,19)),new Ut(28,new Ze(4,15))),new t(7,Int32Array.from([6,22,38]),new Ut(20,new Ze(2,78)),new Ut(18,new Ze(4,31)),new Ut(18,new Ze(2,14),new Ze(4,15)),new Ut(26,new Ze(4,13),new Ze(1,14))),new t(8,Int32Array.from([6,24,42]),new Ut(24,new Ze(2,97)),new Ut(22,new Ze(2,38),new Ze(2,39)),new Ut(22,new Ze(4,18),new Ze(2,19)),new Ut(26,new Ze(4,14),new Ze(2,15))),new t(9,Int32Array.from([6,26,46]),new Ut(30,new Ze(2,116)),new Ut(22,new Ze(3,36),new Ze(2,37)),new Ut(20,new Ze(4,16),new Ze(4,17)),new Ut(24,new Ze(4,12),new Ze(4,13))),new t(10,Int32Array.from([6,28,50]),new Ut(18,new Ze(2,68),new Ze(2,69)),new Ut(26,new Ze(4,43),new Ze(1,44)),new Ut(24,new Ze(6,19),new Ze(2,20)),new Ut(28,new Ze(6,15),new Ze(2,16))),new t(11,Int32Array.from([6,30,54]),new Ut(20,new Ze(4,81)),new Ut(30,new Ze(1,50),new Ze(4,51)),new Ut(28,new Ze(4,22),new Ze(4,23)),new Ut(24,new Ze(3,12),new Ze(8,13))),new t(12,Int32Array.from([6,32,58]),new Ut(24,new Ze(2,92),new Ze(2,93)),new Ut(22,new Ze(6,36),new Ze(2,37)),new Ut(26,new Ze(4,20),new Ze(6,21)),new Ut(28,new Ze(7,14),new Ze(4,15))),new t(13,Int32Array.from([6,34,62]),new Ut(26,new Ze(4,107)),new Ut(22,new Ze(8,37),new Ze(1,38)),new Ut(24,new Ze(8,20),new Ze(4,21)),new Ut(22,new Ze(12,11),new Ze(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ut(30,new Ze(3,115),new Ze(1,116)),new Ut(24,new Ze(4,40),new Ze(5,41)),new Ut(20,new Ze(11,16),new Ze(5,17)),new Ut(24,new Ze(11,12),new Ze(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ut(22,new Ze(5,87),new Ze(1,88)),new Ut(24,new Ze(5,41),new Ze(5,42)),new Ut(30,new Ze(5,24),new Ze(7,25)),new Ut(24,new Ze(11,12),new Ze(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ut(24,new Ze(5,98),new Ze(1,99)),new Ut(28,new Ze(7,45),new Ze(3,46)),new Ut(24,new Ze(15,19),new Ze(2,20)),new Ut(30,new Ze(3,15),new Ze(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ut(28,new Ze(1,107),new Ze(5,108)),new Ut(28,new Ze(10,46),new Ze(1,47)),new Ut(28,new Ze(1,22),new Ze(15,23)),new Ut(28,new Ze(2,14),new Ze(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ut(30,new Ze(5,120),new Ze(1,121)),new Ut(26,new Ze(9,43),new Ze(4,44)),new Ut(28,new Ze(17,22),new Ze(1,23)),new Ut(28,new Ze(2,14),new Ze(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ut(28,new Ze(3,113),new Ze(4,114)),new Ut(26,new Ze(3,44),new Ze(11,45)),new Ut(26,new Ze(17,21),new Ze(4,22)),new Ut(26,new Ze(9,13),new Ze(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ut(28,new Ze(3,107),new Ze(5,108)),new Ut(26,new Ze(3,41),new Ze(13,42)),new Ut(30,new Ze(15,24),new Ze(5,25)),new Ut(28,new Ze(15,15),new Ze(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ut(28,new Ze(4,116),new Ze(4,117)),new Ut(26,new Ze(17,42)),new Ut(28,new Ze(17,22),new Ze(6,23)),new Ut(30,new Ze(19,16),new Ze(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ut(28,new Ze(2,111),new Ze(7,112)),new Ut(28,new Ze(17,46)),new Ut(30,new Ze(7,24),new Ze(16,25)),new Ut(24,new Ze(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ut(30,new Ze(4,121),new Ze(5,122)),new Ut(28,new Ze(4,47),new Ze(14,48)),new Ut(30,new Ze(11,24),new Ze(14,25)),new Ut(30,new Ze(16,15),new Ze(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ut(30,new Ze(6,117),new Ze(4,118)),new Ut(28,new Ze(6,45),new Ze(14,46)),new Ut(30,new Ze(11,24),new Ze(16,25)),new Ut(30,new Ze(30,16),new Ze(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ut(26,new Ze(8,106),new Ze(4,107)),new Ut(28,new Ze(8,47),new Ze(13,48)),new Ut(30,new Ze(7,24),new Ze(22,25)),new Ut(30,new Ze(22,15),new Ze(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ut(28,new Ze(10,114),new Ze(2,115)),new Ut(28,new Ze(19,46),new Ze(4,47)),new Ut(28,new Ze(28,22),new Ze(6,23)),new Ut(30,new Ze(33,16),new Ze(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ut(30,new Ze(8,122),new Ze(4,123)),new Ut(28,new Ze(22,45),new Ze(3,46)),new Ut(30,new Ze(8,23),new Ze(26,24)),new Ut(30,new Ze(12,15),new Ze(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ut(30,new Ze(3,117),new Ze(10,118)),new Ut(28,new Ze(3,45),new Ze(23,46)),new Ut(30,new Ze(4,24),new Ze(31,25)),new Ut(30,new Ze(11,15),new Ze(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ut(30,new Ze(7,116),new Ze(7,117)),new Ut(28,new Ze(21,45),new Ze(7,46)),new Ut(30,new Ze(1,23),new Ze(37,24)),new Ut(30,new Ze(19,15),new Ze(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ut(30,new Ze(5,115),new Ze(10,116)),new Ut(28,new Ze(19,47),new Ze(10,48)),new Ut(30,new Ze(15,24),new Ze(25,25)),new Ut(30,new Ze(23,15),new Ze(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ut(30,new Ze(13,115),new Ze(3,116)),new Ut(28,new Ze(2,46),new Ze(29,47)),new Ut(30,new Ze(42,24),new Ze(1,25)),new Ut(30,new Ze(23,15),new Ze(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ut(30,new Ze(17,115)),new Ut(28,new Ze(10,46),new Ze(23,47)),new Ut(30,new Ze(10,24),new Ze(35,25)),new Ut(30,new Ze(19,15),new Ze(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ut(30,new Ze(17,115),new Ze(1,116)),new Ut(28,new Ze(14,46),new Ze(21,47)),new Ut(30,new Ze(29,24),new Ze(19,25)),new Ut(30,new Ze(11,15),new Ze(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ut(30,new Ze(13,115),new Ze(6,116)),new Ut(28,new Ze(14,46),new Ze(23,47)),new Ut(30,new Ze(44,24),new Ze(7,25)),new Ut(30,new Ze(59,16),new Ze(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ut(30,new Ze(12,121),new Ze(7,122)),new Ut(28,new Ze(12,47),new Ze(26,48)),new Ut(30,new Ze(39,24),new Ze(14,25)),new Ut(30,new Ze(22,15),new Ze(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ut(30,new Ze(6,121),new Ze(14,122)),new Ut(28,new Ze(6,47),new Ze(34,48)),new Ut(30,new Ze(46,24),new Ze(10,25)),new Ut(30,new Ze(2,15),new Ze(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ut(30,new Ze(17,122),new Ze(4,123)),new Ut(28,new Ze(29,46),new Ze(14,47)),new Ut(30,new Ze(49,24),new Ze(10,25)),new Ut(30,new Ze(24,15),new Ze(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ut(30,new Ze(4,122),new Ze(18,123)),new Ut(28,new Ze(13,46),new Ze(32,47)),new Ut(30,new Ze(48,24),new Ze(14,25)),new Ut(30,new Ze(42,15),new Ze(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ut(30,new Ze(20,117),new Ze(4,118)),new Ut(28,new Ze(40,47),new Ze(7,48)),new Ut(30,new Ze(43,24),new Ze(22,25)),new Ut(30,new Ze(10,15),new Ze(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ut(30,new Ze(19,118),new Ze(6,119)),new Ut(28,new Ze(18,47),new Ze(31,48)),new Ut(30,new Ze(34,24),new Ze(34,25)),new Ut(30,new Ze(20,15),new Ze(61,16)))],t}(),bo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(bo||(bo={}));var fH=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[bo.DATA_MASK_000,new t(bo.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[bo.DATA_MASK_001,new t(bo.DATA_MASK_001,function(e,r){return(e&1)===0})],[bo.DATA_MASK_010,new t(bo.DATA_MASK_010,function(e,r){return r%3===0})],[bo.DATA_MASK_011,new t(bo.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[bo.DATA_MASK_100,new t(bo.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[bo.DATA_MASK_101,new t(bo.DATA_MASK_101,function(e,r){return e*r%6===0})],[bo.DATA_MASK_110,new t(bo.DATA_MASK_110,function(e,r){return e*r%6<3})],[bo.DATA_MASK_111,new t(bo.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),B5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new jr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,o=a-7,n=a-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Hre.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new jr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Ep.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,s,n);var l=Ep.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=a;s--)n=this.copyBit(o,s,n);if(l=Ep.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new jr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=fH.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var A=0;A<a;A++)for(var h=o?a-1-A:A,m=0;m<2;m++)s.get(f-m,h)||(d++,u<<=1,this.bitMatrix.get(f-m,h)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new jr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=fH.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),hH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,o,l;if(e.length!==r.getTotalCodewords())throw new un;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=hH(d),A=f.next();!A.done;A=f.next()){var h=A.value;u+=h.getCount()}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=hH(d),x=g.next();!x.done;x=g.next())for(var h=x.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){o={error:D}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var S=j-c.getECCodewordsPerBlock(),E=0,y=0;y<S;y++)for(var F=0;F<p;F++)m[F].codewords[y]=e[E++];for(var F=I;F<p;F++)m[F].codewords[S]=e[E++];for(var P=m[0].codewords.length,y=S;y<P;y++)for(var F=0;F<p;F++){var k=F<I?y:y+1;m[F].codewords[k]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Vu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Vu||(Vu={}));var cs=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new un;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Vu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Vu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Vu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Vu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Vu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Vu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Vu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Vu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Vu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Vu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),k5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new Vre(e),o=new kn,l=new Array,c=-1,u=-1;try{var d=null,f=!1,A=void 0;do{if(s.available()<4)A=cs.TERMINATOR;else{var h=s.readBits(4);A=cs.forBits(h)}switch(A){case cs.TERMINATOR:break;case cs.FNC1_FIRST_POSITION:case cs.FNC1_SECOND_POSITION:f=!0;break;case cs.STRUCTURED_APPEND:if(s.available()<16)throw new jr;c=s.readBits(8),u=s.readBits(8);break;case cs.ECI:var m=t.parseECIValue(s);if(d=no.getCharacterSetECIByValue(m),d===null)throw new jr;break;case cs.HANZI:var p=s.readBits(4),g=s.readBits(A.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,g);break;default:var x=s.readBits(A.getCharacterCountBits(r));switch(A){case cs.NUMERIC:t.decodeNumericSegment(s,o,x);break;case cs.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,x,f);break;case cs.BYTE:t.decodeByteSegment(s,o,x,d,l,a);break;case cs.KANJI:t.decodeKanjiSegment(s,o,x);break;default:throw new jr}break}}while(A!==cs.TERMINATOR)}catch{throw new jr}return new Wj(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new jr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(sd.decode(a,Jn.GB2312))}catch(c){throw new jr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new jr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(sd.decode(a,Jn.SHIFT_JIS))}catch(c){throw new jr(c)}},t.decodeByteSegment=function(e,r,n,a,s,o){if(8*n>e.available())throw new jr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Jn.guessEncoding(l,o):u=a.getName();try{r.append(sd.decode(l,u))}catch(d){throw new jr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new jr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new jr;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new jr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new jr;var a=e.readBits(10);if(a>=1e3)throw new jr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new jr;var s=e.readBits(7);if(s>=100)throw new jr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new jr;var o=e.readBits(4);if(o>=10)throw new jr;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new jr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),$re=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),AH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F5e=function(){function t(){this.rsDecoder=new Xj(_c.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Vf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new B5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new $re(!0)),s}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=T5e.getDataBlocks(u,l,c),f=0;try{for(var A=AH(d),h=A.next();!h.done;h=A.next()){var m=h.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{h&&!h.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var x=AH(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[g++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}return k5e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Di}for(var a=0;a<r;a++)e[a]=n[a]},t}(),O5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D5e=function(t){O5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,o,l)},e}(qr),R5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M5e=function(){function t(e,r,n,a,s,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,d);if(A!==null)return A}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Jt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,o=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=R5e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.aboutEquals(u,c,l))return A.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var h=new D5e(l,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),L5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U5e=function(t){L5e(e,t);function e(r,n,a,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,o=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(o,l,c,s)},e}(qr),Q5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),uy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V5e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(as.TRY_HARDER)!==void 0,n=e!=null&&e.get(as.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),o=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,A=0;A<o;A++)if(a.get(A,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,A,n);if(h===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,A=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,o,n);h===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return qr.orderBestPatterns(p),new Q5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)s[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=c||r+o>=u||s[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,o=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,o=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],s),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,A=d.length;f<A;f++){var h=d[f];if(h.aboutEquals(c,l,o)){d[f]=h.combineEstimate(l,o,c),u=!0;break}}if(!u){var m=new U5e(o,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=uy(this.possibleCenters),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,o=0,l=this.possibleCenters.length;try{for(var c=uy(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/l,A=0;try{for(var h=uy(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;A+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return A<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Jt;var o=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=uy(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value,h=A.getEstimatedModuleSize();c+=h,u+=h*h}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);o.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),S=Math.abs(j.getEstimatedModuleSize()-l);return _<S?-1:_>S?1:0});for(var p=Math.max(.2*l,m),g=0;g<o.length&&o.length>3;g++){var x=o[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(o.splice(g,1),g--)}}if(o.length>3){var c=0;try{for(var y=uy(o),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(I,_){if(_.getCount()===I.getCount()){var S=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return S<E?1:S>E?-1:0}else return _.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),H5e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(as.NEED_RESULT_POINT_CALLBACK);var r=new V5e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Jt("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,s),l=Ep.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),A=1-3/c,h=Math.floor(r.getX()+A*(d-r.getX())),m=Math.floor(r.getY()+A*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,h,m,p);break}catch(b){if(!(b instanceof Jt))throw b}var g=t.createTransform(r,n,a,u,o),x=t.sampleGrid(this.image,g,o),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new P6(x,y)},t.createTransform=function(e,r,n,a,s){var o=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,d=o),Mre.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=B6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=ia.round(qr.distance(e,r)/a),o=ia.round(qr.distance(e,n)/a),l=Math.floor((s+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Jt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,A=0,h=n+d,m=e,p=r;m!==h;m+=d){var g=s?p:m,x=s?m:p;if(A===1===this.image.get(g,x)){if(A===2)return ia.distance(m,p,e,r);A++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return A===2?ia.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),o=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-o<e*3)throw new Jt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Jt("Alignment bottom exceeds estimated module size.");var d=new M5e(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return d.find()},t}(),BS=function(){function t(){this.decoder=new F5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(as.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var o=new H5e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof $re&&n.getOther().applyMirroredCorrection(a);var l=new Ll(n.getText(),n.getRawBytes(),void 0,a,cn.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(ol.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(ol.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(ol.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(ol.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Jt;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||s>=o)throw new Jt;if(o-s!==c-l&&(c=l+(o-s),c>=e.getWidth()))throw new Jt;var u=Math.round((c-l+1)/a),d=Math.round((o-s+1)/a);if(u<=0||d<=0)throw new Jt;if(d!==u)throw new Jt;var f=Math.floor(a/2);s+=f,l+=f;var A=l+Math.floor((u-1)*a)-c;if(A>0){if(A>f)throw new Jt;l-=A}var h=s+Math.floor((d-1)*a)-o;if(h>0){if(h>f)throw new Jt;s-=h}for(var m=new Vf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],o=e[1],l=!0,c=0;s<a&&o<n;){if(l!==r.get(s,o)){if(++c===5)break;l=!l}s++,o++}if(s===a||o===n)throw new Jt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),$5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ea=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ia.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var o=$5e(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=ao.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),G5e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),K5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q5e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new G5e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,K5e(s)),f=d.next();!f.done;f=d.next()){var A=f.value;A[1]!=null&&(o=Math.trunc(Math.max(o,A[1].getY()))),A[3]!=null&&(o=Math.max(o,Math.trunc(A[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,o,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,o,u);if(f!=null)d=f;else{a++;break}}l[0]=new qr(d[0],a),l[1]=new qr(d[1],a),c=!0;break}}var A=a+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);A<r;A++){var d=t.findGuardPattern(e,f[0],A,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}A-=h+1,l[2]=new qr(f[0],A),l[3]=new qr(f[1],A)}return A-a<t.BARCODE_MIN_HEIGHT&&ao.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,o,l){ao.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,A=o.length,h=s;d<a;d++){var m=e.get(d,n);if(m!==h)l[f]++;else{if(f===A-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],ns.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,h=!h}}return f===A-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return 1/0;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return 1/0;u+=h}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),z5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fp=function(){function t(e,r){if(r.length===0)throw new un;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),ns.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=z5e(this.coefficients),o=s.next();!o.done;o=s.next()){var l=o.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new un("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ns.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=this.field.add(r[l-o],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new un("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new un("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new un;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new kn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),W5e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new un;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Rre;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),X5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y5e=function(t){X5e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)a.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new fp(a,new Int32Array([0])),a.one=new fp(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new un;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new fp(this,a)},e.PDF417_GF=new e(ea.NUMBER_OF_CODEWORDS,3),e}(W5e),J5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z5e=function(){function t(){this.field=Y5e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,o=new fp(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var A=J5e(n),h=A.next();!h.done;h=A.next()){var m=h.value,p=this.field.exp(e.length-1-m),g=new fp(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(S){a={error:S}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}for(var x=new fp(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw Di.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=o,l=c,s.isZero())throw Di.getChecksumInstance();o=u;for(var f=this.field.getZero(),A=s.getCoefficient(s.getDegree()),h=this.field.inverse(A);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(m,p)),o=o.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw Di.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=o.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw Di.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),o=1;o<=a;o++)s[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new fp(this.field,s),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),A=this.field.inverse(l.evaluateAt(d));u[o]=this.field.multiply(f,A)}return u},t}(),Uk=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var o=r==null||n==null,l=a==null||s==null;if(o&&l)throw new Jt;o?(r=new qr(0,a.getY()),n=new qr(0,s.getY())):l&&(a=new qr(e.getWidth()-1,r.getY()),s=new qr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new qr(c.getX(),u);n?a=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,A=Math.trunc(f.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var h=new qr(f.getX(),A);n?s=h:l=h}return new t(this.image,a,s,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),eBe=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),k6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var A=d?parseInt(d.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(o);break;case"p":h=parseFloat(r[n]).toPrecision(o);break;case"e":h=parseFloat(r[n]).toExponential(o);break;case"x":h=parseInt(r[n]).toString(A||16);break;case"d":h=parseFloat(parseInt(r[n],A||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(A);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";h.length<m;)h=l!==void 0?h+p:p+h;return h}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),tBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gre=function(){function t(e){this.boundingBox=new Uk(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new k6,a=0;try{for(var s=tBe(this.codewords),o=s.next();!o.done;o=s.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),rBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Qy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,A){var h={getKey:function(){return f},getValue:function(){return A}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=rBe(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=nBe(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return ea.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),aBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mH=function(t){aBe(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=g5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,A=l;A<c;A++)if(n[A]!=null){var h=n[A],m=h.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=h.getRowNumber();else if(m<0||h.getRowNumber()>=r.getRowCount()||m>A)n[A]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=A,x=1;x<=p&&!g;x++)g=n[A-x]!=null;g?n[A]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var o=g5(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=o;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var A=f.getRowNumber()-u;A===0||(A===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new Qy,o=new Qy,l=new Qy,c=new Qy;try{for(var u=g5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var A=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(A*3+1);break;case 1:c.setValue(A/3),l.setValue(A%3);break;case 2:s.setValue(A+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ea.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ea.MAX_ROWS_IN_BARCODE)return null;var m=new eBe(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var o=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Gre),sBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iBe=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ea.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=sBe(u),f=d.next();!f.done;f=d.next()){var A=f.value;if(t.adjustRowNumber(o,A))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new k6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),oBe=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),lBe=function(){function t(){}return t.initialize=function(){for(var e=0;e<ea.SYMBOL_TABLE.length;e++)for(var r=ea.SYMBOL_TABLE[e],n=r&1,a=0;a<ea.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ea.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ea.BARS_IN_MODULE-a-1]=Math.fround(s/ea.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ia.sum(e),n=new Int32Array(ea.BARS_IN_MODULE),a=0,s=0,o=0;o<ea.MODULES_IN_CODEWORD;o++){var l=r/(2*ea.MODULES_IN_CODEWORD)+o*r/ea.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return ea.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ia.sum(e),n=new Array(ea.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Rk.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<ea.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,o=ea.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ea.SYMBOL_TABLE.length).map(function(e){return new Array(ea.BARS_IN_MODULE)}),t}(),cBe=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),pH=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),uBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dBe=function(t){uBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Oc),fBe=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new dBe;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new j6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),hBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ABe=function(t){hBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Oc),mBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pBe=function(t){mBe(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new un("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new ABe;a=Ln.MAX_VALUE}this.buf=ao.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new j6;this.ensureCapacity(this.count+a),ns.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ao.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(fBe),Ra;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ra||(Ra={}));function Kre(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var UC;function d0(t){if(typeof UC>"u"&&(UC=Kre()),UC===null)throw new Error("BigInt is not supported!");return UC(t)}function gBe(){var t=[];t[0]=d0(1);var e=d0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var xBe=function(){function t(){}return t.decode=function(e,r){var n=new kn(""),a=no.ISO8859_1;n.enableDecoding(a);for(var s=1,o=e[s++],l=new cBe;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:no.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new jr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw jr.getFormatInstance()}if(n.length()===0)throw jr.getFormatInstance();var c=new Wj(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw jr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Ln.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new kn;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new kn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new kn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new kn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new kn;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Ln.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new kn;r=t.numericCompaction(e,r+1,A),n.setTimestamp(pH.parseLong(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new kn;r=t.numericCompaction(e,r+1,h),n.setChecksum(Ln.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new kn;r=t.numericCompaction(e,r+1,m),n.setFileSize(pH.parseLong(m.toString()));break;default:throw jr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw jr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(ao.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[o]=c,o++;break}}return t.decodeTextCompaction(a,s,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Ra.ALPHA,o=Ra.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Ra.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Ra.LOWER;break;case t.ML:s=Ra.MIXED;break;case t.PS:o=s,s=Ra.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break;case Ra.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=s,s=Ra.ALPHA_SHIFT;break;case t.ML:s=Ra.MIXED;break;case t.PS:o=s,s=Ra.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break;case Ra.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Ra.PUNCT;break;case 26:u=" ";break;case t.LL:s=Ra.LOWER;break;case t.AL:s=Ra.ALPHA;break;case t.PS:o=s,s=Ra.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break;case Ra.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ra.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break;case Ra.ALPHA_SHIFT:if(s=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break;case Ra.PUNCT_SHIFT:if(s=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ra.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ra.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var o=new pBe,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(d0(c)>>d0(8*(5-A))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var h=0;h<l;h++)o.write(d[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(d0(c)>>d0(8*(5-A))));c=0,l=0}}break}return s.append(sd.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=d0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*d0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new jr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Kre()?gBe():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),dy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vBe=function(){function t(){}return t.decode=function(e,r,n,a,s,o,l){for(var c=new Uk(e,r,n,a,s),u=null,d=null,f,A=!0;;A=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,o,l)),f=t.merge(u,d),f==null)throw Jt.getNotFoundInstance();var h=f.getBoundingBox();if(A&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new mH(c,x===0):y=new Gre(c),f.setDetectionResultColumn(x,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,x,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,o,l);I!=null&&(y.setCodeword(j,I),w=b,o=Math.min(o,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Uk.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new iBe(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),o=0;try{for(var l=dy(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=s-u,u>0)break}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var A=0,f=a.length-1;f>=0&&(A+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;A>0&&d[f]==null;f--)A--;return e.getBoundingBox().addMissingRows(o,A,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=dy(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,o){for(var l=new mH(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var A=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,o);A!=null&&(l.setCodeword(f,A),a?d=A.getStartX():d=A.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>ea.MAX_CODEWORDS_IN_BARCODE)throw Jt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(o.push(d),s.push(u))}for(var f=new Array(s.length),A=0;A<f.length;A++)f[A]=s[A];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,ea.toIntArray(n),ea.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=s[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof Di;if(!u)throw d}if(o.length===0)throw Di.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<s[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Di.getChecksumInstance()}throw Di.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Qy;var u=0;try{for(var d=dy(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)try{for(var h=(a=void 0,dy(A.getCodewords())),m=h.next();!m.done;m=h.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,dy(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)return(a?A.getEndX():A.getStartX())+l*u*(A.getEndX()-A.getStartX())}}catch(h){s={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,o,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,o);var u=t.getModuleBitCount(e,r,n,a,s,o);if(u==null)return null;var d,f=ia.sum(u);if(a)d=s+f;else{for(var A=0;A<u.length/2;A++){var h=u[A];u[A]=u[u.length-1-A],u[u.length-1-A]=h}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=lBe.getDecodedValue(u),p=ea.getCodeword(m);return p===-1?null:new oBe(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,o){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,o){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw jr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=xBe.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Di.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw jr.getFormatInstance();var n=e[0];if(n>e.length)throw jr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw jr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new k6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Z5e,t}(),yBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Jt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof jr||n instanceof Di?Jt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,o=new Array,l=q5e.detectMultiple(e,r,n);try{for(var c=yBe(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=vBe.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),A=new Ll(f.getText(),f.getRawBytes(),void 0,d,cn.PDF_417);A.putMetadata(ol.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&A.putMetadata(ol.PDF417_EXTRA_METADATA,h),o.push(A)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Ln.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ea.MODULES_IN_CODEWORD/ea.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ea.MODULES_IN_CODEWORD/ea.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ea.MODULES_IN_CODEWORD/ea.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ea.MODULES_IN_CODEWORD/ea.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),bBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gH=function(t){bBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Oc),xH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qre=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(as.TRY_HARDER)!==void 0,n=e==null?null:e.get(as.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(o){return o===cn.UPC_A||o===cn.UPC_E||o===cn.EAN_13||o===cn.EAN_8||o===cn.CODABAR||o===cn.CODE_39||o===cn.CODE_93||o===cn.CODE_128||o===cn.ITF||o===cn.RSS_14||o===cn.RSS_EXPANDED});s&&!r&&a.push(new Ux(e)),n.includes(cn.QR_CODE)&&a.push(new BS),n.includes(cn.DATA_MATRIX)&&a.push(new PS),n.includes(cn.AZTEC)&&a.push(new IS),n.includes(cn.PDF_417)&&a.push(new TS),s&&r&&a.push(new Ux(e))}a.length===0&&(r||a.push(new Ux(e)),a.push(new BS),a.push(new PS),a.push(new IS),a.push(new TS),r&&a.push(new Ux(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=xH(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new gH("No readers where selected, nothing can be read.");try{for(var a=xH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof gH)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Jt("No MultiFormat Readers were able to detect the code.")},t}(),wBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){wBe(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new qre;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(o1);var NBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){NBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new TS,r)||this}return e})(o1);var CBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){CBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new BS,r)||this}return e})(o1);var Qk;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Qk||(Qk={}));const QC=Qk;var zre=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new W0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var o=n.multiply(new W0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new un("No error correction bytes");var n=e.length-r;if(n<=0)throw new un("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);ns.arraycopy(e,0,s,0,n);var o=new W0(this.field,s);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;ns.arraycopy(c,0,e,n+u,c.length)},t}(),Vy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<s&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new un("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?o[l][d]:o[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),_Be=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EBe=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=_Be(this.bytes),s=a.next();!s.done;s=a.next()){var o=s.value;ao.fill(o,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new kn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,o=this.width;s<o;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Vk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new kn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),SBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ls=function(t){SBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Oc),vH=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Bo;t.makeTypeInfoBits(e,r,a);for(var s=0,o=a.getSize();s<o;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,A=8;n.setBoolean(f,A,l)}else{var f=8,A=n.getHeight()-7+(s-8);n.setBoolean(f,A,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Bo;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Vy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,o-=2}if(a!==e.getSize())throw new ls("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Ln.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new un("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Vk.isValidMaskPattern(r))throw new ls("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new Bo;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new ls("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new ls("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ls;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new ls;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new ls;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=a.length;s!==o;s++){var l=a[s];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),IBe=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),yH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Vy.applyMaskPenaltyRule1(e)+Vy.applyMaskPenaltyRule2(e)+Vy.applyMaskPenaltyRule3(e)+Vy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(QC.CHARACTER_SET)!==void 0;s&&(a=n.get(QC.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new Bo;if(o===cs.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=no.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new Bo;this.appendBytes(e,o,u,a);var d;if(n!==null&&n.get(QC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(QC.QR_VERSION).toString(),10);d=Ep.getVersionForNumber(f);var A=this.calculateBitsNeeded(o,l,u,d);if(!this.willFit(A,d,r))throw new ls("Data too big for requested version")}else d=this.recommendVersion(r,o,l,u);var h=new Bo;h.appendBitArray(l);var m=o===cs.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,h),h.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,h);var x=this.interleaveWithECBytes(h,d.getTotalCodewords(),g,p.getNumBlocks()),y=new Vk;y.setECLevel(r),y.setMode(o),y.setVersion(d);var b=d.getDimensionForVersion(),w=new EBe(b,b),j=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(j),vH.buildMatrix(x,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Ep.getVersionForNumber(1)),o=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),no.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return cs.KANJI;for(var n=!1,a=!1,s=0,o=e.length;s<o;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return cs.BYTE}return a?cs.ALPHANUMERIC:n?cs.NUMERIC:cs.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=sd.encode(e,no.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Vk.NUM_MASK_PATTERNS;l++){vH.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Ep.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new ls("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new ls("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new ls("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,o){if(a>=n)throw new ls("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),A=f+1,h=u-f,m=d-A;if(h!==m)throw new ls("EC bytes mismatch");if(n!==c+l)throw new ls("RS blocks mismatch");if(e!==(f+h)*c+(A+m)*l)throw new ls("Total bytes mismatch");a<c?(s[0]=f,o[0]=h):(s[0]=A,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,o,l,c;if(e.getSizeInBytes()!==n)throw new ls("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,A=new Array,h=0;h<a;++h){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,h,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);A.push(new IBe(x,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new ls("Data bytes does not match offset");for(var b=new Bo,h=0;h<d;++h)try{for(var w=(s=void 0,yH(A)),j=w.next();!j.done;j=w.next()){var I=j.value,x=I.getDataBytes();h<x.length&&b.appendBits(x[h],8)}}catch(F){s={error:F}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var h=0;h<f;++h)try{for(var _=(l=void 0,yH(A)),S=_.next();!S.done;S=_.next()){var I=S.value,y=I.getErrorCorrectionBytes();h<y.length&&b.appendBits(y[h],8)}}catch(F){l={error:F}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new ls("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new zre(_c.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=a[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new ls(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case cs.NUMERIC:t.appendNumericBytes(e,n);break;case cs.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case cs.BYTE:t.append8BitBytes(e,n,a);break;case cs.KANJI:t.appendKanjiBytes(e,n);break;default:throw new ls("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(s*10+o,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new ls;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new ls;r.appendBits(s*45+o,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=sd.encode(e,n)}catch(c){throw new ls(c)}for(var s=0,o=a.length;s!==o;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=sd.encode(e,no.SJIS)}catch(f){throw new ls(f)}for(var a=n.length,s=0;s<a;s+=2){var o=n[s]&255,l=n[s+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new ls("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(cs.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=no.UTF8.getName(),t})();var jBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){jBe(e,t);function e(r,n,a,s,o,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=o,s+l>n||o+c>a)throw new un("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new un("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ns.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ns.arraycopy(this.yuvData,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ns.arraycopy(this.yuvData,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new zj(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Iw);var PBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){PBe(e,t);function e(r,n,a,s,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),A=0;A<d;A++){var h=r[A],m=h>>16&255,p=h>>7&510,g=h&255;f[A]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new un("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new un("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ns.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ns.arraycopy(this.luminances,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ns.arraycopy(this.luminances,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new zj(this)},e})(Iw);var BBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TBe=function(t){BBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(no),kBe=function(){function t(){}return t.ISO_8859_1=no.ISO8859_1,t}(),Hk,FBe=301,OBe=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=FBe);return{LOG:t,ALOG:e}};Hk=OBe([],[]),Hk.LOG;Hk.ALOG;var bH;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(bH||(bH={}));var wH=129,Wre=230,DBe=231,RBe=235,MBe=236,LBe=237,UBe=238,QBe=239,VBe=240,x5=254,HBe=254,NH="[)>05",CH="[)>06",_H="",Ea=0,Xo=1,Wl=2,Wi=3,Co=4,_l=5,$Be=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ea},t.prototype.encode=function(e){var r=Ld.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Ld.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case _l:e.writeCodeword(DBe),e.signalEncoderChange(_l);return;case Xo:e.writeCodeword(Wre),e.signalEncoderChange(Xo);return;case Wi:e.writeCodeword(UBe),e.signalEncoderChange(Wi);break;case Wl:e.writeCodeword(QBe),e.signalEncoderChange(Wl);break;case Co:e.writeCodeword(VBe),e.signalEncoderChange(Co);break;default:throw new Error("Illegal mode: "+a)}else Ld.isExtendedASCII(n)?(e.writeCodeword(RBe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ld.isDigit(e)&&Ld.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),GBe=function(){function t(){}return t.prototype.getEncodingMode=function(){return _l},t.prototype.encode=function(e){var r=new kn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Ld.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ea);break}}var s=r.length()-1,o=1,l=e.getCodewordCount()+s+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Jn.getCharAt(s));else if(s<=1555)r.setCharAt(0,Jn.getCharAt(Math.floor(s/250)+249)),r.insert(1,Jn.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),F6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Xo},t.prototype.encodeMaximal=function(e){for(var r=new kn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(Wre),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new kn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new kn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Ld.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Ea);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),o=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(x5)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(x5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(x5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ea)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new kn;return s.append(n),s.append(a),s.toString()},t}(),KBe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Co},t.prototype.encode=function(e){for(var r=new kn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var o=Ld.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Ea);break}}}r.append(Jn.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Ea)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Jn.getCharAt(e-64)):Ld.illegalCharacter(Jn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+o,c=l>>16&255,u=l>>8&255,d=l&255,f=new kn;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),qBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ha=function(){function t(e,r,n,a,s,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=zBe(XBe),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),WBe=function(t){qBe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(ha),XBe=[new ha(!1,3,5,8,8,1),new ha(!1,5,7,10,10,1),new ha(!0,5,7,16,6,1),new ha(!1,8,10,12,12,1),new ha(!0,10,11,14,6,2),new ha(!1,12,12,14,14,1),new ha(!0,16,14,24,10,1),new ha(!1,18,14,16,16,1),new ha(!1,22,18,18,18,1),new ha(!0,22,18,16,10,2),new ha(!1,30,20,20,20,1),new ha(!0,32,24,16,14,2),new ha(!1,36,24,22,22,1),new ha(!1,44,28,24,24,1),new ha(!0,49,28,22,14,2),new ha(!1,62,36,14,14,4),new ha(!1,86,42,16,16,4),new ha(!1,114,48,18,18,4),new ha(!1,144,56,20,20,4),new ha(!1,174,68,22,22,4),new ha(!1,204,84,24,24,4,102,42),new ha(!1,280,112,14,14,16,140,56),new ha(!1,368,144,16,16,16,92,36),new ha(!1,456,192,18,18,16,114,48),new ha(!1,576,224,20,20,16,144,56),new ha(!1,696,272,22,22,16,174,68),new ha(!1,816,336,24,24,16,136,56),new ha(!1,1050,408,18,18,36,175,68),new ha(!1,1304,496,20,20,36,163,62),new WBe],YBe=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new kn,a=0,s=r.length;a<s;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new kn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ha.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),JBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZBe=function(t){JBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Wi},e.prototype.encode=function(r){for(var n=new kn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var o=Ld.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Ea);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Ld.illegalCharacter(Jn.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(HBe),r.getNewEncoding()<0&&r.signalEncoderChange(Ea)},e}(F6),eTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tTe=function(t){eTe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Wl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(F6),Ld=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=wH+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var o=new F6,l=[new $Be,o,new tTe,new ZBe,new KBe,new GBe],c=new YBe(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(NH)&&e.endsWith(_H)?(c.writeCodeword(MBe),c.setSkipAtEnd(2),c.pos+=NH.length):e.startsWith(CH)&&e.endsWith(_H)&&(c.writeCodeword(LBe),c.setSkipAtEnd(2),c.pos+=CH.length);var u=Ea;for(s&&(o.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Ea&&u!==_l&&u!==Co&&c.writeCodeword("");var A=c.getCodewords();for(A.length()<f&&A.append(wH);A.length()<f;)A.append(this.randomize253State(A.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Wi&&a===Wi){for(var s=Math.min(r+3,e.length),o=r;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Ea}else if(n===Co&&a===Co){for(var s=Math.min(r+4,e.length),o=r;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Ea}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Ea?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,o=new Uint8Array(6),l=[];;){if(r+s===e.length){ao.fill(o,0),ao.fill(l,0);var c=this.findMinimums(a,l,Ln.MAX_VALUE,o),u=this.getMinimumCount(o);if(l[Ea]===c)return Ea;if(u===1){if(o[_l]>0)return _l;if(o[Co]>0)return Co;if(o[Wl]>0)return Wl;if(o[Wi]>0)return Wi}return Xo}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Ea]+=.5:this.isExtendedASCII(d)?(a[Ea]=Math.ceil(a[Ea]),a[Ea]+=2):(a[Ea]=Math.ceil(a[Ea]),a[Ea]++),this.isNativeC40(d)?a[Xo]+=2/3:this.isExtendedASCII(d)?a[Xo]+=8/3:a[Xo]+=4/3,this.isNativeText(d)?a[Wl]+=2/3:this.isExtendedASCII(d)?a[Wl]+=8/3:a[Wl]+=4/3,this.isNativeX12(d)?a[Wi]+=2/3:this.isExtendedASCII(d)?a[Wi]+=13/3:a[Wi]+=10/3,this.isNativeEDIFACT(d)?a[Co]+=3/4:this.isExtendedASCII(d)?a[Co]+=17/4:a[Co]+=13/4,this.isSpecialB256(d)?a[_l]+=4:a[_l]++,s>=4){if(ao.fill(o,0),ao.fill(l,0),this.findMinimums(a,l,Ln.MAX_VALUE,o),l[Ea]<this.min(l[_l],l[Xo],l[Wl],l[Wi],l[Co]))return Ea;if(l[_l]<l[Ea]||l[_l]+1<this.min(l[Xo],l[Wl],l[Wi],l[Co]))return _l;if(l[Co]+1<this.min(l[_l],l[Xo],l[Wl],l[Wi],l[Ea]))return Co;if(l[Wl]+1<this.min(l[_l],l[Xo],l[Co],l[Wi],l[Ea]))return Wl;if(l[Wi]+1<this.min(l[_l],l[Xo],l[Co],l[Wl],l[Ea]))return Wi;if(l[Xo]+1<this.min(l[Ea],l[_l],l[Co],l[Wl])){if(l[Xo]<l[Wi])return Xo;if(l[Xo]===l[Wi]){for(var f=r+s+1;f<e.length;){var A=e.charCodeAt(f);if(this.isX12TermSep(A))return Wi;if(!this.isNativeX12(A))break;f++}return Xo}}}}},t.min=function(e,r,n,a,s){var o=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var o=r[s]=Math.ceil(e[s]);n>o&&(n=o,ao.fill(a,0)),n===o&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Ln.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),v5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EH=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return sd.encode(e,this.charset)!=null}catch{return!1}},t}(),rTe=function(){function t(e,r,n){var a,s,o,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new EH(TBe.forName(E))}),this.encoders=[];var d=[];d.push(new EH(kBe.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),A=0;A<e.length;A++){var h=!1;try{for(var m=(a=void 0,v5(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(A),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){h=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!h)try{for(var b=(o=void 0,v5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(A))){d.push(g),h=!0;break}}}catch(E){o={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}h||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=v5(d),_=I.next();!_.done;_=I.next()){var g=_.value;this.encoders[j++]=g}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var S=-1;if(r!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&r.name===this.encoders[A].name){S=A;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return sd.encode(Jn.getCharAt(e),this.encoders[r].name)},t}(),nTe=3,aTe=function(){function t(e,r,n){this.fnc1=n;var a=new rTe(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new kn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,o){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,a+1,new SH(l,r,d,s,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new SH[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<r.length();l++)s[o][l]!=null&&o<a&&this.addEdges(e,r,s,o,s[o][l],n);for(var l=0;l<r.length();l++)s[o-1][l]=null}for(var c=-1,u=Ln.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],A=s[a][c];A!=null;){if(A.isFNC1())f.unshift(1e3);else for(var h=r.encode(A.c,A.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var m=A.previous===null?0:A.previous.encoderIndex;m!==A.encoderIndex&&f.unshift(256+r.getECIValue(A.encoderIndex)),A=A.previous}for(var p=[],o=0;o<p.length;o++)p[o]=f[o];return p},t}(),SH=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=nTe),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),sTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var IH;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(IH||(IH={}));(function(t){sTe(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(aTe);var iTe=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),jH=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),oTe=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),lTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O6=function(t){lTe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Ln.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(oTe),cTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uTe=function(t){cTe(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(O6);function dTe(t,e,r){return new uTe(t,e,r)}function fy(t,e,r){return new O6(t,e,r)}var fTe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],X0=0,kS=1,ed=2,Xre=3,kf=4,hTe=new O6(null,0,0),y5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ATe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function mTe(t){var e,r;try{for(var n=ATe(t),a=n.next();!a.done;a=n.next()){var s=a.value;ao.fill(s,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[X0][kf]=0,t[kS][kf]=0,t[kS][X0]=28,t[Xre][kf]=0,t[ed][kf]=0,t[ed][X0]=15,t}var Yre=mTe(ao.createInt32Array(6,6)),pTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gTe=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=y5[this.mode][e];a=fy(a,s&65535,s>>16),n+=s>>16}var o=e===ed?4:5;return a=fy(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===ed?4:5;return n=fy(n,Yre[this.mode][e],a),n=fy(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===kf||this.mode===ed){var s=y5[n][X0];r=fy(r,s&65535,s>>16),a+=s>>16,n=X0}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=dTe(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(y5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var o=new Bo;try{for(var l=pTe(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return Jn.format("%s bits=%d bytes=%d",fTe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(hTe,X0,0,0),t}();function xTe(t){var e=Jn.getCharCode(" "),r=Jn.getCharCode("."),n=Jn.getCharCode(",");t[X0][e]=1;for(var a=Jn.getCharCode("Z"),s=Jn.getCharCode("A"),o=s;o<=a;o++)t[X0][o]=o-s+2;t[kS][e]=1;for(var l=Jn.getCharCode("z"),c=Jn.getCharCode("a"),o=c;o<=l;o++)t[kS][o]=o-c+2;t[ed][e]=1;for(var u=Jn.getCharCode("9"),d=Jn.getCharCode("0"),o=d;o<=u;o++)t[ed][o]=o-d+2;t[ed][n]=12,t[ed][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<f.length;A++)t[Xre][Jn.getCharCode(f[A])]=A;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<h.length;A++)Jn.getCharCode(h[A])>0&&(t[kf][Jn.getCharCode(h[A])]=A);return t}var b5=xTe(ao.createInt32Array(5,256)),VC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vTe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Jn.getCharCode(" "),r=Jn.getCharCode(`
`),n=jH.singletonList(gTe.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Jn.getCharCode("\r"):s=o===r?2:0;break;case Jn.getCharCode("."):s=o===e?3:0;break;case Jn.getCharCode(","):s=o===e?4:0;break;case Jn.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=jH.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var o=VC(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=b5[e.getMode()][a]>0,o=null,l=0;l<=kf;l++){var c=b5[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!s||l===e.getMode()||l===ed){var u=o.latchAndAppend(l,c);n.push(u)}if(!s&&Yre[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||b5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,o=[];try{for(var l=VC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(kf,n)),e.getMode()!==kf&&a.push(s.shiftAndAppend(kf,n)),n===3||n===4){var o=s.latchAndAppend(ed,16-n).latchAndAppend(ed,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,o=[];try{for(var l=VC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(o=o.filter(function(x){return x!==g}))};try{for(var A=(a=void 0,VC(o)),h=A.next();!h.done;h=A.next()){var m=h.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}d&&o.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t}(),yTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new vTe(e).encode(),s=Ln.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new un(Jn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var A=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>A)throw new un("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new un("Data to large for user specified layer")}else{d=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new un("Data too large for an Aztec code");if(l=h<=3,c=l?h+1:h,u=t.totalBitsInLayer(c,l),!(o>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var A=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=A)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var h=0;h<y.length;h++)y[h]=h}else{b=x+1+2*Ln.truncDivision(Ln.truncDivision(x,2)-1,15);for(var w=Ln.truncDivision(x,2),j=Ln.truncDivision(b,2),h=0;h<w;h++){var I=h+Ln.truncDivision(h,15);y[w-h-1]=j-I-1,y[w+h]=j+I+1}}for(var _=new Vf(b),h=0,S=0;h<c;h++){for(var E=(c-h)*4+(l?9:12),F=0;F<E;F++)for(var P=F*2,k=0;k<2;k++)m.get(S+P+k)&&_.set(y[h*2+k],y[h*2+F]),m.get(S+E*2+P+k)&&_.set(y[h*2+F],y[x-1-h*2-k]),m.get(S+E*4+P+k)&&_.set(y[x-1-h*2-k],y[x-1-h*2-F]),m.get(S+E*6+P+k)&&_.set(y[x-1-h*2-F],y[h*2+k]);S+=E*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Ln.truncDivision(b,2),5);else{t.drawBullsEye(_,Ln.truncDivision(b,2),7);for(var h=0,F=0;h<Ln.truncDivision(x,2)-1;h+=15,F+=16)for(var k=Ln.truncDivision(b,2)&1;k<b;k+=2)_.set(Ln.truncDivision(b,2)-F,k),_.set(Ln.truncDivision(b,2)+F,k),_.set(k,Ln.truncDivision(b,2)-F),_.set(k,Ln.truncDivision(b,2)+F)}var D=new iTe;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(_),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Bo;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Ln.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=s-3+o;a.get(o)&&e.set(l,s-5),a.get(o+7)&&e.set(s+5,l),a.get(20-o)&&e.set(l,s+5),a.get(27-o)&&e.set(s-5,l)}else for(var o=0;o<10;o++){var l=s-5+o+Ln.truncDivision(o,5);a.get(o)&&e.set(l,s-7),a.get(o+10)&&e.set(s+7,l),a.get(29-o)&&e.set(l,s+7),a.get(39-o)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,o=e.getSize()/n,l=new zre(t.getGF(n)),c=Ln.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var d=r%n,f=new Bo;f.appendBits(0,d);try{for(var A=yTe(Array.from(u)),h=A.next();!h.done;h=A.next()){var m=h.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return _c.AZTEC_PARAM;case 6:return _c.AZTEC_DATA_6;case 8:return _c.AZTEC_DATA_8;case 10:return _c.AZTEC_DATA_10;case 12:return _c.AZTEC_DATA_12;default:throw new un("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Bo,a=e.getSize(),s=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),o--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var bTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wTe=function(t){bTe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,d=r[o+3];if(d===0)u=255;else{var f=r[o],A=r[o+1],h=r[o+2];u=306*f+601*A+117*h+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new un("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new zj(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Iw);function Jre(){return typeof navigator<"u"}function NTe(){return Jre()&&!!navigator.mediaDevices}function CTe(){return!!(NTe()&&navigator.mediaDevices.enumerateDevices)}var Vx=function(){return Vx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Vx.apply(this,arguments)},Ds=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Rs=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},w5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_Te={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},l1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Vx(Vx({},_Te),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(as.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Ds(this,void 0,void 0,function(){return Rs(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=w5(a),o=s.next();!o.done;o=s.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new vi("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new vi("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new wTe(e),n=new Dre(r);return new Ore(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new vi("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ds(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return Rs(this,function(h){switch(h.label){case 0:if(!Jre())throw new Error("Can't enumerate devices, navigator is not present.");if(!CTe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=w5(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Ds(this,void 0,void 0,function(){var n;return Rs(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Ds(this,void 0,void 0,function(){var a;return Rs(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(s),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new vi("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:if(!e)throw new vi("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:if(!e)throw new vi("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ds(this,void 0,void 0,function(){var a,s;return Rs(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ds(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A,h=this;return Rs(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,o),c=e.getVideoTracks(),u=Vx(Vx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return Ds(this,void 0,void 0,function(){var x,y,b,w,j,I,_;return Rs(this,function(S){switch(S.label){case 0:x=g?c.filter(g):c,S.label=1;case 1:S.trys.push([1,6,7,8]),y=w5(x),b=y.next(),S.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:S.sent(),S.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=S.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),A=function(p){return Ds(h,void 0,void 0,function(){return Rs(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=A,u.stop=function(){return Ds(h,void 0,void 0,function(){return Rs(this,function(p){switch(p.label){case 0:return l.stop(),[4,A(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ds(this,void 0,void 0,function(){var a,s;return Rs(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Ds(this,void 0,void 0,function(){var n,a;return Rs(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new vi("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Ds(this,void 0,void 0,function(){var n,a,s,o;return Rs(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new vi("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ds(this,void 0,void 0,function(){var n;return Rs(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ds(this,void 0,void 0,function(){var n,a,s;return Rs(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=o.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ds(this,void 0,void 0,function(){var n,a;return Rs(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ds(this,void 0,void 0,function(){var r,n;return Rs(this,function(a){switch(a.label){case 0:if(!e)throw new vi("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ds(this,void 0,void 0,function(){var r,n;return Rs(this,function(a){switch(a.label){case 0:if(!e)throw new vi("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){s.scan(e,function(c,u,d){if(c){o(c),d.stop();return}if(u){if(u instanceof Jt&&r||u instanceof Di&&n||u instanceof jr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},A=function(){if(!c)try{t.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(s);r(h,void 0,f),u=setTimeout(A,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var m=x instanceof Di,p=x instanceof jr,g=x instanceof Jt;if(m||p||g){u=setTimeout(A,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return A(),f},t.prototype._decodeOnLoadImage=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ds(this,void 0,void 0,function(){var r;return Rs(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),ETe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ETe(e,t);function e(r,n){return t.call(this,new IS,r,n)||this}return e})(l1);var STe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){STe(e,t);function e(r,n){return t.call(this,new Ux(r),r,n)||this}return e})(l1);var ITe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ITe(e,t);function e(r,n){return t.call(this,new PS,r,n)||this}return e})(l1);var jTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b2=function(t){jTe(e,t);function e(r,n){var a=this,s=new qre;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(as.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(l1),PTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){PTe(e,t);function e(r,n){return t.call(this,new TS,r,n)||this}return e})(l1);var BTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){BTe(e,t);function e(r,n){return t.call(this,new BS,r,n)||this}return e})(l1);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var FS={};FS.version="0.18.5";var Zre=1252,TTe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],D6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},R6=function(t){TTe.indexOf(t)!=-1&&(Zre=D6[0]=t)};function kTe(){R6(1252)}var Hd=function(t){R6(t)};function M6(){Hd(1200),kTe()}function PH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function FTe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function ene(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Hy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?FTe(t.slice(2)):e==254&&r==255?ene(t.slice(2)):e==65279?t.slice(1):t},HC=function(e){return String.fromCharCode(e)},BH=function(e){return String.fromCharCode(e)},w2,B0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function N2(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=B0.charAt(s)+B0.charAt(o)+B0.charAt(l)+B0.charAt(c);return e}function pu(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=B0.indexOf(t.charAt(u++)),o=B0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=B0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=B0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var Fn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),xA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function cm(t){return Fn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function TH(t){return Fn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var nu=function(e){return Fn?xA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Yj(t){if(typeof ArrayBuffer>"u")return nu(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function wm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function OTe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function L6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return L6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Po=Fn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:xA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function DTe(t){for(var e=[],r=0,n=t.length+250,a=cm(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=cm(65535),n=65530)}return e.push(a.slice(0,r)),Po(e)}var ic=/\u0000/g,$y=/[\u0001-\u0006]/g;function sv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function $d(t,e){var r=""+t;return r.length>=e?r:si("0",e-r.length)+r}function U6(t,e){var r=""+t;return r.length>=e?r:si(" ",e-r.length)+r}function OS(t,e){var r=""+t;return r.length>=e?r:r+si(" ",e-r.length)}function RTe(t,e){var r=""+Math.round(t);return r.length>=e?r:si("0",e-r.length)+r}function MTe(t,e){var r=""+t;return r.length>=e?r:si("0",e-r.length)+r}var kH=Math.pow(2,32);function ix(t,e){if(t>kH||t<-kH)return RTe(t,e);var r=Math.round(t);return MTe(r,e)}function DS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var FH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],N5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function LTe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var hn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},OH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},UTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function RS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function hp(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=KTe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var tne=new Date(1899,11,31,0,0,0),QTe=tne.getTime(),VTe=new Date(1900,2,1,0,0,0);function rne(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=VTe&&(r+=24*60*60*1e3),(r-(QTe+(t.getTimezoneOffset()-tne.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Q6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function HTe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function $Te(t){var e=t<0?12:11,r=Q6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function GTe(t){var e=Q6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function C2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=$Te(t):e===10?r=t.toFixed(10).substr(0,12):r=GTe(t),Q6(HTe(r.toUpperCase()))}function Jp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):C2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ud(14,rne(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function KTe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function qTe(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return N5[r.m-1][1];case 5:return N5[r.m-1][0];default:return N5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return FH[r.q][0];default:return FH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?$d(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=$d(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?$d(c,u):"";return d}function T0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var nne=/%/g;function zTe(t,e,r){var n=e.replace(nne,""),a=e.length-n.length;return Hh(t,n,r*Math.pow(10,2*a))+si("%",a)}function WTe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Hh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function ane(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ane(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sne=/# (\?+)( ?)\/( ?)(\d+)/;function XTe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?si(" ",t[1].length+1+t[4].length):U6(o,t[1].length)+t[2]+"/"+t[3]+$d(l,t[4].length))}function YTe(t,e,r){return r+(e===0?"":""+e)+si(" ",t[1].length+2+t[4].length)}var ine=/^#*0*\.([0#]+)/,one=/\).*[0#]/,lne=/\(###\) ###\\?-####/;function Zl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function DH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function RH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function JTe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function ZTe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Mu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(one)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mu("n",n,r):"("+Mu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return WTe(t,e,r);if(e.indexOf("%")!==-1)return zTe(t,e,r);if(e.indexOf("E")!==-1)return ane(e,r);if(e.charCodeAt(0)===36)return"$"+Mu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+ix(c,e.length);if(e.match(/^[#?]+$/))return a=ix(r,0),a==="0"&&(a=""),a.length>e.length?a:Zl(e.substr(0,e.length-a.length))+a;if(s=e.match(sne))return XTe(s,c,u);if(e.match(/^#+0+$/))return u+ix(c,e.length-e.indexOf("0"));if(s=e.match(ine))return a=DH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Zl(s[1])).replace(/\.$/,"."+Zl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+si("0",Zl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+DH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+T0(ix(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mu(t,e,-r):T0(""+(Math.floor(r)+JTe(r,s[1].length)))+"."+$d(RH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Mu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sv(Mu(t,e.replace(/[\\-]/g,""),r)),o=0,sv(sv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(lne))return a=Mu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=RS(c,Math.pow(10,o)-1,!1),a=""+u,d=Hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=OS(l[2],o),d.length<s[4].length&&(d=Zl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=RS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?U6(l[1],o)+s[2]+"/"+s[3]+OS(l[2],o):si(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=ix(r,0),e.length<=a.length?a:Zl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return Zl(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=RH(r,s[1].length),r<0?"-"+Mu(t,e,-r):T0(ZTe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?$d(0,3-m.length):"")+m})+"."+$d(o,s[1].length);switch(e){case"###,##0.00":return Mu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=T0(ix(c,0));return h!=="0"?u+h:"";case"###,###.00":return Mu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Mu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function eke(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Hh(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function tke(t,e,r){var n=e.replace(nne,""),a=e.length-n.length;return Hh(t,n,r*Math.pow(10,2*a))+si("%",a)}function cne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+cne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Nf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(one)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Nf("n",n,r):"("+Nf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return eke(t,e,r);if(e.indexOf("%")!==-1)return tke(t,e,r);if(e.indexOf("E")!==-1)return cne(e,r);if(e.charCodeAt(0)===36)return"$"+Nf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+$d(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Zl(e.substr(0,e.length-a.length))+a;if(s=e.match(sne))return YTe(s,c,u);if(e.match(/^#+0+$/))return u+$d(c,e.length-e.indexOf("0"));if(s=e.match(ine))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Zl(s[1])).replace(/\.$/,"."+Zl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+si("0",Zl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+T0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Nf(t,e,-r):T0(""+r)+"."+si("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Nf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sv(Nf(t,e.replace(/[\\-]/g,""),r)),o=0,sv(sv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(lne))return a=Nf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=RS(c,Math.pow(10,o)-1,!1),a=""+u,d=Hh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=OS(l[2],o),d.length<s[4].length&&(d=Zl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=RS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?U6(l[1],o)+s[2]+"/"+s[3]+OS(l[2],o):si(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Zl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return Zl(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Nf(t,e,-r):T0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?$d(0,3-m.length):"")+m})+"."+$d(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=T0(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return Nf(t,e.slice(0,e.lastIndexOf(".")),r)+Zl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Hh(t,e,r){return(r|0)===r?Nf(t,e,r):Mu(t,e,r)}function rke(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var une=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function c1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":DS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(une))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function nke(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!DS(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=t.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=hp(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=hp(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=hp(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",A="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,A="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,A="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(une)){if(u==null&&(u=hp(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",c1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var g=0,x=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",g<1&&(g=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[o].v.match(/[Hh]/)&&(g=1),g<2&&a[o].v.match(/[Mm]/)&&(g=2),g<3&&a[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=qTe(a[o].t.charCodeAt(0),a[o].v,u,x),a[o].t="t";break;case"n":case"?":for(w=o+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[o].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[o].v,o=w-1;break;case"G":a[o].t="t",a[o].v=Jp(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=Hh("n",b,I)):(I=e<0&&n>1?-e:e,_=Hh("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var E=a.length;if(S===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(w>=a[o].v.length-1?(w-=a[o].v.length,a[o].v=_.substr(w+1,a[o].v.length)):w<0?a[o].v="":(a[o].v=_.substr(0,w+1),w=-1),a[o].t="t",E=o);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(S!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)w>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[o].v=j,a[o].t="t",E=o}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[o].v=j,a[o].t="t",E=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=Hh(a[o].t,a[o].v,I),a[o].t="t");var F="";for(o=0;o!==a.length;++o)a[o]!=null&&(F+=a[o].v);return F}var MH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function LH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function ake(t,e){var r=rke(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(MH),l=r[1].match(MH);return LH(e,o)?[n,r[0]]:LH(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function ud(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:hn)[t],n==null&&(n=r.table&&r.table[OH[t]]||hn[OH[t]]),n==null&&(n=UTe[t]||"General");break}if(DS(n,0))return Jp(e,r);e instanceof Date&&(e=rne(e,r.date1904));var a=ake(n,e);if(DS(a[1]))return Jp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return nke(a[1],e,r,a[0])}function $h(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(hn[r]==null){e<0&&(e=r);continue}if(hn[r]==t){e=r;break}}e<0&&(e=391)}return hn[e]=t,e}function Jj(t){for(var e=0;e!=392;++e)t[e]!==void 0&&$h(t[e],e)}function u1(){hn=LTe()}var ske={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ike(t){var e=typeof t=="number"?hn[t]:t;return e=e.replace(dne,"(\\d+)"),new RegExp("^"+e+"$")}function oke(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(dne)||[]).forEach(function(f,A){var h=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var lke=function(){var t={};t.version="1.2.0";function e(){for(var _=0,S=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,S[E]=_;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(_){var S=0,E=0,F=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)P[F]=_[F];for(F=0;F!=256;++F)for(E=_[F],S=256+F;S<4096;S+=256)E=P[S]=E>>>8^_[E&255];var k=[];for(F=1;F!=16;++F)k[F-1]=typeof Int32Array<"u"?P.subarray(F*256,F*256+256):P.slice(F*256,F*256+256);return k}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],h=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(_,S){for(var E=S^-1,F=0,P=_.length;F<P;)E=E>>>8^r[(E^_.charCodeAt(F++))&255];return~E}function j(_,S){for(var E=S^-1,F=_.length-15,P=0;P<F;)E=b[_[P++]^E&255]^y[_[P++]^E>>8&255]^x[_[P++]^E>>16&255]^g[_[P++]^E>>>24]^p[_[P++]]^m[_[P++]]^h[_[P++]]^A[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^o[_[P++]]^s[_[P++]]^r[_[P++]];for(F+=15;P<F;)E=E>>>8^r[(E^_[P++])&255];return~E}function I(_,S){for(var E=S^-1,F=0,P=_.length,k=0,D=0;F<P;)k=_.charCodeAt(F++),k<128?E=E>>>8^r[(E^k)&255]:k<2048?(E=E>>>8^r[(E^(192|k>>6&31))&255],E=E>>>8^r[(E^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,D=_.charCodeAt(F++)&1023,E=E>>>8^r[(E^(240|k>>8&7))&255],E=E>>>8^r[(E^(128|k>>2&63))&255],E=E>>>8^r[(E^(128|D>>6&15|(k&3)<<4))&255],E=E>>>8^r[(E^(128|D&63))&255]):(E=E>>>8^r[(E^(224|k>>12&15))&255],E=E>>>8^r[(E^(128|k>>6&63))&255],E=E>>>8^r[(E^(128|k&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),sn=function(){var e={};e.version="1.2.1";function r(T,M){for(var V=T.split("/"),q=M.split("/"),ee=0,se=0,Oe=Math.min(V.length,q.length);ee<Oe;++ee){if(se=V[ee].length-q[ee].length)return se;if(V[ee]!=q[ee])return V[ee]<q[ee]?-1:1}return V.length-q.length}function n(T){if(T.charAt(T.length-1)=="/")return T.slice(0,-1).indexOf("/")===-1?T:n(T.slice(0,-1));var M=T.lastIndexOf("/");return M===-1?T:T.slice(0,M+1)}function a(T){if(T.charAt(T.length-1)=="/")return a(T.slice(0,-1));var M=T.lastIndexOf("/");return M===-1?T:T.slice(M+1)}function s(T,M){typeof M=="string"&&(M=new Date(M));var V=M.getHours();V=V<<6|M.getMinutes(),V=V<<5|M.getSeconds()>>>1,T.write_shift(2,V);var q=M.getFullYear()-1980;q=q<<4|M.getMonth()+1,q=q<<5|M.getDate(),T.write_shift(2,q)}function o(T){var M=T.read_shift(2)&65535,V=T.read_shift(2)&65535,q=new Date,ee=V&31;V>>>=5;var se=V&15;V>>>=4,q.setMilliseconds(0),q.setFullYear(V+1980),q.setMonth(se-1),q.setDate(ee);var Oe=M&31;M>>>=5;var Ke=M&63;return M>>>=6,q.setHours(M),q.setMinutes(Ke),q.setSeconds(Oe<<1),q}function l(T){nl(T,0);for(var M={},V=0;T.l<=T.length-4;){var q=T.read_shift(2),ee=T.read_shift(2),se=T.l+ee,Oe={};switch(q){case 21589:V=T.read_shift(1),V&1&&(Oe.mtime=T.read_shift(4)),ee>5&&(V&2&&(Oe.atime=T.read_shift(4)),V&4&&(Oe.ctime=T.read_shift(4))),Oe.mtime&&(Oe.mt=new Date(Oe.mtime*1e3));break}T.l=se,M[q]=Oe}return M}var c;function u(){return c||(c={})}function d(T,M){if(T[0]==80&&T[1]==75)return oe(T,M);if((T[0]|32)==109&&(T[1]|32)==105)return Ne(T,M);if(T.length<512)throw new Error("CFB file size "+T.length+" < 512");var V=3,q=512,ee=0,se=0,Oe=0,Ke=0,ot=0,Fe=[],Xe=T.slice(0,512);nl(Xe,0);var xe=f(Xe);switch(V=xe[0],V){case 3:q=512;break;case 4:q=4096;break;case 0:if(xe[1]==0)return oe(T,M);default:throw new Error("Major Version: Expected 3 or 4 saw "+V)}q!==512&&(Xe=T.slice(0,q),nl(Xe,28));var Ge=T.slice(0,q);A(Xe,V);var qe=Xe.read_shift(4,"i");if(V===3&&qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+qe);Xe.l+=4,Oe=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),Ke=Xe.read_shift(4,"i"),ee=Xe.read_shift(4,"i"),ot=Xe.read_shift(4,"i"),se=Xe.read_shift(4,"i");for(var it=-1,Et=0;Et<109&&(it=Xe.read_shift(4,"i"),!(it<0));++Et)Fe[Et]=it;var Pt=h(T,q);g(ot,se,Pt,q,Fe);var pr=y(Pt,Oe,Fe,q);pr[Oe].name="!Directory",ee>0&&Ke!==D&&(pr[Ke].name="!MiniFAT"),pr[Fe[0]].name="!FAT",pr.fat_addrs=Fe,pr.ssz=q;var Ot={},Dt=[],fr=[],ir=[];b(Oe,pr,Pt,Dt,ee,Ot,fr,Ke),m(fr,ir,Dt),Dt.shift();var Bt={FileIndex:fr,FullPaths:ir};return M&&M.raw&&(Bt.raw={header:Ge,sectors:Pt}),Bt}function f(T){if(T[T.l]==80&&T[T.l+1]==75)return[0,0];T.chk(Z,"Header Signature: "),T.l+=16;var M=T.read_shift(2,"u");return[T.read_shift(2,"u"),M]}function A(T,M){var V=9;switch(T.l+=2,V=T.read_shift(2)){case 9:if(M!=3)throw new Error("Sector Shift: Expected 9 saw "+V);break;case 12:if(M!=4)throw new Error("Sector Shift: Expected 12 saw "+V);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+V)}T.chk("0600","Mini Sector Shift: "),T.chk("000000000000","Reserved: ")}function h(T,M){for(var V=Math.ceil(T.length/M)-1,q=[],ee=1;ee<V;++ee)q[ee-1]=T.slice(ee*M,(ee+1)*M);return q[V-1]=T.slice(V*M),q}function m(T,M,V){for(var q=0,ee=0,se=0,Oe=0,Ke=0,ot=V.length,Fe=[],Xe=[];q<ot;++q)Fe[q]=Xe[q]=q,M[q]=V[q];for(;Ke<Xe.length;++Ke)q=Xe[Ke],ee=T[q].L,se=T[q].R,Oe=T[q].C,Fe[q]===q&&(ee!==-1&&Fe[ee]!==ee&&(Fe[q]=Fe[ee]),se!==-1&&Fe[se]!==se&&(Fe[q]=Fe[se])),Oe!==-1&&(Fe[Oe]=q),ee!==-1&&q!=Fe[q]&&(Fe[ee]=Fe[q],Xe.lastIndexOf(ee)<Ke&&Xe.push(ee)),se!==-1&&q!=Fe[q]&&(Fe[se]=Fe[q],Xe.lastIndexOf(se)<Ke&&Xe.push(se));for(q=1;q<ot;++q)Fe[q]===q&&(se!==-1&&Fe[se]!==se?Fe[q]=Fe[se]:ee!==-1&&Fe[ee]!==ee&&(Fe[q]=Fe[ee]));for(q=1;q<ot;++q)if(T[q].type!==0){if(Ke=q,Ke!=Fe[Ke])do Ke=Fe[Ke],M[q]=M[Ke]+"/"+M[q];while(Ke!==0&&Fe[Ke]!==-1&&Ke!=Fe[Ke]);Fe[q]=-1}for(M[0]+="/",q=1;q<ot;++q)T[q].type!==2&&(M[q]+="/")}function p(T,M,V){for(var q=T.start,ee=T.size,se=[],Oe=q;V&&ee>0&&Oe>=0;)se.push(M.slice(Oe*k,Oe*k+k)),ee-=k,Oe=sp(V,Oe*4);return se.length===0?Zt(0):Po(se).slice(0,T.size)}function g(T,M,V,q,ee){var se=D;if(T===D){if(M!==0)throw new Error("DIFAT chain shorter than expected")}else if(T!==-1){var Oe=V[T],Ke=(q>>>2)-1;if(!Oe)return;for(var ot=0;ot<Ke&&(se=sp(Oe,ot*4))!==D;++ot)ee.push(se);g(sp(Oe,q-4),M-1,V,q,ee)}}function x(T,M,V,q,ee){var se=[],Oe=[];ee||(ee=[]);var Ke=q-1,ot=0,Fe=0;for(ot=M;ot>=0;){ee[ot]=!0,se[se.length]=ot,Oe.push(T[ot]);var Xe=V[Math.floor(ot*4/q)];if(Fe=ot*4&Ke,q<4+Fe)throw new Error("FAT boundary crossed: "+ot+" 4 "+q);if(!T[Xe])break;ot=sp(T[Xe],Fe)}return{nodes:se,data:YH([Oe])}}function y(T,M,V,q){var ee=T.length,se=[],Oe=[],Ke=[],ot=[],Fe=q-1,Xe=0,xe=0,Ge=0,qe=0;for(Xe=0;Xe<ee;++Xe)if(Ke=[],Ge=Xe+M,Ge>=ee&&(Ge-=ee),!Oe[Ge]){ot=[];var it=[];for(xe=Ge;xe>=0;){it[xe]=!0,Oe[xe]=!0,Ke[Ke.length]=xe,ot.push(T[xe]);var Et=V[Math.floor(xe*4/q)];if(qe=xe*4&Fe,q<4+qe)throw new Error("FAT boundary crossed: "+xe+" 4 "+q);if(!T[Et]||(xe=sp(T[Et],qe),it[xe]))break}se[Ge]={nodes:Ke,data:YH([ot])}}return se}function b(T,M,V,q,ee,se,Oe,Ke){for(var ot=0,Fe=q.length?2:0,Xe=M[T].data,xe=0,Ge=0,qe;xe<Xe.length;xe+=128){var it=Xe.slice(xe,xe+128);nl(it,64),Ge=it.read_shift(2),qe=z6(it,0,Ge-Fe),q.push(qe);var Et={name:qe,type:it.read_shift(1),color:it.read_shift(1),L:it.read_shift(4,"i"),R:it.read_shift(4,"i"),C:it.read_shift(4,"i"),clsid:it.read_shift(16),state:it.read_shift(4,"i"),start:0,size:0},Pt=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);Pt!==0&&(Et.ct=w(it,it.l-8));var pr=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);pr!==0&&(Et.mt=w(it,it.l-8)),Et.start=it.read_shift(4,"i"),Et.size=it.read_shift(4,"i"),Et.size<0&&Et.start<0&&(Et.size=Et.type=0,Et.start=D,Et.name=""),Et.type===5?(ot=Et.start,ee>0&&ot!==D&&(M[ot].name="!StreamData")):Et.size>=4096?(Et.storage="fat",M[Et.start]===void 0&&(M[Et.start]=x(V,Et.start,M.fat_addrs,M.ssz)),M[Et.start].name=Et.name,Et.content=M[Et.start].data.slice(0,Et.size)):(Et.storage="minifat",Et.size<0?Et.size=0:ot!==D&&Et.start!==D&&M[ot]&&(Et.content=p(Et,M[ot].data,(M[Ke]||{}).data))),Et.content&&nl(Et.content,0),se[qe]=Et,Oe.push(Et)}}function w(T,M){return new Date((ru(T,M+4)/1e7*Math.pow(2,32)+ru(T,M)/1e7-11644473600)*1e3)}function j(T,M){return u(),d(c.readFileSync(T),M)}function I(T,M){var V=M&&M.type;switch(V||Fn&&Buffer.isBuffer(T)&&(V="buffer"),V||"base64"){case"file":return j(T,M);case"base64":return d(nu(pu(T)),M);case"binary":return d(nu(T),M)}return d(T,M)}function _(T,M){var V=M||{},q=V.root||"Root Entry";if(T.FullPaths||(T.FullPaths=[]),T.FileIndex||(T.FileIndex=[]),T.FullPaths.length!==T.FileIndex.length)throw new Error("inconsistent CFB structure");T.FullPaths.length===0&&(T.FullPaths[0]=q+"/",T.FileIndex[0]={name:q,type:5}),V.CLSID&&(T.FileIndex[0].clsid=V.CLSID),S(T)}function S(T){var M="Sh33tJ5";if(!sn.find(T,"/"+M)){var V=Zt(4);V[0]=55,V[1]=V[3]=50,V[2]=54,T.FileIndex.push({name:M,type:2,content:V,size:4,L:69,R:69,C:69}),T.FullPaths.push(T.FullPaths[0]+M),E(T)}}function E(T,M){_(T);for(var V=!1,q=!1,ee=T.FullPaths.length-1;ee>=0;--ee){var se=T.FileIndex[ee];switch(se.type){case 0:q?V=!0:(T.FileIndex.pop(),T.FullPaths.pop());break;case 1:case 2:case 5:q=!0,isNaN(se.R*se.L*se.C)&&(V=!0),se.R>-1&&se.L>-1&&se.R==se.L&&(V=!0);break;default:V=!0;break}}if(!(!V&&!M)){var Oe=new Date(1987,1,19),Ke=0,ot=Object.create?Object.create(null):{},Fe=[];for(ee=0;ee<T.FullPaths.length;++ee)ot[T.FullPaths[ee]]=!0,T.FileIndex[ee].type!==0&&Fe.push([T.FullPaths[ee],T.FileIndex[ee]]);for(ee=0;ee<Fe.length;++ee){var Xe=n(Fe[ee][0]);q=ot[Xe],q||(Fe.push([Xe,{name:a(Xe).replace("/",""),type:1,clsid:me,ct:Oe,mt:Oe,content:null}]),ot[Xe]=!0)}for(Fe.sort(function(qe,it){return r(qe[0],it[0])}),T.FullPaths=[],T.FileIndex=[],ee=0;ee<Fe.length;++ee)T.FullPaths[ee]=Fe[ee][0],T.FileIndex[ee]=Fe[ee][1];for(ee=0;ee<Fe.length;++ee){var xe=T.FileIndex[ee],Ge=T.FullPaths[ee];if(xe.name=a(Ge).replace("/",""),xe.L=xe.R=xe.C=-(xe.color=1),xe.size=xe.content?xe.content.length:0,xe.start=0,xe.clsid=xe.clsid||me,ee===0)xe.C=Fe.length>1?1:-1,xe.size=0,xe.type=5;else if(Ge.slice(-1)=="/"){for(Ke=ee+1;Ke<Fe.length&&n(T.FullPaths[Ke])!=Ge;++Ke);for(xe.C=Ke>=Fe.length?-1:Ke,Ke=ee+1;Ke<Fe.length&&n(T.FullPaths[Ke])!=n(Ge);++Ke);xe.R=Ke>=Fe.length?-1:Ke,xe.type=1}else n(T.FullPaths[ee+1]||"")==n(Ge)&&(xe.R=ee+1),xe.type=2}}}function F(T,M){var V=M||{};if(V.fileType=="mad")return mt(T,V);switch(E(T),V.fileType){case"zip":return de(T,V)}var q=function(qe){for(var it=0,Et=0,Pt=0;Pt<qe.FileIndex.length;++Pt){var pr=qe.FileIndex[Pt];if(pr.content){var Ot=pr.content.length;Ot>0&&(Ot<4096?it+=Ot+63>>6:Et+=Ot+511>>9)}}for(var Dt=qe.FullPaths.length+3>>2,fr=it+7>>3,ir=it+127>>7,Bt=fr+Et+Dt+ir,gr=Bt+127>>7,Or=gr<=109?0:Math.ceil((gr-109)/127);Bt+gr+Or+127>>7>gr;)Or=++gr<=109?0:Math.ceil((gr-109)/127);var Pr=[1,Or,gr,ir,Dt,Et,it,0];return qe.FileIndex[0].size=it<<6,Pr[7]=(qe.FileIndex[0].start=Pr[0]+Pr[1]+Pr[2]+Pr[3]+Pr[4]+Pr[5])+(Pr[6]+7>>3),Pr}(T),ee=Zt(q[7]<<9),se=0,Oe=0;{for(se=0;se<8;++se)ee.write_shift(1,fe[se]);for(se=0;se<8;++se)ee.write_shift(2,0);for(ee.write_shift(2,62),ee.write_shift(2,3),ee.write_shift(2,65534),ee.write_shift(2,9),ee.write_shift(2,6),se=0;se<3;++se)ee.write_shift(2,0);for(ee.write_shift(4,0),ee.write_shift(4,q[2]),ee.write_shift(4,q[0]+q[1]+q[2]+q[3]-1),ee.write_shift(4,0),ee.write_shift(4,4096),ee.write_shift(4,q[3]?q[0]+q[1]+q[2]-1:D),ee.write_shift(4,q[3]),ee.write_shift(-4,q[1]?q[0]-1:D),ee.write_shift(4,q[1]),se=0;se<109;++se)ee.write_shift(-4,se<q[2]?q[1]+se:-1)}if(q[1])for(Oe=0;Oe<q[1];++Oe){for(;se<236+Oe*127;++se)ee.write_shift(-4,se<q[2]?q[1]+se:-1);ee.write_shift(-4,Oe===q[1]-1?D:Oe+1)}var Ke=function(qe){for(Oe+=qe;se<Oe-1;++se)ee.write_shift(-4,se+1);qe&&(++se,ee.write_shift(-4,D))};for(Oe=se=0,Oe+=q[1];se<Oe;++se)ee.write_shift(-4,pe.DIFSECT);for(Oe+=q[2];se<Oe;++se)ee.write_shift(-4,pe.FATSECT);Ke(q[3]),Ke(q[4]);for(var ot=0,Fe=0,Xe=T.FileIndex[0];ot<T.FileIndex.length;++ot)Xe=T.FileIndex[ot],Xe.content&&(Fe=Xe.content.length,!(Fe<4096)&&(Xe.start=Oe,Ke(Fe+511>>9)));for(Ke(q[6]+7>>3);ee.l&511;)ee.write_shift(-4,pe.ENDOFCHAIN);for(Oe=se=0,ot=0;ot<T.FileIndex.length;++ot)Xe=T.FileIndex[ot],Xe.content&&(Fe=Xe.content.length,!(!Fe||Fe>=4096)&&(Xe.start=Oe,Ke(Fe+63>>6)));for(;ee.l&511;)ee.write_shift(-4,pe.ENDOFCHAIN);for(se=0;se<q[4]<<2;++se){var xe=T.FullPaths[se];if(!xe||xe.length===0){for(ot=0;ot<17;++ot)ee.write_shift(4,0);for(ot=0;ot<3;++ot)ee.write_shift(4,-1);for(ot=0;ot<12;++ot)ee.write_shift(4,0);continue}Xe=T.FileIndex[se],se===0&&(Xe.start=Xe.size?Xe.start-1:D);var Ge=se===0&&V.root||Xe.name;if(Fe=2*(Ge.length+1),ee.write_shift(64,Ge,"utf16le"),ee.write_shift(2,Fe),ee.write_shift(1,Xe.type),ee.write_shift(1,Xe.color),ee.write_shift(-4,Xe.L),ee.write_shift(-4,Xe.R),ee.write_shift(-4,Xe.C),Xe.clsid)ee.write_shift(16,Xe.clsid,"hex");else for(ot=0;ot<4;++ot)ee.write_shift(4,0);ee.write_shift(4,Xe.state||0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(4,Xe.start),ee.write_shift(4,Xe.size),ee.write_shift(4,0)}for(se=1;se<T.FileIndex.length;++se)if(Xe=T.FileIndex[se],Xe.size>=4096)if(ee.l=Xe.start+1<<9,Fn&&Buffer.isBuffer(Xe.content))Xe.content.copy(ee,ee.l,0,Xe.size),ee.l+=Xe.size+511&-512;else{for(ot=0;ot<Xe.size;++ot)ee.write_shift(1,Xe.content[ot]);for(;ot&511;++ot)ee.write_shift(1,0)}for(se=1;se<T.FileIndex.length;++se)if(Xe=T.FileIndex[se],Xe.size>0&&Xe.size<4096)if(Fn&&Buffer.isBuffer(Xe.content))Xe.content.copy(ee,ee.l,0,Xe.size),ee.l+=Xe.size+63&-64;else{for(ot=0;ot<Xe.size;++ot)ee.write_shift(1,Xe.content[ot]);for(;ot&63;++ot)ee.write_shift(1,0)}if(Fn)ee.l=ee.length;else for(;ee.l<ee.length;)ee.write_shift(1,0);return ee}function P(T,M){var V=T.FullPaths.map(function(ot){return ot.toUpperCase()}),q=V.map(function(ot){var Fe=ot.split("/");return Fe[Fe.length-(ot.slice(-1)=="/"?2:1)]}),ee=!1;M.charCodeAt(0)===47?(ee=!0,M=V[0].slice(0,-1)+M):ee=M.indexOf("/")!==-1;var se=M.toUpperCase(),Oe=ee===!0?V.indexOf(se):q.indexOf(se);if(Oe!==-1)return T.FileIndex[Oe];var Ke=!se.match($y);for(se=se.replace(ic,""),Ke&&(se=se.replace($y,"!")),Oe=0;Oe<V.length;++Oe)if((Ke?V[Oe].replace($y,"!"):V[Oe]).replace(ic,"")==se||(Ke?q[Oe].replace($y,"!"):q[Oe]).replace(ic,"")==se)return T.FileIndex[Oe];return null}var k=64,D=-2,Z="d0cf11e0a1b11ae1",fe=[208,207,17,224,161,177,26,225],me="00000000000000000000000000000000",pe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:Z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:me,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ye(T,M,V){u();var q=F(T,V);c.writeFileSync(M,q)}function ae(T){for(var M=new Array(T.length),V=0;V<T.length;++V)M[V]=String.fromCharCode(T[V]);return M.join("")}function je(T,M){var V=F(T,M);switch(M&&M.type||"buffer"){case"file":return u(),c.writeFileSync(M.filename,V),V;case"binary":return typeof V=="string"?V:ae(V);case"base64":return N2(typeof V=="string"?V:ae(V));case"buffer":if(Fn)return Buffer.isBuffer(V)?V:xA(V);case"array":return typeof V=="string"?nu(V):V}return V}var Be;function O(T){try{var M=T.InflateRaw,V=new M;if(V._processChunk(new Uint8Array([3,0]),V._finishFlushFlag),V.bytesRead)Be=T;else throw new Error("zlib does not expose bytesRead")}catch(q){console.error("cannot use native zlib: "+(q.message||q))}}function G(T,M){if(!Be)return he(T,M);var V=Be.InflateRaw,q=new V,ee=q._processChunk(T.slice(T.l),q._finishFlushFlag);return T.l+=q.bytesRead,ee}function z(T){return Be?Be.deflateRawSync(T):be(T)}var L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function R(T){var M=(T<<1|T<<11)&139536|(T<<5|T<<15)&558144;return(M>>16|M>>8|M)&255}for(var H=typeof Uint8Array<"u",ne=H?new Uint8Array(256):[],ge=0;ge<256;++ge)ne[ge]=R(ge);function U(T,M){var V=ne[T&255];return M<=8?V>>>8-M:(V=V<<8|ne[T>>8&255],M<=16?V>>>16-M:(V=V<<8|ne[T>>16&255],V>>>24-M))}function Ue(T,M){var V=M&7,q=M>>>3;return(T[q]|(V<=6?0:T[q+1]<<8))>>>V&3}function ie(T,M){var V=M&7,q=M>>>3;return(T[q]|(V<=5?0:T[q+1]<<8))>>>V&7}function te(T,M){var V=M&7,q=M>>>3;return(T[q]|(V<=4?0:T[q+1]<<8))>>>V&15}function Ee(T,M){var V=M&7,q=M>>>3;return(T[q]|(V<=3?0:T[q+1]<<8))>>>V&31}function ce(T,M){var V=M&7,q=M>>>3;return(T[q]|(V<=1?0:T[q+1]<<8))>>>V&127}function we(T,M,V){var q=M&7,ee=M>>>3,se=(1<<V)-1,Oe=T[ee]>>>q;return V<8-q||(Oe|=T[ee+1]<<8-q,V<16-q)||(Oe|=T[ee+2]<<16-q,V<24-q)||(Oe|=T[ee+3]<<24-q),Oe&se}function Re(T,M,V){var q=M&7,ee=M>>>3;return q<=5?T[ee]|=(V&7)<<q:(T[ee]|=V<<q&255,T[ee+1]=(V&7)>>8-q),M+3}function We(T,M,V){var q=M&7,ee=M>>>3;return V=(V&1)<<q,T[ee]|=V,M+1}function pt(T,M,V){var q=M&7,ee=M>>>3;return V<<=q,T[ee]|=V&255,V>>>=8,T[ee+1]=V,M+8}function _t(T,M,V){var q=M&7,ee=M>>>3;return V<<=q,T[ee]|=V&255,V>>>=8,T[ee+1]=V&255,T[ee+2]=V>>>8,M+16}function He(T,M){var V=T.length,q=2*V>M?2*V:M+5,ee=0;if(V>=M)return T;if(Fn){var se=TH(q);if(T.copy)T.copy(se);else for(;ee<T.length;++ee)se[ee]=T[ee];return se}else if(H){var Oe=new Uint8Array(q);if(Oe.set)Oe.set(T);else for(;ee<V;++ee)Oe[ee]=T[ee];return Oe}return T.length=q,T}function gt(T){for(var M=new Array(T),V=0;V<T;++V)M[V]=0;return M}function ut(T,M,V){var q=1,ee=0,se=0,Oe=0,Ke=0,ot=T.length,Fe=H?new Uint16Array(32):gt(32);for(se=0;se<32;++se)Fe[se]=0;for(se=ot;se<V;++se)T[se]=0;ot=T.length;var Xe=H?new Uint16Array(ot):gt(ot);for(se=0;se<ot;++se)Fe[ee=T[se]]++,q<ee&&(q=ee),Xe[se]=0;for(Fe[0]=0,se=1;se<=q;++se)Fe[se+16]=Ke=Ke+Fe[se-1]<<1;for(se=0;se<ot;++se)Ke=T[se],Ke!=0&&(Xe[se]=Fe[Ke+16]++);var xe=0;for(se=0;se<ot;++se)if(xe=T[se],xe!=0)for(Ke=U(Xe[se],q)>>q-xe,Oe=(1<<q+4-xe)-1;Oe>=0;--Oe)M[Ke|Oe<<xe]=xe&15|se<<4;return q}var vt=H?new Uint16Array(512):gt(512),Pe=H?new Uint16Array(32):gt(32);if(!H){for(var ct=0;ct<512;++ct)vt[ct]=0;for(ct=0;ct<32;++ct)Pe[ct]=0}(function(){for(var T=[],M=0;M<32;M++)T.push(5);ut(T,Pe,32);var V=[];for(M=0;M<=143;M++)V.push(8);for(;M<=255;M++)V.push(9);for(;M<=279;M++)V.push(7);for(;M<=287;M++)V.push(8);ut(V,vt,288)})();var lt=function(){for(var M=H?new Uint8Array(32768):[],V=0,q=0;V<J.length-1;++V)for(;q<J[V+1];++q)M[q]=V;for(;q<32768;++q)M[q]=29;var ee=H?new Uint8Array(259):[];for(V=0,q=0;V<Y.length-1;++V)for(;q<Y[V+1];++q)ee[q]=V;function se(Ke,ot){for(var Fe=0;Fe<Ke.length;){var Xe=Math.min(65535,Ke.length-Fe),xe=Fe+Xe==Ke.length;for(ot.write_shift(1,+xe),ot.write_shift(2,Xe),ot.write_shift(2,~Xe&65535);Xe-- >0;)ot[ot.l++]=Ke[Fe++]}return ot.l}function Oe(Ke,ot){for(var Fe=0,Xe=0,xe=H?new Uint16Array(32768):[];Xe<Ke.length;){var Ge=Math.min(65535,Ke.length-Xe);if(Ge<10){for(Fe=Re(ot,Fe,+(Xe+Ge==Ke.length)),Fe&7&&(Fe+=8-(Fe&7)),ot.l=Fe/8|0,ot.write_shift(2,Ge),ot.write_shift(2,~Ge&65535);Ge-- >0;)ot[ot.l++]=Ke[Xe++];Fe=ot.l*8;continue}Fe=Re(ot,Fe,+(Xe+Ge==Ke.length)+2);for(var qe=0;Ge-- >0;){var it=Ke[Xe];qe=(qe<<5^it)&32767;var Et=-1,Pt=0;if((Et=xe[qe])&&(Et|=Xe&-32768,Et>Xe&&(Et-=32768),Et<Xe))for(;Ke[Et+Pt]==Ke[Xe+Pt]&&Pt<250;)++Pt;if(Pt>2){it=ee[Pt],it<=22?Fe=pt(ot,Fe,ne[it+1]>>1)-1:(pt(ot,Fe,3),Fe+=5,pt(ot,Fe,ne[it-23]>>5),Fe+=3);var pr=it<8?0:it-4>>2;pr>0&&(_t(ot,Fe,Pt-Y[it]),Fe+=pr),it=M[Xe-Et],Fe=pt(ot,Fe,ne[it]>>3),Fe-=3;var Ot=it<4?0:it-2>>1;Ot>0&&(_t(ot,Fe,Xe-Et-J[it]),Fe+=Ot);for(var Dt=0;Dt<Pt;++Dt)xe[qe]=Xe&32767,qe=(qe<<5^Ke[Xe])&32767,++Xe;Ge-=Pt-1}else it<=143?it=it+48:Fe=We(ot,Fe,1),Fe=pt(ot,Fe,ne[it]),xe[qe]=Xe&32767,++Xe}Fe=pt(ot,Fe,0)-1}return ot.l=(Fe+7)/8|0,ot.l}return function(ot,Fe){return ot.length<8?se(ot,Fe):Oe(ot,Fe)}}();function be(T){var M=Zt(50+Math.floor(T.length*1.1)),V=lt(T,M);return M.slice(0,V)}var ue=H?new Uint16Array(32768):gt(32768),Le=H?new Uint16Array(32768):gt(32768),ke=H?new Uint16Array(128):gt(128),Ae=1,Ye=1;function yt(T,M){var V=Ee(T,M)+257;M+=5;var q=Ee(T,M)+1;M+=5;var ee=te(T,M)+4;M+=4;for(var se=0,Oe=H?new Uint8Array(19):gt(19),Ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ot=1,Fe=H?new Uint8Array(8):gt(8),Xe=H?new Uint8Array(8):gt(8),xe=Oe.length,Ge=0;Ge<ee;++Ge)Oe[L[Ge]]=se=ie(T,M),ot<se&&(ot=se),Fe[se]++,M+=3;var qe=0;for(Fe[0]=0,Ge=1;Ge<=ot;++Ge)Xe[Ge]=qe=qe+Fe[Ge-1]<<1;for(Ge=0;Ge<xe;++Ge)(qe=Oe[Ge])!=0&&(Ke[Ge]=Xe[qe]++);var it=0;for(Ge=0;Ge<xe;++Ge)if(it=Oe[Ge],it!=0){qe=ne[Ke[Ge]]>>8-it;for(var Et=(1<<7-it)-1;Et>=0;--Et)ke[qe|Et<<it]=it&7|Ge<<3}var Pt=[];for(ot=1;Pt.length<V+q;)switch(qe=ke[ce(T,M)],M+=qe&7,qe>>>=3){case 16:for(se=3+Ue(T,M),M+=2,qe=Pt[Pt.length-1];se-- >0;)Pt.push(qe);break;case 17:for(se=3+ie(T,M),M+=3;se-- >0;)Pt.push(0);break;case 18:for(se=11+ce(T,M),M+=7;se-- >0;)Pt.push(0);break;default:Pt.push(qe),ot<qe&&(ot=qe);break}var pr=Pt.slice(0,V),Ot=Pt.slice(V);for(Ge=V;Ge<286;++Ge)pr[Ge]=0;for(Ge=q;Ge<30;++Ge)Ot[Ge]=0;return Ae=ut(pr,ue,286),Ye=ut(Ot,Le,30),M}function At(T,M){if(T[0]==3&&!(T[1]&3))return[cm(M),2];for(var V=0,q=0,ee=TH(M||1<<18),se=0,Oe=ee.length>>>0,Ke=0,ot=0;!(q&1);){if(q=ie(T,V),V+=3,q>>>1)q>>1==1?(Ke=9,ot=5):(V=yt(T,V),Ke=Ae,ot=Ye);else{V&7&&(V+=8-(V&7));var Fe=T[V>>>3]|T[(V>>>3)+1]<<8;if(V+=32,Fe>0)for(!M&&Oe<se+Fe&&(ee=He(ee,se+Fe),Oe=ee.length);Fe-- >0;)ee[se++]=T[V>>>3],V+=8;continue}for(;;){!M&&Oe<se+32767&&(ee=He(ee,se+32767),Oe=ee.length);var Xe=we(T,V,Ke),xe=q>>>1==1?vt[Xe]:ue[Xe];if(V+=xe&15,xe>>>=4,!(xe>>>8&255))ee[se++]=xe;else{if(xe==256)break;xe-=257;var Ge=xe<8?0:xe-4>>2;Ge>5&&(Ge=0);var qe=se+Y[xe];Ge>0&&(qe+=we(T,V,Ge),V+=Ge),Xe=we(T,V,ot),xe=q>>>1==1?Pe[Xe]:Le[Xe],V+=xe&15,xe>>>=4;var it=xe<4?0:xe-2>>1,Et=J[xe];for(it>0&&(Et+=we(T,V,it),V+=it),!M&&Oe<qe&&(ee=He(ee,qe+100),Oe=ee.length);se<qe;)ee[se]=ee[se-Et],++se}}}return M?[ee,V+7>>>3]:[ee.slice(0,se),V+7>>>3]}function he(T,M){var V=T.slice(T.l||0),q=At(V,M);return T.l+=q[1],q[0]}function re(T,M){if(T)typeof console<"u"&&console.error(M);else throw new Error(M)}function oe(T,M){var V=T;nl(V,0);var q=[],ee=[],se={FileIndex:q,FullPaths:ee};_(se,{root:M.root});for(var Oe=V.length-4;(V[Oe]!=80||V[Oe+1]!=75||V[Oe+2]!=5||V[Oe+3]!=6)&&Oe>=0;)--Oe;V.l=Oe+4,V.l+=4;var Ke=V.read_shift(2);V.l+=6;var ot=V.read_shift(4);for(V.l=ot,Oe=0;Oe<Ke;++Oe){V.l+=20;var Fe=V.read_shift(4),Xe=V.read_shift(4),xe=V.read_shift(2),Ge=V.read_shift(2),qe=V.read_shift(2);V.l+=8;var it=V.read_shift(4),Et=l(V.slice(V.l+xe,V.l+xe+Ge));V.l+=xe+Ge+qe;var Pt=V.l;V.l=it+4,Ve(V,Fe,Xe,se,Et),V.l=Pt}return se}function Ve(T,M,V,q,ee){T.l+=2;var se=T.read_shift(2),Oe=T.read_shift(2),Ke=o(T);if(se&8257)throw new Error("Unsupported ZIP encryption");for(var ot=T.read_shift(4),Fe=T.read_shift(4),Xe=T.read_shift(4),xe=T.read_shift(2),Ge=T.read_shift(2),qe="",it=0;it<xe;++it)qe+=String.fromCharCode(T[T.l++]);if(Ge){var Et=l(T.slice(T.l,T.l+Ge));(Et[21589]||{}).mt&&(Ke=Et[21589].mt),((ee||{})[21589]||{}).mt&&(Ke=ee[21589].mt)}T.l+=Ge;var Pt=T.slice(T.l,T.l+Fe);switch(Oe){case 8:Pt=G(T,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Oe)}var pr=!1;se&8&&(ot=T.read_shift(4),ot==134695760&&(ot=T.read_shift(4),pr=!0),Fe=T.read_shift(4),Xe=T.read_shift(4)),Fe!=M&&re(pr,"Bad compressed size: "+M+" != "+Fe),Xe!=V&&re(pr,"Bad uncompressed size: "+V+" != "+Xe),Ie(q,qe,Pt,{unsafe:!0,mt:Ke})}function de(T,M){var V=M||{},q=[],ee=[],se=Zt(1),Oe=V.compression?8:0,Ke=0,ot=0,Fe=0,Xe=0,xe=0,Ge=T.FullPaths[0],qe=Ge,it=T.FileIndex[0],Et=[],Pt=0;for(ot=1;ot<T.FullPaths.length;++ot)if(qe=T.FullPaths[ot].slice(Ge.length),it=T.FileIndex[ot],!(!it.size||!it.content||qe=="Sh33tJ5")){var pr=Xe,Ot=Zt(qe.length);for(Fe=0;Fe<qe.length;++Fe)Ot.write_shift(1,qe.charCodeAt(Fe)&127);Ot=Ot.slice(0,Ot.l),Et[xe]=lke.buf(it.content,0);var Dt=it.content;Oe==8&&(Dt=z(Dt)),se=Zt(30),se.write_shift(4,67324752),se.write_shift(2,20),se.write_shift(2,Ke),se.write_shift(2,Oe),it.mt?s(se,it.mt):se.write_shift(4,0),se.write_shift(-4,Et[xe]),se.write_shift(4,Dt.length),se.write_shift(4,it.content.length),se.write_shift(2,Ot.length),se.write_shift(2,0),Xe+=se.length,q.push(se),Xe+=Ot.length,q.push(Ot),Xe+=Dt.length,q.push(Dt),se=Zt(46),se.write_shift(4,33639248),se.write_shift(2,0),se.write_shift(2,20),se.write_shift(2,Ke),se.write_shift(2,Oe),se.write_shift(4,0),se.write_shift(-4,Et[xe]),se.write_shift(4,Dt.length),se.write_shift(4,it.content.length),se.write_shift(2,Ot.length),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(4,0),se.write_shift(4,pr),Pt+=se.l,ee.push(se),Pt+=Ot.length,ee.push(Ot),++xe}return se=Zt(22),se.write_shift(4,101010256),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,xe),se.write_shift(2,xe),se.write_shift(4,Pt),se.write_shift(4,Xe),se.write_shift(2,0),Po([Po(q),Po(ee),se])}var Se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function dt(T,M){if(T.ctype)return T.ctype;var V=T.name||"",q=V.match(/\.([^\.]+)$/);return q&&Se[q[1]]||M&&(q=(V=M).match(/[\.\\]([^\.\\])+$/),q&&Se[q[1]])?Se[q[1]]:"application/octet-stream"}function xt(T){for(var M=N2(T),V=[],q=0;q<M.length;q+=76)V.push(M.slice(q,q+76));return V.join(`\r
`)+`\r
`}function ht(T){var M=T.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var Xe=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});M=M.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),M.charAt(0)==`
`&&(M="=0D"+M.slice(1)),M=M.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var V=[],q=M.split(`\r
`),ee=0;ee<q.length;++ee){var se=q[ee];if(se.length==0){V.push("");continue}for(var Oe=0;Oe<se.length;){var Ke=76,ot=se.slice(Oe,Oe+Ke);ot.charAt(Ke-1)=="="?Ke--:ot.charAt(Ke-2)=="="?Ke-=2:ot.charAt(Ke-3)=="="&&(Ke-=3),ot=se.slice(Oe,Oe+Ke),Oe+=Ke,Oe<se.length&&(ot+="="),V.push(ot)}}return V.join(`\r
`)}function bt(T){for(var M=[],V=0;V<T.length;++V){for(var q=T[V];V<=T.length&&q.charAt(q.length-1)=="=";)q=q.slice(0,q.length-1)+T[++V];M.push(q)}for(var ee=0;ee<M.length;++ee)M[ee]=M[ee].replace(/[=][0-9A-Fa-f]{2}/g,function(se){return String.fromCharCode(parseInt(se.slice(1),16))});return nu(M.join(`\r
`))}function et(T,M,V){for(var q="",ee="",se="",Oe,Ke=0;Ke<10;++Ke){var ot=M[Ke];if(!ot||ot.match(/^\s*$/))break;var Fe=ot.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":q=Fe[2].trim();break;case"content-type":se=Fe[2].trim();break;case"content-transfer-encoding":ee=Fe[2].trim();break}}switch(++Ke,ee.toLowerCase()){case"base64":Oe=nu(pu(M.slice(Ke).join("")));break;case"quoted-printable":Oe=bt(M.slice(Ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ee)}var Xe=Ie(T,q.slice(V.length),Oe,{unsafe:!0});se&&(Xe.ctype=se)}function Ne(T,M){if(ae(T.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var V=M&&M.root||"",q=(Fn&&Buffer.isBuffer(T)?T.toString("binary"):ae(T)).split(`\r
`),ee=0,se="";for(ee=0;ee<q.length;++ee)if(se=q[ee],!!/^Content-Location:/i.test(se)&&(se=se.slice(se.indexOf("file")),V||(V=se.slice(0,se.lastIndexOf("/")+1)),se.slice(0,V.length)!=V))for(;V.length>0&&(V=V.slice(0,V.length-1),V=V.slice(0,V.lastIndexOf("/")+1),se.slice(0,V.length)!=V););var Oe=(q[1]||"").match(/boundary="(.*?)"/);if(!Oe)throw new Error("MAD cannot find boundary");var Ke="--"+(Oe[1]||""),ot=[],Fe=[],Xe={FileIndex:ot,FullPaths:Fe};_(Xe);var xe,Ge=0;for(ee=0;ee<q.length;++ee){var qe=q[ee];qe!==Ke&&qe!==Ke+"--"||(Ge++&&et(Xe,q.slice(xe,ee),V),xe=ee)}return Xe}function mt(T,M){var V=M||{},q=V.boundary||"SheetJS";q="------="+q;for(var ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+q.slice(2)+'"',"","",""],se=T.FullPaths[0],Oe=se,Ke=T.FileIndex[0],ot=1;ot<T.FullPaths.length;++ot)if(Oe=T.FullPaths[ot].slice(se.length),Ke=T.FileIndex[ot],!(!Ke.size||!Ke.content||Oe=="Sh33tJ5")){Oe=Oe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var Fe=Ke.content,Xe=Fn&&Buffer.isBuffer(Fe)?Fe.toString("binary"):ae(Fe),xe=0,Ge=Math.min(1024,Xe.length),qe=0,it=0;it<=Ge;++it)(qe=Xe.charCodeAt(it))>=32&&qe<128&&++xe;var Et=xe>=Ge*4/5;ee.push(q),ee.push("Content-Location: "+(V.root||"file:///C:/SheetJS/")+Oe),ee.push("Content-Transfer-Encoding: "+(Et?"quoted-printable":"base64")),ee.push("Content-Type: "+dt(Ke,Oe)),ee.push(""),ee.push(Et?ht(Xe):xt(Xe))}return ee.push(q+`--\r
`),ee.join(`\r
`)}function W(T){var M={};return _(M,T),M}function Ie(T,M,V,q){var ee=q&&q.unsafe;ee||_(T);var se=!ee&&sn.find(T,M);if(!se){var Oe=T.FullPaths[0];M.slice(0,Oe.length)==Oe?Oe=M:(Oe.slice(-1)!="/"&&(Oe+="/"),Oe=(Oe+M).replace("//","/")),se={name:a(M),type:2},T.FileIndex.push(se),T.FullPaths.push(Oe),ee||sn.utils.cfb_gc(T)}return se.content=V,se.size=V?V.length:0,q&&(q.CLSID&&(se.clsid=q.CLSID),q.mt&&(se.mt=q.mt),q.ct&&(se.ct=q.ct)),se}function Je(T,M){_(T);var V=sn.find(T,M);if(V){for(var q=0;q<T.FileIndex.length;++q)if(T.FileIndex[q]==V)return T.FileIndex.splice(q,1),T.FullPaths.splice(q,1),!0}return!1}function tt(T,M,V){_(T);var q=sn.find(T,M);if(q){for(var ee=0;ee<T.FileIndex.length;++ee)if(T.FileIndex[ee]==q)return T.FileIndex[ee].name=a(V),T.FullPaths[ee]=V,!0}return!1}function ft(T){E(T,!0)}return e.find=P,e.read=I,e.parse=d,e.write=je,e.writeFile=ye,e.utils={cfb_new:W,cfb_add:Ie,cfb_del:Je,cfb_mov:tt,cfb_gc:ft,ReadShift:Nb,CheckField:kne,prep_blob:nl,bconcat:Po,use_zlib:O,_deflateRaw:be,_inflateRaw:he,consts:pe},e}();function cke(t){return typeof t=="string"?Yj(t):Array.isArray(t)?OTe(t):t}function Pw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Yj(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Ff(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([cke(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=wm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function uke(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function ci(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function UH(t,e){for(var r=[],n=ci(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function Zj(t){for(var e=[],r=ci(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function e4(t){for(var e=[],r=ci(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function dke(t){for(var e=[],r=ci(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var MS=new Date(1899,11,30,0,0,0);function co(t,e){var r=t.getTime(),n=MS.getTime()+(t.getTimezoneOffset()-MS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var fne=new Date,fke=MS.getTime()+(fne.getTimezoneOffset()-MS.getTimezoneOffset())*6e4,QH=fne.getTimezoneOffset();function t4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+fke),e.getTimezoneOffset()!==QH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-QH)*6e4),e}function hke(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var VH=new Date("2017-02-19T19:06:09.000Z"),hne=isNaN(VH.getFullYear())?new Date("2/19/17"):VH,Ake=hne.getFullYear()==2017;function ms(t,e){var r=new Date(t);if(Ake)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(hne.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Zp(t,e){if(Fn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Ff(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Ff(ene(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Ff(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Ff(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ps(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ps(t[r]));return e}function si(t,e){for(var r="";r.length<e;)r+=t;return r}function Xd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var mke=["january","february","march","april","may","june","july","august","september","october","november","december"];function Pv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&mke.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var pke=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Ane(t){return t?t.content&&t.type?Zp(t.content,!0):t.data?Hy(t.data):t.asNodeBuffer&&Fn?Hy(t.asNodeBuffer().toString("binary")):t.asBinary?Hy(t.asBinary()):t._data&&t._data.getContent?Hy(Zp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function mne(t){if(!t)return null;if(t.data)return PH(t.data);if(t.asNodeBuffer&&Fn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?PH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function gke(t){return t&&t.name.slice(-4)===".bin"?mne(t):Ane(t)}function Gu(t,e){for(var r=t.FullPaths||ci(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function V6(t,e){var r=Gu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Bi(t,e,r){if(!r)return gke(V6(t,e));if(!e)return null;try{return Bi(t,e)}catch{return null}}function au(t,e,r){if(!r)return Ane(V6(t,e));if(!e)return null;try{return au(t,e)}catch{return null}}function xke(t,e,r){return mne(V6(t,e))}function HH(t){for(var e=t.FullPaths||ci(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Pn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Fn?n=xA(r):n=DTe(r),sn.utils.cfb_add(t,e,n)}sn.utils.cfb_add(t,e,r)}else t.file(e,r)}function H6(){return sn.utils.cfb_new()}function pne(t,e){switch(e.type){case"base64":return sn.read(t,{type:"base64"});case"binary":return sn.read(t,{type:"binary"});case"buffer":case"array":return sn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Gy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ii=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,vke=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,$H=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,yke=/<[^>]*>/g,Ul=Ii.match($H)?$H:yke,bke=/<\w*:/,wke=/<(\/?)\w+:/;function mn(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var o=t.match(vke),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function Yf(t){return t.replace(wke,"<$1")}var gne={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$6=Zj(gne),ra=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return gne[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),G6=/[&<>'"]/g,Nke=/[\u0000-\u0008\u000b-\u001f]/g;function ka(t){var e=t+"";return e.replace(G6,function(r){return $6[r]}).replace(Nke,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function GH(t){return ka(t).replace(/ /g,"_x0020_")}var xne=/[\u0000-\u001f]/g;function K6(t){var e=t+"";return e.replace(G6,function(r){return $6[r]}).replace(/\n/g,"<br/>").replace(xne,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Cke(t){var e=t+"";return e.replace(G6,function(r){return $6[r]}).replace(xne,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var KH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function _ke(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ds(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function C5(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function qH(t){var e=cm(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function zH(t){return xA(t,"binary").toString("utf8")}var $C="foo bar baz",Ua=Fn&&(zH($C)==C5($C)&&zH||qH($C)==C5($C)&&qH)||C5,Ff=Fn?function(t){return xA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},_2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),vne=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Eke=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Ske=/<\/?(?:vt:)?variant>/g,Ike=/<(?:vt:)([^>]*)>([\s\S]*)</;function WH(t,e){var r=mn(t),n=t.match(Eke(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(Ske,"").match(Ike);o&&a.push({v:Ua(o[2]),t:o[1]})}),a}var yne=/(^\s|\s$|\n)/;function sl(t,e){return"<"+t+(e.match(yne)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function E2(t){return ci(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Sr(t,e,r){return"<"+t+(r!=null?E2(r):"")+(e!=null?(e.match(yne)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function $k(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function jke(t,e){switch(typeof t){case"string":var r=Sr("vt:lpwstr",ka(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Sr((t|0)==t?"vt:i4":"vt:r8",ka(String(t)));case"boolean":return Sr("vt:bool",t?"true":"false")}if(t instanceof Date)return Sr("vt:filetime",$k(t));throw new Error("Unable to serialize "+t)}function q6(t){if(Fn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ua(wm(L6(t)));throw new Error("Bad input format: expected Buffer or string")}var S2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,so={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ng=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],tu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pke(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Bke(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var XH=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},YH=Fn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:xA(e)})):XH(t)}:XH,JH=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(kh(t,a)));return n.join("").replace(ic,"")},z6=Fn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(ic,""):JH(t,e,r)}:JH,ZH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},bne=Fn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):ZH(t,e,r)}:ZH,e$=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Nx(t,a)));return n.join("")},Bw=Fn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):e$(e,r,n)}:e$,wne=function(t,e){var r=ru(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},Nne=wne,Cne=function(t,e){var r=ru(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},_ne=Cne,Ene=function(t,e){var r=2*ru(t,e);return r>0?Bw(t,e+4,e+4+r-1):""},Sne=Ene,Ine=function(e,r){var n=ru(e,r);return n>0?z6(e,r+4,r+4+n):""},jne=Ine,Pne=function(t,e){var r=ru(t,e);return r>0?Bw(t,e+4,e+4+r):""},Bne=Pne,Tne=function(t,e){return Pke(t,e)},LS=Tne,W6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Fn&&(Nne=function(e,r){if(!Buffer.isBuffer(e))return wne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},_ne=function(e,r){if(!Buffer.isBuffer(e))return Cne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Sne=function(e,r){if(!Buffer.isBuffer(e))return Ene(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},jne=function(e,r){if(!Buffer.isBuffer(e))return Ine(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Bne=function(e,r){if(!Buffer.isBuffer(e))return Pne(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},LS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Tne(e,r)},W6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Nx=function(t,e){return t[e]},kh=function(t,e){return t[e+1]*256+t[e]},Tke=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ru=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},sp=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},kke=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Nb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,Fn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(kh(this,u)),u+=2;t*=2;break;case"utf8":r=Bw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=z6(this,this.l,this.l+t);break;case"wstr":return Nb.call(this,t,"dbcs");case"lpstr-ansi":r=Nne(this,this.l),t=4+ru(this,this.l);break;case"lpstr-cp":r=_ne(this,this.l),t=4+ru(this,this.l);break;case"lpwstr":r=Sne(this,this.l),t=4+2*ru(this,this.l);break;case"lpp4":t=4+ru(this,this.l),r=jne(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ru(this,this.l),r=Bne(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=Nx(this,this.l+t++))!==0;)s.push(HC(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=kh(this,this.l+t))!==0;)s.push(HC(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nx(this,u),this.l=u+1,l=Nb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(HC(kh(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Nx(this,u),this.l=u+1,l=Nb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(HC(Nx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=Nx(this,this.l),this.l++,n;case 2:return n=(e==="i"?Tke:kh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?sp:kke)(this,this.l),this.l+=4,n):(a=ru(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=LS(this,this.l):a=LS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=bne(this,this.l,t);break}}return this.l+=t,r}var Fke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Oke=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Dke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Rke(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)Dke(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Fke(this,e,this.l);break;case 8:if(n=8,r==="f"){Bke(this,e,this.l);break}case 16:break;case-4:n=4,Oke(this,e,this.l);break}return this.l+=n,this}function kne(t,e){var r=bne(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function nl(t,e){t.l=e,t.read_shift=Nb,t.chk=kne,t.write_shift=Rke}function Ml(t,e){t.l+=e}function Zt(t){var e=cm(t);return nl(e,0),e}function vA(t,e,r){if(t){var n,a,s;nl(t,t.l||0);for(var o=t.length,l=0,c=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=k2[l]||k2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function Tc(){var t=[],e=Fn?256:2048,r=function(u){var d=Zt(u);return nl(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Po(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function cr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=k2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&W6(r)&&t.push(r)}}function Cb(t,e,r){var n=ps(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function t$(t,e,r){var n=ps(t);return n.s=Cb(n.s,e.s,r),n.e=Cb(n.e,e.s,r),n}function _b(t,e){if(t.cRel&&t.c<0)for(t=ps(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ps(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=An(t);return!t.cRel&&t.cRel!=null&&(r=Uke(r)),!t.rRel&&t.rRel!=null&&(r=Mke(r)),r}function _5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Hs(t.s.c)+":"+(t.e.cRel?"":"$")+Hs(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ei(t.s.r)+":"+(t.e.rRel?"":"$")+Ei(t.e.r):_b(t.s,e.biff)+":"+_b(t.e,e.biff)}function X6(t){return parseInt(Lke(t),10)-1}function Ei(t){return""+(t+1)}function Mke(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Lke(t){return t.replace(/\$(\d+)$/,"$1")}function Y6(t){for(var e=Qke(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Hs(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Uke(t){return t.replace(/^([A-Z])/,"$$$1")}function Qke(t){return t.replace(/^\$([A-Z])/,"$1")}function Vke(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function $s(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function An(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function kc(t){var e=t.indexOf(":");return e==-1?{s:$s(t),e:$s(t)}:{s:$s(t.slice(0,e)),e:$s(t.slice(e+1))}}function En(t,e){return typeof e>"u"||typeof e=="number"?En(t.s,t.e):(typeof t!="string"&&(t=An(t)),typeof e!="string"&&(e=An(e)),t==e?t:t+":"+e)}function na(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function r$(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=ud(t.z,r?co(e):e)}catch{}try{return t.w=ud((t.XF||{}).numFmtId||(r?14:0),r?co(e):e)}catch{return""+e}}function nA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?yA[t.v]||t.v:e==null?r$(t,t.v):r$(t,e))}function Nm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Fne(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?$s(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=na(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=e[f].length;++A)if(!(typeof e[f][A]>"u")){var h={v:e[f][A]},m=o+f,p=l+A;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][A]&&typeof e[f][A]=="object"&&!Array.isArray(e[f][A])&&!(e[f][A]instanceof Date))h=e[f][A];else if(Array.isArray(h.v)&&(h.f=e[f][A][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||hn[14],n.cellDates?(h.t="d",h.w=ud(h.z,co(h.v))):(h.t="n",h.v=co(h.v),h.w=ud(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var g=An({c:p,r:m});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return u.s.c<1e7&&(s["!ref"]=En(u)),s}function d1(t,e){return Fne(null,t,e)}function Hke(t){return t.read_shift(4,"i")}function Yd(t,e){return e||(e=Zt(4)),e.write_shift(4,t),e}function Ol(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function To(t,e){var r=!1;return e==null&&(r=!0,e=Zt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function $ke(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Gke(t,e){return e||(e=Zt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function J6(t,e){var r=t.l,n=t.read_shift(1),a=Ol(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push($ke(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function Kke(t,e){var r=!1;return e==null&&(r=!0,e=Zt(15+4*t.t.length)),e.write_shift(1,0),To(t.t,e),r?e.slice(0,e.l):e}var qke=J6;function zke(t,e){var r=!1;return e==null&&(r=!0,e=Zt(23+4*t.t.length)),e.write_shift(1,1),To(t.t,e),e.write_shift(4,1),Gke({},e),r?e.slice(0,e.l):e}function pd(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Cg(t,e){return e==null&&(e=Zt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function _g(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Eg(t,e){return e==null&&(e=Zt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Wke=Ol,One=To;function Z6(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function US(t,e){var r=!1;return e==null&&(r=!0,e=Zt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Xke=Ol,Gk=Z6,eR=US;function tR(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?LS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):sp(e,0)>>2;return r?a/100:a}function Dne(t,e){e==null&&(e=Zt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Rne(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Yke(t,e){return e||(e=Zt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Sg=Rne,f1=Yke;function kl(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function eg(t,e){return(e||Zt(8)).write_shift(8,t,"f")}function Jke(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Sp[a];u&&(e.rgb=j2(u));break;case 2:e.rgb=j2([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function QS(t,e){if(e||(e=Zt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function Zke(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function eFe(t,e){e||(e=Zt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Mne(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function tFe(t){return Mne(t,1)}function rFe(t){return Mne(t,2)}var rR=2,bc=3,GC=11,n$=12,VS=19,KC=64,nFe=65,aFe=71,sFe=4108,iFe=4126,Eo=80,Lne=81,oFe=[Eo,Lne],Kk={1:{n:"CodePage",t:rR},2:{n:"Category",t:Eo},3:{n:"PresentationFormat",t:Eo},4:{n:"ByteCount",t:bc},5:{n:"LineCount",t:bc},6:{n:"ParagraphCount",t:bc},7:{n:"SlideCount",t:bc},8:{n:"NoteCount",t:bc},9:{n:"HiddenCount",t:bc},10:{n:"MultimediaClipCount",t:bc},11:{n:"ScaleCrop",t:GC},12:{n:"HeadingPairs",t:sFe},13:{n:"TitlesOfParts",t:iFe},14:{n:"Manager",t:Eo},15:{n:"Company",t:Eo},16:{n:"LinksUpToDate",t:GC},17:{n:"CharacterCount",t:bc},19:{n:"SharedDoc",t:GC},22:{n:"HyperlinksChanged",t:GC},23:{n:"AppVersion",t:bc,p:"version"},24:{n:"DigSig",t:nFe},26:{n:"ContentType",t:Eo},27:{n:"ContentStatus",t:Eo},28:{n:"Language",t:Eo},29:{n:"Version",t:Eo},255:{},2147483648:{n:"Locale",t:VS},2147483651:{n:"Behavior",t:VS},1919054434:{}},qk={1:{n:"CodePage",t:rR},2:{n:"Title",t:Eo},3:{n:"Subject",t:Eo},4:{n:"Author",t:Eo},5:{n:"Keywords",t:Eo},6:{n:"Comments",t:Eo},7:{n:"Template",t:Eo},8:{n:"LastAuthor",t:Eo},9:{n:"RevNumber",t:Eo},10:{n:"EditTime",t:KC},11:{n:"LastPrinted",t:KC},12:{n:"CreatedDate",t:KC},13:{n:"ModifiedDate",t:KC},14:{n:"PageCount",t:bc},15:{n:"WordCount",t:bc},16:{n:"CharCount",t:bc},17:{n:"Thumbnail",t:aFe},18:{n:"Application",t:Eo},19:{n:"DocSecurity",t:bc},255:{},2147483648:{n:"Locale",t:VS},2147483651:{n:"Behavior",t:VS},1919054434:{}},a$={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},lFe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function cFe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var uFe=cFe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sp=ps(uFe),yA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Une={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},zk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},qC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function nR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function dFe(t){var e=nR();if(!t||!t.match)return e;var r={};if((t.match(Ul)||[]).forEach(function(n){var a=mn(n);switch(a[0].replace(bke,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[zk[a.ContentType]]!==void 0&&e[zk[a.ContentType]].push(a.PartName);break}}),e.xmlns!==so.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Qne(t,e){var r=dke(zk),n=[],a;n[n.length]=Ii,n[n.length]=Sr("Types",null,{xmlns:so.CT,"xmlns:xsd":so.xsd,"xmlns:xsi":so.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Sr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=Sr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:qC[c][e.bookType]||qC[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Sr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:qC[c][e.bookType]||qC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Sr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Un={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function I2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Eb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ul)||[]).forEach(function(a){var s=mn(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Gy(s.Target,e);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function iv(t){var e=[Ii,Sr("Relationships",null,{xmlns:so.RELS})];return ci(t["!id"]).forEach(function(r){e[e.length]=Sr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ja(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Un.HLINK,Un.XPATH,Un.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var fFe="application/vnd.oasis.opendocument.spreadsheet";function hFe(t,e){for(var r=q6(t),n,a;n=S2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=mn(n[0],!1),a.path=="/"&&a.type!==fFe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function AFe(t){var e=[Ii];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function s$(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function mFe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function pFe(t){var e=[Ii];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(s$(t[r][0],t[r][1])),e.push(mFe("",t[r][0]));return e.push(s$("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Vne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+FS.version+"</meta:generator></office:meta></office:document-meta>"}var id=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],gFe=function(){for(var t=new Array(id.length),e=0;e<id.length;++e){var r=id[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Hne(t){var e={};t=Ua(t);for(var r=0;r<id.length;++r){var n=id[r],a=t.match(gFe[r]);a!=null&&a.length>0&&(e[n[1]]=ra(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=ms(e[n[1]]))}return e}function E5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ka(e),n[n.length]=r?Sr(t,e,r):sl(t,e))}function $ne(t,e){var r=e||{},n=[Ii,Sr("cp:coreProperties",null,{"xmlns:cp":so.CORE_PROPS,"xmlns:dc":so.dc,"xmlns:dcterms":so.dcterms,"xmlns:dcmitype":so.dcmitype,"xmlns:xsi":so.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&E5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:$k(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&E5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:$k(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=id.length;++s){var o=id[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&E5(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Ip=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Gne=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Kne(t,e,r,n){var a=[];if(typeof t=="string")a=WH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var o=typeof e=="string"?WH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function xFe(t,e,r){var n={};return e||(e={}),t=Ua(t),Ip.forEach(function(a){var s=(t.match(_2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=ra(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Kne(n.HeadingPairs,n.TitlesOfParts,e,r),e}function qne(t){var e=[],r=Sr;return t||(t={}),t.Application="SheetJS",e[e.length]=Ii,e[e.length]=Sr("Properties",null,{xmlns:so.EXT_PROPS,"xmlns:vt":so.vt}),Ip.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ka(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ka(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var vFe=/<[^>]+>[^<]*/g;function yFe(t,e){var r={},n="",a=t.match(vFe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=mn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ra(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=ra(d);break;case"bool":r[n]=ds(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ms(d);break;case"cy":case"error":r[n]=ra(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function zne(t){var e=[Ii,Sr("Properties",null,{xmlns:so.CUST_PROPS,"xmlns:vt":so.vt})];if(!t)return e.join("");var r=1;return ci(t).forEach(function(a){++r,e[e.length]=Sr("property",jke(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ka(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Wk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},S5;function bFe(t,e,r){S5||(S5=Zj(Wk)),e=S5[e]||e,t[e]=r}function wFe(t,e){var r=[];return ci(Wk).map(function(n){for(var a=0;a<id.length;++a)if(id[a][1]==n)return id[a];for(a=0;a<Ip.length;++a)if(Ip[a][1]==n)return Ip[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(sl(Wk[n[1]]||n[1],a))}}),Sr("DocumentProperties",r.join(""),{xmlns:tu.o})}function NFe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&ci(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<id.length;++o)if(s==id[o][1])return;for(o=0;o<Ip.length;++o)if(s==Ip[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Sr(GH(s),l,{"dt:dt":c}))}}),e&&ci(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Sr(GH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+tu.o+'">'+a.join("")+"</"+n+">"}function aR(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function CFe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Zt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Wne(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function Xne(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function Yne(t,e,r){return e===31?Xne(t):Wne(t,e,r)}function Xk(t,e,r){return Yne(t,e,r===!1?0:4)}function _Fe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return Yne(t,e,0)}function EFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ic,""),t.l-a&2&&(t.l+=2)}return r}function SFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ic,"");return r}function IFe(t){var e=t.l,r=HS(t,Lne);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=HS(t,bc);return[r,n]}function jFe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(IFe(t));return r}function i$(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(ic,"").replace($y,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Jne(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function PFe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function HS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==n$&&n!==e&&oFe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===n$?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return Wne(t,n,4).replace(ic,"");case 31:return Xne(t);case 64:return aR(t);case 65:return Jne(t);case 71:return PFe(t);case 80:return Xk(t,n,!s.raw).replace(ic,"");case 81:return _Fe(t,n).replace(ic,"");case 4108:return jFe(t);case 4126:case 4127:return n==4127?EFe(t):SFe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function o$(t,e){var r=Zt(4),n=Zt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Zt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=CFe(e);break;case 31:case 80:for(n=Zt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Po([r,n])}function l$(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=t.read_shift(4),f=t.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var A={};for(o=0;o!=a;++o){if(t.l!==s[o][1]){var h=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(h=!1,t.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var m=e[s[o][0]];if(A[m.n]=HS(t,m.t,{raw:!0}),m.p==="version"&&(A[m.n]=String(A[m.n]>>16)+"."+("0000"+String(A[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(A[m.n]){case 0:A[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Hd(l=A[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[m.n])}}else if(s[o][0]===1){if(l=A.CodePage=HS(t,rR),Hd(l),c!==-1){var p=t.l;t.l=s[c][1],u=i$(t,l),t.l=p}}else if(s[o][0]===0){if(l===0){c=o,t.l=s[o+1][1];continue}u=i$(t,l)}else{var g=u[s[o][0]],x;switch(t[t.l]){case 65:t.l+=4,x=Jne(t);break;case 30:t.l+=4,x=Xk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=Xk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=pi(t,4);break;case 64:t.l+=4,x=ms(aR(t));break;default:throw new Error("unparsed value: "+t[t.l])}A[g]=x}}return t.l=r+n,A}var Zne=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function BFe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function c$(t,e,r){var n=Zt(8),a=[],s=[],o=8,l=0,c=Zt(8),u=Zt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=Zt(8),u.write_shift(4,0),a.unshift(u);var d=[Zt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=Zt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Po(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Zne.indexOf(t[l][0])>-1||Gne.indexOf(t[l][0])>-1)&&t[l][1]!=null){var A=t[l][1],h=0;if(e){h=+e[t[l][0]];var m=r[h];if(m.p=="version"&&typeof A=="string"){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}c=o$(m.t,A)}else{var g=BFe(A);g==-1&&(g=31,A=String(A)),c=o$(g,A)}s.push(c),u=Zt(8),u.write_shift(4,e?h:2+l),a.push(u),o+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Po([n].concat(a).concat(s))}function u$(t,e,r){var n=t.content;if(!n)return{};nl(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==sn.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=l$(n,e),A={SystemIdentifier:u};for(var h in f)A[h]=f[h];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=l$(n,null)}catch{}for(h in m)A[h]=m[h];return A.FMTID=[s,o],A}function d$(t,e,r,n,a,s){var o=Zt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,sn.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=c$(t,r,n);if(l.push(c),a){var u=c$(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Po(l)}function t0(t,e){return t.read_shift(e),null}function TFe(t,e){e||(e=Zt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function kFe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function pi(t,e){return t.read_shift(e)===1}function ec(t,e){return e||(e=Zt(2)),e.write_shift(2,+!!t),e}function Ti(t){return t.read_shift(2,"u")}function Ku(t,e){return e||(e=Zt(2)),e.write_shift(2,t),e}function eae(t,e){return kFe(t,e,Ti)}function FFe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function tae(t,e,r){return r||(r=Zt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Tw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function OFe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*o),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function DFe(t){var e=t.t||"",r=Zt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Zt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Po(a)}function tg(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function kw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):tg(t,n,r)}function Ig(t,e,r){if(r.biff>5)return kw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function rae(t,e,r){return r||(r=Zt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function RFe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function MFe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(ic,"");return n&&(t.l+=24),a}function LFe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(ic,"");return r+o}function UFe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return MFe(t);case"0303000000000000c000000000000046":return LFe(t);default:throw new Error("Unsupported Moniker "+r)}}function zC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(ic,""):"";return r}function f$(t,e){e||(e=Zt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function QFe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=zC(t,r-t.l)),a&128&&(o=zC(t,r-t.l)),(a&257)===257&&(l=zC(t,r-t.l)),(a&257)===1&&(c=UFe(t,r-t.l)),a&8&&(u=zC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=aR(t)),t.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var h={Target:A};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function VFe(t){var e=Zt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),f$(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&f$(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function nae(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function aae(t,e){var r=nae(t);return r[3]=0,r}function Jf(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function rg(t,e,r,n){return n||(n=Zt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function HFe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function $Fe(t,e,r){return e===0?"":Ig(t,e,r)}function GFe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function sae(t){var e=t.read_shift(2),r=tR(t);return[e,r]}function KFe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Tw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function r4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function iae(t,e){return e||(e=Zt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function oae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var qFe=oae;function lae(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function zFe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function WFe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function wl(t){t.l+=2,t.l+=t.read_shift(2)}var XFe={0:wl,4:wl,5:wl,6:wl,7:WFe,8:wl,9:wl,10:wl,11:wl,12:wl,13:zFe,14:wl,15:wl,16:wl,17:wl,18:wl,19:wl,20:wl,21:lae};function YFe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(XFe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function WC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function sR(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Zt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function JFe(t,e){return e===0||t.read_shift(2),1200}function ZFe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Ig(t,0,r);return t.read_shift(e+n-t.l),a}function eOe(t,e){var r=!e||e.biff==8,n=Zt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function tOe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function rOe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Tw(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function nOe(t,e){var r=!e||e.biff>=8?2:1,n=Zt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function aOe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0;o!=a&&t.l<r;++o)s.push(OFe(t));return s.Count=n,s.Unique=a,s}function sOe(t,e){var r=Zt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=DFe(t[a]);var s=Po([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function iOe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function oOe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function lOe(t){var e=HFe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function cOe(t){return t.read_shift(2),t.read_shift(4)}function h$(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function uOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function dOe(){var t=Zt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function fOe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function hOe(t){var e=Zt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function AOe(){}function mOe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Tw(t,0,r),n}function pOe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Zt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function gOe(t){var e=Jf(t);return e.isst=t.read_shift(4),e}function xOe(t,e,r,n){var a=Zt(10);return rg(t,e,n,a),a.write_shift(4,r),a}function vOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Jf(t);r.biff==2&&t.l++;var s=kw(t,n-t.l,r);return a.val=s,a}function yOe(t,e,r,n,a){var s=!a||a.biff==8,o=Zt(8+ +s+(1+s)*r.length);return rg(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function bOe(t,e,r){var n=t.read_shift(2),a=Ig(t,0,r);return[n,a]}function wOe(t,e,r,n){var a=r&&r.biff==5;n||(n=Zt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var NOe=Ig;function A$(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),o=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:o,c}}}function COe(t,e){var r=e.biff==8||!e.biff?4:2,n=Zt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function _Oe(t){var e=t.read_shift(2),r=t.read_shift(2),n=sae(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function EOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(sae(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function SOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function IOe(t,e,r,n){var a={},s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=lFe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function jOe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=IOe(t,e,n.fStyle,r),n}function m$(t,e,r,n){var a=r&&r.biff==5;n||(n=Zt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function POe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function BOe(t){var e=Zt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function p$(t,e,r){var n=Jf(t);(r.biff==2||e==9)&&++t.l;var a=FFe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function TOe(t,e,r,n,a,s){var o=Zt(8);return rg(t,e,n,o),tae(r,s,o),o}function kOe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Jf(t),a=kl(t);return n.val=a,n}function FOe(t,e,r,n){var a=Zt(14);return rg(t,e,n,a),eg(r,a),a}var g$=$Fe;function OOe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=tg(t,s),l=[];n>t.l;)l.push(kw(t));return[s,a,o,l]}function x$(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=KFe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var DOe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function v$(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=tg(t,o,r);a&32&&(u=DOe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:Y8e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function cae(t,e,r){if(r.biff<8)return ROe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(GFe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function ROe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Tw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function MOe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=tg(t,n,r),o=tg(t,a,r);return[s,o]}function LOe(t,e,r){var n=oae(t);t.l++;var a=t.read_shift(1);return e-=8,[J8e(t,e,r),a,n]}function y$(t,e,r){var n=qFe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,W8e(t,e,r)]}function UOe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function QOe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=Ig(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,o,s]}}function VOe(t,e,r){return QOe(t,e,r)}function HOe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(r4(t));return r}function $Oe(t){var e=Zt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)iae(t[r],e);return e}function GOe(t,e,r){if(r&&r.biff<8)return qOe(t,e,r);var n=lae(t),a=YFe(t,e-22,n[1]);return{cmo:n,ft:a}}var KOe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function qOe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((KOe[n]||Ml)(t,e,r)),{cmo:[a,n,s],ft:o}}function zOe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=RFe(t,6,r);var l=t.read_shift(2);t.read_shift(2),Ti(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=tg(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function WOe(t,e){var r=r4(t);t.l+=16;var n=QFe(t,e-24);return[r,n]}function XOe(t){var e=Zt(24),r=$s(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Po([e,VFe(t[1])])}function YOe(t,e){t.read_shift(2);var r=r4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(ic,""),[r,n]}function JOe(t){var e=t[1].Tooltip,r=Zt(10+2*(e.length+1));r.write_shift(2,2048);var n=$s(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function ZOe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=a$[r]||r,r=t.read_shift(2),e[1]=a$[r]||r,e}function eDe(t){return t||(t=Zt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function tDe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(aae(t));return r}function rDe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(aae(t));return r}function nDe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function uae(t,e,r){if(!r.cellStyles)return Ml(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function aDe(t,e){var r=Zt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function sDe(t,e){var r={};return e<32||(t.l+=16,r.header=kl(t),r.footer=kl(t),t.l+=2),r}function iDe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function oDe(t){for(var e=Zt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var lDe=Jf,cDe=eae,uDe=kw;function dDe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function fDe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Jf(t);++t.l;var a=Ig(t,e-7,r);return n.t="str",n.val=a,n}function hDe(t){var e=Jf(t);++t.l;var r=kl(t);return e.t="n",e.val=r,e}function ADe(t,e,r){var n=Zt(15);return Rw(n,t,e),n.write_shift(8,r,"f"),n}function mDe(t){var e=Jf(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function pDe(t,e,r){var n=Zt(9);return Rw(n,t,e),n.write_shift(2,r),n}function gDe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function xDe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function vDe(t,e,r){var n=t.l+e,a=Jf(t),s=t.read_shift(2),o=tg(t,s,r);return t.l=n,a.t="str",a.val=o,a}var yDe=[2,3,48,49,131,139,140,245],Yk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Zj({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=cm(1);switch(c.type){case"base64":d=nu(pu(l));break;case"binary":d=nu(l);break;case"buffer":case"array":d=l;break}nl(d,0);var f=d.read_shift(1),A=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,A=!0;break;case 49:h=!0,A=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:g-10-(h?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=w2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!h||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++_]=[],S=0,S=0;S!=b.length;++S){var E=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,nl(E,0);var F=w2.utils.decode(y,E);switch(b[S].type){case"C":F.trim().length&&(u[_][S]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[_][S]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[_][S]=F;break;case"F":u[_][S]=parseFloat(F.trim());break;case"+":case"I":u[_][S]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[_][S]=!0;break;case"N":case"F":u[_][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][S]="##MEMO##"+(m?parseInt(F.trim(),10):E.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[_][S]=+F||0);break;case"@":u[_][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][S]=-E.read_shift(-8,"f");break;case"B":if(h&&b[S].len==8){u[_][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=d1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Nm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Hd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Tc(),f=KS(l,{header:1,raw:!0,cellDates:!0}),A=f[0],h=f.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<A.length;++p){if(((m[p]||{}).DBF||{}).name){A[p]=m[p].DBF.name,++x;continue}if(A[p]!=null){if(++x,typeof A[p]=="number"&&(A[p]=A[p].toString(10)),typeof A[p]!="string")throw new Error("DBF Invalid column name "+A[p]+" |"+typeof A[p]+"|");if(A.indexOf(A[p])!==p){for(g=0;g<1024;++g)if(A.indexOf(A[p]+"_"+g)==-1){A[p]+="_"+g;break}}}}var b=na(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",S="",E=0,F=[];for(g=0;g<h.length;++g)h[g][p]!=null&&F.push(h[g][p]);if(F.length==0||A[p]==null){w[p]="?";continue}for(g=0;g<F.length;++g){switch(typeof F[g]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=F[g]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(F[g]).length),_=_&&_!=S?"C":S}E>250&&(E=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&S=="N"&&(_="N",I[p]=m[p].DBF.dec,E=m[p].DBF.len),j[p]=_=="C"||S=="N"?E:s[_]||0,y+=j[p],w[p]=_}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,h.length),P.write_shift(2,296+32*x),P.write_shift(2,y),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+e[Zre]||3)<<8),p=0,g=0;p<A.length;++p)if(A[p]!=null){var k=d.next(32),D=(A[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,D,"sbcs"),k.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),k.write_shift(4,g),k.write_shift(1,j[p]||s[w[p]]||0),k.write_shift(1,I[p]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),g+=j[p]||s[w[p]]||0}var Z=d.next(264);for(Z.write_shift(4,13),p=0;p<65;++p)Z.write_shift(4,0);for(p=0;p<h.length;++p){var fe=d.next(y);for(fe.write_shift(1,0),g=0;g<A.length;++g)if(A[g]!=null)switch(w[g]){case"L":fe.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":fe.write_shift(8,h[p][g]||0,"f");break;case"N":var me="0";for(typeof h[p][g]=="number"&&(me=h[p][g].toFixed(I[g]||0)),x=0;x<j[g]-me.length;++x)fe.write_shift(1,32);fe.write_shift(1,me,"sbcs");break;case"D":h[p][g]?(fe.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),fe.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),fe.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):fe.write_shift(8,"00000000","sbcs");break;case"C":var pe=String(h[p][g]!=null?h[p][g]:"").slice(0,j[g]);for(fe.write_shift(1,pe,"sbcs"),x=0;x<j[g]-pe.length;++x)fe.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),dae=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ci(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,h){var m=t[h];return typeof m=="number"?BH(m):m},n=function(A,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?A:BH(p)};t["|"]=254;function a(A,h){switch(h.type){case"base64":return s(pu(A),h);case"binary":return s(A,h);case"buffer":return s(Fn&&Buffer.isBuffer(A)?A.toString("binary"):wm(A),h);case"array":return s(Zp(A),h)}throw new Error("Unrecognized type "+h.type)}function s(A,h){var m=A.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],j=null,I={},_=[],S=[],E=[],F=0,P;for(+h.codepage>=0&&Hd(+h.codepage);x!==m.length;++x){F=0;var k=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=k.replace(/;;/g,"\0").split(";").map(function(L){return L.replace(/\u0000/g,";")}),Z=D[0],fe;if(k.length>0)switch(Z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(k.slice(3).replace(/;;/g,";"));break;case"C":var me=!1,pe=!1,ye=!1,ae=!1,je=-1,Be=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":g=parseInt(D[y].slice(1))-1,pe=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,pe||(g=0),P=b.length;P<=p;++P)b[P]=[];break;case"K":fe=D[y].slice(1),fe.charAt(0)==='"'?fe=fe.slice(1,fe.length-1):fe==="TRUE"?fe=!0:fe==="FALSE"?fe=!1:isNaN(Xd(fe))?isNaN(Pv(fe).getDate())||(fe=ms(fe)):(fe=Xd(fe),j!==null&&c1(j)&&(fe=t4(fe))),me=!0;break;case"E":ae=!0;var O=ov(D[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],O];break;case"S":ye=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":je=parseInt(D[y].slice(1))-1;break;case"C":Be=parseInt(D[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}if(me&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=fe:b[p][g]=fe,j=null),ye){if(ae)throw new Error("SYLK shared formula cannot have own formula");var G=je>-1&&b[je][Be];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=jae(G[1],{r:p-je,c:g-Be})}break;case"F":var z=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":g=parseInt(D[y].slice(1))-1,++z;break;case"Y":for(p=parseInt(D[y].slice(1))-1,P=b.length;P<=p;++P)b[P]=[];break;case"M":F=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=D[y].slice(1).split(" "),P=parseInt(E[0],10);P<=parseInt(E[1],10);++P)F=parseInt(E[2],10),S[P-1]=F===0?{hidden:!0}:{wch:F},um(S[P-1]);break;case"C":g=parseInt(D[y].slice(1))-1,S[g]||(S[g]={});break;case"R":p=parseInt(D[y].slice(1))-1,_[p]||(_[p]={}),F>0?(_[p].hpt=F,_[p].hpx=Tv(F)):F===0&&(_[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}z<1&&(j=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+k)}}return _.length>0&&(I["!rows"]=_),S.length>0&&(I["!cols"]=S),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,I]}function o(A,h){var m=a(A,h),p=m[0],g=m[1],x=d1(p,h);return ci(g).forEach(function(y){x[y]=g[y]}),x}function l(A,h){return Nm(o(A,h),h)}function c(A,h,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(A.t){case"n":g+=A.v||0,A.f&&!A.F&&(g+=";E"+dR(A.f,{r:m,c:p}));break;case"b":g+=A.v?"TRUE":"FALSE";break;case"e":g+=A.w||A.v;break;case"d":g+='"'+(A.w||A.v)+'"';break;case"s":g+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(A,h){h.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=P2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=B2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&A.push(g)})}function d(A,h){h.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*T2(m.hpx)+";"),g.length>2&&A.push(g+"R"+(p+1))})}function f(A,h){var m=["ID;PWXL;N;E"],p=[],g=na(A["!ref"]),x,y=Array.isArray(A),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),A["!cols"]&&u(m,A["!cols"]),A["!rows"]&&d(m,A["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j){var I=An({r:w,c:j});x=y?(A[w]||[])[j]:A[I],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,A,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),fae=function(){function t(s,o){switch(o.type){case"base64":return e(pu(s),o);case"binary":return e(s,o);case"buffer":return e(Fn&&Buffer.isBuffer(s)?s.toString("binary"):wm(s),o);case"array":return e(Zp(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),h=A[0],m=A[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(Xd(m))?isNaN(Pv(m).getDate())?f[c][u]=m:f[c][u]=ms(m):f[c][u]=Xd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return d1(t(s,o),o)}function n(s,o){return Nm(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=na(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=An({r:h,c:m});if(f=A?(c[h]||[])[m]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ud(f.z||hn[14],co(ms(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),hae=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var h=f.split(`
`),m=-1,p=-1,g=0,x=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var b=$s(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return A&&A.sheetRows&&(x=x.slice(0,A.sheetRows)),x}function n(f,A){return d1(r(f,A),A)}function a(f,A){return Nm(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],h=[],m,p="",g=kc(f["!ref"]),x=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=An({r:y,c:b}),m=x?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=co(ms(m.v));h[2]="vtc",h[3]="nd",h[4]=""+w,h[5]=m.w||ud(m.z||hn[14],w);break;case"e":continue}A.push(h.join(":"))}return A.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Bv=function(){function t(d,f,A,h,m){m.raw?f[A][h]=d:d===""||(d==="TRUE"?f[A][h]=!0:d==="FALSE"?f[A][h]=!1:isNaN(Xd(d))?isNaN(Pv(d).getDate())?f[A][h]=d:f[A][h]=ms(d):f[A][h]=Xd(d))}function e(d,f){var A=f||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),h,y,b,A),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),h,y,b,A)}return A.sheetRows&&(h=h.slice(0,A.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?A=!A:!A&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var A=f||{},h="",m=A.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):A&&A.FS?h=A.FS:h=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,j=h.charCodeAt(0),I=!1,_=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=A.dateNF!=null?ike(A.dateNF):null;function F(){var P=d.slice(b,w),k={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)k.t="z";else if(A.raw)k.t="s",k.v=P;else if(P.trim().length===0)k.t="s",k.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(k.t="s",k.v=P.slice(2,-1).replace(/""/g,'"')):ORe(P)?(k.t="n",k.f=P.slice(1)):(k.t="s",k.v=P);else if(P=="TRUE")k.t="b",k.v=!0;else if(P=="FALSE")k.t="b",k.v=!1;else if(!isNaN(y=Xd(P)))k.t="n",A.cellText!==!1&&(k.w=P),k.v=y;else if(!isNaN(Pv(P).getDate())||E&&P.match(E)){k.z=A.dateNF||hn[14];var D=0;E&&P.match(E)&&(P=oke(P,A.dateNF,P.match(E)||[]),D=1),A.cellDates?(k.t="d",k.v=ms(P,D)):(k.t="n",k.v=co(ms(P,D))),A.cellText!==!1&&(k.w=ud(k.z,k.v instanceof Date?co(k.v):k.v)),A.cellNF||delete k.z}else k.t="s",k.v=P;if(k.t=="z"||(A.dense?(m[g]||(m[g]=[]),m[g][x]=k):m[An({c:x,r:g})]=k),b=w+1,S=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),_==j)++x;else if(x=0,++g,A.sheetRows&&A.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&F())break e;break}return w-b>0&&F(),m["!ref"]=En(p),m}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):d1(e(d,f),f)}function l(d,f){var A="",h=f.type=="string"?[0,0,0,0]:vR(d,f);switch(f.type){case"base64":A=pu(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof w2<"u"||(A=Fn&&Buffer.isBuffer(d)?d.toString("binary"):wm(d));break;case"array":A=Zp(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?A=Ua(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Ua(A):f.type=="binary"&&typeof w2<"u",A.slice(0,19)=="socialcalc:version:"?hae.to_sheet(f.type=="string"?A:Ua(A),f):o(A,f)}function c(d,f){return Nm(l(d,f),f)}function u(d){for(var f=[],A=na(d["!ref"]),h,m=Array.isArray(d),p=A.s.r;p<=A.e.r;++p){for(var g=[],x=A.s.c;x<=A.e.c;++x){var y=An({r:p,c:x});if(h=m?(d[p]||[])[x]:d[y],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(nA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function bDe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=dae.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Bv.to_workbook(t,e)}}var jp=function(){function t(O,G,z){if(O){nl(O,O.l||0);for(var L=z.Enum||je;O.l<O.length;){var Y=O.read_shift(2),J=L[Y]||L[65535],R=O.read_shift(2),H=O.l+R,ne=J.f&&J.f(O,R,z);if(O.l=H,G(ne,J,Y))return}}}function e(O,G){switch(G.type){case"base64":return r(nu(pu(O)),G);case"binary":return r(nu(O),G);case"buffer":case"array":return r(O,G)}throw"Unsupported type "+G.type}function r(O,G){if(!O)return O;var z=G||{},L=z.dense?[]:{},Y="Sheet1",J="",R=0,H={},ne=[],ge=[],U={s:{r:0,c:0},e:{r:0,c:0}},Ue=z.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)z.Enum=je,t(O,function(ce,we,Re){switch(Re){case 0:z.vers=ce,ce>=4096&&(z.qpro=!0);break;case 6:U=ce;break;case 204:ce&&(J=ce);break;case 222:J=ce;break;case 15:case 51:z.qpro||(ce[1].v=ce[1].v.slice(1));case 13:case 14:case 16:Re==14&&(ce[2]&112)==112&&(ce[2]&15)>1&&(ce[2]&15)<15&&(ce[1].z=z.dateNF||hn[14],z.cellDates&&(ce[1].t="d",ce[1].v=t4(ce[1].v))),z.qpro&&ce[3]>R&&(L["!ref"]=En(U),H[Y]=L,ne.push(Y),L=z.dense?[]:{},U={s:{r:0,c:0},e:{r:0,c:0}},R=ce[3],Y=J||"Sheet"+(R+1),J="");var We=z.dense?(L[ce[0].r]||[])[ce[0].c]:L[An(ce[0])];if(We){We.t=ce[1].t,We.v=ce[1].v,ce[1].z!=null&&(We.z=ce[1].z),ce[1].f!=null&&(We.f=ce[1].f);break}z.dense?(L[ce[0].r]||(L[ce[0].r]=[]),L[ce[0].r][ce[0].c]=ce[1]):L[An(ce[0])]=ce[1];break}},z);else if(O[2]==26||O[2]==14)z.Enum=Be,O[2]==14&&(z.qpro=!0,O.l=0),t(O,function(ce,we,Re){switch(Re){case 204:Y=ce;break;case 22:ce[1].v=ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ce[3]>R&&(L["!ref"]=En(U),H[Y]=L,ne.push(Y),L=z.dense?[]:{},U={s:{r:0,c:0},e:{r:0,c:0}},R=ce[3],Y="Sheet"+(R+1)),Ue>0&&ce[0].r>=Ue)break;z.dense?(L[ce[0].r]||(L[ce[0].r]=[]),L[ce[0].r][ce[0].c]=ce[1]):L[An(ce[0])]=ce[1],U.e.c<ce[0].c&&(U.e.c=ce[0].c),U.e.r<ce[0].r&&(U.e.r=ce[0].r);break;case 27:ce[14e3]&&(ge[ce[14e3][0]]=ce[14e3][1]);break;case 1537:ge[ce[0]]=ce[1],ce[0]==R&&(Y=ce[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(L["!ref"]=En(U),H[J||Y]=L,ne.push(J||Y),!ge.length)return{SheetNames:ne,Sheets:H};for(var ie={},te=[],Ee=0;Ee<ge.length;++Ee)H[ne[Ee]]?(te.push(ge[Ee]||ne[Ee]),ie[ge[Ee]]=H[ge[Ee]]||H[ne[Ee]]):(te.push(ge[Ee]),ie[ge[Ee]]={"!ref":"A1"});return{SheetNames:te,Sheets:ie}}function n(O,G){var z=G||{};if(+z.codepage>=0&&Hd(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var L=Tc(),Y=na(O["!ref"]),J=Array.isArray(O),R=[];Ir(L,0,s(1030)),Ir(L,6,c(Y));for(var H=Math.min(Y.e.r,8191),ne=Y.s.r;ne<=H;++ne)for(var ge=Ei(ne),U=Y.s.c;U<=Y.e.c;++U){ne===Y.s.r&&(R[U]=Hs(U));var Ue=R[U]+ge,ie=J?(O[ne]||[])[U]:O[Ue];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?Ir(L,13,h(ne,U,ie.v)):Ir(L,14,p(ne,U,ie.v));else{var te=nA(ie);Ir(L,15,f(ne,U,te.slice(0,239)))}}return Ir(L,1),L.end()}function a(O,G){var z=G||{};if(+z.codepage>=0&&Hd(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var L=Tc();Ir(L,0,o(O));for(var Y=0,J=0;Y<O.SheetNames.length;++Y)(O.Sheets[O.SheetNames[Y]]||{})["!ref"]&&Ir(L,27,ae(O.SheetNames[Y],J++));var R=0;for(Y=0;Y<O.SheetNames.length;++Y){var H=O.Sheets[O.SheetNames[Y]];if(!(!H||!H["!ref"])){for(var ne=na(H["!ref"]),ge=Array.isArray(H),U=[],Ue=Math.min(ne.e.r,8191),ie=ne.s.r;ie<=Ue;++ie)for(var te=Ei(ie),Ee=ne.s.c;Ee<=ne.e.c;++Ee){ie===ne.s.r&&(U[Ee]=Hs(Ee));var ce=U[Ee]+te,we=ge?(H[ie]||[])[Ee]:H[ce];if(!(!we||we.t=="z"))if(we.t=="n")Ir(L,23,F(ie,Ee,R,we.v));else{var Re=nA(we);Ir(L,22,_(ie,Ee,R,Re.slice(0,239)))}}++R}}return Ir(L,1),L.end()}function s(O){var G=Zt(2);return G.write_shift(2,O),G}function o(O){var G=Zt(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var z=0,L=0,Y=0,J=0;J<O.SheetNames.length;++J){var R=O.SheetNames[J],H=O.Sheets[R];if(!(!H||!H["!ref"])){++Y;var ne=kc(H["!ref"]);z<ne.e.r&&(z=ne.e.r),L<ne.e.c&&(L=ne.e.c)}}return z>8191&&(z=8191),G.write_shift(2,z),G.write_shift(1,Y),G.write_shift(1,L),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function l(O,G,z){var L={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&z.qpro?(L.s.c=O.read_shift(1),O.l++,L.s.r=O.read_shift(2),L.e.c=O.read_shift(1),O.l++,L.e.r=O.read_shift(2),L):(L.s.c=O.read_shift(2),L.s.r=O.read_shift(2),G==12&&z.qpro&&(O.l+=2),L.e.c=O.read_shift(2),L.e.r=O.read_shift(2),G==12&&z.qpro&&(O.l+=2),L.s.c==65535&&(L.s.c=L.e.c=L.s.r=L.e.r=0),L)}function c(O){var G=Zt(8);return G.write_shift(2,O.s.c),G.write_shift(2,O.s.r),G.write_shift(2,O.e.c),G.write_shift(2,O.e.r),G}function u(O,G,z){var L=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(L[0].c=O.read_shift(1),L[3]=O.read_shift(1),L[0].r=O.read_shift(2),O.l+=2):(L[2]=O.read_shift(1),L[0].c=O.read_shift(2),L[0].r=O.read_shift(2)),L}function d(O,G,z){var L=O.l+G,Y=u(O,G,z);if(Y[1].t="s",z.vers==20768){O.l++;var J=O.read_shift(1);return Y[1].v=O.read_shift(J,"utf8"),Y}return z.qpro&&O.l++,Y[1].v=O.read_shift(L-O.l,"cstr"),Y}function f(O,G,z){var L=Zt(7+z.length);L.write_shift(1,255),L.write_shift(2,G),L.write_shift(2,O),L.write_shift(1,39);for(var Y=0;Y<L.length;++Y){var J=z.charCodeAt(Y);L.write_shift(1,J>=128?95:J)}return L.write_shift(1,0),L}function A(O,G,z){var L=u(O,G,z);return L[1].v=O.read_shift(2,"i"),L}function h(O,G,z){var L=Zt(7);return L.write_shift(1,255),L.write_shift(2,G),L.write_shift(2,O),L.write_shift(2,z,"i"),L}function m(O,G,z){var L=u(O,G,z);return L[1].v=O.read_shift(8,"f"),L}function p(O,G,z){var L=Zt(13);return L.write_shift(1,255),L.write_shift(2,G),L.write_shift(2,O),L.write_shift(8,z,"f"),L}function g(O,G,z){var L=O.l+G,Y=u(O,G,z);if(Y[1].v=O.read_shift(8,"f"),z.qpro)O.l=L;else{var J=O.read_shift(2);w(O.slice(O.l,O.l+J),Y),O.l+=J}return Y}function x(O,G,z){var L=G&32768;return G&=-32769,G=(L?O:0)+(G>=8192?G-16384:G),(L?"":"$")+(z?Hs(G):Ei(G))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,G){nl(O,0);for(var z=[],L=0,Y="",J="",R="",H="";O.l<O.length;){var ne=O[O.l++];switch(ne){case 0:z.push(O.read_shift(8,"f"));break;case 1:J=x(G[0].c,O.read_shift(2),!0),Y=x(G[0].r,O.read_shift(2),!1),z.push(J+Y);break;case 2:{var ge=x(G[0].c,O.read_shift(2),!0),U=x(G[0].r,O.read_shift(2),!1);J=x(G[0].c,O.read_shift(2),!0),Y=x(G[0].r,O.read_shift(2),!1),z.push(ge+U+":"+J+Y)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(O.read_shift(2));break;case 6:{for(var Ue="";ne=O[O.l++];)Ue+=String.fromCharCode(ne);z.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:H=z.pop(),R=z.pop(),z.push(["AND","OR"][ne-20]+"("+R+","+H+")");break;default:if(ne<32&&b[ne])H=z.pop(),R=z.pop(),z.push(R+b[ne]+H);else if(y[ne]){if(L=y[ne][1],L==69&&(L=O[O.l++]),L>z.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+z.join("|")+"|");return}var ie=z.slice(-L);z.length-=L,z.push(y[ne][0]+"("+ie.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}z.length==1?G[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function j(O){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=O.read_shift(2),G[3]=O[O.l++],G[0].c=O[O.l++],G}function I(O,G){var z=j(O);return z[1].t="s",z[1].v=O.read_shift(G-4,"cstr"),z}function _(O,G,z,L){var Y=Zt(6+L.length);Y.write_shift(2,O),Y.write_shift(1,z),Y.write_shift(1,G),Y.write_shift(1,39);for(var J=0;J<L.length;++J){var R=L.charCodeAt(J);Y.write_shift(1,R>=128?95:R)}return Y.write_shift(1,0),Y}function S(O,G){var z=j(O);z[1].v=O.read_shift(2);var L=z[1].v>>1;if(z[1].v&1)switch(L&7){case 0:L=(L>>3)*5e3;break;case 1:L=(L>>3)*500;break;case 2:L=(L>>3)/20;break;case 3:L=(L>>3)/200;break;case 4:L=(L>>3)/2e3;break;case 5:L=(L>>3)/2e4;break;case 6:L=(L>>3)/16;break;case 7:L=(L>>3)/64;break}return z[1].v=L,z}function E(O,G){var z=j(O),L=O.read_shift(4),Y=O.read_shift(4),J=O.read_shift(2);if(J==65535)return L===0&&Y===3221225472?(z[1].t="e",z[1].v=15):L===0&&Y===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var R=J&32768;return J=(J&32767)-16446,z[1].v=(1-R*2)*(Y*Math.pow(2,J+32)+L*Math.pow(2,J)),z}function F(O,G,z,L){var Y=Zt(14);if(Y.write_shift(2,O),Y.write_shift(1,z),Y.write_shift(1,G),L==0)return Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(2,65535),Y;var J=0,R=0,H=0,ne=0;return L<0&&(J=1,L=-L),R=Math.log2(L)|0,L/=Math.pow(2,R-31),ne=L>>>0,ne&2147483648||(L/=2,++R,ne=L>>>0),L-=ne,ne|=2147483648,ne>>>=0,L*=Math.pow(2,32),H=L>>>0,Y.write_shift(4,H),Y.write_shift(4,ne),R+=16383+(J?32768:0),Y.write_shift(2,R),Y}function P(O,G){var z=E(O);return O.l+=G-14,z}function k(O,G){var z=j(O),L=O.read_shift(4);return z[1].v=L>>6,z}function D(O,G){var z=j(O),L=O.read_shift(8,"f");return z[1].v=L,z}function Z(O,G){var z=D(O);return O.l+=G-10,z}function fe(O,G){return O[O.l+G-1]==0?O.read_shift(G,"cstr"):""}function me(O,G){var z=O[O.l++];z>G-1&&(z=G-1);for(var L="";L.length<z;)L+=String.fromCharCode(O[O.l++]);return L}function pe(O,G,z){if(!(!z.qpro||G<21)){var L=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var Y=O.read_shift(G-21,"cstr");return[L,Y]}}function ye(O,G){for(var z={},L=O.l+G;O.l<L;){var Y=O.read_shift(2);if(Y==14e3){for(z[Y]=[0,""],z[Y][0]=O.read_shift(2);O[O.l];)z[Y][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return z}function ae(O,G){var z=Zt(5+O.length);z.write_shift(2,14e3),z.write_shift(2,G);for(var L=0;L<O.length;++L){var Y=O.charCodeAt(L);z[z.l++]=Y>127?95:Y}return z[z.l++]=0,z}var je={0:{n:"BOF",f:Ti},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:fe},222:{n:"SHEETNAMELP",f:me},65535:{n:""}},Be={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ye},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:Z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:fe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:pe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function wDe(t){var e={},r=t.match(Ul),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=mn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=D6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var NDe=function(){var t=_2("t"),e=_2("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:ra(o[1])},c=s.match(e);return c&&(l.s=wDe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),CDe=function(){var e=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),_De=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,EDe=/<(?:\w+:)?r>/,SDe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function iR(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ra(Ua(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ua(t),r&&(n.h=K6(n.t))):t.match(EDe)&&(n.r=Ua(t),n.t=ra(Ua((t.replace(SDe,"").match(_De)||[]).join("").replace(Ul,""))),r&&(n.h=CDe(NDe(n.r)))),n):{t:""}}var IDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,jDe=/<(?:\w+:)?(?:si|sstItem)>/g,PDe=/<\/(?:\w+:)?(?:si|sstItem)>/;function BDe(t,e){var r=[],n="";if(!t)return r;var a=t.match(IDe);if(a){n=a[2].replace(jDe,"").split(PDe);for(var s=0;s!=n.length;++s){var o=iR(n[s].trim(),e);o!=null&&(r[r.length]=o)}a=mn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var TDe=/^\s|\s$|[\t\n\r]/;function Aae(t,e){if(!e.bookSST)return"";var r=[Ii];r[r.length]=Sr("sst",null,{xmlns:Ng[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(TDe)&&(s+=' xml:space="preserve"'),s+=">"+ka(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function kDe(t){return[t.read_shift(4),t.read_shift(4)]}function FDe(t,e){var r=[],n=!1;return vA(t,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function ODe(t,e){return e||(e=Zt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var DDe=Kke;function RDe(t){var e=Tc();cr(e,159,ODe(t));for(var r=0;r<t.length;++r)cr(e,19,DDe(t[r]));return cr(e,160),e.end()}function mae(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Gh(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function MDe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Gh(t,4),e.U=Gh(t,4),e.W=Gh(t,4),e}function LDe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function UDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(LDe(t));return e}function QDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function VDe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Gh(t,4),e.U=Gh(t,4),e.W=Gh(t,4),e}function HDe(t){var e=VDe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function pae(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function gae(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function $De(t){var e=Gh(t);switch(e.Minor){case 2:return[e.Minor,GDe(t)];case 3:return[e.Minor,KDe()];case 4:return[e.Minor,qDe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function GDe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=pae(t,r),a=gae(t,t.length-t.l);return{t:"Std",h:n,v:a}}function KDe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function qDe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ul,function(s){var o=mn(s);switch(Yf(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function zDe(t,e){var r={},n=r.EncryptionVersionInfo=Gh(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=pae(t,a),e-=a,r.EncryptionVerifier=gae(t,e),r}function WDe(t){var e={},r=e.EncryptionVersionInfo=Gh(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function oR(t){var e=0,r,n=mae(t),a=n.length+1,s,o,l,c,u;for(r=cm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var xae=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=e[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=mae(o),c=s(l),u=l.length,d=cm(16),f=0;f!=16;++f)d[f]=0;var A,h,m;for((u&1)===1&&(A=c>>8,d[u]=a(t[0],A),--u,A=c&255,h=l[l.length-1],d[u]=a(h,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,m=15-l.length;m>0;)A=c>>8,d[u]=a(t[m],A),--u,--m,A=c&255,d[u]=a(l[u],A),--u,--m;return d}}(),XDe=function(t,e,r,n,a){a||(a=e),n||(n=xae(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},YDe=function(t){var e=0,r=xae(t);return function(n){var a=XDe("",n,e,r);return e=a[1],a[0]}};function JDe(t,e,r,n){var a={key:Ti(t),verificationBytes:Ti(t)};return r.password&&(a.verifier=oR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=YDe(r.password)),a}function ZDe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=WDe(t):n.Data=zDe(t,e),n}function e6e(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?ZDe(t,e-2,n):JDe(t,r.biff>=8?e:e-2,r,n),n}var vae=function(){function t(a,s){switch(s.type){case"base64":return e(pu(a),s);case"binary":return e(a,s);case"buffer":return e(Fn&&Buffer.isBuffer(a)?a.toString("binary"):wm(a),s);case"array":return e(Zp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,h=0,m,p=-1;m=A.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(h,A.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[f][p]=x:l[An({r:f,c:p})]=x}break}h=A.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=En(u),l}function r(a,s){return Nm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=na(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=An({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(nA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function t6e(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function j2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function r6e(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),o=a-s;if(o===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,c,u/2]}function n6e(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function $S(t,e){if(e===0)return t;var r=r6e(t6e(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),j2(n6e(r))}var yae=6,a6e=15,s6e=1,Tl=yae;function P2(t){return Math.floor((t+Math.round(128/Tl)/256)*Tl)}function B2(t){return Math.floor((t-5)/Tl*100+.5)/100}function GS(t){return Math.round((t*Tl+5)/Tl*256)/256}function I5(t){return GS(B2(P2(t)))}function lR(t){var e=Math.abs(t-I5(t)),r=Tl;if(e>.005)for(Tl=s6e;Tl<a6e;++Tl)Math.abs(t-I5(t))<=e&&(e=Math.abs(t-I5(t)),r=Tl);Tl=r}function um(t){t.width?(t.wpx=P2(t.width),t.wch=B2(t.wpx),t.MDW=Tl):t.wpx?(t.wch=B2(t.wpx),t.width=GS(t.wch),t.MDW=Tl):typeof t.wch=="number"&&(t.width=GS(t.wch),t.wpx=P2(t.width),t.MDW=Tl),t.customWidth&&delete t.customWidth}var i6e=96,bae=i6e;function T2(t){return t*96/bae}function Tv(t){return t*bae/96}var o6e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function l6e(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Ul)||[]).forEach(function(o){var l=mn(o);switch(Yf(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=ds(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=ds(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function c6e(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Ul)||[]).forEach(function(o){var l=mn(o);switch(Yf(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function u6e(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Ul)||[]).forEach(function(o){var l=mn(o);switch(Yf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ua(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?ds(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?ds(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?ds(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?ds(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?ds(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?ds(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?ds(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=D6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=ds(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Sp[a.color.index];a.color.index==81&&(c=Sp[1]),c||(c=Sp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=$S(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function d6e(t,e,r){e.NumberFmt=[];for(var n=ci(hn),a=0;a<n.length;++a)e.NumberFmt[n[a]]=hn[n[a]];var s=t[0].match(Ul);if(s)for(a=0;a<s.length;++a){var o=mn(s[a]);switch(Yf(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=ra(Ua(o.formatCode)),c=parseInt(o.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}$h(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function f6e(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Sr("numFmt",null,{numFmtId:n,formatCode:ka(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Sr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var XC=["numFmtId","fillId","fontId","borderId","xfId"],YC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function h6e(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Ul)||[]).forEach(function(s){var o=mn(s),l=0;switch(Yf(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<XC.length;++l)n[XC[l]]&&(n[XC[l]]=parseInt(n[XC[l]],10));for(l=0;l<YC.length;++l)n[YC[l]]&&(n[YC[l]]=ds(n[YC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ds(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function A6e(t){var e=[];return e[e.length]=Sr("cellXfs",null),t.forEach(function(r){e[e.length]=Sr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Sr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var m6e=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&d6e(f,d,u),(f=l.match(a))&&u6e(f,d,c,u),(f=l.match(n))&&c6e(f,d,c,u),(f=l.match(s))&&l6e(f,d,c,u),(f=l.match(r))&&h6e(f,d,u),d}}();function wae(t,e){var r=[Ii,Sr("styleSheet",null,{xmlns:Ng[0],"xmlns:vt":so.vt})],n;return t.SSF&&(n=f6e(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=A6e(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function p6e(t,e){var r=t.read_shift(2),n=Ol(t);return[r,n]}function g6e(t,e,r){r||(r=Zt(6+4*e.length)),r.write_shift(2,t),To(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function x6e(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=Zke(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=Jke(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ol(t),n}function v6e(t,e){e||(e=Zt(25+4*32)),e.write_shift(2,t.sz*20),eFe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),QS(t.color,e);var n=0;return n=2,e.write_shift(1,n),To(t.name,e),e.length>e.l?e.slice(0,e.l):e}var y6e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],j5,b6e=Ml;function b$(t,e){e||(e=Zt(4*3+8*7+16*1)),j5||(j5=Zj(y6e));var r=j5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(QS({auto:1},e),QS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function w6e(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Nae(t,e,r){r||(r=Zt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function hy(t,e){return e||(e=Zt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var N6e=Ml;function C6e(t,e){return e||(e=Zt(51)),e.write_shift(1,0),hy(null,e),hy(null,e),hy(null,e),hy(null,e),hy(null,e),e.length>e.l?e.slice(0,e.l):e}function _6e(t,e){return e||(e=Zt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),US(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function E6e(t,e,r){var n=Zt(2052);return n.write_shift(4,t),US(e,n),US(r,n),n.length>n.l?n.slice(0,n.l):n}function S6e(t,e,r){var n={};n.NumberFmt=[];for(var a in hn)n.NumberFmt[a]=hn[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return vA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],$h(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=$S(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function I6e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(cr(t,615,Yd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&cr(t,44,g6e(a,e[a]))}),cr(t,616))}}function j6e(t){var e=1;cr(t,611,Yd(e)),cr(t,43,v6e({sz:12,color:{theme:1},name:"Calibri",family:2})),cr(t,612)}function P6e(t){var e=2;cr(t,603,Yd(e)),cr(t,45,b$({patternType:"none"})),cr(t,45,b$({patternType:"gray125"})),cr(t,604)}function B6e(t){var e=1;cr(t,613,Yd(e)),cr(t,46,C6e()),cr(t,614)}function T6e(t){var e=1;cr(t,626,Yd(e)),cr(t,47,Nae({numFmtId:0},65535)),cr(t,627)}function k6e(t,e){cr(t,617,Yd(e.length)),e.forEach(function(r){cr(t,47,Nae(r,0))}),cr(t,618)}function F6e(t){var e=1;cr(t,619,Yd(e)),cr(t,48,_6e({xfId:0,name:"Normal"})),cr(t,620)}function O6e(t){var e=0;cr(t,505,Yd(e)),cr(t,506)}function D6e(t){var e=0;cr(t,508,E6e(e,"TableStyleMedium9","PivotStyleMedium4")),cr(t,509)}function R6e(t,e){var r=Tc();return cr(r,278),I6e(r,t.SSF),j6e(r),P6e(r),B6e(r),T6e(r),k6e(r,e.cellXfs),F6e(r),O6e(r),D6e(r),cr(r,279),r.end()}var M6e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function L6e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ul)||[]).forEach(function(a){var s=mn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[M6e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function U6e(){}function Q6e(){}var V6e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,H6e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,$6e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function G6e(t,e,r){e.themeElements={};var n;[["clrScheme",V6e,L6e],["fontScheme",H6e,U6e],["fmtScheme",$6e,Q6e]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var K6e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Cae(t,e){(!t||t.length===0)&&(t=cR());var r,n={};if(!(r=t.match(K6e)))throw new Error("themeElements not found in theme");return G6e(r[0],n,e),n.raw=t,n}function cR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ii];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function q6e(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=pne(s,{type:"array"})}catch{return}var l=au(o,"theme/theme/theme1.xml",!0);if(l)return Cae(l,r)}}function z6e(t){return t.read_shift(4)}function W6e(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=X6e(t,4);break;case 2:e.xclrValue=nae(t);break;case 3:e.xclrValue=z6e(t);break;case 4:t.l+=4;break}return t.l+=8,e}function X6e(t,e){return Ml(t,e)}function Y6e(t,e){return Ml(t,e)}function J6e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=W6e(t);break;case 6:n[1]=Y6e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function Z6e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(J6e(t,r-t.l));return{ixfe:n,ext:s}}function eRe(t,e){e.forEach(function(r){switch(r[0]){}})}function tRe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ol(t)}}function rRe(t){var e=Zt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),To(t.name,e),e.slice(0,e.l)}function nRe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function aRe(t){var e=Zt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function sRe(t,e){var r=Zt(8+2*e.length);return r.write_shift(4,t),To(e,r),r.slice(0,r.l)}function iRe(t){return t.l+=4,t.read_shift(4)!=0}function oRe(t,e){var r=Zt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function lRe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return vA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function cRe(){var t=Tc();return cr(t,332),cr(t,334,Yd(1)),cr(t,335,rRe({name:"XLDAPR",version:12e4,flags:3496657072})),cr(t,336),cr(t,339,sRe(1,"XLDAPR")),cr(t,52),cr(t,35,Yd(514)),cr(t,4096,Yd(0)),cr(t,4097,Ku(1)),cr(t,36),cr(t,53),cr(t,340),cr(t,337,oRe(1)),cr(t,51,aRe([[1,0]])),cr(t,338),cr(t,333),t.end()}function uRe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,o;return t.replace(Ul,function(l){var c=mn(l);switch(Yf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function _ae(){var t=[Ii];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function dRe(t){var e=[];if(!t)return e;var r=1;return(t.match(Ul)||[]).forEach(function(n){var a=mn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function fRe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=An(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function hRe(t,e,r){var n=[];return vA(t,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function ARe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;vA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function mRe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Hx=1024;function Eae(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Sr("xml",null,{"xmlns:v":tu.v,"xmlns:o":tu.o,"xmlns:x":tu.x,"xmlns:mv":tu.mv}).replace(/\/>/,">"),Sr("o:shapelayout",Sr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Sr("v:shapetype",[Sr("v:stroke",null,{joinstyle:"miter"}),Sr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Hx<t*1e3;)Hx+=1e3;return e.forEach(function(s){var o=$s(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Sr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Sr("v:fill",c,l),d={on:"t",obscured:"t"};++Hx,a=a.concat(["<v:shape"+E2({id:"_x0000_s"+Hx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Sr("v:shadow",null,d),Sr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",sl("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),sl("x:AutoFill","False"),sl("x:Row",String(o.r)),sl("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function w$(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(o){var l=$s(o.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[o.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[o.ref]=s;var c=na(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=En(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function pRe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=mn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=$s(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&iR(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Sae(t){var e=[Ii,Sr("comments",null,{xmlns:Ng[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ka(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ka(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(sl("t",ka(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(sl("t",ka(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function gRe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Ul,function(l,c){var u=mn(l);switch(Yf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function xRe(t,e,r){var n=[Ii,Sr("ThreadedComments",null,{xmlns:so.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Sr("threadedComment",sl("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function vRe(t,e){var r=[],n=!1;return t.replace(Ul,function(s){var o=mn(s);switch(Yf(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function yRe(t){var e=[Ii,Sr("personList",null,{xmlns:so.TCMNT,"xmlns:x":Ng[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Sr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function bRe(t){var e={};e.iauthor=t.read_shift(4);var r=Sg(t);return e.rfx=r.s,e.ref=An(r.s),t.l+=16,e}function wRe(t,e){return e==null&&(e=Zt(36)),e.write_shift(4,t[1].iauthor),f1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var NRe=Ol;function CRe(t){return To(t.slice(0,54))}function _Re(t,e){var r=[],n=[],a={},s=!1;return vA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function ERe(t){var e=Tc(),r=[];return cr(e,628),cr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),cr(e,632,CRe(a.a)))})}),cr(e,631),cr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:$s(n[0]),e:$s(n[0])};cr(e,635,wRe([s,a])),a.t&&a.t.length>0&&cr(e,637,zke(a)),cr(e,636),delete a.iauthor})}),cr(e,634),cr(e,629),e.end()}var SRe="application/vnd.ms-office.vbaProject";function IRe(t){var e=sn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");sn.utils.cfb_add(e,a,t.FileIndex[n].content)}}),sn.write(e)}function jRe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&sn.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Iae=["xlsb","xlsm","xlam","biff8","xla"];function PRe(){return{"!type":"dialog"}}function BRe(){return{"!type":"dialog"}}function TRe(){return{"!type":"macro"}}function kRe(){return{"!type":"macro"}}var ov=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Hs(d)+(c?"":"$")+Ei(u)}return function(a,s){return e=s,a.replace(t,r)}}(),uR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,dR=function(){return function(e,r){return e.replace(uR,function(n,a,s,o,l,c){var u=Y6(o)-(s?0:r.c),d=X6(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function jae(t,e){return t.replace(uR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Hs(Y6(s)+e.c))+(o=="$"?o+l:Ei(X6(l)+e.r))})}function FRe(t,e,r){var n=kc(e),a=n.s,s=$s(r),o={r:s.r-a.r,c:s.c-a.c};return jae(t,o)}function ORe(t){return t.length!=1}function N$(t){return t.replace(/_xlfn\./g,"")}function ji(t){t.l+=1}function dm(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Pae(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Bae(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=dm(t),l=dm(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Bae(t){var e=dm(t),r=dm(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function DRe(t,e,r){if(r.biff<8)return Bae(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=dm(t),o=dm(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Tae(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return RRe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=dm(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function RRe(t){var e=dm(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function MRe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function LRe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return URe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function URe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function QRe(t,e,r){var n=(t[t.l++]&96)>>5,a=Pae(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function VRe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Pae(t,s,r);return[n,a,o]}function HRe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function $Re(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function GRe(t,e,r){var n=(t[t.l++]&96)>>5,a=DRe(t,e-1,r);return[n,a]}function KRe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function C$(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function qRe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function zRe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function WRe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function XRe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function YRe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function kae(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function JRe(t){return t.read_shift(2),kae(t)}function ZRe(t){return t.read_shift(2),kae(t)}function e8e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Tae(t,0,r);return[n,a]}function t8e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=LRe(t,0,r);return[n,a]}function r8e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Tae(t,0,r);return[n,a,s]}function n8e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[iMe[a],Dae[a],n]}function a8e(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:s8e(t);return[a,(s[0]===0?Dae:sMe)[s[1]]]}function s8e(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function i8e(t,e,r){t.l+=r&&r.biff==2?3:4}function o8e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function l8e(t){return t.l++,yA[t.read_shift(1)]}function c8e(t){return t.l++,t.read_shift(2)}function u8e(t){return t.l++,t.read_shift(1)!==0}function d8e(t){return t.l++,kl(t)}function f8e(t,e,r){return t.l++,Tw(t,e-1,r)}function h8e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=pi(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=yA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=kl(t);break;case 2:r[1]=Ig(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function A8e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Sg:r4)(t));return a}function m8e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=h8e(t,r.biff);return o}function p8e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function g8e(t,e,r){if(r.biff==5)return x8e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function x8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function v8e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function y8e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function b8e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function w8e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var N8e=Ml,C8e=Ml,_8e=Ml;function Fw(t,e,r){return t.l+=2,[MRe(t)]}function fR(t){return t.l+=6,[]}var E8e=Fw,S8e=fR,I8e=fR,j8e=Fw;function Fae(t){return t.l+=2,[Ti(t),t.read_shift(2)&1]}var P8e=Fw,B8e=Fae,T8e=fR,k8e=Fw,F8e=Fw,O8e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function D8e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=O8e[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function R8e(t){return t.l+=2,[t.read_shift(4)]}function M8e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function L8e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function U8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Q8e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function V8e(t){return t.l+=4,[0,0]}var _$={1:{n:"PtgExp",f:o8e},2:{n:"PtgTbl",f:_8e},3:{n:"PtgAdd",f:ji},4:{n:"PtgSub",f:ji},5:{n:"PtgMul",f:ji},6:{n:"PtgDiv",f:ji},7:{n:"PtgPower",f:ji},8:{n:"PtgConcat",f:ji},9:{n:"PtgLt",f:ji},10:{n:"PtgLe",f:ji},11:{n:"PtgEq",f:ji},12:{n:"PtgGe",f:ji},13:{n:"PtgGt",f:ji},14:{n:"PtgNe",f:ji},15:{n:"PtgIsect",f:ji},16:{n:"PtgUnion",f:ji},17:{n:"PtgRange",f:ji},18:{n:"PtgUplus",f:ji},19:{n:"PtgUminus",f:ji},20:{n:"PtgPercent",f:ji},21:{n:"PtgParen",f:ji},22:{n:"PtgMissArg",f:ji},23:{n:"PtgStr",f:f8e},26:{n:"PtgSheet",f:M8e},27:{n:"PtgEndSheet",f:L8e},28:{n:"PtgErr",f:l8e},29:{n:"PtgBool",f:u8e},30:{n:"PtgInt",f:c8e},31:{n:"PtgNum",f:d8e},32:{n:"PtgArray",f:KRe},33:{n:"PtgFunc",f:n8e},34:{n:"PtgFuncVar",f:a8e},35:{n:"PtgName",f:p8e},36:{n:"PtgRef",f:e8e},37:{n:"PtgArea",f:QRe},38:{n:"PtgMemArea",f:v8e},39:{n:"PtgMemErr",f:N8e},40:{n:"PtgMemNoMem",f:C8e},41:{n:"PtgMemFunc",f:y8e},42:{n:"PtgRefErr",f:b8e},43:{n:"PtgAreaErr",f:HRe},44:{n:"PtgRefN",f:t8e},45:{n:"PtgAreaN",f:GRe},46:{n:"PtgMemAreaN",f:U8e},47:{n:"PtgMemNoMemN",f:Q8e},57:{n:"PtgNameX",f:g8e},58:{n:"PtgRef3d",f:r8e},59:{n:"PtgArea3d",f:VRe},60:{n:"PtgRefErr3d",f:w8e},61:{n:"PtgAreaErr3d",f:$Re},255:{}},H8e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},$8e={1:{n:"PtgElfLel",f:Fae},2:{n:"PtgElfRw",f:k8e},3:{n:"PtgElfCol",f:E8e},6:{n:"PtgElfRwV",f:F8e},7:{n:"PtgElfColV",f:j8e},10:{n:"PtgElfRadical",f:P8e},11:{n:"PtgElfRadicalS",f:T8e},13:{n:"PtgElfColS",f:S8e},15:{n:"PtgElfColSV",f:I8e},16:{n:"PtgElfRadicalLel",f:B8e},25:{n:"PtgList",f:D8e},29:{n:"PtgSxName",f:R8e},255:{}},G8e={0:{n:"PtgAttrNoop",f:V8e},1:{n:"PtgAttrSemi",f:YRe},2:{n:"PtgAttrIf",f:WRe},4:{n:"PtgAttrChoose",f:qRe},8:{n:"PtgAttrGoto",f:zRe},16:{n:"PtgAttrSum",f:i8e},32:{n:"PtgAttrBaxcel",f:C$},33:{n:"PtgAttrBaxcel",f:C$},64:{n:"PtgAttrSpace",f:JRe},65:{n:"PtgAttrSpaceSemi",f:ZRe},128:{n:"PtgAttrIfError",f:XRe},255:{}};function Ow(t,e,r,n){if(n.biff<8)return Ml(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=m8e(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=A8e(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Ml(t,e)),s}function Dw(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=_$[s]||_$[H8e[s]],(s===24||s===25)&&(a=(s===24?$8e:G8e)[t[t.l+1]]),!a||!a.f?Ml(t,e):o.push([a.n,a.f(t,e,r)]);return o}function K8e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var q8e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function z8e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Oae(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function E$(t,e,r){var n=Oae(t,e,r);return n=="#REF"?n:z8e(n,r)}function Pl(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=si(" ",t[0][p][1][1]);break;case 1:g=si("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+q8e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Cb(b[1][1],o,a),l.push(_b(d,s));break;case"PtgRefN":d=r?Cb(b[1][1],r,a):b[1][1],l.push(_b(d,s));break;case"PtgRef3d":f=b[1][1],d=Cb(b[1][2],o,a),m=E$(n,f,a),l.push(m+"!"+_b(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=t$(b[1][1],r?{s:r}:o,a),l.push(_5(h,a));break;case"PtgArea":h=t$(b[1][1],o,a),l.push(_5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=E$(n,f,a),l.push(m+"!"+_5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=b[1][2];var _=(n.names||[])[A-1]||(n[0]||[])[A],S=_?_.Name:"SH33TJSNAME"+String(A);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var E=b[1][1];A=b[1][2];var F;if(a.biff<=5)E<0&&(E=-E),n[E]&&(F=n[E][A]);else{var P="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][A]&&n[E][A].itab>0&&(P=n.SheetNames[n[E][A].itab-1]+"!"):P=n.SheetNames[A-1]+"!"),n[E]&&n[E][A])P+=n[E][A].Name;else if(n[0]&&n[0][A])P+=n[0][A].Name;else{var k=(Oae(n,E,a)||"").split(";;");k[A-1]?P=k[A-1]:P+="SH33TJSERRX"}l.push(P);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var D="(",Z=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:D=si(" ",t[0][p][1][1])+D;break;case 3:D=si("\r",t[0][p][1][1])+D;break;case 4:Z=si(" ",t[0][p][1][1])+Z;break;case 5:Z=si("\r",t[0][p][1][1])+Z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+Z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var fe={c:r.c,r:r.r};if(n.sharedf[An(d)]){var me=n.sharedf[An(d)];l.push(Pl(me,o,fe,n,a))}else{var pe=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Pl(u[1],o,fe,n,a)),pe=!0;break}pe||l.push(b[1])}break;case"PtgArray":l.push("{"+K8e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ye=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ye.indexOf(t[0][x][0])==-1){b=t[0][p];var ae=!0;switch(b[1][0]){case 4:ae=!1;case 0:g=si(" ",b[1][1]);break;case 5:ae=!1;case 1:g=si("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ae?g:"")+l.pop()+(ae?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function W8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Ml(t,e-2)];var l=Dw(t,o,r);return e!==o+a&&(s=Ow(t,e-o-a,l,r)),t.l=n,[l,s]}function X8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Ml(t,e-2)];var l=Dw(t,o,r);return e!==o+a&&(s=Ow(t,e-o-a,l,r)),t.l=n,[l,s]}function Y8e(t,e,r,n){var a=t.l+e,s=Dw(t,n,r),o;return a!==t.l&&(o=Ow(t,a-t.l,s,r)),[s,o]}function J8e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),o=Dw(t,s,r);return s==65535?[[],Ml(t,e-2)]:(e!==s+2&&(a=Ow(t,n-s-2,o,r)),[o,a])}function Z8e(t){var e;if(kh(t,t.l+6)!==65535)return[kl(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function eMe(t){if(t==null){var e=Zt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return eg(t);return eg(0)}function P5(t,e,r){var n=t.l+e,a=Jf(t);r.biff==2&&++t.l;var s=Z8e(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=X8e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function tMe(t,e,r,n,a){var s=rg(e,r,a),o=eMe(t.v),l=Zt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Zt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Po([s,o,l,u]);return f}function n4(t,e,r){var n=t.read_shift(4),a=Dw(t,n,r),s=t.read_shift(4),o=s>0?Ow(t,s,a,r):null;return[a,o]}var rMe=n4,a4=n4,nMe=n4,aMe=n4,sMe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Dae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},iMe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function S$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function oMe(t){var e="of:="+t.replace(uR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function B5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function lMe(t){return t.replace(/\./,"!")}var Sb={},lv={},Ib=typeof Map<"u";function hR(t,e,r){var n=0,a=t.length;if(r){if(Ib?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Ib?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Ib?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function s4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Tl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=B2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=GS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Pp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Cm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){$h(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Rae(t,e,r,n,a,s){try{n.cellNF&&(t.z=hn[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ms(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(hn[e]==null&&$h(ske[e]||"General",e),t.t==="e")t.w=t.w||yA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v);else if(t.t==="d"){var o=co(t.v);(o|0)===o?t.w=o.toString(10):t.w=C2(o)}else{if(t.v===void 0)return"";t.w=Jp(t.v,lv)}else t.t==="d"?t.w=ud(e,co(t.v),lv):t.w=ud(e,t.v,lv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=$S(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=$S(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function cMe(t,e,r){if(t&&t["!ref"]){var n=na(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function uMe(t,e){var r=na(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=En(r))}var dMe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,fMe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hMe=/<(?:\w:)?hyperlink [^>]*>/mg,AMe=/"(\w*:\w*)"/,mMe=/<(?:\w:)?col\b[^>]*[\/]?>/g,pMe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,gMe=/<(?:\w:)?pageMargins[^>]*\/>/g,Mae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,xMe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,vMe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function yMe(t,e,r,n,a,s,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(fMe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var A=u.match(Mae);A?AR(A[0],l,a,r):(A=u.match(xMe))&&wMe(A[0],A[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(AMe);m&&uMe(l,m[1])}var p=u.match(vMe);p&&p[1]&&OMe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(mMe);x&&PMe(g,x)}f&&MMe(f[1],l,e,c,s,o);var y=d.match(pMe);y&&(l["!autofilter"]=TMe(y[0]));var b=[],w=d.match(dMe);if(w)for(h=0;h!=w.length;++h)b[h]=na(w[h].slice(w[h].indexOf('"')+1));var j=d.match(hMe);j&&SMe(l,j,n);var I=d.match(gMe);if(I&&(l["!margins"]=IMe(mn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=En(c)),e.sheetRows>0&&l["!ref"]){var _=na(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=En(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function bMe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+En(t[r])+'"/>';return e+"</mergeCells>"}function AR(t,e,r,n){var a=mn(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=ra(Ua(a.codeName)))}function wMe(t,e,r,n,a){AR(t.slice(0,t.indexOf(">")),r,n,a)}function NMe(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Ff(ka(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+Sr("outlinePr",null,u)}!s&&!l||(a[a.length]=Sr("sheetPr",l,o))}var CMe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],_Me=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function EMe(t){var e={sheet:1};return CMe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),_Me.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=oR(t.password).toString(16).toUpperCase()),Sr("sheetProtection",null,e)}function SMe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=mn(Ua(e[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+ra(s.location))):(s.Target="#"+ra(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=na(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=An({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function IMe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function jMe(t){return Pp(t),Sr("pageMargins",null,t)}function PMe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=mn(e[n],!0);a.hidden&&(a.hidden=ds(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,lR(a.width)),um(a);s<=o;)t[s++]=ps(a)}}function BMe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Sr("col",null,s4(a,n)));return r[r.length]="</cols>",r.join("")}function TMe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function kMe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:En(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=kc(a);o.s.r==o.e.r&&(o.e.r=kc(e["!ref"]).e.r,a=En(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Sr("autoFilter",null,{ref:a})}var FMe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function OMe(t,e){e.Views||(e.Views=[{}]),(t.match(FMe)||[]).forEach(function(r,n){var a=mn(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),ds(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function DMe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Sr("sheetViews",Sr("sheetView",null,a),{})}function RMe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=yA[t.v];break;case"d":n&&n.cellDates?a=ms(t.v,-1).toISOString():(t=ps(t),t.t="n",a=""+(t.v=co(ms(t.v)))),typeof t.z>"u"&&(t.z=hn[14]);break;default:a=t.v;break}var l=sl("v",ka(a)),c={r:e},u=Cm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=sl("v",""+hR(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Sr("f",ka(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Sr("c",l,c)}var MMe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=_2("v"),o=_2("f");return function(c,u,d,f,A,h){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,j="",I,_,S=0,E=0,F,P,k=0,D=0,Z=Array.isArray(h.CellXf),fe,me=[],pe=[],ye=Array.isArray(u),ae=[],je={},Be=!1,O=!!d.sheetStubs,G=c.split(e),z=0,L=G.length;z!=L;++z){p=G[z].trim();var Y=p.length;if(Y!==0){var J=0;e:for(m=0;m<Y;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=mn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,d.sheetRows&&d.sheetRows<S)continue;je={},Be=!1,_.ht&&(Be=!0,je.hpt=parseFloat(_.ht),je.hpx=Tv(je.hpt)),_.hidden=="1"&&(Be=!0,je.hidden=!0),_.outlineLevel!=null&&(Be=!0,je.level=+_.outlineLevel),Be&&(ae[S-1]=je)}break;case"<":J=m;break}if(J>=m)break;if(_=mn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(je={},Be=!1,_.ht&&(Be=!0,je.hpt=parseFloat(_.ht),je.hpx=Tv(je.hpt)),_.hidden=="1"&&(Be=!0,je.hidden=!0),_.outlineLevel!=null&&(Be=!0,je.level=+_.outlineLevel),Be&&(ae[S-1]=je)),g=p.slice(m).split(t);for(var R=0;R!=g.length&&g[R].trim().charAt(0)=="<";++R);for(g=g.slice(R),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,j=x[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=mn(p.slice(0,b),!0),_.r||(_.r=An({r:S-1,c:E})),j=p.slice(b),I={t:""},(x=j.match(s))!=null&&x[1]!==""&&(I.v=ra(x[1])),d.cellFormula){if((x=j.match(o))!=null&&x[1]!==""){if(I.f=ra(Ua(x[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=N$(I.f)),x[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&me.push([na(I.F),I.F]);else if(x[0].indexOf('t="shared"')>-1){P=mn(x[0]);var H=ra(Ua(x[1]));d.xlfn||(H=N$(H)),pe[parseInt(P.si,10)]=[P,H,_.r]}}else(x=j.match(/<f[^>]*\/>/))&&(P=mn(x[0]),pe[P.si]&&(I.f=FRe(pe[P.si][1],pe[P.si][2],_.r)));var ne=$s(_.r);for(b=0;b<me.length;++b)ne.r>=me[b][0].s.r&&ne.r<=me[b][0].e.r&&ne.c>=me[b][0].s.c&&ne.c<=me[b][0].e.c&&(I.F=me[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(O)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),I.t){case"n":if(I.v==""||I.v==null){if(!O)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!O)continue;I.t="z"}else F=Sb[parseInt(I.v,10)],I.v=F.t,I.r=F.r,d.cellHTML&&(I.h=F.h);break;case"str":I.t="s",I.v=I.v!=null?Ua(I.v):"",d.cellHTML&&(I.h=K6(I.v));break;case"inlineStr":x=j.match(n),I.t="s",x!=null&&(F=iR(x[1]))?(I.v=F.t,d.cellHTML&&(I.h=F.h)):I.v="";break;case"b":I.v=ds(I.v);break;case"d":d.cellDates?I.v=ms(I.v,1):(I.v=co(ms(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=Une[I.v];break}if(k=D=0,fe=null,Z&&_.s!==void 0&&(fe=h.CellXf[_.s],fe!=null&&(fe.numFmtId!=null&&(k=fe.numFmtId),d.cellStyles&&fe.fillId!=null&&(D=fe.fillId))),Rae(I,k,D,d,A,h),d.cellDates&&Z&&I.t=="n"&&c1(hn[k])&&(I.t="d",I.v=t4(I.v)),_.cm&&d.xlmeta){var ge=(d.xlmeta.Cell||[])[+_.cm-1];ge&&ge.type=="XLDAPR"&&(I.D=!0)}if(ye){var U=$s(_.r);u[U.r]||(u[U.r]=[]),u[U.r][U.c]=I}else u[_.r]=I}}}}ae.length>0&&(u["!rows"]=ae)}}();function LMe(t,e,r,n){var a=[],s=[],o=na(t["!ref"]),l="",c,u="",d=[],f=0,A=0,h=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=Hs(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Ei(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var y=m?(t[f]||[])[A]:t[c];y!==void 0&&(l=RMe(y,c,t,e))!=null&&s.push(l)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(g=h[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=T2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=Sr("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},g=h[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=T2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=Sr("row","",p));return a.join("")}function Lae(t,e,r,n){var a=[Ii,Sr("worksheet",null,{xmlns:Ng[0],"xmlns:r":so.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=na(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=En(d)}n||(n={}),c["!comments"]=[];var f=[];NMe(c,r,t,e,a),a[a.length]=Sr("dimension",null,{ref:u}),a[a.length]=DMe(c,e,t,r),e.sheetFormat&&(a[a.length]=Sr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=BMe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=LMe(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=EMe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=kMe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=bMe(c["!merges"]));var A=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=ja(n,-1,ka(p[1].Target).replace(/#.*$/,""),Un.HLINK),h["r:id"]="rId"+m),(A=p[1].Target.indexOf("#"))>-1&&(h.location=ka(p[1].Target.slice(A+1))),p[1].Tooltip&&(h.tooltip=ka(p[1].Tooltip)),a[a.length]=Sr("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=jMe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=sl("ignoredErrors",Sr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=ja(n,-1,"../drawings/drawing"+(t+1)+".xml",Un.DRAW),a[a.length]=Sr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=ja(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Un.VML),a[a.length]=Sr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function UMe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function QMe(t,e,r){var n=Zt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=T2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,A=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[An(u)];m&&(f<0&&(f=h),A=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function VMe(t,e,r,n){var a=QMe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&cr(t,0,a)}var HMe=Sg,$Me=f1;function GMe(){}function KMe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=Wke(t),r}function qMe(t,e,r){r==null&&(r=Zt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return QS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),One(t,r),r.slice(0,r.l)}function zMe(t){var e=pd(t);return[e]}function WMe(t,e,r){return r==null&&(r=Zt(8)),Cg(e,r)}function XMe(t){var e=_g(t);return[e]}function YMe(t,e,r){return r==null&&(r=Zt(4)),Eg(e,r)}function JMe(t){var e=pd(t),r=t.read_shift(1);return[e,r,"b"]}function ZMe(t,e,r){return r==null&&(r=Zt(9)),Cg(e,r),r.write_shift(1,t.v?1:0),r}function eLe(t){var e=_g(t),r=t.read_shift(1);return[e,r,"b"]}function tLe(t,e,r){return r==null&&(r=Zt(5)),Eg(e,r),r.write_shift(1,t.v?1:0),r}function rLe(t){var e=pd(t),r=t.read_shift(1);return[e,r,"e"]}function nLe(t,e,r){return r==null&&(r=Zt(9)),Cg(e,r),r.write_shift(1,t.v),r}function aLe(t){var e=_g(t),r=t.read_shift(1);return[e,r,"e"]}function sLe(t,e,r){return r==null&&(r=Zt(8)),Eg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function iLe(t){var e=pd(t),r=t.read_shift(4);return[e,r,"s"]}function oLe(t,e,r){return r==null&&(r=Zt(12)),Cg(e,r),r.write_shift(4,e.v),r}function lLe(t){var e=_g(t),r=t.read_shift(4);return[e,r,"s"]}function cLe(t,e,r){return r==null&&(r=Zt(8)),Eg(e,r),r.write_shift(4,e.v),r}function uLe(t){var e=pd(t),r=kl(t);return[e,r,"n"]}function dLe(t,e,r){return r==null&&(r=Zt(16)),Cg(e,r),eg(t.v,r),r}function Uae(t){var e=_g(t),r=kl(t);return[e,r,"n"]}function fLe(t,e,r){return r==null&&(r=Zt(12)),Eg(e,r),eg(t.v,r),r}function hLe(t){var e=pd(t),r=tR(t);return[e,r,"n"]}function ALe(t,e,r){return r==null&&(r=Zt(12)),Cg(e,r),Dne(t.v,r),r}function mLe(t){var e=_g(t),r=tR(t);return[e,r,"n"]}function pLe(t,e,r){return r==null&&(r=Zt(8)),Eg(e,r),Dne(t.v,r),r}function gLe(t){var e=pd(t),r=J6(t);return[e,r,"is"]}function xLe(t){var e=pd(t),r=Ol(t);return[e,r,"str"]}function vLe(t,e,r){return r==null&&(r=Zt(12+4*t.v.length)),Cg(e,r),To(t.v,r),r.length>r.l?r.slice(0,r.l):r}function yLe(t){var e=_g(t),r=Ol(t);return[e,r,"str"]}function bLe(t,e,r){return r==null&&(r=Zt(8+4*t.v.length)),Eg(e,r),To(t.v,r),r.length>r.l?r.slice(0,r.l):r}function wLe(t,e,r){var n=t.l+e,a=pd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=a4(t,n-t.l,r);o[3]=Pl(l,null,a,r.supbooks,r)}else t.l=n;return o}function NLe(t,e,r){var n=t.l+e,a=pd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=a4(t,n-t.l,r);o[3]=Pl(l,null,a,r.supbooks,r)}else t.l=n;return o}function CLe(t,e,r){var n=t.l+e,a=pd(t);a.r=r["!row"];var s=kl(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=a4(t,n-t.l,r);o[3]=Pl(l,null,a,r.supbooks,r)}else t.l=n;return o}function _Le(t,e,r){var n=t.l+e,a=pd(t);a.r=r["!row"];var s=Ol(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=a4(t,n-t.l,r);o[3]=Pl(l,null,a,r.supbooks,r)}else t.l=n;return o}var ELe=Sg,SLe=f1;function ILe(t,e){return e==null&&(e=Zt(4)),e.write_shift(4,t),e}function jLe(t,e){var r=t.l+e,n=Sg(t),a=Z6(t),s=Ol(t),o=Ol(t),l=Ol(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function PLe(t,e){var r=Zt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));f1({s:$s(t[0]),e:$s(t[0])},r),eR("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return To(a||"",r),To(t[1].Tooltip||"",r),To("",r),r.slice(0,r.l)}function BLe(){}function TLe(t,e,r){var n=t.l+e,a=Rne(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=rMe(t,n-t.l,r);o[1]=l}else t.l=n;return o}function kLe(t,e,r){var n=t.l+e,a=Sg(t),s=[a];if(r.cellFormula){var o=aMe(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function FLe(t,e,r){r==null&&(r=Zt(18));var n=s4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Qae=["left","right","top","bottom","header","footer"];function OLe(t){var e={};return Qae.forEach(function(r){e[r]=kl(t)}),e}function DLe(t,e){return e==null&&(e=Zt(6*8)),Pp(t),Qae.forEach(function(r){eg(t[r],e)}),e}function RLe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function MLe(t,e,r){r==null&&(r=Zt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function LLe(t){var e=Zt(24);return e.write_shift(4,4),e.write_shift(4,1),f1(t,e),e}function ULe(t,e){return e==null&&(e=Zt(16*4+2)),e.write_shift(2,t.password?oR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function QLe(){}function VLe(){}function HLe(t,e,r,n,a,s,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,h,m,p,g,x,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,S=!1,E=[],F={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=F,P.arrayf=E,P.SheetNames=a.SheetNames||a.Sheets.map(function(ye){return ye.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var k=0;k<a.Names.length;++k)P[0][k+1]=a.Names[k];var D=[],Z=[],fe=!1;k2[16]={n:"BrtShortReal",f:Uae};var me;if(vA(t,function(ae,je,Be){if(!A)switch(Be){case 148:u=ae;break;case 0:h=ae,l.sheetRows&&l.sheetRows<=h.r&&(A=!0),w=Ei(g=h.r),l["!row"]=h.r,(ae.hidden||ae.hpt||ae.level!=null)&&(ae.hpt&&(ae.hpx=Tv(ae.hpt)),Z[ae.r]=ae);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ae[2]},ae[2]){case"n":m.v=ae[1];break;case"s":b=Sb[ae[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ae[1];break;case"e":m.v=ae[1],l.cellText!==!1&&(m.w=yA[m.v]);break;case"str":m.t="s",m.v=ae[1];break;case"is":m.t="s",m.v=ae[1].t;break}if((p=o.CellXf[ae[0].iStyleRef])&&Rae(m,p.numFmtId,null,l,s,o),x=ae[0].c==-1?x+1:ae[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Hs(x)+w]=m,l.cellFormula){for(S=!1,_=0;_<E.length;++_){var O=E[_];h.r>=O[0].s.r&&h.r<=O[0].e.r&&x>=O[0].s.c&&x<=O[0].e.c&&(m.F=En(O[0]),S=!0)}!S&&ae.length>3&&(m.f=ae[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>x&&(d.s.c=x),d.e.r<h.r&&(d.e.r=h.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&c1(hn[p.numFmtId])){var G=hp(m.v);G&&(m.t="d",m.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}me&&(me.type=="XLDAPR"&&(m.D=!0),me=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},x=ae[0].c==-1?x+1:ae[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Hs(x)+w]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>x&&(d.s.c=x),d.e.r<h.r&&(d.e.r=h.r),d.e.c<x&&(d.e.c=x),me&&(me.type=="XLDAPR"&&(m.D=!0),me=void 0);break;case 176:I.push(ae);break;case 49:me=((l.xlmeta||{}).Cell||[])[ae-1];break;case 494:var z=n["!id"][ae.relId];for(z?(ae.Target=z.Target,ae.loc&&(ae.Target+="#"+ae.loc),ae.Rel=z):ae.relId==""&&(ae.Target="#"+ae.loc),g=ae.rfx.s.r;g<=ae.rfx.e.r;++g)for(x=ae.rfx.s.c;x<=ae.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=ae):(y=An({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ae);break;case 426:if(!l.cellFormula)break;E.push(ae),j=l.dense?c[g][x]:c[Hs(x)+w],j.f=Pl(ae[1],d,{r:h.r,c:x},P,l),j.F=En(ae[0]);break;case 427:if(!l.cellFormula)break;F[An(ae[0].s)]=ae[1],j=l.dense?c[g][x]:c[Hs(x)+w],j.f=Pl(ae[1],d,{r:h.r,c:x},P,l);break;case 60:if(!l.cellStyles)break;for(;ae.e>=ae.s;)D[ae.e--]={width:ae.w/256,hidden:!!(ae.flags&1),level:ae.level},fe||(fe=!0,lR(ae.w/256)),um(D[ae.e+1]);break;case 161:c["!autofilter"]={ref:En(ae)};break;case 476:c["!margins"]=ae;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ae.name&&(a.Sheets[r].CodeName=ae.name),(ae.above||ae.left)&&(c["!outline"]={above:ae.above,left:ae.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ae.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!je.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Be.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=En(u||d)),l.sheetRows&&c["!ref"]){var pe=na(c["!ref"]);l.sheetRows<=+pe.e.r&&(pe.e.r=l.sheetRows-1,pe.e.r>d.e.r&&(pe.e.r=d.e.r),pe.e.r<pe.s.r&&(pe.s.r=pe.e.r),pe.e.c>d.e.c&&(pe.e.c=d.e.c),pe.e.c<pe.s.c&&(pe.s.c=pe.e.c),c["!fullref"]=c["!ref"],c["!ref"]=En(pe))}return I.length>0&&(c["!merges"]=I),D.length>0&&(c["!cols"]=D),Z.length>0&&(c["!rows"]=Z),c}function $Le(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ps(e),e.z=e.z||hn[14],e.v=co(ms(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Cm(a.cellXfs,e,a),e.l&&s["!links"].push([An(c),e.l]),e.c&&s["!comments"].push([An(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=hR(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?cr(t,18,cLe(e,c)):cr(t,7,oLe(e,c))):(c.t="str",o?cr(t,17,bLe(e,c)):cr(t,6,vLe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?cr(t,13,pLe(e,c)):cr(t,2,ALe(e,c)):o?cr(t,16,fLe(e,c)):cr(t,5,dLe(e,c)),!0;case"b":return c.t="b",o?cr(t,15,tLe(e,c)):cr(t,4,ZMe(e,c)),!0;case"e":return c.t="e",o?cr(t,14,sLe(e,c)):cr(t,3,nLe(e,c)),!0}return o?cr(t,12,YMe(e,c)):cr(t,1,WMe(e,c)),!0}function GLe(t,e,r,n){var a=na(e["!ref"]||"A1"),s,o="",l=[];cr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Ei(d),VMe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=Hs(A)),s=l[A]+o;var h=c?(e[d]||[])[A]:e[s];if(!h){f=!1;continue}f=$Le(t,h,d,A,n,e,f)}}cr(t,146)}function KLe(t,e){!e||!e["!merges"]||(cr(t,177,ILe(e["!merges"].length)),e["!merges"].forEach(function(r){cr(t,176,SLe(r))}),cr(t,178))}function qLe(t,e){!e||!e["!cols"]||(cr(t,390),e["!cols"].forEach(function(r,n){r&&cr(t,60,FLe(n,r))}),cr(t,391))}function zLe(t,e){!e||!e["!ref"]||(cr(t,648),cr(t,649,LLe(na(e["!ref"]))),cr(t,650))}function WLe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=ja(r,-1,n[1].Target.replace(/#.*$/,""),Un.HLINK);cr(t,494,PLe(n,a))}}),delete e["!links"]}function XLe(t,e,r,n){if(e["!comments"].length>0){var a=ja(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Un.VML);cr(t,551,eR("rId"+a)),e["!legacy"]=a}}function YLe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:En(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=kc(s);l.s.r==l.e.r&&(l.e.r=kc(e["!ref"]).e.r,s=En(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),cr(t,161,f1(na(s))),cr(t,162)}}function JLe(t,e,r){cr(t,133),cr(t,137,MLe(e,r)),cr(t,138),cr(t,134)}function ZLe(t,e){e["!protect"]&&cr(t,535,ULe(e["!protect"]))}function eUe(t,e,r,n){var a=Tc(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=na(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],cr(a,129),(r.vbaraw||o["!outline"])&&cr(a,147,qMe(l,o["!outline"])),cr(a,148,$Me(c)),JLe(a,o,r.Workbook),qLe(a,o),GLe(a,o,t,e),ZLe(a,o),YLe(a,o,r,t),KLe(a,o),WLe(a,o,n),o["!margins"]&&cr(a,476,DLe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&zLe(a,o),XLe(a,o,t,n),cr(a,130),a.end()}function tUe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var a=ra((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function rUe(t,e,r,n,a,s){var o=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=tUe(f);d.s.r=d.s.c=0,d.e.c=l,u=Hs(l),A[0].forEach(function(h,m){o[u+Ei(m)]={t:"n",v:h,z:A[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=En(d)),o}function nUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(Mae);return l&&AR(l[0],s,a,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function aUe(t,e){t.l+=10;var r=Ol(t);return{name:r}}function sUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return vA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var mR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],iUe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],oUe=[],lUe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function I$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ds(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function j$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ds(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Vae(t){j$(t.WBProps,mR),j$(t.CalcPr,lUe),I$(t.WBView,iUe),I$(t.Sheets,oUe),lv.date1904=ds(t.WBProps.date1904)}function cUe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ds(t.Workbook.WBProps.date1904)?"true":"false"}var uUe="][*?/\\".split("");function Hae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return uUe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function dUe(t,e,r){t.forEach(function(n,a){Hae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function fUe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];dUe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)cMe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var hUe=/<\w+:workbook/;function AUe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(t.replace(Ul,function(c,u){var d=mn(c);switch(Yf(d[0])){case"<?xml":break;case"<workbook":c.match(hUe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":mR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ds(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ua(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=ra(Ua(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ua(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ds(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=ra(Ua(t.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Ng.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Vae(r),r}function $ae(t){var e=[Ii];e[e.length]=Sr("workbook",null,{xmlns:Ng[0],"xmlns:r":so.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(mR.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Sr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:ka(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Sr("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=Sr("definedName",ka(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function mUe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Gk(t),r.name=Ol(t),r}function pUe(t,e){return e||(e=Zt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),eR(t.strRelID,e),To(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function gUe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Ol(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function xUe(t,e){e||(e=Zt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),One(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function vUe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function yUe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Xke(t),o=nMe(t,0,r),l=Z6(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function bUe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],k2[16]={n:"BrtFRTArchID$",f:vUe},vA(t,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Pl(c.Ptg,null,null,o,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Vae(r),r.Names=s,r.supbooks=o,r}function wUe(t,e){cr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};cr(t,156,pUe(a))}cr(t,144)}function NUe(t,e){e||(e=Zt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return To("SheetJS",e),To(FS.version,e),To(FS.version,e),To("7262",e),e.length>e.l?e.slice(0,e.l):e}function CUe(t,e){e||(e=Zt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function _Ue(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(cr(t,135),cr(t,158,CUe(a)),cr(t,136))}}function EUe(t,e){var r=Tc();return cr(r,131),cr(r,128,NUe()),cr(r,153,xUe(t.Workbook&&t.Workbook.WBProps||null)),_Ue(r,t),wUe(r,t),cr(r,132),r.end()}function SUe(t,e,r){return e.slice(-4)===".bin"?bUe(t,r):AUe(t,r)}function IUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?HLe(t,n,r,a,s,o,l):yMe(t,n,r,a,s,o,l)}function jUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?sUe(t,n,r,a,s):nUe(t,n,r,a,s)}function PUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?TRe():kRe()}function BUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?PRe():BRe()}function TUe(t,e,r,n){return e.slice(-4)===".bin"?S6e(t,r,n):m6e(t,r,n)}function kUe(t,e,r){return Cae(t,r)}function FUe(t,e,r){return e.slice(-4)===".bin"?FDe(t,r):BDe(t,r)}function OUe(t,e,r){return e.slice(-4)===".bin"?_Re(t,r):pRe(t,r)}function DUe(t,e,r){return e.slice(-4)===".bin"?hRe(t):dRe(t)}function RUe(t,e,r,n){return r.slice(-4)===".bin"?ARe(t,e,r,n):void 0}function MUe(t,e,r){return e.slice(-4)===".bin"?lRe(t,e,r):uRe(t,e,r)}function LUe(t,e,r){return(e.slice(-4)===".bin"?EUe:$ae)(t)}function UUe(t,e,r,n,a){return(e.slice(-4)===".bin"?eUe:Lae)(t,r,n,a)}function QUe(t,e,r){return(e.slice(-4)===".bin"?R6e:wae)(t,r)}function VUe(t,e,r){return(e.slice(-4)===".bin"?RDe:Aae)(t,r)}function HUe(t,e,r){return(e.slice(-4)===".bin"?ERe:Sae)(t)}function $Ue(t){return(t.slice(-4)===".bin"?cRe:_ae)()}var Gae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Kae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Pd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Gae),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Kae),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function GUe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Gae),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(Kae),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var jb;function KUe(t,e){var r=jb[t]||ra(t);return r==="General"?Jp(e):ud(r,e)}function qUe(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ds(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ms(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[ra(e)]=a}function zUe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||yA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v):t.w=Jp(t.v):t.w=KUe(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=jb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&c1(n)){var a=hp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function WUe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=o6e[n.Pattern]||n.Pattern)}t[e.ID]=e}function XUe(t,e,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var h=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ds(t);break;case"String":n.t="s",n.r=KH(ra(t)),n.v=t.indexOf("<")>-1?ra(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(ms(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ra(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Une[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=KH(e||t));break}if(zUe(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=ra(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=ov(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=ov("RC:RC",a):n.ArrayRange&&(n.F=ov(n.ArrayRange,a),c.push([na(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(g){!A.patternType&&g.patternType&&(A.patternType=g.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function YUe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function T5(t,e){var r=e||{};u1();var n=Hy(q6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ua(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=ps(r);return o.type="string",Bv.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(we){a.indexOf("<"+we)>=0&&(s=!0)}),s)return D7e(n,r);jb={"General Number":"General","General Date":hn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":hn[15],"Short Date":hn[14],"Long Time":hn[19],"Medium Time":hn[18],"Short Time":hn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:hn[2],Standard:hn[4],Percent:hn[10],Scientific:hn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},h="",m={},p={},g=Pd('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",S=0,E=[],F={},P={},k=0,D=[],Z=[],fe={},me=[],pe,ye=!1,ae=[],je=[],Be={},O=0,G=0,z={Sheets:[],WBProps:{date1904:!1}},L={};S2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Y="";l=S2.exec(n);)switch(l[3]=(Y=l[3]).toLowerCase()){case"data":if(Y=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?XUe(n.slice(x,l.index),_,g,c[c.length-1][0]=="comment"?fe:m,{c:y,r:b},j,me[y],p,ae,r):(_="",g=Pd(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Z.length>0&&(m.c=Z),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(A[b]||(A[b]=[]),A[b][y]=m):A[Hs(y)+Ei(b)]=m),m.HRef&&(m.l={Target:ra(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(O=y+(parseInt(m.MergeAcross,10)|0),G=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:O,r:G}})),!r.sheetStubs)m.MergeAcross?y=O+1:++y;else if(m.MergeAcross||m.MergeDown){for(var J=y;J<=O;++J)for(var R=b;R<=G;++R)(J>y||R>b)&&(r.dense?(A[R]||(A[R]=[]),A[R][J]={t:"z"}):A[Hs(J)+Ei(R)]={t:"z"});y=O+1}else++y;else m=GUe(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,Z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=Pd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=Pd(l[0]),p.Index&&(b=+p.Index-1),Be={},(p.AutoFitHeight=="0"||p.Height)&&(Be.hpx=parseInt(p.Height,10),Be.hpt=T2(Be.hpx),je[b]=Be),p.Hidden=="1"&&(Be.hidden=!0,je[b]=Be));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(h),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(A["!ref"]=En(w),r.sheetRows&&r.sheetRows<=w.e.r&&(A["!fullref"]=A["!ref"],w.e.r=r.sheetRows-1,A["!ref"]=En(w))),E.length&&(A["!merges"]=E),me.length>0&&(A["!cols"]=me),je.length>0&&(A["!rows"]=je),d[h]=A}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=Pd(l[0]),h=ra(u.Name),A=r.dense?[]:{},E=[],ae=[],je=[],L={name:h,Hidden:0},z.Sheets.push(L);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),me=[],ye=!1}break;case"style":l[1]==="/"?WUe(j,I,r):I=Pd(l[0]);break;case"numberformat":I.nf=ra(Pd(l[0]).Format||"General"),jb[I.nf]&&(I.nf=jb[I.nf]);for(var H=0;H!=392&&hn[H]!=I.nf;++H);if(H==392){for(H=57;H!=392;++H)if(hn[H]==null){$h(I.nf,H);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(pe=Pd(l[0]),pe.Hidden&&(pe.hidden=!0,delete pe.Hidden),pe.Width&&(pe.wpx=parseInt(pe.Width,10)),!ye&&pe.wpx>10){ye=!0,Tl=yae;for(var ne=0;ne<me.length;++ne)me[ne]&&um(me[ne])}ye&&um(pe),me[pe.Index-1||me.length]=pe;for(var ge=0;ge<+pe.Span;++ge)me[me.length]=ps(pe);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var U=mn(l[0]),Ue={Name:U.Name,Ref:ov(U.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Ue.Sheet=z.Sheets.length-1),z.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Pd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?bFe(F,Y,n.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));YUe(fe),Z.push(fe)}else c.push([l[3],!1]),u=Pd(l[0]),fe={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=Pd(l[0]);A["!autofilter"]={ref:ov(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return F$(n,r);var te=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:te=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:te=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:te=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:te=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(k,l.index)){case"SheetHidden":L.Hidden=1;break;case"SheetVeryHidden":L.Hidden=2;break}else k=l.index+l[0].length;break;case"header":A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+mn(l[0]).Margin)||(A["!margins"].header=+mn(l[0]).Margin);break;case"footer":A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+mn(l[0]).Margin)||(A["!margins"].footer=+mn(l[0]).Margin);break;case"pagemargins":var Ee=mn(l[0]);A["!margins"]||Pp(A["!margins"]={},"xlml"),isNaN(+Ee.Top)||(A["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(A["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(A["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(A["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:te=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:te=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:te=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:te=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:te=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:te=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:te=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:te=!1}break;case"smarttags":break;default:te=!1;break}if(te||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?qUe(P,Y,D,n.slice(k,l.index)):(D=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ce={};return!r.bookSheets&&!r.bookProps&&(ce.Sheets=d),ce.SheetNames=f,ce.Workbook=z,ce.SSF=ps(hn),ce.Props=F,ce.Custprops=P,ce}function Jk(t,e){switch(gR(e=e||{}),e.type||"base64"){case"base64":return T5(pu(t),e);case"binary":case"buffer":case"file":return T5(t,e);case"array":return T5(wm(t),e)}}function JUe(t,e){var r=[];return t.Props&&r.push(wFe(t.Props,e)),t.Custprops&&r.push(NFe(t.Props,t.Custprops)),r.join("")}function ZUe(){return""}function e7e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Sr("NumberFormat",null,{"ss:Format":ka(hn[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Sr("Style",s.join(""),o))}),Sr("Styles",r.join(""))}function qae(t){return Sr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+dR(t.Ref,{r:0,c:0})})}function t7e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(qae(a)))}return Sr("Names",r.join(""))}function r7e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(qae(l)))}return s.join("")}function n7e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Sr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Sr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Sr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Sr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(sl("ProtectContents","True")),t["!protect"].objects&&a.push(sl("ProtectObjects","True")),t["!protect"].scenarios&&a.push(sl("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(sl("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(sl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Sr("WorksheetOptions",a.join(""),{xmlns:tu.x})}function a7e(t){return t.map(function(e){var r=_ke(e.t||""),n=Sr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Sr("Comment",n,{"ss:Author":e.a})}).join("")}function s7e(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ka(dR(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=$s(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ka(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ka(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(t.v);break;case"b":f="Boolean",A=t.v?"1":"0";break;case"e":f="Error",A=yA[t.v];break;case"d":f="DateTime",A=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||hn[14]);break;case"s":f="String",A=Cke(t.v||"");break}var h=Cm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=t.v!=null?A:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=a7e(t.c)),Sr("Cell",p,l)}function i7e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Tv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function o7e(t,e,r,n){if(!t["!ref"])return"";var a=na(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){um(g);var y=!!g.width,b=s4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=P2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(Sr("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[i7e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var h={r:u,c:f},m=An(h),p=c?(t[u]||[])[f]:t[m];d.push(s7e(p,m,t,e,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function l7e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?r7e(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?o7e(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(n7e(s,e,t,r)),n.join("")}function c7e(t,e){e||(e={}),t.SSF||(t.SSF=ps(hn)),t.SSF&&(u1(),Jj(t.SSF),e.revssf=e4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Cm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(JUe(t,e)),r.push(ZUe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Sr("Worksheet",l7e(n,e,t),{"ss:Name":ka(t.SheetNames[n])}));return r[2]=e7e(t,e),r[3]=t7e(t),Ii+Sr("Workbook",r.join(""),{xmlns:tu.ss,"xmlns:o":tu.o,"xmlns:x":tu.x,"xmlns:ss":tu.ss,"xmlns:dt":tu.dt,"xmlns:html":tu.html})}function u7e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=tFe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=rFe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var d7e=[60,1084,2066,2165,2175];function f7e(t,e,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=kh(r,r.l),u=Zk[c],d=0;u!=null&&d7e.indexOf(c)>-1;)s=kh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=Zk[c=kh(r,r.l)];var f=Po(o);nl(f,0);var A=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(A),A+=o[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function vf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=hn[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||yA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=C2(t.v):t.w=Jp(t.v):t.w=ud(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&c1(hn[n]||String(n))){var a=hp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function JC(t,e,r){return{v:t,ixfe:e,t:r}}function h7e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",h,m,p,g,x={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(be){return be<8?Sp[be]:be<64&&I[be-8]||Sp[be]},F=function(be,ue,Le){var ke=ue.XF.data;if(!(!ke||!ke.patternType||!Le||!Le.cellStyles)){ue.s={},ue.s.patternType=ke.patternType;var Ae;(Ae=j2(E(ke.icvFore)))&&(ue.s.fgColor={rgb:Ae}),(Ae=j2(E(ke.icvBack)))&&(ue.s.bgColor={rgb:Ae})}},P=function(be,ue,Le){if(!(Be>1)&&!(Le.sheetRows&&be.r>=Le.sheetRows)){if(Le.cellStyles&&ue.XF&&ue.XF.data&&F(be,ue,Le),delete ue.ixfe,delete ue.XF,f=be,A=An(be),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),be.r<o.s.r&&(o.s.r=be.r),be.c<o.s.c&&(o.s.c=be.c),be.r+1>o.e.r&&(o.e.r=be.r+1),be.c+1>o.e.c&&(o.e.c=be.c+1),Le.cellFormula&&ue.f){for(var ke=0;ke<y.length;++ke)if(!(y[ke][0].s.c>be.c||y[ke][0].s.r>be.r)&&!(y[ke][0].e.c<be.c||y[ke][0].e.r<be.r)){ue.F=En(y[ke][0]),(y[ke][0].s.c!=be.c||y[ke][0].s.r!=be.r)&&delete ue.f,ue.f&&(ue.f=""+Pl(y[ke][1],o,be,ae,k));break}}Le.dense?(a[be.r]||(a[be.r]=[]),a[be.r][be.c]=ue):a[A]=ue}},k={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(k.password=e.password);var D,Z=[],fe=[],me=[],pe=[],ye=!1,ae=[];ae.SheetNames=k.snames,ae.sharedf=k.sharedf,ae.arrayf=k.arrayf,ae.names=[],ae.XTI=[];var je=0,Be=0,O=0,G=[],z=[],L;k.codepage=1200,Hd(1200);for(var Y=!1;t.l<t.length-1;){var J=t.l,R=t.read_shift(2);if(R===0&&je===10)break;var H=t.l===t.length?0:t.read_shift(2),ne=Zk[R];if(ne&&ne.f){if(e.bookSheets&&je===133&&R!==133)break;if(je=R,ne.r===2||ne.r==12){var ge=t.read_shift(2);if(H-=2,!k.enc&&ge!==R&&((ge&255)<<8|ge>>8)!==R)throw new Error("rt mismatch: "+ge+"!="+R);ne.r==12&&(t.l+=10,H-=10)}var U={};if(R===10?U=ne.f(t,H,k):U=f7e(R,ne,t,H,k),Be==0&&[9,521,1033,2057].indexOf(je)===-1)continue;switch(R){case 34:r.opts.Date1904=_.WBProps.date1904=U;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(t.l=0),k.enc=U,!e.password)throw new Error("File is password-protected");if(U.valid==null)throw new Error("Encryption scheme unsupported");if(!U.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=U;break;case 66:var Ue=Number(U);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}Hd(k.codepage=Ue),Y=!0;break;case 317:k.rrtabid=U;break;case 25:k.winlocked=U;break;case 439:r.opts.RefreshAll=U;break;case 12:r.opts.CalcCount=U;break;case 16:r.opts.CalcDelta=U;break;case 17:r.opts.CalcIter=U;break;case 13:r.opts.CalcMode=U;break;case 14:r.opts.CalcPrecision=U;break;case 95:r.opts.CalcSaveRecalc=U;break;case 15:k.CalcRefMode=U;break;case 2211:r.opts.FullCalc=U;break;case 129:U.fDialog&&(a["!type"]="dialog"),U.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),U.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(U);break;case 430:ae.push([U]),ae[ae.length-1].XTI=[];break;case 35:case 547:ae[ae.length-1].push(U);break;case 24:case 536:L={Name:U.Name,Ref:Pl(U.rgce,o,null,ae,k)},U.itab>0&&(L.Sheet=U.itab-1),ae.names.push(L),ae[0]||(ae[0]=[],ae[0].XTI=[]),ae[ae.length-1].push(U),U.Name=="_xlnm._FilterDatabase"&&U.itab>0&&U.rgce&&U.rgce[0]&&U.rgce[0][0]&&U.rgce[0][0][0]=="PtgArea3d"&&(z[U.itab-1]={ref:En(U.rgce[0][0][1][2])});break;case 22:k.ExternCount=U;break;case 23:ae.length==0&&(ae[0]=[],ae[0].XTI=[]),ae[ae.length-1].XTI=ae[ae.length-1].XTI.concat(U),ae.XTI=ae.XTI.concat(U);break;case 2196:if(k.biff<8)break;L!=null&&(L.Comment=U[1]);break;case 18:a["!protect"]=U;break;case 19:U!==0&&k.WTF&&console.error("Password verifier: "+U);break;case 133:s[U.pos]=U,k.snames.push(U.name);break;case 10:{if(--Be)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=En(o),e.sheetRows&&e.sheetRows<=o.e.r){var ie=o.e.r;o.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=En(o),o.e.r=ie}o.e.r++,o.e.c++}Z.length>0&&(a["!merges"]=Z),fe.length>0&&(a["!objects"]=fe),me.length>0&&(a["!cols"]=me),pe.length>0&&(a["!rows"]=pe),_.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[R]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[U.BIFFVer]||8),k.biffguess=U.BIFFVer==0,U.BIFFVer==0&&U.dt==4096&&(k.biff=5,Y=!0,Hd(k.codepage=28591)),k.biff==8&&U.BIFFVer==0&&U.dt==16&&(k.biff=2),Be++)break;if(a=e.dense?[]:{},k.biff<8&&!Y&&(Y=!0,Hd(k.codepage=e.codepage||1252)),k.biff<5||U.BIFFVer==0&&U.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var te={pos:t.l-H,name:u};s[te.pos]=te,k.snames.push(u)}else u=(s[J]||{name:""}).name;U.dt==32&&(a["!type"]="chart"),U.dt==64&&(a["!type"]="macro"),Z=[],fe=[],k.arrayf=y=[],me=[],pe=[],ye=!1,S={Hidden:(s[J]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[U.r]||[])[U.c]:a[An({c:U.c,r:U.r})])&&++U.c,b={ixfe:U.ixfe,XF:j[U.ixfe]||{},v:U.val,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 5:case 517:b={ixfe:U.ixfe,XF:j[U.ixfe],v:U.val,t:U.t},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 638:b={ixfe:U.ixfe,XF:j[U.ixfe],v:U.rknum,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 189:for(var Ee=U.c;Ee<=U.C;++Ee){var ce=U.rkrec[Ee-U.c][0];b={ixfe:ce,XF:j[ce],v:U.rkrec[Ee-U.c][1],t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:Ee,r:U.r},b,e)}break;case 6:case 518:case 1030:{if(U.val=="String"){l=U;break}if(b=JC(U.val,U.cell.ixfe,U.tt),b.XF=j[b.ixfe],e.cellFormula){var we=U.formula;if(we&&we[0]&&we[0][0]&&we[0][0][0]=="PtgExp"){var Re=we[0][0][1][0],We=we[0][0][1][1],pt=An({r:Re,c:We});x[pt]?b.f=""+Pl(U.formula,o,U.cell,ae,k):b.F=((e.dense?(a[Re]||[])[We]:a[pt])||{}).F}else b.f=""+Pl(U.formula,o,U.cell,ae,k)}O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P(U.cell,b,e),l=U}break;case 7:case 519:if(l)l.val=U,b=JC(U,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+Pl(l.formula,o,l.cell,ae,k)),O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(U);var _t=An(U[0].s);if(h=e.dense?(a[U[0].s.r]||[])[U[0].s.c]:a[_t],e.cellFormula&&h){if(!l||!_t||!h)break;h.f=""+Pl(U[1],o,U[0],ae,k),h.F=En(U[0])}}break;case 1212:{if(!e.cellFormula)break;if(A){if(!l)break;x[An(l.cell)]=U[0],h=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[An(l.cell)],(h||{}).f=""+Pl(U[0],o,f,ae,k)}}break;case 253:b=JC(c[U.isst].t,U.ixfe,"s"),c[U.isst].h&&(b.h=c[U.isst].h),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:U.ixfe,XF:j[U.ixfe],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e));break;case 190:if(e.sheetStubs)for(var He=U.c;He<=U.C;++He){var gt=U.ixfe[He-U.c];b={ixfe:gt,XF:j[gt],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:He,r:U.r},b,e)}break;case 214:case 516:case 4:b=JC(U.val,U.ixfe,"s"),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),vf(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 0:case 512:Be===1&&(o=U);break;case 252:c=U;break;case 1054:if(k.biff==4){G[O++]=U[1];for(var ut=0;ut<O+163&&hn[ut]!=U[1];++ut);ut>=163&&$h(U[1],O+163)}else $h(U[1],U[0]);break;case 30:{G[O++]=U;for(var vt=0;vt<O+163&&hn[vt]!=U;++vt);vt>=163&&$h(U,O+163)}break;case 229:Z=Z.concat(U);break;case 93:fe[U.cmo[0]]=k.lastobj=U;break;case 438:k.lastobj.TxO=U;break;case 127:k.lastobj.ImData=U;break;case 440:for(g=U[0].s.r;g<=U[0].e.r;++g)for(p=U[0].s.c;p<=U[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[An({c:p,r:g})],h&&(h.l=U[1]);break;case 2048:for(g=U[0].s.r;g<=U[0].e.r;++g)for(p=U[0].s.c;p<=U[0].e.c;++p)h=e.dense?(a[g]||[])[p]:a[An({c:p,r:g})],h&&h.l&&(h.l.Tooltip=U[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;h=e.dense?(a[U[0].r]||[])[U[0].c]:a[An(U[0])];var Pe=fe[U[2]];h||(e.dense?(a[U[0].r]||(a[U[0].r]=[]),h=a[U[0].r][U[0].c]={t:"z"}):h=a[An(U[0])]={t:"z"},o.e.r=Math.max(o.e.r,U[0].r),o.s.r=Math.min(o.s.r,U[0].r),o.e.c=Math.max(o.e.c,U[0].c),o.s.c=Math.min(o.s.c,U[0].c)),h.c||(h.c=[]),m={a:U[1],t:Pe.TxO.t},h.c.push(m)}break;case 2173:eRe(j[U.ixfe],U.ext);break;case 125:{if(!k.cellStyles)break;for(;U.e>=U.s;)me[U.e--]={width:U.w/256,level:U.level||0,hidden:!!(U.flags&1)},ye||(ye=!0,lR(U.w/256)),um(me[U.e+1])}break;case 520:{var ct={};U.level!=null&&(pe[U.r]=ct,ct.level=U.level),U.hidden&&(pe[U.r]=ct,ct.hidden=!0),U.hpt&&(pe[U.r]=ct,ct.hpt=U.hpt,ct.hpx=Tv(U.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Pp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[R]]=U;break;case 161:a["!margins"]||Pp(a["!margins"]={}),a["!margins"].header=U.header,a["!margins"].footer=U.footer;break;case 574:U.RTL&&(_.Views[0].RTL=!0);break;case 146:I=U;break;case 2198:D=U;break;case 140:w=U;break;case 442:u?S.CodeName=U||S.name:_.WBProps.CodeName=U||"ThisWorkbook";break}}else ne||console.error("Missing Info for XLS Record 0x"+R.toString(16)),t.l+=H}return r.SheetNames=ci(s).sort(function(lt,be){return Number(lt)-Number(be)}).map(function(lt){return s[lt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(lt,be){r.Sheets[r.SheetNames[be]]["!autofilter"]=lt}),r.Strings=c,r.SSF=ps(hn),k.enc&&(r.Encryption=k.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ae.names.length>0&&(_.Names=ae.names),r.Workbook=_,r}var Pb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function A7e(t,e,r){var n=sn.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=u$(n,Kk,Pb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var o=sn.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=u$(o,qk,Pb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Kne(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function m7e(t,e){var r=[],n=[],a=[],s=0,o,l=UH(Kk,"n"),c=UH(qk,"n");if(t.Props)for(o=ci(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=ci(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)Zne.indexOf(a[s][0])>-1||Gne.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&sn.utils.cfb_add(e,"/SummaryInformation",d$(n,Pb.SI,c,qk)),(r.length||u.length)&&sn.utils.cfb_add(e,"/DocumentSummaryInformation",d$(r,Pb.DSI,l,Kk,u.length?u:null,Pb.UDI))}function zae(t,e){e||(e={}),gR(e),M6(),e.codepage&&R6(e.codepage);var r,n;if(t.FullPaths){if(sn.find(t,"/encryption"))throw new Error("File is password-protected");r=sn.find(t,"!CompObj"),n=sn.find(t,"/Workbook")||sn.find(t,"/Book")}else{switch(e.type){case"base64":t=nu(pu(t));break;case"binary":t=nu(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}nl(t,0),n={content:t}}var a,s;if(r&&u7e(r),e.bookProps&&!e.bookSheets)a={};else{var o=Fn?"buffer":"array";if(n&&n.content)a=h7e(n.content,e);else if((s=sn.find(t,"PerfectOffice_MAIN"))&&s.content)a=jp.to_workbook(s.content,(e.type=o,e));else if((s=sn.find(t,"NativeContent_MAIN"))&&s.content)a=jp.to_workbook(s.content,(e.type=o,e));else throw(s=sn.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&sn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=IRe(t))}var l={};return t.FullPaths&&A7e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function p7e(t,e){var r=e||{},n=sn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return sn.utils.cfb_add(n,a,Wae(t,r)),r.biff==8&&(t.Props||t.Custprops)&&m7e(t,n),r.biff==8&&t.vbaraw&&jRe(n,sn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var k2={0:{f:UMe},1:{f:zMe},2:{f:hLe},3:{f:rLe},4:{f:JMe},5:{f:uLe},6:{f:xLe},7:{f:iLe},8:{f:_Le},9:{f:CLe},10:{f:wLe},11:{f:NLe},12:{f:XMe},13:{f:mLe},14:{f:aLe},15:{f:eLe},16:{f:Uae},17:{f:yLe},18:{f:lLe},19:{f:J6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:yUe},40:{},42:{},43:{f:x6e},44:{f:p6e},45:{f:b6e},46:{f:N6e},47:{f:w6e},48:{},49:{f:Hke},50:{},51:{f:nRe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:uae},62:{f:gLe},63:{f:fRe},64:{f:QLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ml,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:RLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:KMe},148:{f:HMe,p:16},151:{f:BLe},152:{},153:{f:gUe},154:{},155:{},156:{f:mUe},157:{},158:{},159:{T:1,f:kDe},160:{T:-1},161:{T:1,f:Sg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ELe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:tRe},336:{T:-1},337:{f:iRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Gk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:TLe},427:{f:kLe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:OLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:GMe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:jLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Gk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:NRe},633:{T:1},634:{T:-1},635:{T:1,f:bRe},636:{T:-1},637:{f:qke},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:aUe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:VLe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Zk={6:{f:P5},10:{f:t0},12:{f:Ti},13:{f:Ti},14:{f:pi},15:{f:pi},16:{f:kl},17:{f:pi},18:{f:pi},19:{f:Ti},20:{f:g$},21:{f:g$},23:{f:cae},24:{f:v$},25:{f:pi},26:{},27:{},28:{f:VOe},29:{},34:{f:pi},35:{f:x$},38:{f:kl},39:{f:kl},40:{f:kl},41:{f:kl},42:{f:pi},43:{f:pi},47:{f:e6e},49:{f:mOe},51:{f:Ti},60:{},61:{f:uOe},64:{f:pi},65:{f:AOe},66:{f:Ti},77:{},80:{},81:{},82:{},85:{f:Ti},89:{},90:{},91:{},92:{f:ZFe},93:{f:GOe},94:{},95:{f:pi},96:{},97:{},99:{f:pi},125:{f:uae},128:{f:POe},129:{f:tOe},130:{f:Ti},131:{f:pi},132:{f:pi},133:{f:rOe},134:{},140:{f:ZOe},141:{f:Ti},144:{},146:{f:rDe},151:{},152:{},153:{},154:{},155:{},156:{f:Ti},157:{},158:{},160:{f:cDe},161:{f:sDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:EOe},190:{f:SOe},193:{f:t0},197:{},198:{},199:{},200:{},201:{},202:{f:pi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ti},220:{},221:{f:pi},222:{},224:{f:jOe},225:{f:JFe},226:{f:t0},227:{},229:{f:HOe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:aOe},253:{f:gOe},255:{f:iOe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:eae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:pi},353:{f:t0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:OOe},431:{f:pi},432:{},433:{},434:{},437:{},438:{f:zOe},439:{f:pi},440:{f:WOe},441:{},442:{f:kw},443:{},444:{f:Ti},445:{},446:{},448:{f:t0},449:{f:cOe,r:2},450:{f:t0},512:{f:A$},513:{f:lDe},515:{f:kOe},516:{f:vOe},517:{f:p$},519:{f:uDe},520:{f:oOe},523:{},545:{f:y$},549:{f:h$},566:{},574:{f:fOe},638:{f:_Oe},659:{},1048:{},1054:{f:bOe},1084:{},1212:{f:LOe},2048:{f:YOe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:WC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:t0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:nDe,r:12},2173:{f:Z6e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:pi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:MOe,r:12},2197:{},2198:{f:q6e,r:12},2199:{},2200:{},2201:{},2202:{f:UOe,r:12},2203:{f:t0},2204:{},2205:{},2206:{},2207:{},2211:{f:lOe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ti},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:iDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:tDe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:A$},1:{},2:{f:mDe},3:{f:hDe},4:{f:fDe},5:{f:p$},7:{f:gDe},8:{},9:{f:WC},11:{},22:{f:Ti},30:{f:NOe},31:{},32:{},33:{f:y$},36:{},37:{f:h$},50:{f:xDe},62:{},52:{},67:{},68:{f:Ti},69:{},86:{},126:{},127:{f:dDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:vDe},223:{},234:{},354:{},421:{},518:{f:P5},521:{f:WC},536:{f:v$},547:{f:x$},561:{},579:{},1030:{f:P5},1033:{f:WC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ir(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&W6(r)&&t.push(r)}}function g7e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Ir(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Rw(t,e,r){return t||(t=Zt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function x7e(t,e,r,n){var a=Zt(9);return Rw(a,t,e),tae(r,n||"b",a),a}function v7e(t,e,r){var n=Zt(8+2*r.length);return Rw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function y7e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?co(ms(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Ir(t,2,pDe(r,n,a)):Ir(t,3,ADe(r,n,a));return;case"b":case"e":Ir(t,5,x7e(r,n,e.v,e.t));return;case"s":case"str":Ir(t,4,v7e(r,n,(e.v||"").slice(0,255)));return}Ir(t,1,Rw(null,r,n))}function b7e(t,e,r,n){var a=Array.isArray(e),s=na(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=En(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Ei(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Hs(d)),o=c[d]+l;var f=a?(e[u]||[])[d]:e[o];f&&y7e(t,f,u,d)}}}function w7e(t,e){for(var r=e||{},n=Tc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ir(n,r.biff==4?1033:r.biff==3?521:9,sR(t,16,r)),b7e(n,t.Sheets[t.SheetNames[a]],a,r),Ir(n,10),n.end()}function N7e(t,e,r){Ir(t,49,pOe({sz:12,name:"Arial"},r))}function C7e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Ir(t,1054,wOe(a,e[a],r))})}function _7e(t,e){var r=Zt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ir(t,2151,r),r=Zt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),iae(na(e["!ref"]||"A1"),r),r.write_shift(4,4),Ir(t,2152,r)}function E7e(t,e){for(var r=0;r<16;++r)Ir(t,224,m$({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ir(t,224,m$(n,0,e))})}function S7e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ir(t,440,XOe(n)),n[1].Tooltip&&Ir(t,2048,JOe(n))}delete e["!links"]}function I7e(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Ir(t,125,aDe(s4(a,n),a))})}}function j7e(t,e,r,n,a){var s=16+Cm(a.cellXfs,e,a);if(e.v==null&&!e.bf){Ir(t,513,rg(r,n,s));return}if(e.bf)Ir(t,6,tMe(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?co(ms(e.v)):e.v;Ir(t,515,FOe(r,n,o,s));break;case"b":case"e":Ir(t,517,TOe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=hR(a.Strings,e.v,a.revStrings);Ir(t,253,xOe(r,n,l,s))}else Ir(t,516,yOe(r,n,(e.v||"").slice(0,255),s,a));break;default:Ir(t,513,rg(r,n,s))}}function P7e(t,e,r){var n=Tc(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",A=[],h=na(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}Ir(n,2057,sR(r,16,e)),Ir(n,13,Ku(1)),Ir(n,12,Ku(100)),Ir(n,15,ec(!0)),Ir(n,17,ec(!1)),Ir(n,16,eg(.001)),Ir(n,95,ec(!0)),Ir(n,42,ec(!1)),Ir(n,43,ec(!1)),Ir(n,130,Ku(1)),Ir(n,128,BOe()),Ir(n,131,ec(!1)),Ir(n,132,ec(!1)),u&&I7e(n,s["!cols"]),Ir(n,512,COe(h,e)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){f=Ei(p);for(var g=h.s.c;g<=h.e.c;++g){p===h.s.r&&(A[g]=Hs(g)),d=A[g]+f;var x=c?(s[p]||[])[g]:s[d];x&&(j7e(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&Ir(n,574,hOe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ir(n,229,$Oe(s["!merges"])),u&&S7e(n,s),Ir(n,442,rae(y)),u&&_7e(n,s),Ir(n,10),n.end()}function B7e(t,e,r){var n=Tc(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Ir(n,2057,sR(t,5,r)),r.bookType=="xla"&&Ir(n,135),Ir(n,225,l?Ku(1200):null),Ir(n,193,TFe(2)),c&&Ir(n,191),c&&Ir(n,192),Ir(n,226),Ir(n,92,eOe("SheetJS",r)),Ir(n,66,Ku(l?1200:1252)),l&&Ir(n,353,Ku(0)),l&&Ir(n,448),Ir(n,317,oDe(t.SheetNames.length)),l&&t.vbaraw&&Ir(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";Ir(n,442,rae(u))}Ir(n,156,Ku(17)),Ir(n,25,ec(!1)),Ir(n,18,ec(!1)),Ir(n,19,Ku(0)),l&&Ir(n,431,ec(!1)),l&&Ir(n,444,Ku(0)),Ir(n,61,dOe()),Ir(n,64,ec(!1)),Ir(n,141,Ku(0)),Ir(n,34,ec(cUe(t)=="true")),Ir(n,14,ec(!0)),l&&Ir(n,439,ec(!1)),Ir(n,218,Ku(0)),N7e(n,t,r),C7e(n,t.SSF,r),E7e(n,r),l&&Ir(n,352,ec(!1));var d=n.end(),f=Tc();l&&Ir(f,140,eDe()),l&&r.Strings&&g7e(f,252,sOe(r.Strings)),Ir(f,10);var A=f.end(),h=Tc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+A.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};Ir(h,133,nOe({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),A.length&&b.push(A),Po(b)}function T7e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ps(hn)),t&&t.SSF&&(u1(),Jj(t.SSF),r.revssf=e4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,xR(r),r.cellXfs=[],Cm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=P7e(a,r,t);return n.unshift(B7e(t,n,r)),Po(n)}function Wae(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=kc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return T7e(t,e);case 4:case 3:case 2:return w7e(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function P$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=a.index,l=s&&s.index||t.length,c=pke(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=mn(y.slice(0,y.indexOf(">")));A=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||A>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var S=_.t||_["data-t"]||"";if(!b.length){d+=A;continue}if(b=vne(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=A;continue}var E={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(Xd(b))?isNaN(Pv(b).getDate())||(E={t:"d",v:ms(b)},r.cellDates||(E={t:"n",v:co(E.v)}),E.z=r.dateNF||hn[14]):E={t:"n",v:Xd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[An({r:u,c:d})]=E,d+=A}}}}return n["!ref"]=En(h),m.length&&(n["!merges"]=m),n}function k7e(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=An({r,c:o}),f=n.dense?(t[r]||[])[o]:t[d],A=f&&f.v!=null&&(f.h||K6(f.w||(nA(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(Sr("td",A,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var F7e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',O7e="</body></html>";function D7e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Nm(P$(r[0],e),e);var n=bR();return r.forEach(function(a,s){wR(n,P$(a,e),"Sheet"+(s+1))}),n}function R7e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Xae(t,e){var r=e||{},n=r.header!=null?r.header:F7e,a=r.footer!=null?r.footer:O7e,s=[n],o=kc(t["!ref"]);r.dense=Array.isArray(t),s.push(R7e(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(k7e(t,o,l,r));return s.push("</table>"+a),s.join("")}function Yae(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?$s(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=kc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,h=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(B$(w)){if(n.display)continue;h[p]={hidden:!0}}var j=w.children;for(g=x=0;g<j.length;++g){var I=j[g];if(!(n.display&&B$(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):vne(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var E=f[A];E.s.c==x+s&&E.s.r<p+a&&p+a<=E.e.r&&(x=E.e.c+1-s,A=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var F={t:"s",v:_},P=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?F.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?F={t:"b",v:!0}:_==="FALSE"?F={t:"b",v:!1}:isNaN(Xd(_))?isNaN(Pv(_).getDate())||(F={t:"d",v:ms(_)},n.cellDates||(F={t:"n",v:co(F.v)}),F.z=n.dateNF||hn[14]):F={t:"n",v:Xd(_)})),F.z===void 0&&S!=null&&(F.z=S);var k="",D=I.getElementsByTagName("A");if(D&&D.length)for(var Z=0;Z<D.length&&!(D[Z].hasAttribute("href")&&(k=D[Z].getAttribute("href"),k.charAt(0)!="#"));++Z);k&&k.charAt(0)!="#"&&(F.l={Target:k}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=F):t[An({c:x+s,r:p+a})]=F,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=En(u),p>=c&&(t["!fullref"]=En((u.e.r=l.length-m+p-1+a,u))),t}function Jae(t,e){var r=e||{},n=r.dense?[]:{};return Yae(n,t,e)}function M7e(t,e){return Nm(Jae(t,e),e)}function B$(t){var e="",r=L7e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function L7e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function U7e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ra(e.replace(/<[^>]*>/g,""));return[r]}var T$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Zae(t,e){var r=e||{},n=q6(t),a=[],s,o,l={name:""},c="",u=0,d,f,A={},h=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},F=[],P={},k=0,D=0,Z=[],fe=1,me=1,pe=[],ye={Names:[]},ae={},je=["",""],Be=[],O={},G="",z=0,L=!1,Y=!1,J=0;for(S2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=S2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=En(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=En(_)),F.length&&(m["!merges"]=F),Z.length&&(m["!rows"]=Z),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),A[d.name]=m,Y=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=mn(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},F=[],Z=[],Y=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){j+=fe,fe=1;break}if(f=mn(p[0],!1),f.?j=f.-1:j==-1&&(j=0),fe=+f["number-rows-repeated"]||1,fe<10)for(J=0;J<fe;++J)S>0&&(Z[j+J]={level:S});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[An({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,x=mn(p[0],!1),me=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=S$(ra(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=ra(x["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=g):m[An({r:j,c:I})]=g),I+=me-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],me=1;var R=fe?j+fe-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),R>_.e.r&&(_.e.r=R),x=mn(p[0],!1),Be=[],O={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=ra(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(k=parseInt(x["number-matrix-rows-spanned"],10)||0,D=parseInt(x["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},g.F=En(P),pe.push([P,g.F])),x.formula)g.f=S$(x.formula);else for(J=0;J<pe.length;++J)j>=pe[J][0].s.r&&j<=pe[J][0].e.r&&I>=pe[J][0].s.c&&I<=pe[J][0].e.c&&(g.F=pe[J][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(k=parseInt(x["number-rows-spanned"],10)||0,D=parseInt(x["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},F.push(P)),x["number-columns-repeated"]&&(me=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ds(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=ms(x["date-value"]),r.cellDates||(g.t="n",g.v=co(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=hke(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=t4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=ra(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(L=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),L=b==0),ae.Target&&(g.l=ae),Be.length>0&&(g.c=Be,Be=[]),y&&r.cellText!==!1&&(g.w=y),L&&(g.t="z",delete g.v),(!L||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var H=0;H<fe;++H){if(me=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[j+H]||(m[j+H]=[]),m[j+H][I]=H==0?g:ps(g);--me>0;)m[j+H][I+me]=ps(g);else for(m[An({r:j+H,c:I})]=g;--me>0;)m[An({r:j+H,c:I+me})]=ps(g);_.e.c<=I&&(_.e.c=I)}me=parseInt(x["number-columns-repeated"]||"1",10),I+=me-1,me=0,g={},y="",w=[]}ae={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;O.t=y,w.length&&(O.R=w),O.a=G,Be.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);G="",z=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?G=n.slice(z,p.index):z=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=mn(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=mn(p[0],!1),c+=T$[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=mn(p[0],!1),c+=T$[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=mn(p[0],!1),je=B5(o["cell-range-address"]);var ne={Name:o.name,Ref:je[0]+"!"+je[1]};Y&&(ne.Sheet=h.length),ye.Names.push(ne);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var ge=U7e(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ge[0]}else mn(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{je=B5(mn(p[0])["target-range-address"]),A[je[0]]["!autofilter"]={ref:je[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ae=mn(p[0],!1),!ae.href)break;ae.Target=ra(ae.href),delete ae.href,ae.Target.charAt(0)=="#"&&ae.Target.indexOf(".")>-1?(je=B5(ae.Target.slice(1)),ae.Target="#"+je[0]+"!"+je[1]):ae.Target.match(/^\.\.[\\\/]/)&&(ae.Target=ae.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var U={Sheets:A,SheetNames:h,Workbook:ye};return r.bookSheets&&delete U.Sheets,U}function k$(t,e){e=e||{},Gu(t,"META-INF/manifest.xml")&&hFe(Bi(t,"META-INF/manifest.xml"),e);var r=au(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Zae(Ua(r),e);return Gu(t,"meta.xml")&&(n.Props=Hne(Bi(t,"meta.xml"))),n}function F$(t,e){return Zae(t,e)}var Q7e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ii+e}}(),O$=function(){var t=function(s){return ka(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+ka(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=kc(s["!ref"]||"A1"),A=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var x=!1,y={},b="";for(h=0;h!=A.length;++h)if(!(A[h].s.c>d)&&!(A[h].s.r>u)&&!(A[h].e.c<d)&&!(A[h].e.r<u)){(A[h].s.c!=d||A[h].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=A[h].e.c-A[h].s.c+1,y["table:number-rows-spanned"]=A[h].e.r-A[h].s.r+1;break}if(x){c.push(r);continue}var w=An({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=ka(oMe(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=kc(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||ms(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=ms(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+lMe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),_=Sr("text:a",_,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Sr("table:table-cell",Sr("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;um(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Ii],u=E2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=E2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Vne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function ese(t,e){if(e.bookType=="fods")return O$(t,e);var r=H6(),n="",a=[],s=[];return n="mimetype",Pn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Pn(r,n,O$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Pn(r,n,Q7e(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Pn(r,n,Ii+Vne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Pn(r,n,pFe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Pn(r,n,AFe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ng(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function eF(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ua(wm(t))}function V7e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):nu(Ff(t))}function H7e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function fm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function D$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function $7e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function G7e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function F2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Sa(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function oi(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function sa(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=F2(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=F2(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Wo(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Sa(n*8+a.type)),a.type==2&&e.push(Sa(a.data.length)),e.push(a.data))})}),fm(e)}function pR(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Lu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=F2(t,n),s=sa(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:oi(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=sa(l.data),u=oi(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=oi(s[3][0].data)>>>0>0),r.push(o)}return r}function ox(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Sa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Sa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Sa(o.data.length)}],n[2].push({data:Wo(o.meta),type:2})});var s=Wo(n);e.push(Sa(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),fm(e)}function K7e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=F2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[fm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=fm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Uu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(K7e(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return fm(e)}function lx(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Sa(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return fm(e)}function q7e(t,e,r,n){var a=ng(t),s=a.getUint32(4,!0),o=(n>1?12:8)+D$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=D$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function z7e(t,e,r){var n=ng(t),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=$7e(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function k5(t,e){var r=new Uint8Array(32),n=ng(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,G7e(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function F5(t,e){var r=new Uint8Array(32),n=ng(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function W7e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return q7e(t,e,r,t[0]);case 5:return z7e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Il(t){var e=sa(t);return F2(e[1][0].data)}function R$(t,e){var r=sa(e.data),n=oi(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=sa(o.data),c=oi(l[1][0].data)>>>0;switch(n){case 1:s[c]=eF(l[3][0].data);break;case 8:{var u=t[Il(l[9][0].data)][0],d=sa(u.data),f=t[Il(d[1][0].data)][0],A=oi(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var h=sa(f.data);s[c]=h[3].map(function(m){return eF(m.data)}).join("")}break}}),s}function X7e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,g=sa(t),x=oi(g[1][0].data)>>>0,y=oi(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&oi(g[8][0].data)>0||!1,w,j;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(h=(A=g[4])==null?void 0:A[0])==null?void 0:h.data,j=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=ng(w),S=[],E=0;E<w.length/2;++E){var F=_.getUint16(E*2,!0);F<65535&&S.push([E,F])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var P=[];for(E=0;E<S.length-1;++E)P[S[E][0]]=j.subarray(S[E][1]*I,S[E+1][1]*I);return S.length>=1&&(P[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:x,cells:P}}function Y7e(t,e){var r,n=sa(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?oi(n[7][0].data)>>>0>0?1:0:-1,s=pR(n[5],function(o){return X7e(o,a)});return{nrows:oi(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function J7e(t,e,r){var n,a=sa(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(oi(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(oi(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=En(s);var o=sa(a[4][0].data),l=R$(t,t[Il(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?R$(t,t[Il(o[17][0].data)][0]):[],u=sa(o[3][0].data),d=0;u[1].forEach(function(f){var A=sa(f.data),h=t[Il(A[2][0].data)][0],m=oi(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=Y7e(t,h);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=An({r:d+x,c:b}),j=W7e(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function Z7e(t,e){var r=sa(e.data),n={"!ref":"A1"},a=t[Il(r[2][0].data)],s=oi(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return J7e(t,a[0],n),n}function e9e(t,e){var r,n=sa(e.data),a={name:(r=n[1])!=null&&r[0]?eF(n[1][0].data):"",sheets:[]},s=pR(n[2],Il);return s.forEach(function(o){t[o].forEach(function(l){var c=oi(l.meta[1][0].data);c==6e3&&a.sheets.push(Z7e(t,l))})}),a}function t9e(t,e){var r=bR(),n=sa(e.data),a=pR(n[1],Il);if(a.forEach(function(s){t[s].forEach(function(o){var l=oi(o.meta[1][0].data);if(l==2){var c=e9e(t,o);c.sheets.forEach(function(u,d){wR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function O5(t){var e,r,n,a,s={},o=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Uu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Lu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&oi(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=oi(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return t9e(s,l)}function r9e(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&oi(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=ng(t[7][0].data),d=0,f=[],A=ng(t[4][0].data),h=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),A.setUint16(p*2,h,!0);var g,x;switch(typeof e[p]){case"string":g=k5({t:"s",v:e[p]},r),x=F5({t:"s",v:e[p]},r);break;case"number":g=k5({t:"n",v:e[p]},r),x=F5({t:"n",v:e[p]},r);break;case"boolean":g=k5({t:"b",v:e[p]},r),x=F5({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(x),h+=x.length,++c}for(t[2][0].data=Sa(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535,!0);return t[6][0].data=fm(f),t[3][0].data=fm(m),c}function n9e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=kc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(En(n)));var s=KS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(G){return G.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],u=sn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(G,z){return[G,u.FullPaths[z]]}).forEach(function(G){var z=G[0],L=G[1];if(z.type==2&&z.name.match(/\.iwa/)){var Y=z.content,J=Uu(Y),R=Lu(J);R.forEach(function(H){c.push(H.id),l[H.id]={deps:[],location:L,type:oi(H.messages[0].meta[1][0].data)}})}}),c.sort(function(G,z){return G-z});var d=c.filter(function(G){return G>1}).map(function(G){return[G,Sa(G)]});u.FileIndex.map(function(G,z){return[G,u.FullPaths[z]]}).forEach(function(G){var z=G[0];if(G[1],!!z.name.match(/\.iwa/)){var L=Lu(Uu(z.content));L.forEach(function(Y){Y.messages.forEach(function(J){d.forEach(function(R){Y.messages.some(function(H){return oi(H.meta[1][0].data)!=11006&&H7e(H.data,R[1])})&&l[R[0]].deps.push(Y.id)})})})}});for(var f=sn.find(u,l[1].location),A=Lu(Uu(f.content)),h,m=0;m<A.length;++m){var p=A[m];p.id==1&&(h=p)}var g=Il(sa(h.messages[0].data)[1][0].data);for(f=sn.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=Il(sa(h.messages[0].data)[2][0].data),f=sn.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);for(g=Il(sa(h.messages[0].data)[2][0].data),f=sn.find(u,l[g].location),A=Lu(Uu(f.content)),m=0;m<A.length;++m)p=A[m],p.id==g&&(h=p);var x=sa(h.messages[0].data);{x[6][0].data=Sa(n.e.r+1),x[7][0].data=Sa(n.e.c+1);var y=Il(x[46][0].data),b=sn.find(u,l[y].location),w=Lu(Uu(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=sa(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var S=[];S[1]=S[2]=[{type:0,data:Sa(_+420690)}],I[1].push({type:2,data:Wo(S)}),I[2].push({type:0,data:Sa(_)}),I[3].push({type:0,data:Sa(_)})}I[4]=[],I[5]=[],I[6]=[];for(var E=0;E<=n.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:Sa(E+726270)}],I[4].push({type:2,data:Wo(S)}),I[5].push({type:0,data:Sa(E)}),I[6].push({type:0,data:Sa(E)});w[j].messages[0].data=Wo(I)}b.content=lx(ox(w)),b.size=b.content.length,delete x[46];var F=sa(x[4][0].data);{F[7][0].data=Sa(n.e.r+1);var P=sa(F[1][0].data),k=Il(P[2][0].data);b=sn.find(u,l[k].location),w=Lu(Uu(b.content));{if(w[0].id!=k)throw"Bad HeaderStorageBucket";var D=sa(w[0].messages[0].data);for(E=0;E<s.length;++E){var Z=sa(D[2][0].data);Z[1][0].data=Sa(E),Z[4][0].data=Sa(s[E].length),D[2][E]={type:D[2][0].type,data:Wo(Z)}}w[0].messages[0].data=Wo(D)}b.content=lx(ox(w)),b.size=b.content.length;var fe=Il(F[2][0].data);b=sn.find(u,l[fe].location),w=Lu(Uu(b.content));{if(w[0].id!=fe)throw"Bad HeaderStorageBucket";for(D=sa(w[0].messages[0].data),_=0;_<=n.e.c;++_)Z=sa(D[2][0].data),Z[1][0].data=Sa(_),Z[4][0].data=Sa(n.e.r+1),D[2][_]={type:D[2][0].type,data:Wo(Z)};w[0].messages[0].data=Wo(D)}b.content=lx(ox(w)),b.size=b.content.length;var me=Il(F[4][0].data);(function(){for(var G=sn.find(u,l[me].location),z=Lu(Uu(G.content)),L,Y=0;Y<z.length;++Y){var J=z[Y];J.id==me&&(L=J)}var R=sa(L.messages[0].data);{R[3]=[];var H=[];o.forEach(function(U,Ue){H[1]=[{type:0,data:Sa(Ue)}],H[2]=[{type:0,data:Sa(1)}],H[3]=[{type:2,data:V7e(U)}],R[3].push({type:2,data:Wo(H)})})}L.messages[0].data=Wo(R);var ne=ox(z),ge=lx(ne);G.content=ge,G.size=G.content.length})();var pe=sa(F[3][0].data);{var ye=pe[1][0];delete pe[2];var ae=sa(ye.data);{var je=Il(ae[2][0].data);(function(){for(var G=sn.find(u,l[je].location),z=Lu(Uu(G.content)),L,Y=0;Y<z.length;++Y){var J=z[Y];J.id==je&&(L=J)}var R=sa(L.messages[0].data);{delete R[6],delete pe[7];var H=new Uint8Array(R[5][0].data);R[5]=[];for(var ne=0,ge=0;ge<=n.e.r;++ge){var U=sa(H);ne+=r9e(U,s[ge],o),U[1][0].data=Sa(ge),R[5].push({data:Wo(U),type:2})}R[1]=[{type:0,data:Sa(n.e.c+1)}],R[2]=[{type:0,data:Sa(n.e.r+1)}],R[3]=[{type:0,data:Sa(ne)}],R[4]=[{type:0,data:Sa(n.e.r+1)}]}L.messages[0].data=Wo(R);var Ue=ox(z),ie=lx(Ue);G.content=ie,G.size=G.content.length})()}ye.data=Wo(ae)}F[3][0].data=Wo(pe)}x[4][0].data=Wo(F)}h.messages[0].data=Wo(x);var Be=ox(A),O=lx(Be);return f.content=O,f.size=f.content.length,u}function tse(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function gR(t){tse([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function xR(t){tse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function a9e(t){return Un.WS.indexOf(t)>-1?"sheet":t==Un.CS?"chart":t==Un.DS?"dialog":t==Un.MS?"macro":t&&t.length?t:"sheet"}function s9e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,a9e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function i9e(t,e,r,n,a,s,o,l,c,u,d,f){try{s[n]=Eb(au(t,r,!0),e);var A=Bi(t,e),h;switch(l){case"sheet":h=IUe(A,e,a,c,s[n],u,d,f);break;case"chart":if(h=jUe(A,e,a,c,s[n],u,d,f),!h||!h["!drawel"])break;var m=Gy(h["!drawel"].Target,e),p=I2(m),g=mRe(au(t,m,!0),Eb(au(t,p,!0),m)),x=Gy(g,m),y=I2(x);h=rUe(au(t,x,!0),x,c,Eb(au(t,y,!0),x),u,h);break;case"macro":h=PUe(A,e,a,c,s[n],u,d,f);break;case"dialog":h=BUe(A,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&ci(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Un.CMNT){j=Gy(s[n][w].Target,e);var I=OUe(Bi(t,j,!0),j,c);if(!I||!I.length)return;w$(h,I,!1)}s[n][w].Type==Un.TCMNT&&(j=Gy(s[n][w].Target,e),b=b.concat(gRe(Bi(t,j,!0),c)))}),b&&b.length&&w$(h,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function Fu(t){return t.charAt(0)=="/"?t.slice(1):t}function o9e(t,e){if(u1(),e=e||{},gR(e),Gu(t,"META-INF/manifest.xml")||Gu(t,"objectdata.xml"))return k$(t,e);if(Gu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof O5<"u"){if(t.FileIndex)return O5(t);var r=sn.utils.cfb_new();return HH(t).forEach(function(Z){Pn(r,Z,xke(t,Z))}),O5(r)}throw new Error("Unsupported NUMBERS file")}if(!Gu(t,"[Content_Types].xml"))throw Gu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=HH(t),a=dFe(au(t,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Bi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Bi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Sb=[],a.sst)try{Sb=FUe(Bi(t,Fu(a.sst)),a.sst,e)}catch(Z){if(e.WTF)throw Z}e.cellStyles&&a.themes.length&&(c=kUe(au(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=TUe(Bi(t,Fu(a.style)),a.style,c,e))}a.links.map(function(Z){try{var fe=Eb(au(t,I2(Fu(Z))),Z);return RUe(Bi(t,Fu(Z)),fe,Z,e)}catch{}});var d=SUe(Bi(t,Fu(a.workbooks[0])),a.workbooks[0],e),f={},A="";a.coreprops.length&&(A=Bi(t,Fu(a.coreprops[0]),!0),A&&(f=Hne(A)),a.extprops.length!==0&&(A=Bi(t,Fu(a.extprops[0]),!0),A&&xFe(A,f,e)));var h={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(A=au(t,Fu(a.custprops[0]),!0),A&&(h=yFe(A,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?o=d.Sheets.map(function(fe){return fe.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=h),e.bookSheets&&typeof o<"u"&&(m.SheetNames=o),e.bookSheets?m.SheetNames:e.bookProps))return m;o={};var p={};e.bookDeps&&a.calcchain&&(p=DUe(Bi(t,Fu(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Gu(t,S)||(S="xl/_rels/workbook."+I+".rels");var E=Eb(au(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=MUe(Bi(t,Fu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=vRe(Bi(t,Fu(a.people[0])),e)),E&&(E=s9e(E,d.Sheets));var F=Bi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(E&&E[g]?(y="xl/"+E[g][1].replace(/[\/]?xl\//,""),Gu(t,y)||(y=E[g][1]),Gu(t,y)||(y=S.replace(/_rels\/.*$/,"")+E[g][1]),P=E[g][2]):(y="xl/worksheets/sheet"+(g+1-F)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var k=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==g&&(k=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[g].toLowerCase()&&(k=1);if(!k)continue e}}i9e(t,y,b,f.SheetNames[g],g,x,o,P,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:h,Deps:p,Sheets:o,SheetNames:f.SheetNames,Strings:Sb,Styles:u,Themes:c,SSF:ps(hn)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(Z,fe){Z=Z.replace(/^Root Entry[\/]/,""),m.keys.push(Z),m.files[Z]=t.FileIndex[fe]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Bi(t,Fu(a.vba[0]),!0):a.defaults&&a.defaults.bin===SRe&&(m.vbaraw=Bi(t,"xl/vbaProject.bin",!0))),m}function l9e(t,e){var r=e||{},n="Workbook",a=sn.find(t,n);try{if(n="/!DataSpaces/Version",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(MDe(a.content),n="/!DataSpaces/DataSpaceMap",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=UDe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=QDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);HDe(a.content)}catch{}if(n="/EncryptionInfo",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=$De(a.content);if(n="/EncryptedPackage",a=sn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function c9e(t,e){return e.bookType=="ods"?ese(t,e):e.bookType=="numbers"?n9e(t,e):e.bookType=="xlsb"?u9e(t,e):d9e(t,e)}function u9e(t,e){Hx=1024,t&&!t.SSF&&(t.SSF=ps(hn)),t&&t.SSF&&(u1(),Jj(t.SSF),e.revssf=e4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ib?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Iae.indexOf(e.bookType)>-1,a=nR();xR(e=e||{});var s=H6(),o="",l=0;if(e.cellXfs=[],Cm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Pn(s,o,$ne(t.Props,e)),a.coreprops.push(o),ja(e.rels,2,o,Un.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Pn(s,o,qne(t.Props)),a.extprops.push(o),ja(e.rels,3,o,Un.EXT_PROPS),t.Custprops!==t.Props&&ci(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Pn(s,o,zne(t.Custprops)),a.custprops.push(o),ja(e.rels,4,o,Un.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Pn(s,o,UUe(l-1,o,e,t,d)),a.sheets.push(o),ja(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Un.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,Pn(s,p,HUe(h,p)),a.comments.push(p),ja(d,-1,"../comments"+l+"."+r,Un.CMNT),m=!0),f["!legacy"]&&m&&Pn(s,"xl/drawings/vmlDrawing"+l+".vml",Eae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Pn(s,I2(o),iv(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Pn(s,o,VUe(e.Strings,o,e)),a.strs.push(o),ja(e.wbrels,-1,"sharedStrings."+r,Un.SST)),o="xl/workbook."+r,Pn(s,o,LUe(t,o)),a.workbooks.push(o),ja(e.rels,1,o,Un.WB),o="xl/theme/theme1.xml",Pn(s,o,cR(t.Themes,e)),a.themes.push(o),ja(e.wbrels,-1,"theme/theme1.xml",Un.THEME),o="xl/styles."+r,Pn(s,o,QUe(t,o,e)),a.styles.push(o),ja(e.wbrels,-1,"styles."+r,Un.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Pn(s,o,t.vbaraw),a.vba.push(o),ja(e.wbrels,-1,"vbaProject.bin",Un.VBA)),o="xl/metadata."+r,Pn(s,o,$Ue(o)),a.metadata.push(o),ja(e.wbrels,-1,"metadata."+r,Un.XLMETA),Pn(s,"[Content_Types].xml",Qne(a,e)),Pn(s,"_rels/.rels",iv(e.rels)),Pn(s,"xl/_rels/workbook."+r+".rels",iv(e.wbrels)),delete e.revssf,delete e.ssf,s}function d9e(t,e){Hx=1024,t&&!t.SSF&&(t.SSF=ps(hn)),t&&t.SSF&&(u1(),Jj(t.SSF),e.revssf=e4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ib?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Iae.indexOf(e.bookType)>-1,a=nR();xR(e=e||{});var s=H6(),o="",l=0;if(e.cellXfs=[],Cm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Pn(s,o,$ne(t.Props,e)),a.coreprops.push(o),ja(e.rels,2,o,Un.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Pn(s,o,qne(t.Props)),a.extprops.push(o),ja(e.rels,3,o,Un.EXT_PROPS),t.Custprops!==t.Props&&ci(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Pn(s,o,zne(t.Custprops)),a.custprops.push(o),ja(e.rels,4,o,Un.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Pn(s,o,Lae(l-1,e,t,f)),a.sheets.push(o),ja(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Un.WS[0])}if(A){var m=A["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,Pn(s,g,xRe(m,d,e)),a.threadedcomments.push(g),ja(f,-1,"../threadedComments/threadedComment"+l+"."+r,Un.TCMNT)),g="xl/comments"+l+"."+r,Pn(s,g,Sae(m)),a.comments.push(g),ja(f,-1,"../comments"+l+"."+r,Un.CMNT),p=!0}A["!legacy"]&&p&&Pn(s,"xl/drawings/vmlDrawing"+l+".vml",Eae(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&Pn(s,I2(o),iv(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Pn(s,o,Aae(e.Strings,e)),a.strs.push(o),ja(e.wbrels,-1,"sharedStrings."+r,Un.SST)),o="xl/workbook."+r,Pn(s,o,$ae(t)),a.workbooks.push(o),ja(e.rels,1,o,Un.WB),o="xl/theme/theme1.xml",Pn(s,o,cR(t.Themes,e)),a.themes.push(o),ja(e.wbrels,-1,"theme/theme1.xml",Un.THEME),o="xl/styles."+r,Pn(s,o,wae(t,e)),a.styles.push(o),ja(e.wbrels,-1,"styles."+r,Un.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Pn(s,o,t.vbaraw),a.vba.push(o),ja(e.wbrels,-1,"vbaProject.bin",Un.VBA)),o="xl/metadata."+r,Pn(s,o,_ae()),a.metadata.push(o),ja(e.wbrels,-1,"metadata."+r,Un.XLMETA),d.length>1&&(o="xl/persons/person.xml",Pn(s,o,yRe(d)),a.people.push(o),ja(e.wbrels,-1,"persons/person.xml",Un.PEOPLE)),Pn(s,"[Content_Types].xml",Qne(a,e)),Pn(s,"_rels/.rels",iv(e.rels)),Pn(s,"xl/_rels/workbook."+r+".rels",iv(e.wbrels)),delete e.revssf,delete e.ssf,s}function vR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=pu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function f9e(t,e){return sn.find(t,"EncryptedPackage")?l9e(t,e):zae(t,e)}function h9e(t,e){var r,n=t,a=e||{};return a.type||(a.type=Fn&&Buffer.isBuffer(t)?"buffer":"base64"),r=pne(n,a),o9e(r,a)}function rse(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Jk(t.slice(r),e);default:break e}return Bv.to_workbook(t,e)}function A9e(t,e){var r="",n=vR(t,e);switch(e.type){case"base64":r=pu(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Zp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ua(r)),e.type="binary",rse(r,e)}function m9e(t,e){var r=t;return e.type=="base64"&&(r=pu(r)),r=w2.utils.decode(1200,r.slice(2),"str"),e.type="binary",rse(r,e)}function p9e(t){return t.match(/[^\x00-\x7F]/)?Ff(t):t}function D5(t,e,r,n){return n?(r.type="string",Bv.to_workbook(t,r)):Bv.to_workbook(e,r)}function O2(t,e){M6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return O2(new Uint8Array(t),(r=ps(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lv={},r.dateNF&&(lv.dateNF=r.dateNF),r.type||(r.type=Fn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Fn?"buffer":"binary",n=uke(t),typeof Uint8Array<"u"&&!Fn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=p9e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=ps(r),r.type="array",O2(L6(n),r)}switch((a=vR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return f9e(sn.read(n,r),r);break;case 9:if(a[1]<=8)return zae(n,r);break;case 60:return Jk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return bDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return fae.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?h9e(n,r):D5(t,n,r,s);case 239:return a[3]===60?Jk(n,r):D5(t,n,r,s);case 255:if(a[1]===254)return m9e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return jp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return jp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Yk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return vae.to_workbook(n,r);break;case 10:case 13:case 32:return A9e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return yDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Yk.to_workbook(n,r):D5(t,n,r,s)}function nse(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Pw(e.file,sn.write(t,{type:Fn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return sn.write(t,e)}function g9e(t,e){var r=ps(e||{}),n=c9e(t,r);return x9e(n,r)}function x9e(t,e){var r={},n=Fn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?sn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Yj(a))}return e.password&&typeof encrypt_agile<"u"?nse(encrypt_agile(a,e.password),e):e.type==="file"?Pw(e.file,a):e.type=="string"?Ua(a):a}function v9e(t,e){var r=e||{},n=p7e(t,r);return nse(n,r)}function Cf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return N2(Ff(n));case"binary":return Ff(n);case"string":return t;case"file":return Pw(e.file,n,"utf8");case"buffer":return Fn?xA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Cf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function y9e(t,e){switch(e.type){case"base64":return N2(t);case"binary":return t;case"string":return t;case"file":return Pw(e.file,t,"binary");case"buffer":return Fn?xA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ZC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?N2(r):e.type=="string"?Ua(r):r;case"file":return Pw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function i4(t,e){M6(),fUe(t);var r=ps(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=i4(t,r);return r.type="array",Yj(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Cf(c7e(t,r),r);case"slk":case"sylk":return Cf(dae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Cf(Xae(t.Sheets[t.SheetNames[a]],r),r);case"txt":return y9e(ase(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Cf(yR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Cf(fae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return ZC(Yk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Cf(Bv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Cf(vae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Cf(hae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Cf(ese(t,r),r);case"wk1":return ZC(jp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return ZC(jp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),ZC(Wae(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),v9e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return g9e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function b9e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function tF(t,e,r){var n={};return n.type="file",n.file=e,b9e(n),i4(t,n)}function w9e(t,e,r,n,a,s,o,l){var c=Ei(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||t[r])for(var h=e.s.c;h<=e.e.c;++h){var m=o?t[r][h]:t[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(A[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)A[s[h]]=null;else if(u!==void 0)A[s[h]]=u;else if(d&&p===null)A[s[h]]=null;else continue;else A[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:nA(m,p,l);p!=null&&(f=!1)}}return{row:A,isempty:f}}function KS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=na(d);break;case"number":c=na(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Ei(c.s.r),A=[],h=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(A[y]=Hs(y),r=g?t[x][y]:t[A[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=A[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=nA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(j[x]||{}).hidden){var I=w9e(t,c,x,A,n,s,g,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=I.row)}return h.length=m,h}var M$=/"/g;function N9e(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Ei(r),A=e.s.c;A<=e.e.c;++A)if(n[A]){var h=l.dense?(t[r]||[])[A]:t[n[A]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:nA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(M$,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(M$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function yR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=na(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var A=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(A[m]||{}).hidden||(f[m]=Hs(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(h[g]||{}).hidden||(d=N9e(t,a,g,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function ase(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=yR(t,e);return r}function C9e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=na(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=Hs(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ei(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function sse(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?$s(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var f=na(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var A=n.header||[],h=0;e.forEach(function(p,g){ci(p).forEach(function(x){(h=A.indexOf(x))==-1&&(A[h=A.length]=x);var y=p[x],b="z",w="",j=An({c:l+h,r:o+g+a});u=D2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=co(y)),w=n.dateNF||hn[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var m=Ei(o);if(a)for(h=0;h<A.length;++h)s[Hs(h+l)+m]={t:"s",v:A[h]};return s["!ref"]=En(d),s}function _9e(t,e){return sse(null,t,e)}function D2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=$s(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?D2(t,An(e)):D2(t,An({r:e,c:r||0}))}function E9e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function bR(){return{SheetNames:[],Sheets:{}}}function wR(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Hae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function S9e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=E9e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function I9e(t,e){return t.z=e,t}function ise(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function j9e(t,e,r){return ise(t,"#"+e,r)}function P9e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function B9e(t,e,r,n){for(var a=typeof e!="string"?e:na(e),s=typeof e=="string"?e:En(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=D2(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Us={encode_col:Hs,encode_row:Ei,encode_cell:An,encode_range:En,decode_col:Y6,decode_row:X6,split_cell:Vke,decode_cell:$s,decode_range:kc,format_cell:nA,sheet_add_aoa:Fne,sheet_add_json:sse,sheet_add_dom:Yae,aoa_to_sheet:d1,json_to_sheet:_9e,table_to_sheet:Jae,table_to_book:M7e,sheet_to_csv:yR,sheet_to_txt:ase,sheet_to_json:KS,sheet_to_html:Xae,sheet_to_formulae:C9e,sheet_to_row_object_array:KS,sheet_get_cell:D2,book_new:bR,book_append_sheet:wR,book_set_sheet_visibility:S9e,cell_set_number_format:I9e,cell_set_hyperlink:ise,cell_set_internal_link:j9e,cell_add_comment:P9e,sheet_set_array_formula:B9e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const R5=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ma(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function vh(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function r0(t,e=1){const r=Math.floor(vh(t,e));return r>0?r:e}function T9e(t){return Object.values(t||{}).every(r=>Ma(r)==="")}function Lm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ma(a),a));for(const a of e){const s=n.get(Ma(a));if(s!=null)return t[s]}}function k9e({open:t,code:e,onClose:r}){return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),i.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),i.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function F9e({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,o]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new b2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function O9e(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[A,h]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(null),[I,_]=v.useState(""),[S,E]=v.useState(""),[F,P]=v.useState(0),[k,D]=v.useState(1),[Z,fe]=v.useState(""),[me,pe]=v.useState(""),[ye,ae]=v.useState(""),[je,Be]=v.useState(""),[O,G]=v.useState(""),[z,L]=v.useState(!1),[Y,J]=v.useState(""),[R,H]=v.useState(!1),[ne,ge]=v.useState("create"),[U,Ue]=v.useState(!1),[ie,te]=v.useState(""),[Ee,ce]=v.useState([]),[we,Re]=v.useState([]),[We,pt]=v.useState(!1),[_t,He]=v.useState(!1);v.useEffect(()=>{var mt;const et=window.matchMedia("(max-width: 900px)"),Ne=()=>He(et.matches);return Ne(),(mt=et.addEventListener)==null||mt.call(et,"change",Ne),()=>{var W;return(W=et.removeEventListener)==null?void 0:W.call(et,"change",Ne)}},[]);const[gt,ut]=v.useState(!0),[vt,Pe]=v.useState(!0);v.useEffect(()=>{_t?(ut(!1),Pe(!1)):(ut(!0),Pe(!0))},[_t]);const[ct,lt]=v.useState(null),be=v.useRef(!1),ue=v.useRef(null);v.useEffect(()=>{n(!0),s("");const et=Ct(Te,"products_candies"),Ne=rr(et,gn("name","asc")),mt=ad(Ne,W=>{const Ie=[],Je={};W.forEach(T=>{const M=T.data(),V=String(M.barcode||"").trim()||void 0;V&&(Je[T.id]=V),Ie.push({id:T.id,name:M.name||"",category:M.category||"",providerPrice:Number(M.providerPrice||0),unitsPerPackage:Number(M.unitsPerPackage||1),barcode:V,packaging:String(M.packaging||M.empaque||"").trim()||void 0,createdAt:M.createdAt})});const tt=Le.current||{};let ft=!1;for(const T of Object.keys(Je))if((Je[T]||"")!==(tt[T]||"")){ft=!0;break}l(Ie),Le.current=Je,n(!1),!ke.current&&ft&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),ke.current=!1},W=>{console.error(W),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>mt()},[t]);const Le=v.useRef({}),ke=v.useRef(!0),Ae=v.useMemo(()=>{const et=Ma(ye),Ne=String(je||"").trim(),mt=String(O||"").trim().toLowerCase();return mt?o.filter(W=>String(W.packaging||"").trim().toLowerCase()===mt):!et&&!Ne?o:o.filter(W=>{const Ie=`${W.category} ${W.name}`.toLowerCase(),Je=et?Ie.includes(et):!0,tt=String(W.barcode||""),ft=Ne?tt.includes(Ne):!0;return Je&&ft})},[o,ye,je,O]),Ye=v.useMemo(()=>{const et=new Set;return o.forEach(Ne=>{const mt=String(Ne.category||"").trim();mt&&et.add(mt)}),Array.from(et).sort((Ne,mt)=>Ne.localeCompare(mt,"es"))},[o]),yt=()=>{u(""),f(""),h(0),p(1),x(""),b("")},At=async et=>{if(et.preventDefault(),be.current||r)return;s("");const Ne=String(c||"").trim(),mt=String(d||"").trim(),W=Math.max(0,vh(A,0)),Ie=r0(m,1),Je=String(g||"").trim();if(!Ne)return s(" La categora es requerida.");if(!mt)return s(" El nombre del producto es requerido.");if(W<=0)return s(" El precio proveedor debe ser > 0.");if(Ie<=0)return s(" Und x paquete debe ser > 0.");const tt=`${Ma(Ne)}::${Ma(mt)}`,ft=Date.now();if(ue.current&&ue.current.key===tt&&ft-ue.current.ts<4e3){s(" Ya se est creando este producto.");return}if(o.some(M=>Ma(M.category)===Ma(Ne)&&Ma(M.name)===Ma(mt)))return s(" Ya existe un producto con esa categora y nombre.");if(Je&&o.some(V=>String(V.barcode||"")===Je))return s(" Ya existe un producto con ese cdigo de barras.");be.current=!0,ue.current={key:tt,ts:ft};try{if(n(!0),!(await Lt(rr(Ct(Te,"products_candies"),or("category","==",Ne),or("name","==",mt),iS(1)))).empty){s(" Ya existe un producto con esa categora y nombre.");return}if(Je&&!(await Lt(rr(Ct(Te,"products_candies"),or("barcode","==",Je),iS(1)))).empty){s(" Ya existe un producto con ese cdigo de barras.");return}const V={category:Ne,name:mt,providerPrice:W,unitsPerPackage:Ie,createdAt:ur.now()};Je&&(V.barcode=Je);const q=String(y||"").trim();q&&(V.packaging=q),await Tn(Ct(Te,"products_candies"),V),s(" Producto creado."),yt()}catch(M){console.error(M),s(" Error creando producto.")}finally{n(!1),be.current=!1}},he=et=>{j(et.id),_(et.category),E(et.name),P(et.providerPrice),D(et.unitsPerPackage||1),fe(String(et.barcode||"")),pe(String(et.packaging||"")),s("")},re=()=>{j(null),_(""),E(""),P(0),D(1),fe(""),pe("")},oe=async()=>{if(!w)return;s("");const et=String(I||"").trim(),Ne=String(S||"").trim(),mt=Math.max(0,vh(F,0)),W=r0(k,1),Ie=String(Z||"").trim(),Je=String(me||"").trim();if(!et)return s(" La categora es requerida.");if(!Ne)return s(" El nombre del producto es requerido.");if(mt<=0)return s(" El precio proveedor debe ser > 0.");if(W<=0)return s(" Und x paquete debe ser > 0.");if(o.some(ft=>ft.id!==w&&Ma(ft.category)===Ma(et)&&Ma(ft.name)===Ma(Ne)))return s(" Ya existe otro producto con esa categora y nombre.");if(Ie&&o.some(T=>T.id!==w&&String(T.barcode||"")===Ie))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const ft={category:et,name:Ne,providerPrice:mt,unitsPerPackage:W,updatedAt:ur.now()};ft.barcode=Ie||"",ft.packaging=Je||"",await xn(Wt(Te,"products_candies",w),ft),l(T=>T.map(M=>M.id===w?{...M,category:et,name:Ne,providerPrice:mt,unitsPerPackage:W,barcode:Ie||void 0,packaging:Je||void 0}:M).sort((M,V)=>M.name.localeCompare(V.name,"es"))),_t&&s(" Producto guardado."),re()}catch(ft){console.error(ft),s(" Error actualizando producto.")}finally{n(!1)}},Ve=async et=>{if(confirm(`Eliminar "${et.name}" (${et.category}) del catlogo?`))try{n(!0),await Bn(Wt(Te,"products_candies",et.id)),l(mt=>mt.filter(W=>W.id!==et.id)),s(" Producto eliminado.")}catch(mt){console.error(mt),s(" Error eliminando producto.")}finally{n(!1)}},de=()=>{const et=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],Ne=Us.json_to_sheet(et),mt=Us.book_new();Us.book_append_sheet(mt,Ne,"Productos");const W=i4(mt,{type:"array",bookType:"xlsx"}),Ie=new Blob([W],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Je=URL.createObjectURL(Ie),tt=document.createElement("a");tt.href=Je,tt.download="template_productos_dulces.xlsx",document.body.appendChild(tt),tt.click(),tt.remove(),URL.revokeObjectURL(Je)},Se=et=>{const Ne=[],mt=[];et.forEach((Ie,Je)=>{if(!Ie||typeof Ie!="object"||T9e(Ie))return;const tt=String(Lm(Ie,["Id","ID","productId","docId"])??"").trim(),ft=String(Lm(Ie,["Categoria","Categora","Category","cat","category"])??"").trim(),T=String(Lm(Ie,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),M=Lm(Ie,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),V=Lm(Ie,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),q=Lm(Ie,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),ee=String(q??"").trim(),se=Lm(Ie,["Empaque","Packaging","PackagingType","Pack","Formato"]),Oe=String(se??"").trim(),Ke=Math.max(0,vh(M,0)),ot=r0(V,1),Fe=Je+2;ft||mt.push(`Fila ${Fe}: falta Categoria.`),T||mt.push(`Fila ${Fe}: falta Producto/Nombre.`),Ke<=0&&mt.push(`Fila ${Fe}: PrecioProveedor debe ser > 0.`),ot<=0&&mt.push(`Fila ${Fe}: UnidadesPorPaquete debe ser > 0.`),ft&&T&&Ke>0&&ot>0&&Ne.push({id:tt||void 0,category:ft,name:T,providerPrice:Ke,unitsPerPackage:ot,barcode:ee||void 0,packaging:Oe||void 0,_raw:Ie})});const W=new Map;for(const Ie of Ne){const Je=Ie.id?`id::${Ie.id}`:`${Ma(Ie.category)}::${Ma(Ie.name)}`;W.set(Je,Ie)}return{rows:Array.from(W.values()),errors:mt}},dt=async et=>{if(s(""),Re([]),ce([]),te((et==null?void 0:et.name)||""),!et)return;const Ne=et.name.toLowerCase(),mt=Ne.endsWith(".xlsx")||Ne.endsWith(".xls"),W=Ne.endsWith(".csv");if(!mt&&!W){Re(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{pt(!0);const Ie=new FileReader,Je=await new Promise((ee,se)=>{Ie.onerror=()=>se(new Error("No se pudo leer el archivo.")),Ie.onload=()=>ee(Ie.result),Ie.readAsArrayBuffer(et)}),tt=O2(new Uint8Array(Je),{type:"array"}),ft=tt.SheetNames[0],T=tt.Sheets[ft],M=Us.sheet_to_json(T,{defval:""}),{rows:V,errors:q}=Se(M);ce(V),Re(q),V.length===0&&q.length===0&&Re(["No se encontraron filas vlidas para importar."])}catch(Ie){console.error(Ie),Re(["Error leyendo el archivo. Revis que no est corrupto."])}finally{pt(!1)}},xt=(et,Ne)=>{ce(mt=>{const W=[...mt],Ie=W[et];return Ie?(W[et]={...Ie,...Ne},W):mt})},ht=async()=>{if(s(""),we.length>0){s(" Correg los errores antes de importar.");return}if(Ee.length===0){s(" No hay filas para importar.");return}try{pt(!0);const et={},Ne={},mt={};o.forEach(tt=>{et[tt.id]=tt,Ne[`${Ma(tt.category)}::${Ma(tt.name)}`]=tt;const ft=String(tt.barcode||"").trim();ft&&(mt[ft]=tt)});const W=zd(Te);let Ie=0,Je=0;for(const tt of Ee){const ft=String(tt.category||"").trim(),T=String(tt.name||"").trim(),M=Math.max(0,vh(tt.providerPrice,0)),V=r0(tt.unitsPerPackage,1),q=String(tt.barcode||"").trim();if(!ft||!T||M<=0||V<=0)continue;let ee;if(tt.id&&et[tt.id])ee=et[tt.id];else{const se=`${Ma(ft)}::${Ma(T)}`;ee=Ne[se]}if(!ee&&q&&mt[q]&&(ee=mt[q]),ee){const se={category:ft,name:T,providerPrice:M,unitsPerPackage:V,updatedAt:ur.now()};tt.barcode!=null&&(se.barcode=q||""),tt.packaging!=null&&(se.packaging=String(tt.packaging||"")||""),W.update(Wt(Te,"products_candies",ee.id),se),Je+=1}else{const se=Wt(Ct(Te,"products_candies")),Oe={category:ft,name:T,providerPrice:M,unitsPerPackage:V,createdAt:ur.now()};q&&(Oe.barcode=q),tt.packaging&&(Oe.packaging=tt.packaging),W.set(se,Oe),Ie+=1}}await W.commit(),s(` Importacin lista. Creados: ${Ie}, Actualizados: ${Je}`),Ue(!1),ce([]),Re([]),te(""),e()}catch(et){console.error(et),s(" Error importando productos a Firestore.")}finally{pt(!1)}},bt=v.useMemo(()=>{const et=new Set(o.map(Je=>Je.id)),Ne=new Set(o.map(Je=>`${Ma(Je.category)}::${Ma(Je.name)}`)),mt=new Set(o.map(Je=>String(Je.barcode||"").trim()).filter(Boolean));let W=0,Ie=0;for(const Je of Ee){if(Je.id&&et.has(Je.id)){W+=1;continue}const tt=`${Ma(Je.category)}::${Ma(Je.name)}`;if(Ne.has(tt)){W+=1;continue}const ft=String(Je.barcode||"").trim();if(ft&&mt.has(ft)){W+=1;continue}Ie+=1}return{willCreate:Ie,willUpdate:W,total:Ee.length}},[Ee,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(dc,{onClick:e,loading:r||We}),!_t&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ue(!0),ce([]),Re([]),te("")},children:"Importar"})]})})]}),_t&&i.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>ut(et=>!et),children:gt?"Ocultar creacin":"Crear producto"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ue(!0),ce([]),Re([]),te("")},children:"Importar"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Pe(et=>!et),children:vt?"Ocultar filtros":"Mostrar filtros"}),vt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:et=>G(et.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),gt&&i.jsxs("form",{onSubmit:At,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:et=>u(et.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:et=>f(et.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:et=>b(et.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(A)?"":A,onChange:et=>h(Math.max(0,vh(et.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:et=>p(r0(et.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:et=>x(et.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ge("create"),H(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:yt,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),vt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:ye,onChange:et=>ae(et.target.value),placeholder:"Buscar por categora o producto"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:et=>G(et.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:je,onChange:et=>Be(et.target.value),placeholder:"Ej: 7445074183182"}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("search"),H(!0),Pe(!0)},children:"Escanear producto"})}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ae(""),Be("")},children:"Limpiar filtros"})})]}),i.jsxs("div",{className:"w-full md:w-auto text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:Ae.length})]})]}),_t?i.jsx("div",{className:"space-y-2",children:r?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Ae.length===0?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Ae.map(et=>{const Ne=w===et.id,mt=ct===et.id,W=!!String(et.barcode||"").trim();return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>lt(Ie=>Ie===et.id?null:et.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-bold truncate",children:et.name}),i.jsx("div",{className:"text-xs text-gray-600 truncate",children:et.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("div",{className:"font-bold tabular-nums",children:R5(et.providerPrice)})]})]}),mt&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),Ne?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:Ie=>_(Ie.target.value)}):i.jsx("div",{className:"font-semibold",children:et.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),Ne?i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:k,onChange:Ie=>D(r0(Ie.target.value,1))}):i.jsx("div",{className:"font-semibold text-right tabular-nums",children:et.unitsPerPackage})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),Ne?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:me,onChange:Ie=>pe(Ie.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"font-semibold",children:et.packaging||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),Ne?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:Ie=>P(Math.max(0,vh(Ie.target.value,0)))}):i.jsx("div",{className:"font-semibold tabular-nums",children:R5(et.providerPrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),Ne?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:Z,onChange:Ie=>fe(Ie.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("edit"),H(!0)},children:"Escanear"})]}):W?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(et.barcode||"").trim()),L(!0)},children:"Ver cdigo"}):i.jsx("div",{className:"text-gray-600",children:"No"})]})]}),i.jsx("div",{className:"pt-2 flex gap-2",children:Ne?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:oe,type:"button",children:"Guardar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("edit"),H(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:re,type:"button",children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>he(et),type:"button",children:"Editar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>Ve(et),type:"button",children:"Borrar"})]})})]})})]},et.id)})}):i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ae.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):Ae.map(et=>{const Ne=w===et.id,mt=!!String(et.barcode||"").trim();return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:Ne?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:W=>_(W.target.value)}):et.category}),i.jsx("td",{className:"p-2 border",children:Ne?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:S,onChange:W=>E(W.target.value)}):et.name}),i.jsx("td",{className:"p-2 border",children:Ne?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:me,onChange:W=>pe(W.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):et.packaging||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ne?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:W=>P(Math.max(0,vh(W.target.value,0)))}):R5(et.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ne?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:k,onChange:W=>D(r0(W.target.value,1))}):et.unitsPerPackage}),i.jsx("td",{className:"p-2 border text-center",children:Ne?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:Z,onChange:W=>fe(W.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ge("edit"),H(!0)},children:"Escanear"})]}):mt?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(et.barcode||"").trim()),L(!0)},children:"S"}):i.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),i.jsx("td",{className:"p-2 border",children:Ne?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:oe,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:re,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>he(et),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Ve(et),type:"button",children:"Borrar"})]})})]},et.id)})})]})}),a?_t&&a===" Producto guardado."?i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-sm",children:a}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),re(),H(!1)},children:"Aceptar"})]}):i.jsx("p",{className:"mt-2 text-sm",children:a}):null,i.jsx(k9e,{open:z,code:Y,onClose:()=>L(!1)}),i.jsx(F9e,{open:R,onClose:()=>H(!1),onDetected:async et=>{const Ne=String(et||"").trim();if(Ne){if(ne==="edit"&&w){if(o.some(W=>W.id!==w&&String(W.barcode||"")===Ne)){s(" Ya existe otro producto con ese cdigo de barras."),fe(Ne),H(!1);return}try{await xn(Wt(Te,"products_candies",w),{barcode:Ne}),l(W=>W.map(Ie=>Ie.id===w?{...Ie,barcode:Ne}:Ie)),fe(Ne),_t&&s(" Producto guardado.")}catch(W){console.error(W),s(" Error guardando cdigo de barras.")}finally{H(!1)}return}if(ne==="search"){Be(Ne),H(!1);return}ne==="create"?x(et):fe(et)}}}),U&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:de,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:et=>{var Ne;return dt(((Ne=et.target.files)==null?void 0:Ne[0])||null)}}),ie&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:ie})]}),We&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),we.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:we.slice(0,50).map((et,Ne)=>i.jsx("li",{children:et},Ne))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",bt.total," filas (Crear:"," ",bt.willCreate," / Actualizar:"," ",bt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:ht,disabled:We||Ee.length===0||we.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:Ee.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Ee.slice(0,300).map((et,Ne)=>{const mt=et.id?o.some(tt=>tt.id===et.id):!1,W=o.some(tt=>`${Ma(tt.category)}::${Ma(tt.name)}`==`${Ma(et.category)}::${Ma(et.name)}`),Ie=et.barcode?o.some(tt=>String(tt.barcode||"")===et.barcode):!1,Je=mt||W||Ie;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:et.id||"",onChange:tt=>xt(Ne,{id:tt.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:et.category,onChange:tt=>xt(Ne,{category:tt.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:et.name,onChange:tt=>xt(Ne,{name:tt.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(et.providerPrice)?"":et.providerPrice,onChange:tt=>xt(Ne,{providerPrice:Math.max(0,vh(tt.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:et.unitsPerPackage,onChange:tt=>xt(Ne,{unitsPerPackage:r0(tt.target.value,1)})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:et.packaging||"",onChange:tt=>xt(Ne,{packaging:tt.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:et.barcode||"",onChange:tt=>xt(Ne,{barcode:tt.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Je?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Je?"ACTUALIZA":"CREA"})})]},`${et.id||""}-${Ne}`)})})]}),i.jsx("datalist",{id:"categories-list",children:Ye.map(et=>i.jsx("option",{value:et},et))})]}),Ee.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Ee.length," filas (el import importa todas)."]})]})]})})]})}function ose(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function M5(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):ose(t)}const lse=t=>Math.max(0,Math.floor(Number(t??0)));function D9e(t){return lse(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function R9e(t){return lse(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function M9e(t){const e=Wt(Te,"candy_main_orders",t);if((await js(e)).exists())return e;const n=rr(Ct(Te,"candy_main_orders"),or("orderId","==",t)),a=await Lt(n);return a.empty?null:Wt(Te,"candy_main_orders",a.docs[0].id)}async function L5(t){if(!t)return;const e=await M9e(t);if(!e)return;const r=rr(Ct(Te,"inventory_candies"),or("orderId","==",t)),n=await Lt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=D9e(c),f=R9e(c),A=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=h*d,y=m*d,b=p*d,w=g*d,j=y-x,I=b-x,_=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:A,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=f,S.subtotal+=x,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=w,S.gainRivas+=j,S.gainSanJorge+=I,S.gainIsla+=_,S.providerPrice=h,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=g||S.unitPriceIsla,S.unitsPerPackage=A||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await xn(e,{totalPackages:o,items:s})}function L9e(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function R2(t){const e=t.split("#")[0],r=Wt(Te,"sales_candies",e),n=await js(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=L9e(a);if(s&&s.allocations.length>0){let u=0;return await Ri(Te,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(f[g]=(f[g]||0)+x,u+=x)}const h=Object.keys(f).map(p=>Wt(Te,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);d.update(h[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],A=String((f==null?void 0:f.productId)||d||"");if(!A)continue;const h=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[A]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];o.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:A,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),A=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&f>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:A.length?A:void 0})}if(o.length===0)return await Ri(Te,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Ri(Te,async d=>{const f=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:Wt(Te,"inventory_candies",m.batchId),addBack:p})}const A=await Promise.all(f.map(h=>d.get(h.ref)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),g=M5(p),x=Math.max(0,Math.floor(Number(f[h].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[h].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Ri(Te,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const g=rr(Ct(Te,"inventory_candies"),or("productId","==",p.productId)),y=(await Lt(g)).docs.map(b=>{const w=b.data(),j=ose(w),I=M5(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);f.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);f.push({id:y.id,addBack:b}),c+=b,x-=b}}const A={};for(const p of f)A[p.id]=(A[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(A).map(p=>Wt(Te,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=M5(x),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);u.update(h[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function U9e(t){return R2(t)}const zl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function U5(t){return isFinite(t)?Math.round(t):0}function Bd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function Q5(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function Q9e(t,e){var o,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((o=t.createdAt)==null?void 0:o.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function V9e(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState(0),[I,_]=v.useState(!1),[S,E]=v.useState(""),[F,P]=v.useState(""),[k,D]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const Y=await Lt(Ct(Te,"products_candies")),J=[];Y.forEach(ge=>{const U=ge.data();J.push({id:ge.id,name:U.name??"(sin nombre)",category:U.category??"(sin categora)"})}),e(J);const R=rr(Ct(Te,"inventory_candies"),gn("date","desc")),H=await Lt(R),ne=[];H.forEach(ge=>{const U=ge.data(),Ue=Number(U.unitsPerPackage||0),ie=Number(U.totalUnits??U.quantity??(U.packages||0)*(U.unitsPerPackage||0)),te=Number(U.remaining??U.totalUnits??ie??0);ne.push({id:ge.id,productId:U.productId,productName:U.productName,category:U.category,measurement:U.measurement??"unidad",packages:Number(U.packages||0),unitsPerPackage:Ue,totalUnits:ie,remaining:te,remainingPackages:typeof U.remainingPackages=="number"?Number(U.remainingPackages):void 0,providerPrice:Number(U.providerPrice||0),subtotal:Number(U.subtotal||0),totalRivas:Number(U.totalRivas||0),totalSanJorge:Number(U.totalSanJorge||0),totalIsla:Number(U.totalIsla||0),gainRivas:Number(U.gainRivas||0),gainSanJorge:Number(U.gainSanJorge||0),gainIsla:Number(U.gainIsla||0),unitPriceRivas:Number(U.unitPriceRivas||0),unitPriceSanJorge:Number(U.unitPriceSanJorge||0),unitPriceIsla:Number(U.unitPriceIsla||0),date:U.date,createdAt:U.createdAt,status:U.status??"PENDIENTE",orderId:U.orderId??null})}),n(ne)}catch(Y){console.error(Y),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const Z=v.useMemo(()=>r.filter(Y=>!(c&&Y.date<c||d&&Y.date>d||A&&Y.productId!==A||m&&String(Y.category||"")!==m)),[r,c,d,A,m]),fe=v.useMemo(()=>{const Y=new Set;for(const J of t)J.category&&Y.add(J.category);return Array.from(Y).sort((J,R)=>J.localeCompare(R))},[t]),me=v.useMemo(()=>{const Y=Z.reduce((U,Ue)=>U+Bd(Ue),0),J=Z.reduce((U,Ue)=>U+Q5(Ue),0),R=Z.reduce((U,Ue)=>{const ie=Bd(Ue);return U+Number(Ue.providerPrice||0)*ie},0),H=Z.reduce((U,Ue)=>{const ie=Bd(Ue);return U+Number(Ue.unitPriceRivas||0)*ie},0),ne=Z.reduce((U,Ue)=>{const ie=Bd(Ue);return U+Number(Ue.unitPriceSanJorge||0)*ie},0),ge=Z.reduce((U,Ue)=>{const ie=Bd(Ue);return U+Number(Ue.unitPriceIsla||0)*ie},0);return{totalPaquetes:Y,totalPaquetesRestantes:J,totalSubtotal:R,totalRivas:H,totalSJ:ne,totalIsla:ge}},[Z]),pe=v.useMemo(()=>{let Y=0,J=0;for(const R of Z)R.status==="PENDIENTE"&&(Y+=1),R.status==="PAGADO"&&(J+=1);return{totalLotes:Z.length,pendientes:Y,pagados:J}},[Z]),ye=v.useMemo(()=>{const Y=new Map;for(const R of Z){const H=String(R.productId||"");H&&(Y.has(H)||Y.set(H,{batches:[]}),Y.get(H).batches.push(R))}const J=[];for(const[R,H]of Y.entries()){const ne=[...H.batches].sort(Q9e),ge=ne[0],U=ne.reduce((gt,ut)=>gt+Bd(ut),0),Ue=ne.reduce((gt,ut)=>gt+Q5(ut),0),ie=Number((ge==null?void 0:ge.providerPrice)||0),te=Number((ge==null?void 0:ge.unitPriceRivas)||0),Ee=Number((ge==null?void 0:ge.unitPriceIsla)||0),ce=ne.reduce((gt,ut)=>{const vt=Bd(ut);return gt+Number(ut.providerPrice||0)*vt},0),we=ne.reduce((gt,ut)=>{const vt=Bd(ut);return gt+Number(ut.unitPriceRivas||0)*vt},0),Re=ne.reduce((gt,ut)=>{const vt=Bd(ut);return gt+Number(ut.unitPriceIsla||0)*vt},0),We=we-ce,pt=Re-ce;let _t="",He;for(const gt of ne)(!_t||String(gt.date||"")>_t)&&(_t=String(gt.date||""),He=gt.createdAt);J.push({productId:R,productName:(ge==null?void 0:ge.productName)||"",category:(ge==null?void 0:ge.category)||"",totalPackages:U,remainingPackages:Ue,providerPrice:ie,unitPriceRivas:te,unitPriceIsla:Ee,subtotal:ce,totalRivas:we,totalIsla:Re,gainRivas:We,gainIsla:pt,lastDate:_t,lastCreatedAt:He,batchCount:ne.length})}return J.sort((R,H)=>String(H.lastDate).localeCompare(String(R.lastDate))),J},[Z]),ae=Y=>{x(Y.id),b(Y.date),j(Y.providerPrice),l("")},je=()=>{x(null),b(""),j(0)},Be=async()=>{if(!g)return;const Y=r.find(Re=>Re.id===g);if(!Y)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const J=Bd(Y),R=w*J,H=J>0?R/.8:0,ne=J>0?R/.85:0,ge=J>0?R/.7:0,U=H-R,Ue=ne-R,ie=ge-R,te=J>0?U5(H/J):0,Ee=J>0?U5(ne/J):0,ce=J>0?U5(ge/J):0,we=Wt(Te,"inventory_candies",g);await xn(we,{date:y,providerPrice:w,subtotal:R,totalRivas:H,totalSanJorge:ne,totalIsla:ge,gainRivas:U,gainSanJorge:Ue,gainIsla:ie,unitPriceRivas:te,unitPriceSanJorge:Ee,unitPriceIsla:ce}),n(Re=>Re.map(We=>We.id===g?{...We,date:y,providerPrice:w,subtotal:R,totalRivas:H,totalSanJorge:ne,totalIsla:ge,gainRivas:U,gainSanJorge:Ue,gainIsla:ie,unitPriceRivas:te,unitPriceSanJorge:Ee,unitPriceIsla:ce}:We)),Y.orderId&&await L5(String(Y.orderId)),l(" Lote de dulces actualizado"),je()},O=async Y=>{confirm(`Marcar PAGADO el lote del ${Y.date} (${Y.productName})?`)&&(await xn(Wt(Te,"inventory_candies",Y.id),{status:"PAGADO"}),n(R=>R.map(H=>H.id===Y.id?{...H,status:"PAGADO"}:H)),l(" Lote marcado como pagado"))},G=async Y=>{confirm(`Eliminar el lote del ${Y.date} (${Y.productName})?`)&&(await Bn(Wt(Te,"inventory_candies",Y.id)),n(R=>R.filter(H=>H.id!==Y.id)),Y.orderId&&await L5(String(Y.orderId)),l(" Lote eliminado"))},z=async(Y,J)=>{try{s(!0),l("");const R=rr(Ct(Te,"inventory_candies"),or("productId","==",Y),gn("date","desc")),H=await Lt(R),ne=[];H.forEach(ge=>{const U=ge.data(),Ue=Number(U.unitsPerPackage||0),ie=Number(U.totalUnits??U.quantity??(U.packages||0)*(U.unitsPerPackage||0)),te=Number(U.remaining??U.totalUnits??ie??0);ne.push({id:ge.id,productId:U.productId,productName:U.productName,category:U.category,measurement:U.measurement??"unidad",packages:Number(U.packages||0),unitsPerPackage:Ue,totalUnits:ie,remaining:te,remainingPackages:typeof U.remainingPackages=="number"?Number(U.remainingPackages):void 0,providerPrice:Number(U.providerPrice||0),subtotal:Number(U.subtotal||0),totalRivas:Number(U.totalRivas||0),totalSanJorge:Number(U.totalSanJorge||0),totalIsla:Number(U.totalIsla||0),gainRivas:Number(U.gainRivas||0),gainSanJorge:Number(U.gainSanJorge||0),gainIsla:Number(U.gainIsla||0),unitPriceRivas:Number(U.unitPriceRivas||0),unitPriceSanJorge:Number(U.unitPriceSanJorge||0),unitPriceIsla:Number(U.unitPriceIsla||0),date:U.date,createdAt:U.createdAt,status:U.status??"PENDIENTE",orderId:U.orderId??null})}),E(Y),P(J),D(ne),_(!0)}catch(R){console.error(R),l(" Error abriendo detalle del producto.")}finally{s(!1)}},L=async(Y,J)=>{const R=r.filter(ne=>ne.productId===Y);if(confirm(`Eliminar COMPLETAMENTE "${J}"?
Esto eliminar ${R.length} lote(s) de este producto.`))try{s(!0),l("");const ne=Array.from(new Set(R.map(ge=>ge.orderId?String(ge.orderId):"").filter(Boolean)));for(const ge of R)await Bn(Wt(Te,"inventory_candies",ge.id));n(ge=>ge.filter(U=>U.productId!==Y)),l(" Producto eliminado (todos sus lotes).");for(const ge of ne)await L5(ge);I&&S===Y&&(_(!1),D([]),E(""),P(""))}catch(ne){console.error(ne),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:Y=>u(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:Y=>f(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:Y=>p(Y.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),fe.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:Y=>h(Y.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(Y=>i.jsxs("option",{value:Y.id,children:[Y.name,"  ",Y.category]},Y.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",pe.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",pe.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",pe.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",me.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",me.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",zl(me.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",zl(me.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",zl(me.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",zl(me.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ye.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ye.map(Y=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:Y.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",Y.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:zl(Y.gainIsla)}),i.jsx("td",{className:"p-2 border",children:Y.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(Y.productId,Y.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>L(Y.productId,Y.productName),children:"Borrar"})]})})]},Y.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",F||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),D([]),E(""),P(""),je()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:k.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):k.map(Y=>{const J=g===Y.id,R=Bd(Y),H=Q5(Y);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:J?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:ne=>b(ne.target.value)}):Y.date}),i.jsx("td",{className:"p-2 border align-top",children:Y.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",Y.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:R}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:H}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Y.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:J?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:ne=>j(Math.max(0,parseFloat(ne.target.value||"0")))}):zl(Y.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:zl(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:zl(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:Y.orderId?String(Y.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${Y.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Y.status})}),i.jsx("td",{className:"p-2 border align-top",children:J?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Be,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:je,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[Y.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>O(Y),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ae(Y),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>G(Y),children:"Borrar"})]})})]},Y.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>L(S,F),children:"Borrar producto (todos los lotes)"})})]})})]})}const V5=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],vo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ay(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function L$(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}function H9e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=ln(a,"vendedor_dulces"),l=ln(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[S,E]=v.useState(null),[F,P]=v.useState([]),k=async st=>{var St;j(!0),_(!0),E(st),P([]);try{const Qt=await js(Wt(Te,"sales_candies",st));let Rt=null;Qt.exists()?Rt=Qt.data():Rt=(St=(await Lt(rr(Ct(Te,"sales_candies"),or("name","==",st)))).docs[0])==null?void 0:St.data();const qt=(Array.isArray(Rt==null?void 0:Rt.items)?Rt.items:Rt!=null&&Rt.item?[Rt.item]:[]).map(Yt=>({productName:String(Yt.productName||""),qty:Number(Yt.qty||0),unitPrice:Number(Yt.unitPrice||0),discount:Number(Yt.discount||0),total:Number(Yt.total||0)}));P(qt)}catch(Qt){console.error(Qt)}finally{_(!1)}},[D,Z]=v.useState(""),[fe,me]=v.useState("+505 "),[pe,ye]=v.useState(""),[ae,je]=v.useState(""),[Be,O]=v.useState("ACTIVO"),[G,z]=v.useState(0),[L,Y]=v.useState(""),[J,R]=v.useState(0),[H,ne]=v.useState([]),[ge,U]=v.useState(!0),[Ue,ie]=v.useState(""),[te,Ee]=v.useState(null),[ce,we]=v.useState(""),[Re,We]=v.useState("+505 "),[pt,_t]=v.useState(""),[He,gt]=v.useState(""),[ut,vt]=v.useState("ACTIVO"),[Pe,ct]=v.useState(0),[lt,be]=v.useState(""),[ue,Le]=v.useState(!1),[ke,Ae]=v.useState(null),[Ye,yt]=v.useState(!1),[At,he]=v.useState([]),[re,oe]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[Ve,de]=v.useState(!1),[Se,dt]=v.useState(0),[xt,ht]=v.useState(new Date().toISOString().slice(0,10)),[bt,et]=v.useState(""),[Ne,mt]=v.useState(!1),[W,Ie]=v.useState(null),[Je,tt]=v.useState(""),[ft,T]=v.useState(0),[M,V]=v.useState(""),[q,ee]=v.useState(!1),[se,Oe]=v.useState(null),[Ke,ot]=v.useState(!1),[Fe,Xe]=v.useState(!1),[xe,Ge]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(U(!0),o&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const st=await Lt(Ct(Te,"sellers_candies")),St=[];st.forEach(qt=>{const Yt=qt.data(),Xt=String(Yt.status||"ACTIVO");Xt==="ACTIVO"&&St.push({id:qt.id,name:String(Yt.name||""),status:Xt})}),u(St);const Qt=o?rr(Ct(Te,"customers_candies"),or("vendorId","==",s),gn("createdAt","desc")):rr(Ct(Te,"customers_candies"),gn("createdAt","desc")),Rt=await Lt(Qt),Mt=[];Rt.forEach(qt=>{const Yt=qt.data();Mt.push({id:qt.id,name:Yt.name??"",phone:Yt.phone??"+505 ",place:Yt.place??"",notes:Yt.notes??"",status:Yt.status??"ACTIVO",creditLimit:Number(Yt.creditLimit??0),createdAt:Yt.createdAt??ur.now(),balance:0,sellerId:Yt.sellerId||"",vendorId:Yt.vendorId||"",vendorName:Yt.vendorName||"",initialDebt:Number(Yt.initialDebt||0),initialDebtDate:String(Yt.initialDebtDate||"").trim(),lastAbonoDate:"",lastAbonoAmount:0})});for(const qt of Mt)try{const Yt=rr(Ct(Te,"ar_movements"),or("customerId","==",qt.id)),Xt=await Lt(Yt);let br=0,zt=null;const hr=[];Xt.forEach(Dn=>{var ya,Ha,Rc;const Va=Dn.data(),Lo=Number(Va.amount||0);br+=Lo;const Qi=Va.date??((Ha=(ya=Va.createdAt)==null?void 0:ya.toDate)!=null&&Ha.call(ya)?Va.createdAt.toDate().toISOString().slice(0,10):"");if(hr.push({id:Dn.id,date:Qi,type:Va.type??(Lo<0?"ABONO":"CARGO"),amount:Lo,ref:Va.ref||{},comment:Va.comment||"",createdAt:Va.createdAt}),Lo<0){const vd=(Rc=Va.createdAt)!=null&&Rc.seconds?Number(Va.createdAt.seconds):0;(!zt||vd>=zt.ts)&&(zt={date:Qi,amount:Math.abs(Lo),ts:vd})}});const rn=Number(qt.initialDebt||0),Ya=Dt(rn,String(qt.initialDebtDate||""),hr);qt.balance=Ya+br,zt?(qt.lastAbonoDate=zt==null?void 0:zt.date,qt.lastAbonoAmount=zt==null?void 0:zt.amount):(qt.lastAbonoDate="",qt.lastAbonoAmount=0)}catch{qt.balance=Number(qt.initialDebt||0),qt.lastAbonoDate="",qt.lastAbonoAmount=0}ne(Mt)}catch(st){console.error(st),ie(" Error cargando clientes.")}finally{U(!1)}})()},[o,s]);const qe=()=>{Z(""),me("+505 "),ye(""),je(""),O("ACTIVO"),z(0),Y(""),R(0)},it=async st=>{var Mt;if(st.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const St=Ay(fe);if(St.length<6){ie("Telfono incompleto.");return}const Qt=o?s:String(L||"").trim(),Rt=Qt&&((Mt=c.find(qt=>qt.id===Qt))==null?void 0:Mt.name)||"";try{const qt=Number(J||0),Yt=await Tn(Ct(Te,"customers_candies"),{name:D.trim(),phone:St,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0),vendorId:Qt,vendorName:Rt,initialDebt:qt,createdAt:ur.now()});ne(Xt=>[{id:Yt.id,name:D.trim(),phone:St,place:pe||"",notes:ae||"",status:Be,creditLimit:Number(G||0),vendorId:Qt,vendorName:Rt,initialDebt:qt,createdAt:ur.now(),balance:qt,lastAbonoDate:"",lastAbonoAmount:0},...Xt]),qe(),ee(!1),ie(" Cliente creado")}catch(qt){console.error(qt),ie(" Error al crear cliente")}},Et=st=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Ee(st.id),we(st.name),We(st.phone||"+505 "),_t(st.place||""),gt(st.notes||""),vt(st.status||"ACTIVO"),ct(Number(st.creditLimit||0)),be(String(st.vendorId||""))},Pt=()=>{Ee(null),we(""),We("+505 "),_t(""),gt(""),vt("ACTIVO"),ct(0),be("")},pr=async()=>{var Yt;if(o){ie(" No permitido.");return}if(!te)return;const st=Ay(Re);if(!ce.trim()){ie("Ingresa el nombre.");return}const St=H.find(Xt=>Xt.id===te),Qt=String((St==null?void 0:St.vendorId)||""),Rt=o?s:String(lt||"");if(o&&Qt&&Qt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Qt&&Rt&&Qt!==Rt){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Mt=o?s:String(lt||""),qt=Mt&&((Yt=c.find(Xt=>Xt.id===Mt))==null?void 0:Yt.name)||"";try{await xn(Wt(Te,"customers_candies",te),{name:ce.trim(),phone:st,place:pt||"",notes:He||"",status:ut,creditLimit:Number(Pe||0),vendorId:Mt,vendorName:qt}),ne(Xt=>Xt.map(br=>br.id===te?{...br,name:ce.trim(),phone:st,place:pt||"",notes:He||"",status:ut,creditLimit:Number(Pe||0),vendorId:Mt,vendorName:qt}:br)),Pt(),ie(" Cliente actualizado")}catch(Xt){console.error(Xt),ie(" Error al actualizar")}},Ot=async st=>{if(confirm(`Eliminar al cliente "${st.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{U(!0);const Qt=rr(Ct(Te,"sales_candies"),or("customerId","==",st.id)),Rt=await Lt(Qt);for(const Yt of Rt.docs){const Xt=Yt.id;try{await R2(Xt)}catch(br){console.warn("restoreSaleAndDeleteCandy error",br);try{await Bn(Wt(Te,"sales_candies",Xt))}catch{}}await L$(Xt)}const Mt=rr(Ct(Te,"ar_movements"),or("customerId","==",st.id)),qt=await Lt(Mt);await Promise.all(qt.docs.map(Yt=>Bn(Wt(Te,"ar_movements",Yt.id)))),await Bn(Wt(Te,"customers_candies",st.id)),ne(Yt=>Yt.filter(Xt=>Xt.id!==st.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch(Qt){console.error(Qt),ie(" No se pudo eliminar el cliente.")}finally{U(!1)}},Dt=(st,St,Qt)=>{const Rt=Number(st||0);if(!Rt)return 0;const Mt=String(St||"").trim();return Mt&&Qt.some(Yt=>{var rn;const Xt=Number(Yt.amount||0);if(!(Xt>0))return!1;const br=Math.abs(Xt-Rt)<.01,zt=String(Yt.date||"").trim()===Mt,hr=!!((rn=Yt.ref)!=null&&rn.saleId);return br&&zt&&hr})?0:Rt},fr=(st,St,Qt)=>{const Rt=st.reduce((br,zt)=>br+(Number(zt.amount)||0),0),Mt=st.filter(br=>Number(br.amount)<0).reduce((br,zt)=>br+Math.abs(Number(zt.amount)||0),0),qt=st.filter(br=>Number(br.amount)>0).reduce((br,zt)=>br+(Number(zt.amount)||0),0),Yt=Dt(St,Qt,st),Xt=Number(Yt||0)+Rt;oe({saldoActual:Xt,totalAbonado:Mt,totalCargos:Number(Yt||0)+qt,saldoRestante:Xt})},ir=async st=>{Ae(st),he([]),oe({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Le(!0),ot(!1),Xe(!1),Ge(null),de(!1),dt(0),ht(new Date().toISOString().slice(0,10)),et(""),Ie(null),yt(!0);try{const St=rr(Ct(Te,"ar_movements"),or("customerId","==",st.id)),Qt=await Lt(St),Rt=[];Qt.forEach(Mt=>{var br,zt;const qt=Mt.data(),Yt=qt.date??((zt=(br=qt.createdAt)==null?void 0:br.toDate)!=null&&zt.call(br)?qt.createdAt.toDate().toISOString().slice(0,10):""),Xt=Number(qt.amount||0);Rt.push({id:Mt.id,date:Yt,type:qt.type??(Xt<0?"ABONO":"CARGO"),amount:Xt,ref:qt.ref||{},comment:qt.comment||"",createdAt:qt.createdAt})}),Rt.sort((Mt,qt)=>{var br,zt;if(Mt.date!==qt.date)return Mt.date.localeCompare(qt.date);const Yt=((br=Mt.createdAt)==null?void 0:br.seconds)||0,Xt=((zt=qt.createdAt)==null?void 0:zt.seconds)||0;return Yt-Xt}),he(Rt),fr(Rt,Number(st.initialDebt||0),String(st.initialDebtDate||""))}catch(St){console.error(St),ie(" No se pudo cargar el estado de cuenta")}finally{yt(!1)}},Bt=st=>{const St=st.filter(Qt=>Number(Qt.amount)<0).map(Qt=>{var Rt;return{date:Qt.date,amount:Math.abs(Number(Qt.amount||0)),ts:((Rt=Qt.createdAt)==null?void 0:Rt.seconds)||0}}).sort((Qt,Rt)=>(Qt.ts||0)-(Rt.ts||0));return St.length?St[St.length-1]:null},gr=v.useMemo(()=>Dt(Number((ke==null?void 0:ke.initialDebt)||0),String((ke==null?void 0:ke.initialDebtDate)||""),At),[ke==null?void 0:ke.initialDebt,ke==null?void 0:ke.initialDebtDate,At]),Or=async()=>{if(!ke)return;ie("");const st=Number(Se||0);if(!(st>0)){ie("Ingresa un monto de abono mayor a 0.");return}const St=parseFloat(st.toFixed(2));if(!xt){ie("Selecciona la fecha del abono.");return}try{mt(!0);const Qt={customerId:ke.id,type:"ABONO",amount:-St,date:xt,comment:bt||"",createdAt:ur.now()},Mt={id:(await Tn(Ct(Te,"ar_movements"),Qt)).id,date:xt,type:"ABONO",amount:-St,comment:bt||"",createdAt:ur.now()},qt=[...At,Mt].sort((zt,hr)=>{var Dn,Va;if(zt.date!==hr.date)return zt.date.localeCompare(hr.date);const rn=((Dn=zt.createdAt)==null?void 0:Dn.seconds)||0,Ya=((Va=hr.createdAt)==null?void 0:Va.seconds)||0;return rn-Ya});he(qt),fr(qt,Number(ke.initialDebt||0),String(ke.initialDebtDate||""));const Yt=qt.reduce((zt,hr)=>zt+(Number(hr.amount)||0),0),Xt=Dt(Number(ke.initialDebt||0),String(ke.initialDebtDate||""),qt),br=Number(Xt||0)+Yt;ne(zt=>zt.map(hr=>hr.id!==ke.id?hr:{...hr,balance:br,lastAbonoDate:xt,lastAbonoAmount:St})),Ae(zt=>zt&&{...zt,balance:br,lastAbonoDate:xt,lastAbonoAmount:St}),dt(0),et(""),ht(new Date().toISOString().slice(0,10)),de(!1),ie(" Abono registrado")}catch(Qt){console.error(Qt),ie(" Error al registrar el abono")}finally{mt(!1)}},Pr=st=>{Ie(st.id),tt(st.date||new Date().toISOString().slice(0,10)),T(Math.abs(Number(st.amount||0))),V(st.comment||"")},Vr=()=>{Ie(null),tt(""),T(0),V("")},Rr=async()=>{if(!W||!ke)return;const st=At.findIndex(Mt=>Mt.id===W);if(st===-1)return;const St=At[st],Qt=Number(ft||0);if(!(Qt>0)){ie("El monto debe ser mayor a 0.");return}const Rt=St.type==="ABONO"?-parseFloat(Qt.toFixed(2)):+parseFloat(Qt.toFixed(2));try{await xn(Wt(Te,"ar_movements",W),{date:Je,amount:Rt,comment:M||""});const Mt=[...At];Mt[st]={...St,date:Je,amount:Rt,comment:M||""},Mt.sort((zt,hr)=>{var Dn,Va;if(zt.date!==hr.date)return zt.date.localeCompare(hr.date);const rn=((Dn=zt.createdAt)==null?void 0:Dn.seconds)||0,Ya=((Va=hr.createdAt)==null?void 0:Va.seconds)||0;return rn-Ya}),he(Mt),fr(Mt,Number(ke.initialDebt||0),String(ke.initialDebtDate||""));const qt=Mt.reduce((zt,hr)=>zt+(Number(hr.amount)||0),0),Yt=Dt(Number(ke.initialDebt||0),String(ke.initialDebtDate||""),Mt),Xt=Number(Yt||0)+qt,br=Bt(Mt);ne(zt=>zt.map(hr=>hr.id===ke.id?{...hr,balance:Xt,lastAbonoDate:(br==null?void 0:br.date)||"",lastAbonoAmount:(br==null?void 0:br.amount)||0}:hr)),Ae(zt=>zt&&{...zt,balance:Xt,lastAbonoDate:(br==null?void 0:br.date)||"",lastAbonoAmount:(br==null?void 0:br.amount)||0}),Vr(),ie(" Movimiento actualizado")}catch(Mt){console.error(Mt),ie(" Error al actualizar movimiento")}},an=async st=>{var Qt,Rt;if(confirm(`Eliminar este movimiento (${st.type==="ABONO"?"Abono":"Compra"}) del ${st.date}?${st.type==="CARGO"&&((Qt=st.ref)!=null&&Qt.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&ke)try{if(U(!0),st.type==="CARGO"&&((Rt=st.ref)!=null&&Rt.saleId)){try{await R2(st.ref.saleId)}catch(zt){console.warn("restoreSaleAndDeleteCandy error",zt),U(!1),ie(" No se pudo devolver inventario de la venta.");return}await L$(st.ref.saleId)}else await Bn(Wt(Te,"ar_movements",st.id));const Mt=At.filter(zt=>{var hr,rn;return st.type==="CARGO"&&((hr=st.ref)!=null&&hr.saleId)?((rn=zt.ref)==null?void 0:rn.saleId)!==st.ref.saleId:zt.id!==st.id});he(Mt),fr(Mt,Number(ke.initialDebt||0),String(ke.initialDebtDate||""));const qt=Mt.reduce((zt,hr)=>zt+(Number(hr.amount)||0),0),Yt=Dt(Number(ke.initialDebt||0),String(ke.initialDebtDate||""),Mt),Xt=Number(Yt||0)+qt,br=Bt(Mt);ne(zt=>zt.map(hr=>hr.id===ke.id?{...hr,balance:Xt,lastAbonoDate:(br==null?void 0:br.date)||"",lastAbonoAmount:(br==null?void 0:br.amount)||0}:hr)),Ae(zt=>zt&&{...zt,balance:Xt,lastAbonoDate:(br==null?void 0:br.date)||"",lastAbonoAmount:(br==null?void 0:br.amount)||0}),Ge(null),ie(" Movimiento eliminado")}catch(Mt){console.error(Mt),ie(" Error al eliminar movimiento")}finally{U(!1)}},Wn=v.useMemo(()=>[...H].sort((st,St)=>{var Qt,Rt;return st.status!==St.status?st.status==="BLOQUEADO"?1:-1:(((Qt=St.createdAt)==null?void 0:Qt.seconds)||0)-(((Rt=st.createdAt)==null?void 0:Rt.seconds)||0)}),[H]),Nt=st=>st==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",_r=v.useMemo(()=>{const st=A.trim().toLowerCase(),St=g.trim()===""?null:Number(g),Qt=y.trim()===""?null:Number(y);return Wn.filter(Rt=>{const Mt=!st||String(Rt.name||"").toLowerCase().includes(st),qt=!m||Rt.status===m,Yt=Number(Rt.balance||0),Xt=St===null||!Number.isNaN(St)&&Yt>=St,br=Qt===null||!Number.isNaN(Qt)&&Yt<=Qt;return Mt&&qt&&Xt&&br})},[Wn,A,m,g,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{ee(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(st=>!st),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:st=>h(st.target.value),placeholder:"Buscar por nombre"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:st=>p(st.target.value||""),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:st=>x(st.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:st=>b(st.target.value),placeholder:""})]})]}),i.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),p(""),x(""),b("")},children:"Limpiar"})})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ge?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):_r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):_r.map(st=>{var Qt;const St=te===st.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Qt=st.createdAt)!=null&&Qt.toDate?st.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:St?i.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:Rt=>we(Rt.target.value)}):i.jsx("div",{className:"font-medium",children:st.name})}),i.jsx("td",{className:"p-2 border",children:St?i.jsx("input",{className:"w-full border p-1 rounded",value:Re,onChange:Rt=>We(Ay(Rt.target.value))}):st.phone}),i.jsx("td",{className:"p-2 border",children:St?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:lt,onChange:Rt=>be(Rt.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Rt=>i.jsx("option",{value:Rt.id,children:Rt.name},Rt.id))]}):st.vendorName||""}),i.jsx("td",{className:"p-2 border",children:St?i.jsxs("select",{className:"w-full border p-1 rounded",value:pt,onChange:Rt=>_t(Rt.target.value),children:[i.jsx("option",{value:"",children:""}),V5.map(Rt=>i.jsx("option",{value:Rt,children:Rt},Rt))]}):st.place||""}),i.jsx("td",{className:"p-2 border",children:St?i.jsxs("select",{className:"w-full border p-1 rounded",value:ut,onChange:Rt=>vt(Rt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Nt(st.status)}`,children:st.status})}),i.jsx("td",{className:"p-2 border",children:St?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Pe)?"":Pe,onChange:Rt=>ct(Math.max(0,Number(Rt.target.value||0)))}):vo(st.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:vo(st.balance||0)}),i.jsx("td",{className:"p-2 border",children:St?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:He,onChange:Rt=>gt(Rt.target.value),maxLength:500}):i.jsx("span",{title:st.notes||"",children:(st.notes||"").length>40?(st.notes||"").slice(0,40)+"":st.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:St?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:pr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pt,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Et(st),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(st),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ir(st),children:"Estado de cuenta"})]})})})]},st.id)})})]})}),i.jsx("div",{className:"md:hidden",children:ge?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):_r.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-2",children:_r.map(st=>{const St=se===st.id,Qt=te===st.id,Rt=i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Nt(st.status)}`,children:st.status});return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!Qt&&Oe(Mt=>Mt===st.id?null:st.id)},children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("div",{className:"truncate font-semibold",children:st.name})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),i.jsx("div",{className:"font-semibold leading-4",children:vo(st.balance||0)})]}),Rt]})]}),St&&i.jsxs("div",{className:"px-3 pb-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),i.jsx("div",{className:"font-medium",children:st.lastAbonoDate?st.lastAbonoDate:""}),i.jsx("div",{className:"text-[12px] text-gray-700",children:st.lastAbonoAmount?vo(st.lastAbonoAmount):""})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),i.jsx("div",{className:"text-lg font-bold",children:vo(st.balance||0)})]})]}),Qt?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:ce,onChange:Mt=>we(Mt.target.value)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:Re,onChange:Mt=>We(Ay(Mt.target.value))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:ut,onChange:Mt=>vt(Mt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:pt,onChange:Mt=>_t(Mt.target.value),children:[i.jsx("option",{value:"",children:""}),V5.map(Mt=>i.jsx("option",{value:Mt,children:Mt},Mt))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:o?s:lt,onChange:Mt=>be(Mt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Mt=>i.jsx("option",{value:Mt.id,children:Mt.name},Mt.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Pe)?"":Pe,onChange:Mt=>ct(Math.max(0,Number(Mt.target.value||0)))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:He,onChange:Mt=>gt(Mt.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:pr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{Pt(),Oe(null)},type:"button",children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Et(st),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Ot(st),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ir(st),type:"button",children:"Estado"})]})]})]},st.id)})})})]}),Ue&&i.jsx("p",{className:"mt-2 text-sm",children:Ue}),q&&du.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ee(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ee(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:it,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:st=>Z(st.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:st=>me(Ay(st.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:st=>ye(st.target.value),children:[i.jsx("option",{value:"",children:""}),V5.map(st=>i.jsx("option",{value:st,children:st},st))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Be,onChange:st=>O(st.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:L,onChange:st=>Y(st.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(st=>i.jsx("option",{value:st.id,children:st.name},st.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:st=>R(Math.max(0,Number(st.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:st=>z(Math.max(0,Number(st.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ae,onChange:st=>je(st.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ae.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ee(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),ue&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ke==null?void 0:ke.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),ht(new Date().toISOString().slice(0,10)),et(""),de(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Le(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:vo(Number(gr||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:vo(re.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:vo(re.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:vo(re.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Ye?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):At.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):At.map(st=>{var Qt,Rt;const St=W===st.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:St?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Je,onChange:Mt=>tt(Mt.target.value)}):st.date||""}),i.jsx("td",{className:"p-2 border",children:st.amount>=0?(Qt=st.ref)!=null&&Qt.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>k(st.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Rt=st.ref)!=null&&Rt.saleId?`Venta #${st.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:St?i.jsx("input",{className:"w-full border p-1 rounded",value:M,onChange:Mt=>V(Mt.target.value),placeholder:"Comentario"}):i.jsx("span",{title:st.comment||"",children:(st.comment||"").length>40?(st.comment||"").slice(0,40)+"":st.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:St?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ft)?"":ft,onChange:Mt=>{const qt=Number(Mt.target.value||0),Yt=Number.isFinite(qt)?Math.max(0,parseFloat(qt.toFixed(2))):0;T(Yt)},placeholder:"0.00"}):vo(st.amount)}),i.jsx("td",{className:"p-2 border",children:St?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Rr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Vr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pr(st),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>an(st),children:"Borrar"})]})})]},st.id)})})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ot(st=>!st),children:[i.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),i.jsx("div",{className:"text-sm text-gray-500",children:Ke?"Ocultar":"Ver"})]}),Ke&&i.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),i.jsx("div",{className:"font-bold",children:vo(Number(gr||0))})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),i.jsx("div",{className:"font-bold",children:vo(re.saldoActual)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),i.jsx("div",{className:"font-bold",children:vo(re.totalAbonado)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),i.jsx("div",{className:"font-bold",children:vo(re.saldoRestante)})]})]})]}),i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Xe(st=>!st),children:[i.jsx("div",{className:"font-semibold",children:"Movimientos"}),i.jsx("div",{className:"text-sm text-gray-500",children:Fe?"Ocultar":"Ver"})]}),Fe&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Ye?i.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):At.length===0?i.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):At.map(st=>{var qt;const St=xe===st.id,Qt=W===st.id,Rt=st.amount>=0?"CARGO":"ABONO",Mt=st.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return i.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{Qt||Ge(Yt=>Yt===st.id?null:st.id)},children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),i.jsx("div",{className:"font-semibold",children:st.date||""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Mt}`,children:Rt}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),i.jsx("div",{className:"font-semibold",children:vo(st.amount)})]})]})]}),St&&i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),i.jsx("div",{className:"font-medium",children:(qt=st.ref)!=null&&qt.saleId?`Venta #${st.ref.saleId}`:""})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),Qt?i.jsx("input",{className:"w-full border p-2 rounded-xl",value:M,onChange:Yt=>V(Yt.target.value),placeholder:"Comentario"}):i.jsx("div",{className:"font-medium",children:(st.comment||"").trim()||""})]}),Qt&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:Je,onChange:Yt=>tt(Yt.target.value)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(ft)?"":ft,onChange:Yt=>{const Xt=Number(Yt.target.value||0),br=Number.isFinite(Xt)?Math.max(0,parseFloat(Xt.toFixed(2))):0;T(br)}})]})]}),Qt?i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Rr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Vr,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pr(st),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>an(st),type:"button",children:"Borrar"})]})]})]},st.id)})})]})]}),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ke==null?void 0:ke.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:xt,onChange:st=>ht(st.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Se===0?"":Se,onChange:st=>{const St=Number(st.target.value||0),Qt=Number.isFinite(St)?Math.max(0,parseFloat(St.toFixed(2))):0;dt(Qt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:bt,onChange:st=>et(st.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[bt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>de(!1),disabled:Ne,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Or,disabled:Ne,children:Ne?"Guardando...":"Guardar abono"})]})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",S?` #${S}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((st,St)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:st.productName}),i.jsx("td",{className:"p-2 border text-right",children:st.qty}),i.jsx("td",{className:"p-2 border text-right",children:vo(st.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:vo(st.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:vo(st.total)})]},St))})]})})]})})]})}const xc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,$9e=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function G9e(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function K9e(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function q9e(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Lr;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${G9e(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const A=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${A}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(A=>{f>270&&(d.addPage(),f=12);const h=(A.productName||"").length>50?A.productName.slice(0,47)+"...":A.productName;d.text(h,10,f),d.text(String(A.qty),110,f,{align:"right"}),d.text(`C$ ${Number(A.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(A.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function U$(t,e){if(!t||!e)return 0;const r=rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",e),or("productId","==",t)),n=await Lt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const Q$=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function z9e(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||o<=0)return{allocations:[]};const c=rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",r),or("productId","==",e),or("remainingUnits",">",0),gn("date","asc"),gn("createdAt","asc")),u=await Lt(c);for(const d of u.docs){if(o<=0)break;const f=d.data(),A=Number(f.remainingUnits||0);if(A<=0)continue;const h=Math.min(A,o),m=A-h,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await xn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:o}),{allocations:l}}function V$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function W9e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;ln(a,"admin"),ln(a,"vendedor_dulces");const[s,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[f,A]=v.useState({}),[h,m]=v.useState("CONTADO"),[p,g]=v.useState("RIVAS"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(Q$()),[_,S]=v.useState(""),[E,F]=v.useState(!1),[P,k]=v.useState(""),[D,Z]=v.useState([]),[fe,me]=v.useState(!0),[pe,ye]=v.useState(!1),ae=v.useMemo(()=>D.reduce((W,Ie)=>W+(Ie.qtyPackages||0),0),[D]),je=v.useMemo(()=>D.reduce((W,Ie)=>W+(Ie.qtyPackages||0)*(Ie.unitsPerPackage||1),0),[D]),Be=v.useMemo(()=>{const W=D.reduce((Ie,Je)=>{const tt=(Number(Je.pricePerPackage)||0)*(Je.qtyPackages||0),ft=Number(Je.discount)||0,T=Math.max(0,tt-ft);return Ie+T},0);return Math.floor(W*100)/100},[D]),[O,G]=v.useState(0),[z,L]=v.useState(""),[Y,J]=v.useState(!1),[R,H]=v.useState(!1),[ne,ge]=v.useState(""),[U,Ue]=v.useState("+505 "),[ie,te]=v.useState(""),[Ee,ce]=v.useState(""),[we,Re]=v.useState("ACTIVO"),[We,pt]=v.useState(0),[_t,He]=v.useState(""),gt=()=>{ge(""),Ue("+505 "),te(""),ce(""),Re("ACTIVO"),pt(0)},[ut,vt]=v.useState(!1),Pe=async W=>{const Ie=String(W||"").trim();if(!Ie)return;const Je=bt.find(M=>String(M.barcode||"")===Ie),tt=bt.find(M=>String(M.sku||"")===Ie),ft=bt.find(M=>String(M.id||"")===Ie),T=Je||tt||ft||null;T?(await Ve(T.id),L(" Producto agregado desde escner."),setTimeout(()=>L(""),2500)):(L(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>L(""),2500))};function ct({open:W,onClose:Ie,onDetected:Je}){const tt=v.useRef(null),ft=v.useRef(null),[T,M]=v.useState(""),V=v.useRef("");return v.useEffect(()=>{if(!W)return;let q=!1;const ee=new b2,se=()=>{var Ke,ot,Fe;try{(Ke=ft.current)==null||Ke.stop()}catch{}ft.current=null;try{const Xe=(ot=tt.current)==null?void 0:ot.srcObject;try{(Fe=Xe==null?void 0:Xe.getTracks)==null||Fe.call(Xe).forEach(xe=>xe.stop())}catch{}}catch{}try{tt.current&&(tt.current.srcObject=null)}catch{}};return(async()=>{M("");try{if(!tt.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Fe=>Fe.stop())}catch{}const Ke=await ee.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},tt.current,ot=>{if(!q&&ot){const Fe=String(ot.getText()||"").trim().replace(/\s+/g,"");if(!Fe||Fe===V.current)return;V.current=Fe,se(),Je(Fe),Ie()}});ft.current=Ke}catch(Ke){const ot=String((Ke==null?void 0:Ke.message)||""),Fe=String((Ke==null?void 0:Ke.name)||"");ot.toLowerCase().includes("permission")||Fe==="NotAllowedError"?M("Permiso de cmara denegado."):Fe==="NotFoundError"||ot.toLowerCase().includes("notfound")?M("No se encontr cmara en este dispositivo."):ot.toLowerCase().includes("secure")||ot.toLowerCase().includes("https")?M("La cmara requiere HTTPS (sitio seguro)."):M(ot||"No se pudo iniciar el escner.")}})(),()=>{var Ke;q=!0;try{(Ke=ft.current)==null||Ke.stop()}catch{}ft.current=null}},[W,Ie,Je]),W?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ie,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:tt,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),T&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:T}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const lt=v.useMemo(()=>s.find(W=>W.id===x),[s,x]),be=v.useMemo(()=>E&&_?s.filter(W=>(W.vendorId??W.sellerId??"")===_):s,[s,E,_]),ue=(lt==null?void 0:lt.balance)||0,Le=h==="CREDITO"?ue+Math.max(0,Number(Be||0))-Math.max(0,Number(O||0)):0,ke=v.useMemo(()=>{if(h!=="CREDITO")return 0;const W=Math.max(0,Number(ue||0))+Math.max(0,Number(Be||0));return Math.floor(W*100)/100},[h,ue,Be]),Ae=W=>{const Ie=Math.max(0,Number(W||0));return Math.min(Ie,ke)},Ye=v.useMemo(()=>u.find(W=>W.id===_)||null,[u,_]),yt=(Ye==null?void 0:Ye.commissionPercent)||0,At=v.useMemo(()=>{const W=D.reduce((Ie,Je)=>Ie+Number(Je.margenVendedor||0),0);return Number(W.toFixed(2))},[D]);v.useEffect(()=>{(async()=>{const W=rr(Ct(Te,"customers_candies"),gn("createdAt","desc")),Ie=await Lt(W),Je=[];Ie.forEach(M=>{const V=M.data();Je.push({id:M.id,name:V.name??"",phone:V.phone??"+505 ",place:V.place??"",status:V.status??"ACTIVO",creditLimit:Number(V.creditLimit??0),balance:0,sellerId:V.sellerId??V.vendorId??"",vendorId:V.vendorId??V.sellerId??""})});for(const M of Je)try{const V=rr(Ct(Te,"ar_movements"),or("customerId","==",M.id)),q=await Lt(V);let ee=0;q.forEach(Oe=>ee+=Number(Oe.data().amount||0));const se=Number(M.initialDebt||0);M.balance=ee+se}catch{M.balance=0}o(Je);const tt=rr(Ct(Te,"products_candies"),gn("createdAt","desc")),ft=await Lt(tt),T=[];ft.forEach(M=>{const V=M.data();T.push({id:M.id,name:V.name??"(sin nombre)",sku:V.sku??"",unitsPerPackage:Number(V.unitsPerPackage??1),barcode:String(V.barcode||""),priceRivas:Number(V.unitPriceRivas??0),priceSanJorge:Number(V.unitPriceSanJorge??0),priceIsla:Number(V.unitPriceIsla??0),providerPrice:Number(V.providerPrice??0),providerPricePerUnit:Number(V.providerPricePerUnit??0)})}),c(T);try{const M=await Lt(Ct(Te,"sellers_candies")),V=[];M.forEach(q=>{const ee=q.data(),se=ee.branch||"Rivas",Oe=K9e(se);V.push({id:q.id,name:ee.name??"(sin nombre)",branch:Oe,branchLabel:se,commissionPercent:Number(ee.commissionPercent??0)})}),d(V)}catch(M){console.error("Error cargando vendedores:",M)}A({})})()},[]),v.useEffect(()=>{var Ie,Je;const W=e&&e.length?e:t;if(W&&((Ie=W.includes)!=null&&Ie.call(W,"vendedor_dulces"))&&r){S(r),F(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(W&&((Je=W.includes)!=null&&Je.call(W,"admin"))){F(!1);return}try{const tt=localStorage.getItem("pos_vendorId")||"",ft=localStorage.getItem("pos_role")||"";tt&&S(tt),ft.toUpperCase()==="VENDEDOR"&&F(!0)}catch{}},[t,r]);const he=async W=>{if(!W){A({});return}const Ie=rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",W)),Je=await Lt(Ie),tt={};Je.forEach(ft=>{const T=ft.data(),M=T.productId||"";if(!M)return;const V=Number(T.remainingUnits??T.remaining??T.totalUnits??0);V<=0||(tt[M]=(tt[M]||0)+V)}),A(tt),Z(ft=>{const T=[];for(const M of ft){const V=tt[M.productId]??0;V>0&&T.push({...M,availableUnits:V})}return T})};v.useEffect(()=>{if(!_){A({});return}const W=u.find(Ie=>Ie.id===_);W&&g(W.branch),he(_)},[_,u]),v.useEffect(()=>{Z(W=>W.map(Ie=>{const Je=l.find(ft=>ft.id===Ie.productId);if(!Je)return Ie;const tt=p==="RIVAS"?Je.priceRivas:p==="SAN_JORGE"?Je.priceSanJorge:Je.priceIsla;return{...Ie,pricePerPackage:Number(tt)||0}}))},[p,l]);async function re(W){const{productId:Ie,vendorId:Je,branch:tt}=W;if(!Ie||!Je)return 0;const ft=rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",Je),or("productId","==",Ie)),T=await Lt(ft);if(T.empty)return 0;const M=T.docs[0].data(),V=Number(M.unitPriceVendor??0);if(V>0)return V;const q=Number(tt==="RIVAS"?M.unitPriceRivas??0:tt==="SAN_JORGE"?M.unitPriceSanJorge??0:M.unitPriceIsla??0);return Number(q||0)}const oe=W=>{const Ie=Number(yt||0),Je=Number(W||0)*Ie/100;return Math.max(0,Number(Je.toFixed(2)))},Ve=async W=>{var se;if(!W)return;if(!_){L("Selecciona primero el vendedor para usar su inventario."),k("");return}if(D.some(Oe=>Oe.productId===W)){k("");return}const Ie=l.find(Oe=>Oe.id===W);if(!Ie){k("");return}const Je=await U$(W,_),tt=((se=u.find(Oe=>Oe.id===_))==null?void 0:se.branch)??p,ft=await re({productId:W,vendorId:_,branch:tt}),M=await(async Oe=>{const{productId:Ke,vendorId:ot}=Oe;if(!Ke||!ot)return 0;try{const Fe=rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",ot),or("productId","==",Ke)),Xe=await Lt(Fe);if(Xe.empty)return 0;const xe=Xe.docs[0].data();return Number(xe.providerPrice??0)}catch{return 0}})({productId:W,vendorId:_}),V=(()=>{const Oe=Number(Ie.providerPrice||0);if(Oe>0)return Oe;const Ke=Number(Ie.providerPricePerUnit||0);return Ke>0?Ke*Number(Ie.unitsPerPackage||1):0})(),q=Number(M||0)>0?Number(M||0):Number(V||0),ee={productId:W,productName:Ie.name||"",sku:Ie.sku||"",unitsPerPackage:Ie.unitsPerPackage||1,pricePerPackage:Number(ft)||0,availableUnits:Number(Je)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(q)||0,margenVendedor:0,uBruta:0};Z(Oe=>[...Oe,ee]),k("")},de=(W,Ie)=>{Z(Je=>Je.map(tt=>{if(tt.productId!==W)return tt;if(Ie==="")return{...tt,qtyPackages:0};const ft=Math.max(0,Math.floor(Number(Ie))),T=f[W]??tt.availableUnits??0,M=Math.max(1,Number(tt.unitsPerPackage||1)),V=Math.floor(T/M);let q=ft;ft>V&&(q=V,L(` Solo hay ${V} paquetes disponibles.`),setTimeout(()=>L(""),2500));const ee=Number(tt.pricePerPackage||0)*q,se=Number(tt.providerPricePerPackage||0)*q,Oe=ee-se,Ke=oe(Oe);return{...tt,qtyPackages:q,margenVendedor:Ke,uBruta:Oe}}))},Se=(W,Ie)=>{Z(Je=>Je.map(tt=>{if(tt.productId!==W)return tt;if(Ie==="")return{...tt,discount:0};const ft=Math.max(0,Math.floor(Number(Ie))),T=tt.qtyPackages||0,M=Number(tt.pricePerPackage||0)*T,V=Number(tt.providerPricePerPackage||0)*T,q=M-V,ee=oe(q);return{...tt,discount:ft,margenVendedor:ee,uBruta:q}}))},dt=W=>Z(Ie=>Ie.filter(Je=>Je.productId!==W)),xt=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(D.length===0)return"Agrega al menos un producto.";const W=D.filter(Ie=>(Ie.qtyPackages||0)>0);if(W.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Be>0))return"El total debe ser mayor a cero.";if(h==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!x)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>ke)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((lt==null?void 0:lt.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Ie of W){const Je=Ie.unitsPerPackage||1,tt=(Ie.qtyPackages||0)*Je,ft=await U$(Ie.productId,_),T=Math.floor(ft/Je);if(tt>ft)return`Inventario insuficiente en el pedido del vendedor para "${Ie.productName}". Disponible: ${T} paquetes.`;const M=(Number(Ie.pricePerPackage)||0)*(Ie.qtyPackages||0),V=Number(Ie.discount)||0;if(!Number.isInteger(V)||V<0)return`El descuento en "${Ie.productName}" debe ser entero y  0.`;if(V>M)return`El descuento en "${Ie.productName}" no puede exceder C$ ${M.toFixed(2)}.`}return null},ht=async W=>{W.preventDefault(),L("");const Ie=await xt();if(Ie){L(" "+Ie);return}try{J(!0);const Je=D.filter(V=>(V.qtyPackages||0)>0).map(V=>{const q=V.unitsPerPackage||1,ee=V.qtyPackages||0,se=ee*q,Oe=(Number(V.pricePerPackage)||0)*(ee||0),Ke=Math.max(0,Math.floor(Number(V.discount)||0)),ot=Math.max(0,Oe-Ke),Fe=Number(V.providerPricePerPackage||0),Xe=Fe*ee,xe=Oe-Xe,Ge=oe(xe);return{productId:V.productId,productName:V.productName,sku:V.sku||"",qty:se,packages:ee,unitsPerPackage:q,branch:p,unitPricePackage:Number(V.pricePerPackage)||0,discount:Ke,total:Math.floor(ot*100)/100,providerPricePerPackage:Fe,margenVendedor:Ge,uBruta:xe}}),tt={type:h,branch:p,date:j,createdAt:ur.now(),itemsTotal:Number(Be)||0,total:Number(Be)||0,quantity:Number(je)||0,packagesTotal:Number(ae)||0,items:Je,vendorId:_},ft=u.find(V=>V.id===_);ft&&(tt.vendorName=ft.name,tt.vendorBranch=ft.branch,tt.vendorBranchLabel=ft.branchLabel,tt.vendorCommissionPercent=ft.commissionPercent||0,tt.vendorCommissionAmount=At||0),h==="CONTADO"?tt.customerName=b.trim():(tt.customerId=x,tt.downPayment=Number(O)||0);const T=await Tn(Ct(Te,"sales_candies"),tt);if(h==="CONTADO"){const V=(b||"").trim();if(V)try{await Tn(Ct(Te,"cash_customers"),{name:V,date:j,branch:p,vendorId:_,createdAt:ur.now()})}catch(q){console.warn("No se pudo guardar cash_customer:",q)}}if(h==="CREDITO"&&x){const V={customerId:x,date:j,createdAt:ur.now(),ref:{saleId:T.id}};await Tn(Ct(Te,"ar_movements"),{...V,type:"CARGO",amount:Number(Be)||0}),Number(O)>0&&await Tn(Ct(Te,"ar_movements"),{...V,type:"ABONO",amount:-Number(O)})}const M={};for(const V of Je)if(V.qty>0){const{allocations:q}=await z9e({productId:V.productId,vendorId:_,quantityUnits:V.qty,saleDate:j,saleId:T.id});M[V.productId]={productId:V.productId,vendorId:_,allocations:q}}await xn(Wt(Te,"sales_candies",T.id),{allocationsByItem:M});try{const V=h==="CONTADO"?b.trim()||"Cliente Mostrador":(lt==null?void 0:lt.name)||"Cliente crdito";q9e({saleId:T.id,date:j,customerName:V,branch:p,items:Je.map(q=>({productName:q.productName,qty:q.packages,unitPrice:q.unitPricePackage,total:q.total})),total:Number(Be)||0,vendorName:ft==null?void 0:ft.name,vendorCommissionPercent:(ft==null?void 0:ft.commissionPercent)||0,vendorCommissionAmount:At})}catch(V){console.error("Error generando voucher PDF:",V)}m("CONTADO"),y(""),w(""),I(Q$()),Z([]),G(0),h==="CREDITO"&&x&&o(V=>V.map(q=>q.id===x?{...q,balance:(q.balance||0)+(Number(Be)||0)-(Number(O)||0)}:q)),L(" Venta de dulces registrada"),_?await he(_):A({})}catch(Je){console.error(Je),L(" Error al guardar la venta de dulces")}finally{J(!1)}},bt=v.useMemo(()=>l.filter(W=>{const Ie=f[W.id]||0,Je=Math.max(1,Number(W.unitsPerPackage||1));return Math.floor(Ie/Je)>0}).sort((W,Ie)=>(W.name||"").localeCompare(Ie.name||"")),[l,f]),[et,Ne]=v.useState(""),mt=v.useMemo(()=>{const W=String(et||"").trim().toLowerCase();return W?bt.filter(Ie=>`${Ie.name||""} ${Ie.sku||""}`.toLowerCase().includes(W)||String(Ie.id||"").includes(W)):bt},[et,bt]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:ht,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:W=>m(W.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:W=>w(W.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:x,onChange:W=>y(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),be.map(W=>i.jsxs("option",{value:W.status==="ACTIVO"?W.id:"",disabled:W.status==="BLOQUEADO",children:[W.name," | ",W.phone," | Saldo: ",xc(W.balance||0)]},W.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:xc(ue)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:ke,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:W=>{const Ie=Ae(W.target.value);G(Ie)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:xc(Le)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:W=>I(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:W=>{S(W.target.value),Z([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  ",W.branchLabel,"  ",W.commissionPercent.toFixed(2),"%"," comisin"]},W.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:et,onChange:W=>Ne(W.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>vt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async W=>{const Ie=W.target.value;k(Ie),await Ve(Ie)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),mt.map(W=>{const Ie=D.some(T=>T.productId===W.id),Je=f[W.id]||0,tt=Math.max(1,Number(W.unitsPerPackage||1)),ft=Math.floor(Je/tt);return ft<=0?null:i.jsxs("option",{value:Ie?"":W.id,disabled:Ie,children:[W.name," ",W.sku?` ${W.sku}`:""," (disp: ",ft," ","paq.)",Ie?" ":""]},W.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),D.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):D.map(W=>{const Ie=f[W.productId]??W.availableUnits??0,Je=W.unitsPerPackage?Math.floor(Ie/W.unitsPerPackage):0,tt=Math.max(0,Je-(W.qtyPackages||0)),ft=(Number(W.pricePerPackage)||0)*(W.qtyPackages||0),T=Math.max(0,ft-(Number(W.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[W.productName,W.sku?`  ${W.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:xc(W.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[tt," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(W.qtyPackages)||W.qtyPackages===0?"":W.qtyPackages,onChange:M=>de(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(W.discount)||W.discount===0?"":W.discount,onChange:M=>Se(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1 text-right",children:xc(T)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>dt(W.productId),title:"Quitar producto",children:""})})]},W.productId)})]})}),D.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:ae})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:xc(Be)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[xc(At)," ",yt?`(${yt.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>me(W=>!W),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",i.jsx("span",{className:"text-lg",children:fe?"":"+"})]}),fe&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:W=>I(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:W=>m(W.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:W=>w(W.target.value)})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:W=>y(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),be.map(W=>i.jsxs("option",{value:W.status==="ACTIVO"?W.id:"",disabled:W.status==="BLOQUEADO",children:[W.name," | Saldo: ",xc(W.balance||0)]},W.id))]}),i.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:xc(ue)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:xc(Le)})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:ke,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:W=>{const Ie=Ae(W.target.value);G(Ie)},placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:W=>{S(W.target.value),Z([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  "," ",W.commissionPercent.toFixed(2),"%"]},W.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>ye(W=>!W),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",i.jsx("span",{className:"text-lg",children:pe?"":"+"})]}),pe&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:et,onChange:W=>Ne(W.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>vt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async W=>{const Ie=W.target.value;k(Ie),await Ve(Ie)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),mt.map(W=>{const Ie=D.some(T=>T.productId===W.id),Je=f[W.id]||0,tt=Math.max(1,Number(W.unitsPerPackage||1)),ft=Math.floor(Je/tt);return ft<=0?null:i.jsxs("option",{value:Ie?"":W.id,disabled:Ie,children:[W.name," ",W.sku?` ${W.sku}`:""," (disp:"," ",ft," paq.)",Ie?" ":""]},W.id)})]})]}),D.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):i.jsx("div",{className:"space-y-2",children:D.map(W=>{const Ie=f[W.productId]??W.availableUnits??0,Je=W.unitsPerPackage?Math.floor(Ie/W.unitsPerPackage):0,tt=Math.max(0,Je-(W.qtyPackages||0)),ft=(Number(W.pricePerPackage)||0)*(W.qtyPackages||0),T=Math.max(0,ft-(Number(W.discount)||0));return i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[i.jsxs("div",{className:"font-semibold leading-tight",children:[W.productName,W.sku?`  ${W.sku}`:""]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),i.jsx("div",{className:"font-bold",children:xc(W.pricePerPackage)})]}),i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),i.jsxs("div",{className:"font-bold",children:[tt," paq."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(W.qtyPackages)||W.qtyPackages===0?"":W.qtyPackages,onChange:M=>de(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(W.discount)||W.discount===0?"":W.discount,onChange:M=>Se(W.productId,M.target.value),inputMode:"numeric",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",xc(T)]}),i.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",xc(W.margenVendedor||0)]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>dt(W.productId),children:"Quitar"})]})]},W.productId)})}),D.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:ae})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsx("div",{className:"font-semibold",children:xc(Be)})]})]})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})]})]}),z&&i.jsx("p",{className:"mt-2 text-sm",children:z}),R&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:ne,onChange:W=>ge(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:U,onChange:W=>Ue(V$(W.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:W=>te(W.target.value),children:[i.jsx("option",{value:"",children:""}),$9e.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),!E&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_t,onChange:W=>He(W.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(W=>(W.status??"ACTIVO")==="ACTIVO").map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  ",W.branchLabel]},W.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ee,onChange:W=>ce(W.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{gt(),H(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Je;const W=E?_||r:_t;if(!W){L("Selecciona el vendedor para asociar este cliente.");return}if(L(""),!ne.trim()){L("Ingresa el nombre del nuevo cliente.");return}const Ie=V$(U);try{const tt=await Tn(Ct(Te,"customers_candies"),{name:ne.trim(),phone:Ie,place:ie||"",notes:Ee||"",status:we,creditLimit:Number(We||0),createdAt:ur.now(),sellerId:W,vendorId:W,vendorName:((Je=u.find(T=>T.id===W))==null?void 0:Je.name)||""}),ft={id:tt.id,name:ne.trim(),phone:Ie,place:ie||"",status:we,creditLimit:Number(We||0),balance:0,sellerId:W};o(T=>[ft,...T]),y(tt.id),gt(),H(!1),L(" Cliente creado")}catch(tt){console.error(tt),L(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),i.jsx(ct,{open:ut,onClose:()=>vt(!1),onDetected:Pe}),Y&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const H$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],e_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function X9e(){const[t,e]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Cr(new Date,"yyyy-MM-dd")),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[A,h]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState(""),[F,P]=v.useState(""),[k,D]=v.useState(""),[Z,fe]=v.useState(0),[me,pe]=v.useState("PENDIENTE"),[ye,ae]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=rr(Ct(Te,"expenses_candies"),gn("date","desc")),H=await Lt(R),ne=[];H.forEach(ge=>{const U=ge.data();ne.push({id:ge.id,date:U.date||Cr(new Date,"yyyy-MM-dd"),category:U.category||"",description:U.description||"",amount:Number(U.amount||0),status:U.status||"PENDIENTE",notes:U.notes||"",createdAt:U.createdAt??ur.now()})}),x(ne)}catch(R){console.error(R),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const je=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Be=v.useMemo(()=>{const R=je.reduce((ge,U)=>ge+(U.amount||0),0),H=je.filter(ge=>ge.status==="PAGADO").reduce((ge,U)=>ge+(U.amount||0),0),ne=R-H;return{total:R,pagado:H,pendiente:ne}},[je]),O=()=>{s(Cr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async R=>{if(R.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Tn(Ct(Te,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()});x(ne=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:ur.now()},...ne]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},z=R=>{_(R.id),E(R.date),P(R.category||""),D(R.description||""),fe(Number(R.amount||0)),pe(R.status||"PENDIENTE"),ae(R.notes||"")},L=()=>{_(null),E(""),P(""),D(""),fe(0),pe("PENDIENTE"),ae("")},Y=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!k.trim()){j("Ingresa una descripcin.");return}if(!Z||Z<=0){j("Ingresa un monto vlido.");return}try{await xn(Wt(Te,"expenses_candies",I),{date:S,category:F,description:k.trim(),amount:Number(Z.toFixed(2)),status:me,notes:ye||""}),x(R=>R.map(H=>H.id===I?{...H,date:S,category:F,description:k.trim(),amount:Number(Z.toFixed(2)),status:me,notes:ye||""}:H)),L(),j(" Gasto actualizado")}catch(R){console.error(R),j(" Error al actualizar gasto")}}},J=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Bn(Wt(Te,"expenses_candies",R.id)),x(ne=>ne.filter(ge=>ge.id!==R.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",e_(Be.total)]}),i.jsxs("div",{children:["Pagado: ",e_(Be.pagado)]}),i.jsxs("div",{children:["Pendiente: ",e_(Be.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:R=>l(R.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),H$.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>f(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):je.slice().sort((R,H)=>R.date.localeCompare(H.date)).map(R=>{const H=I===R.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ne=>E(ne.target.value)}):R.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:ne=>P(ne.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),H$.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]}):R.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:k,onChange:ne=>D(ne.target.value)}):i.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z)?"":Z,onChange:ne=>fe(Math.max(0,Number(ne.target.value||0)))}):e_(R.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:ne=>pe(ne.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ye,onChange:ne=>ae(ne.target.value),maxLength:500}):i.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:L,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(R),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const vc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Y9e(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Cr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function J9e(t,e){var s,o,l;const r=Y9e(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((o=t.item)==null?void 0:o.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function Z9e(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}function eQe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=ln(n,"vendedor_dulces"),s=ln(n,"admin"),o=s?8:7,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,A]=v.useState(null),[h,m]=v.useState([]),p=async we=>{c(!0),d(!0),A(we),m([]);try{const Re=await js(Wt(Te,"sales_candies",we)),We=Re.exists()?Re.data():null;if(!We){m([]);return}const _t=(Array.isArray(We==null?void 0:We.items)?We.items:We!=null&&We.item?[We.item]:[]).map(He=>({productName:String(He.productName||""),qty:Number(He.packages??He.qty??He.quantity??0),unitPrice:Number(He.unitPricePackage??He.unitPrice??0),discount:Number(He.discount||0),total:Number(He.total??He.lineFinal??0)}));m(_t)}catch(Re){console.error(Re)}finally{d(!1)}},[g,x]=v.useState(Cr(new Date,"yyyy-MM-01")),[y,b]=v.useState(Cr(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState([]),[F,P]=v.useState(!0),[k,D]=v.useState(""),[Z,fe]=v.useState(""),[me,pe]=v.useState(""),[ye,ae]=v.useState(null),je=15,[Be,O]=v.useState(1),G=v.useMemo(()=>{const we={};return w.forEach(Re=>we[Re.id]=Re.name),we},[w]),z=v.useMemo(()=>{const we={};return S.forEach(Re=>{we[Re.id]=Re}),we},[S]),L=we=>{const Re=Number(we.vendorCommissionAmount||0);if(Re>0)return Re;if(!we.vendorId)return 0;const We=z[we.vendorId];if(!We||!We.commissionPercent)return 0;const pt=(Number(we.total)||0)*(Number(We.commissionPercent)||0)/100;return Number(pt.toFixed(2))};v.useEffect(()=>{(async()=>{P(!0),D("");try{const we=await Lt(Ct(Te,"customers_candies")),Re=[];we.forEach(gt=>Re.push({id:gt.id,name:gt.data().name||""})),j(Re);const We=await Lt(Ct(Te,"sellers_candies")),pt=[];We.forEach(gt=>{const ut=gt.data();pt.push({id:gt.id,name:ut.name||"",commissionPercent:Number(ut.commissionPercent||0)})}),E(pt);const _t=await Lt(rr(Ct(Te,"sales_candies"),gn("createdAt","desc"))),He=[];_t.forEach(gt=>{const ut=J9e(gt.data(),gt.id);ut&&ut.date>=g&&ut.date<=y&&He.push(ut)}),_(He.sort((gt,ut)=>ut.date.localeCompare(gt.date))),O(1)}catch(we){console.error(we),D(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const Y=v.useMemo(()=>I.filter(we=>!(a&&(!e||!we.vendorId||we.vendorId!==e)||Z&&we.customerId!==Z||me&&we.type!==me)),[I,Z,me,a,e]),J=v.useMemo(()=>{let we=0,Re=0,We=0,pt=0;for(const _t of Y)_t.type==="CONTADO"?(we+=_t.quantity,We+=_t.total):(Re+=_t.quantity,pt+=_t.total);return{packsCash:we,packsCredito:Re,montoCash:We,montoCredito:pt}},[Y]),R=Math.max(1,Math.ceil(Y.length/je)),H=v.useMemo(()=>{const we=(Be-1)*je;return Y.slice(we,we+je)},[Y,Be]),ne=v.useMemo(()=>f&&I.find(we=>we.id===f)||null,[f,I]),ge=async we=>{if(s&&(ae(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{P(!0),await R2(we.id),await Z9e(we.id),_(Re=>Re.filter(We=>We.id!==we.id)),D(" Venta eliminada")}catch(Re){console.error(Re),D(" No se pudo eliminar la venta.")}finally{P(!1)}},U=()=>{const we=`Ventas del dia  ${g} a ${y}`,Re=He=>(He||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),We=Y.map(He=>{const gt=He.customerName||(He.customerId?G[He.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${He.date}</td>
          <td>${Re(gt)}</td>
          <td>${He.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${He.quantity}</td>
          <td style="text-align:right">${vc(He.total)}</td>
        </tr>`}).join(""),pt=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Re(we)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Re(we)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${J.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${J.packsCredito}</div>
        <div><b>Monto Cash:</b> ${vc(J.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${vc(J.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${We||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,_t=window.open("","_blank");_t&&(_t.document.open(),_t.document.write(pt),_t.document.close())},Ue=()=>O(1),ie=()=>O(we=>Math.max(1,we-1)),te=()=>O(we=>Math.min(R,we+1)),Ee=()=>O(R),ce=()=>{const we=[];if(R<=7)for(let We=1;We<=R;We++)we.push(We);else{const We=Math.max(1,Be-2),pt=Math.min(R,Be+2);we.push(1),We>2&&we.push(-1);for(let _t=We;_t<=pt;_t++)_t!==1&&_t!==R&&we.push(_t);pt<R-1&&we.push(-2),we.push(R)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ue,disabled:Be===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Be===1,children:" Anterior"}),we.map((We,pt)=>typeof We=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${We===Be?"bg-blue-600 text-white":""}`,onClick:()=>O(We),children:We},pt):i.jsx("span",{className:"px-2",children:""},pt)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:Be===R,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ee,disabled:Be===R,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Be," de ",R,"  ",Y.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:we=>{x(we.target.value),O(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:we=>{b(we.target.value),O(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Z,onChange:we=>{fe(we.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(we=>i.jsx("option",{value:we.id,children:we.name},we.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:me,onChange:we=>{pe(we.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:U,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:J.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:J.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:vc(J.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:vc(J.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):H.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):H.map(we=>{const Re=we.customerName||(we.customerId?G[we.customerId]:"")||"Nombre cliente",We=L(we);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Re}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:we.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${we.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:we.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:pt=>{pt.preventDefault(),p(we.id)},title:"Ver detalle",children:we.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",vc(we.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Re})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:we.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:we.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(we.id),title:"Ver detalle",children:we.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:vc(we.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:We>0?vc(We):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:we.vendorName||""})]}),s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ae(pt=>pt===we.id?null:we.id),children:" Acciones"}),ye===we.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ge(we),children:"Eliminar"})]})]})})]})},we.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:ce()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):H.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):H.map(we=>{const Re=we.customerName||(we.customerId?G[we.customerId]:"")||"Nombre cliente",We=L(we);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:we.date}),i.jsx("td",{className:"p-2 border",children:Re}),i.jsx("td",{className:"p-2 border",children:we.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(we.id),children:we.quantity})}),i.jsx("td",{className:"p-2 border",children:vc(we.total)}),i.jsx("td",{className:"p-2 border",children:We>0?vc(We):""}),i.jsx("td",{className:"p-2 border",children:we.vendorName||""}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ae(pt=>pt===we.id?null:we.id),title:"Acciones",children:""}),ye===we.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ge(we),children:"Eliminar"})})]})]},we.id)})})]}),ce()]}),k&&i.jsx("p",{className:"mt-2 text-sm",children:k}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),ne&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:L(ne)>0?vc(L(ne)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((we,Re)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:we.productName}),i.jsx("td",{className:"p-2 border text-right",children:we.qty}),i.jsx("td",{className:"p-2 border text-right",children:vc(we.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:vc(we.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:vc(we.total)})]},Re))})]})})]})})]})}const en=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ky(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Cr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function tQe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0),uBruta:Number((t==null?void 0:t.uBruta)??(t==null?void 0:t.grossProfit)??0)}]:[]}function rQe(t,e){const r=Ky(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=tQe(t);let o=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return o=Number(o||0),{id:e,date:r,type:t.type||"CONTADO",total:o,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}function nQe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}async function aQe(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}function sQe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[A,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState([]),[S,E]=v.useState({}),[F,P]=v.useState({}),[k,D]=v.useState(!1),[Z,fe]=v.useState(null),[me,pe]=v.useState([]),[ye,ae]=v.useState(!1),[je,Be]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[O,G]=v.useState(!1),[z,L]=v.useState(""),[Y,J]=v.useState([]),[R,H]=v.useState(!1),[ne,ge]=v.useState("CASH"),[U,Ue]=v.useState(1),ie=10,[te,Ee]=v.useState(!1),[ce,we]=v.useState(null);v.useEffect(()=>{(async()=>{try{const Ae=await Lt(Ct(Te,"sellers_candies")),Ye=[];Ae.forEach(yt=>{const At=yt.data();Ye.push({id:yt.id,name:At.name||"",commissionPercent:Number(At.commissionPercent||0)})}),_(Ye)}catch(Ae){console.error("Error cargando sellers_candies",Ae)}})()},[]);const Re=v.useMemo(()=>{const Ae={};return I.forEach(Ye=>{Ae[Ye.id]=Ye}),Ae},[I]);v.useEffect(()=>{(async()=>{b(!0),j("");try{const Ae=await Lt(Ct(Te,"sales_candies")),Ye=[],yt=[];Ae.forEach(Ne=>{const mt=Ne.data(),W=rQe(mt,Ne.id);W&&(W.date<=a&&Ye.push(W),W.date>=r&&W.date<=a&&yt.push(W))}),u(Ye),l(yt);const At=await Lt(Ct(Te,"inventory_candies")),he=[];At.forEach(Ne=>{const mt=Ne.data(),W=Ky(mt);if(!W||W>a)return;const Ie=Math.max(1,Math.floor(Number(mt.unitsPerPackage||1))),Je=Number(mt.totalUnits??mt.quantity??0),tt=Number(mt.packages??0),ft=Number(mt.remaining??0),T=Number(mt.remainingPackages??0),M=tt>0?tt:Je>0?Math.floor(Je/Ie):0,V=T>0?T:ft>0?Math.floor(ft/Ie):0;he.push({id:Ne.id,productId:mt.productId,productName:mt.productName||"",date:W,quantity:Number(M||0),remaining:Number(V||0),purchasePrice:Number(mt.providerPrice||mt.purchasePrice||0),unitsPerPackage:Ie})}),f(he);const re=await Lt(Ct(Te,"expenses_candies")),oe=[];re.forEach(Ne=>{const mt=Ne.data(),W=Ky(mt);W&&W>=r&&W<=a&&oe.push({id:Ne.id,date:W,category:mt.category||"",description:mt.description||"",amount:Number(mt.amount||0),status:mt.status||""})}),h(oe);const Ve=await Lt(Ct(Te,"ar_movements")),de=[],Se={};Ve.forEach(Ne=>{const mt=Ne.data(),W=Ky(mt);if(!W)return;const Ie=mt.customerId,Je=Number(mt.amount||0);Ie&&(Se[Ie]=(Se[Ie]||0)+Je),mt.type==="ABONO"&&W>=r&&W<=a&&de.push({id:Ne.id,customerId:Ie,type:"ABONO",amount:Je,date:W})}),p(de);const dt=await Lt(Ct(Te,"customers_candies")),xt=[];dt.forEach(Ne=>{const mt=Ne.data();xt.push({id:Ne.id,name:mt.name||"",balance:Se[Ne.id]||0})}),x(xt);const ht=await Lt(Ct(Te,"inventory_candies_sellers")),bt={},et={};ht.forEach(Ne=>{const mt=Ne.data(),W=Ky(mt);if(!W||W<r||W>a)return;const Ie=mt.sellerId||mt.vendorId||"NO_VENDOR",Je=mt.productName||"",tt=mt.sku||"",ft=Math.max(1,Math.floor(Number(mt.unitsPerPackage||1))),T=Number(mt.totalUnits??0),M=Number(mt.packages??0),V=Number(mt.remainingUnits??mt.remaining??0),q=Number(mt.remainingPackages??0),ee=M>0?M:T>0?Math.floor(T/ft):0,se=q>0?q:V>0?Math.floor(V/ft):0,Oe=Number(mt.totalVendor??0),Ke=Number(mt.uVendor??0),ot=Number(mt.subtotal??0),Fe=Number(mt.uBruta??0),Xe=ee,xe=Xe>0?Oe/Xe:0,Ge=Xe>0?Ke/Xe:0,qe=Xe>0?ot/Xe:0,it=Xe>0?Fe>0?Fe/Xe:xe-qe:0;if(bt[Ie]||(bt[Ie]={associated:[],remaining:[]}),ee>0){const Et=ee,Pt=Et*xe,pr=Et*qe,Ot=Pt,Dt=Et*Ge,fr=Et*it;bt[Ie].associated.push({saleId:Ne.id,date:W,productId:mt.productId||mt.id||"",productName:Je,sku:tt,qty:Et,unitPrice:xe,costTotal:pr,lineTotal:Pt,discount:0,lineFinal:Ot,grossProfit:fr,vendorCommissionAmount:Dt,type:"ASSOCIATED"}),et[Ie]=(et[Ie]||0)+Et}if(se>0){const Et=se,Pt=Et*xe,pr=Et*qe,Ot=Pt,Dt=Et*Ge,fr=Et*it;bt[Ie].remaining.push({saleId:Ne.id,date:W,productId:mt.productId||mt.id||"",productName:Je,sku:tt,qty:Et,unitPrice:xe,costTotal:pr,lineTotal:Pt,discount:0,lineFinal:Ot,grossProfit:fr,vendorCommissionAmount:Dt,type:"REMAINING"})}}),E(bt),P(et)}catch(Ae){console.error(Ae),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const We=v.useCallback((Ae,Ye)=>{const yt=Number(Ye.vendorCommissionAmount||0)||0;if(yt>0)return yt;const At=Number(Ae.vendorCommissionAmount||0)||0;if(At<=0)return 0;const he=Number(Ye.qty||0),re=Number(Ye.unitPrice||0),oe=he*re,Ve=Math.max(0,Number(Ye.discount||0)),de=Math.max(0,oe-Ve);return!de||!Ae.total?0:At*de/Ae.total},[]),pt=v.useMemo(()=>{try{return nQe(d,c,r,a)}catch(Ae){return console.error(Ae),0}},[d,c,r,a]),_t=v.useMemo(()=>{const Ae=o.reduce((ht,bt)=>ht+(bt.total||0),0),Ye=A.reduce((ht,bt)=>ht+(bt.amount||0),0),yt=Ae-pt,At=yt-Ye;let he=0;for(const ht of o)for(const bt of ht.items||[]){const et=Number(bt.uBruta||0);Number.isFinite(et)&&(he+=et)}const re=m.reduce((ht,bt)=>ht+Math.abs(bt.amount||0),0),oe=g.filter(ht=>(ht.balance||0)>0),Ve=oe.reduce((ht,bt)=>ht+(bt.balance||0),0);let de=0,Se=0,dt=0,xt=0;for(const ht of o){const bt=(ht.items||[]).reduce((Ne,mt)=>Ne+(Number(mt.qty)||0),0),et=(ht.items||[]).reduce((Ne,mt)=>Ne+We(ht,mt),0);ht.type==="CONTADO"?(de+=bt,dt+=et):(Se+=bt,xt+=et)}return{ventasTotales:Ae,costoMercaderia:pt,gastosPeriodo:Ye,gananciaAntes:yt,utilidadBrutaOrdenes:he,gananciaDespues:At,abonosRecibidos:re,saldosPendientes:Ve,clientesConSaldo:oe.length,paquetesCash:de,paquetesCredito:Se,comisionCash:dt,comisionCredito:xt}},[o,A,m,g,pt,We,S]),He=v.useMemo(()=>{const Ae={},Ye={};for(const yt of o)if(!(yt.type!=="CREDITO"||!yt.customerId))for(const At of yt.items||[]){const he=Number(At.qty||0),re=Number(At.unitPrice||0),oe=he*re,Ve=Math.max(0,Number(At.discount||0)),de=Math.max(0,oe-Ve);Ae[yt.customerId]=(Ae[yt.customerId]||0)+he,Ye[yt.customerId]=(Ye[yt.customerId]||0)+de}return g.filter(yt=>(yt.balance||0)>0).map(yt=>({customerId:yt.id,name:yt.name,paquetesAsociados:Ae[yt.id]||0,saldoTotal:Ye[yt.id]||0,saldoPendiente:yt.balance||0})).sort((yt,At)=>At.saldoPendiente-yt.saldoPendiente)},[g,o]),gt=v.useMemo(()=>{const Ae={};return g.forEach(Ye=>Ae[Ye.id]=Ye.name),Ae},[g]),ut=v.useMemo(()=>[...o].sort((Ae,Ye)=>Ye.date.localeCompare(Ae.date)).map(Ae=>{var he;const Ye=(Ae.items||[]).reduce((re,oe)=>re+(Number(oe.qty)||0),0);let yt="Cash";Ae.type==="CREDITO"&&Ae.customerId?yt=gt[Ae.customerId]||"":Ae.type==="CONTADO"&&(yt=((he=Ae.customerName)==null?void 0:he.trim())||"Cash");const At=Ye>0?Ae.total/Ye:0;return{id:Ae.id,date:Ae.date,type:Ae.type==="CREDITO"?"Crdito":"Cash",customer:yt,paquetes:Ye,total:Number(Ae.total||0),avgPrice:At}}),[o,gt]),vt=v.useMemo(()=>{var Ye,yt;const Ae=new Map;for(const At of o){const he=At.vendorId||"NO_VENDOR",re=At.vendorName||((Ye=Re[he])==null?void 0:Ye.name)||"Sin vendedor";Ae.has(he)||Ae.set(he,{vendorId:he,vendorName:re,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const oe=Ae.get(he);for(const Ve of At.items||[]){const de=Number(Ve.qty||0),Se=Number(Ve.unitPrice||0),dt=de*Se,xt=Math.max(0,Number(Ve.discount||0)),ht=Math.max(0,dt-xt),bt=We(At,Ve);At.type==="CONTADO"?(oe.paquetesVendidos+=de,oe.totalVendido+=ht,oe.comisionCash+=bt):(oe.paquetesFiados+=de,oe.totalFiado+=ht,oe.comisionCredito+=bt)}}for(const[At,he]of Object.entries(F)){const re=Ae.get(At),oe=(re==null?void 0:re.vendorName)||((yt=Re[At])==null?void 0:yt.name)||"Sin vendedor",Ve=re||{vendorId:At,vendorName:oe,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};Ve.paquetesAsociados=he,Ve.paquetesRestantes=Math.max(he-Ve.paquetesVendidos-Ve.paquetesFiados,0),Ae.set(At,Ve)}return Array.from(Ae.values()).sort((At,he)=>he.totalVendido+he.totalFiado-(At.totalVendido+At.totalFiado))},[o,F,Re,We]),Pe=async Ae=>{D(!0),fe({id:Ae.customerId,name:Ae.name}),pe([]),ae(!0),Be({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Ye=[];let yt=0,At=0,he=0;for(const de of o)if(!(de.type!=="CREDITO"||de.customerId!==Ae.customerId))for(const Se of de.items||[]){const dt=Number(Se.qty||0),xt=Number(Se.unitPrice||0),ht=dt*xt,bt=Math.max(0,Number(Se.discount||0)),et=Math.max(0,ht-bt);Ye.push({saleId:de.id,date:de.date,productName:Se.productName,sku:Se.sku||"",qty:dt,unitPrice:xt,lineTotal:ht,discount:bt,lineFinal:et}),yt+=ht,At+=bt,he+=et}let re=0;for(const de of m)de.customerId===Ae.customerId&&(re+=Math.abs(de.amount||0));const oe=g.find(de=>de.id===Ae.customerId),Ve=(oe==null?void 0:oe.balance)||0;pe(Ye),Be({totalBruto:yt,totalDescuento:At,totalFiado:he,saldoActual:Ve,abonadoPeriodo:re})}catch(Ye){console.error(Ye),j(" No se pudo cargar el detalle del cliente.")}finally{ae(!1)}},ct=(Ae,Ye,yt)=>{G(!0),ge(yt),Ue(1);let At="";yt==="ASSOCIATED"?At=`Paquetes asociados  ${Ye}`:yt==="REMAINING"?At=`Paquetes restantes  ${Ye}`:yt==="CASH"?At=`Paquetes vendidos (Cash)  ${Ye}`:At=`Paquetes fiados (Crdito)  ${Ye}`,L(At),J([]),H(!0);try{if(yt==="ASSOCIATED"||yt==="REMAINING"){const re=S[Ae],oe=yt==="ASSOCIATED"?(re==null?void 0:re.associated)||[]:(re==null?void 0:re.remaining)||[];J([...oe].sort((Ve,de)=>(de.qty||0)-(Ve.qty||0))),H(!1);return}const he=[];for(const re of o)if(((re.vendorId||"NO_VENDOR")===Ae||!re.vendorId&&Ae==="NO_VENDOR")&&!(yt==="CASH"&&re.type!=="CONTADO")&&!(yt==="CREDIT"&&re.type!=="CREDITO"))for(const Ve of re.items||[]){const de=Number(Ve.qty||0),Se=Number(Ve.unitPrice||0),dt=de*Se,xt=Math.max(0,Number(Ve.discount||0)),ht=Math.max(0,dt-xt),bt=We(re,Ve);he.push({saleId:re.id,date:re.date,productName:Ve.productName,sku:Ve.sku||"",qty:de,unitPrice:Se,lineTotal:dt,discount:xt,lineFinal:ht,vendorCommissionAmount:bt,type:yt})}J(he.sort((re,oe)=>re.date.localeCompare(oe.date)))}catch(he){console.error(he),j(" No se pudo cargar el detalle del vendedor.")}finally{H(!1)}},lt=v.useMemo(()=>ne!=="ASSOCIATED"&&ne!=="REMAINING"?1:Math.max(1,Math.ceil(Y.length/ie)),[ne,Y.length]),be=v.useMemo(()=>{if(ne!=="ASSOCIATED"&&ne!=="REMAINING")return Y;const Ae=(U-1)*ie;return Y.slice(Ae,Ae+ie)},[ne,U,Y]),ue=ne==="ASSOCIATED"||ne==="REMAINING"?10:8;v.useEffect(()=>{ne!=="ASSOCIATED"&&ne!=="REMAINING"||U>lt&&Ue(lt)},[ne,U,lt]);const Le=Ae=>{const Ye=o.find(yt=>yt.id===Ae)||null;we(Ye),Ee(!0)},ke=async Ae=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await R2(Ae),await aQe(Ae),l(Ye=>Ye.filter(yt=>yt.id!==Ae)),u(Ye=>Ye.filter(yt=>yt.id!==Ae)),Ee(!1),we(null)}catch(Ye){console.error(Ye),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(dc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Ae=>n(Ae.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:Ae=>s(Ae.target.value)})]})]}),i.jsx("div",{className:"md:hidden mb-4",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",open:!0,children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"KPIs"}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(_t.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(_t.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.comisionCredito)})]})]})})]})}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(_t.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:en(_t.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:_t.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:en(_t.comisionCredito)})]})]}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Consolidado clientes y vendedores"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border",children:"Saldo total"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):He.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):He.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe({customerId:Ae.customerId,name:Ae.name}),title:"Ver paquetes fiados del periodo",children:Ae.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:en(Ae.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:en(Ae.saldoPendiente)})]},Ae.customerId))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):vt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):vt.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"ASSOCIATED"),children:Ae.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"REMAINING"),children:Ae.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"CASH"),children:Ae.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"CREDIT"),children:Ae.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.comisionCredito)})]},Ae.vendorId))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):He.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):He.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe({customerId:Ae.customerId,name:Ae.name}),title:"Ver paquetes fiados del periodo",children:Ae.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:en(Ae.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:en(Ae.saldoPendiente)})]},Ae.customerId))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):vt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):vt.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"ASSOCIATED"),children:Ae.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"REMAINING"),children:Ae.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"CASH"),children:Ae.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct(Ae.vendorId,Ae.vendorName,"CREDIT"),children:Ae.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.comisionCredito)})]},Ae.vendorId))})]})}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Transacciones y gastos"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ut.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):ut.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Le(Ae.id),children:Ae.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ke(Ae.id),children:"Eliminar"})})]},Ae.id))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((Ae,Ye)=>Ae.date.localeCompare(Ye.date)).map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.date}),i.jsx("td",{className:"p-2 border",children:Ae.category||""}),i.jsx("td",{className:"p-2 border",children:Ae.description?i.jsx("span",{title:Ae.description,children:Ae.description.length>40?Ae.description.slice(0,40)+"":Ae.description}):""}),i.jsx("td",{className:"p-2 border",children:en(Ae.amount)}),i.jsx("td",{className:"p-2 border",children:Ae.status||""})]},Ae.id))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ut.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):ut.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ae.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Le(Ae.id),children:Ae.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:en(Ae.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ke(Ae.id),children:"Eliminar"})})]},Ae.id))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((Ae,Ye)=>Ae.date.localeCompare(Ye.date)).map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.date}),i.jsx("td",{className:"p-2 border",children:Ae.category||""}),i.jsx("td",{className:"p-2 border",children:Ae.description?i.jsx("span",{title:Ae.description,children:Ae.description.length>40?Ae.description.slice(0,40)+"":Ae.description}):""}),i.jsx("td",{className:"p-2 border",children:en(Ae.amount)}),i.jsx("td",{className:"p-2 border",children:Ae.status||""})]},Ae.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(Z==null?void 0:Z.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(je.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(je.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(je.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:en(je.abonadoPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:en(je.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:ye?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):me.sort((Ae,Ye)=>Ae.date.localeCompare(Ye.date)).map((Ae,Ye)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.date}),i.jsx("td",{className:"p-2 border",children:Ae.productName}),i.jsx("td",{className:"p-2 border",children:Ae.qty}),i.jsx("td",{className:"p-2 border",children:en(Ae.unitPrice)}),i.jsx("td",{className:"p-2 border",children:en(Ae.lineTotal)}),i.jsx("td",{className:"p-2 border",children:en(Ae.discount)}),i.jsx("td",{className:"p-2 border",children:en(Ae.lineFinal)})]},`${Ae.saleId}-${Ye}`))})]})})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:z}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),children:"Cerrar"})]}),(ne==="ASSOCIATED"||ne==="REMAINING")&&!R&&i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 text-sm",children:[i.jsxs("div",{className:"text-gray-600",children:["Pgina ",U," de ",lt]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ue(Ae=>Math.max(1,Ae-1)),disabled:U<=1,children:"Anterior"}),i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ue(Ae=>Math.min(lt,Ae+1)),disabled:U>=lt,children:"Siguiente"})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha Orden"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Costo"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]}):i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Utilidad vendedor"})]}):i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:R?i.jsx("tr",{children:i.jsx("td",{colSpan:ue,className:"p-4 text-center",children:"Cargando"})}):Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:ue,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):be.map((Ae,Ye)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.date}),i.jsx("td",{className:"p-2 border",children:Ae.productName}),i.jsx("td",{className:"p-2 border",children:Ae.qty}),i.jsx("td",{className:"p-2 border",children:en(Ae.unitPrice)}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:en(Ae.costTotal??0)}),i.jsx("td",{className:"p-2 border",children:en(Ae.lineTotal)})]}):i.jsx("td",{className:"p-2 border",children:en(Ae.lineTotal)}),i.jsx("td",{className:"p-2 border",children:en(Ae.discount)}),i.jsx("td",{className:"p-2 border",children:en(Ae.lineFinal)}),ne==="ASSOCIATED"||ne==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:en(Ae.grossProfit||0)}),i.jsx("td",{className:"p-2 border",children:en(Ae.vendorCommissionAmount)})]}):i.jsx("td",{className:"p-2 border",children:en(Ae.vendorCommissionAmount)})]},`${Ae.saleId}-${Ye}`))})]})})]})}),te&&ce&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",ce.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(ce.items||[]).map((Ae,Ye)=>{const yt=Number(Ae.qty||0),At=Number(Ae.unitPrice||0),he=yt*At,re=We(ce,Ae);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae.productName}),i.jsx("td",{className:"p-2 border",children:yt}),i.jsx("td",{className:"p-2 border",children:en(At)}),i.jsx("td",{className:"p-2 border",children:en(he)}),i.jsx("td",{className:"p-2 border",children:en(re)})]},Ye)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),en(ce.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>ke(ce.id),children:"Eliminar venta"})]})]})})]})}const $$=["Rivas","Isla Ometepe","San Jorge"];function iQe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(""),[A,h]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const Z=rr(Ct(Te,"sellers_candies"),gn("name","asc")),fe=await Lt(Z),me=[];fe.forEach(pe=>{const ye=pe.data();me.push({id:pe.id,name:ye.name||"",commissionPercent:Number(ye.commissionPercent||0),branch:ye.branch||"Rivas",createdAt:ye.createdAt||ur.now()})}),n(me)}catch(Z){console.error(Z),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const S=()=>{f(""),h("0"),p("Rivas")},E=async Z=>{Z.preventDefault(),l("");const fe=d.trim();if(!fe){l("Ingresa el nombre y apellido del vendedor.");return}const me=Number(A||0);if(me<0){l("El margen no puede ser negativo.");return}try{const pe={name:fe,commissionPercent:me,branch:m,createdAt:ur.now()},ye=await Tn(Ct(Te,"sellers_candies"),pe);n(ae=>[{id:ye.id,...pe},...ae]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(pe){console.error(pe),l(" Error al crear el vendedor.")}},F=Z=>{x(Z.id),b(Z.name),j(Z.commissionPercent.toString()),_(Z.branch)},P=()=>{x(null),b(""),j("0"),_("Rivas")},k=async()=>{if(!g)return;l("");const Z=y.trim();if(!Z){l("El nombre y apellido no pueden estar vacos.");return}const fe=Number(w||0);if(fe<0){l("El margen no puede ser negativo.");return}try{await xn(Wt(Te,"sellers_candies",g),{name:Z,commissionPercent:fe,branch:I}),n(me=>me.map(pe=>pe.id===g?{...pe,name:Z,commissionPercent:fe,branch:I}:pe)),l(" Vendedor actualizado."),P()}catch(me){console.error(me),l(" Error al actualizar el vendedor.")}},D=async Z=>{if(window.confirm(`Eliminar al vendedor "${Z.name}"? Esta accin no se puede deshacer.`))try{await Bn(Wt(Te,"sellers_candies",Z.id)),n(me=>me.filter(pe=>pe.id!==Z.id)),l(" Vendedor eliminado.")}catch(me){console.error(me),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(dc,{onClick:e,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:Z=>f(Z.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:A,onChange:Z=>h(Z.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:Z=>p(Z.target.value),children:$$.map(Z=>i.jsx("option",{value:Z,children:Z},Z))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(Z=>{const fe=g===Z.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:fe?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:me=>b(me.target.value)}):Z.name}),i.jsx("td",{className:"p-2 border",children:fe?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:me=>j(me.target.value)}):`${Z.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:fe?i.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:me=>_(me.target.value),children:$$.map(me=>i.jsx("option",{value:me,children:me},me))}):Z.branch}),i.jsx("td",{className:"p-2 border",children:fe?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:k,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:P,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>F(Z),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(Z),children:"Borrar"})]})})]},Z.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Aa=t=>Math.max(0,Math.floor(Number(t||0)));function NR(t){return Math.max(1,Aa(t.unitsPerPackage||1))}function oQe(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=NR(t),n=Number(t.totalUnits||0),a=Number(t.quantity||0),s=Number(t.packages||0);return n>0?Math.floor(n):a>0?Math.floor(a):s>0?Math.floor(s*r):0}async function cse(t){const{orderId:e,productId:r}=t;let n=Aa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=rr(Ct(Te,"inventory_candies"),or("orderId","==",e),or("productId","==",r),gn("createdAt","asc")),s=await Lt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await Ri(Te,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),A=NR(f),h=n*A,p=Aa(f.remaining??0)+h,g=Math.floor(p/A);l.update(o[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:ur.now()}),n=0}})}async function use(t){const{orderId:e,productId:r}=t,n=Aa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Wt(Te,"candy_main_orders",e);await Ri(Te,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:Aa(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:ur.now()})})}function rF(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=Aa((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,Aa((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return e}function M2(t,e){const r=Aa(t),n=Math.max(1,Aa(e));return Math.floor(r/n)}async function lQe(t){const e=String(t.productId||"");let r=Aa(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=rr(Ct(Te,"inventory_candies"),or("productId","==",e)),a=await Lt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const o=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const A=((m=c.data.createdAt)==null?void 0:m.seconds)??0,h=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return A-h}).map(c=>Wt(Te,"inventory_candies",c.id)),l=[];return await Ri(Te,async c=>{const u=await Promise.all(o.map(g=>c.get(g))),d=[];let f=r;for(let g=0;g<o.length&&f>0;g++){const x=o[g],y=u[g];if(!y.exists())continue;const b=y.data(),w=NR(b),j=oQe(b);if(j<=0)continue;const I=Math.floor(j/w);if(I<=0)continue;const _=Math.min(I,f),S=_*w,E=Math.max(0,j-S),F=Math.floor(E/w),P=String(b.orderId||"");if(!P)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:x.id,masterOrderId:P,units:S,unitsPerPackage:w}),d.push({ref:x,newRemUnits:E,newRemPacks:F}),f-=_}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const A={};for(const g of l){const x=M2(g.units,g.unitsPerPackage);A[g.masterOrderId]=(A[g.masterOrderId]||0)+x}const h=Object.keys(A),m=h.map(g=>Wt(Te,"candy_main_orders",g)),p=await Promise.all(m.map(g=>c.get(g)));for(let g=0;g<d.length;g++){const x=d[g];c.update(x.ref,{remaining:x.newRemUnits,remainingPackages:x.newRemPacks,packages:x.newRemPacks,updatedAt:ur.now()})}for(let g=0;g<m.length;g++){const x=p[g];if(!x.exists())throw new Error("Orden maestra no existe.");const y=x.data(),b=Array.isArray(y.items)?y.items:[],w=Aa(A[h[g]]||0);if(w<=0)continue;let j=!1;const I=b.map(_=>{if(String((_==null?void 0:_.id)||"")!==e)return _;const S=Aa(_.remainingPackages);if(S<w)throw new Error("Orden maestra sin paquetes suficientes.");return j=!0,{..._,remainingPackages:S-w}});j&&c.update(m[g],{items:I,updatedAt:ur.now()})}}),{allocations:l}}async function G$(t){const e=String(t.vendorInventoryId||"");let r=Aa(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=Wt(Te,"inventory_candies_sellers",e),a=await js(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),o=String(s.productId||"");if(!o)throw new Error("La orden del vendedor no tiene productId");if(!rF(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await cse({orderId:u,productId:o,packagesToReturn:r}),await use({orderId:u,productId:o,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await Ri(Te,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),A=String(f.productId||"");if(!A)throw new Error("Doc vendedor sin productId");let h=rF(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!h.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=h.length-1;E>=0&&p>0;E--){const F=h[E],P=Math.max(1,Aa(F.unitsPerPackage||1)),k=M2(F.units,P);if(k<=0)continue;const D=Math.min(k,p),Z=D*P;m.push({batchId:F.batchId,masterOrderId:F.masterOrderId,units:Z,unitsPerPackage:P}),p-=D}const g=r-p;if(g<=0)return;c=g;const x=m.map(E=>Wt(Te,"inventory_candies",E.batchId)),y={};for(const E of m){const F=M2(E.units,E.unitsPerPackage);F>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+F)}const w=Object.keys(y).map(E=>Wt(Te,"candy_main_orders",E)),[j,I]=await Promise.all([Promise.all(x.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const F=m[E],P=j[E];if(!P.exists())continue;const k=P.data(),D=Math.max(1,Aa(F.unitsPerPackage||k.unitsPerPackage||1)),Z=Aa(F.units),me=Aa(k.remaining??0)+Z,pe=Math.floor(me/D);u.update(x[E],{remaining:me,remainingPackages:pe,packages:pe,updatedAt:ur.now()})}for(let E=0;E<w.length;E++){const F=I[E];if(!F.exists())continue;const P=w[E].id,k=Aa(y[P]||0);if(k<=0)continue;const D=F.data(),Z=Array.isArray(D.items)?D.items:[];let fe=!1;const me=Z.map(pe=>String((pe==null?void 0:pe.id)||"")!==String(A)?pe:(fe=!0,{...pe,remainingPackages:Aa(pe.remainingPackages)+k}));fe&&u.update(w[E],{items:me,updatedAt:ur.now()})}const _=new Map;for(const E of m){const F=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(F,(_.get(F)||0)+Aa(E.units))}const S=[];for(const E of h){const F=Math.max(1,Aa(E.unitsPerPackage||1)),P=`${E.batchId}__${E.masterOrderId}__${F}`,k=Aa(_.get(P)||0);if(k<=0){S.push(E);continue}const Z=Aa(E.units)-k;Z>0&&S.push({...E,units:Z,unitsPerPackage:F}),_.delete(P)}u.update(n,{masterAllocations:S,updatedAt:ur.now()})}),{restoredPackages:c,mode:"blind"}}async function cQe(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Wt(Te,"inventory_candies_sellers",t),r=await js(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=Aa(n.packages||n.remainingPackages||0),o=rF(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!o.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Ri(Te,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await cse({orderId:c,productId:a,packagesToReturn:s}),await use({orderId:c,productId:a,packagesToReturn:s}),await Ri(Te,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Ri(Te,async c=>{const u={};for(const g of o){const x=Math.max(1,Aa(g.unitsPerPackage||1)),y=Aa(g.units),b=M2(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=o.map(g=>Wt(Te,"inventory_candies",g.batchId)),A=Object.keys(u).map(g=>Wt(Te,"candy_main_orders",g)),[h,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(A.map(g=>c.get(g)))]);let p=0;for(let g=0;g<o.length;g++){const x=o[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,Aa(x.unitsPerPackage||b.unitsPerPackage||1)),j=Aa(x.units),_=Aa(b.remaining??0)+j,S=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:S,packages:S,updatedAt:ur.now()});const E=M2(j,w);E>0&&(p+=E)}for(let g=0;g<A.length;g++){const x=m[g];if(!x.exists())continue;const y=A[g].id,b=Aa(u[y]||0);if(b<=0)continue;const w=x.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(S=>String((S==null?void 0:S.id)||"")!==String(a)?S:(I=!0,{...S,remainingPackages:Aa(S.remainingPackages)+b}));I&&c.update(A[g],{items:_,updatedAt:ur.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const ti=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function K$(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const Ms=t=>Math.max(0,Math.floor(Number(t||0))),q$=t=>{const e=String(t??"");return/[,"\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},uQe=t=>{const e=[];let r=[],n="",a=!1;for(let s=0;s<t.length;s++){const o=t[s];if(a){o==='"'?t[s+1]==='"'?(n+='"',s++):a=!1:n+=o;continue}if(o==='"'){a=!0;continue}if(o===","){r.push(n),n="";continue}if(o===`
`){r.push(n),n="",r.some(l=>String(l??"").trim()!=="")&&e.push(r),r=[];continue}o!=="\r"&&(n+=o)}return r.push(n),r.some(s=>String(s??"").trim()!=="")&&e.push(r),e},Xm=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},Td=(t,e)=>{const r=Xm(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function dQe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=fc(),o=n&&n.length?n:t,l=!o||ln(o,"admin"),c=ln(o,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,A]=v.useState(!0),[h,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState([]),[b,w]=v.useState({}),[j,I]=v.useState([]),[_,S]=v.useState(!1),[E,F]=v.useState(null),[P,k]=v.useState(""),[D,Z]=v.useState(""),[fe,me]=v.useState(""),[pe,ye]=v.useState("0"),[ae,je]=v.useState([]),[Be,O]=v.useState(""),[G,z]=v.useState(""),[L,Y]=v.useState(!1),[J,R]=v.useState(!1),[H,ne]=v.useState(!1),ge=20,[U,Ue]=v.useState(1),ie=20,[te,Ee]=v.useState(1),[ce,we]=v.useState({}),[Re,We]=v.useState(!1),[pt,_t]=v.useState({}),He=v.useMemo(()=>p.find(xe=>xe.id===P)||null,[P,p]);He==null||He.branch,v.useEffect(()=>{!_||!P||!ae.length||je(xe=>xe.map(Ge=>{const qe=x.find(Vr=>Vr.id===Ge.productId)||null,it=p.find(Vr=>Vr.id===P)||null,Et=it==null?void 0:it.branch,Pt=Ms(Ge.packages),pr=qe?ue(qe,Et):Number(Ge.pricePerPackage||0),Dt=(qe?Le(qe,Et):0)*Pt,fr=qe?qe.logisticAllocatedPerPack*Pt:Number(Ge.logisticAllocated||0),Bt=(qe?ke(qe,Et):0)*Pt,Or=Ae(P),Pr=Td(Dt,Or);return{...Ge,pricePerPackage:pr,totalExpected:pr*Pt,grossProfit:Dt,logisticAllocated:fr,vendorMarginPercent:Pr.vendorMarginPercent,uAproximada:Bt,uVendor:Pr.uVendor,uInvestor:Pr.uInvestor,totalRivas:((qe==null?void 0:qe.unitPriceRivas)||Ge.unitPriceRivas||0)*Pt,totalSanJorge:((qe==null?void 0:qe.unitPriceSanJorge)||Ge.unitPriceSanJorge||0)*Pt,totalIsla:((qe==null?void 0:qe.unitPriceIsla)||Ge.unitPriceIsla||0)*Pt,unitPriceRivas:(qe==null?void 0:qe.unitPriceRivas)||Ge.unitPriceRivas||0,unitPriceSanJorge:(qe==null?void 0:qe.unitPriceSanJorge)||Ge.unitPriceSanJorge||0,unitPriceIsla:(qe==null?void 0:qe.unitPriceIsla)||Ge.unitPriceIsla||0}}))},[_,P,ae.length,x,p]);const gt=v.useMemo(()=>!c||!u?null:p.find(xe=>(xe.email||"").trim().toLowerCase()===u)||null,[c,u,p]);v.useMemo(()=>new Set(ae.map(xe=>xe.productId)),[ae]);const ut=v.useMemo(()=>x.filter(xe=>(b[xe.id]??0)>1).sort((xe,Ge)=>`${xe.category} ${xe.name}`.localeCompare(`${Ge.category} ${Ge.name}`)),[x,b]),vt=v.useMemo(()=>{const xe=Be.trim().toLowerCase();return xe?ut.filter(Ge=>`${Ge.category??""} ${Ge.name??""}`.toLowerCase().includes(xe)):ut},[ut,Be]),Pe=v.useMemo(()=>x.find(xe=>xe.id===fe)||null,[fe,x]),ct=v.useMemo(()=>c&&gt?j.filter(xe=>xe.sellerId===gt.id):j,[j,c,gt]),lt=async()=>{try{const xe=Ct(Te,"inventory_transfers_candies");if(!c){const Ot=await Lt(xe),Dt={};Ot.forEach(fr=>{const ir=fr.data(),Bt=Number(ir.packagesMoved||0),gr=String(ir.fromOrderKey||""),Or=String(ir.toOrderKey||"");gr&&(Dt[gr]=Dt[gr]||{out:0,in:0},Dt[gr].out+=Bt),Or&&(Dt[Or]=Dt[Or]||{out:0,in:0},Dt[Or].in+=Bt)}),_t(Dt);return}const Ge=rr(xe,or("fromSellerId","==",e)),qe=rr(xe,or("toSellerId","==",e)),[it,Et]=await Promise.all([Lt(Ge),Lt(qe)]),Pt={},pr=(Ot,Dt)=>{Ot.forEach(fr=>{const ir=fr.data(),Bt=Number(ir.packagesMoved||0),gr=String(Dt==="out"?ir.fromOrderKey||"":ir.toOrderKey||"");gr&&(Pt[gr]=Pt[gr]||{out:0,in:0},Pt[gr][Dt]+=Bt)})};pr(it.docs,"out"),pr(Et.docs,"in"),_t(Pt)}catch(xe){console.error(xe),_t({})}};v.useEffect(()=>{(async()=>{A(!0),m("");try{const xe=await Lt(rr(Ct(Te,"sellers_candies"),gn("name","asc"))),Ge=[];xe.forEach(ir=>{const Bt=ir.data(),gr=Bt.branch||Bt.branchLabel||Bt.route||Bt.sucursal||Bt.location||"";Ge.push({id:ir.id,name:Bt.name||"",email:Bt.email||"",commissionPercent:Number(Bt.commissionPercent||0),branch:K$(gr),branchLabel:gr})}),g(Ge);const qe=await Lt(rr(Ct(Te,"candy_main_orders"),gn("createdAt","desc"))),it={},Et={},Pt=(ir,Bt)=>`${ir}#${String(Bt).padStart(10,"0")}`;qe.forEach(ir=>{var Vr;const Bt=ir.data(),gr=Number(((Vr=Bt.createdAt)==null?void 0:Vr.seconds)??0),Or=String(Bt.date||""),Pr=Array.isArray(Bt.items)?Bt.items:[];for(const Rr of Pr){const an=String(Rr.id||Rr.productId||"");if(!an)continue;const Wn=Ms(Rr.remainingPackages??Rr.remainingPacks??0);Wn>0&&(it[an]=(it[an]||0)+Wn);const Nt=Math.max(1,Ms(Rr.packages??0)),_r=Number(Rr.unitPriceRivas||0),st=Number(Rr.unitPriceSanJorge||0),St=Number(Rr.unitPriceIsla||0),Qt=Number(Rr.gainRivas??Rr.grossProfitRivas??Rr.grossProfit??0),Rt=Number(Rr.gainSanJorge??Rr.grossProfitSanJorge??Rr.grossProfit??0),Mt=Number(Rr.gainIsla??Rr.grossProfitIsla??Rr.grossProfit??0),qt=Number(Rr.logisticAllocated??Rr.prorrateo??Rr.prorrateoLogistico??Rr.gastos??0),Xt=Number(Rr.uAproximada??Rr.uApprox??Rr.netProfit??Rr.vendorProfit??Rr.gainVendor??0)/Nt,br=qt/Nt,zt={id:an,name:String(Rr.name||Rr.productName||""),category:String(Rr.category||""),unitsPerPackage:Ms(Rr.unitsPerPackage??0),unitPriceRivas:_r,unitPriceSanJorge:st,unitPriceIsla:St,grossProfitPerPackRivas:Qt/Nt,grossProfitPerPackSanJorge:Rt/Nt,grossProfitPerPackIsla:Mt/Nt,uApproxPerPackRivas:Xt,uApproxPerPackSanJorge:Xt,uApproxPerPackIsla:Xt,logisticAllocatedPerPack:br,key:Pt(Or,gr)},hr=Et[an];(!hr||zt.key>hr.key)&&(Et[an]=zt)}});const pr=await Lt(c?rr(Ct(Te,"inventory_candies_sellers"),or("sellerId","==",e),gn("createdAt","desc")):rr(Ct(Te,"inventory_candies_sellers"),gn("createdAt","desc"))),Ot={};Object.keys(it).forEach(ir=>{const Bt=Ms(it[ir]);Ot[ir]=Math.max(0,Bt)}),w(Ot);const Dt=Object.keys(Et).map(ir=>{const Bt=Et[ir];return{id:Bt.id,name:Bt.name,category:Bt.category,unitsPerPackage:Bt.unitsPerPackage,unitPriceRivas:Bt.unitPriceRivas,unitPriceSanJorge:Bt.unitPriceSanJorge,unitPriceIsla:Bt.unitPriceIsla,grossProfitPerPackRivas:Bt.grossProfitPerPackRivas,grossProfitPerPackSanJorge:Bt.grossProfitPerPackSanJorge,grossProfitPerPackIsla:Bt.grossProfitPerPackIsla,uApproxPerPackRivas:Bt.uApproxPerPackRivas,uApproxPerPackSanJorge:Bt.uApproxPerPackSanJorge,uApproxPerPackIsla:Bt.uApproxPerPackIsla,logisticAllocatedPerPack:Bt.logisticAllocatedPerPack,existingPacks:Ot[Bt.id]??0}}).sort((ir,Bt)=>`${ir.category} ${ir.name}`.localeCompare(`${Bt.category} ${Bt.name}`));y(Dt);const fr=[];pr.forEach(ir=>{const Bt=ir.data(),gr=Ge.find(Nt=>Nt.id===Bt.sellerId)||null,Or=Xm(Bt.vendorMarginPercent??Bt.vendorMargin??Bt.commissionPercent??(gr==null?void 0:gr.commissionPercent)??0),Pr=Number(Bt.uAproximada??Bt.uApprox??Bt.netProfit??Bt.uAprox??Bt.uApproxTotal??0),Vr=Bt.uVendor??Bt.vendorProfit??Bt.gainVendor??0,Rr=Bt.uVendor!=null,an=Td(Number(Bt.grossProfit??Bt.gainVendor??0),Or),Wn=Rr?{uAproximada:Number(Pr||0),vendorMarginPercent:Or,uVendor:Number(Vr||0),uInvestor:Number(Pr||0)-Number(Vr||0)}:{uAproximada:Number(Pr||0),vendorMarginPercent:an.vendorMarginPercent,uVendor:an.uVendor,uInvestor:an.uInvestor};fr.push({id:ir.id,sellerId:Bt.sellerId,sellerName:Bt.sellerName||"",productId:Bt.productId,productName:Bt.productName||"",category:Bt.category||"",orderId:Bt.orderId||null,packages:Number(Bt.packages||0),unitsPerPackage:Number(Bt.unitsPerPackage||0),totalUnits:Number(Bt.totalUnits||0),remainingPackages:Number(Bt.remainingPackages||0),remainingUnits:Number(Bt.remainingUnits||0),totalRivas:Number(Bt.totalRivas||0),totalSanJorge:Number(Bt.totalSanJorge||0),totalIsla:Number(Bt.totalIsla||0),unitPriceRivas:Number(Bt.unitPriceRivas||0),unitPriceSanJorge:Number(Bt.unitPriceSanJorge||0),unitPriceIsla:Number(Bt.unitPriceIsla||0),grossProfit:Number(Bt.grossProfit??Bt.gainVendor??0),logisticAllocated:Number(Bt.logisticAllocated??Bt.gastos??Bt.gasto??0),vendorMarginPercent:Wn.vendorMarginPercent,uAproximada:Wn.uAproximada,uVendor:Wn.uVendor,uInvestor:Wn.uInvestor,vendorProfit:Number(Bt.vendorProfit??Wn.uVendor??0),subtotal:Number(Bt.subtotal||0),providerPrice:Number(Bt.providerPrice||0),date:Bt.date||"",createdAt:Bt.createdAt||ur.now()})}),I(fr),await lt()}catch(xe){console.error(xe),m(" Error cargando datos de vendedores / pedidos.")}finally{A(!1)}})()},[a,t,e]);const be=(xe,Ge)=>`${xe}__${Ge}`,ue=(xe,Ge)=>Ge?Ge==="RIVAS"?xe.unitPriceRivas||0:Ge==="SAN_JORGE"?xe.unitPriceSanJorge||0:xe.unitPriceIsla||0:xe.unitPriceIsla||xe.unitPriceRivas||xe.unitPriceSanJorge||0,Le=(xe,Ge)=>Ge?Ge==="RIVAS"?xe.grossProfitPerPackRivas||0:Ge==="SAN_JORGE"?xe.grossProfitPerPackSanJorge||0:xe.grossProfitPerPackIsla||0:xe.grossProfitPerPackIsla||xe.grossProfitPerPackRivas||xe.grossProfitPerPackSanJorge||0,ke=(xe,Ge)=>Ge?Ge==="RIVAS"?xe.uApproxPerPackRivas||0:Ge==="SAN_JORGE"?xe.uApproxPerPackSanJorge||0:xe.uApproxPerPackIsla||0:xe.uApproxPerPackIsla||xe.uApproxPerPackRivas||xe.uApproxPerPackSanJorge||0,Ae=xe=>{const Ge=p.find(qe=>qe.id===xe)||null;return Xm((Ge==null?void 0:Ge.commissionPercent)??0)},Ye=v.useMemo(()=>{const xe=new Map;for(const qe of ct){const it=be(qe.sellerId,qe.date),Et=xe.get(it)||{orderKey:it,sellerId:qe.sellerId,sellerName:qe.sellerName,date:qe.date,totalPackages:0,totalRemainingPackages:0,totalExpected:0,grossProfit:0,vendorProfit:0,gastos:0,transferredOut:0,transferredIn:0};Et.totalPackages+=Number(qe.packages||0),Et.totalRemainingPackages+=Number(qe.remainingPackages||0);const Pt=p.find(Rr=>Rr.id===qe.sellerId)||null,pr=Pt==null?void 0:Pt.branch,Ot=x.find(Rr=>Rr.id===String(qe.productId))||null,Dt=Ms(qe.packages),ir=(Ot?ue(Ot,pr):Number(pr==="RIVAS"?qe.unitPriceRivas||0:pr==="SAN_JORGE"?qe.unitPriceSanJorge||0:qe.unitPriceIsla||0))*Dt;Et.totalExpected+=Number(ir||0);const gr=(Ot?Le(Ot,pr):Dt>0?Number(qe.grossProfit||0)/Dt:0)*Dt;Et.grossProfit+=Number(gr||0);const Or=Ot?Ot.logisticAllocatedPerPack*Dt:Number(qe.logisticAllocated??qe.gastos??qe.gasto??0);Et.gastos=(Et.gastos||0)+Number(Or||0);const Pr=Ae(qe.sellerId),Vr=Td(gr,Pr);Et.vendorProfit+=Number(Vr.uVendor||0),xe.set(it,Et)}const Ge=[];for(const qe of xe.values()){const it=pt[qe.orderKey]||{out:0,in:0};qe.transferredOut=it.out||0,qe.transferredIn=it.in||0,Ge.push(qe)}return Ge.sort((qe,it)=>(it.date||"").localeCompare(qe.date||"")),Ge},[ct,p,pt,x]),yt=v.useMemo(()=>Math.max(1,Math.ceil(Ye.length/ge)),[Ye.length]);v.useEffect(()=>{U>yt&&Ue(yt)},[yt]);const At=v.useMemo(()=>{const xe=(U-1)*ge;return Ye.slice(xe,xe+ge)},[Ye,U]),he=()=>Ue(xe=>Math.max(1,xe-1)),re=()=>Ue(xe=>Math.min(yt,xe+1)),oe=v.useMemo(()=>{const xe=G.trim().toLowerCase();return xe?ae.filter(Ge=>{const qe=String(Ge.productName||"").toLowerCase(),it=String(Ge.category||"").toLowerCase();return qe.includes(xe)||it.includes(xe)}):ae},[ae,G]),Ve=v.useMemo(()=>Math.max(1,Math.ceil(oe.length/ie)),[oe.length]);v.useEffect(()=>{te>Ve&&Ee(Ve)},[Ve]);const de=v.useMemo(()=>{const xe=(te-1)*ie;return oe.slice(xe,xe+ie)},[oe,te]),Se=v.useMemo(()=>{const xe=new Map;for(const Ge of de){const qe=(Ge.category||"Sin categora").trim()||"Sin categora",it=xe.get(qe)||[];it.push(Ge),xe.set(qe,it)}return Array.from(xe.entries())},[de]),dt=xe=>{we(Ge=>({...Ge,[xe]:!Ge[xe]}))},xt=()=>Ee(xe=>Math.max(1,xe-1)),ht=()=>Ee(xe=>Math.min(Ve,xe+1)),bt=v.useMemo(()=>{const xe=ae.reduce((Ot,Dt)=>Ot+Number(Dt.packages||0),0),Ge=ae.reduce((Ot,Dt)=>Ot+Number(Dt.totalExpected||0),0),qe=ae.reduce((Ot,Dt)=>Ot+Number(Dt.grossProfit||0),0),it=ae.reduce((Ot,Dt)=>Ot+Number(Dt.logisticAllocated??Dt.gastos??Dt.gasto??0),0),Et=ae.reduce((Ot,Dt)=>Ot+Number(Dt.uVendor||0),0),Pt=qe-it-Et;return{totalPackages:xe,totalExpected:Ge,grossProfit:qe,gastosTotal:it,uVendor:Et,uNeta:Pt,vendorProfit:Et}},[ae]),et=()=>{F(null),k(""),Z(""),me(""),ye("0"),je([]),O(""),Ee(1)},Ne=()=>{m(""),et(),c&&gt&&k(gt.id);const xe=new Date,Ge=xe.getFullYear(),qe=String(xe.getMonth()+1).padStart(2,"0"),it=String(xe.getDate()).padStart(2,"0");Z(`${Ge}-${qe}-${it}`),S(!0)},mt=()=>{S(!1)},W=xe=>{m(""),et(),F(xe);const[Ge,qe]=xe.split("__");k(Ge||""),Z(qe||"");const it=ct.filter(Ot=>be(Ot.sellerId,Ot.date)===xe),Et=p.find(Ot=>Ot.id===Ge)||null,Pt=Et==null?void 0:Et.branch,pr=it.map(Ot=>{const Dt=x.find(st=>st.id===String(Ot.productId))||null,fr=Number(Ot.unitPriceRivas||(Dt==null?void 0:Dt.unitPriceRivas)||0),ir=Number(Ot.unitPriceSanJorge||(Dt==null?void 0:Dt.unitPriceSanJorge)||0),Bt=Number(Ot.unitPriceIsla||(Dt==null?void 0:Dt.unitPriceIsla)||0),gr=Number(Ot.packages||0),Or=Pt==="RIVAS"?fr:Pt==="SAN_JORGE"?ir:Bt,Pr=Number(Ot.totalRivas||0),Vr=Number(Ot.totalSanJorge||0),Rr=Number(Ot.totalIsla||0),an=Pt==="RIVAS"?Pr:Pt==="SAN_JORGE"?Vr:Rr,Wn=Xm(Ot.vendorMarginPercent??Ae(Ge)),Nt=Td(Number(Ot.grossProfit||0),Wn),_r=Number(Ot.logisticAllocated??Ot.gastos??0)||(Dt?Dt.logisticAllocatedPerPack*gr:0);return{id:Ot.id,productId:String(Ot.productId||""),productName:Ot.productName||(Dt==null?void 0:Dt.name)||"",category:Ot.category||(Dt==null?void 0:Dt.category)||"",unitsPerPackage:Number(Ot.unitsPerPackage||(Dt==null?void 0:Dt.unitsPerPackage)||0),packages:gr,totalExpected:an,pricePerPackage:Or,grossProfit:Number(Ot.grossProfit||0),logisticAllocated:_r,vendorMarginPercent:Nt.vendorMarginPercent,uAproximada:Number(Ot.uAproximada||0),uVendor:Number(Ot.uVendor??Nt.uVendor??0),uInvestor:Number(Ot.uInvestor??Nt.uInvestor??0),totalRivas:Pr,totalSanJorge:Vr,totalIsla:Rr,unitPriceRivas:fr,unitPriceSanJorge:ir,unitPriceIsla:Bt,remainingPackages:Number(Ot.remainingPackages||0)}});je(pr),S(!0)},Ie=()=>{if(m(""),!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");if(!fe)return m(" Seleccion un producto.");const xe=Ms(pe);if(xe<=0)return m(" Paquetes debe ser > 0.");const Ge=x.find(Pr=>Pr.id===fe);if(!Ge)return m(" Producto no encontrado.");if(ae.some(Pr=>Pr.productId===Ge.id))return m(" Ese producto ya est agregado al pedido.");const qe=p.find(Pr=>Pr.id===P)||null,it=qe==null?void 0:qe.branch,Et=ue(Ge,it),Pt=Le(Ge,it),Ot=ke(Ge,it)*xe,Dt=Et*xe,fr=Pt*xe,ir=Ge.logisticAllocatedPerPack*xe,Bt=Ae(P),gr=Td(fr,Bt),Or={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Ge.id,productName:Ge.name,category:Ge.category,unitsPerPackage:Ge.unitsPerPackage,packages:xe,totalExpected:Dt,pricePerPackage:Et,grossProfit:fr,logisticAllocated:ir,vendorMarginPercent:gr.vendorMarginPercent,uAproximada:Ot,uVendor:gr.uVendor,uInvestor:gr.uInvestor,totalRivas:(Ge.unitPriceRivas||0)*xe,totalSanJorge:(Ge.unitPriceSanJorge||0)*xe,totalIsla:(Ge.unitPriceIsla||0)*xe,unitPriceRivas:Ge.unitPriceRivas||0,unitPriceSanJorge:Ge.unitPriceSanJorge||0,unitPriceIsla:Ge.unitPriceIsla||0,remainingPackages:0};je(Pr=>[Or,...Pr]),me(""),ye("0"),Ee(1)},Je=xe=>{je(Ge=>Ge.filter(qe=>qe.id!==xe))},tt=(xe,Ge)=>{const qe=Ms(Ge);je(it=>it.map(Et=>{if(Et.id!==xe)return Et;const Pt=x.find(Rr=>Rr.id===Et.productId),pr=p.find(Rr=>Rr.id===P)||null,Ot=pr==null?void 0:pr.branch,Dt=Pt?ue(Pt,Ot):Et.pricePerPackage||0,ir=(Pt?Le(Pt,Ot):0)*qe,Bt=Pt?Pt.logisticAllocatedPerPack*qe:Et.logisticAllocated||0,Or=(Pt?ke(Pt,Ot):0)*qe,Pr=Et.vendorMarginPercent!=null?Et.vendorMarginPercent:Ae(P),Vr=Td(ir,Pr);return{...Et,packages:qe,pricePerPackage:Dt,totalExpected:Dt*qe,grossProfit:ir,logisticAllocated:Bt,vendorMarginPercent:Vr.vendorMarginPercent,uAproximada:Or,uVendor:Vr.uVendor,uInvestor:Vr.uInvestor,totalRivas:((Pt==null?void 0:Pt.unitPriceRivas)||Et.unitPriceRivas||0)*qe,totalSanJorge:((Pt==null?void 0:Pt.unitPriceSanJorge)||Et.unitPriceSanJorge||0)*qe,totalIsla:((Pt==null?void 0:Pt.unitPriceIsla)||Et.unitPriceIsla||0)*qe}}))},ft=(xe,Ge)=>{const qe=Xm(Ge);je(it=>it.map(Et=>{if(Et.id!==xe)return Et;const Pt=x.find(Or=>Or.id===Et.productId),pr=p.find(Or=>Or.id===P)||null,Ot=pr==null?void 0:pr.branch,Dt=Ms(Et.packages),ir=(Pt?ke(Pt,Ot):0)*Dt,Bt=Number(Et.grossProfit||0),gr=Td(Bt,qe);return{...Et,vendorMarginPercent:gr.vendorMarginPercent,uAproximada:ir,uVendor:gr.uVendor,uInvestor:gr.uInvestor}}))},T=async()=>{if(l&&!J)try{R(!0),m("");const xe=j;if(!xe.length){m(" No hay documentos para actualizar.");return}const Ge=Ot=>x.find(Dt=>Dt.id===Ot)||null,qe=Ot=>{const Dt=p.find(fr=>fr.id===Ot)||null;return Dt==null?void 0:Dt.branch},it=(Ot,Dt)=>Math.abs(Number(Ot||0)-Number(Dt||0))>.01;let Et=zd(Te),Pt=0,pr=0;for(const Ot of xe){const Dt=qe(Ot.sellerId)||"ISLA",fr=Ms(Ot.packages),ir=Ge(String(Ot.productId||"")),Bt=ir&&fr>0?Le(ir,Dt)*fr:Number(Ot.grossProfit||0),gr=ir&&fr>0?ir.logisticAllocatedPerPack*fr:Number(Ot.logisticAllocated||0),Or=ir?ke(ir,Dt):0,Pr=fr>0?Or*fr:0,Vr=Ot.vendorMarginPercent!=null?Xm(Ot.vendorMarginPercent):Ae(Ot.sellerId),Rr=Td(Bt,Vr),an=Rr.uVendor,Wn=Rr.uInvestor,Nt=Bt-gr-an;if(!(Ot.uVendor==null||Ot.uNeta==null||Ot.uAproximada==null||Ot.uInvestor==null||Ot.logisticAllocated==null||it(Ot.uVendor,an)||it(Ot.uNeta,Nt)||it(Ot.uAproximada,Pr)||it(Ot.uInvestor,Wn)||it(Ot.logisticAllocated,gr)))continue;const st=Wt(Te,"inventory_candies_sellers",Ot.id);Et.update(st,{vendorMarginPercent:Vr,grossProfit:Bt,logisticAllocated:gr,uAproximada:Pr,uVendor:an,uInvestor:Wn,uNeta:Nt,vendorProfit:an,updatedAt:ur.now()}),Pt+=1,pr+=1,Pt>=400&&(await Et.commit(),Et=zd(Te),Pt=0)}Pt>0&&await Et.commit(),m(` Actualizados ${pr} documentos.`),s()}catch(xe){console.error(xe),m(" Error actualizando documentos.")}finally{R(!1)}},M=(xe,Ge,qe="text/plain;charset=utf-8")=>{const it=new Blob([Ge],{type:qe}),Et=URL.createObjectURL(it),Pt=document.createElement("a");Pt.href=Et,Pt.download=xe,document.body.appendChild(Pt),Pt.click(),Pt.remove(),URL.revokeObjectURL(Et)},V=()=>{const xe=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],Ge=p.find(Pt=>Pt.id===P)||null,qe=(Ge==null?void 0:Ge.branch)||K$(Ge==null?void 0:Ge.branchLabel)||"",it=[xe.join(","),...ae.map(Pt=>{const pr=Number(Pt.grossProfit||0)-Number(Pt.logisticAllocated??Pt.gastos??0)-Number(Pt.uVendor||0);return[(Ge==null?void 0:Ge.name)||"",String(qe),D||"",Pt.productId,Pt.productName,Pt.category,String(Number(Pt.packages||0)),String(Number(Pt.remainingPackages||0)),String(Number(Pt.pricePerPackage||0).toFixed(2)),String(Number(Pt.totalExpected||0).toFixed(2)),String(Number(Pt.grossProfit||0).toFixed(2)),String(Number(Pt.uVendor||0).toFixed(2)),String(Number(pr||0).toFixed(2)),String(Number(Pt.unitPriceRivas||0).toFixed(2)),String(Number(Pt.unitPriceSanJorge||0).toFixed(2)),String(Number(Pt.unitPriceIsla||0).toFixed(2)),String(Number(Pt.totalRivas||0).toFixed(2)),String(Number(Pt.totalSanJorge||0).toFixed(2)),String(Number(Pt.totalIsla||0).toFixed(2)),String(Number(Pt.unitsPerPackage||0)),String(Number(Pt.vendorMarginPercent||0).toFixed(2)),String(Number(Pt.uVendor||0).toFixed(2))].map(q$).join(",")})].join(`
`),Et=`vendor_order_items_${((Ge==null?void 0:Ge.name)||"vendedor").replace(/\s+/g,"_")}_${D||"sin_fecha"}.csv`;M(Et,it,"text/csv;charset=utf-8")},q=()=>{const xe=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],Ge=x.map(it=>({id:it.id,name:it.name,category:it.category,existentes:Number(it.existingPacks||0)})).filter(it=>it.existentes>0).sort((it,Et)=>`${it.category} ${it.name}`.localeCompare(`${Et.category} ${Et.name}`)),qe=[xe.join(","),...Ge.map(it=>[it.id,it.name,it.category,String(it.existentes),"","",""].map(q$).join(","))].join(`
`);M("plantilla_productos_orden_maestra.csv",qe,"text/csv;charset=utf-8")},ee=async xe=>{try{m("");const Ge=await xe.text(),qe=uQe(Ge);if(!qe.length)return m(" Archivo vaco.");const it=qe[0].map(Bt=>String(Bt||"").trim().toLowerCase()),Et=it.findIndex(Bt=>Bt==="productid"||Bt==="producto id"||Bt==="id"),Pt=it.findIndex(Bt=>Bt==="paquetes"||Bt==="packages"),pr=it.findIndex(Bt=>Bt==="vendormarginpercent"||Bt==="vendor_margin_percent"||Bt==="marginvendorpercent"||Bt==="margen"||Bt==="margen vendedor"||Bt==="margen_del_vendedor");if(Et<0||Pt<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!P)return m(" Seleccion un vendedor antes de importar.");if(!D)return m(" Seleccion una fecha antes de importar.");const Ot=p.find(Bt=>Bt.id===P)||null,Dt=Ot==null?void 0:Ot.branch,fr=Ae(P),ir=[];for(let Bt=1;Bt<qe.length;Bt++){const gr=qe[Bt]||[],Or=String(gr[Et]||"").trim();if(!Or)continue;const Pr=Ms(gr[Pt]);if(Pr<=0)continue;const Vr=x.find(Xt=>Xt.id===Or);if(!Vr)continue;const Rr=pr>=0?Xm(gr[pr]):0,an=pr>=0&&String(gr[pr]??"").trim()!==""?Rr:fr,Wn=ue(Vr,Dt),Nt=Le(Vr,Dt),_r=Wn*Pr,st=Nt*Pr,St=Vr.logisticAllocatedPerPack*Pr,Rt=ke(Vr,Dt)*Pr,Mt=Td(st,an),qt=ae.find(Xt=>Xt.productId===Or);if(qt){const Xt=pr>=0&&String(gr[pr]??"").trim()!==""?an:qt.vendorMarginPercent,br=Td(st,Xt);je(zt=>zt.map(hr=>hr.id===qt.id?{...hr,packages:Pr,pricePerPackage:Wn,totalExpected:_r,grossProfit:st,logisticAllocated:St,vendorMarginPercent:br.vendorMarginPercent,uAproximada:Rt,uVendor:br.uVendor,uInvestor:br.uInvestor,totalRivas:(Vr.unitPriceRivas||0)*Pr,totalSanJorge:(Vr.unitPriceSanJorge||0)*Pr,totalIsla:(Vr.unitPriceIsla||0)*Pr}:hr));continue}const Yt={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Vr.id,productName:Vr.name,category:Vr.category,unitsPerPackage:Vr.unitsPerPackage,packages:Pr,pricePerPackage:Wn,totalExpected:_r,grossProfit:st,logisticAllocated:St,vendorMarginPercent:Mt.vendorMarginPercent,uAproximada:Rt,uVendor:Mt.uVendor,uInvestor:Mt.uInvestor,totalRivas:(Vr.unitPriceRivas||0)*Pr,totalSanJorge:(Vr.unitPriceSanJorge||0)*Pr,totalIsla:(Vr.unitPriceIsla||0)*Pr,unitPriceRivas:Vr.unitPriceRivas||0,unitPriceSanJorge:Vr.unitPriceSanJorge||0,unitPriceIsla:Vr.unitPriceIsla||0,remainingPackages:0};ir.push(Yt)}if(!ir.length)return m(" No se encontraron filas con Paquetes > 0.");je(Bt=>[...ir,...Bt]),Ee(1),m(` Importados ${ir.length} productos desde plantilla.`)}catch(Ge){console.error(Ge),m(" Error importando archivo.")}},se=async()=>{try{if(m(""),d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");if(!ae.length)return m(" Agreg al menos 1 producto.");const xe=p.find(Dt=>Dt.id===P)||null;if(!xe)return m(" Vendedor invlido.");const Ge=xe.branch,qe=E?ct.filter(Dt=>be(Dt.sellerId,Dt.date)===E):[],it=new Map;qe.forEach(Dt=>it.set(String(Dt.productId),Dt));for(const Dt of ae){const fr=Ms(Dt.packages),ir=E?it.get(Dt.productId):null,Bt=ir?Ms(ir.packages):0,gr=fr-Bt;if(gr>0){const Or=b[Dt.productId]??0;if(gr>Or)return m(` "${Dt.productName}" excede existencias de orden maestra. Existentes: ${Or} (faltan ${gr})`)}}Y(!0);const Et=ur.now(),Pt=be(P,D),pr=Ae(P);if(E){const Dt=qe.filter(fr=>!ae.some(ir=>ir.productId===String(fr.productId)));for(const fr of Dt){const ir=Ms(fr.remainingPackages);ir>0&&await G$({vendorInventoryId:fr.id,packagesToReturn:ir})}for(const fr of ae){const ir=it.get(fr.productId);if(!ir)continue;const Bt=Ms(fr.packages),gr=Ms(ir.packages),Or=Bt-gr;if(Or<0){const Pr=Math.abs(Or),Vr=Ms(ir.remainingPackages);if(Pr>Vr)return m(` No pods bajar "${fr.productName}" en ${Pr} porque solo quedan ${Vr} paquetes restantes.`);await G$({vendorInventoryId:ir.id,packagesToReturn:Pr})}}}const Ot=new Map;for(const Dt of ae){const fr=Ms(Dt.packages),ir=E?it.get(Dt.productId):null,Bt=ir?Ms(ir.packages):0,gr=fr-Bt;if(gr>0){const{allocations:Or}=await lQe({productId:Dt.productId,packagesToAllocate:gr});Ot.set(Dt.productId,Or||[])}}await Ri(Te,async Dt=>{for(const fr of ae){const ir=Ms(fr.packages),Bt=Ms(fr.unitsPerPackage),gr=ir*Bt,Or=E?it.get(fr.productId):null,Pr=Or?Ms(Or.packages):0,Vr=Or?Ms(Or.remainingPackages):0,Rr=ir-Pr,an=Or?Math.max(0,Vr+Rr):ir,Wn=an*Bt,Nt=x.find(Dn=>Dn.id===fr.productId),_r=Nt?ue(Nt,Ge):Number(fr.pricePerPackage||0),St=(Nt?Le(Nt,Ge):0)*ir,Qt=Nt?Nt.logisticAllocatedPerPack*ir:fr.logisticAllocated||0,Mt=(Nt?ke(Nt,Ge):0)*ir,qt=fr.vendorMarginPercent!=null?fr.vendorMarginPercent:pr,Yt=Td(St,qt),Xt=Number(St||0)-Number(Qt||0)-Number(Yt.uVendor||0),br=((Nt==null?void 0:Nt.unitPriceRivas)||fr.unitPriceRivas||0)*ir,zt=((Nt==null?void 0:Nt.unitPriceSanJorge)||fr.unitPriceSanJorge||0)*ir,hr=((Nt==null?void 0:Nt.unitPriceIsla)||fr.unitPriceIsla||0)*ir,rn={sellerId:xe.id,sellerName:xe.name,sellerEmail:xe.email||"",branch:xe.branch||"",branchLabel:xe.branchLabel||"",productId:fr.productId,productName:fr.productName,category:fr.category,orderId:Pt,date:D,createdAt:Et,packages:ir,unitsPerPackage:Bt,totalUnits:gr,remainingPackages:an,remainingUnits:Wn,totalRivas:br,totalSanJorge:zt,totalIsla:hr,unitPriceRivas:(Nt==null?void 0:Nt.unitPriceRivas)||fr.unitPriceRivas||0,unitPriceSanJorge:(Nt==null?void 0:Nt.unitPriceSanJorge)||fr.unitPriceSanJorge||0,unitPriceIsla:(Nt==null?void 0:Nt.unitPriceIsla)||fr.unitPriceIsla||0,grossProfit:St,logisticAllocated:Qt,vendorMarginPercent:Yt.vendorMarginPercent,uVendor:Yt.uVendor,uNeta:Xt,uAproximada:Mt,uInvestor:Yt.uInvestor,vendorProfit:Yt.uVendor},Ya=Ot.get(fr.productId)||[];if(E)if(String(fr.id||"").startsWith("tmp_")){const Dn=Wt(Ct(Te,"inventory_candies_sellers"));rn.masterAllocations=Ya,Dt.set(Dn,rn)}else{const Dn=Wt(Te,"inventory_candies_sellers",fr.id);Ya.length>0&&(rn.masterAllocations=nee(...Ya)),Dt.set(Dn,rn,{merge:!0})}else{const Dn=Wt(Ct(Te,"inventory_candies_sellers"));rn.masterAllocations=Ya,Dt.set(Dn,rn)}}}),m(" Pedido guardado."),S(!1),et(),s()}catch(xe){console.error(xe),m(" Error guardando el pedido.")}finally{Y(!1)}},Oe=async xe=>{try{if(m(""),!l)return m(" Solo admin.");Y(!0);const Ge=ct.filter(qe=>be(qe.sellerId,qe.date)===xe);for(const qe of Ge)await cQe(qe.id);m(" Pedido eliminado."),s()}catch(Ge){console.error(Ge),m(" Error eliminando pedido.")}finally{Y(!1)}},Ke=jo.useRef(null),ot=()=>{var xe;if(d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!D)return m(" Seleccion una fecha.");(xe=Ke.current)==null||xe.click()},Fe=async xe=>{var qe;const Ge=(qe=xe.target.files)==null?void 0:qe[0];xe.target.value="",Ge&&await ee(Ge)},Xe=c&&!!gt;return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(dc,{onClick:s}),!d&&i.jsx("button",{onClick:Ne,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),h&&!_&&i.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:h}),f?i.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:Ye.length})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!_){m(" Abr un pedido para exportar productos asociados.");return}V()},children:"Exportar asociados"}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:T,disabled:J,children:J?"Actualizando campos...":"Actualizar campos calculados"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[At.map(xe=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:xe.date}),i.jsx("td",{className:"p-2 border-b",children:xe.sellerName}),i.jsx("td",{className:"p-2 border-b text-right",children:xe.totalPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:xe.totalRemainingPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.totalExpected)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.grossProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.gastos||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.vendorProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:xe.transferredOut}),i.jsx("td",{className:"p-2 border-b text-right",children:xe.transferredIn}),i.jsx("td",{className:"p-2 border-b",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>W(xe.orderKey),children:"Ver / Editar"}),l&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&Oe(xe.orderKey)},children:"Eliminar"})]})})]},xe.orderKey)),!At.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:11,children:"No hay pedidos."})})]})]})}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",U," / ",yt]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:he,disabled:U<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:re,disabled:U>=yt,children:""})]})]})]}),i.jsxs("div",{className:"md:hidden space-y-2",children:[i.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:Ye.length})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[U,"/",yt]})]}),At.map(xe=>i.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>W(xe.orderKey),onKeyDown:Ge=>{(Ge.key==="Enter"||Ge.key===" ")&&(Ge.preventDefault(),W(xe.orderKey))},children:[i.jsxs("div",{className:"p-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:xe.sellerName}),i.jsx("div",{className:"text-xs text-gray-600",children:xe.date})]}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:Ge=>{Ge.stopPropagation(),confirm("Eliminar este pedido completo?")&&Oe(xe.orderKey)},children:"Eliminar"})]}),i.jsx("div",{className:"px-2 pb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:xe.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:xe.totalRemainingPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:ti(xe.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:ti(xe.vendorProfit)})]})]})})]},xe.orderKey)),!At.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:he,disabled:U<=1,children:""}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:re,disabled:U>=yt,children:""})]})]})]}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[L&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),i.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:E?"Editar pedido":"Nuevo pedido"}),i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:mt,children:"Cerrar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:se,children:"Guardar"})]})]}),i.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>ne(xe=>!xe),children:[i.jsx("span",{children:"Filtros y KPIs"}),i.jsx("span",{children:H?"":"+"})]}),i.jsxs("div",{className:`${H?"block":"hidden"} md:block space-y-3`,children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:P,onChange:xe=>k(xe.target.value),disabled:Xe,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(xe=>i.jsxs("option",{value:xe.id,children:[xe.name," ",xe.branch?`(${xe.branch})`:""]},xe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:D,onChange:xe=>Z(xe.target.value)})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:q,children:"Plantilla"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:ot,children:"Importar CSV"}),i.jsx("input",{ref:Ke,type:"file",accept:".csv,text/csv",className:"hidden",onChange:Fe})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:bt.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:ti(bt.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ti(bt.grossProfit)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:ti(bt.uVendor)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"text-lg font-semibold",children:ti(bt.uNeta)})]})]})]}),i.jsxs("div",{className:"border rounded p-3 space-y-2",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>We(xe=>!xe),children:[i.jsx("span",{children:"Agregar producto"}),i.jsx("span",{children:Re?"":"+"})]}),i.jsxs("div",{className:`${Re?"block":"hidden"} md:block space-y-2`,children:[i.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:Be,onChange:xe=>O(xe.target.value),placeholder:"Buscar por categora o nombre"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:fe,onChange:xe=>me(xe.target.value),children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),vt.map(xe=>i.jsxs("option",{value:xe.id,children:[xe.category," - ",xe.name," (exist:"," ",b[xe.id]??0,")"]},xe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:pe,onChange:xe=>ye(xe.target.value),inputMode:"numeric"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:Ie,disabled:!Pe,children:"Agregar"})})]})]})]}),i.jsxs("div",{className:"border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",ae.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar producto",value:G,onChange:xe=>{z(xe.target.value),Ee(1)}}),i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:V,disabled:!ae.length,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1300px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[de.map(xe=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:xe.category}),i.jsx("td",{className:"p-2 border-b",children:xe.productName}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsx("span",{children:xe.packages}):i.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(xe.packages),onChange:Ge=>tt(xe.id,Ge.target.value),inputMode:"numeric"})}),i.jsx("td",{className:"p-2 border-b text-right",children:xe.remainingPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.pricePerPackage)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.totalExpected)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.grossProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.logisticAllocated??xe.logisticAllocated??xe.gastos??0)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(xe.uVendor)}),i.jsx("td",{className:"p-2 border-b text-right",children:ti(Number(xe.grossProfit||0)-Number(xe.logisticAllocated??xe.gastos??0)-Number(xe.uVendor||0))}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsxs("span",{children:[Number(xe.vendorMarginPercent??Ae(P)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-20 border rounded p-1 text-right",value:String(xe.vendorMarginPercent??Ae(P)),onChange:Ge=>ft(xe.id,Ge.target.value),inputMode:"decimal"})}),i.jsx("td",{className:"p-2 border-b",children:!d&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>Je(xe.id),children:"Quitar"})})]},xe.id)),!de.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:12,children:"No hay productos asociados."})})]})]})}),i.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[Se.map(([xe,Ge])=>{const qe=!!ce[xe];return i.jsxs("div",{className:"border rounded",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>dt(xe),children:[i.jsx("span",{className:"font-semibold",children:xe}),i.jsxs("span",{className:"text-xs text-gray-600",children:[Ge.length," ",Ge.length===1?"producto":"productos"]})]}),qe&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Ge.map(it=>i.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[i.jsx("div",{className:"font-semibold text-sm",children:it.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?i.jsx("div",{className:"font-semibold",children:it.packages}):i.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(it.packages),onChange:Et=>tt(it.id,Et.target.value),inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:it.remainingPackages})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),i.jsx("div",{className:"font-semibold",children:ti(it.pricePerPackage)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:ti(it.totalExpected)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"font-semibold",children:ti(it.grossProfit)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Gastos"}),i.jsx("div",{className:"font-semibold",children:ti(it.logisticAllocated??it.logisticAllocated??it.gastos??0)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:ti(it.uVendor)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"font-semibold",children:ti(Number(it.grossProfit||0)-Number(it.logisticAllocated??it.gastos??0)-Number(it.uVendor||0))})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?i.jsxs("div",{className:"font-semibold",children:[Number(it.vendorMarginPercent??Ae(P)).toFixed(2),"%"]}):i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border rounded p-1 text-right",value:String(it.vendorMarginPercent??Ae(P)),onChange:Et=>ft(it.id,Et.target.value),inputMode:"decimal"})]}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Je(it.id),children:"Quitar"})]})]},it.id))})]},xe)}),!de.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",te," / ",Ve]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:xt,disabled:te<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ht,disabled:te>=Ve,children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[i.jsx("div",{className:"text-xs text-gray-600",children:E?i.jsxs(i.Fragment,{children:["Editando: ",i.jsx("b",{children:E})]}):i.jsx(i.Fragment,{children:"Nuevo pedido (an no guardado)"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:mt,children:"Cancelar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:se,children:"Guardar pedido"})]})]}),h&&i.jsx("div",{className:"text-sm text-gray-700",children:h})]})]})})]})}const Mn=t=>Math.max(0,Math.floor(Number(t)||0)),Bb=t=>Math.round(t||0);function dse(t){const e=Math.max(1,Mn(t.unitsPerPackage||1)),r=Mn(t.totalUnits||0),n=Mn(t.quantity||0),a=Mn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function fQe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):dse(t)}function z$(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Mn(t.unitsPerPackage||1)),n=fQe(t);return Math.max(0,Math.floor(n/r))}function hQe(t){const e=Math.max(1,Mn(t.unitsPerPackage||1)),r=dse(t);return Math.max(0,Math.floor(r/e))}function Tb(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function yf(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function mh(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Tb(n)]=t[n]);for(const n of e){const a=r[Tb(n)];if(a!=null&&String(a).trim()!=="")return a}}function Um(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,o=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&o<1?n/(1-o):n,d=l-n,f=c-n,A=u-n,h=e>0?Bb(l/e):0,m=e>0?Bb(c/e):0,p=e>0?Bb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:A,unitPriceRivas:h,unitPriceSanJorge:m,unitPriceIsla:p}}function AQe(t){return Number(t.gainRivas||0)}function mQe(t){return Number(t.gainIsla||0)}function H5(t,e,r){const n=AQe(t),a=mQe(t),s=Number(t.subtotal||0),o=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:o}}function pQe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,f]=v.useState([]),[A,h]=v.useState(!1),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(""),[S,E]=v.useState(""),[F,P]=v.useState("20"),[k,D]=v.useState("15"),[Z,fe]=v.useState("30"),[me,pe]=v.useState("0"),[ye,ae]=v.useState([]),[je,Be]=v.useState(""),[O,G]=v.useState(""),[z,L]=v.useState(""),[Y,J]=v.useState("1"),[R,H]=v.useState("0"),[ne,ge]=v.useState("DATOS"),[U,Ue]=v.useState(""),[ie,te]=v.useState(1),Ee=15,ce=v.useMemo(()=>Math.max(1,Math.ceil(m.length/Ee)),[m.length]);v.useEffect(()=>te(1),[m.length]);const we=v.useMemo(()=>{const W=(ie-1)*Ee;return m.slice(W,W+Ee)},[m,ie]),Re=v.useMemo(()=>{const W=new Set;for(const Ie of d){const Je=String(Ie.category||"").trim();Je&&W.add(Je)}return Array.from(W).sort((Ie,Je)=>Ie.localeCompare(Je,"es"))},[d]);v.useEffect(()=>{!je&&Re.length>0&&Be(Re[0])},[Re]);const We=async()=>{h(!0);try{const W=await Lt(rr(Ct(Te,"products_candies"),gn("createdAt","desc"))),Ie=[];W.forEach(Je=>{const tt=Je.data();Ie.push({id:Je.id,name:String(tt.name??"").trim(),category:String(tt.category??"").trim()||"Caramelo",providerPrice:Number(tt.providerPrice??0),unitsPerPackage:Number(tt.unitsPerPackage??1)})}),f(Ie)}catch(W){console.error(W),n(" Error cargando catlogo de dulces.")}finally{h(!1)}};v.useEffect(()=>{We()},[t]);const pt=v.useMemo(()=>(je.trim().length>0?d.filter(Ie=>Ie.category===je):d).sort((Ie,Je)=>Ie.name.localeCompare(Je.name,"es")),[d,je]);v.useEffect(()=>{if(!O){L(""),J("1");return}const W=d.find(Ie=>Ie.id===O);W&&(L(String(W.providerPrice??0)),J(String(W.unitsPerPackage??1)))},[O,d]);const _t=()=>{j(null),_(""),E(""),ae([]),Be(Re[0]||""),G(""),L(""),H("0"),J("1"),P("20"),D("15"),fe("30"),pe("0"),ge("DATOS"),Ue("")},He=()=>{if(n(""),!O){n("Selecciona un producto del catlogo.");return}const W=d.find(ee=>ee.id===O);if(!W){n("Producto de catlogo no encontrado (refresca).");return}const Ie=Number(W.providerPrice||0),Je=Mn(R||0),tt=Mn(W.unitsPerPackage||0);if(Ie<0){n("El precio proveedor no puede ser negativo.");return}if(Je<=0){n("Los paquetes deben ser mayor que 0.");return}if(tt<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const ft=Number(F||0),T=Number(k||0),M=Number(Z||0),V=Um(Ie,Je,{marginR:ft,marginSJ:T,marginIsla:M});if(ye.find(ee=>ee.id===W.id))ae(ee=>ee.map(se=>{if(se.id!==W.id)return se;const Oe=Mn(se.packages||0)+Je,Ke=Um(Ie,Oe,{marginR:Number(se.marginRivas??ft),marginSJ:Number(se.marginSanJorge??T),marginIsla:Number(se.marginIsla??M)}),Fe=Mn(se.remainingPackages??se.packages)+Je;return{...se,providerPrice:Ie,unitsPerPackage:tt,packages:Oe,remainingPackages:Fe,...Ke}}));else{const ee={id:W.id,name:W.name,category:W.category,providerPrice:Ie,packages:Je,unitsPerPackage:tt,marginRivas:ft,marginSanJorge:T,marginIsla:M,subtotal:V.subtotal,totalRivas:V.totalRivas,totalSanJorge:V.totalSanJorge,totalIsla:V.totalIsla,gainRivas:V.gainRivas,gainSanJorge:V.gainSanJorge,gainIsla:V.gainIsla,unitPriceRivas:V.unitPriceRivas,unitPriceSanJorge:V.unitPriceSanJorge,unitPriceIsla:V.unitPriceIsla,remainingPackages:Je};ae(se=>[...se,ee])}G(""),H("0"),ge("ITEMS")},gt=W=>{ae(Ie=>Ie.filter(Je=>Je.id!==W))},ut=(W,Ie,Je)=>{ae(tt=>tt.map(ft=>{if(ft.id!==W)return ft;let T={...ft};if(Ie==="packages"&&(T.packages=Mn(Je||0)),Ie==="unitsPerPackage"&&(T.unitsPerPackage=Mn(Je||0)),Ie==="marginRivas"&&(T.marginRivas=Number(Je||0)),Ie==="marginIsla"&&(T.marginIsla=Number(Je||0)),Ie==="marginSanJorge"&&(T.marginSanJorge=Number(Je||0)),Ie==="packages"||Ie==="marginRivas"||Ie==="marginIsla"||Ie==="marginSanJorge"){const M=Um(T.providerPrice,T.packages,{marginR:Number(T.marginRivas||0),marginSJ:Number(T.marginSanJorge||0),marginIsla:Number(T.marginIsla||0)});T={...T,...M}}return(T.remainingPackages===void 0||T.remainingPackages===null)&&(T.remainingPackages=T.packages),T}))},vt=v.useMemo(()=>{const W=ye.reduce((T,M)=>T+Mn(M.packages),0),Ie=ye.reduce((T,M)=>T+Number(M.subtotal||0),0),Je=ye.reduce((T,M)=>T+Number(M.totalRivas||0),0),tt=ye.reduce((T,M)=>T+Number(M.totalSanJorge||0),0),ft=ye.reduce((T,M)=>T+Number(M.totalIsla||0),0);return{totalPackages:W,subtotal:Ie,totalRivas:Je,totalSanJorge:tt,totalIsla:ft}},[ye]),Pe=v.useMemo(()=>{const W=Math.max(0,yf(me||0)),Ie=Number(vt.subtotal||0),Je=ye.map(M=>H5(M,W,Ie)),tt=Je.reduce((M,V)=>M+Number(V.grossProfit||0),0),ft=Je.reduce((M,V)=>M+Number(V.grossProfitIsla||0),0),T=Je.reduce((M,V)=>M+Number(V.logisticAllocated||0),0);return{items:Je,logisticsTotal:W,grossTotal:tt,grossIslaTotal:ft,logisticAllocatedTotal:T}},[ye,me,vt.subtotal]),ct=v.useMemo(()=>{const W=String(U||"").trim().toLowerCase();return W?Pe.items.filter(Ie=>{const Je=String(Ie.name||"").toLowerCase(),tt=String(Ie.category||"").toLowerCase();return Je.includes(W)||tt.includes(W)}):Pe.items},[Pe.items,U]),[lt,be]=v.useState(1),ue=15,Le=v.useMemo(()=>Math.max(1,Math.ceil(ct.length/ue)),[ct.length]);v.useEffect(()=>be(1),[ct.length]);const ke=v.useMemo(()=>{const W=(lt-1)*ue;return ct.slice(W,W+ue)},[ct,lt]),[Ae,Ye]=v.useState({});v.useEffect(()=>Ye({}),[ct.length]);const[yt,At]=v.useState({});v.useEffect(()=>{const W={};for(const Ie of m)Ie&&Ie.id&&(W[Ie.id]=!1);At(W)},[m]);const he=v.useMemo(()=>({totalPackages:vt.totalPackages,subtotalCosto:vt.subtotal,esperadoRivas:vt.totalRivas,esperadoIsla:vt.totalIsla,gastosLogisticos:Pe.logisticsTotal,utilidadBrutaRivas:Pe.grossTotal,utilidadBrutaIsla:Pe.grossIslaTotal}),[vt,Pe]),re=()=>{if(n(""),!d.length){n(" No hay catlogo cargado para generar plantilla.");return}const W=Number(F||0),Ie=Number(Z||0),Je=d.slice().sort((q,ee)=>q.name.localeCompare(ee.name,"es")).map(q=>({Producto:q.name,Paquetes:"","Margen rivas":W,"Margen Isla":Ie,"P. unidad Rivas":"","P. unidad Isla":""})),tt=[{Campo:"Gastos logisticos",Valor:yf(me||0)}],ft=Us.book_new(),T=Us.json_to_sheet(Je),M=Us.json_to_sheet(tt);Us.book_append_sheet(ft,T,"Productos"),Us.book_append_sheet(ft,M,"Config");const V=S&&String(S).trim()||new Date().toISOString().slice(0,10);tF(ft,`plantilla_orden_maestra_${V}.xlsx`)},oe=()=>{if(n(""),!Pe.items.length){n(" No hay items para exportar.");return}const W=Pe.items.slice().sort((T,M)=>T.name.localeCompare(M.name,"es")).map(T=>({Categora:T.category,Producto:T.name,Paquetes:Mn(T.packages),"Paquetes restantes":Mn(T.remainingPackages??T.packages),"Und x Paquete":Mn(T.unitsPerPackage),"Precio proveedor":Number(T.providerPrice||0),Facturado:Number(T.subtotal||0),"Esperado Rivas":Number(T.totalRivas||0),"Esperado Isla":Number(T.totalIsla||0),"MV Rivas":Number(T.marginRivas||0),"MV Isla":Number(T.marginIsla||0),"Utilidad Bruta":Number(T.grossProfit||0),"Utilidad Bruta Isla":Number(T.grossProfitIsla||0),"Prorrateo logistico":Number(T.logisticAllocated||0),"Precio Rivas":Number(T.unitPriceRivas||0),"Precio Isla":Number(T.unitPriceIsla||0)})),Ie=[{KPI:"Paquetes totales",Valor:he.totalPackages},{KPI:"Subtotal costo",Valor:he.subtotalCosto},{KPI:"Esperado Rivas",Valor:he.esperadoRivas},{KPI:"Esperado Isla",Valor:he.esperadoIsla},{KPI:"Gastos logsticos",Valor:he.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:he.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:he.utilidadBrutaIsla}],Je=Us.book_new();Us.book_append_sheet(Je,Us.json_to_sheet(W),"Productos"),Us.book_append_sheet(Je,Us.json_to_sheet(Ie),"Resumen");const tt=S&&String(S).trim()||new Date().toISOString().slice(0,10),ft=I&&String(I).trim()||`Orden_${tt}`;tF(Je,`orden_maestra_${ft.replace(/[^\w\-]+/g,"_")}_${tt}.xlsx`)},Ve=v.useRef(null),[de,Se]=v.useState(!1),dt=()=>{var W;if(!d.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(W=Ve.current)==null||W.click()},xt=async W=>{var Je;const Ie=(Je=W.target.files)==null?void 0:Je[0];if(Ie){W.target.value="",Se(!0),n("");try{const tt=await Ie.arrayBuffer(),ft=O2(tt,{type:"array"}),T=ft.SheetNames||[],M=ft.Sheets.Productos||ft.Sheets.Plantilla||ft.Sheets[T[0]];if(!M){n(" No se encontr hoja de Productos/Plantilla.");return}const V=Us.sheet_to_json(M,{defval:""});if(!V.length){n(" El Excel viene vaco.");return}let q=0;const ee=ft.Sheets.Config;if(ee){const Fe=Us.sheet_to_json(ee,{defval:""}),Xe=new Map;for(const xe of Fe){const Ge=Tb(mh(xe,["Campo","Key","Nombre"])??""),qe=mh(xe,["Valor","Value"]);Ge&&Xe.set(Ge,qe)}Xe.has("gastos logisticos")&&(q=Math.max(0,yf(Xe.get("gastos logisticos"))))}else for(const Fe of V){const Xe=mh(Fe,["Gastos","Gasto","Gastos logisticos","Logistica"]),xe=yf(Xe);if(xe>0){q=xe;break}}pe(String(q||0));const se=new Map;for(const Fe of d)se.set(Tb(Fe.name),Fe);const Oe=[],Ke=new Map;for(let Fe=0;Fe<V.length;Fe++){const Xe=V[Fe],xe=mh(Xe,["Producto","Product","Nombre","Name"]),Ge=mh(Xe,["Paquetes","Packages"]),qe=mh(Xe,["Margen rivas","Margen Rivas","MV Rivas"]),it=mh(Xe,["Margen Isla","Margen isla","MV Isla"]),Et=mh(Xe,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),Pt=mh(Xe,["P. unidad Isla","P unidad Isla","Precio Isla"]),pr=Tb(xe);if(!pr)continue;const Ot=se.get(pr);if(!Ot){Oe.push(`Fila ${Fe+2}: Producto no existe en catlogo: "${String(xe).trim()}".`);continue}const Dt=Math.floor(yf(Ge));if(Dt<=0){Oe.push(`Fila ${Fe+2}: "Paquetes" invlido para "${Ot.name}".`);continue}const fr=String(qe??"").trim()!==""?yf(qe):Number(F||0),ir=String(it??"").trim()!==""?yf(it):Number(Z||0),Bt=Math.floor(yf(Et)),gr=Math.floor(yf(Pt)),Or=Ke.get(Ot.id);Or?Ke.set(Ot.id,{packages:Or.packages+Dt,mR:fr,mI:ir,puR:Bt>0?Bt:Or.puR,puI:gr>0?gr:Or.puI}):Ke.set(Ot.id,{packages:Dt,mR:fr,mI:ir,puR:Bt>0?Bt:void 0,puI:gr>0?gr:void 0})}const ot=[];Ke.forEach((Fe,Xe)=>{const xe=d.find(gr=>gr.id===Xe);if(!xe)return;const Ge=Number(xe.providerPrice||0),qe=Math.max(1,Mn(xe.unitsPerPackage||1)),it=Math.max(1,Mn(Fe.packages)),Et=Ge*it,Pt=Number(Fe.puR||0),pr=Number(Fe.puI||0),Ot=Pt>0||pr>0;let Dt=Fe.mR,fr=Fe.mI;const ir=Number(k||0);let Bt;if(Ot){const gr=Um(Ge,it,{marginR:Dt,marginSJ:ir,marginIsla:fr}),Or=Pt>0?Pt*it:gr.totalRivas,Pr=pr>0?pr*it:gr.totalIsla,Vr=Rr=>{if(!Number.isFinite(Rr)||Rr<=0)return 0;const an=(1-Et/Rr)*100;return Math.min(Math.max(an,0),99.9)};Pt>0&&(Dt=Vr(Or)),pr>0&&(fr=Vr(Pr)),Bt={subtotal:Et,totalRivas:Or,totalSanJorge:gr.totalSanJorge,totalIsla:Pr,gainRivas:Or-Et,gainSanJorge:gr.gainSanJorge,gainIsla:Pr-Et,unitPriceRivas:it>0?Bb(Or/it):0,unitPriceSanJorge:gr.unitPriceSanJorge,unitPriceIsla:it>0?Bb(Pr/it):0}}else Bt=Um(Ge,it,{marginR:Dt,marginSJ:ir,marginIsla:fr});ot.push({id:xe.id,name:xe.name,category:xe.category,providerPrice:Ge,packages:it,unitsPerPackage:qe,marginRivas:Dt,marginSanJorge:ir,marginIsla:fr,subtotal:Bt.subtotal,totalRivas:Bt.totalRivas,totalSanJorge:Bt.totalSanJorge,totalIsla:Bt.totalIsla,gainRivas:Bt.gainRivas,gainSanJorge:Bt.gainSanJorge,gainIsla:Bt.gainIsla,unitPriceRivas:Bt.unitPriceRivas,unitPriceSanJorge:Bt.unitPriceSanJorge,unitPriceIsla:Bt.unitPriceIsla,remainingPackages:it})}),ae(Fe=>{const Xe=new Map;Fe.forEach(xe=>Xe.set(xe.id,xe));for(const xe of ot){const Ge=Xe.get(xe.id);if(!Ge)Xe.set(xe.id,xe);else{const qe=Mn(Ge.packages)+Mn(xe.packages),it=Um(Ge.providerPrice,qe,{marginR:xe.marginRivas,marginSJ:Number(Ge.marginSanJorge||0),marginIsla:xe.marginIsla});Xe.set(xe.id,{...Ge,packages:qe,marginRivas:xe.marginRivas,marginIsla:xe.marginIsla,remainingPackages:Mn(Ge.remainingPackages??Ge.packages)+Mn(xe.packages),...it})}}return Array.from(Xe.values()).sort((xe,Ge)=>xe.name.localeCompare(Ge.name,"es"))}),ge("ITEMS"),Oe.length?(n(` Importado con detalles. Errores: ${Oe.length}.`),console.warn("Errores import:",Oe)):n(` Importacin lista: ${ot.length} productos agregados.`)}catch(tt){console.error(tt),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{Se(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const W=rr(Ct(Te,"candy_main_orders"),gn("createdAt","desc")),Ie=await Lt(W),Je=[];Ie.forEach(T=>{const M=T.data();Je.push({id:T.id,name:M.name??"",date:M.date??"",totalPackages:Number(M.totalPackages??0),subtotal:Number(M.subtotal??0),totalRivas:Number(M.totalRivas??0),totalSanJorge:Number(M.totalSanJorge??0),totalIsla:Number(M.totalIsla??0),marginRivas:Number(M.marginRivas??20),marginSanJorge:Number(M.marginSanJorge??15),marginIsla:Number(M.marginIsla??30),logisticsCost:Number(M.logisticsCost??0),createdAt:M.createdAt??ur.now()})}),p(Je);const tt=await Lt(Ct(Te,"inventory_candies")),ft={};tt.forEach(T=>{const M=T.data(),V=M.orderId;if(!V)return;const q=hQe(M),ee=z$(M);ft[V]||(ft[V]={orderId:V,totalPackages:0,remainingPackages:0}),ft[V].totalPackages+=q,ft[V].remainingPackages+=ee}),x(ft)}catch(W){console.error(W),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const ht=W=>{var Ie;return W.date?W.date:(Ie=W.createdAt)!=null&&Ie.toDate?W.createdAt.toDate().toISOString().slice(0,10):""},bt=async W=>{if(W.preventDefault(),n(""),l(!0),!ye.length){n("Agrega al menos un producto a la orden.");return}try{const Ie=new Date().toISOString().slice(0,10),Je=S||Ie,tt=Number(F||0),ft=Number(k||0),T=Number(Z||0),M=Math.max(0,yf(me||0));for(const Fe of ye){if(!String(Fe.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(Fe.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${Fe.name}).`);return}if(Mn(Fe.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${Fe.name}).`);return}if(Mn(Fe.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${Fe.name}).`);return}}const V=Number(vt.subtotal||0),q=ye.map(Fe=>H5(Fe,M,V)),ee={totalPackages:vt.totalPackages,subtotal:vt.subtotal,totalRivas:vt.totalRivas,totalSanJorge:vt.totalSanJorge,totalIsla:vt.totalIsla},se={name:I||`Pedido ${Je}`,date:Je,totalPackages:ee.totalPackages,subtotal:ee.subtotal,totalRivas:ee.totalRivas,totalSanJorge:ee.totalSanJorge,totalIsla:ee.totalIsla,marginRivas:tt,marginSanJorge:ft,marginIsla:T,logisticsCost:M,uBrutaGlobal:Pe.grossTotal,items:q};if(w){await xn(Wt(Te,"candy_main_orders",w),{...se});for(const xe of q){const Ge=await Lt(rr(Ct(Te,"inventory_candies"),or("orderId","==",w),or("productId","==",xe.id))),qe=Math.max(1,Mn(xe.unitsPerPackage||1)),it=Mn(xe.packages)*qe;if(Ge.empty)await Tn(Ct(Te,"inventory_candies"),{productId:xe.id,productName:xe.name,category:xe.category,measurement:"unidad",quantity:it,remaining:it,packages:Mn(xe.packages),remainingPackages:Mn(xe.packages),unitsPerPackage:qe,totalUnits:it,providerPrice:xe.providerPrice,subtotal:xe.subtotal,totalRivas:xe.totalRivas,totalSanJorge:xe.totalSanJorge,totalIsla:xe.totalIsla,gainRivas:xe.gainRivas,gainSanJorge:xe.gainSanJorge,gainIsla:xe.gainIsla,unitPriceRivas:xe.unitPriceRivas,unitPriceSanJorge:xe.unitPriceSanJorge,unitPriceIsla:xe.unitPriceIsla,date:Je,createdAt:ur.now(),status:"PENDIENTE",orderId:w});else for(const Et of Ge.docs){const Pt=Et.data(),pr=Mn(Pt.totalUnits??0),Ot=Mn(Pt.remaining??pr),Dt=it-pr,fr=Math.max(0,Ot+Dt),ir=Math.max(0,Math.floor(fr/qe));await xn(Wt(Te,"inventory_candies",Et.id),{productName:xe.name,category:xe.category,unitsPerPackage:qe,totalUnits:it,quantity:it,remaining:fr,packages:Mn(xe.packages),remainingPackages:ir,providerPrice:xe.providerPrice,subtotal:xe.subtotal,totalRivas:xe.totalRivas,totalSanJorge:xe.totalSanJorge,totalIsla:xe.totalIsla,gainRivas:xe.gainRivas,gainSanJorge:xe.gainSanJorge,gainIsla:xe.gainIsla,unitPriceRivas:xe.unitPriceRivas,unitPriceSanJorge:xe.unitPriceSanJorge,unitPriceIsla:xe.unitPriceIsla,date:Je})}}const Fe=await Lt(rr(Ct(Te,"inventory_candies"),or("orderId","==",w))),Xe=new Set(q.map(xe=>xe.id));for(const xe of Fe.docs){const Ge=xe.data(),qe=String(Ge.productId||"");qe&&!Xe.has(qe)&&await Bn(Wt(Te,"inventory_candies",xe.id))}p(xe=>xe.map(Ge=>Ge.id===w?{...Ge,name:se.name,date:se.date,totalPackages:se.totalPackages,subtotal:se.subtotal,totalRivas:se.totalRivas,totalSanJorge:se.totalSanJorge,totalIsla:se.totalIsla,marginRivas:se.marginRivas,marginSanJorge:se.marginSanJorge,marginIsla:se.marginIsla,logisticsCost:se.logisticsCost}:Ge)),n(" Orden maestra actualizada (pedido + inventario)."),_t(),b(!1),e();return}const Ke=(await Tn(Ct(Te,"candy_main_orders"),{...se,createdAt:ur.now()})).id,ot=zd(Te);for(const Fe of q){const Xe=Math.max(1,Mn(Fe.unitsPerPackage||1)),xe=Mn(Fe.packages)*Xe,Ge=Wt(Ct(Te,"inventory_candies"));ot.set(Ge,{productId:Fe.id,productName:Fe.name,category:Fe.category,measurement:"unidad",quantity:xe,remaining:xe,packages:Mn(Fe.packages),remainingPackages:Mn(Fe.packages),unitsPerPackage:Xe,totalUnits:xe,providerPrice:Fe.providerPrice,subtotal:Fe.subtotal,totalRivas:Fe.totalRivas,totalSanJorge:Fe.totalSanJorge,totalIsla:Fe.totalIsla,gainRivas:Fe.gainRivas,gainSanJorge:Fe.gainSanJorge,gainIsla:Fe.gainIsla,unitPriceRivas:Fe.unitPriceRivas,unitPriceSanJorge:Fe.unitPriceSanJorge,unitPriceIsla:Fe.unitPriceIsla,date:Je,createdAt:ur.now(),status:"PENDIENTE",orderId:Ke})}await ot.commit(),n(" Orden maestra creada y registrada en inventario."),_t(),b(!1),e()}catch(Ie){console.error(Ie),n(" Error al guardar orden maestra.")}finally{l(!1)}},et=async W=>{try{s(!0),n(""),j(W.id),_(W.name),E(W.date),P(String(W.marginRivas??20)),D(String(W.marginSanJorge??15)),fe(String(W.marginIsla??30));const Ie=Number(W.logisticsCost??0);pe(String(Ie||0)),ge("DATOS");const Je=Wt(Te,"candy_main_orders",W.id),tt=await js(Je);if(!tt.exists()){n(" No se encontr la orden.");return}const ft=tt.data(),T=Array.isArray(ft.items)?ft.items:[],M=await Lt(rr(Ct(Te,"inventory_candies"),or("orderId","==",W.id))),V={};M.forEach(ee=>{const se=ee.data(),Oe=String(se.productId||"");if(!Oe)return;const Ke=z$(se);V[Oe]=(V[Oe]||0)+Ke});const q=T.map(ee=>{const se=d.find(Ge=>Ge.id===ee.id),Oe=Number((se==null?void 0:se.providerPrice)??ee.providerPrice??0),Ke=Math.max(1,Mn((se==null?void 0:se.unitsPerPackage)??ee.unitsPerPackage??1)),ot=Number(ee.marginRivas??0),Fe=Number(ee.marginSanJorge??Number(k||0)),Xe=Number(ee.marginIsla??0),xe=Um(Oe,Mn(ee.packages||0),{marginR:ot,marginSJ:Fe,marginIsla:Xe});return{...ee,name:String((se==null?void 0:se.name)??ee.name??"").trim(),category:String((se==null?void 0:se.category)??ee.category??"Caramelo").trim(),providerPrice:Oe,unitsPerPackage:Ke,remainingPackages:V[ee.id]??ee.remainingPackages??ee.packages??0,...xe}});ae(q),b(!0)}catch(Ie){console.error(Ie),n(" Error al abrir orden maestra.")}finally{s(!1)}},Ne=async W=>{if(confirm(`Eliminar la orden "${W.name}" y todo su inventario asociado?`)){n("");try{const Je=await Lt(rr(Ct(Te,"inventory_candies"),or("orderId","==",W.id)));for(const tt of Je.docs)await Bn(Wt(Te,"inventory_candies",tt.id));await Bn(Wt(Te,"candy_main_orders",W.id)),p(tt=>tt.filter(ft=>ft.id!==W.id)),n(" Orden maestra eliminada."),e()}catch(Je){console.error(Je),n(" Error al eliminar orden maestra.")}}},mt=async()=>{if(!c)try{u(!0),n("");const W=await Lt(Ct(Te,"candy_main_orders"));let Ie=zd(Te),Je=0,tt=0;const ft=(T,M)=>Math.abs(Number(T||0)-Number(M||0))>.01;W.forEach(T=>{const M=T.data(),V=Array.isArray(M.items)?M.items:[];if(!V.length)return;const q=V.reduce((Fe,Xe)=>Fe+Number(Xe.subtotal||0),0);let ee=Number(M.logisticsCost??M.gastosLogisticos??M.gastos??0);if(Number.isFinite(ee)||(ee=0),!ee){const Fe=V.reduce((Xe,xe)=>Xe+Number(xe.logisticAllocated??0),0);ee=Number(Fe||0)}const se=V.map(Fe=>H5(Fe,ee,q)),Oe=se.reduce((Fe,Xe)=>Fe+Number(Xe.grossProfit||0),0);if(!(ft(M.logisticsCost,ee)||ft(M.uBrutaGlobal,Oe)||se.some((Fe,Xe)=>{const xe=V[Xe]||{};return ft(xe.logisticAllocated,Fe.logisticAllocated)||ft(xe.grossProfit,Fe.grossProfit)||ft(xe.grossProfitIsla,Fe.grossProfitIsla)})))return;const ot=Wt(Te,"candy_main_orders",T.id);Ie.update(ot,{logisticsCost:ee,uBrutaGlobal:Oe,items:se,updatedAt:ur.now()}),Je+=1,tt+=1,Je>=400&&(Ie.commit(),Ie=zd(Te),Je=0)}),Je>0&&await Ie.commit(),n(` Ordenes maestras actualizadas: ${tt}`),e()}catch(W){console.error(W),n(" Error actualizando prorrateo de rdenes maestras.")}finally{u(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dc,{onClick:e,loading:a||A}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-gray-200 text-gray-800 px-2 md:px-3 py-2 rounded-2xl hover:bg-gray-300 disabled:opacity-60",onClick:mt,disabled:c,children:c?"Actualizando prorrateo...":"Actualizar prorrateo"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{_t(),b(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o&&i.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:w?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsx("div",{className:"ml-auto flex gap-2",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:o,onClick:()=>{_t(),b(!1)},children:"Cerrar"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:me,onChange:W=>pe(W.target.value),placeholder:"0",min:0})]})}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ge("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>ge("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>ge("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",ye.length,")"]}),i.jsx("button",{type:"button",onClick:()=>ge("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:bt,className:"space-y-4 pt-4",children:[i.jsx("input",{ref:Ve,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:xt}),i.jsx("div",{className:`${ne==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:I,onChange:W=>_(W.target.value),placeholder:"Ej: Pedido enero 19"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:S,onChange:W=>E(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:F,onChange:W=>P(W.target.value)})]}),i.jsx("input",{type:"hidden",value:k,readOnly:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:Z,onChange:W=>fe(W.target.value)})]})]})}),i.jsx("div",{className:`${ne==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:je,onChange:W=>{Be(W.target.value),G("")},disabled:A,children:Re.length===0?i.jsx("option",{value:"",children:A?"Cargando...":"No hay categoras en catlogo"}):Re.map(W=>i.jsx("option",{value:W,children:W},W))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:W=>G(W.target.value),children:[i.jsx("option",{value:"",children:A?"Cargando catlogo...":"Selecciona producto"}),pt.map(W=>i.jsx("option",{value:W.id,children:W.name},W.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:z,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:R,onChange:W=>H(W.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:Y,readOnly:!0})]})]}),i.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:i.jsx("button",{type:"button",onClick:He,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),i.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:re,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),i.jsx("button",{type:"button",onClick:dt,disabled:de,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:de?"Importando...":"Importar Excel"}),i.jsx("button",{type:"button",onClick:oe,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),i.jsx("div",{className:`${ne==="ITEMS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",i.jsx("span",{className:"font-semibold",children:ye.length}),U.trim()?i.jsxs(i.Fragment,{children:[" "," Mostrando"," ",i.jsx("span",{className:"font-semibold",children:ct.length})]}):null]}),i.jsx("input",{value:U,onChange:W=>Ue(W.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Categora"}),i.jsx("th",{className:"text-left p-2",children:"Producto"}),i.jsx("th",{className:"text-right p-2",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2",children:"Restantes"}),i.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),i.jsx("th",{className:"text-right p-2",children:"Precio prov"}),i.jsx("th",{className:"text-right p-2",children:"Facturado"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),i.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),i.jsx("th",{className:"text-right p-2",children:"MV Isla"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),i.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),i.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),i.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[ke.map(W=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:W.category}),i.jsx("td",{className:"p-2 font-semibold",children:W.name}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:W.packages,onChange:Ie=>ut(W.id,"packages",Ie.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("span",{className:"inline-block min-w-[60px] text-right",children:Mn(W.remainingPackages??W.packages)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:W.unitsPerPackage,onChange:Ie=>ut(W.id,"unitsPerPackage",Ie.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(W.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(W.marginRivas??0),onChange:Ie=>ut(W.id,"marginRivas",Ie.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(W.marginIsla??0),onChange:Ie=>ut(W.id,"marginIsla",Ie.target.value)})}),i.jsx("td",{className:"p-2 text-right",children:Number(W.grossProfit||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.grossProfitIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.logisticAllocated||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 text-right",children:Number(W.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>gt(W.id),children:"Quitar"})})]},W.id)),ct.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((lt-1)*ue+1,ct.length),"-",Math.min(lt*ue,ct.length)," ","de ",ct.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:lt<=1,onClick:()=>be(W=>Math.max(1,W-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[lt," / ",Le]}),i.jsx("button",{type:"button",disabled:lt>=Le,onClick:()=>be(W=>Math.min(Le,W+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),i.jsx("div",{className:"md:hidden space-y-3",children:ct.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):ct.map(W=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:W.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:W.category})]}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>gt(W.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.packages,onChange:Ie=>ut(W.id,"packages",Ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:W.remainingPackages??W.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.unitsPerPackage,onChange:Ie=>ut(W.id,"unitsPerPackage",Ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(W.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.marginRivas??0,onChange:Ie=>ut(W.id,"marginRivas",Ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:W.marginIsla??0,onChange:Ie=>ut(W.id,"marginIsla",Ie.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),i.jsx("div",{className:"font-semibold",children:Number(W.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalIsla||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),i.jsx("div",{className:"font-semibold",children:Number(W.logisticAllocated||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.grossProfit||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.grossProfitIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),i.jsx("div",{className:"font-semibold",children:W.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),i.jsx("div",{className:"font-semibold",children:W.unitPriceIsla})]})]})]},W.id))})]})}),i.jsxs("div",{className:`${ne==="TOTALES"?"block":"hidden"} md:block`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:he.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(he.subtotalCosto||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),i.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(he.esperadoRivas||0).toFixed(2),i.jsx("br",{}),"Isla: ",Number(he.esperadoIsla||0).toFixed(2)]})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(he.gastosLogisticos||0).toFixed(2)})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(he.utilidadBrutaRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(he.utilidadBrutaIsla||0).toFixed(2)})]})]}),i.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:oe,disabled:!Pe.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:_t,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{_t(),b(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:o||ye.length===0,children:o?"Guardando...":"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{ge(ne==="DATOS"&&!w?"AGREGAR":ne==="DATOS"||ne==="AGREGAR"?"ITEMS":ne==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):m.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):m.map(W=>{const Ie=g[W.id],Je=ht(W),tt=W.totalPackages>0?(W.subtotal/W.totalPackages).toFixed(2):"0.00",ft=Number(W.logisticsCost||0),T=Number(W.totalRivas||0)-Number(W.subtotal||0);return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:Je}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:W.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>et(W),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Ne(W),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:W.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Ie?Ie.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:tt})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(W.subtotal||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(W.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Gastos log."}),i.jsx("div",{className:"font-semibold",children:ft.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),i.jsx("div",{className:"font-semibold",children:T.toFixed(2)})]})]})]},W.id)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),i.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),i.jsx("th",{className:"p-2 border",children:"Gastos log."}),i.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):we.map(W=>{const Ie=g[W.id],Je=ht(W),tt=W.totalPackages>0?(W.subtotal/W.totalPackages).toFixed(2):"0.00",ft=Number(W.logisticsCost||0),T=Number(W.totalRivas||0)-Number(W.subtotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Je}),i.jsx("td",{className:"p-2 border text-left",children:W.name}),i.jsx("td",{className:"p-2 border",children:W.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ie?Ie.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:tt}),i.jsx("td",{className:"p-2 border",children:Number(W.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(W.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(W.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:ft.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:T.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>et(W),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ne(W),children:"Borrar"})]})})]},W.id)})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((ie-1)*Ee+1,m.length),"-",Math.min(ie*Ee,m.length)," de ",m.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:ie<=1,onClick:()=>te(W=>Math.max(1,W-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[ie," / ",ce]}),i.jsx("button",{type:"button",disabled:ie>=ce,onClick:()=>te(W=>Math.min(ce,W+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const n0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $5(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,o=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),f=a*(1+c/100),A=u-a,h=d-a,m=f-a,p=u/s,g=d/s,x=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(A.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function W$(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function yc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function G5(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function gQe(){var L,Y,J;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(Cr(md(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Cr(Ad(new Date),"yyyy-MM-dd")),[A,h]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(0),[F,P]=v.useState(""),[k,D]=v.useState(""),[Z,fe]=v.useState(0),[me,pe]=v.useState(0),[ye,ae]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const R=rr(Ct(Te,"candy_main_orders"),gn("createdAt","desc")),H=await Lt(R),ne=[];H.forEach(Ue=>{const ie=Ue.data();ne.push({id:Ue.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??ur.now()})}),e(ne);const ge=await Lt(rr(Ct(Te,"inventory_candies"))),U={};ge.forEach(Ue=>{const ie=Ue.data(),te=ie.orderId;if(!te)return;const Ee=Number(ie.unitsPerPackage||1)||1,ce=Number(ie.totalUnits??(ie.packages||0)*Ee),we=Math.round(ce/Ee),Re=Number(ie.remaining??ie.totalUnits??ce),We=Number(ie.remainingPackages??NaN),pt=Number.isFinite(We)?Math.round(We):Math.round(Re/Ee);U[te]||(U[te]={orderId:te,totalPackages:0,remainingPackages:0}),U[te].totalPackages+=we,U[te].remainingPackages+=pt}),n(U)}catch(R){console.error(R),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const je=v.useMemo(()=>t.filter(R=>{var ne;const H=R.date||((ne=R.createdAt)!=null&&ne.toDate?R.createdAt.toDate().toISOString().slice(0,10):"");return!(!H||c&&H<c||d&&H>d)}),[t,c,d]),Be=v.useMemo(()=>{let R=0,H=0,ne=0,ge=0,U=0,Ue=0;for(const ie of je){R+=ie.totalPackages,H+=ie.subtotal,ne+=ie.totalRivas,ge+=ie.totalSanJorge,U+=ie.totalIsla;const te=r[ie.id];te&&(Ue+=te.remainingPackages)}return{totalPaquetes:R,totalSubtotal:H,totalRivas:ne,totalSJ:ge,totalIsla:U,totalPaquetesRestantes:Ue,totalPedidos:je.length}},[je,r]),O=async(R,H,ne)=>{if(!g)return;const ge=Number(ne||0),U=y.map(te=>te.id!==R?te:$5({...te,[H]:ge}));b(U);const Ue=U.find(te=>te.id===R);if(!Ue)return;const ie=W$(U);try{await xn(Wt(Te,"products_candies",R),{marginRivas:Ue.marginRivas,marginSanJorge:Ue.marginSanJorge,marginIsla:Ue.marginIsla,subtotal:Ue.subtotal,totalRivas:Ue.totalRivas,totalSanJorge:Ue.totalSanJorge,totalIsla:Ue.totalIsla,unitPriceRivas:Ue.unitPriceRivas,unitPriceSanJorge:Ue.unitPriceSanJorge,unitPriceIsla:Ue.unitPriceIsla,gainRivas:Ue.gainRivas,gainSanJorge:Ue.gainSanJorge,gainIsla:Ue.gainIsla}),await xn(Wt(Te,"candy_main_orders",g.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),x(te=>te&&{...te,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(te){console.error(te),l(" Error actualizando mrgenes del producto.")}},G=async()=>{if(g)try{l("");const R=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,H=Number.isFinite(I)&&I!==0?I:g.marginSanJorge||0,ne=Number.isFinite(S)&&S!==0?S:g.marginIsla||0,ge=$5({id:"tmp",name:F.trim(),category:k.trim(),providerPrice:Number(Z||0),packages:Number(me||0),unitsPerPackage:Number(ye||1),marginRivas:Number(R||0),marginSanJorge:Number(H||0),marginIsla:Number(ne||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(me||0)}),U=await Tn(Ct(Te,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ge.name,category:ge.category,providerPrice:ge.providerPrice,packages:ge.packages,unitsPerPackage:ge.unitsPerPackage,marginRivas:ge.marginRivas,marginSanJorge:ge.marginSanJorge,marginIsla:ge.marginIsla,gainRivas:ge.gainRivas,gainSanJorge:ge.gainSanJorge,gainIsla:ge.gainIsla,subtotal:ge.subtotal,totalRivas:ge.totalRivas,totalSanJorge:ge.totalSanJorge,totalIsla:ge.totalIsla,unitPriceRivas:ge.unitPriceRivas,unitPriceSanJorge:ge.unitPriceSanJorge,unitPriceIsla:ge.unitPriceIsla,createdAt:ur.now()}),ie=[{...ge,id:U.id},...y];b(ie);const te=W$(ie);await xn(Wt(Te,"candy_main_orders",g.id),{totalPackages:te.totalPackages,subtotal:Number(te.subtotal.toFixed(2)),totalRivas:Number(te.totalRivas.toFixed(2)),totalSanJorge:Number(te.totalSanJorge.toFixed(2)),totalIsla:Number(te.totalIsla.toFixed(2))}),x(Ee=>Ee&&{...Ee,totalPackages:te.totalPackages,subtotal:Number(te.subtotal.toFixed(2)),totalRivas:Number(te.totalRivas.toFixed(2)),totalSanJorge:Number(te.totalSanJorge.toFixed(2)),totalIsla:Number(te.totalIsla.toFixed(2))}),j(0),_(0),E(0),P(""),D(""),fe(0),pe(0),ae(1),l(" Producto agregado con mrgenes por sucursal.")}catch(R){console.error(R),l(" Error agregando producto al pedido.")}},z=async R=>{try{x(R),b([]),h(!0),p(!0),l("");const H=await Lt(rr(Ct(Te,"inventory_candies"),or("orderId","==",R.id))),ne={};H.forEach(Ue=>{const ie=Ue.data(),te=ie.productId;if(!te)return;const Ee=Number(ie.unitsPerPackage||1)||1,ce=Number(ie.remaining??ie.totalUnits??0),we=Number(ie.remainingPackages??NaN),Re=Number.isFinite(we)?Math.round(we):Math.round(ce/Ee);ne[te]=(ne[te]||0)+Re});const ge=await Lt(rr(Ct(Te,"products_candies"),or("orderId","==",R.id))),U=[];ge.forEach(Ue=>{const ie=Ue.data(),te=yc(ie.providerPrice,0),Ee=yc(ie.packages,0),ce=ie.subtotal??te*Ee,we=G5({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:ce,orderMargin:R.marginRivas||0}),Re=G5({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:ce,orderMargin:R.marginSanJorge||0}),We=G5({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:ce,orderMargin:R.marginIsla||0}),pt=$5({id:Ue.id,name:ie.name??"",category:ie.category??"",providerPrice:te,packages:Ee,unitsPerPackage:yc(ie.unitsPerPackage,1),marginRivas:Number(we||0),marginSanJorge:Number(Re||0),marginIsla:Number(We||0),subtotal:yc(ie.subtotal,0),totalRivas:yc(ie.totalRivas,0),totalSanJorge:yc(ie.totalSanJorge,0),totalIsla:yc(ie.totalIsla,0),gainRivas:yc(ie.gainRivas,0),gainSanJorge:yc(ie.gainSanJorge,0),gainIsla:yc(ie.gainIsla,0),unitPriceRivas:yc(ie.unitPriceRivas,0),unitPriceSanJorge:yc(ie.unitPriceSanJorge,0),unitPriceIsla:yc(ie.unitPriceIsla,0),remainingPackages:ne[Ue.id]??yc(ie.packages,0)});U.push(pt)}),b(U)}catch(H){console.error(H),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:Be.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Be.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Be.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",n0(Be.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",n0(Be.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",n0(Be.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",n0(Be.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):je.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):je.map(R=>{var ie;const H=R.totalPackages>0?Math.round(R.totalRivas/R.totalPackages):0,ne=R.totalPackages>0?Math.round(R.totalSanJorge/R.totalPackages):0,ge=R.totalPackages>0?Math.round(R.totalIsla/R.totalPackages):0,U=R.date||((ie=R.createdAt)!=null&&ie.toDate?R.createdAt.toDate().toISOString().slice(0,10):""),Ue=r[R.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:U}),i.jsx("td",{className:"p-2 border",children:R.name}),i.jsx("td",{className:"p-2 border",children:R.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ue?Ue.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:H}),i.jsx("td",{className:"p-2 border",children:ne}),i.jsx("td",{className:"p-2 border",children:ge}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(R),children:"Ver pedido"})})]},R.id)})})]})}),A&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),x(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:g.date||((L=g.createdAt)!=null&&L.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((Y=r[g.id])==null?void 0:Y.totalPackages)??g.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((J=r[g.id])==null?void 0:J.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:n0(g.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:n0(g.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:R=>j(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:R=>_(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:R=>E(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:F,onChange:R=>P(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:k,onChange:R=>D(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:Z,onChange:R=>fe(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:me,onChange:R=>pe(Number(R.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ye,onChange:R=>ae(Number(R.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:G,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(R=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:R.name}),i.jsx("td",{className:"p-2 border",children:R.category}),i.jsx("td",{className:"p-2 border",children:R.packages}),i.jsx("td",{className:"p-2 border",children:R.remainingPackages??R.packages}),i.jsx("td",{className:"p-2 border",children:R.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:R.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginRivas??0,onChange:H=>O(R.id,"marginRivas",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginSanJorge??0,onChange:H=>O(R.id,"marginSanJorge",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginIsla??0,onChange:H=>O(R.id,"marginIsla",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:R.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:R.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:R.unitPriceIsla})]},R.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!A&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Ka=t=>Math.round((Number(t)||0)*100)/100,cx=t=>Math.round((Number(t)||0)*1e3)/1e3,$o=t=>Number(t??0).toFixed(2),Qm=t=>Number(t??0).toFixed(3),xQe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Cr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Ka(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Ka(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let A=0;return A=Ka(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:A,processedDate:u||""}]};function vQe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[A,h]=v.useState("ALL"),m=Cr(new Date,"yyyy-MM-dd"),[p,g]=v.useState(m),[x,y]=v.useState(m),[b,w]=v.useState("ALL"),[j,I]=v.useState(null),[_,S]=v.useState(0),[E,F]=v.useState(0),[P,k]=v.useState(""),[D,Z]=v.useState(0),[fe,me]=v.useState("0"),pe=v.useRef(null),ye=n&&n.length?n:t,ae=!ye||ln(ye,"admin"),je=ln(ye,"vendedor_dulces"),Be=(e||"").trim().toLowerCase(),[O,G]=v.useState([]);v.useEffect(()=>{if(!p||!x)return;u(!0);const ue=rr(Ct(Te,"sales_candies"),or("date",">=",p),or("date","<=",x),gn("date","asc")),Le=ad(ue,ke=>{const Ae=[];ke.forEach(Ye=>{const yt=xQe(Ye.data(),Ye.id);Ae.push(...yt)}),s(Ae),u(!1)},ke=>{console.error("Error cargando ventas por periodo:",ke),s([]),u(!1)});return()=>Le()},[p,x]),v.useEffect(()=>{(async()=>{const Le=rr(Ct(Te,"daily_closures_candies"),or("date","==",m)),ke=await Lt(Le);if(ke.empty)l(null);else{const Ae=ke.docs[0];l({id:Ae.id,...Ae.data()})}})()},[m]),v.useEffect(()=>{(async()=>{try{const Le=await Lt(Ct(Te,"sellers_candies")),ke=[];Le.forEach(Ae=>{const Ye=Ae.data();ke.push({id:Ae.id,name:Ye.name||"",commissionPercent:Number(Ye.commissionPercent||0)})}),G(ke)}catch(Le){console.error("Error cargando sellers_candies",Le)}})()},[]);const z=ue=>Ka(Number(ue.vendorCommissionAmount??0)||0),L=jo.useMemo(()=>{let ue=[...a];return A==="FLOTANTE"&&(ue=ue.filter(Le=>Le.status==="FLOTANTE")),A==="PROCESADA"&&(ue=ue.filter(Le=>Le.status==="PROCESADA")),ae&&b!=="ALL"&&(ue=ue.filter(Le=>(Le.vendorId||"")===b)),je&&(r?ue=ue.filter(Le=>(Le.vendorId||"")===r):Be?ue=ue.filter(Le=>(Le.sellerEmail||"").toLowerCase()===Be):ue=[]),ue},[A,a,ae,b,je,r,Be]),Y=jo.useMemo(()=>L.filter(ue=>ue.status==="FLOTANTE").length,[L]),J=jo.useMemo(()=>L.filter(ue=>ue.status==="PROCESADA").length,[L]),R=jo.useMemo(()=>L.filter(ue=>ue.type==="CREDITO").length,[L]),H=jo.useMemo(()=>L.filter(ue=>ue.type!=="CREDITO").length,[L]),ne=cx(L.reduce((ue,Le)=>ue+(Le.quantity||0),0)),ge=Ka(L.reduce((ue,Le)=>ue+Number(Le.cogsAmount??0),0)),U=Ka(L.reduce((ue,Le)=>ue+(Le.amount||0),0)),Ue=Ka(U-ge);let ie=0,te=0,Ee=0,ce=0,we=0,Re=0,We=0;L.forEach(ue=>{const Le=Number(ue.amount||0),ke=Number(ue.amountReceived||0),Ae=z(ue);we+=Ae,ue.type==="CREDITO"?(ie+=ue.quantity||0,Ee+=Le-ke,We+=Ae):(te+=ue.quantity||0,ce+=Le,Re+=Ae)}),Ee=Ka(Ee),ce=Ka(ce),we=Ka(we),Re=Ka(Re),We=Ka(We);const pt=jo.useMemo(()=>{const ue={};for(const Le of L){const ke=(Le.vendorId||"").trim();if(!ke||Le.type==="CREDITO")continue;const Ae=z(Le);if(!ue[ke]){const Ye=O.find(yt=>yt.id===ke);ue[ke]={vendorId:ke,name:(Ye==null?void 0:Ye.name)||Le.userEmail||"(sin vendedor)",total:0}}ue[ke].total=Ka(ue[ke].total+Ae)}return Object.values(ue).filter(Le=>Le.total>0).sort((Le,ke)=>ke.total-Le.total)},[L,O]),_t=jo.useMemo(()=>{const ue={};for(const Le of L){const ke=(Le.vendorId||"").trim();if(!ke||Le.type!=="CREDITO")continue;const Ae=z(Le);if(!ue[ke]){const Ye=O.find(yt=>yt.id===ke);ue[ke]={vendorId:ke,name:(Ye==null?void 0:Ye.name)||Le.userEmail||"(sin vendedor)",total:0}}ue[ke].total=Ka(ue[ke].total+Ae)}return Object.values(ue).filter(Le=>Le.total>0).sort((Le,ke)=>ke.total-Le.total)},[L,O]),He={};L.forEach(ue=>{const Le=ue.productName||"(sin nombre)";He[Le]||(He[Le]={totalQuantity:0,totalAmount:0,totalCommission:0}),He[Le].totalQuantity=cx(He[Le].totalQuantity+(ue.quantity||0)),He[Le].totalAmount=Ka(He[Le].totalAmount+(ue.amount||0)),He[Le].totalCommission=Ka(He[Le].totalCommission+z(ue))});const gt=Object.entries(He).map(([ue,Le])=>({productName:ue,totalQuantity:Le.totalQuantity,totalAmount:Le.totalAmount,totalCommission:Le.totalCommission})),ut=async()=>{if(ae)try{const ue=L.filter(re=>re.status==="FLOTANTE");if(ue.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Le={totalCharged:Ka(ue.reduce((re,oe)=>re+(oe.amount||0),0)),totalSuggested:Ka(ue.reduce((re,oe)=>re+(oe.amountSuggested||0),0)),totalUnits:cx(ue.reduce((re,oe)=>re+(oe.quantity||0),0)),totalCOGS:Ka(ue.reduce((re,oe)=>re+Number(oe.cogsAmount??0),0))},ke=Ka(Le.totalCharged-Le.totalSuggested),Ae=Ka(Le.totalCharged-Le.totalCOGS),Ye=ue.reduce((re,oe)=>{const Ve=Number(oe.quantity||0),de=Number(oe.amount||0),Se=Number(oe.vendorCommissionAmount||0);return oe.type==="CREDITO"?(re.packsCredit+=Ve,re.amountCredit+=de,re.comCredit+=Se):(re.packsCash+=Ve,re.amountCash+=de,re.comCash+=Se),re},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),yt={totalPacksCash:cx(Ye.packsCash),totalPacksCredit:cx(Ye.packsCredit),totalAmountCash:Ka(Ye.amountCash),totalAmountCredit:Ka(Ye.amountCredit),totalCommissionCash:Ka(Ye.comCash),totalCommissionCredit:Ka(Ye.comCredit)},At=await Tn(Ct(Te,"daily_closures_candies"),{date:m,createdAt:ur.now(),periodStart:p,periodEnd:x,totalCharged:Le.totalCharged,totalSuggested:Le.totalSuggested,totalDifference:ke,totalUnits:Le.totalUnits,totalCOGS:Le.totalCOGS,grossProfit:Ae,...yt,products:ue.map(re=>({productName:re.productName,quantity:re.quantity,amount:re.amount})),sales:ue.map(re=>({id:re.id,productName:re.productName,quantity:re.quantity,amount:re.amount,amountSuggested:re.amountSuggested,userEmail:re.userEmail,clientName:re.clientName,amountReceived:re.amountReceived,change:re.change,status:re.status,cogsAmount:re.cogsAmount??0,avgUnitCost:re.avgUnitCost??null,allocations:re.allocations??[],date:re.date,type:re.type??"CONTADO",vendorId:re.vendorId??"",vendorCommissionAmount:Number(re.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(ue.reduce((re,oe)=>{const Ve=oe.productName||"(sin nombre)";return re[Ve]||(re[Ve]={totalQuantity:0,totalAmount:0}),re[Ve].totalQuantity=cx(re[Ve].totalQuantity+(oe.quantity||0)),re[Ve].totalAmount=Ka(re[Ve].totalAmount+(oe.amount||0)),re},{})).map(([re,oe])=>({productName:re,totalQuantity:oe.totalQuantity,totalAmount:oe.totalAmount}))}),he=zd(Te);ue.forEach(re=>{he.update(Wt(Te,"sales_candies",re.id.split("#")[0]),{status:"PROCESADA",closureId:At.id,closureDate:m,processedDate:m,processedAt:ur.now()})}),await he.commit(),f(` Cierre guardado. Ventas procesadas: ${ue.length}. (Proceso: ${m})`)}catch(ue){console.error(ue),f(" Error al guardar el cierre de dulces.")}},vt=async ue=>{if(ae&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await xn(Wt(Te,"sales_candies",ue.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Le){console.error(Le),f(" No se pudo revertir la venta.")}},Pe=ue=>{ae&&(I(ue),S(ue.quantity),F(ue.amount),k(ue.clientName),Z(ue.amountReceived),me(ue.change))},ct=async()=>{if(!(!j||!ae))try{await xn(Wt(Te,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:P,amountReceived:D,change:fe}),I(null),f(" Venta de dulces actualizada.")}catch(ue){console.error(ue),f(" No se pudo actualizar la venta de dulces.")}},lt=async ue=>{if(ae&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:Le}=await U9e(ue.split("#")[0]);f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Le).toFixed(2)}.`)}catch(Le){console.error(Le),f(" No se pudo eliminar la venta de dulces.")}},be=async()=>{if(pe.current){pe.current.classList.add("force-pdf-colors"),pe.current.classList.add("pdf-print-mode");try{const Le=(await yg(pe.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ke=new Lr;ke.addImage(Le,"PNG",10,10,190,0),ke.save(`cierre_dulces_${p}_a_${x}_proc_${m}.pdf`)}finally{pe.current.classList.remove("pdf-print-mode"),pe.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:ue=>g(ue.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:ue=>y(ue.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:ue=>h(ue.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ae&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:ue=>w(ue.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),O.map(ue=>i.jsx("option",{value:ue.id,children:ue.name||ue.id},ue.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:Y}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:J}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:R}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:H}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",$o(Re)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",$o(We)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),pt.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:pt.map(ue=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ue.name}),i.jsxs("strong",{className:"ml-2",children:["C$",$o(ue.total)]})]},ue.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),_t.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:_t.map(ue=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ue.name}),i.jsxs("strong",{className:"ml-2",children:["C$",$o(ue.total)]})]},ue.vendorId))})]})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:pe,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[L.map(ue=>{const Le=z(ue),ke=(ue.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ue.status})}),i.jsx("td",{className:"border p-1",children:ue.productName}),i.jsx("td",{className:"border p-1",children:ue.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Qm(ue.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",$o(ue.amount)]}),i.jsx("td",{className:"border p-1",children:Le>0?`C$${$o(Le)}`:""}),i.jsx("td",{className:"border p-1",children:ue.date}),i.jsx("td",{className:"border p-1",children:ke||""}),i.jsx("td",{className:"border p-1",children:ue.userEmail}),i.jsx("td",{className:"border p-1",children:ue.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:ae?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Pe(ue),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>lt(ue.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):ue.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:ae?i.jsx("button",{onClick:()=>vt(ue.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ue.id)}),L.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[L.map(ue=>{const Le=z(ue),ke=(ue.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ue.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ue.type==="CREDITO"?"Crdito":"Cash","  ",ue.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",$o(ue.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ue.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ue.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:Qm(ue.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:Le>0?`C$${$o(Le)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:ke||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ue.userEmail})]}),i.jsx("div",{className:"pt-2",children:ue.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:ae?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Pe(ue),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>lt(ue.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):ue.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:ae?i.jsx("button",{onClick:()=>vt(ue.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},ue.id)}),L.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:Qm(ie)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:Qm(te)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",$o(Ee)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",$o(ce)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",$o(we)]})]})]}),(ge>0||Ue!==U)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",$o(ge)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",$o(Ue)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:Qm(ne)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[gt.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ue.productName}),i.jsx("td",{className:"border p-1",children:Qm(ue.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",$o(ue.totalAmount)]}),i.jsx("td",{className:"border p-1",children:ue.totalCommission>0?`C$${$o(ue.totalCommission)}`:""})]},ue.productName)),gt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[gt.map(ue=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:ue.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:Qm(ue.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",$o(ue.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:ue.totalCommission>0?`C$${$o(ue.totalCommission)}`:""})]})]})]},ue.productName)),gt.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[ae&&i.jsx("button",{onClick:ut,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:be,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ae&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:ue=>S(parseFloat(ue.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:ue=>F(parseFloat(ue.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:ue=>k(ue.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:D,onChange:ue=>Z(parseFloat(ue.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:fe,onChange:ue=>me(ue.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:ct,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const ph=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Yc=t=>Math.round((Number(t)||0)*100)/100;function yQe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function bQe(t){return t.toISOString().slice(0,10)}function wQe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function NQe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return bQe(r)}function CQe(){const[t,e]=v.useState(wQe()),[r,n]=v.useState(NQe()),[a,s]=v.useState(!1),[o,l]=v.useState(""),[c,u]=v.useState({}),[d,f]=v.useState({}),[A,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(null),S=v.useMemo(()=>w&&A.find(me=>me.vendorId===w)||null,[w,A]),E=v.useMemo(()=>{var me;return!w||!I?[]:((me=g[w])==null?void 0:me[I])||[]},[w,I,g]),F=v.useMemo(()=>Yc(A.reduce((me,pe)=>me+(pe.totalSoldMoney||0),0)),[A]),P=v.useMemo(()=>Yc(A.reduce((me,pe)=>me+(pe.totalCreditMoney||0),0)),[A]);v.useEffect(()=>{(async()=>{try{const me=await Lt(Ct(Te,"sellers_candies")),pe={};me.forEach(je=>{const Be=je.data(),O=Be.branch||"Rivas";let G="RIVAS";O==="San Jorge"?G="SAN_JORGE":O==="Isla Ometepe"&&(G="ISLA"),pe[je.id]={id:je.id,name:Be.name??"(sin nombre)",branch:G,branchLabel:O,commissionPercent:Number(Be.commissionPercent??0)}});const ye=await Lt(Ct(Te,"products_candies")),ae={};ye.forEach(je=>{const Be=je.data();ae[je.id]={id:je.id,name:Be.name??"(sin nombre)"}}),u(pe),f(ae)}catch(me){console.error(me),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const k=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const me={},pe={},ye=rr(Ct(Te,"inventory_candies_sellers"),or("date",">=",t),or("date","<=",r)),ae=await Lt(ye),je={},Be={},O={},G={};ae.forEach(ce=>{var Ve,de;const we=ce.data(),Re=we.sellerId||"";if(!Re)return;const We=we.productId||"",pt=we.productName||((Ve=d[We])==null?void 0:Ve.name)||"(sin nombre)",_t=Math.max(1,Math.floor(Number(we.unitsPerPackage||1))),He=Number(we.totalUnits??0),gt=Number(we.packages??0),ut=Number(we.remainingUnits??we.remaining??0),vt=Number(we.remainingPackages??0),Pe=gt>0?gt:He>0?Math.floor(He/_t):0,ct=vt>0?vt:ut>0?Math.floor(ut/_t):0;je[Re]=(je[Re]||0)+Pe,Be[Re]=(Be[Re]||0)+ct;const lt=we.orderId||we.vendorOrderId||we.orderNumber||we.order||ce.id;O[Re]||(O[Re]=new Set),O[Re].add(lt);const be=((de=c[Re])==null?void 0:de.name)||we.sellerName||"(sin vendedor)",ue=String(we.date||""),Le=Number(we.totalVendor??0),ke=Number(we.gainVendor??0),Ae=gt>0?gt:He>0?Math.floor(He/_t):0,Ye=Ae>0?Le/Ae:0,yt=Ae>0?ke/Ae:0,At=Yc(Pe*Ye),he=Yc(Pe*yt),re=Yc(ct*Ye),oe=Yc(ct*yt);G[Re]||(G[Re]={ordered:[],remaining:[]}),Pe>0&&G[Re].ordered.push({date:ue,vendorName:be,productName:pt,packages:Pe,totalMoney:At,vendorCommission:he}),ct>0&&G[Re].remaining.push({date:ue,vendorName:be,productName:pt,packages:ct,totalMoney:re,vendorCommission:oe})});const z={};Object.keys(O).forEach(ce=>{z[ce]=O[ce].size});const L=rr(Ct(Te,"sales_candies"),or("date",">=",t),or("date","<=",r)),Y=await Lt(L),J={},R={},H={},ne={},ge={},U={};Y.forEach(ce=>{const we=ce.data(),Re=we.date||"",We=we.vendorId||we.sellerId||"";if(!We)return;const pt=c[We],_t=we.vendorName||(pt==null?void 0:pt.name)||"(sin vendedor)",He=Number(we.vendorCommissionPercent??(pt==null?void 0:pt.commissionPercent)??0)||0,gt=Array.isArray(we.items)?we.items:[];if(!gt.length)return;const ut=String(we.type||"").toUpperCase()==="CREDITO";ge[We]||(ge[We]={sold:[],credit:[]}),gt.forEach(vt=>{var At;const Pe=vt.productName||((At=d[vt.productId||""])==null?void 0:At.name)||"(sin nombre)",ct=vt.packages??vt.qty??vt.quantity??0,lt=Number(ct||0);if(lt<=0)return;const be=Number(vt.unitPricePackage??vt.unitPrice??0)||0,ue=Math.max(0,Number(vt.discount||0)),Le=lt*be,ke=Yc(Math.max(0,Le-ue));if(ke<=0)return;console.log("DBG",{isCredit:ut,vendorId:We,commissionPercent:He,lineFinal:ke,storedItemCommission:Number(vt.vendorCommissionAmount??0)});let Ae=0;const Ye=Number(vt.vendorCommissionAmount??0);Ye?Ae=Yc(Ye):He>0&&(Ae=Yc(ke*He/100)),ut?(R[We]=(R[We]||0)+lt,ne[We]=(ne[We]||0)+ke):(J[We]=(J[We]||0)+lt,H[We]=(H[We]||0)+ke),ut?pe[We]=(pe[We]||0)+Ae:me[We]=(me[We]||0)+Ae,ut?ge[We].credit.push({date:Re,vendorName:_t,productName:Pe,packages:lt,totalMoney:ke,vendorCommission:0}):ge[We].sold.push({date:Re,vendorName:_t,productName:Pe,packages:lt,totalMoney:ke,vendorCommission:Ae});const yt=Pe;U[yt]||(U[yt]={productName:Pe,packages:0,totalMoney:0}),U[yt].packages+=lt,U[yt].totalMoney+=ke})});const Ue=new Set([...Object.keys(je),...Object.keys(Be),...Object.keys(J),...Object.keys(R)]),ie=[],te={};Ue.forEach(ce=>{var ct,lt,be,ue;const we=c[ce],Re=(we==null?void 0:we.name)||"(sin vendedor)",We=we?we.branchLabel||yQe(we.branch):"",pt=je[ce]||0,_t=Be[ce]||0,He=J[ce]||0,gt=R[ce]||0,ut=Yc(H[ce]||0),vt=Yc(ne[ce]||0),Pe=z[ce]||0;ie.push({vendorId:ce,vendorName:Re,branchLabel:We,orderedPackages:pt,remainingPackages:_t,soldPackages:He,creditPackages:gt,totalSoldMoney:ut,totalCreditMoney:vt,ordersCreated:Pe,commissionCash:Yc(me[ce]||0),commissionCredit:0}),te[ce]={ordered:(((ct=G[ce])==null?void 0:ct.ordered)||[]).sort((Le,ke)=>Le.date.localeCompare(ke.date)),remaining:(((lt=G[ce])==null?void 0:lt.remaining)||[]).sort((Le,ke)=>Le.date.localeCompare(ke.date)),sold:(((be=ge[ce])==null?void 0:be.sold)||[]).sort((Le,ke)=>Le.date.localeCompare(ke.date)),credit:(((ue=ge[ce])==null?void 0:ue.credit)||[]).sort((Le,ke)=>Le.date.localeCompare(ke.date))}}),ie.sort((ce,we)=>ce.vendorName.localeCompare(we.vendorName,"es")),h(ie),x(te);const Ee=Object.values(U).map(ce=>({productName:ce.productName,packages:ce.packages,totalMoney:Yc(ce.totalMoney)})).sort((ce,we)=>we.packages-ce.packages).slice(0,10);p(Ee),ie.length||l("Sin datos para el rango seleccionado.")}catch(me){console.error(me),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&k()},[c]);const D=(me,pe)=>{j(me),_(pe),b(!0)},Z=()=>{b(!1),j(null),_(null)},fe=()=>{if(!A.length){l("No hay datos para exportar.");return}const me=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],pe=A.map(O=>[O.vendorName,O.branchLabel,O.orderedPackages.toString(),O.remainingPackages.toString(),O.soldPackages.toString(),O.creditPackages.toString(),O.totalSoldMoney.toFixed(2),O.commissionCash.toFixed(2),O.totalCreditMoney.toFixed(2),O.commissionCredit.toFixed(2),O.ordersCreated.toString()]),ye=[me,...pe].map(O=>O.map(G=>`"${String(G).replace(/"/g,'""')}"`).join(",")).join(`
`),ae=new Blob([ye],{type:"text/csv;charset=utf-8;"}),je=URL.createObjectURL(ae),Be=document.createElement("a");Be.href=je,Be.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Be.click(),URL.revokeObjectURL(je)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:me=>e(me.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:me=>n(me.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:fe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ph(F)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:ph(P)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:A.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[A.map(me=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:me.vendorName}),i.jsx("td",{className:"border p-1",children:me.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(me.vendorId,"ordered"),children:me.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(me.vendorId,"remaining"),children:me.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(me.vendorId,"sold"),children:me.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(me.vendorId,"credit"),children:me.creditPackages})}),i.jsx("td",{className:"border p-1",children:ph(me.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:ph(me.commissionCash)}),i.jsx("td",{className:"border p-1",children:ph(me.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:ph(me.commissionCredit)}),i.jsx("td",{className:"border p-1",children:me.ordersCreated})]},me.vendorId)),A.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((me,pe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:pe+1}),i.jsx("td",{className:"border p-1",children:me.productName}),i.jsx("td",{className:"border p-1",children:me.packages}),i.jsx("td",{className:"border p-1",children:ph(me.totalMoney)})]},me.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&I&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),i.jsx("button",{onClick:Z,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[E.map((me,pe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:me.date}),i.jsx("td",{className:"border p-1",children:me.productName}),i.jsx("td",{className:"border p-1",children:me.packages}),i.jsx("td",{className:"border p-1",children:ph(me.totalMoney)}),i.jsx("td",{className:"border p-1",children:me.vendorName}),i.jsx("td",{className:"border p-1",children:ph(me.vendorCommission)})]},pe)),E.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Nl=t=>`C$${Number(t||0).toFixed(2)}`,t_=t=>Number(t||0).toFixed(3),K5=()=>{const t=new Date;return Cr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},r_=()=>Cr(new Date,"yyyy-MM-dd");function _Qe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),o=v.useMemo(()=>{const he={};return a.forEach(re=>{re.email&&(he[re.email.trim().toLowerCase()]=re)}),he},[a]);v.useEffect(()=>{(async()=>{try{const he=rr(Ct(Te,"sellers_candies"),gn("name","asc")),re=await Lt(he),oe=[];re.forEach(Ve=>{const de=Ve.data();oe.push({id:Ve.id,name:de.name||"",email:de.email||"",commissionPercent:Number(de.commissionPercent||0)})}),s(oe)}catch(he){console.error(he)}})()},[]);const[l,c]=v.useState(K5()),[u,d]=v.useState(r_()),[f,A]=v.useState(""),[h,m]=v.useState(""),p=v.useMemo(()=>{const he=new Map;return n.forEach(re=>{const oe=re.productId||re.productName;he.set(oe,{key:oe,name:re.productName})}),Array.from(he.values()).sort((re,oe)=>re.name.localeCompare(oe.name))},[n]),g=v.useMemo(()=>{const he=new Map;return n.forEach(re=>{const oe=(re.sellerEmail||"").trim().toLowerCase();if(!oe)return;const Ve=o[oe],de=(Ve==null?void 0:Ve.name)||re.vendorName||oe;he.set(oe,{email:oe,label:de})}),Array.from(he.values()).sort((re,oe)=>re.label.localeCompare(oe.label))},[n,o]),x=v.useMemo(()=>n.filter(he=>!(l&&he.date<l||u&&he.date>u||f&&(he.productId||he.productName)!==f||h&&(he.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,f,h]),[y,b]=v.useState(r_()),[w,j]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=v.useState(""),[S,E]=v.useState("0"),[F,P]=v.useState(()=>x.map(he=>he.id));v.useEffect(()=>{P(he=>he.filter(re=>x.some(oe=>oe.id===re)))},[x]);const[k,D]=v.useState([]),[Z,fe]=v.useState([]),[me,pe]=v.useState(!1),[ye,ae]=v.useState(K5()),[je,Be]=v.useState(r_());v.useEffect(()=>{(async()=>{try{pe(!0);const he=rr(Ct(Te,"expensesCandies"),gn("date","desc")),re=await Lt(he),oe=[];re.forEach(Ve=>{const de=Ve.data();oe.push({id:Ve.id,date:de.date,description:de.description,amount:Number(de.amount||0)})}),D(oe)}catch(he){console.error(he)}finally{pe(!1)}})()},[]);const O=v.useMemo(()=>k.filter(he=>!(!he.date||ye&&he.date<ye||je&&he.date>je)),[k,ye,je]),[G,z]=v.useState([]),[L,Y]=v.useState(!1),[J,R]=v.useState(""),[H,ne]=v.useState("DEBITO"),[ge,U]=v.useState(""),Ue=()=>{const he=Number(ge);!J.trim()||!isFinite(he)||he<=0||(z(re=>[...re,{id:`${Date.now()}_${re.length+1}`,description:J.trim(),type:H,amount:Number(he.toFixed(2))}]),R(""),U(""))},[ie,te]=v.useState(null),[Ee,ce]=v.useState(""),[we,Re]=v.useState("DEBITO"),[We,pt]=v.useState(""),_t=he=>{te(he.id),ce(he.description),Re(he.type),pt(he.amount.toFixed(2))},He=()=>{te(null),ce(""),Re("DEBITO"),pt("")},gt=()=>{if(!ie)return;const he=Number(We);!isFinite(he)||he<=0||(z(re=>re.map(oe=>oe.id===ie?{...oe,description:Ee.trim(),type:we,amount:Number(he.toFixed(2))}:oe)),He())},ut=he=>{z(re=>re.filter(oe=>oe.id!==he)),ie===he&&He()},vt=(he,re)=>{P(oe=>re?[...new Set([...oe,he])]:oe.filter(Ve=>Ve!==he))},Pe=he=>{P(he?x.map(re=>re.id):[])},ct=(he,re)=>{fe(oe=>re?[...new Set([...oe,he])]:oe.filter(Ve=>Ve!==he))},lt=v.useMemo(()=>x.filter(he=>F.includes(he.id)),[x,F]),be=v.useMemo(()=>G.filter(he=>he.type==="DEBITO").reduce((he,re)=>he+re.amount,0),[G]),ue=v.useMemo(()=>G.filter(he=>he.type==="CREDITO").reduce((he,re)=>he+re.amount,0),[G]),Le=v.useMemo(()=>{let he=0,re=0,oe=0,Ve=0;for(const bt of lt){const et=Number(bt.packages||0),Ne=Number(bt.cogsAmount||0),mt=Number(bt.amount||0);he+=et,re+=Ne,oe+=mt;const W=(bt.sellerEmail||"").trim().toLowerCase(),Ie=o[W],Je=Number((Ie==null?void 0:Ie.commissionPercent)||0),tt=mt*Je/100;Ve+=tt}const de=O.filter(bt=>Z.includes(bt.id)).reduce((bt,et)=>bt+Number(et.amount||0),0),Se=oe-re,dt=oe-de-be+ue-Ve,xt=Number(S||0),ht=oe*xt/100;return{totalPackages:Number(t_(he)),totalProvider:Number(re.toFixed(2)),totalSale:Number(oe.toFixed(2)),totalGastos:Number(de.toFixed(2)),debits:Number(be.toFixed(2)),credits:Number(ue.toFixed(2)),grossProfit:Number(Se.toFixed(2)),finalAmount:Number(dt.toFixed(2)),totalCommissionVendors:Number(Ve.toFixed(2)),branchProfit:Number(ht.toFixed(2)),branchFactor:xt}},[lt,O,Z,be,ue,o,S]),[ke,Ae]=v.useState(!1),[Ye,yt]=v.useState(""),At=async()=>{if(yt(""),lt.length===0){yt("Selecciona al menos 1 transaccin procesada.");return}try{Ae(!0);const he={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:ur.now(),totalPackages:Le.totalPackages,totalProvider:Le.totalProvider,totalSale:Le.totalSale,totalExpenses:Le.totalGastos,totalDebits:Le.debits,totalCredits:Le.credits,grossProfit:Le.grossProfit,totalCommissionVendors:Le.totalCommissionVendors,branchFactorPercent:Le.branchFactor,branchProfit:Le.branchProfit,finalAmount:Le.finalAmount,transactions:lt.map(re=>{const oe=Number(re.packages||0)||1,Ve=Number(re.cogsAmount||0),de=Number(re.amount||0),Se=Ve/oe,dt=de/oe,xt=(re.sellerEmail||"").trim().toLowerCase(),ht=o[xt],bt=Number((ht==null?void 0:ht.commissionPercent)||0),et=de*bt/100;return{id:re.id,date:re.date,productId:re.productId||null,productName:re.productName,vendorName:re.vendorName,sellerEmail:re.sellerEmail||null,packages:Number(t_(re.packages)),providerPricePack:Number(Se.toFixed(4)),salePricePack:Number(dt.toFixed(4)),totalProvider:Number(Ve.toFixed(2)),totalSale:Number(de.toFixed(2)),commissionPercent:bt,commissionAmount:Number(et.toFixed(2))}}),expenses:O.filter(re=>Z.includes(re.id)).map(re=>({id:re.id,date:re.date||null,description:re.description||"",amount:Number(Number(re.amount||0).toFixed(2))})),adjustments:G.map(re=>({id:re.id,description:re.description,type:re.type,amount:Number(re.amount.toFixed(2))}))};await Tn(Ct(Te,"invoicesCandies"),he),yt(" Factura de dulces creada."),r()}catch(he){console.error(he),yt(` Error al crear factura: ${(he==null?void 0:he.message)||"desconocido"}`)}finally{Ae(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:he=>b(he.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:he=>j(he.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:he=>E(he.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:he=>_(he.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:he=>c(he.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:he=>d(he.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:he=>A(he.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(he=>i.jsx("option",{value:he.key,children:he.name},he.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:he=>m(he.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),g.map(he=>i.jsx("option",{value:he.email,children:he.label},he.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(K5()),d(r_()),A(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:x.length>0&&F.length===x.length,onChange:he=>Pe(he.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:x.map(he=>{const re=F.includes(he.id),oe=Number(he.packages||0)||1,Ve=Number(he.cogsAmount||0),de=Number(he.amount||0),Se=Ve/oe,dt=de/oe,xt=(he.sellerEmail||"").trim().toLowerCase(),ht=o[xt],bt=Number((ht==null?void 0:ht.commissionPercent)||0),et=de*bt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:re,onChange:Ne=>vt(he.id,Ne.target.checked)})}),i.jsx("td",{className:"p-2 border",children:he.date}),i.jsx("td",{className:"p-2 border",children:(ht==null?void 0:ht.name)||he.vendorName}),i.jsx("td",{className:"p-2 border",children:he.productName}),i.jsx("td",{className:"p-2 border",children:t_(he.packages)}),i.jsx("td",{className:"p-2 border",children:Nl(Se)}),i.jsx("td",{className:"p-2 border",children:Nl(dt)}),i.jsx("td",{className:"p-2 border",children:Nl(Ve)}),i.jsx("td",{className:"p-2 border",children:Nl(de)}),i.jsx("td",{className:"p-2 border",children:bt>0?`${Nl(et)} (${bt.toFixed(2)}%)`:""})]},he.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),me&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ye,onChange:he=>ae(he.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:je,onChange:he=>Be(he.target.value)})]})]})]}),O.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:O.map(he=>{const re=Z.includes(he.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:re,onChange:oe=>ct(he.id,oe.target.checked)})}),i.jsx("td",{className:"p-2 border",children:he.date||""}),i.jsx("td",{className:"p-2 border",children:he.description||""}),i.jsx("td",{className:"p-2 border",children:Nl(Number(he.amount||0))})]},he.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Y(!0),children:"Crear Cargo"})]}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.map(he=>{const re=ie===he.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:re?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Ee,onChange:oe=>ce(oe.target.value)}):i.jsx("span",{title:he.description,children:he.description.length>60?`${he.description.slice(0,60)}`:he.description})}),i.jsx("td",{className:"p-2 border",children:re?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:we,onChange:oe=>Re(oe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:he.type})}),i.jsx("td",{className:"p-2 border",children:re?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:We,onChange:oe=>pt(oe.target.value)}):Nl(he.amount)}),i.jsx("td",{className:"p-2 border",children:re?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:gt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:He,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ut(he.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>_t(he),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ut(he.id),children:"Eliminar"})]})})]},he.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:t_(Le.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:Nl(Le.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:Nl(Le.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:Nl(Le.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Nl(Le.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Nl(Le.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Nl(Le.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:Nl(Le.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:Nl(Le.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:Nl(Le.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:ke,onClick:At,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:ke?"Creando":"Crear factura"}),i.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ye&&i.jsx("span",{className:"text-sm ml-2",children:Ye})]}),ke&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),L&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>Y(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:J,onChange:he=>R(he.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:H,onChange:he=>ne(he.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ge,onChange:he=>U(he.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ue,children:"Agregar"})})]})]})})]})}const Ca=t=>`C$ ${Number(t??0).toFixed(2)}`,n_=t=>Number(t??0).toFixed(3);function q5(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const o=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):o.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,A=t.totalCredits!==void 0?Number(t.totalCredits):d,h=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((h*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+A;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:A,grossProfit:h,branchProfit:p,finalAmount:g}}function X$(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function EQe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),o=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const h=rr(Ct(Te,"invoicesCandies"),gn("date","desc")),m=await Lt(h),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await xn(Wt(Te,"invoicesCandies",h.id),{status:m}),e(p=>p.map(g=>g.id===h.id?{...g,status:m}:g)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},f=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await Bn(Wt(Te,"invoicesCandies",h.id)),e(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},A=async()=>{if(!o.current||!a)return;const h=o.current,m=await yg(h,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Lr("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(_Qe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(h=>{const m=q5(h),p=X$(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:n_(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=q5(a),m=X$(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",n_(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",Ca(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",Ca(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",Ca(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",Ca(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Ca(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Ca(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Ca(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:n_(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Ca(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ca(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=q5(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:n_(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:Ca(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:Ca(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:Ca(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:Ca(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:Ca(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Ca(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Ca(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Ca(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Ca(h.finalAmount)})]})})]})})()]})]})}const ys=t=>Math.round((Number(t)||0)*100)/100,a0=t=>Math.round((Number(t)||0)*1e3)/1e3,qi=t=>Number(t??0).toFixed(2),gh=t=>Number(t??0).toFixed(3),SQe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Cr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((h,m)=>{const p=Number((h==null?void 0:h.packages)??(h==null?void 0:h.qty)??(h==null?void 0:h.quantity)??0),g=Number((h==null?void 0:h.lineFinal)??0)||Math.max(0,Number((h==null?void 0:h.unitPricePackage)||(h==null?void 0:h.unitPrice)||0)*p-Number((h==null?void 0:h.discount)||0));let x=0;return c>0&&l>0&&Number(g||0)>0&&(x=ys(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((h==null?void 0:h.productName)??"(sin nombre)"),quantity:p,amount:ys(g),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:x}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=ys(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:ys(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:f}]};function IQe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||ln(a,"admin"),o="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=v.useState(Cr(xee(new Date),"yyyy-MM-dd")),[f,A]=v.useState(Cr(new Date,"yyyy-MM-dd")),[h,m]=v.useState(!0),[p,g]=v.useState([]),[x,y]=v.useState(null),[b,w]=v.useState(""),[j,I]=v.useState([]),[_,S]=v.useState("ALL"),[E,F]=v.useState({}),P=v.useRef(null);if(!s)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const k=async()=>{try{const J=await Lt(Ct(Te,c)),R=[];J.forEach(H=>{const ne=H.data();R.push({id:H.id,name:ne.name||"",commissionPercent:Number(ne.commissionPercent||0)})}),I(R)}catch(J){console.error("Error cargando sellers_candies",J)}},D=async()=>{const J=performance.now();try{m(!0);const R=rr(Ct(Te,o),or("date",">=",u),or("date","<=",f)),H=await Lt(R),ne=performance.now();console.log(" getDocs ms:",(ne-J).toFixed(1),"docs:",H.size);const ge=[];H.forEach(te=>ge.push({id:te.id,...te.data()}));const U=performance.now();console.log(" parse+set ms:",(U-ne).toFixed(1),"rows:",ge.length),ge.sort((te,Ee)=>te.date<Ee.date?1:te.date>Ee.date?-1:0),g(ge),y(null);const Ue=new Set;ge.forEach(te=>{(te.sales||[]).forEach(Ee=>{const ce=String((Ee==null?void 0:Ee.id)??"").split("#")[0].trim();ce&&Ue.add(ce)})});const ie=Array.from(Ue).filter(te=>!E[te]);if(ie.length>0){const te={};for(const Ee of ie)try{const ce=await js(Wt(Te,l,Ee));if(ce.exists()){const we=ce.data();te[Ee]=SQe(we,Ee)}else te[Ee]=[]}catch(ce){console.error("Error leyendo sale",Ee,ce),te[Ee]=[]}F(Ee=>({...Ee,...te}))}}catch(R){console.error(R),w(" Error cargando liquidaciones.")}finally{m(!1)}};v.useEffect(()=>{k()},[]),v.useEffect(()=>{D()},[]);const Z=async J=>{J.preventDefault(),await D()},fe=v.useMemo(()=>{const J={};return j.forEach(R=>J[R.id]=R.name||R.id),J},[j]),me=J=>{const R=[];return(J.sales||[]).forEach(H=>{const ne=String((H==null?void 0:H.id)??"").trim();if(!ne)return;const ge=ne.split("#")[0],Ue=(E[ge]||[]).find(ie=>ie.id===ne);Ue?R.push(Ue):R.push({id:ne,productName:String((H==null?void 0:H.productName)??"(sin nombre)"),quantity:Number((H==null?void 0:H.quantity)??0),amount:ys(Number((H==null?void 0:H.amount)??0)),date:String((H==null?void 0:H.date)??""),type:"CONTADO",vendorId:"",userEmail:String((H==null?void 0:H.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),R},pe=J=>_==="ALL"?J:J.filter(R=>(R.vendorId||"")===_),ye=v.useMemo(()=>p.map(J=>{const R=pe(me(J));let H=0,ne=0,ge=0,U=0,Ue=0,ie=0;for(const te of R){const Ee=Number(te.quantity||0),ce=Number(te.amount||0),we=Number(te.vendorCommissionAmount||0);te.type==="CREDITO"?(ne+=Ee,U+=ce,ie+=we):(H+=Ee,ge+=ce,Ue+=we)}return{...J,_sales:R,_packsCash:a0(H),_packsCredit:a0(ne),_amountCash:ys(ge),_amountCredit:ys(U),_comCash:ys(Ue),_comCredit:ys(ie)}}),[p,E,_]),ae=v.useMemo(()=>{let J=0,R=0,H=0,ne=0,ge=0,U=0;for(const Ue of ye)J+=Number(Ue._packsCash||0),R+=Number(Ue._packsCredit||0),H+=Number(Ue._amountCash||0),ne+=Number(Ue._amountCredit||0),ge+=Number(Ue._comCash||0),U+=Number(Ue._comCredit||0);return{packsCash:a0(J),packsCredit:a0(R),totalSales:ys(H+ne),amountCash:ys(H),amountCredit:ys(ne),comCash:ys(ge),comCredit:ys(U)}},[ye]),je=v.useMemo(()=>{const J={},R={};for(const H of ye){const ne=H._sales||[];for(const ge of ne){const U=(ge.vendorId||"").trim();if(!U)continue;const Ue=fe[U]||ge.userEmail||U,ie=ys(Number(ge.vendorCommissionAmount||0));ge.type==="CREDITO"?(R[U]||(R[U]={vendorId:U,name:Ue,total:0}),R[U].total=ys(R[U].total+ie)):(J[U]||(J[U]={vendorId:U,name:Ue,total:0}),J[U].total=ys(J[U].total+ie))}}return{cashRows:Object.values(J).filter(H=>H.total>0).sort((H,ne)=>ne.total-H.total),creditRows:Object.values(R).filter(H=>H.total>0).sort((H,ne)=>ne.total-H.total)}},[ye,fe]),Be=v.useMemo(()=>j.map(J=>({id:J.id,label:J.name||J.id})).sort((J,R)=>J.label.localeCompare(R.label)),[j]),O=v.useMemo(()=>x&&ye.find(J=>J.id===x.id)||null,[x,ye]),G=v.useMemo(()=>O?O._sales||[]:[],[O]),z=v.useMemo(()=>{let J=0,R=0,H=0,ne=0;for(const ge of G)ge.type==="CREDITO"?(R+=Number(ge.quantity||0),ne+=Number(ge.amount||0)):(J+=Number(ge.quantity||0),H+=Number(ge.amount||0));return{packsCash:a0(J),packsCredit:a0(R),amountCash:ys(H),amountCredit:ys(ne)}},[G]),L=v.useMemo(()=>{const J={};for(const R of G){const H=R.productName||"(sin nombre)";J[H]||(J[H]={productName:H,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const ne=Number(R.quantity||0),ge=Number(R.amount||0),U=Number(R.vendorCommissionAmount||0);R.type==="CREDITO"?(J[H].packsCredit=a0(J[H].packsCredit+ne),J[H].amountCredit=ys(J[H].amountCredit+ge),J[H].comCredit=ys(J[H].comCredit+U)):(J[H].packsCash=a0(J[H].packsCash+ne),J[H].amountCash=ys(J[H].amountCash+ge),J[H].comCash=ys(J[H].comCash+U))}return Object.values(J)},[G]),Y=async()=>{if(!P.current||!O)return;const J=P.current;J.classList.add("force-pdf-colors");try{const H=(await yg(J,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ne=new Lr;ne.addImage(H,"PNG",10,10,190,0),ne.save(`liquidacion_${O.date}.pdf`)}finally{J.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:Z,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:J=>d(J.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:J=>A(J.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:J=>S(J.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),Be.map(J=>i.jsx("option",{value:J.id,children:J.label},J.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:gh(ae.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:gh(ae.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",qi(ae.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",qi(ae.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",qi(ae.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",qi(ae.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",qi(ae.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),je.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:je.cashRows.map(J=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:J.name}),i.jsxs("strong",{className:"ml-2",children:["C$",qi(J.total)]})]},J.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),je.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:je.creditRows.map(J=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:J.name}),i.jsxs("strong",{className:"ml-2",children:["C$",qi(J.total)]})]},J.vendorId))})]})]}),h?i.jsx("p",{children:"Cargando..."}):ye.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:ye.map(J=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:J.date}),i.jsx("td",{className:"border p-1",children:gh(J._packsCash)}),i.jsx("td",{className:"border p-1",children:gh(J._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(J),children:"Ver detalle"})})})]},J.id))})]}),O&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",O.date]}),i.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:Y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",qi(z.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",qi(z.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:gh(z.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:gh(z.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:G.map((J,R)=>{const H=J.vendorId&&fe[J.vendorId]?fe[J.vendorId]:J.userEmail,ne=ys(Number(J.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:H}),i.jsx("td",{className:"border p-1",children:J.productName}),i.jsx("td",{className:"border p-1",children:J.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:gh(J.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J.amount)]}),i.jsx("td",{className:"border p-1",children:ne>0?`C$${qi(ne)}`:""}),i.jsx("td",{className:"border p-1",children:J.date||""})]},R)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),L.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:L.map((J,R)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:J.productName}),i.jsx("td",{className:"border p-1",children:gh(J.packsCash)}),i.jsx("td",{className:"border p-1",children:gh(J.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",qi(J.comCredit)]})]},R))})]})]})]}),b&&i.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Br=t=>Math.round((Number(t)||0)*100)/100,Go=t=>Math.round((Number(t)||0)*1e3)/1e3,Nr=t=>Number(t??0).toFixed(2),Ls=t=>Number(t??0).toFixed(3),qS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},yr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},jQe=t=>Math.max(0,Math.min(1,t));function Y$({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,A=f-d||1,h=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?h/2:w/(e.length-1)*h),I=18+(1-(Number(b.value||0)-d)/A)*m;return{x:j,y:I,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+Nr(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return i.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,Nr(f)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,Nr(d)]}),i.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function PQe({title:t,items:e}){const r=e.reduce((f,A)=>f+Number(A.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,A)=>{const h=Math.max(0,Number(f.value||0)),m=c/l,p=h/l;c+=h;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=o+a*Math.sin(x),j=s+a*Math.cos(y),I=o+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[A%u.length],...f,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,A)=>i.jsx("path",{d:f.d,fill:f.fill},A)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",Nr(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,A)=>{const h=Number(f.value||0),m=jQe(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Nr(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[A%u.length]}})})]},f.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const BQe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?Cr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",o=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||o||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,A=qS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),j=qS(x==null?void 0:x.branch)||A;let I=0;return f>0&&d>0&&w>0&&(I=Br(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Br(w),commission:Br(I)}});const h=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Br(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:A||"",packages:h,amount:Br(m),commission:Br(p)}]};function TQe({role:t,roles:e}){var ft;const r=e&&e.length?e:t,n=!r||ln(r,"admin"),a=Cr(new Date,"yyyy-MM-dd"),[s,o]=v.useState(a),[l,c]=v.useState(a),[u,d]=v.useState("TODAS"),[f,A]=v.useState("AMBAS"),[h,m]=v.useState("ALL"),[p,g]=v.useState("ALL"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,S]=v.useState(""),[E,F]=v.useState("DIA"),[P,k]=v.useState(!0),[D,Z]=v.useState(""),[fe,me]=v.useState([]),[pe,ye]=v.useState([]),[ae,je]=v.useState([]),[Be,O]=v.useState({}),[G,z]=v.useState([]),[L,Y]=v.useState([]),[J,R]=v.useState([]),[H,ne]=v.useState([]),[ge,U]=v.useState([]),[Ue,ie]=v.useState([]),[te,Ee]=v.useState(""),[ce,we]=v.useState(""),[Re,We]=v.useState(null),pt=v.useRef(null),[_t,He]=v.useState([]),[gt,ut]=v.useState("DETALLE"),vt=v.useMemo(()=>{const T={};return L.forEach(M=>T[M.id]=String(M.name||"").trim()),T},[L]),Pe=v.useMemo(()=>{const T={};return pe.forEach(M=>T[M.id]=M),T},[pe]),ct=T=>{const M=T.customerId?vt[T.customerId]:"";return(T.customerName||M||"").trim()||(T.customerId?vt[T.customerId]||T.customerId:"")||""};v.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Lt(Ct(Te,"inventory_candies")),V=[];M.forEach(q=>V.push({id:q.id,...q.data()})),He(V)}catch(M){console.error("inventory_candies all error:",M),He([])}})()},[n]),v.useEffect(()=>{(async()=>{try{const M=await Lt(Ct(Te,"sellers_candies")),V=[];M.forEach(ee=>{const se=ee.data();V.push({id:ee.id,name:String(se.name||"").trim(),commissionPercent:Number(se.commissionPercent||0),branch:se.branch||""})});const q=new Map;V.forEach(ee=>q.set(ee.id,ee)),ye(Array.from(q.values()).sort((ee,se)=>ee.name.localeCompare(se.name)))}catch(M){console.error(M)}})()},[]),v.useEffect(()=>{if(!n||!s||!l)return;k(!0),Z("");const T=rr(Ct(Te,"sales_candies"),or("date",">=",s),or("date","<=",l),gn("date","asc")),M=ad(T,V=>{const q=[];V.forEach(ee=>q.push(...BQe(ee.data(),ee.id))),me(q),k(!1)},V=>{console.error("sales_candies periodo error:",V),me([]),k(!1),Z(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>M()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=rr(Ct(Te,"candy_main_orders"),or("date",">=",s),or("date","<=",l)),V=await Lt(M),q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),je(q)}catch(M){console.error("candy_main_orders error:",M),je([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Lt(rr(Ct(Te,"candy_main_orders"),gn("createdAt","desc"))),V={},q=(ee,se)=>`${ee}#${String(se).padStart(10,"0")}`;M.forEach(ee=>{var Xe;const se=ee.data(),Oe=Number(((Xe=se.createdAt)==null?void 0:Xe.seconds)??0),Ke=String(se.date||""),ot=q(Ke,Oe),Fe=Array.isArray(se.items)?se.items:[];for(const xe of Fe){const Ge=String(xe.id||xe.productId||"");if(!Ge)continue;const qe={unitPriceRivas:Number(xe.unitPriceRivas||0),unitPriceSanJorge:Number(xe.unitPriceSanJorge||0),unitPriceIsla:Number(xe.unitPriceIsla||0),key:ot},it=V[Ge];(!it||qe.key>it.key)&&(V[Ge]=qe)}}),O(V)}catch(M){console.error("candy_main_orders catalog error:",M),O({})}})()},[n]),v.useEffect(()=>{if(!n)return;const T=rr(Ct(Te,"inventory_candies_sellers"),or("date",">=",s),or("date","<=",l)),M=ad(T,V=>{const q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),z(q)},V=>{console.error("inventory_candies_sellers error:",V),z([])});return()=>M()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=rr(Ct(Te,"expenses_candies"),or("date",">=",s),or("date","<=",l),gn("date","asc")),V=await Lt(M),q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),ne(q)}catch(M){console.warn("expenses_candies sin ndice, usando fallback:",M);try{const V=await Lt(Ct(Te,"expenses_candies")),q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),ne(q.filter(ee=>String(ee.date||"")>=s&&String(ee.date||"")<=l))}catch(V){console.error(V),ne([])}}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Lt(Ct(Te,"inventory_candies")),V=[];M.forEach(q=>V.push({id:q.id,...q.data()})),U(V)}catch(M){console.error("inventory_candies global error:",M),U([])}})()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=await Lt(Ct(Te,"inventory_candies_sellers")),V=[];M.forEach(q=>V.push({id:q.id,...q.data()})),ie(V)}catch(M){console.error("inventory_candies_sellers global error:",M),ie([])}})()},[n]),v.useEffect(()=>{if(!n)return;const T=rr(Ct(Te,"customers_candies")),M=ad(T,V=>{const q=[];V.forEach(ee=>{var se,Oe,Ke;return q.push({id:ee.id,name:String(((se=ee.data())==null?void 0:se.name)||"").trim(),initialDebt:Number(((Oe=ee.data())==null?void 0:Oe.initialDebt)||0),initialDebtDate:String(((Ke=ee.data())==null?void 0:Ke.initialDebtDate)||"").trim()})}),Y(q)},V=>{console.error("customers_candies snapshot error:",V),Y([])});return()=>M()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const M=rr(Ct(Te,"ar_movements"),or("date","<=",l),gn("date","asc")),V=await Lt(M),q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),R(q)}catch(M){console.warn("ar_movements sin ndice, usando fallback:",M);try{const V=await Lt(Ct(Te,"ar_movements")),q=[];V.forEach(ee=>q.push({id:ee.id,...ee.data()})),R(q.filter(ee=>String(ee.date||"")<=l))}catch(V){console.error(V),R([])}}})()},[n,l]);const lt=v.useMemo(()=>{let T=[...fe];if(u!=="TODAS"&&(T=T.filter(q=>q.status===u)),f==="CASH"&&(T=T.filter(q=>q.type==="CONTADO")),f==="CREDITO"&&(T=T.filter(q=>q.type==="CREDITO")),h!=="ALL"&&(T=T.filter(q=>(q.vendorId||"")===h)),p!=="ALL"&&(T=T.filter(q=>q.branch===p)),x.trim()){const q=x.trim().toLowerCase();T=T.filter(ee=>(ee.productName||"").toLowerCase().includes(q))}if(b.trim()){const q=b.trim().toLowerCase();T=T.filter(ee=>(ct(ee)||"").toLowerCase().includes(q))}const M=j.trim()?Number(j):null,V=_.trim()?Number(_):null;return M!==null&&!Number.isNaN(M)&&(T=T.filter(q=>(q.amount||0)>=M)),V!==null&&!Number.isNaN(V)&&(T=T.filter(q=>(q.amount||0)<=V)),T},[fe,u,f,h,p,x,b,j,_,vt]),be=v.useMemo(()=>{let T=0,M=0,V=0,q=0,ee=0,se=0;for(const Ke of lt){const ot=yr(Ke.packages),Fe=yr(Ke.amount),Xe=yr(Ke.commission);Ke.type==="CREDITO"?(M+=ot,q+=Fe,se+=Xe):(T+=ot,V+=Fe,ee+=Xe)}const Oe=Br(V+q);return{packsCash:Go(T),packsCredit:Go(M),salesCash:Br(V),salesCredit:Br(q),salesTotal:Oe,commCash:Br(ee),commCredit:Br(se),commTotal:Br(ee+se)}},[lt]),ue=v.useMemo(()=>{let T=0,M=0,V=0,q=0,ee=0,se=0;for(const Oe of ae){const Ke=Array.isArray(Oe.items)?Oe.items:[];for(const ot of Ke)T+=yr(ot.totalRivas),M+=yr(ot.totalSanJorge),V+=yr(ot.totalIsla),q+=yr(ot.gainRivas),ee+=yr(ot.gainSanJorge),se+=yr(ot.gainIsla)}return{expectedRivas:Br(T),expectedSanJorge:Br(M),expectedIsla:Br(V),grossRivas:Br(q),grossSanJorge:Br(ee),grossIsla:Br(se),grossTotal:Br(q+ee+se),expectedTotal:Br(T+M+V)}},[ae]),Le=v.useMemo(()=>{const T={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const M of lt){const V=M.branch;V&&(T[V].sales+=yr(M.amount),T[V].packages+=yr(M.packages))}return{RIVAS:{sales:Br(T.RIVAS.sales),packages:Go(T.RIVAS.packages)},SAN_JORGE:{sales:Br(T.SAN_JORGE.sales),packages:Go(T.SAN_JORGE.packages)},ISLA:{sales:Br(T.ISLA.sales),packages:Go(T.ISLA.packages)}}},[lt]),ke=v.useMemo(()=>({RIVAS:Br(Le.RIVAS.sales-ue.expectedRivas),SAN_JORGE:Br(Le.SAN_JORGE.sales-ue.expectedSanJorge),ISLA:Br(Le.ISLA.sales-ue.expectedIsla)}),[Le,ue]),Ae=v.useMemo(()=>{const T={},M={};for(const ee of lt){const se=(ee.vendorId||"").trim();if(!se)continue;const Oe=pe.find(Fe=>Fe.id===se),Ke=(Oe==null?void 0:Oe.name)||ee.vendorName||"(sin vendedor)",ot=yr(ee.commission);ee.type==="CREDITO"?(M[se]||(M[se]={vendorId:se,name:Ke,total:0}),M[se].total=Br(M[se].total+ot)):(T[se]||(T[se]={vendorId:se,name:Ke,total:0}),T[se].total=Br(T[se].total+ot))}const V=Object.values(T).sort((ee,se)=>se.total-ee.total),q=Object.values(M).sort((ee,se)=>se.total-ee.total);return{cashArr:V,creditArr:q}},[lt,pe]),Ye=v.useMemo(()=>{const T=(qe,it)=>qe.reduce((Et,Pt)=>Et+Number((Pt==null?void 0:Pt[it])??0),0),M=qe=>{const it=Number(qe);return Number.isFinite(it)?Math.floor(it):0},V=qe=>{const it=Number((qe==null?void 0:qe.totalPackages)??0);if(it>0)return it;const Et=Array.isArray(qe==null?void 0:qe.items)?qe.items:[];return T(Et,"packages")};let q=0,ee=0;for(const qe of ae){const it=Array.isArray(qe.items)?qe.items:[];if(it.length)for(const Et of it)q+=Number((Et==null?void 0:Et.subtotal)??0);else q+=Number(qe.subtotal??0);ee+=V(qe)}let se=0,Oe=0,Ke=0;const ot=qe=>{const it=Number(qe==null?void 0:qe.remainingPackages);if(Number.isFinite(it)&&it>0)return Math.floor(it);const Et=Math.max(1,M((qe==null?void 0:qe.unitsPerPackage)??1)),Pt=M((qe==null?void 0:qe.remainingUnits)??(qe==null?void 0:qe.remaining)??0);return Pt>0?Math.max(0,Math.floor(Pt/Et)):0};for(const qe of G)se+=Number(qe.subtotal??0),Oe+=Number(qe.packages??0),Ke+=ot(qe);const Fe=new Set(ae.filter(qe=>String(qe.date||"")>=s&&String(qe.date||"")<=l).map(qe=>qe.id));let Xe=0;for(const qe of _t){const it=String(qe.orderId||"").trim();it&&Fe.has(it)&&(Xe+=Number(qe.remainingPackages??0))}const xe=ge.reduce((qe,it)=>qe+yr(it.remainingPackages),0),Ge=Ue.reduce((qe,it)=>qe+yr(it.remainingPackages),0);return{providerTotalMaster:Br(q),providerTotalVendor:Br(se),orderedPacksMaster:Go(ee),remainingPacksMaster:Go(Xe),orderedPacksVendor:Go(Oe),remainingPacksVendor:Go(Ke),globalRemainingMaster:Go(xe),globalRemainingVendor:Go(Ge)}},[ae,G,_t,s,l,ge,Ue]),yt=v.useMemo(()=>{const T={};let M=0;for(const V of H){const q=String(V.date||"").trim();if(!q)continue;const ee=Math.max(0,yr(V.amount));M+=ee,T[q]=Br((T[q]||0)+ee)}return{total:Br(M),byDay:T}},[H]),At=v.useMemo(()=>{let T=0;for(const M of ae){const V=Array.isArray(M.items)?M.items:[];if(V.length)for(const q of V)T+=yr(q==null?void 0:q.subtotal);else T+=yr(M.subtotal)}return Br(T)},[ae]),he=v.useMemo(()=>{var ot;const T=Fe=>{const Xe=Math.max(1,Math.floor(yr(Fe.unitsPerPackage||1))),xe=yr(Fe.totalUnits)>0?yr(Fe.totalUnits):yr(Fe.packages)*Xe;let Ge=0;yr(Fe.remainingUnits)>0?Ge=yr(Fe.remainingUnits):yr(Fe.remainingPackages)>0?Ge=yr(Fe.remainingPackages)*Xe:Ge=0;const qe=Math.max(0,xe-Ge);return{orderedUnits:xe,remainingUnits:Ge,soldUnits:qe,upp:Xe}},M=Fe=>{const Xe=Pe[Fe];return qS(Xe==null?void 0:Xe.branch)||"ISLA"},V=(Fe,Xe)=>{var xe,Ge,qe;return Xe==="ISLA"?yr(((xe=Be[String(Fe.productId||"")])==null?void 0:xe.unitPriceIsla)??Fe.unitPriceIsla):Xe==="RIVAS"?yr(((Ge=Be[String(Fe.productId||"")])==null?void 0:Ge.unitPriceRivas)??Fe.unitPriceRivas):Xe==="SAN_JORGE"?yr(((qe=Be[String(Fe.productId||"")])==null?void 0:qe.unitPriceSanJorge)??Fe.unitPriceSanJorge):0},q=(Fe,Xe)=>{const xe=Math.max(0,Math.floor(yr(Fe.packages))),Ge=V(Fe,Xe),qe=Br(Ge*xe);if(qe>0)return qe;const it=yr(Fe.totalVendor)||(Xe==="ISLA"?yr(Fe.totalIsla):Xe==="RIVAS"?yr(Fe.totalRivas):Xe==="SAN_JORGE"?yr(Fe.totalSanJorge):0);if(it>0)return it;const Et=yr(Fe.unitPriceVendor);if(Et>0){const{orderedUnits:Pt}=T(Fe);return Et*Pt}return 0},ee=(Fe,Xe)=>{const xe=V(Fe,Xe),{orderedUnits:Ge,upp:qe}=T(Fe);if(xe>0&&qe>0)return xe/qe;const it=yr(Fe.unitPriceVendor);if(it>0)return it;const Et=q(Fe,Xe);return Et>0&&Ge>0?Et/Ge:0},se=new Map;for(const Fe of G){const Xe=String(Fe.orderId||"").trim(),xe=Xe||`DOC:${Fe.id}`,Ge=String(Fe.sellerId||"").trim(),qe=String(Fe.sellerName||"").trim()||Ge&&((ot=Pe[Ge])==null?void 0:ot.name)||""||"(sin vendedor)",it=String(Fe.date||"").trim(),Et=Ge?M(Ge):"",{orderedUnits:Pt,remainingUnits:pr,soldUnits:Ot}=T(Fe),Dt=q(Fe,Et),fr=ee(Fe,Et),ir=fr>0?fr*Ot:Pt>0?Dt*Ot/Pt:0,Bt=Br(Dt-ir);se.has(xe)||se.set(xe,{orderKey:xe,orderId:Xe||xe,date:it,sellerId:Ge,sellerName:qe,branch:Et,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const gr=se.get(xe);gr.lines.push({...Fe,orderedUnits:Pt,soldUnits:Ot,remainingUnits:pr,lineTotal:Br(Dt),lineSoldValue:Br(ir),lineRemainingValue:Br(Bt)}),gr.totalOrden+=Dt,gr.vendido+=ir,gr.restante+=Bt,gr.comision+=yr(Fe.uVendor??Fe.vendorProfit??Fe.gainVendor)}for(const Fe of se.values())Fe.comision=Br(Fe.comision),Fe.totalEsperado=Br(Fe.totalOrden-Fe.comision),Fe.totalOrden=Br(Fe.totalOrden),Fe.vendido=Br(Fe.vendido),Fe.restante=Br(Fe.restante);const Oe=Array.from(se.values()).sort((Fe,Xe)=>Fe.date&&Xe.date?Fe.date<Xe.date?1:-1:Xe.totalOrden-Fe.totalOrden),Ke=Oe.reduce((Fe,Xe)=>(Fe.totalOrden+=yr(Xe.totalOrden),Fe.vendido+=yr(Xe.vendido),Fe.restante+=yr(Xe.restante),Fe.comision+=yr(Xe.comision),Fe.totalEsperado+=yr(Xe.totalEsperado),Fe),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Br(Ke.totalOrden),vendido:Br(Ke.vendido),restante:Br(Ke.restante),comision:Br(Ke.comision),totalEsperado:Br(Ke.totalEsperado)},orders:Oe}},[G,Pe,Be]),re=v.useMemo(()=>{var q,ee,se;let T=0,M=0;for(const Oe of G){const Ke=String(Oe.sellerId||"").trim(),ot=Ke?Pe[Ke]:void 0,Fe=qS(ot==null?void 0:ot.branch)||"ISLA",Xe=Math.max(0,Math.floor(yr(Oe.packages)));if(!Xe)continue;const xe=yr(Fe==="ISLA"?((q=Be[String(Oe.productId||"")])==null?void 0:q.unitPriceIsla)??Oe.unitPriceIsla:Fe==="RIVAS"?((ee=Be[String(Oe.productId||"")])==null?void 0:ee.unitPriceRivas)??Oe.unitPriceRivas:((se=Be[String(Oe.productId||"")])==null?void 0:se.unitPriceSanJorge)??Oe.unitPriceSanJorge);let Ge=Br(xe*Xe);Ge||(Ge=yr(Fe==="ISLA"?Oe.totalIsla:Fe==="RIVAS"?Oe.totalRivas:Oe.totalSanJorge)),Ge&&(T+=Ge,M+=Ge)}const V=Br(yr(ue.expectedIsla)-M);return{dispersedTotal:Br(T),dispersedIsla:Br(M),totalExistenteIsla:V}},[G,Pe,ue.expectedIsla,Be]),oe=v.useMemo(()=>({net:Br(G.reduce((M,V)=>{const q=V.uNeta,ee=yr(q);if(ee!==0||q===0)return M+ee;const se=yr(V.grossProfit),Oe=yr(V.logisticAllocated??V.gastos??V.gasto),Ke=yr(V.uVendor??V.vendorProfit);return M+(se-Oe-Ke)},0))}),[G]),Ve=v.useMemo(()=>{let T=0,M=0,V=0;for(const q of lt){if(q.type!=="CREDITO")continue;const ee=yr(q.amount),se=yr(q.commission);T+=ee,M+=ee-se}for(const q of J){const ee=String(q.date||"").trim();if(!ee||ee<s||ee>l)continue;const se=yr(q.amount);(q.type||(se<0?"ABONO":"CARGO"))==="ABONO"&&(V+=Math.abs(se))}return{cxc:Br(T),recaudado:Br(V),utilidadBruta:Br(M)}},[lt,J,s,l]),de=v.useMemo(()=>{if(!ce)return null;const T=he.orders.find(q=>q.orderKey===ce);if(!T)return null;const M={};for(const q of T.lines){const ee=String(q.productName||"(sin nombre)");M[ee]||(M[ee]={productName:ee,asociados:0,vendidos:0,restantes:0});const se=Math.max(0,Math.floor(yr(q.packages))),Oe=Math.max(1,Math.floor(yr(q.unitsPerPackage||1))),Ke=Math.max(0,Math.floor(yr(q.remainingPackages)||(yr(q.remainingUnits)>0?yr(q.remainingUnits)/Oe:0))),ot=Math.max(0,se-Ke);M[ee].asociados+=se,M[ee].vendidos+=ot,M[ee].restantes+=Ke}const V=Object.values(M).map(q=>({...q,asociados:Math.floor(q.asociados),vendidos:Math.floor(q.vendidos),restantes:Math.floor(q.restantes)})).sort((q,ee)=>ee.asociados-q.asociados);return{...T,products:V}},[ce,he.orders]),Se=v.useMemo(()=>{const T=ge.reduce((V,q)=>V+yr(q.remainingPackages),0),M=Ue.reduce((V,q)=>V+yr(q.remainingPackages),0);return{masterRemainingPackages:Go(T),vendorRemainingPackages:Go(M)}},[ge,Ue]),dt=v.useMemo(()=>{const T=new Map,M=q=>E==="DIA"?{key:q.date,label:q.date}:E==="VENDEDOR"?{key:q.vendorId||"",label:q.vendorName||""}:E==="PRODUCTO"?{key:q.productName||"",label:q.productName||""}:{key:q.branch||"",label:q.branch||""};for(const q of lt){const{key:ee,label:se}=M(q);T.has(ee)||T.set(ee,{key:ee,label:se,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const Oe=T.get(ee);Oe.rows.push(q),q.type==="CREDITO"?(Oe.packsCredit+=yr(q.packages),Oe.salesCredit+=yr(q.amount),Oe.commCredit+=yr(q.commission)):(Oe.packsCash+=yr(q.packages),Oe.salesCash+=yr(q.amount),Oe.commCash+=yr(q.commission))}const V=Array.from(T.values()).map(q=>({...q,packsCash:Go(q.packsCash),packsCredit:Go(q.packsCredit),salesCash:Br(q.salesCash),salesCredit:Br(q.salesCredit),commCash:Br(q.commCash),commCredit:Br(q.commCredit)}));return E==="DIA"?V.sort((q,ee)=>q.key<ee.key?1:-1):V.sort((q,ee)=>ee.salesCash+ee.salesCredit-(q.salesCash+q.salesCredit)),V},[lt,E]),xt=v.useMemo(()=>{if(!te)return[];const T=dt.find(M=>M.key===te);return(T==null?void 0:T.rows)||[]},[te,dt]),ht=v.useMemo(()=>{const T={};for(const M of xt){const V=M.productName||"(sin nombre)";T[V]||(T[V]={productName:V,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),M.type==="CREDITO"?(T[V].packsCredit+=yr(M.packages),T[V].salesCredit+=yr(M.amount),T[V].commCredit+=yr(M.commission)):(T[V].packsCash+=yr(M.packages),T[V].salesCash+=yr(M.amount),T[V].commCash+=yr(M.commission))}return Object.values(T).map(M=>({...M,packsCash:Go(M.packsCash),packsCredit:Go(M.packsCredit),salesCash:Br(M.salesCash),salesCredit:Br(M.salesCredit),commCash:Br(M.commCash),commCredit:Br(M.commCredit)})).sort((M,V)=>V.salesCash+V.salesCredit-(M.salesCash+M.salesCredit))},[xt]),bt=v.useMemo(()=>{const T={},M=se=>(vt[se]||"").trim()||se;for(const se of L){const Oe=String(se.id||"").trim();Oe&&(T[Oe]={customerId:Oe,name:M(Oe),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:yr(se.initialDebt),initialDebtDate:String(se.initialDebtDate||"").trim(),movements:[]})}for(const se of J){const Oe=String(se.customerId||"").trim();if(!Oe)continue;const Ke=String(se.date||"");Ke&&Ke>l||(T[Oe]||(T[Oe]={customerId:Oe,name:M(Oe),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:0,initialDebtDate:"",movements:[]}),T[Oe].movements.push(se))}const V=(se,Oe,Ke)=>{const ot=Number(se||0);if(!ot)return 0;const Fe=String(Oe||"").trim();return Fe&&Ke.some(xe=>{var Pt;const Ge=Number(xe.amount||0);if(!(Ge>0))return!1;const qe=Math.abs(Ge-ot)<.01,it=String(xe.date||"").trim()===Fe,Et=!!((Pt=xe.ref)!=null&&Pt.saleId);return qe&&it&&Et})?0:ot},q=Object.values(T).map(se=>{const Oe=se.movements.reduce((Xe,xe)=>Xe+yr(xe.amount),0),Ke=V(se.initialDebt,se.initialDebtDate,se.movements);let ot="",Fe=0;for(const Xe of se.movements){const xe=Xe.type||(yr(Xe.amount)<0?"ABONO":"CARGO"),Ge=String(Xe.date||"");if(xe==="ABONO"){const qe=Math.abs(yr(Xe.amount));(!ot||Ge>ot)&&(ot=Ge,Fe=qe)}}return{customerId:se.customerId,name:se.name,balance:Br(Ke+Oe),lastPayment:ot,lastPaymentAmount:Br(Fe)}}).filter(se=>se.balance>0).sort((se,Oe)=>Oe.balance-se.balance),ee=Br(q.reduce((se,Oe)=>se+Oe.balance,0));return{count:q.length,totalPending:ee,list:q.slice(0,20)}},[J,vt,L,l]),et=v.useMemo(()=>{if(!Re)return[];const T=J.filter(V=>(V.customerId||"").trim()===Re.customerId).filter(V=>!V.date||String(V.date)<=l).map(V=>({id:V.id,date:String(V.date||""),type:String(V.type||""),amount:Br(yr(V.amount))})).sort((V,q)=>V.date<q.date?-1:V.date>q.date?1:0);let M=0;return T.map(V=>{const q=V.type==="ABONO"?-V.amount:V.amount;return M=Br(M+q),{...V,running:M}})},[Re,J,l]),Ne=v.useMemo(()=>Re?fe.filter(T=>(T.customerId||"").trim()===Re.customerId).filter(T=>!T.date||String(T.date)<=l).sort((T,M)=>T.date<M.date?-1:T.date>M.date?1:0):[],[Re,fe,l]),mt=v.useMemo(()=>{const T=Br(be.salesTotal),M=Br(be.commTotal),V=Br(yt.total),q=Br(T-M-V),ee=new Set;for(const Xe of lt)Xe.date&&ee.add(Xe.date);const se=Math.max(1,ee.size),Oe=Br(T/se),Ke=Br(M/se),ot=Br(V/se),Fe=Br(q/se);return{ingreso:T,comision:M,gastos:V,gananciaNeta:q,daysCount:se,ingresoDia:Oe,comisionDia:Ke,gastosDia:ot,netaDia:Fe}},[be,yt.total,lt]),W=v.useMemo(()=>{const T={};for(const ee of lt){const se=ee.date;se&&(T[se]||(T[se]={date:se,ingreso:0,comision:0}),T[se].ingreso+=yr(ee.amount),T[se].comision+=yr(ee.commission))}const M=Object.keys(T).sort((ee,se)=>ee<se?-1:1),V=M.map(ee=>({label:ee.slice(5),value:Br(T[ee].ingreso)})),q=M.map(ee=>{var Fe,Xe;const se=yr((Fe=T[ee])==null?void 0:Fe.ingreso),Oe=yr((Xe=T[ee])==null?void 0:Xe.comision),Ke=yr(yt.byDay[ee]||0),ot=se-Oe-Ke;return{label:ee.slice(5),value:Br(ot)}});return{seriesIngreso:V,seriesNeta:q,datesCount:M.length}},[lt,yt.byDay]),Ie=v.useMemo(()=>[{label:"Rivas",value:yr(Le.RIVAS.sales)},{label:"San Jorge",value:yr(Le.SAN_JORGE.sales)},{label:"Isla",value:yr(Le.ISLA.sales)}].map(T=>({...T,value:Br(T.value)})),[Le]),Je=async()=>{if(pt.current){pt.current.classList.add("force-pdf-colors");try{const M=(await yg(pt.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),V=new Lr;V.addImage(M,"PNG",10,10,190,0),V.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{pt.current.classList.remove("force-pdf-colors")}}},tt=()=>{const M=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...lt.map(se=>[se.date,se.processedDate||"",se.status,se.type,se.vendorId,`"${String(se.vendorName||"").replace(/"/g,'""')}"`,se.branch||"",`"${String(se.productName||"").replace(/"/g,'""')}"`,Ls(se.packages),Nr(se.amount),Nr(se.commission),se.customerId||"",`"${String(ct(se)||"").replace(/"/g,'""')}"`].join(","))],V=new Blob([M.join(`
`)],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(V),ee=document.createElement("a");ee.href=q,ee.download=`data_center_dulces_${s}_a_${l}.csv`,ee.click(),URL.revokeObjectURL(q)};return n?i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:[i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:Je,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:tt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:T=>o(T.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:T=>c(T.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:T=>d(T.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:T=>A(T.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:T=>m(T.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),pe.map(T=>i.jsx("option",{value:T.id,children:T.name||T.id},T.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:T=>g(T.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:T=>y(T.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:T=>w(T.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:T=>I(T.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:T=>S(T.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:T=>{Ee(""),F(T.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{we(""),ut("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",gt==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{we(""),ut("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",gt==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",Nr(yt.total)]})]})]}),i.jsxs("div",{ref:pt,children:[gt==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(mt.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Nr(mt.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Nr(be.commCash),"  Crdito: C$",Nr(be.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Nr(mt.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(mt.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(mt.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:mt.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(Y$,{title:"Ventas por da (Ingreso)",series:W.seriesIngreso,valuePrefix:"C$"}),i.jsx(Y$,{title:"Ganancia neta por da (real)",series:W.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(PQe,{title:"Distribucin de ventas por sucursal",items:Ie})})]}),gt==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(be.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(be.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(be.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Nr(be.salesCash),"  Crdito: C$",Nr(be.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(be.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Nr(be.commCash),"  Crdito: C$",Nr(be.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Aprox. (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(ue.grossIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Nr(ue.expectedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Nr(Le.ISLA.sales)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Nr(ke.ISLA)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(At)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad neta (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(oe.net)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"U bruta  Gastos  U vendedor"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(Ye.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Ls(Ye.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Ls(Se.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(Ye.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Ls(Ye.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Ls(Se.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(Ye.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(re.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(re.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente en productos (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(re.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"CxC (ventas crdito)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(Ve.cxc)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(be.commCredit)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Recaudacin (abonos)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(Ve.recaudado)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"abonos en ar_movements"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta crdito (ventas  comisin)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Nr(Ve.utilidadBruta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Paquetes vendidos al crdito"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Nr(he.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Nr(he.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Nr(he.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Nr(he.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Nr(he.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),he.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:he.orders.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:T.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[T.sellerName," ",T.branch?` ${T.branch}`:""," ",T.date?` ${T.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>we(T.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.comision)]})]})]})]},T.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:he.orders.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.sellerName}),i.jsx("td",{className:"border p-2",children:T.branch||""}),i.jsx("td",{className:"border p-2",children:T.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>we(T.orderKey),children:"Ver detalle"})})]},T.orderKey))})]})}),de&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",de.orderId]}),i.jsx("button",{onClick:()=>we(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Nr(de.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Nr(de.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Nr(de.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Nr(de.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Nr(de.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:de.products.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:T.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:T.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:T.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:T.restantes})]})]})]},T.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[de.products.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.productName}),i.jsx("td",{className:"border p-2",children:T.asociados}),i.jsx("td",{className:"border p-2",children:T.vendidos}),i.jsx("td",{className:"border p-2",children:T.restantes})]},T.productName)),de.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(Se.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ls(Se.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Ae.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ae.cashArr.map(T=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:T.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Nr(T.total)]})]},T.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Ae.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ae.creditArr.map(T=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:T.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Nr(T.total)]})]},T.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Saldos pendientes (hasta ",l,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:bt.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",Nr(bt.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),bt.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:bt.list.map(T=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Nr(T.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono: ",i.jsxs("b",{children:["C$",Nr(T.lastPaymentAmount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha ult. abono:"," ",i.jsx("span",{className:"font-medium",children:T.lastPayment||""})]}),i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>We(T),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},T.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:bt.list.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.name}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.balance)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.lastPaymentAmount)]}),i.jsx("td",{className:"border p-2",children:T.lastPayment||""}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{type:"button",onClick:()=>We(T),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},T.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),P?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:dt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):dt.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Ee(T.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:Ls(T.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:Ls(T.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.commCredit)]})]})]})]},T.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[dt.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.label}),i.jsx("td",{className:"border p-2",children:Ls(T.packsCash)}),i.jsx("td",{className:"border p-2",children:Ls(T.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Ee(T.key),children:"Ver detalle"})})]},T.key)),dt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),te&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((ft=dt.find(T=>T.key===te))==null?void 0:ft.label)||te]}),i.jsx("button",{onClick:()=>Ee(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Nr(xt.filter(T=>T.type==="CONTADO").reduce((T,M)=>T+yr(M.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Nr(xt.filter(T=>T.type==="CREDITO").reduce((T,M)=>T+yr(M.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:Ls(xt.filter(T=>T.type==="CONTADO").reduce((T,M)=>T+yr(M.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:Ls(xt.filter(T=>T.type==="CREDITO").reduce((T,M)=>T+yr(M.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:xt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):xt.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:T.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Nr(T.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:T.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:T.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:T.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:Ls(T.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",T.date]})]},T.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[xt.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:T.vendorName}),i.jsx("td",{className:"border p-2",children:T.productName}),i.jsx("td",{className:"border p-2",children:T.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:T.branch||""}),i.jsx("td",{className:"border p-2",children:Ls(T.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.commission)]}),i.jsx("td",{className:"border p-2",children:T.date})]},T.id)),xt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:ht.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):ht.map(T=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:T.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:Ls(T.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:Ls(T.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Nr(T.commCredit)]})]})]})]},T.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[ht.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:T.productName}),i.jsx("td",{className:"border p-2",children:Ls(T.packsCash)}),i.jsx("td",{className:"border p-2",children:Ls(T.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Nr(T.commCredit)]})]},T.productName)),ht.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),D&&i.jsx("p",{className:"mt-3 text-sm",children:D})]}),Re&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:Re.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Saldo pendiente: ",i.jsxs("b",{children:["C$",Nr(Re.balance)]})]})]}),i.jsx("button",{type:"button",onClick:()=>We(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Saldo"})]})}),i.jsx("tbody",{children:et.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin movimientos."})}):et.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:T.date||""}),i.jsx("td",{className:"border p-1",children:T.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Nr(T.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Nr(T.running)]})]},T.id))})]})}),i.jsx("div",{className:"mt-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:Ne.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"border p-2 text-center text-gray-500",children:"Sin ventas asociadas."})}):Ne.map(T=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:T.date||""}),i.jsx("td",{className:"border p-1",children:T.productName||""}),i.jsx("td",{className:"border p-1",children:T.vendorName||""}),i.jsx("td",{className:"border p-1",children:T.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Nr(T.amount)]})]},T.id))})]})})]})})]}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function fse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=fse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Oa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=fse(t))&&(n&&(n+=" "),n+=e);return n}var kQe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function CR(t){if(typeof t!="string")return!1;var e=kQe;return e.includes(t)}var FQe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],OQe=new Set(FQe);function hse(t){return typeof t!="string"?!1:OQe.has(t)}function Ase(t){return typeof t=="string"&&t.startsWith("data-")}function Hf(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(hse(r)||Ase(r))&&(e[r]=t[r]);return e}function L2(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Hf(e)}return typeof t=="object"&&!Array.isArray(t)?Hf(t):null}function dd(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(hse(r)||Ase(r)||CR(r))&&(e[r]=t[r]);return e}var DQe=["children","width","height","viewBox","className","style","title","desc"];function nF(){return nF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nF.apply(null,arguments)}function RQe(t,e){if(t==null)return{};var r,n,a=MQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function MQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _R=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=RQe(t,DQe),f=s||{width:n,height:a,x:0,y:0},A=Oa("recharts-surface",o);return v.createElement("svg",nF({},dd(d),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),LQe=["children","className"];function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aF.apply(null,arguments)}function UQe(t,e){if(t==null)return{};var r,n,a=QQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function QQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oc=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=UQe(t,LQe),s=Oa("recharts-layer",n);return v.createElement("g",aF({className:s},dd(a),{ref:e}),r)}),mse=v.createContext(null),VQe=()=>v.useContext(mse);function es(t){return function(){return t}}const pse=Math.cos,zS=Math.sin,uf=Math.sqrt,WS=Math.PI,o4=2*WS,sF=Math.PI,iF=2*sF,Ym=1e-6,HQe=iF-Ym;function gse(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function $Qe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return gse;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class GQe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?gse:$Qe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>Ym)if(!(Math.abs(f*c-u*d)>Ym)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,g=h*h+m*m,x=Math.sqrt(p),y=Math.sqrt(A),b=s*Math.tan((sF-Math.acos((p+A-g)/(2*x*y)))/2),w=b/y,j=b/x;Math.abs(w-1)>Ym&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ym||Math.abs(this._y1-d)>Ym)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%iF+iF),A>HQe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>Ym&&this._append`A${n},${n},0,${+(A>=sF)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function ER(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new GQe(e)}function SR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xse(t){this._context=t}xse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function l4(t){return new xse(t)}function vse(t){return t[0]}function yse(t){return t[1]}function bse(t,e){var r=es(!0),n=null,a=l4,s=null,o=ER(l);t=typeof t=="function"?t:t===void 0?vse:es(t),e=typeof e=="function"?e:e===void 0?yse:es(e);function l(c){var u,d=(c=SR(c)).length,f,A=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:es(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:es(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:es(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function a_(t,e,r){var n=null,a=es(!0),s=null,o=l4,l=null,c=ER(u);t=typeof t=="function"?t:t===void 0?vse:es(+t),e=typeof e=="function"?e:es(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?yse:es(+r);function u(f){var A,h,m,p=(f=SR(f)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=o(y=c())),A=0;A<=p;++A){if(!(A<p&&a(g=f[A],A,f))===x)if(x=!x)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[A]=+t(g,A,f),w[A]=+e(g,A,f),l.point(n?+n(g,A,f):b[A],r?+r(g,A,f):w[A]))}if(y)return l=null,y+""||null}function d(){return bse().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:es(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:es(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:es(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:es(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:es(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:es(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:es(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class wse{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function KQe(t){return new wse(t,!0)}function qQe(t){return new wse(t,!1)}const IR={draw(t,e){const r=uf(e/WS);t.moveTo(r,0),t.arc(0,0,r,0,o4)}},zQe={draw(t,e){const r=uf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Nse=uf(1/3),WQe=Nse*2,XQe={draw(t,e){const r=uf(e/WQe),n=r*Nse;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},YQe={draw(t,e){const r=uf(e),n=-r/2;t.rect(n,n,r,r)}},JQe=.8908130915292852,Cse=zS(WS/10)/zS(7*WS/10),ZQe=zS(o4/10)*Cse,eVe=-pse(o4/10)*Cse,tVe={draw(t,e){const r=uf(e*JQe),n=ZQe*r,a=eVe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=o4*s/5,l=pse(o),c=zS(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},z5=uf(3),rVe={draw(t,e){const r=-uf(e/(z5*3));t.moveTo(0,r*2),t.lineTo(-z5*r,-r),t.lineTo(z5*r,-r),t.closePath()}},Ou=-.5,Du=uf(3)/2,oF=1/uf(12),nVe=(oF/2+1)*3,aVe={draw(t,e){const r=uf(e/nVe),n=r/2,a=r*oF,s=n,o=r*oF+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Ou*n-Du*a,Du*n+Ou*a),t.lineTo(Ou*s-Du*o,Du*s+Ou*o),t.lineTo(Ou*l-Du*c,Du*l+Ou*c),t.lineTo(Ou*n+Du*a,Ou*a-Du*n),t.lineTo(Ou*s+Du*o,Ou*o-Du*s),t.lineTo(Ou*l+Du*c,Ou*c-Du*l),t.closePath()}};function sVe(t,e){let r=null,n=ER(a);t=typeof t=="function"?t:es(t||IR),e=typeof e=="function"?e:es(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:es(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:es(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function XS(){}function YS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function _se(t){this._context=t}_se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:YS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:YS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iVe(t){return new _se(t)}function Ese(t){this._context=t}Ese.prototype={areaStart:XS,areaEnd:XS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:YS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oVe(t){return new Ese(t)}function Sse(t){this._context=t}Sse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:YS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lVe(t){return new Sse(t)}function Ise(t){this._context=t}Ise.prototype={areaStart:XS,areaEnd:XS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function cVe(t){return new Ise(t)}function J$(t){return t<0?-1:1}function Z$(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(J$(s)+J$(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function eG(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function W5(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function JS(t){this._context=t}JS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W5(this,this._t0,eG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,W5(this,eG(this,r=Z$(this,t,e)),r);break;default:W5(this,this._t0,r=Z$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function jse(t){this._context=new Pse(t)}(jse.prototype=Object.create(JS.prototype)).point=function(t,e){JS.prototype.point.call(this,e,t)};function Pse(t){this._context=t}Pse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function uVe(t){return new JS(t)}function dVe(t){return new jse(t)}function Bse(t){this._context=t}Bse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=tG(t),a=tG(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function tG(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function fVe(t){return new Bse(t)}function c4(t,e){this._context=t,this._t=e}c4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function hVe(t){return new c4(t,.5)}function AVe(t){return new c4(t,0)}function mVe(t){return new c4(t,1)}function ag(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function lF(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function pVe(t,e){return t[e]}function gVe(t){const e=[];return e.key=t,e}function xVe(){var t=es([]),e=lF,r=ag,n=pVe;function a(s){var o=Array.from(t.apply(this,arguments),gVe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=SR(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:es(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:es(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?lF:typeof s=="function"?s:es(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??ag,a):r},a}function vVe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}ag(t,e)}}function yVe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ag(t,e)}}function bVe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;h+=g-x}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,ag(t,e)}}var u4={},Tse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Tse);var jR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(jR);var d4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(d4);var f4={},kse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(kse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kse,r=d4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const f=a[l];u?f==="\\"&&l+1<o?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(f4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tse,r=jR,n=d4,a=f4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(u4);var wVe=u4.get;const sg=dA(wVe);var NVe=4;function k0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NVe,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function ni(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+k0(l)+s:a+s},"")}var ll=t=>t===0?0:t>0?1:-1,$f=t=>typeof t=="number"&&t!=+t,aA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,nn=t=>(typeof t=="number"||t instanceof Number)&&!$f(t),Gf=t=>nn(t)||typeof t=="string",CVe=0,U2=t=>{var e=++CVe;return"".concat(t||"").concat(e)},Dl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nn(e)&&typeof e!="string")return n;var s;if(aA(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return $f(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Fse=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function eo(t,e,r){return nn(t)&&nn(e)?k0(t+r*(e-t)):e}function _Ve(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):sg(n,e))===r)}var Ro=t=>t===null||typeof t>"u",Mw=t=>Ro(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function EVe(t){return t!=null}function Lw(){}var SVe=["type","size","sizeType"];function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cF.apply(null,arguments)}function rG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(r),!0).forEach(function(n){IVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IVe(t,e,r){return(e=jVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jVe(t){var e=PVe(t,"string");return typeof e=="symbol"?e:e+""}function PVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BVe(t,e){if(t==null)return{};var r,n,a=TVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function TVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ose={symbolCircle:IR,symbolCross:zQe,symbolDiamond:XQe,symbolSquare:YQe,symbolStar:tVe,symbolTriangle:rVe,symbolWye:aVe},kVe=Math.PI/180,FVe=t=>{var e="symbol".concat(Mw(t));return Ose[e]||IR},OVe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*kVe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},DVe=(t,e)=>{Ose["symbol".concat(Mw(t))]=e},PR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=BVe(t,SVe),s=nG(nG({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var A=FVe(o),h=sVe().type(A).size(OVe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=dd(s);return nn(u)&&nn(d)&&nn(r)?v.createElement("path",cF({},f,{className:Oa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};PR.registerSymbol=DVe;var Dse=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,RVe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{CR(a)&&(n[a]=s=>r[a](r,s))}),n},MVe=(t,e,r)=>n=>(t(e,r,n),null),Uw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];CR(a)&&typeof s=="function"&&(n||(n={}),n[a]=MVe(s,e,r))}),n};function aG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aG(Object(r),!0).forEach(function(n){UVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UVe(t,e,r){return(e=QVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QVe(t){var e=VVe(t,"string");return typeof e=="symbol"?e:e+""}function VVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dl(t,e){var r=LVe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZS.apply(null,arguments)}function sG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(r),!0).forEach(function(n){$Ve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Ve(t,e,r){return(e=GVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GVe(t){var e=KVe(t,"string");return typeof e=="symbol"?e:e+""}function KVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hu=32,qVe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function zVe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Hu/2,s=Hu/6,o=Hu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Hu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Hu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Hu/8,"h").concat(Hu,"v").concat(Hu*3/4,"h").concat(-Hu,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=HVe({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(PR,{fill:l,cx:a,cy:a,size:Hu,sizeType:"diameter",type:c})}function WVe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:Hu,height:Hu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||a,h=Oa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=A?A(d.value,d,f):d.value;return v.createElement("li",ZS({className:h,style:c,key:"legend-item-".concat(f)},Uw(t,d,f)),v.createElement(_R,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(zVe,{data:d,iconType:o,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var XVe=t=>{var e=dl(t,qVe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(WVe,ZS({},e,{payload:r})))},Rse={},Mse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(Mse);var BR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(BR);var Lse={},h4={},Use={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Use);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Use;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(h4);var Qse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Qse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h4,r=Qse;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Lse);var Vse={},Hse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=u4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Hse);var $se={},TR={},Gse={},kR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(kR);var FR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(FR);var OR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(OR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kR,r=FR,n=OR;function a(d,f,A){return typeof A!="function"?a(d,f,()=>{}):s(d,f,function h(m,p,g,x,y,b){const w=A(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,h,b)},new Map)}function s(d,f,A,h){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,h);case"function":return Object.keys(f).length>0?s(d,{...f},A,h):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function o(d,f,A,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,h);if(f instanceof Map)return l(d,f,A,h);if(f instanceof Set)return u(d,f,A,h);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!A(d[g],f[g],g,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function l(d,f,A,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(A(g,p,m,d,f,h)===!1)return!1}return!0}function c(d,f,A,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(A(b,g,p,d,f,h)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,f,A,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,h):!1}t.isMatchWith=a,t.isSetMatch=u})(Gse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gse;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(TR);var Kse={},DR={},qse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(qse);var RR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(RR);var MR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",S="[object BigInt64Array]",E="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=F,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(MR);var zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(zse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qse,r=RR,n=MR,a=FR,s=zse;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,h=new Map,m=void 0){const p=m==null?void 0:m(d,f,A,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,A,h,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,A,h,m));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const x of d)g.add(l(x,void 0,A,h,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,A,h,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,A,h,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,A,h,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(d instanceof String){const g=new String(d.valueOf());return h.set(d,g),c(g,d,A,h,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,A,h,m),g}return d}function c(d,f,A=d,h,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(f[x],x,A,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(DR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Kse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TR,r=Kse;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})($se);var Wse={},Xse={},Yse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR,r=MR;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(Yse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yse;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Xse);var Jse={},LR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(LR);var Zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RR;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Zse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jR,r=LR,n=Zse,a=f4;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(Jse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TR,r=d4,n=Xse,a=u4,s=Jse;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Wse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BR,r=Hse,n=$se,a=Wse;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Vse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mse,r=BR,n=Lse,a=Vse;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(Rse);var YVe=Rse.uniqBy;const iG=dA(YVe);function eie(t,e,r){return e===!0?iG(t,r):typeof e=="function"?iG(t,e):t}var tie={exports:{}},rie={},nie={exports:{}},aie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=v;function JVe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZVe=typeof Object.is=="function"?Object.is:JVe,eHe=kv.useState,tHe=kv.useEffect,rHe=kv.useLayoutEffect,nHe=kv.useDebugValue;function aHe(t,e){var r=e(),n=eHe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return rHe(function(){a.value=r,a.getSnapshot=e,X5(a)&&s({inst:a})},[t,r,e]),tHe(function(){return X5(a)&&s({inst:a}),t(function(){X5(a)&&s({inst:a})})},[t]),nHe(r),r}function X5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ZVe(t,r)}catch{return!0}}function sHe(t,e){return e()}var iHe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sHe:aHe;aie.useSyncExternalStore=kv.useSyncExternalStore!==void 0?kv.useSyncExternalStore:iHe;nie.exports=aie;var oHe=nie.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4=v,lHe=oHe;function cHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uHe=typeof Object.is=="function"?Object.is:cHe,dHe=lHe.useSyncExternalStore,fHe=A4.useRef,hHe=A4.useEffect,AHe=A4.useMemo,mHe=A4.useDebugValue;rie.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=fHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=AHe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,uHe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=dHe(t,s[0],s[1]);return hHe(function(){o.hasValue=!0,o.value=l},[l]),mHe(l),l};tie.exports=rie;var pHe=tie.exports,UR=v.createContext(null),gHe=t=>t,ss=()=>{var t=v.useContext(UR);return t?t.store.dispatch:gHe},uE=()=>{},xHe=()=>uE,vHe=(t,e)=>t===e;function Jr(t){var e=v.useContext(UR);return pHe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:xHe,e?e.store.getState:uE,e?e.store.getState:uE,e?t:uE,vHe)}function yHe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function bHe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function wHe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var oG=t=>Array.isArray(t)?t:[t];function NHe(t){const e=Array.isArray(t[0])?t[0]:t;return wHe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function CHe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var _He=class{constructor(t){this.value=t}deref(){return this.value}},EHe=typeof WeakRef<"u"?WeakRef:_He,SHe=0,lG=1;function s_(){return{s:SHe,v:void 0,o:null,p:null}}function sie(t,e={}){let r=s_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,h=c;A<h;A++){const m=arguments[A];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=s_(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=s_(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===lG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new EHe(d):d}return u.s=lG,u.v=d,d}return o.clearCache=()=>{r=s_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function IHe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),yHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:h=sie,argsMemoizeOptions:m=[]}=d,p=oG(A),g=oG(m),x=NHe(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const j=CHe(x,arguments);return l=y.apply(null,j),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var Gt=IHe(sie),jHe=Object.assign((t,e=Gt)=>{bHe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>jHe}),iie={},oie={},lie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(lie);var cie={},QR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(QR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QR,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(cie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lie,r=cie,n=f4;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:f.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(h.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(h=>h.original)}t.orderBy=a})(oie);var uie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(uie);var VR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LR,r=h4,n=kR,a=OR;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(VR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oie,r=uie,n=VR;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(iie);var PHe=iie.sortBy;const m4=dA(PHe);var die=t=>t.legend.settings,BHe=t=>t.legend.size,THe=t=>t.legend.payload,kHe=Gt([THe,die],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?m4(n,r):n});function FHe(){return Jr(kHe)}var i_=1;function fie(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>i_||Math.abs(o.left-e.left)>i_||Math.abs(o.top-e.top)>i_||Math.abs(o.width-e.width)>i_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Yo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var OHe=typeof Symbol=="function"&&Symbol.observable||"@@observable",cG=OHe,Y5=()=>Math.random().toString(36).substring(7).split("").join("."),DHe={INIT:`@@redux/INIT${Y5()}`,REPLACE:`@@redux/REPLACE${Y5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Y5()}`},eI=DHe;function HR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function hie(t,e,r){if(typeof t!="function")throw new Error(Yo(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Yo(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Yo(1));return r(hie)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((g,x)=>{o.set(x,g)}))}function d(){if(c)throw new Error(Yo(3));return a}function f(g){if(typeof g!="function")throw new Error(Yo(4));if(c)throw new Error(Yo(5));let x=!0;u();const y=l++;return o.set(y,g),function(){if(x){if(c)throw new Error(Yo(6));x=!1,u(),o.delete(y),s=null}}}function A(g){if(!HR(g))throw new Error(Yo(7));if(typeof g.type>"u")throw new Error(Yo(8));if(typeof g.type!="string")throw new Error(Yo(17));if(c)throw new Error(Yo(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(Yo(10));n=g,A({type:eI.REPLACE})}function m(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Yo(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[cG](){return this}}}return A({type:eI.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:h,[cG]:m}}function RHe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:eI.INIT})>"u")throw new Error(Yo(12));if(typeof r(void 0,{type:eI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yo(13))})}function Aie(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{RHe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],h=o[f],m=A(h,l);if(typeof m>"u")throw l&&l.type,new Error(Yo(14));u[f]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function tI(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function MHe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(Yo(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=tI(...l)(a.dispatch),{...a,dispatch:s}}}function mie(t){return HR(t)&&"type"in t&&typeof t.type=="string"}var pie=Symbol.for("immer-nothing"),uG=Symbol.for("immer-draftable"),lc=Symbol.for("immer-state");function Ud(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var cu=Object,Fv=cu.getPrototypeOf,rI="constructor",p4="prototype",uF="configurable",nI="enumerable",dE="writable",Q2="value",sA=t=>!!t&&!!t[lc];function nf(t){var e;return t?gie(t)||x4(t)||!!t[uG]||!!((e=t[rI])!=null&&e[uG])||v4(t)||y4(t):!1}var LHe=cu[p4][rI].toString(),dG=new WeakMap;function gie(t){if(!t||!$R(t))return!1;const e=Fv(t);if(e===null||e===cu[p4])return!0;const r=cu.hasOwnProperty.call(e,rI)&&e[rI];if(r===Object)return!0;if(!Cx(r))return!1;let n=dG.get(r);return n===void 0&&(n=Function.toString.call(r),dG.set(r,n)),n===LHe}function g4(t,e,r=!0){Qw(t)===0?(r?Reflect.ownKeys(t):cu.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Qw(t){const e=t[lc];return e?e.type_:x4(t)?1:v4(t)?2:y4(t)?3:0}var fG=(t,e,r=Qw(t))=>r===2?t.has(e):cu[p4].hasOwnProperty.call(t,e),dF=(t,e,r=Qw(t))=>r===2?t.get(e):t[e],aI=(t,e,r,n=Qw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function UHe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var x4=Array.isArray,v4=t=>t instanceof Map,y4=t=>t instanceof Set,$R=t=>typeof t=="object",Cx=t=>typeof t=="function",J5=t=>typeof t=="boolean";function QHe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Nh=t=>t.copy_||t.base_,GR=t=>t.modified_?t.copy_:t.base_;function fF(t,e){if(v4(t))return new Map(t);if(y4(t))return new Set(t);if(x4(t))return Array[p4].slice.call(t);const r=gie(t);if(e===!0||e==="class_only"&&!r){const n=cu.getOwnPropertyDescriptors(t);delete n[lc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[dE]===!1&&(l[dE]=!0,l[uF]=!0),(l.get||l.set)&&(n[o]={[uF]:!0,[dE]:!0,[nI]:l[nI],[Q2]:t[o]})}return cu.create(Fv(t),n)}else{const n=Fv(t);if(n!==null&&r)return{...t};const a=cu.create(n);return cu.assign(a,t)}}function KR(t,e=!1){return b4(t)||sA(t)||!nf(t)||(Qw(t)>1&&cu.defineProperties(t,{set:o_,add:o_,clear:o_,delete:o_}),cu.freeze(t),e&&g4(t,(r,n)=>{KR(n,!0)},!1)),t}function VHe(){Ud(2)}var o_={[Q2]:VHe};function b4(t){return t===null||!$R(t)?!0:cu.isFrozen(t)}var sI="MapSet",hF="Patches",hG="ArrayMethods",xie={};function ig(t){const e=xie[t];return e||Ud(0,t),e}var AG=t=>!!xie[t],V2,vie=()=>V2,HHe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:AG(sI)?ig(sI):void 0,arrayMethodsPlugin_:AG(hG)?ig(hG):void 0});function mG(t,e){e&&(t.patchPlugin_=ig(hF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function AF(t){mF(t),t.drafts_.forEach($He),t.drafts_=null}function mF(t){t===V2&&(V2=t.parent_)}var pG=t=>V2=HHe(V2,t);function $He(t){const e=t[lc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function gG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[lc].modified_&&(AF(e),Ud(4)),nf(t)&&(t=xG(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[lc].base_,t,e)}else t=xG(e,r);return GHe(e,t,!0),AF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==pie?t:void 0}function xG(t,e){if(b4(e))return e;const r=e[lc];if(!r)return iI(e,t.handledSet_,t);if(!w4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);wie(r,t)}return r.copy_}function GHe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&KR(e,r)}function yie(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var w4=(t,e)=>t.scope_===e,KHe=[];function bie(t,e,r,n){const a=Nh(t),s=t.type_;if(n!==void 0&&dF(a,n,s)===e){aI(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;g4(a,(c,u)=>{if(sA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??KHe;for(const l of o)aI(a,l,r,s)}function qHe(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!w4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=GR(s);bie(t,s.draft_??s,o,r),wie(s,a)})}function wie(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}yie(t)}}function zHe(t,e,r){const{scope_:n}=t;if(sA(r)){const a=r[lc];w4(a,n)&&a.callbacks_.push(function(){fE(t);const o=GR(a);bie(t,r,o,e)})}else nf(r)&&t.callbacks_.push(function(){const s=Nh(t);t.type_===3?s.has(r)&&iI(r,n.handledSet_,n):dF(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&iI(dF(t.copy_,e,t.type_),n.handledSet_,n)})}function iI(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||sA(t)||e.has(t)||!nf(t)||b4(t)||(e.add(t),g4(t,(n,a)=>{if(sA(a)){const s=a[lc];if(w4(s,r)){const o=GR(s);aI(t,n,o,t.type_),yie(s)}}else nf(a)&&iI(a,e,r)})),t}function WHe(t,e){const r=x4(t),n={type_:r?1:0,scope_:e?e.scope_:vie(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=oI;r&&(a=[n],s=H2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var oI={get(t,e){if(e===lc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Nh(t);if(!fG(a,e,t.type_))return XHe(t,a,e);const s=a[e];if(t.finalized_||!nf(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&QHe(e))return s;if(s===Z5(t.base_,e)){fE(t);const o=t.type_===1?+e:e,l=gF(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,e){return e in Nh(t)},ownKeys(t){return Reflect.ownKeys(Nh(t))},set(t,e,r){const n=Nie(Nh(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=Z5(Nh(t),e),s=a==null?void 0:a[lc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(UHe(r,a)&&(r!==void 0||fG(t.base_,e,t.type_)))return!0;fE(t),pF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),zHe(t,e,r)),!0},deleteProperty(t,e){return fE(t),Z5(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),pF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Nh(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[dE]:!0,[uF]:t.type_!==1||e!=="length",[nI]:n[nI],[Q2]:r[e]}},defineProperty(){Ud(11)},getPrototypeOf(t){return Fv(t.base_)},setPrototypeOf(){Ud(12)}},H2={};for(let t in oI){let e=oI[t];H2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}H2.deleteProperty=function(t,e){return H2.set.call(this,t,e,void 0)};H2.set=function(t,e,r){return oI.set.call(this,t[0],e,r,t[0])};function Z5(t,e){const r=t[lc];return(r?Nh(r):t)[e]}function XHe(t,e,r){var a;const n=Nie(e,r);return n?Q2 in n?n[Q2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Nie(t,e){if(!(e in t))return;let r=Fv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Fv(r)}}function pF(t){t.modified_||(t.modified_=!0,t.parent_&&pF(t.parent_))}function fE(t){t.copy_||(t.assigned_=new Map,t.copy_=fF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var YHe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Cx(r)&&!Cx(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,f=>n.call(this,f,...d))}}Cx(n)||Ud(6),a!==void 0&&!Cx(a)&&Ud(7);let s;if(nf(r)){const o=pG(this),l=gF(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?AF(o):mF(o)}return mG(o,a),gG(s,o)}else if(!r||!$R(r)){if(s=n(r),s===void 0&&(s=r),s===pie&&(s=void 0),this.autoFreeze_&&KR(s,!0),a){const o=[],l=[];ig(hF).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Ud(1,r)},this.produceWithPatches=(r,n)=>{if(Cx(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},J5(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),J5(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),J5(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){nf(e)||Ud(8),sA(e)&&(e=Jd(e));const r=pG(this),n=gF(r,e,void 0);return n[lc].isManual_=!0,mF(r),n}finishDraft(e,r){const n=e&&e[lc];(!n||!n.isManual_)&&Ud(9);const{scope_:a}=n;return mG(a,r),gG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=ig(hF).applyPatches_;return sA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function gF(t,e,r,n){const[a,s]=v4(e)?ig(sI).proxyMap_(e,r):y4(e)?ig(sI).proxySet_(e,r):WHe(e,r);return((r==null?void 0:r.scope_)??vie()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?qHe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function Jd(t){return sA(t)||Ud(10,t),Cie(t)}function Cie(t){if(!nf(t)||b4(t))return t;const e=t[lc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=fF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=fF(t,!0);return g4(r,(a,s)=>{aI(r,a,Cie(s))},n),e&&(e.finalized_=!1),r}var JHe=new YHe,_ie=JHe.produce;function Eie(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var ZHe=Eie(),e$e=Eie,t$e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?tI:tI.apply(null,arguments)};function fd(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(fu(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>mie(n)&&n.type===t,r}var Sie=class qy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,qy.prototype)}static get[Symbol.species](){return qy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new qy(...e[0].concat(this)):new qy(...e.concat(this))}};function vG(t){return nf(t)?_ie(t,()=>{}):t}function l_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function r$e(t){return typeof t=="boolean"}var n$e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Sie;return r&&(r$e(r)?o.push(ZHe):o.push(e$e(r.extraArgument))),o},Iie="RTK_autoBatch",bs=()=>t=>({payload:t,meta:{[Iie]:!0}}),yG=t=>e=>{setTimeout(e,t)},jie=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yG(10):t.type==="callback"?t.queueNotification:yG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Iie]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},a$e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Sie(t);return n&&a.push(jie(typeof n=="object"?n:void 0)),a};function s$e(t){const e=n$e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(HR(r))l=Aie(r);else throw new Error(fu(1));let c;typeof n=="function"?c=n(e):c=e();let u=tI;a&&(u=t$e({trace:!1,...typeof a=="object"&&a}));const d=MHe(...c),f=a$e(d);let A=typeof o=="function"?o(f):f();const h=u(...A);return hie(l,s,h)}function Pie(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(fu(28));if(l in e)throw new Error(fu(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function i$e(t){return typeof t=="function"}function o$e(t,e){let[r,n,a]=Pie(e),s;if(i$e(t))s=()=>vG(t());else{const l=vG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(sA(d)){const h=f(d,c);return h===void 0?d:h}else{if(nf(d))return _ie(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var l$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",c$e=(t=21)=>{let e="",r=t;for(;r--;)e+=l$e[Math.random()*64|0];return e},u$e=Symbol.for("rtk-slice-createasyncthunk");function d$e(t,e){return`${t}/${e}`}function f$e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[u$e];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(fu(11));const l=(typeof a.reducers=="function"?a.reducers(A$e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(fu(12));if(I in u.sliceCaseReducersByType)throw new Error(fu(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:d$e(s,w),createNotation:typeof a.reducers=="function"};p$e(j)?x$e(I,j,d,e):m$e(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?Pie(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return o$e(a.initialState,S=>{for(let E in _)S.addCase(E,_[E]);for(let E of u.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);I&&S.addDefaultCase(I)})}const A=w=>w,h=new Map,m=new WeakMap;let p;function g(w,j){return p||(p=f()),p(w,j)}function x(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(S){let E=S[w];return typeof E>"u"&&j&&(E=l_(m,I,x)),E}function _(S=A){const E=l_(h,j,()=>new WeakMap);return l_(E,S,()=>{const F={};for(const[P,k]of Object.entries(a.selectors??{}))F[P]=h$e(k,S,()=>l_(m,S,x),j);return F})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(o),injectInto(w,{reducerPath:j,...I}={}){const _=j??o;return w.inject({reducerPath:_,reducer:g},I),{...b,...y(_,!0)}}};return b}}function h$e(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var Dc=f$e();function A$e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function m$e({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!g$e(n))throw new Error(fu(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?fd(t,o):fd(t))}function p$e(t){return t._reducerDefinitionType==="asyncThunk"}function g$e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function x$e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(fu(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||c_,pending:l||c_,rejected:c||c_,settled:u||c_})}function c_(){}var v$e="task",Bie="listener",Tie="completed",qR="cancelled",y$e=`task-${qR}`,b$e=`task-${Tie}`,xF=`${Bie}-${qR}`,w$e=`${Bie}-${Tie}`,N4=class{constructor(t){Ar(this,"name","TaskAbortError");Ar(this,"message");this.code=t,this.message=`${v$e} ${qR} (reason: ${t})`}},zR=(t,e)=>{if(typeof t!="function")throw new TypeError(fu(32))},lI=()=>{},kie=(t,e=lI)=>(t.catch(e),t),Fie=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Bp=t=>{if(t.aborted)throw new N4(t.reason)};function Oie(t,e){let r=lI;return new Promise((n,a)=>{const s=()=>a(new N4(t.reason));if(t.aborted){s();return}r=Fie(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=lI})}var N$e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof N4?"cancelled":"rejected",error:r}}finally{e==null||e()}},cI=t=>e=>kie(Oie(t,e).then(r=>(Bp(t),r))),Die=t=>{const e=cI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:cv}=Object,bG={},C4="listenerMiddleware",C$e=(t,e)=>{const r=n=>Fie(t,()=>n.abort(t.reason));return(n,a)=>{zR(n);const s=new AbortController;r(s);const o=N$e(async()=>{Bp(t),Bp(s.signal);const l=await n({pause:cI(s.signal),delay:Die(s.signal),signal:s.signal});return Bp(s.signal),l},()=>s.abort(b$e));return a!=null&&a.autoJoin&&e.push(o.catch(lI)),{result:cI(t)(o),cancel(){s.abort(y$e)}}}},_$e=(t,e)=>{const r=async(n,a)=>{Bp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Oie(e,Promise.race(l));return Bp(e),c}finally{s()}};return(n,a)=>kie(r(n,a))},Rie=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=fd(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(fu(21));return zR(s),{predicate:a,type:e,effect:s}},Mie=cv(t=>{const{type:e,predicate:r,effect:n}=Rie(t);return{id:c$e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(fu(22))}}},{withTypes:()=>Mie}),wG=(t,e)=>{const{type:r,effect:n,predicate:a}=Rie(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},vF=t=>{t.pending.forEach(e=>{e.abort(xF)})},E$e=(t,e)=>()=>{for(const r of e.keys())vF(r);t.clear()},NG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Lie=cv(fd(`${C4}/add`),{withTypes:()=>Lie}),S$e=fd(`${C4}/removeAll`),Uie=cv(fd(`${C4}/remove`),{withTypes:()=>Uie}),I$e=(...t)=>{console.error(`${C4}/error`,...t)},Vw=(t={})=>{const e=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=I$e}=t;zR(o);const l=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&vF(h)}),c=h=>{const m=wG(e,h)??Mie(h);return l(m)};cv(c,{withTypes:()=>c});const u=h=>{const m=wG(e,h);return m&&(m.unsubscribe(),h.cancelActive&&vF(m)),!!m};cv(u,{withTypes:()=>u});const d=async(h,m,p,g)=>{const x=new AbortController,y=_$e(c,x.signal),b=[];try{h.pending.add(x),n(h),await Promise.resolve(h.effect(m,cv({},p,{getOriginalState:g,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:Die(x.signal),pause:cI(x.signal),extra:s,signal:x.signal,fork:C$e(x.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,j,I)=>{w!==x&&(w.abort(xF),I.delete(w))})},cancel:()=>{x.abort(xF),h.pending.delete(x)},throwIfCancelled:()=>{Bp(x.signal)}})))}catch(w){w instanceof N4||NG(o,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(w$e),a(h),h.pending.delete(x)}},f=E$e(e,r);return{middleware:h=>m=>p=>{if(!mie(p))return m(p);if(Lie.match(p))return c(p.payload);if(S$e.match(p)){f();return}if(Uie.match(p))return u(p.payload);let g=h.getState();const x=()=>{if(g===bG)throw new Error(fu(23));return g};let y;try{if(y=m(p),e.size>0){const b=h.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,g)}catch(_){I=!1,NG(o,_,{raisedBy:"predicate"})}I&&d(j,p,h,x)}}}finally{g=bG}return y},startListening:c,stopListening:u,clearListeners:f}};function fu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var j$e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Qie=Dc({name:"chartLayout",initialState:j$e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:P$e,setLayout:B$e,setChartSize:T$e,setScale:k$e}=Qie.actions,F$e=Qie.reducer;function Vie(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Ws(t){return Number.isFinite(t)}function hm(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function CG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(r),!0).forEach(function(n){O$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O$e(t,e,r){return(e=D$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D$e(t){var e=R$e(t,"string");return typeof e=="symbol"?e:e+""}function R$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function As(t,e,r){return Ro(t)||Ro(e)?r:Gf(e)?sg(t,e,r):typeof e=="function"?e(t):r}var M$e=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&nn(t[s]))return $x($x({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&nn(t[o]))return $x($x({},t),{},{[o]:t[o]+(a||0)})}return t},jg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",_G=1e-4,L$e=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-_G,s=Math.max(n[0],n[1])+_G,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},U$e=(t,e)=>{if(!e||e.length!==2||!nn(e[0])||!nn(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!nn(t[0])||t[0]<r)&&(a[0]=r),(!nn(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},Q$e=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],A=$f(d)?f:d;A>=0?(u[0]=s,u[1]=s+A,s=d):(u[0]=o,u[1]=o+A,o=d)}}}},V$e=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var u=$f(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},H$e={sign:Q$e,expand:vVe,none:ag,silhouette:yVe,wiggle:bVe,positive:V$e},$$e=(t,e,r)=>{var n,a=(n=H$e[r])!==null&&n!==void 0?n:ag,s=xVe().keys(e).value((l,c)=>Number(As(l,c,0))).order(lF).offset(a),o=s(t);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=As(t[d],e[c],0);Array.isArray(f)&&f.length===2&&nn(f[0])&&nn(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function G$e(t){return t==null?void 0:String(t)}var EG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=As(s,e.dataKey,e.scale.domain()[o]);return Ro(l)?null:e.scale(l)-a/2+n},K$e=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},q$e=t=>{var e=t.flat(2).filter(nn);return[Math.min(...e),Math.max(...e)]},z$e=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],W$e=(t,e,r)=>{if(t!=null)return z$e(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Vie(u,e,r),f=q$e(d);return!Ws(f[0])||!Ws(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},SG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=m4(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function jG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return $x($x({},e),{},{dataKey:r,payload:n,value:a,name:s})}function _4(t,e){if(t)return String(t);if(typeof e=="string")return e}var X$e=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Y$e=(t,e)=>e==="centric"?t.angle:t.radius,bA=t=>t.layout.width,wA=t=>t.layout.height,J$e=t=>t.layout.scale,Hie=t=>t.layout.margin,E4=Gt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),S4=Gt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),$ie="data-recharts-item-index",Gie="data-recharts-item-id",Hw=60;function PG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function u_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(n){Z$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z$e(t,e,r){return(e=eGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eGe(t){var e=tGe(t,"string");return typeof e=="symbol"?e:e+""}function tGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rGe=t=>t.brush.height;function nGe(t){var e=S4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function aGe(t){var e=S4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function sGe(t){var e=E4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function iGe(t){var e=E4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var fo=Gt([bA,wA,Hie,rGe,nGe,aGe,sGe,iGe,die,BHe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},A=u_(u_({},f),d),h=A.bottom;A.bottom+=n,A=M$e(A,c,u);var m=t-A.left-A.right,p=e-A.top-A.bottom;return u_(u_({brushBottom:h},A),{},{width:Math.max(m,0),height:Math.max(p,0)})}),oGe=Gt(fo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),WR=Gt(bA,wA,(t,e)=>({x:0,y:0,width:t,height:e})),lGe=v.createContext(null),yu=()=>v.useContext(lGe)!=null,I4=t=>t.brush,j4=Gt([I4,fo,Hie],(t,e,r)=>({height:t.height,x:nn(t.x)?t.x:e.left,y:nn(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:nn(t.width)?t.width:e.width})),Kie={},qie={},zie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),p()};let A=null;const h=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},m=()=>{A!==null&&(clearTimeout(A),A=null)},p=()=>{m(),o=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=A==null;h(),c&&b&&d()};return x.schedule=h,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(zie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zie;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),h=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,p),d)},m=()=>(A.flush(),d);return h.cancel=A.cancel,h.flush=m,h}t.debounce=r})(qie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qie;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(Kie);var cGe=Kie.throttle;const uGe=dA(cGe);var BG=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Wie=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=aA(n)?t:Number(n),c=aA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},dGe={width:0,height:0,overflow:"visible"},fGe={width:0,overflowX:"visible"},hGe={height:0,overflowY:"visible"},AGe={},mGe=t=>{var{width:e,height:r}=t,n=aA(e),a=aA(r);return n&&a?dGe:n?fGe:a?hGe:AGe};function pGe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function yF(){return yF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yF.apply(null,arguments)}function TG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(r),!0).forEach(function(n){gGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gGe(t,e,r){return(e=xGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xGe(t){var e=vGe(t,"string");return typeof e=="symbol"?e:e+""}function vGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xie=v.createContext({width:-1,height:-1});function yGe(t){return hm(t.width)&&hm(t.height)}function Yie(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return yGe(a)?v.createElement(Xie.Provider,{value:a},e):null}var XR=()=>v.useContext(Xie),bGe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:h,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=h,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((S,E)=>{y(F=>{var P=Math.round(S),k=Math.round(E);return F.containerWidth===P&&F.containerHeight===k?F:{containerWidth:P,containerHeight:k}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Lw;var S=k=>{var D,{width:Z,height:fe}=k[0].contentRect;b(Z,fe),(D=g.current)===null||D===void 0||D.call(g,Z,fe)};d>0&&(S=uGe(S,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(S),{width:F,height:P}=p.current.getBoundingClientRect();return b(F,P),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=x;BG(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=Wie(w,j,{width:a,height:s,aspect:r,maxHeight:c});return BG(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,o,l,r),v.createElement("div",{id:f?"".concat(f):void 0,className:Oa("recharts-responsive-container",A),style:kG(kG({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:mGe({width:a,height:s})},v.createElement(Yie,{width:I,height:_},u)))}),FG=v.forwardRef((t,e)=>{var r=XR();if(hm(r.width)&&hm(r.height))return t.children;var{width:n,height:a}=pGe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Wie(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return nn(s)&&nn(o)?v.createElement(Yie,{width:s,height:o},t.children):v.createElement(bGe,yF({},t,{width:n,height:a,ref:e}))});function Jie(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var P4=()=>{var t,e=yu(),r=Jr(oGe),n=Jr(j4),a=(t=Jr(I4))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},wGe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},NGe=()=>{var t;return(t=Jr(fo))!==null&&t!==void 0?t:wGe},Zie=()=>Jr(bA),eoe=()=>Jr(wA),CGe=()=>Jr(t=>t.layout.margin),ca=t=>t.layout.layoutType,$w=()=>Jr(ca),_Ge=()=>{var t=$w();return t!==void 0},B4=t=>{var e=ss(),r=yu(),{width:n,height:a}=t,s=XR(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&hm(o)&&hm(l)&&e(T$e({width:o,height:l}))},[e,r,o,l]),null},toe=Symbol.for("immer-nothing"),OG=Symbol.for("immer-draftable"),gu=Symbol.for("immer-state");function Qd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $2=Object.getPrototypeOf;function Ov(t){return!!t&&!!t[gu]}function og(t){var e;return t?roe(t)||Array.isArray(t)||!!t[OG]||!!((e=t.constructor)!=null&&e[OG])||Gw(t)||k4(t):!1}var EGe=Object.prototype.constructor.toString(),DG=new WeakMap;function roe(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=DG.get(r);return n===void 0&&(n=Function.toString.call(r),DG.set(r,n)),n===EGe}function dI(t,e,r=!0){T4(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function T4(t){const e=t[gu];return e?e.type_:Array.isArray(t)?1:Gw(t)?2:k4(t)?3:0}function bF(t,e){return T4(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function noe(t,e,r){const n=T4(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function SGe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gw(t){return t instanceof Map}function k4(t){return t instanceof Set}function Jm(t){return t.copy_||t.base_}function wF(t,e){if(Gw(t))return new Map(t);if(k4(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=roe(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[gu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create($2(t),n)}else{const n=$2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function YR(t,e=!1){return F4(t)||Ov(t)||!og(t)||(T4(t)>1&&Object.defineProperties(t,{set:d_,add:d_,clear:d_,delete:d_}),Object.freeze(t),e&&Object.values(t).forEach(r=>YR(r,!0))),t}function IGe(){Qd(2)}var d_={value:IGe};function F4(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var jGe={};function lg(t){const e=jGe[t];return e||Qd(0,t),e}var G2;function aoe(){return G2}function PGe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RG(t,e){e&&(lg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function NF(t){CF(t),t.drafts_.forEach(BGe),t.drafts_=null}function CF(t){t===G2&&(G2=t.parent_)}function MG(t){return G2=PGe(G2,t)}function BGe(t){const e=t[gu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function LG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[gu].modified_&&(NF(e),Qd(4)),og(t)&&(t=fI(e,t),e.parent_||hI(e,t)),e.patches_&&lg("Patches").generateReplacementPatches_(r[gu].base_,t,e.patches_,e.inversePatches_)):t=fI(e,r,[]),NF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==toe?t:void 0}function fI(t,e,r){if(F4(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[gu];if(!a)return dI(e,(s,o)=>UG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return hI(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),dI(o,(c,u)=>UG(t,a,s,c,u,r,l),n),hI(t,s,!1),r&&t.patches_&&lg("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function UG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=F4(a);if(!(l&&!o)){if(Ov(a)){const c=s&&e&&e.type_!==3&&!bF(e.assigned_,n)?s.concat(n):void 0,u=fI(t,a,c);if(noe(r,n,u),Ov(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(og(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;fI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Gw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&hI(t,a)}}}function hI(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&YR(e,r)}function TGe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:aoe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=JR;r&&(a=[n],s=K2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var JR={get(t,e){if(e===gu)return t;const r=Jm(t);if(!bF(r,e))return kGe(t,r,e);const n=r[e];return t.finalized_||!og(n)?n:n===eB(t.base_,e)?(tB(t),t.copy_[e]=EF(n,t)):n},has(t,e){return e in Jm(t)},ownKeys(t){return Reflect.ownKeys(Jm(t))},set(t,e,r){const n=soe(Jm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=eB(Jm(t),e),s=a==null?void 0:a[gu];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(SGe(r,a)&&(r!==void 0||bF(t.base_,e)))return!0;tB(t),_F(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return eB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,tB(t),_F(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Jm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Qd(11)},getPrototypeOf(t){return $2(t.base_)},setPrototypeOf(){Qd(12)}},K2={};dI(JR,(t,e)=>{K2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});K2.deleteProperty=function(t,e){return K2.set.call(this,t,e,void 0)};K2.set=function(t,e,r){return JR.set.call(this,t[0],e,r,t[0])};function eB(t,e){const r=t[gu];return(r?Jm(r):t)[e]}function kGe(t,e,r){var a;const n=soe(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function soe(t,e){if(!(e in t))return;let r=$2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=$2(r)}}function _F(t){t.modified_||(t.modified_=!0,t.parent_&&_F(t.parent_))}function tB(t){t.copy_||(t.copy_=wF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var FGe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Qd(6),n!==void 0&&typeof n!="function"&&Qd(7);let a;if(og(e)){const s=MG(this),o=EF(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?NF(s):CF(s)}return RG(s,n),LG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===toe&&(a=void 0),this.autoFreeze_&&YR(a,!0),n){const s=[],o=[];lg("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else Qd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){og(t)||Qd(8),Ov(t)&&(t=OGe(t));const e=MG(this),r=EF(t,void 0);return r[gu].isManual_=!0,CF(e),r}finishDraft(t,e){const r=t&&t[gu];(!r||!r.isManual_)&&Qd(9);const{scope_:n}=r;return RG(n,e),LG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=lg("Patches").applyPatches_;return Ov(t)?n(t,e):this.produce(t,a=>n(a,e))}};function EF(t,e){const r=Gw(t)?lg("MapSet").proxyMap_(t,e):k4(t)?lg("MapSet").proxySet_(t,e):TGe(t,e);return(e?e.scope_:aoe()).drafts_.push(r),r}function OGe(t){return Ov(t)||Qd(10,t),ioe(t)}function ioe(t){if(!og(t)||F4(t))return t;const e=t[gu];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=wF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=wF(t,!0);return dI(r,(a,s)=>{noe(r,a,ioe(s))},n),e&&(e.finalized_=!1),r}var DGe=new FGe;DGe.produce;var RGe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ooe=Dc({name:"legend",initialState:RGe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:bs()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Jd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:bs()},removeLegendPayload:{reducer(t,e){var r=Jd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:bs()}}}),{setLegendSize:QG,setLegendSettings:MGe,addLegendPayload:loe,replaceLegendPayload:coe,removeLegendPayload:uoe}=ooe.actions,LGe=ooe.reducer,UGe=["contextPayload"];function SF(){return SF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SF.apply(null,arguments)}function VG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(r),!0).forEach(function(n){QGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QGe(t,e,r){return(e=VGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VGe(t){var e=HGe(t,"string");return typeof e=="symbol"?e:e+""}function HGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ge(t,e){if(t==null)return{};var r,n,a=GGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function GGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function KGe(t){return t.value}function qGe(t){var{contextPayload:e}=t,r=$Ge(t,UGe),n=eie(e,t.payloadUniqBy,KGe),a=Dv(Dv({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(XVe,a)}function zGe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Dv(Dv({},u),d)}function WGe(t){var e=ss();return v.useEffect(()=>{e(MGe(t))},[e,t]),null}function XGe(t){var e=ss();return v.useEffect(()=>(e(QG(t)),()=>{e(QG({width:0,height:0}))}),[e,t]),null}function YGe(t,e,r,n){return t==="vertical"&&nn(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var JGe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function IF(t){var e=dl(t,JGe),r=FHe(),n=VQe(),a=CGe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=fie([r]),f=Zie(),A=eoe();if(f==null||A==null)return null;var h=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=YGe(e.layout,o,s,h),p=c?l:Dv(Dv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},zGe(l,e,a,f,A,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(WGe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(XGe,{width:u.width,height:u.height}),v.createElement(qGe,SF({},e,m,{margin:a,chartWidth:f,chartHeight:A,contextPayload:r})));return du.createPortal(x,g)}IF.displayName="Legend";function jF(){return jF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jF.apply(null,arguments)}function HG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(r),!0).forEach(function(n){ZGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZGe(t,e,r){return(e=eKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eKe(t){var e=tKe(t,"string");return typeof e=="symbol"?e:e+""}function tKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rKe(t){return Array.isArray(t)&&Gf(t[0])&&Gf(t[1])?t.join(" ~ "):t}var nKe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=t,h=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?m4(s,l):s).map((_,S)=>{if(_.type==="none")return null;var E=_.formatter||o||rKe,{value:F,name:P}=_,k=F,D=P;if(E){var Z=E(F,P,_,S,s);if(Array.isArray(Z))[k,D]=Z;else if(Z!=null)k=Z;else return null}var fe=rB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:fe},Gf(D)?v.createElement("span",{className:"recharts-tooltip-item-name"},D):null,Gf(D)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},k),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=rB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=rB({margin:0},a),g=!Ro(d),x=g?d:"",y=Oa("recharts-default-tooltip",c),b=Oa("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(x=f(d,s));var w=A?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",jF({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),h())},my="recharts-tooltip-wrapper",aKe={visibility:"hidden"};function sKe(t){var{coordinate:e,translateX:r,translateY:n}=t;return Oa(my,{["".concat(my,"-right")]:nn(r)&&e&&nn(e.x)&&r>=e.x,["".concat(my,"-left")]:nn(r)&&e&&nn(e.x)&&r<e.x,["".concat(my,"-bottom")]:nn(n)&&e&&nn(e.y)&&n>=e.y,["".concat(my,"-top")]:nn(n)&&e&&nn(e.y)&&n<e.y})}function $G(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&nn(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var h=d,m=A;return h<m?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var p=f+l,g=A+u;return p>g?Math.max(d,A):Math.max(f,A)}function iKe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function oKe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,f;return o.height>0&&o.width>0&&r?(d=$G({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=$G({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=iKe({translateX:d,translateY:f,useTranslate3d:l})):u=aKe,{cssProperties:u,cssClasses:sKe({translateX:d,translateY:f,coordinate:r})}}function GG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GG(Object(r),!0).forEach(function(n){PF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PF(t,e,r){return(e=lKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lKe(t){var e=cKe(t,"string");return typeof e=="symbol"?e:e+""}function cKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uKe extends v.PureComponent{constructor(){super(...arguments),PF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),PF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=oKe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:A,viewBox:h}),w=x?{}:f_(f_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=f_(f_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var doe=()=>{var t;return(t=Jr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function BF(){return BF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BF.apply(null,arguments)}function KG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KG(Object(r),!0).forEach(function(n){dKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dKe(t,e,r){return(e=fKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fKe(t){var e=hKe(t,"string");return typeof e=="symbol"?e:e+""}function hKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zG={curveBasisClosed:oVe,curveBasisOpen:lVe,curveBasis:iVe,curveBumpX:KQe,curveBumpY:qQe,curveLinearClosed:cVe,curveLinear:l4,curveMonotoneX:uVe,curveMonotoneY:dVe,curveNatural:fVe,curveStep:hVe,curveStepAfter:mVe,curveStepBefore:AVe},AI=t=>Ws(t.x)&&Ws(t.y),WG=t=>t.base!=null&&AI(t.base)&&AI(t),py=t=>t.x,gy=t=>t.y,AKe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Mw(t));return(r==="curveMonotone"||r==="curveBump")&&e?zG["".concat(r).concat(e==="vertical"?"Y":"X")]:zG[r]||l4},mKe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=AKe(e,a),l=s?r.filter(AI):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>qG(qG({},h),{},{base:n[m]}));a==="vertical"?c=a_().y(gy).x1(py).x0(h=>h.base.x):c=a_().x(py).y1(gy).y0(h=>h.base.y);var d=c.defined(WG).curve(o),f=s?u.filter(WG):u;return d(f)}a==="vertical"&&nn(n)?c=a_().y(gy).x1(py).x0(n):nn(n)?c=a_().x(py).y1(gy).y0(n):c=bse().x(py).y(gy);var A=c.defined(AI).curve(o);return A(l)},ZR=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=$w();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?mKe(o):n;return v.createElement("path",BF({},Hf(t),RVe(t),{className:Oa("recharts-curve",e),d:l===null?void 0:l,ref:a}))},pKe=["x","y","top","left","width","height","className"];function TF(){return TF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TF.apply(null,arguments)}function XG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gKe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XG(Object(r),!0).forEach(function(n){xKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xKe(t,e,r){return(e=vKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vKe(t){var e=yKe(t,"string");return typeof e=="symbol"?e:e+""}function yKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bKe(t,e){if(t==null)return{};var r,n,a=wKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var NKe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),CKe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=bKe(t,pKe),u=gKe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!nn(e)||!nn(r)||!nn(s)||!nn(o)||!nn(n)||!nn(a)?null:v.createElement("path",TF({},dd(u),{className:Oa("recharts-cross",l),d:NKe(e,r,s,o,n,a)}))};function _Ke(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function YG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function JG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(r),!0).forEach(function(n){EKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EKe(t,e,r){return(e=SKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SKe(t){var e=IKe(t,"string");return typeof e=="symbol"?e:e+""}function IKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jKe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),foe=(t,e,r)=>t.map(n=>"".concat(jKe(n)," ").concat(e,"ms ").concat(r)).join(","),PKe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),q2=(t,e)=>Object.keys(e).reduce((r,n)=>JG(JG({},r),{},{[n]:t(n,e[n])}),{});function ZG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function to(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(r),!0).forEach(function(n){BKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BKe(t,e,r){return(e=TKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TKe(t){var e=kKe(t,"string");return typeof e=="symbol"?e:e+""}function kKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mI=(t,e,r)=>t+(e-t)*r,kF=t=>{var{from:e,to:r}=t;return e!==r},hoe=(t,e,r)=>{var n=q2((a,s)=>{if(kF(s)){var[o,l]=t(s.from,s.to,s.velocity);return to(to({},s),{},{from:o,velocity:l})}return s},e);return r<1?q2((a,s)=>kF(s)&&n[a]!=null?to(to({},s),{},{velocity:mI(s.velocity,n[a].velocity,r),from:mI(s.from,n[a].from,r)}):s,e):hoe(t,n,r-1)};function FKe(t,e,r,n,a,s){var o,l=n.reduce((A,h)=>to(to({},A),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),c=()=>q2((A,h)=>h.from,l),u=()=>!Object.values(l).filter(kF).length,d=null,f=A=>{o||(o=A);var h=A-o,m=h/r.dt;l=hoe(r,l,m),a(to(to(to({},t),e),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function OKe(t,e,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>{var h=t[A],m=e[A];return h==null||m==null?f:to(to({},f),{},{[A]:[h,m]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/n,h=q2((p,g)=>mI(...g,r(A)),c);if(s(to(to(to({},t),e),h)),A<1)l=o.setTimeout(d);else{var m=q2((p,g)=>mI(...g,r(1)),c);s(to(to(to({},t),e),m))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const DKe=(t,e,r,n,a,s)=>{var o=PKe(t,e);return r==null?()=>(a(to(to({},t),e)),()=>{}):r.isStepper===!0?FKe(t,e,r,o,a,s):OKe(t,e,r,n,o,a,s)};var pI=1e-4,Aoe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],moe=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),eK=(t,e)=>r=>{var n=Aoe(t,e);return moe(n,r)},RKe=(t,e)=>r=>{var n=Aoe(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return moe(a,r)},MKe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},LKe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=MKe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},UKe=(t,e,r,n)=>{var a=eK(t,r),s=eK(e,n),o=RKe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var h=a(f)-d,m=o(f);if(Math.abs(h-d)<pI||m<pI)return s(f);f=l(f-h/m)}return s(f)};return c.isStepper=!1,c},tK=function(){return UKe(...LKe(...arguments))},QKe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<pI&&Math.abs(f)<pI?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},VKe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tK(t);case"spring":return QKe();default:if(t.split("(")[0]==="cubic-bezier")return tK(t)}return typeof t=="function"?t:null};function HKe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class $Ke{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function GKe(){return HKe(new $Ke)}var KKe=v.createContext(GKe);function qKe(t,e){var r=v.useContext(KKe);return v.useMemo(()=>e??r(t),[t,e,r])}var zKe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),O4={isSsr:zKe()},WKe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rK={t:0},nB={t:1};function D4(t){var e=dl(t,WKe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!O4.isSsr:r,f=qKe(e.animationId,e.animationManager),[A,h]=v.useState(d?rK:nB),m=v.useRef(null);return v.useEffect(()=>{d||h(nB)},[d]),v.useEffect(()=>{if(!d||!n)return Lw;var p=DKe(rK,nB,VKe(s),a,h,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,o,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,f]),u(A.t)}function R4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(U2(e)),n=v.useRef(t);return n.current!==t&&(r.current=U2(e),n.current=t),r.current}var XKe=["radius"],YKe=["radius"],nK,aK,sK,iK,oK,lK,cK,uK,dK,fK;function hK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function AK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hK(Object(r),!0).forEach(function(n){JKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JKe(t,e,r){return(e=ZKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZKe(t){var e=eqe(t,"string");return typeof e=="symbol"?e:e+""}function eqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gI.apply(null,arguments)}function mK(t,e){if(t==null)return{};var r,n,a=tqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function bf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var pK=(t,e,r,n,a)=>{var s=k0(r),o=k0(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var A=[0,0,0,0],h=0,m=4;h<m;h++)A[h]=a[h]>l?l:a[h];f=ni(nK||(nK=bf(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=ni(aK||(aK=bf(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=ni(sK||(sK=bf(["L ",",",""])),t+r-u*A[1],e),A[1]>0&&(f+=ni(iK||(iK=bf(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+c*A[1])),f+=ni(oK||(oK=bf(["L ",",",""])),t+r,e+n-c*A[2]),A[2]>0&&(f+=ni(lK||(lK=bf(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-u*A[2],e+n)),f+=ni(cK||(cK=bf(["L ",",",""])),t+u*A[3],e+n),A[3]>0&&(f+=ni(uK||(uK=bf(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-c*A[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=ni(dK||(dK=bf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=ni(fK||(fK=bf(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},gK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},poe=t=>{var e=dl(t,gK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var pe=r.current.getTotalLength();pe&&a(pe)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(o),w=v.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),j=R4(w,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var I=Oa("recharts-rectangle",d);if(!p){var _=dd(e),{radius:S}=_,E=mK(_,XKe);return v.createElement("path",gI({},E,{x:k0(s),y:k0(o),width:k0(l),height:k0(c),radius:typeof u=="number"?u:void 0,className:I,d:pK(s,o,l,c,u)}))}var F=g.current,P=x.current,k=y.current,D=b.current,Z="0px ".concat(n===-1?1:n,"px"),fe="".concat(n,"px 0px"),me=foe(["strokeDasharray"],A,typeof f=="string"?f:gK.animationEasing);return v.createElement(D4,{animationId:j,key:j,canBegin:n>0,duration:A,easing:f,isActive:p,begin:h},pe=>{var ye=eo(F,l,pe),ae=eo(P,c,pe),je=eo(k,s,pe),Be=eo(D,o,pe);r.current&&(g.current=ye,x.current=ae,y.current=je,b.current=Be);var O;m?pe>0?O={transition:me,strokeDasharray:fe}:O={strokeDasharray:Z}:O={strokeDasharray:fe};var G=dd(e),{radius:z}=G,L=mK(G,YKe);return v.createElement("path",gI({},L,{radius:typeof u=="number"?u:void 0,className:I,d:pK(je,Be,ye,ae,u),ref:r,style:AK(AK({},O),e.style)}))})};function xK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(n){rqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rqe(t,e,r){return(e=nqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nqe(t){var e=aqe(t,"string");return typeof e=="symbol"?e:e+""}function aqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xI=Math.PI/180,sqe=t=>t*180/Math.PI,Mi=(t,e,r,n)=>({x:t+Math.cos(-xI*n)*r,y:e+Math.sin(-xI*n)*r}),goe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},iqe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},oqe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=iqe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:sqe(c),angleInRadian:c}},lqe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},cqe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},uqe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=oqe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=lqe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?vK(vK({},e),{},{radius:a,angle:cqe(d,e)}):null};function xoe(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=Mi(e,r,n,a),l=Mi(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var yK,bK,wK,NK,CK,_K,EK;function FF(){return FF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FF.apply(null,arguments)}function Ap(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var dqe=(t,e)=>{var r=ll(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},h_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/xI,f=c?a:a+s*d,A=Mi(e,r,u,f),h=Mi(e,r,n,f),m=c?a-s*d:a,p=Mi(e,r,u*Math.cos(d*xI),m);return{center:A,circleTangency:h,lineTangency:p,theta:d}},voe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=dqe(s,o),c=s+l,u=Mi(e,r,a,s),d=Mi(e,r,a,c),f=ni(yK||(yK=Ap(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var A=Mi(e,r,n,s),h=Mi(e,r,n,c);f+=ni(bK||(bK=Ap(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),A.x,A.y)}else f+=ni(wK||(wK=Ap(["L ",","," Z"])),e,r);return f},fqe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=ll(u-c),{circleTangency:f,lineTangency:A,theta:h}=h_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=h_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(x<0)return o?ni(NK||(NK=Ap(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):voe({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=ni(CK||(CK=Ap(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=h_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:S}=h_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=ni(_K||(_K=Ap(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=ni(EK||(EK=Ap(["L",",","Z"])),e,r);return y},hqe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yoe=t=>{var e=dl(t,hqe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var A=Oa("recharts-sector",f),h=s-a,m=Dl(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=fqe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=voe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",FF({},dd(e),{className:A,d:p}))};function Aqe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Dse(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=Mi(n,a,s,l),u=Mi(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return xoe(e)}}var boe={},woe={},Noe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QR;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Noe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Noe;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(woe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VR,r=woe;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(boe);var mqe=boe.range;const Coe=dA(mqe);function Y0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pqe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function e8(t){let e,r,n;t.length!==2?(e=Y0,r=(l,c)=>Y0(t(l),c),n=(l,c)=>t(l)-c):(e=t===Y0||t===pqe?t:gqe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function gqe(){return 0}function _oe(t){return t===null?NaN:+t}function*xqe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const vqe=e8(Y0),Kw=vqe.right;e8(_oe).center;class SK extends Map{constructor(e,r=wqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(IK(this,e))}has(e){return super.has(IK(this,e))}set(e,r){return super.set(yqe(this,e),r)}delete(e){return super.delete(bqe(this,e))}}function IK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function yqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function bqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function wqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nqe(t=Y0){if(t===Y0)return Eoe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Eoe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Cqe=Math.sqrt(50),_qe=Math.sqrt(10),Eqe=Math.sqrt(2);function vI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=Cqe?10:s>=_qe?5:s>=Eqe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?vI(t,e,r*2):[l,c,u]}function OF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?vI(e,t,r):vI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function DF(t,e,r){return e=+e,t=+t,r=+r,vI(t,e,r)[2]}function RF(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?DF(e,t,r):DF(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function jK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function PK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Soe(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Eoe:Nqe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));Soe(t,e,h,m,a)}const s=t[e];let o=r,l=n;for(xy(t,r,e),a(t[n],s)>0&&xy(t,r,n);o<l;){for(xy(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?xy(t,r,l):(++l,xy(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function xy(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Sqe(t,e,r){if(t=Float64Array.from(xqe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return PK(t);if(e>=1)return jK(t);var n,a=(n-1)*e,s=Math.floor(a),o=jK(Soe(t,s).subarray(0,s+1)),l=PK(t.subarray(s+1));return o+(l-o)*(a-s)}}function Iqe(t,e,r=_oe){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function jqe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function gd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function NA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const MF=Symbol("implicit");function t8(){var t=new SK,e=[],r=[],n=MF;function a(s){let o=t.get(s);if(o===void 0){if(n!==MF)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new SK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return t8(e,r).unknown(n)},gd.apply(a,arguments),a}function r8(){var t=t8().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(A-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=jqe(A).map(function(x){return m+s*x});return r(h?g.reverse():g)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return r8(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},gd.apply(f(),arguments)}function Ioe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ioe(e())},t}function Pqe(){return Ioe(r8.apply(null,arguments).paddingInner(1))}function n8(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function joe(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function qw(){}var z2=.7,yI=1/z2,uv="\\s*([+-]?\\d+)\\s*",W2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bqe=/^#([0-9a-f]{3,8})$/,Tqe=new RegExp(`^rgb\\(${uv},${uv},${uv}\\)$`),kqe=new RegExp(`^rgb\\(${Uf},${Uf},${Uf}\\)$`),Fqe=new RegExp(`^rgba\\(${uv},${uv},${uv},${W2}\\)$`),Oqe=new RegExp(`^rgba\\(${Uf},${Uf},${Uf},${W2}\\)$`),Dqe=new RegExp(`^hsl\\(${W2},${Uf},${Uf}\\)$`),Rqe=new RegExp(`^hsla\\(${W2},${Uf},${Uf},${W2}\\)$`),BK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n8(qw,X2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:TK,formatHex:TK,formatHex8:Mqe,formatHsl:Lqe,formatRgb:kK,toString:kK});function TK(){return this.rgb().formatHex()}function Mqe(){return this.rgb().formatHex8()}function Lqe(){return Poe(this).formatHsl()}function kK(){return this.rgb().formatRgb()}function X2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Bqe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?FK(e):r===3?new Ic(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?A_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?A_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tqe.exec(t))?new Ic(e[1],e[2],e[3],1):(e=kqe.exec(t))?new Ic(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fqe.exec(t))?A_(e[1],e[2],e[3],e[4]):(e=Oqe.exec(t))?A_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dqe.exec(t))?RK(e[1],e[2]/100,e[3]/100,1):(e=Rqe.exec(t))?RK(e[1],e[2]/100,e[3]/100,e[4]):BK.hasOwnProperty(t)?FK(BK[t]):t==="transparent"?new Ic(NaN,NaN,NaN,0):null}function FK(t){return new Ic(t>>16&255,t>>8&255,t&255,1)}function A_(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ic(t,e,r,n)}function Uqe(t){return t instanceof qw||(t=X2(t)),t?(t=t.rgb(),new Ic(t.r,t.g,t.b,t.opacity)):new Ic}function LF(t,e,r,n){return arguments.length===1?Uqe(t):new Ic(t,e,r,n??1)}function Ic(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}n8(Ic,LF,joe(qw,{brighter(t){return t=t==null?yI:Math.pow(yI,t),new Ic(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new Ic(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ic(Tp(this.r),Tp(this.g),Tp(this.b),bI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:OK,formatHex:OK,formatHex8:Qqe,formatRgb:DK,toString:DK}));function OK(){return`#${mp(this.r)}${mp(this.g)}${mp(this.b)}`}function Qqe(){return`#${mp(this.r)}${mp(this.g)}${mp(this.b)}${mp((isNaN(this.opacity)?1:this.opacity)*255)}`}function DK(){const t=bI(this.opacity);return`${t===1?"rgb(":"rgba("}${Tp(this.r)}, ${Tp(this.g)}, ${Tp(this.b)}${t===1?")":`, ${t})`}`}function bI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mp(t){return t=Tp(t),(t<16?"0":"")+t.toString(16)}function RK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Vd(t,e,r,n)}function Poe(t){if(t instanceof Vd)return new Vd(t.h,t.s,t.l,t.opacity);if(t instanceof qw||(t=X2(t)),!t)return new Vd;if(t instanceof Vd)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Vd(o,l,c,t.opacity)}function Vqe(t,e,r,n){return arguments.length===1?Poe(t):new Vd(t,e,r,n??1)}function Vd(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}n8(Vd,Vqe,joe(qw,{brighter(t){return t=t==null?yI:Math.pow(yI,t),new Vd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new Vd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ic(aB(t>=240?t-240:t+120,a,n),aB(t,a,n),aB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Vd(MK(this.h),m_(this.s),m_(this.l),bI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bI(this.opacity);return`${t===1?"hsl(":"hsla("}${MK(this.h)}, ${m_(this.s)*100}%, ${m_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function MK(t){return t=(t||0)%360,t<0?t+360:t}function m_(t){return Math.max(0,Math.min(1,t||0))}function aB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const a8=t=>()=>t;function Hqe(t,e){return function(r){return t+r*e}}function $qe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Gqe(t){return(t=+t)==1?Boe:function(e,r){return r-e?$qe(e,r,t):a8(isNaN(e)?r:e)}}function Boe(t,e){var r=e-t;return r?Hqe(t,r):a8(isNaN(t)?e:t)}const LK=function t(e){var r=Gqe(e);function n(a,s){var o=r((a=LF(a)).r,(s=LF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Boe(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Kqe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function qqe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zqe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=h1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Wqe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function wI(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Xqe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=h1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var UF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sB=new RegExp(UF.source,"g");function Yqe(t){return function(){return t}}function Jqe(t){return function(e){return t(e)+""}}function Zqe(t,e){var r=UF.lastIndex=sB.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=UF.exec(t))&&(a=sB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:wI(n,a)})),r=sB.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Jqe(c[0].x):Yqe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function h1(t,e){var r=typeof e,n;return e==null||r==="boolean"?a8(e):(r==="number"?wI:r==="string"?(n=X2(e))?(e=n,LK):Zqe:e instanceof X2?LK:e instanceof Date?Wqe:qqe(e)?Kqe:Array.isArray(e)?zqe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Xqe:wI)(t,e)}function s8(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function eze(t,e){e===void 0&&(e=t,t=h1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function tze(t){return function(){return t}}function NI(t){return+t}var UK=[0,1];function nc(t){return t}function QF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:tze(isNaN(e)?NaN:.5)}function rze(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function nze(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=QF(a,n),s=r(o,s)):(n=QF(n,a),s=r(s,o)),function(l){return s(n(l))}}function aze(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=QF(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Kw(t,l,1,n)-1;return s[c](a[c](l))}}function zw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function M4(){var t=UK,e=UK,r=h1,n,a,s,o=nc,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==nc&&(o=rze(t[0],t[A-1])),l=A>2?aze:nze,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),wI)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,NI),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=s8,d()},f.clamp=function(A){return arguments.length?(o=A?!0:nc,d()):o!==nc},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,h){return n=A,a=h,d()}}function i8(){return M4()(nc,nc)}function sze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function CI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Rv(t){return t=CI(Math.abs(t)),t?t[1]:NaN}function ize(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function oze(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var lze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y2(t){if(!(e=lze.exec(t)))throw new Error("invalid format: "+t);var e;return new o8({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Y2.prototype=o8.prototype;function o8(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}o8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cze(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var _I;function uze(t,e){var r=CI(t,e);if(!r)return _I=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(_I=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+CI(t,Math.max(0,e+s-1))[0]}function QK(t,e){var r=CI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const VK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>QK(t*100,e),r:QK,s:uze,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HK(t){return t}var $K=Array.prototype.map,GK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dze(t){var e=t.grouping===void 0||t.thousands===void 0?HK:ize($K.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?HK:oze($K.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=Y2(f);var h=f.fill,m=f.align,p=f.sign,g=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):VK[I]||(w===void 0&&(w=12),j=!0,I="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var _=(A&&A.prefix!==void 0?A.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(g==="$"?n:/[%p]/.test(I)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),E=VK[I],F=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(k){var D=_,Z=S,fe,me,pe;if(I==="c")Z=E(k)+Z,k="";else{k=+k;var ye=k<0||1/k<0;if(k=isNaN(k)?c:E(Math.abs(k),w),j&&(k=cze(k)),ye&&+k==0&&p!=="+"&&(ye=!1),D=(ye?p==="("?p:l:p==="-"||p==="("?"":p)+D,Z=(I==="s"&&!isNaN(k)&&_I!==void 0?GK[8+_I/3]:"")+Z+(ye&&p==="("?")":""),F){for(fe=-1,me=k.length;++fe<me;)if(pe=k.charCodeAt(fe),48>pe||pe>57){Z=(pe===46?a+k.slice(fe+1):k.slice(fe))+Z,k=k.slice(0,fe);break}}}b&&!x&&(k=e(k,1/0));var ae=D.length+k.length+Z.length,je=ae<y?new Array(y-ae+1).join(h):"";switch(b&&x&&(k=e(je+k,je.length?y-Z.length:1/0),je=""),m){case"<":k=D+k+Z+je;break;case"=":k=D+je+k+Z;break;case"^":k=je.slice(0,ae=je.length>>1)+D+k+Z+je.slice(ae);break;default:k=je+D+k+Z;break}return s(k)}return P.toString=function(){return f+""},P}function d(f,A){var h=Math.max(-8,Math.min(8,Math.floor(Rv(A)/3)))*3,m=Math.pow(10,-h),p=u((f=Y2(f),f.type="f",f),{suffix:GK[8+h/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var p_,l8,Toe;fze({thousands:",",grouping:[3],currency:["$",""]});function fze(t){return p_=dze(t),l8=p_.format,Toe=p_.formatPrefix,p_}function hze(t){return Math.max(0,-Rv(Math.abs(t)))}function Aze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rv(e)/3)))*3-Rv(Math.abs(t)))}function mze(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rv(e)-Rv(t))+1}function koe(t,e,r,n){var a=RF(t,e,r),s;switch(n=Y2(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Aze(a,o))&&(n.precision=s),Toe(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=mze(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=hze(a))&&(n.precision=s-(n.type==="%")*2);break}}return l8(n)}function _m(t){var e=t.domain;return t.ticks=function(r){var n=e();return OF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return koe(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=DF(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Foe(){var t=i8();return t.copy=function(){return zw(t,Foe())},gd.apply(t,arguments),_m(t)}function Ooe(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,NI),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Ooe(t).unknown(e)},t=arguments.length?Array.from(t,NI):[0,1],_m(r)}function Doe(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function KK(t){return Math.log(t)}function qK(t){return Math.exp(t)}function pze(t){return-Math.log(-t)}function gze(t){return-Math.exp(-t)}function xze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function vze(t){return t===10?xze:t===Math.E?Math.exp:e=>Math.pow(t,e)}function yze(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zK(t){return(e,r)=>-t(-e,r)}function c8(t){const e=t(KK,qK),r=e.domain;let n=10,a,s;function o(){return a=yze(n),s=vze(n),r()[0]<0?(a=zK(a),s=zK(s),t(pze,gze)):t(KK,qK),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&h-A<g){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;x.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=OF(u,d,g))}else x=OF(A,h,Math.min(h-A,g)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Y2(c)).precision==null&&(c.trim=!0),c=l8(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(Doe(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Roe(){const t=c8(M4()).domain([1,10]);return t.copy=()=>zw(t,Roe()).base(t.base()),gd.apply(t,arguments),t}function WK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function XK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function u8(t){var e=1,r=t(WK(e),XK(e));return r.constant=function(n){return arguments.length?t(WK(e=+n),XK(e)):e},_m(r)}function Moe(){var t=u8(M4());return t.copy=function(){return zw(t,Moe()).constant(t.constant())},gd.apply(t,arguments)}function YK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bze(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wze(t){return t<0?-t*t:t*t}function d8(t){var e=t(nc,nc),r=1;function n(){return r===1?t(nc,nc):r===.5?t(bze,wze):t(YK(r),YK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},_m(e)}function f8(){var t=d8(M4());return t.copy=function(){return zw(t,f8()).exponent(t.exponent())},gd.apply(t,arguments),t}function Nze(){return f8.apply(null,arguments).exponent(.5)}function JK(t){return Math.sign(t)*t*t}function Cze(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Loe(){var t=i8(),e=[0,1],r=!1,n;function a(s){var o=Cze(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(JK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,NI)).map(JK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Loe(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},gd.apply(a,arguments),_m(a)}function Uoe(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Iqe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Kw(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Y0),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Uoe().domain(t).range(e).unknown(n)},gd.apply(s,arguments)}function Qoe(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Kw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Qoe().domain([t,e]).range(a).unknown(s)},gd.apply(_m(o),arguments)}function Voe(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Kw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Voe().domain(t).range(e).unknown(r)},gd.apply(a,arguments)}const iB=new Date,oB=new Date;function ho(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>ho(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(iB.setTime(+s),oB.setTime(+o),t(iB),t(oB),Math.floor(r(iB,oB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const EI=ho(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);EI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ho(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):EI);EI.range;const Fh=1e3,td=Fh*60,Oh=td*60,iA=Oh*24,h8=iA*7,ZK=iA*30,lB=iA*365,pp=ho(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Fh)},(t,e)=>(e-t)/Fh,t=>t.getUTCSeconds());pp.range;const A8=ho(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fh)},(t,e)=>{t.setTime(+t+e*td)},(t,e)=>(e-t)/td,t=>t.getMinutes());A8.range;const m8=ho(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*td)},(t,e)=>(e-t)/td,t=>t.getUTCMinutes());m8.range;const p8=ho(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fh-t.getMinutes()*td)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getHours());p8.range;const g8=ho(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getUTCHours());g8.range;const Ww=ho(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*td)/iA,t=>t.getDate()-1);Ww.range;const L4=ho(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/iA,t=>t.getUTCDate()-1);L4.range;const Hoe=ho(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/iA,t=>Math.floor(t/iA));Hoe.range;function Pg(t){return ho(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*td)/h8)}const U4=Pg(0),SI=Pg(1),_ze=Pg(2),Eze=Pg(3),Mv=Pg(4),Sze=Pg(5),Ize=Pg(6);U4.range;SI.range;_ze.range;Eze.range;Mv.range;Sze.range;Ize.range;function Bg(t){return ho(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/h8)}const Q4=Bg(0),II=Bg(1),jze=Bg(2),Pze=Bg(3),Lv=Bg(4),Bze=Bg(5),Tze=Bg(6);Q4.range;II.range;jze.range;Pze.range;Lv.range;Bze.range;Tze.range;const x8=ho(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());x8.range;const v8=ho(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());v8.range;const oA=ho(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ho(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});oA.range;const lA=ho(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());lA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ho(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});lA.range;function $oe(t,e,r,n,a,s){const o=[[pp,1,Fh],[pp,5,5*Fh],[pp,15,15*Fh],[pp,30,30*Fh],[s,1,td],[s,5,5*td],[s,15,15*td],[s,30,30*td],[a,1,Oh],[a,3,3*Oh],[a,6,6*Oh],[a,12,12*Oh],[n,1,iA],[n,2,2*iA],[r,1,h8],[e,1,ZK],[e,3,3*ZK],[t,1,lB]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=e8(([,,g])=>g).right(o,A);if(h===o.length)return t.every(RF(u/lB,d/lB,f));if(h===0)return EI.every(Math.max(RF(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[kze,Fze]=$oe(lA,v8,Q4,Hoe,g8,m8),[Oze,Dze]=$oe(oA,x8,U4,Ww,p8,A8);function cB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vy(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Rze(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=yy(a),d=by(a),f=yy(s),A=by(s),h=yy(o),m=by(o),p=yy(l),g=by(l),x=yy(c),y=by(c),b={a:pe,A:ye,b:ae,B:je,c:null,d:sq,e:sq,f:iWe,g:pWe,G:xWe,H:nWe,I:aWe,j:sWe,L:Goe,m:oWe,M:lWe,p:Be,q:O,Q:lq,s:cq,S:cWe,u:uWe,U:dWe,V:fWe,w:hWe,W:AWe,x:null,X:null,y:mWe,Y:gWe,Z:vWe,"%":oq},w={a:G,A:z,b:L,B:Y,c:null,d:iq,e:iq,f:NWe,g:kWe,G:OWe,H:yWe,I:bWe,j:wWe,L:qoe,m:CWe,M:_We,p:J,q:R,Q:lq,s:cq,S:EWe,u:SWe,U:IWe,V:jWe,w:PWe,W:BWe,x:null,X:null,y:TWe,Y:FWe,Z:DWe,"%":oq},j={a:F,A:P,b:k,B:D,c:Z,d:nq,e:nq,f:Zze,g:rq,G:tq,H:aq,I:aq,j:Wze,L:Jze,m:zze,M:Xze,p:E,q:qze,Q:tWe,s:rWe,S:Yze,u:Vze,U:Hze,V:$ze,w:Qze,W:Gze,x:fe,X:me,y:rq,Y:tq,Z:Kze,"%":eWe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(H,ne){return function(ge){var U=[],Ue=-1,ie=0,te=H.length,Ee,ce,we;for(ge instanceof Date||(ge=new Date(+ge));++Ue<te;)H.charCodeAt(Ue)===37&&(U.push(H.slice(ie,Ue)),(ce=eq[Ee=H.charAt(++Ue)])!=null?Ee=H.charAt(++Ue):ce=Ee==="e"?" ":"0",(we=ne[Ee])&&(Ee=we(ge,ce)),U.push(Ee),ie=Ue+1);return U.push(H.slice(ie,Ue)),U.join("")}}function _(H,ne){return function(ge){var U=vy(1900,void 0,1),Ue=S(U,H,ge+="",0),ie,te;if(Ue!=ge.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(ne&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(ie=uB(vy(U.y,0,1)),te=ie.getUTCDay(),ie=te>4||te===0?II.ceil(ie):II(ie),ie=L4.offset(ie,(U.V-1)*7),U.y=ie.getUTCFullYear(),U.m=ie.getUTCMonth(),U.d=ie.getUTCDate()+(U.w+6)%7):(ie=cB(vy(U.y,0,1)),te=ie.getDay(),ie=te>4||te===0?SI.ceil(ie):SI(ie),ie=Ww.offset(ie,(U.V-1)*7),U.y=ie.getFullYear(),U.m=ie.getMonth(),U.d=ie.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),te="Z"in U?uB(vy(U.y,0,1)).getUTCDay():cB(vy(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(te+5)%7:U.w+U.U*7-(te+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,uB(U)):cB(U)}}function S(H,ne,ge,U){for(var Ue=0,ie=ne.length,te=ge.length,Ee,ce;Ue<ie;){if(U>=te)return-1;if(Ee=ne.charCodeAt(Ue++),Ee===37){if(Ee=ne.charAt(Ue++),ce=j[Ee in eq?ne.charAt(Ue++):Ee],!ce||(U=ce(H,ge,U))<0)return-1}else if(Ee!=ge.charCodeAt(U++))return-1}return U}function E(H,ne,ge){var U=u.exec(ne.slice(ge));return U?(H.p=d.get(U[0].toLowerCase()),ge+U[0].length):-1}function F(H,ne,ge){var U=h.exec(ne.slice(ge));return U?(H.w=m.get(U[0].toLowerCase()),ge+U[0].length):-1}function P(H,ne,ge){var U=f.exec(ne.slice(ge));return U?(H.w=A.get(U[0].toLowerCase()),ge+U[0].length):-1}function k(H,ne,ge){var U=x.exec(ne.slice(ge));return U?(H.m=y.get(U[0].toLowerCase()),ge+U[0].length):-1}function D(H,ne,ge){var U=p.exec(ne.slice(ge));return U?(H.m=g.get(U[0].toLowerCase()),ge+U[0].length):-1}function Z(H,ne,ge){return S(H,e,ne,ge)}function fe(H,ne,ge){return S(H,r,ne,ge)}function me(H,ne,ge){return S(H,n,ne,ge)}function pe(H){return o[H.getDay()]}function ye(H){return s[H.getDay()]}function ae(H){return c[H.getMonth()]}function je(H){return l[H.getMonth()]}function Be(H){return a[+(H.getHours()>=12)]}function O(H){return 1+~~(H.getMonth()/3)}function G(H){return o[H.getUTCDay()]}function z(H){return s[H.getUTCDay()]}function L(H){return c[H.getUTCMonth()]}function Y(H){return l[H.getUTCMonth()]}function J(H){return a[+(H.getUTCHours()>=12)]}function R(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var ne=I(H+="",b);return ne.toString=function(){return H},ne},parse:function(H){var ne=_(H+="",!1);return ne.toString=function(){return H},ne},utcFormat:function(H){var ne=I(H+="",w);return ne.toString=function(){return H},ne},utcParse:function(H){var ne=_(H+="",!0);return ne.toString=function(){return H},ne}}}var eq={"-":"",_:" ",0:"0"},Mo=/^\s*\d+/,Mze=/^%/,Lze=/[\\^$*+?|[\]().{}]/g;function la(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function Uze(t){return t.replace(Lze,"\\$&")}function yy(t){return new RegExp("^(?:"+t.map(Uze).join("|")+")","i")}function by(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Qze(t,e,r){var n=Mo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Vze(t,e,r){var n=Mo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Hze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function $ze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Gze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function tq(t,e,r){var n=Mo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function rq(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Kze(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function qze(t,e,r){var n=Mo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function zze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function nq(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Wze(t,e,r){var n=Mo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function aq(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Xze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Yze(t,e,r){var n=Mo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Jze(t,e,r){var n=Mo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Zze(t,e,r){var n=Mo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function eWe(t,e,r){var n=Mze.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function tWe(t,e,r){var n=Mo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function rWe(t,e,r){var n=Mo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function sq(t,e){return la(t.getDate(),e,2)}function nWe(t,e){return la(t.getHours(),e,2)}function aWe(t,e){return la(t.getHours()%12||12,e,2)}function sWe(t,e){return la(1+Ww.count(oA(t),t),e,3)}function Goe(t,e){return la(t.getMilliseconds(),e,3)}function iWe(t,e){return Goe(t,e)+"000"}function oWe(t,e){return la(t.getMonth()+1,e,2)}function lWe(t,e){return la(t.getMinutes(),e,2)}function cWe(t,e){return la(t.getSeconds(),e,2)}function uWe(t){var e=t.getDay();return e===0?7:e}function dWe(t,e){return la(U4.count(oA(t)-1,t),e,2)}function Koe(t){var e=t.getDay();return e>=4||e===0?Mv(t):Mv.ceil(t)}function fWe(t,e){return t=Koe(t),la(Mv.count(oA(t),t)+(oA(t).getDay()===4),e,2)}function hWe(t){return t.getDay()}function AWe(t,e){return la(SI.count(oA(t)-1,t),e,2)}function mWe(t,e){return la(t.getFullYear()%100,e,2)}function pWe(t,e){return t=Koe(t),la(t.getFullYear()%100,e,2)}function gWe(t,e){return la(t.getFullYear()%1e4,e,4)}function xWe(t,e){var r=t.getDay();return t=r>=4||r===0?Mv(t):Mv.ceil(t),la(t.getFullYear()%1e4,e,4)}function vWe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+la(e/60|0,"0",2)+la(e%60,"0",2)}function iq(t,e){return la(t.getUTCDate(),e,2)}function yWe(t,e){return la(t.getUTCHours(),e,2)}function bWe(t,e){return la(t.getUTCHours()%12||12,e,2)}function wWe(t,e){return la(1+L4.count(lA(t),t),e,3)}function qoe(t,e){return la(t.getUTCMilliseconds(),e,3)}function NWe(t,e){return qoe(t,e)+"000"}function CWe(t,e){return la(t.getUTCMonth()+1,e,2)}function _We(t,e){return la(t.getUTCMinutes(),e,2)}function EWe(t,e){return la(t.getUTCSeconds(),e,2)}function SWe(t){var e=t.getUTCDay();return e===0?7:e}function IWe(t,e){return la(Q4.count(lA(t)-1,t),e,2)}function zoe(t){var e=t.getUTCDay();return e>=4||e===0?Lv(t):Lv.ceil(t)}function jWe(t,e){return t=zoe(t),la(Lv.count(lA(t),t)+(lA(t).getUTCDay()===4),e,2)}function PWe(t){return t.getUTCDay()}function BWe(t,e){return la(II.count(lA(t)-1,t),e,2)}function TWe(t,e){return la(t.getUTCFullYear()%100,e,2)}function kWe(t,e){return t=zoe(t),la(t.getUTCFullYear()%100,e,2)}function FWe(t,e){return la(t.getUTCFullYear()%1e4,e,4)}function OWe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Lv(t):Lv.ceil(t),la(t.getUTCFullYear()%1e4,e,4)}function DWe(){return"+0000"}function oq(){return"%"}function lq(t){return+t}function cq(t){return Math.floor(+t/1e3)}var ux,Woe,Xoe;RWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RWe(t){return ux=Rze(t),Woe=ux.format,ux.parse,Xoe=ux.utcFormat,ux.utcParse,ux}function MWe(t){return new Date(t)}function LWe(t){return t instanceof Date?+t:+new Date(+t)}function y8(t,e,r,n,a,s,o,l,c,u){var d=i8(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?h:l(I)<I?m:o(I)<I?p:s(I)<I?g:n(I)<I?a(I)<I?x:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,LWe)):A().map(MWe)},d.ticks=function(I){var _=A();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=A();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?A(Doe(_,I)):d},d.copy=function(){return zw(d,y8(t,e,r,n,a,s,o,l,c,u))},d}function UWe(){return gd.apply(y8(Oze,Dze,oA,x8,U4,Ww,p8,A8,pp,Woe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QWe(){return gd.apply(y8(kze,Fze,lA,v8,Q4,L4,g8,m8,pp,Xoe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V4(){var t=0,e=1,r,n,a,s,o=nc,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(h1),u.rangeRound=d(s8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function Em(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Yoe(){var t=_m(V4()(nc));return t.copy=function(){return Em(t,Yoe())},NA.apply(t,arguments)}function Joe(){var t=c8(V4()).domain([1,10]);return t.copy=function(){return Em(t,Joe()).base(t.base())},NA.apply(t,arguments)}function Zoe(){var t=u8(V4());return t.copy=function(){return Em(t,Zoe()).constant(t.constant())},NA.apply(t,arguments)}function b8(){var t=d8(V4());return t.copy=function(){return Em(t,b8()).exponent(t.exponent())},NA.apply(t,arguments)}function VWe(){return b8.apply(null,arguments).exponent(.5)}function ele(){var t=[],e=nc;function r(n){if(n!=null&&!isNaN(n=+n))return e((Kw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Y0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>Sqe(t,s/n))},r.copy=function(){return ele(e).domain(t)},NA.apply(r,arguments)}function H4(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=nc,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=eze(p,[x,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(h1),h.rangeRound=m(s8),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function tle(){var t=_m(H4()(nc));return t.copy=function(){return Em(t,tle())},NA.apply(t,arguments)}function rle(){var t=c8(H4()).domain([.1,1,10]);return t.copy=function(){return Em(t,rle()).base(t.base())},NA.apply(t,arguments)}function nle(){var t=u8(H4());return t.copy=function(){return Em(t,nle()).constant(t.constant())},NA.apply(t,arguments)}function w8(){var t=d8(H4());return t.copy=function(){return Em(t,w8()).exponent(t.exponent())},NA.apply(t,arguments)}function HWe(){return w8.apply(null,arguments).exponent(.5)}const zy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:r8,scaleDiverging:tle,scaleDivergingLog:rle,scaleDivergingPow:w8,scaleDivergingSqrt:HWe,scaleDivergingSymlog:nle,scaleIdentity:Ooe,scaleImplicit:MF,scaleLinear:Foe,scaleLog:Roe,scaleOrdinal:t8,scalePoint:Pqe,scalePow:f8,scaleQuantile:Uoe,scaleQuantize:Qoe,scaleRadial:Loe,scaleSequential:Yoe,scaleSequentialLog:Joe,scaleSequentialPow:b8,scaleSequentialQuantile:ele,scaleSequentialSqrt:VWe,scaleSequentialSymlog:Zoe,scaleSqrt:Nze,scaleSymlog:Moe,scaleThreshold:Voe,scaleTime:UWe,scaleUtc:QWe,tickFormat:koe},Symbol.toStringTag,{value:"Module"}));var CA=t=>t.chartData,$4=Gt([CA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ale=(t,e,r,n)=>n?$4(t):CA(t),$We=(t,e,r)=>r?$4(t):CA(t);function Am(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Ws(e)&&Ws(r))return!0}return!1}function uq(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function sle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Ws(r))a=r;else if(typeof r=="function")return;if(Ws(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(Am(o))return o}}function GWe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Am(n))return uq(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(nn(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&SG.test(a)){var c=SG.exec(a);if(c==null||c[1]==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(nn(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&IG.test(s)){var d=IG.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var A=[o,l];if(Am(A))return e==null?A:uq(A,e,r)}}}var A1=1e9,KWe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},C8,Ss=!0,hd="[DecimalError] ",kp=hd+"Invalid argument: ",N8=hd+"Exponent out of range: ",m1=Math.floor,Zm=Math.pow,qWe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,su,So=1e7,us=7,ile=9007199254740991,jI=m1(ile/us),Qr={};Qr.absoluteValue=Qr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Qr.comparedTo=Qr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Qr.decimalPlaces=Qr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*us;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Qr.dividedBy=Qr.div=function(t){return Kh(this,new this.constructor(t))};Qr.dividedToIntegerBy=Qr.idiv=function(t){var e=this,r=e.constructor;return Wa(Kh(e,new r(t),0,1),r.precision)};Qr.equals=Qr.eq=function(t){return!this.cmp(t)};Qr.exponent=function(){return Li(this)};Qr.greaterThan=Qr.gt=function(t){return this.cmp(t)>0};Qr.greaterThanOrEqualTo=Qr.gte=function(t){return this.cmp(t)>=0};Qr.isInteger=Qr.isint=function(){return this.e>this.d.length-2};Qr.isNegative=Qr.isneg=function(){return this.s<0};Qr.isPositive=Qr.ispos=function(){return this.s>0};Qr.isZero=function(){return this.s===0};Qr.lessThan=Qr.lt=function(t){return this.cmp(t)<0};Qr.lessThanOrEqualTo=Qr.lte=function(t){return this.cmp(t)<1};Qr.logarithm=Qr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(su))throw Error(hd+"NaN");if(r.s<1)throw Error(hd+(r.s?"NaN":"-Infinity"));return r.eq(su)?new n(0):(Ss=!1,e=Kh(J2(r,s),J2(t,s),s),Ss=!0,Wa(e,a))};Qr.minus=Qr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cle(e,t):ole(e,(t.s=-t.s,t))};Qr.modulo=Qr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(hd+"NaN");return r.s?(Ss=!1,e=Kh(r,t,0,1).times(t),Ss=!0,r.minus(e)):Wa(new n(r),a)};Qr.naturalExponential=Qr.exp=function(){return lle(this)};Qr.naturalLogarithm=Qr.ln=function(){return J2(this)};Qr.negated=Qr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Qr.plus=Qr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ole(e,t):cle(e,(t.s=-t.s,t))};Qr.precision=Qr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kp+t);if(e=Li(a)+1,n=a.d.length-1,r=n*us+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Qr.squareRoot=Qr.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(hd+"NaN")}for(t=Li(l),Ss=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Of(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=m1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Kh(l,s,o+2)).times(.5),Of(s.d).slice(0,o)===(e=Of(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Wa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Ss=!0,Wa(n,r)};Qr.times=Qr.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(s=A,A=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+h[n]*A[a-n-1]+e,s[a--]=l%So|0,e=l/So|0;s[a]=(s[a]+e)%So|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Ss?Wa(t,f.precision):t};Qr.toDecimalPlaces=Qr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Kf(t,0,A1),e===void 0?e=n.rounding:Kf(e,0,8),Wa(r,t+Li(r)+1,e))};Qr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=cg(n,!0):(Kf(t,0,A1),e===void 0?e=a.rounding:Kf(e,0,8),n=Wa(new a(n),t+1,e),r=cg(n,!0,t+1)),r};Qr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?cg(a):(Kf(t,0,A1),e===void 0?e=s.rounding:Kf(e,0,8),n=Wa(new s(a),t+Li(a)+1,e),r=cg(n.abs(),!1,t+Li(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Qr.toInteger=Qr.toint=function(){var t=this,e=t.constructor;return Wa(new e(t),Li(t)+1,e.rounding)};Qr.toNumber=function(){return+this};Qr.toPower=Qr.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(su);if(l=new c(l),!l.s){if(t.s<1)throw Error(hd+"Infinity");return l}if(l.eq(su))return l;if(n=c.precision,t.eq(su))return Wa(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=ile){for(a=new c(su),e=Math.ceil(n/us+4),Ss=!1;r%2&&(a=a.times(l),fq(a.d,e)),r=m1(r/2),r!==0;)l=l.times(l),fq(l.d,e);return Ss=!0,t.s<0?new c(su).div(a):Wa(a,n)}}else if(s<0)throw Error(hd+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Ss=!1,a=t.times(J2(l,n+u)),Ss=!0,a=lle(a),a.s=s,a};Qr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Li(a),n=cg(a,r<=s.toExpNeg||r>=s.toExpPos)):(Kf(t,1,A1),e===void 0?e=s.rounding:Kf(e,0,8),a=Wa(new s(a),t,e),r=Li(a),n=cg(a,t<=r||r<=s.toExpNeg,t)),n};Qr.toSignificantDigits=Qr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Kf(t,1,A1),e===void 0?e=n.rounding:Kf(e,0,8)),Wa(new n(r),t,e)};Qr.toString=Qr.valueOf=Qr.val=Qr.toJSON=Qr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Li(t),r=t.constructor;return cg(t,e<=r.toExpNeg||e>=r.toExpPos)};function ole(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Ss?Wa(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/us),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/So|0,c[s]%=So;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Ss?Wa(e,f):e}function Kf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(kp+t)}function Of(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=us-n.length,r&&(s+=f0(r)),s+=n;o=t[e],n=o+"",r=us-n.length,r&&(s+=f0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Kh=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%So|0,o=s/So|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*So+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,h,m,p,g,x,y,b,w,j,I,_,S,E=n.constructor,F=n.s==a.s?1:-1,P=n.d,k=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(hd+"Division by zero");for(c=n.e-a.e,_=k.length,j=P.length,h=new E(F),m=h.d=[],u=0;k[u]==(P[u]||0);)++u;if(k[u]>(P[u]||0)&&--c,s==null?y=s=E.precision:o?y=s+(Li(n)-Li(a))+1:y=s,y<0)return new E(0);if(y=y/us+2|0,u=0,_==1)for(d=0,k=k[0],y++;(u<j||d)&&y--;u++)b=d*So+(P[u]||0),m[u]=b/k|0,d=b%k|0;else{for(d=So/(k[0]+1)|0,d>1&&(k=t(k,d),P=t(P,d),_=k.length,j=P.length),w=_,p=P.slice(0,_),g=p.length;g<_;)p[g++]=0;S=k.slice(),S.unshift(0),I=k[0],k[1]>=So/2&&++I;do d=0,l=e(k,p,_,g),l<0?(x=p[0],_!=g&&(x=x*So+(p[1]||0)),d=x/I|0,d>1?(d>=So&&(d=So-1),f=t(k,d),A=f.length,g=p.length,l=e(f,p,A,g),l==1&&(d--,r(f,_<A?S:k,A))):(d==0&&(l=d=1),f=k.slice()),A=f.length,A<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(k,p,_,g),l<1&&(d++,r(p,_<g?S:k,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=P[w]||0:(p=[P[w]],g=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,Wa(h,o?s+Li(h)+1:s)}}();function lle(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Li(t)>16)throw Error(N8+Li(t));if(!t.s)return new d(su);for(Ss=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Zm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(su),d.precision=l;;){if(a=Wa(a.times(t),l),r=r.times(++c),o=s.plus(Kh(a,r,l)),Of(o.d).slice(0,l)===Of(s.d).slice(0,l)){for(;u--;)s=Wa(s.times(s),l);return d.precision=f,e==null?(Ss=!0,Wa(s,f)):s}s=o}}function Li(t){for(var e=t.e*us,r=t.d[0];r>=10;r/=10)e++;return e}function dB(t,e,r){if(e>t.LN10.sd())throw Ss=!0,r&&(t.precision=r),Error(hd+"LN10 precision limit exceeded");return Wa(new t(t.LN10),e)}function f0(t){for(var e="";t--;)e+="0";return e}function J2(t,e){var r,n,a,s,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(hd+(h.s?"NaN":"-Infinity"));if(h.eq(su))return new p(0);if(e==null?(Ss=!1,u=g):u=e,h.eq(10))return e==null&&(Ss=!0),dB(p,u);if(u+=A,p.precision=u,r=Of(m),n=r.charAt(0),s=Li(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=Of(h.d),n=r.charAt(0),f++;s=Li(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=dB(p,u+2,g).times(s+""),h=J2(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=g,e==null?(Ss=!0,Wa(h,g)):h;for(l=o=h=Kh(h.minus(su),h.plus(su),u),d=Wa(h.times(h),u),a=3;;){if(o=Wa(o.times(d),u),c=l.plus(Kh(o,new p(a),u)),Of(c.d).slice(0,u)===Of(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(dB(p,u+2,g).times(s+""))),l=Kh(l,new p(f),u),p.precision=g,e==null?(Ss=!0,Wa(l,g)):l;l=c,a+=2}}function dq(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=m1(r/us),t.d=[],n=(r+1)%us,r<0&&(n+=us),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=us;n<a;)t.d.push(+e.slice(n,n+=us));e=e.slice(n),n=us-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Ss&&(t.e>jI||t.e<-jI))throw Error(N8+r)}else t.s=0,t.e=0,t.d=[0];return t}function Wa(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=us,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/us),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=us,a=n-us+o}if(r!==void 0&&(s=Zm(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Zm(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=Li(t),f.length=1,e=e-s-1,f[0]=Zm(10,(us-e%us)%us),t.e=m1(-e/us)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Zm(10,us-n),f[d]=a>0?(u/Zm(10,o-a)%Zm(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==So&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=So)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ss&&(t.e>jI||t.e<-jI))throw Error(N8+Li(t));return t}function cle(t,e){var r,n,a,s,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Ss?Wa(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/us),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=So-1;--c[s],c[a]+=So}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Ss?Wa(e,h):e):new A(0)}function cg(t,e,r){var n,a=Li(t),s=Of(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+f0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+f0(-a-1)+s,r&&(n=r-o)>0&&(s+=f0(n))):a>=o?(s+=f0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+f0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=f0(n))),t.s<0?"-"+s:s}function fq(t,e){if(t.length>e)return t.length=e,!0}function ule(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(kp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return dq(o,s.toString())}else if(typeof s!="string")throw Error(kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,qWe.test(s))dq(o,s);else throw Error(kp+s)}if(a.prototype=Qr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ule,a.config=a.set=zWe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function zWe(t){if(!t||typeof t!="object")throw Error(hd+"Object expected");var e,r,n,a=["precision",1,A1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(m1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(kp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(kp+r+": "+n);return this}var C8=ule(KWe);su=new C8(1);const Pa=C8;var WWe=t=>t,dle={},fle=t=>t===dle,hq=t=>function e(){return arguments.length===0||arguments.length===1&&fle(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},hle=(t,e)=>t===1?e:hq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==dle).length;return s>=t?e(...n):hle(t-s,hq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>fle(d)?l.shift():d);return e(...u,...l)}))}),XWe=t=>hle(t.length,t),VF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},YWe=XWe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),JWe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return WWe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function Ale(t){var e;return t===0?e=1:e=Math.floor(new Pa(t).abs().log(10).toNumber())+1,e}function mle(t,e,r){for(var n=new Pa(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var ple=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},gle=(t,e,r)=>{if(t.lte(0))return new Pa(0);var n=Ale(t.toNumber()),a=new Pa(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Pa(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Pa(c.toNumber()):new Pa(Math.ceil(c.toNumber()))},ZWe=(t,e,r)=>{var n=new Pa(1),a=new Pa(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Pa(10).pow(Ale(t)-1),a=new Pa(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Pa(Math.floor(t)))}else t===0?a=new Pa(Math.floor((e-1)/2)):r||(a=new Pa(Math.floor(t)));var o=Math.floor((e-1)/2),l=JWe(YWe(c=>a.add(new Pa(c-o).mul(n)).toNumber()),VF);return l(0,e)},xle=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Pa(0),tickMin:new Pa(0),tickMax:new Pa(0)};var o=gle(new Pa(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Pa(0):(l=new Pa(e).add(r).div(2),l=l.sub(new Pa(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Pa(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?xle(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Pa(c).mul(o)),tickMax:l.add(new Pa(u).mul(o))})},eXe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=ple([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...VF(0,a-1).map(()=>1/0)]:[...VF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return ZWe(l,a,s);var{step:d,tickMin:f,tickMax:A}=xle(l,c,o,s,0),h=mle(f,A.add(new Pa(.1).mul(d)),d);return r>n?h.reverse():h},tXe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=ple([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=gle(new Pa(l).sub(o).div(c-1),s,0),d=[...mle(new Pa(o),new Pa(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},vle=t=>t.rootProps.maxBarSize,rXe=t=>t.rootProps.barGap,yle=t=>t.rootProps.barCategoryGap,nXe=t=>t.rootProps.barSize,Xw=t=>t.rootProps.stackOffset,ble=t=>t.rootProps.reverseStackOrder,_8=t=>t.options.chartName,E8=t=>t.rootProps.syncId,wle=t=>t.rootProps.syncMethod,S8=t=>t.options.eventEmitter,Fl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ch={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},eu={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},G4=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},aXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ch.angleAxisId,includeHidden:!1,name:void 0,reversed:Ch.reversed,scale:Ch.scale,tick:Ch.tick,tickCount:void 0,ticks:void 0,type:Ch.type,unit:void 0},sXe={allowDataOverflow:eu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:eu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:eu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:eu.scale,tick:eu.tick,tickCount:eu.tickCount,ticks:void 0,type:eu.type,unit:void 0},iXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ch.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ch.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ch.scale,tick:Ch.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oXe={allowDataOverflow:eu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:eu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:eu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:eu.scale,tick:eu.tick,tickCount:eu.tickCount,ticks:void 0,type:"category",unit:void 0},I8=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?iXe:aXe,j8=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?oXe:sXe,K4=t=>t.polarOptions,P8=Gt([bA,wA,fo],goe),Nle=Gt([K4,P8],(t,e)=>{if(t!=null)return Dl(t.innerRadius,e,0)}),Cle=Gt([K4,P8],(t,e)=>{if(t!=null)return Dl(t.outerRadius,e,e*.8)}),lXe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},_le=Gt([K4],lXe);Gt([I8,_le],G4);var Ele=Gt([P8,Nle,Cle],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Gt([j8,Ele],G4);var Sle=Gt([ca,K4,Nle,Cle,bA,wA],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:Dl(o,a,a/2),cy:Dl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Bs=(t,e)=>e,Yw=(t,e,r)=>r;function B8(t){return t==null?void 0:t.id}function Ile(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=B8(l);u.forEach((f,A)=>{var h=s==null||a?A:String(As(f,s,null)),m=As(f,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function q4(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var z4=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function W4(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function cXe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Ao=t=>{var e=ca(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},p1=t=>t.tooltip.settings.axisId;function Aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function PI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(r),!0).forEach(function(n){uXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uXe(t,e,r){return(e=dXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dXe(t){var e=fXe(t,"string");return typeof e=="symbol"?e:e+""}function fXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HF=[0,"auto"],wo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jle=(t,e)=>t.cartesianAxis.xAxis[e],_A=(t,e)=>{var r=jle(t,e);return r??wo},No={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:HF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hw},Ple=(t,e)=>t.cartesianAxis.yAxis[e],EA=(t,e)=>{var r=Ple(t,e);return r??No},hXe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},T8=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??hXe},Xs=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);case"zAxis":return T8(t,r);case"angleAxis":return I8(t,r);case"radiusAxis":return j8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},AXe=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Jw=(t,e,r)=>{switch(e){case"xAxis":return _A(t,r);case"yAxis":return EA(t,r);case"angleAxis":return I8(t,r);case"radiusAxis":return j8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Ble=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function k8(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var F8=t=>t.graphicalItems.cartesianItems,mXe=Gt([Bs,Yw],k8),O8=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Zw=Gt([F8,Xs,mXe],O8,{memoizeOptions:{resultEqualityCheck:W4}}),Tle=Gt([Zw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(q4)),kle=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),pXe=Gt([Zw],kle),D8=t=>t.map(e=>e.data).filter(Boolean).flat(1),gXe=Gt([Zw],D8,{memoizeOptions:{resultEqualityCheck:W4}}),R8=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},M8=Gt([gXe,ale],R8),L8=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:As(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:As(a,n)}))):t.map(n=>({value:n})),X4=Gt([M8,Xs,Zw],L8);function Fle(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function hE(t){if(Gf(t)||t instanceof Date){var e=Number(t);if(Ws(e))return e}}function mq(t){if(Array.isArray(t)){var e=[hE(t[0]),hE(t[1])];return Am(e)?e:void 0}var r=hE(t);if(r!=null)return[r,r]}function cA(t){return t.map(hE).filter(EVe)}function xXe(t,e,r){return!r||typeof e!="number"||$f(e)?[]:r.length?cA(r.flatMap(n=>{var a=As(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Ws(s)||!Ws(o)))return[e-s,e+o]})):[]}var mo=t=>{var e=Ao(t),r=p1(t);return Jw(t,e,r)},eN=Gt([mo],t=>t==null?void 0:t.dataKey),vXe=Gt([Tle,ale,mo],Ile),Ole=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(B8);return[l,{stackedData:$$e(t,d,r),graphicalItems:u}]}))},$F=Gt([vXe,Tle,Xw,ble],Ole),Dle=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=W$e(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},yXe=Gt([Xs],t=>t.allowDataOverflow),U8=t=>{var e;if(t==null||!("domain"in t))return HF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=cA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:HF},Q8=Gt([Xs],U8),V8=Gt([Q8,yXe],sle),bXe=Gt([$F,CA,Bs,V8],Dle,{memoizeOptions:{resultEqualityCheck:z4}}),Y4=t=>t.errorBars,wXe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Fle(r,n)),BI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},H8=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>Fle(a,x)),A=As(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),h=xXe(l,A,f);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var g=mq(A);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),o=o==null?g[1]:Math.max(o,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=mq(As(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Ws(s)&&Ws(o))return[s,o]},NXe=Gt([M8,Xs,pXe,Y4,Bs],H8,{memoizeOptions:{resultEqualityCheck:z4}});function CXe(t){var{value:e}=t;if(Gf(e)||e instanceof Date)return e}var _Xe=(t,e,r)=>{var n=t.map(CXe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Fse(n))?Coe(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Rle=t=>t.referenceElements.dots,g1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),EXe=Gt([Rle,Bs,Yw],g1),Mle=t=>t.referenceElements.areas,SXe=Gt([Mle,Bs,Yw],g1),Lle=t=>t.referenceElements.lines,IXe=Gt([Lle,Bs,Yw],g1),Ule=(t,e)=>{if(t!=null){var r=cA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},jXe=Gt(EXe,Bs,Ule),Qle=(t,e)=>{if(t!=null){var r=cA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},PXe=Gt([SXe,Bs],Qle);function BXe(t){var e;if(t.x!=null)return cA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:cA(r)}function TXe(t){var e;if(t.y!=null)return cA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:cA(r)}var Vle=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?BXe(n):TXe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},kXe=Gt([IXe,Bs],Vle),FXe=Gt(jXe,kXe,PXe,(t,e,r)=>BI(t,r,e)),$8=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?BI(n,s,a):BI(s,a);return GWe(e,u,t.allowDataOverflow)},OXe=Gt([Xs,Q8,V8,bXe,NXe,FXe,ca,Bs],$8,{memoizeOptions:{resultEqualityCheck:z4}}),DXe=[0,1],G8=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=jg(e,s);if(u&&l==null){var d;return Coe(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?_Xe(n,t,u):a==="expand"?DXe:o}},K8=Gt([Xs,ca,M8,X4,Xw,Bs,OXe],G8),Hle=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Mw(s));return l in zy?l:"point"}}},x1=Gt([Xs,ca,Ble,_8,Bs],Hle);function RXe(t){if(t!=null){if(t in zy)return zy[t]();var e="scale".concat(Mw(t));if(e in zy)return zy[e]()}}function q8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=RXe(e);if(a!=null){var s=a.domain(r).range(n);return L$e(s),s}}}var z8=(t,e,r)=>{var n=U8(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Am(t))return eXe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Am(t))return tXe(t,e.tickCount,e.allowDecimals)}},W8=Gt([K8,Jw,x1],z8),X8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Am(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},MXe=Gt([Xs,K8,W8,Bs],X8),LXe=Gt(X4,Xs,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(cA(t.map(f=>f.value))).sort((f,A)=>f-A),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),$le=Gt(LXe,ca,yle,fo,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Ws(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=Dl(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),UXe=(t,e,r)=>{var n=_A(t,e);return n==null||typeof n.padding!="string"?0:$le(t,"xAxis",e,r,n.padding)},QXe=(t,e,r)=>{var n=EA(t,e);return n==null||typeof n.padding!="string"?0:$le(t,"yAxis",e,r,n.padding)},VXe=Gt(_A,UXe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),HXe=Gt(EA,QXe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),$Xe=Gt([fo,VXe,j4,I4,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),GXe=Gt([fo,ca,HXe,j4,I4,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),tN=(t,e,r,n)=>{var a;switch(e){case"xAxis":return $Xe(t,r,n);case"yAxis":return GXe(t,r,n);case"zAxis":return(a=T8(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return _le(t);case"radiusAxis":return Ele(t,r);default:return}},Gle=Gt([Xs,tN],G4),J4=Gt([Xs,x1,MXe,Gle],q8);Gt([Zw,Y4,Bs],wXe);function Kle(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Z4=(t,e)=>e,eP=(t,e,r)=>r,KXe=Gt(E4,Z4,eP,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Kle)),qXe=Gt(S4,Z4,eP,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Kle)),qle=(t,e)=>({width:t.width,height:e.height}),zXe=(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}},zle=Gt(fo,_A,qle),WXe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},XXe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},YXe=Gt(wA,fo,KXe,Z4,eP,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=qle(e,l);o==null&&(o=WXe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),JXe=Gt(bA,fo,qXe,Z4,eP,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=zXe(e,l);o==null&&(o=XXe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),ZXe=(t,e)=>{var r=_A(t,e);if(r!=null)return YXe(t,r.orientation,r.mirror)},eYe=Gt([fo,_A,ZXe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),tYe=(t,e)=>{var r=EA(t,e);if(r!=null)return JXe(t,r.orientation,r.mirror)},rYe=Gt([fo,EA,tYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),Wle=Gt(fo,EA,(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}}),pq=(t,e,r)=>{switch(e){case"xAxis":return zle(t,r).width;case"yAxis":return Wle(t,r).height;default:return}},Xle=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=jg(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&Fse(c))return c}},Y8=Gt([ca,X4,Xs,Bs],Xle),Yle=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=jg(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},J8=Gt([ca,X4,Jw,Bs],Yle);Gt([ca,AXe,x1,J4,Y8,J8,tN,W8,Bs],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=jg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var nYe=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=jg(t,c),{type:d,ticks:f,tickCount:A}=e,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?ll(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((x,y)=>{var b=o?o.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>Ws(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>Ws(x.coordinate)):n.ticks?n.ticks(A).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:o?o[x]:x,index:y,offset:m}))}},Jle=Gt([ca,Jw,x1,J4,W8,tN,Y8,J8,Bs],nYe),aYe=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=jg(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?ll(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Uv=Gt([ca,Jw,J4,tN,Y8,J8,Bs],aYe),Qv=Gt(Xs,J4,(t,e)=>{if(!(t==null||e==null))return PI(PI({},t),{},{scale:e})}),sYe=Gt([Xs,x1,K8,Gle],q8);Gt((t,e,r)=>T8(t,r),sYe,(t,e)=>{if(!(t==null||e==null))return PI(PI({},t),{},{scale:e})});var iYe=Gt([ca,E4,S4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Zle=t=>t.options.defaultTooltipEventType,ece=t=>t.options.validateTooltipEventTypes;function tce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function Z8(t,e){var r=Zle(t),n=ece(t);return tce(e,r,n)}function oYe(t){return Jr(e=>Z8(e,t))}var rce=(t,e)=>{var r,n=Number(e);if(!($f(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},lYe=t=>t.tooltip.settings,N0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cYe={itemInteraction:{click:N0,hover:N0},axisInteraction:{click:N0,hover:N0},keyboardInteraction:N0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nce=Dc({name:"tooltip",initialState:cYe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:bs()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Jd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:bs()},removeTooltipEntrySettings:{reducer(t,e){var r=Jd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:bs()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:uYe,replaceTooltipEntrySettings:dYe,removeTooltipEntrySettings:fYe,setTooltipSettingsState:hYe,setActiveMouseOverItemIndex:ace,mouseLeaveItem:AYe,mouseLeaveChart:sce,setActiveClickItemIndex:mYe,setMouseOverAxisIndex:ice,setMouseClickAxisIndex:pYe,setSyncInteraction:GF,setKeyboardInteraction:KF}=nce.actions,gYe=nce.reducer;function gq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function g_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gq(Object(r),!0).forEach(function(n){xYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xYe(t,e,r){return(e=vYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vYe(t){var e=yYe(t,"string");return typeof e=="symbol"?e:e+""}function yYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bYe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function wYe(t){return t.index!=null}var oce=(t,e,r,n)=>{if(e==null)return N0;var a=bYe(t,e,r);if(a==null)return N0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(wYe(a)){if(s)return g_(g_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return g_(g_({},N0),{},{coordinate:a.coordinate})};function NYe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function CYe(t,e){var r=NYe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function _Ye(t,e,r){if(r==null||e==null)return!0;var n=As(t,e);return n==null||!Am(r)?!0:CYe(n,r)}var eM=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Ws(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||_Ye(u,r,n)?String(c):null},lce=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},cce=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},rN=t=>t.options.tooltipPayloadSearcher,v1=t=>t.tooltip;function xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(r),!0).forEach(function(n){EYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EYe(t,e,r){return(e=SYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SYe(t){var e=IYe(t,"string");return typeof e=="symbol"?e:e+""}function IYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jYe(t,e){return t??e}var uce=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((A,h)=>{var m,{dataDefinedOnItem:p,settings:g}=h,x=jYe(p,l),y=Array.isArray(x)?Vie(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?j=_Ve(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var S=vq(vq({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});A.push(jG({tooltipEntrySettings:S,dataKey:_.dataKey,payload:_.payload,value:As(_.payload,_.dataKey),name:_.name}))});else{var I;A.push(jG({tooltipEntrySettings:g,dataKey:b,payload:j,value:As(j,b),name:(I=As(j,w))!==null&&I!==void 0?I:g==null?void 0:g.name}))}return A},f)}},tM=Gt([mo,ca,Ble,_8,Ao],Hle),PYe=Gt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),BYe=Gt([Ao,p1],k8),y1=Gt([PYe,mo,BYe],O8,{memoizeOptions:{resultEqualityCheck:W4}}),TYe=Gt([y1],t=>t.filter(q4)),kYe=Gt([y1],D8,{memoizeOptions:{resultEqualityCheck:W4}}),b1=Gt([kYe,CA],R8),FYe=Gt([TYe,CA,mo],Ile),rM=Gt([b1,mo,y1],L8),dce=Gt([mo],U8),OYe=Gt([mo],t=>t.allowDataOverflow),fce=Gt([dce,OYe],sle),DYe=Gt([y1],t=>t.filter(q4)),RYe=Gt([FYe,DYe,Xw,ble],Ole),MYe=Gt([RYe,CA,Ao,fce],Dle),LYe=Gt([y1],kle),UYe=Gt([b1,mo,LYe,Y4,Ao],H8,{memoizeOptions:{resultEqualityCheck:z4}}),QYe=Gt([Rle,Ao,p1],g1),VYe=Gt([QYe,Ao],Ule),HYe=Gt([Mle,Ao,p1],g1),$Ye=Gt([HYe,Ao],Qle),GYe=Gt([Lle,Ao,p1],g1),KYe=Gt([GYe,Ao],Vle),qYe=Gt([VYe,KYe,$Ye],BI),zYe=Gt([mo,dce,fce,MYe,UYe,qYe,ca,Ao],$8),nN=Gt([mo,ca,b1,rM,Xw,Ao,zYe],G8),WYe=Gt([nN,mo,tM],z8),XYe=Gt([mo,nN,WYe,Ao],X8),hce=t=>{var e=Ao(t),r=p1(t),n=!1;return tN(t,e,r,n)},Ace=Gt([mo,hce],G4),mce=Gt([mo,tM,XYe,Ace],q8),YYe=Gt([ca,rM,mo,Ao],Xle),JYe=Gt([ca,rM,mo,Ao],Yle),ZYe=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=jg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?ll(a[0]-a[1])*2*f:f,u&&o?o.map((A,h)=>({coordinate:n(A)+f,value:A,index:h,offset:f})):n.domain().map((A,h)=>({coordinate:n(A)+f,value:s?s[A]:A,index:h,offset:f}))}}},SA=Gt([ca,mo,tM,mce,hce,YYe,JYe,Ao],ZYe),nM=Gt([Zle,ece,lYe],(t,e,r)=>tce(r.shared,t,e)),pce=t=>t.tooltip.settings.trigger,aM=t=>t.tooltip.settings.defaultIndex,aN=Gt([v1,nM,pce,aM],oce),ug=Gt([aN,b1,eN,nN],eM),gce=Gt([SA,ug],rce),sM=Gt([aN],t=>{if(t)return t.dataKey}),eJe=Gt([aN],t=>{if(t)return t.graphicalItemId}),xce=Gt([v1,nM,pce,aM],cce),tJe=Gt([bA,wA,ca,fo,SA,aM,xce,rN],lce),rJe=Gt([aN,tJe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),nJe=Gt([aN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),aJe=Gt([xce,ug,CA,eN,gce,rN,nM],uce);Gt([aJe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(r),!0).forEach(function(n){sJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sJe(t,e,r){return(e=iJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iJe(t){var e=oJe(t,"string");return typeof e=="symbol"?e:e+""}function oJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lJe=()=>Jr(mo),cJe=()=>{var t=lJe(),e=Jr(SA),r=Jr(mce);return uI(!t||!r?void 0:bq(bq({},t),{},{scale:r}),e)};function wq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wq(Object(r),!0).forEach(function(n){uJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uJe(t,e,r){return(e=dJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dJe(t){var e=fJe(t,"string");return typeof e=="symbol"?e:e+""}function fJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hJe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},AJe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return dx(dx(dx({},n),Mi(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return dx(dx(dx({},n),Mi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mJe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var vce=(t,e,r,n,a)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,A,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[l+1])===null||A===void 0?void 0:A.coordinate,g=void 0;if(!(h==null||m==null||p==null))if(ll(m-h)!==ll(p-m)){var x=[];if(ll(p-m)===ll(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+h)/2),x[1]=Math.max(y,(y+h)/2)}else{g=h;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(h,p),_=Math.max(h,p);if(t>(I+m)/2&&t<=(_+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(e)for(var E=0;E<o;E++){var F=e[E];if(F!=null){var P=e[E+1],k=e[E-1];if(E===0&&P!=null&&t<=(F.coordinate+P.coordinate)/2||E===o-1&&k!=null&&t>(F.coordinate+k.coordinate)/2||E>0&&E<o-1&&k!=null&&P!=null&&t>(F.coordinate+k.coordinate)/2&&t<=(F.coordinate+P.coordinate)/2)return F.index}}return-1},pJe=()=>Jr(_8),iM=(t,e)=>e,yce=(t,e,r)=>r,oM=(t,e,r,n)=>n,gJe=Gt(SA,t=>m4(t,e=>e.coordinate)),lM=Gt([v1,iM,yce,oM],oce),cM=Gt([lM,b1,eN,nN],eM),xJe=(t,e,r)=>{if(e!=null){var n=v1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},bce=Gt([v1,iM,yce,oM],cce),TI=Gt([bA,wA,ca,fo,SA,oM,bce,rN],lce),vJe=Gt([lM,TI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),wce=Gt([SA,cM],rce),yJe=Gt([bce,cM,CA,eN,wce,rN,iM],uce),bJe=Gt([lM,cM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),wJe=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&mJe(t,o)){var l=X$e(t,e),c=vce(l,s,a,r,n),u=hJe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},NJe=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=uqe(t,r);if(l){var c=Y$e(l,e),u=vce(c,o,s,n,a),d=AJe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},CJe=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?wJe(t,e,n,a,s,o,l):NJe(t,e,r,n,a,s,o)},_Je=Gt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),EJe=Gt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Fl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:cXe}});function Nq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nq(Object(r),!0).forEach(function(n){SJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SJe(t,e,r){return(e=IJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IJe(t){var e=jJe(t,"string");return typeof e=="symbol"?e:e+""}function jJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PJe={},BJe={zIndexMap:Object.values(Fl).reduce((t,e)=>Cq(Cq({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),PJe)},TJe=new Set(Object.values(Fl));function kJe(t){return TJe.has(t)}var Nce=Dc({name:"zIndex",initialState:BJe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:bs()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!kJe(r)&&delete t.zIndexMap[r])},prepare:bs()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:bs()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:bs()}}}),{registerZIndexPortal:FJe,unregisterZIndexPortal:OJe,registerZIndexPortalElement:DJe,unregisterZIndexPortalElement:RJe}=Nce.actions,MJe=Nce.reducer;function Zf(t){var{zIndex:e,children:r}=t,n=_Ge(),a=n&&e!==void 0&&e!==0,s=yu(),o=ss();v.useLayoutEffect(()=>a?(o(FJe({zIndex:e})),()=>{o(OJe({zIndex:e}))}):Lw,[o,e,a]);var l=Jr(c=>_Je(c,e,s));return a?l?du.createPortal(r,l):null:r}function qF(){return qF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qF.apply(null,arguments)}function _q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function x_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_q(Object(r),!0).forEach(function(n){LJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LJe(t,e,r){return(e=UJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UJe(t){var e=QJe(t,"string");return typeof e=="symbol"?e:e+""}function QJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VJe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function HJe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,A=n,h=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=CKe,g=Fl.cursorLine;else if(d==="BarChart")m=_Ke(l,f,s,o),p=poe,g=Fl.cursorRectangle;else if(l==="radial"&&Dse(f)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:j}=xoe(f);m={cx:x,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=yoe,g=Fl.cursorLine}else m={points:Aqe(l,f,s)},p=ZR,g=Fl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=x_(x_(x_(x_({stroke:"#ccc",pointerEvents:"none"},s),m),L2(c)),{},{payload:A,payloadIndex:h,className:Oa("recharts-tooltip-cursor",I)});return v.createElement(Zf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(VJe,{cursor:c,cursorComp:p,cursorProps:_}))}function $Je(t){var e=cJe(),r=NGe(),n=$w(),a=pJe();return e==null||r==null||n==null||a==null?null:v.createElement(HJe,qF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Cce=v.createContext(null),GJe=()=>v.useContext(Cce),_ce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,A),!0;case 5:return g.fn.call(g.context,d,f,A,h),!0;case 6:return g.fn.call(g.context,d,f,A,h,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,j;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,A);break;default:if(!y)for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(_ce);var KJe=_ce.exports;const qJe=dA(KJe);var Z2=new qJe,zF="recharts.syncEvent.tooltip",Eq="recharts.syncEvent.brush";function Ece(t,e){if(e){var r=Number.parseInt(e,10);if(!$f(r))return t==null?void 0:t[r]}}var zJe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Sce=Dc({name:"options",initialState:zJe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WJe=Sce.reducer,{createEventEmitter:XJe}=Sce.actions;function YJe(t){return t.tooltip.syncInteraction}var JJe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Ice=Dc({name:"chartData",initialState:JJe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:Sq,setDataStartEndIndexes:ZJe,setComputedData:iit}=Ice.actions,eZe=Ice.reducer,tZe=["x","y"];function Iq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(r),!0).forEach(function(n){rZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rZe(t,e,r){return(e=nZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nZe(t){var e=aZe(t,"string");return typeof e=="symbol"?e:e+""}function aZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sZe(t,e){if(t==null)return{};var r,n,a=iZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oZe(){var t=Jr(E8),e=Jr(S8),r=ss(),n=Jr(wle),a=Jr(SA),s=$w(),o=P4(),l=Jr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return Lw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,g=sZe(h,tZe),{x,y,width:b,height:w}=d.payload.sourceViewBox,j=fx(fx({},g),{},{x:o.x+(b?(m-x)/b:0)*o.width,y:o.y+(w?(p-y)/w:0)*o.height});r(fx(fx({},d),{},{payload:fx(fx({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,_);I=a[S]}else n==="value"&&(I=a.find(me=>String(me.value)===d.payload.label));var{coordinate:E}=d.payload;if(I==null||d.payload.active===!1||E==null||o==null){r(GF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:P}=E,k=Math.min(F,o.x+o.width),D=Math.min(P,o.y+o.height),Z={x:s==="horizontal"?I.coordinate:k,y:s==="horizontal"?D:I.coordinate},fe=GF({active:d.payload.active,coordinate:Z,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(fe)}}};return Z2.on(zF,c),()=>{Z2.off(zF,c)}},[l,r,e,t,n,a,s,o])}function lZe(){var t=Jr(E8),e=Jr(S8),r=ss();v.useEffect(()=>{if(t==null)return Lw;var n=(a,s,o)=>{e!==o&&t===a&&r(ZJe(s))};return Z2.on(Eq,n),()=>{Z2.off(Eq,n)}},[r,e,t])}function cZe(){var t=ss();v.useEffect(()=>{t(XJe())},[t]),oZe(),lZe()}function uZe(t,e,r,n,a,s){var o=Jr(h=>xJe(h,t,e)),l=Jr(S8),c=Jr(E8),u=Jr(wle),d=Jr(YJe),f=d==null?void 0:d.active,A=P4();v.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=GF({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});Z2.emit(zF,c,h,l)}},[f,r,o,a,n,l,c,u,s,A])}function jq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(r),!0).forEach(function(n){dZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dZe(t,e,r){return(e=fZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fZe(t){var e=hZe(t,"string");return typeof e=="symbol"?e:e+""}function hZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AZe(t){return t.dataKey}function mZe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(nKe,e)}var Bq=[],pZe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tq(t){var e,r,n=dl(t,pZe),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=ss(),S=typeof w=="number"?String(w):w;v.useEffect(()=>{_(hYe({shared:y,trigger:b,axisId:I,active:a,defaultIndex:S}))},[_,y,b,I,a,S]);var E=P4(),F=doe(),P=oYe(y),{activeIndex:k,isActive:D}=(e=Jr(J=>bJe(J,P,b,S)))!==null&&e!==void 0?e:{},Z=Jr(J=>yJe(J,P,b,S)),fe=Jr(J=>wce(J,P,b,S)),me=Jr(J=>vJe(J,P,b,S)),pe=Z,ye=GJe(),ae=(r=a??D)!==null&&r!==void 0?r:!1,[je,Be]=fie([pe,ae]),O=P==="axis"?fe:void 0;uZe(P,b,me,O,k,ae);var G=j??ye;if(G==null||E==null||P==null)return null;var z=pe??Bq;ae||(z=Bq),u&&z.length&&(z=eie(z.filter(J=>J.value!=null&&(J.hide!==!0||n.includeHidden)),A,AZe));var L=z.length>0,Y=v.createElement(uKe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:ae,coordinate:me,hasPayload:L,offset:f,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:je,innerRef:Be,hasPortalFromProps:!!j},mZe(c,Pq(Pq({},n),{},{payload:z,label:O,active:ae,activeIndex:k,coordinate:me,accessibilityLayer:F})));return v.createElement(v.Fragment,null,du.createPortal(Y,G),ae&&v.createElement($Je,{cursor:x,tooltipEventType:P,coordinate:me,payload:z,index:k}))}var sN=t=>null;sN.displayName="Cell";function gZe(t,e,r){return(e=xZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xZe(t){var e=vZe(t,"string");return typeof e=="symbol"?e:e+""}function vZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class yZe{constructor(e){gZe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function kq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kq(Object(r),!0).forEach(function(n){wZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wZe(t,e,r){return(e=NZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NZe(t){var e=CZe(t,"string");return typeof e=="symbol"?e:e+""}function CZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Ze={cacheSize:2e3,enableCache:!0},jce=bZe({},_Ze),Fq=new yZe(jce.cacheSize),EZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Oq="recharts_measurement_span";function SZe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Dq=(t,e)=>{try{var r=document.getElementById(Oq);r||(r=document.createElement("span"),r.setAttribute("id",Oq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,EZe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},kb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||O4.isSsr)return{width:0,height:0};if(!jce.enableCache)return Dq(e,r);var n=SZe(e,r),a=Fq.get(n);if(a)return a;var s=Dq(e,r);return Fq.set(n,s),s},Pce;function IZe(t,e,r){return(e=jZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jZe(t){var e=PZe(t,"string");return typeof e=="symbol"?e:e+""}function PZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,TZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kZe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FZe=["cm","mm","pt","pc","in","Q","px"];function OZe(t){return FZe.includes(t)}var Gx="NaN";function DZe(t,e){return t*kZe[e]}class Zo{static parse(e){var r,[,n,a]=(r=TZe.exec(e))!==null&&r!==void 0?r:[];return n==null?Zo.NaN:new Zo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,$f(e)&&(this.unit=""),r!==""&&!BZe.test(r)&&(this.num=NaN,this.unit=""),OZe(r)&&(this.num=DZe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Zo(NaN,""):new Zo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Zo(NaN,""):new Zo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Zo(NaN,""):new Zo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Zo(NaN,""):new Zo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $f(this.num)}}Pce=Zo;IZe(Zo,"NaN",new Pce(NaN,""));function Bce(t){if(t==null||t.includes(Gx))return Gx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=Rq.exec(e))!==null&&r!==void 0?r:[],o=Zo.parse(n??""),l=Zo.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Gx;e=e.replace(Rq,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=Mq.exec(e))!==null&&u!==void 0?u:[],h=Zo.parse(d??""),m=Zo.parse(A??""),p=f==="+"?h.add(m):h.subtract(m);if(p.isNaN())return Gx;e=e.replace(Mq,p.toString())}return e}var Lq=/\(([^()]*)\)/;function RZe(t){for(var e=t,r;(r=Lq.exec(e))!=null;){var[,n]=r;e=e.replace(Lq,Bce(n))}return e}function MZe(t){var e=t.replace(/\s+/g,"");return e=RZe(e),e=Bce(e),e}function LZe(t){try{return MZe(t)}catch{return Gx}}function fB(t){var e=LZe(t.slice(5,-1));return e===Gx?"":e}var UZe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QZe=["dx","dy","angle","className","breakAll"];function WF(){return WF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WF.apply(null,arguments)}function Uq(t,e){if(t==null)return{};var r,n,a=VZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function VZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Tce=/[ \f\n\r\t\v\u2028\u2029]+/,kce=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Ro(e)||(r?a=e.toString().split(""):a=e.toString().split(Tce));var s=a.map(l=>({word:l,width:kb(l,n).width})),o=r?0:kb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function HZe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Fce=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),Oce=t=>t.reduce((e,r)=>e.width>r.width?e:r),$Ze="",Qq=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=kce({breakAll:r,style:n,children:c+$Ze});if(!u)return[!1,[]];var d=Fce(u.wordsWithComputedWidth,s,o,l),f=d.length>a||Oce(d).width>Number(s);return[f,d]},GZe=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=nn(s),d=String(o),f=Fce(e,n,r,a);if(!u||a)return f;var A=f.length>s||Oce(f).width>Number(n);if(!A)return f;for(var h=0,m=d.length-1,p=0,g;h<=m&&p<=d.length-1;){var x=Math.floor((h+m)/2),y=x-1,[b,w]=Qq(d,y,c,l,s,n,r,a),[j]=Qq(d,x,c,l,s,n,r,a);if(!b&&!j&&(h=x+1),b&&j&&(m=x-1),!b&&j){g=w;break}p++}return g||f},Vq=t=>{var e=Ro(t)?[]:t.toString().split(Tce);return[{words:e,width:void 0}]},KZe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!O4.isSsr){var l,c,u=kce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Vq(n);return GZe({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return Vq(n)},Dce="#808080",qZe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Dce,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},tP=v.forwardRef((t,e)=>{var r=dl(t,qZe),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Uq(r,UZe),A=v.useMemo(()=>KZe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:m,angle:p,className:g,breakAll:x}=f,y=Uq(f,QZe);if(!Gf(n)||!Gf(a)||A.length===0)return null;var b=Number(n)+(nn(h)?h:0),w=Number(a)+(nn(m)?m:0);if(!Ws(b)||!Ws(w))return null;var j;switch(d){case"start":j=fB("calc(".concat(o,")"));break;case"middle":j=fB("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=fB("calc(".concat(A.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=A[0].width,{width:S}=f;I.push("scale(".concat(nn(S)&&nn(_)?S/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),v.createElement("text",WF({},dd(y),{ref:e,x:b,y:w,className:Oa("recharts-text",g),textAnchor:u,fill:l.includes("url")?Dce:l}),A.map((E,F)=>{var P=E.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:F===0?j:s,key:"".concat(P,"-").concat(F)},P)}))});tP.displayName="Text";var zZe=["labelRef"],WZe=["content"];function Hq(t,e){if(t==null)return{};var r,n,a=XZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function XZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function $q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$q(Object(r),!0).forEach(function(n){YZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YZe(t,e,r){return(e=JZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JZe(t){var e=ZZe(t,"string");return typeof e=="symbol"?e:e+""}function ZZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_h.apply(null,arguments)}var Rce=v.createContext(null),eet=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return v.createElement(Rce.Provider,{value:c},l)},Mce=()=>{var t=v.useContext(Rce),e=P4();return t||Jie(e)},tet=v.createContext(null),ret=()=>{var t=v.useContext(tet),e=Jr(Sle);return t||e},net=t=>{var{value:e,formatter:r}=t,n=Ro(t.children)?e:t.children;return typeof r=="function"?r(n):n},uM=t=>t!=null&&typeof t=="function",aet=(t,e)=>{var r=ll(e-t),n=Math.min(Math.abs(e-t),360);return r*n},set=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:h}=a,m=(u+d)/2,p=aet(f,A),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=f+g*s,y=h;break;case"insideEnd":x=A-g*s,y=!h;break;case"end":x=A+g*s,y=h;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=Mi(l,c,m,x),w=Mi(l,c,m,x+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=Ro(t.id)?U2("recharts-radial-line-"):t.id;return v.createElement("text",_h({},n,{dominantBaseline:"central",className:Oa("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:I,d:j})),v.createElement("textPath",{xlinkHref:"#".concat(I)},r))},iet=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=Mi(n,a,o+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:h,y:m}=Mi(n,a,A,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},XF=t=>"cx"in t&&nn(t.cx),oet=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!XF(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=o,A=o+(c-u)/2,h=(f+A)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var S={x:f+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return gi(gi({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:A+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return gi(gi({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var F={x:h-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return gi(gi({},F),s?{width:Math.max(F.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:h+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return gi(gi({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var k=s?{width:m,height:d}:{};return a==="insideLeft"?gi({x:h+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},k):a==="insideRight"?gi({x:h+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},k):a==="insideTop"?gi({x:f+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},k):a==="insideBottom"?gi({x:A+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},k):a==="insideTopLeft"?gi({x:f+j,y:l+x,textAnchor:_,verticalAnchor:b},k):a==="insideTopRight"?gi({x:f+c-j,y:l+x,textAnchor:I,verticalAnchor:b},k):a==="insideBottomLeft"?gi({x:A+j,y:l+d-x,textAnchor:_,verticalAnchor:y},k):a==="insideBottomRight"?gi({x:A+u-j,y:l+d-x,textAnchor:I,verticalAnchor:y},k):a&&typeof a=="object"&&(nn(a.x)||aA(a.x))&&(nn(a.y)||aA(a.y))?gi({x:o+Dl(a.x,m),y:l+Dl(a.y,d),textAnchor:"end",verticalAnchor:"end"},k):gi({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},cet={angle:0,offset:5,zIndex:Fl.label,position:"middle",textBreakAll:!1};function h0(t){var e=dl(t,cet),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=ret(),f=Mce(),A=n==="center"?f:d??f,h,m,p;if(r==null?h=A:XF(r)?h=r:h=Jie(r),!h||Ro(a)&&Ro(s)&&!v.isValidElement(o)&&typeof o!="function")return null;var g=gi(gi({},e),{},{viewBox:h});if(v.isValidElement(o)){var{labelRef:x}=g,y=Hq(g,zZe);return v.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=g,w=Hq(g,WZe);if(m=v.createElement(o,w),v.isValidElement(m))return m}else m=net(e);var j=dd(e);if(XF(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return set(e,n,m,j,h);p=iet(h,e.offset,e.position)}else p=oet(e,h);return v.createElement(Zf,{zIndex:e.zIndex},v.createElement(tP,_h({ref:u,className:Oa("recharts-label",l)},j,p,{textAnchor:HZe(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}h0.displayName="Label";var uet=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(h0,_h({key:"label-implicit"},n)):Gf(t)?v.createElement(h0,_h({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===h0?v.cloneElement(t,gi({key:"label-implicit"},n)):v.createElement(h0,_h({key:"label-implicit",content:t},n)):uM(t)?v.createElement(h0,_h({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(h0,_h({},t,{key:"label-implicit"},n)):null};function det(t){var{label:e,labelRef:r}=t,n=Mce();return uet(e,n,r)||null}var Lce={},Uce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Uce);var Qce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Qce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uce,r=Qce,n=h4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Lce);var fet=Lce.last;const het=dA(fet);var Aet=["valueAccessor"],met=["dataKey","clockWise","id","textBreakAll","zIndex"];function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kI.apply(null,arguments)}function Gq(t,e){if(t==null)return{};var r,n,a=pet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var get=t=>Array.isArray(t.value)?het(t.value):t.value,Vce=v.createContext(void 0),xet=Vce.Provider,Hce=v.createContext(void 0),vet=Hce.Provider;function yet(){return v.useContext(Vce)}function bet(){return v.useContext(Hce)}function AE(t){var{valueAccessor:e=get}=t,r=Gq(t,Aet),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=Gq(r,met),u=yet(),d=bet(),f=u||d;return!f||!f.length?null:v.createElement(Zf,{zIndex:l??Fl.label},v.createElement(oc,{className:"recharts-label-list"},f.map((A,h)=>{var m,p=Ro(n)?e(A,h):As(A&&A.payload,n),g=Ro(s)?{}:{id:"".concat(s,"-").concat(h)};return v.createElement(h0,kI({key:"label-".concat(h)},dd(A),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:A.fill,parentViewBox:A.parentViewBox,value:p,textBreakAll:o,viewBox:A.viewBox,index:h,zIndex:0}))})))}AE.displayName="LabelList";function $ce(t){var{label:e}=t;return e?e===!0?v.createElement(AE,{key:"labelList-implicit"}):v.isValidElement(e)||uM(e)?v.createElement(AE,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(AE,kI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Gce=t=>t.graphicalItems.polarItems,wet=Gt([Bs,Yw],k8),rP=Gt([Gce,Xs,wet],O8),Net=Gt([rP],D8),nP=Gt([Net,$4],R8),Cet=Gt([nP,Xs,rP],L8);Gt([nP,Xs,rP],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=As(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:As(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var Kq=()=>{},_et=Gt([nP,Xs,rP,Y4,Bs],H8),Eet=Gt([Xs,Q8,V8,Kq,_et,Kq,ca,Bs],$8),Kce=Gt([Xs,ca,nP,Cet,Xw,Bs,Eet],G8),Iet=Gt([Kce,Xs,x1],z8);Gt([Xs,Kce,Iet,Bs],X8);var jet={radiusAxis:{},angleAxis:{}},qce=Dc({name:"polarAxis",initialState:jet,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:oit,removeRadiusAxis:lit,addAngleAxis:cit,removeAngleAxis:uit}=qce.actions,Pet=qce.reducer;function qq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qq(Object(r),!0).forEach(function(n){Bet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bet(t,e,r){return(e=Tet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tet(t){var e=ket(t,"string");return typeof e=="symbol"?e:e+""}function ket(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fet=(t,e)=>e,dM=Gt([Gce,Fet],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Oet=[],fM=(t,e,r)=>(r==null?void 0:r.length)===0?Oet:r,zce=Gt([$4,dM,fM],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>zq(zq({},e.presentationProps),s.props))),a!=null)return a}}),Det=Gt([zce,dM,fM],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=As(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:_4(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),Ret=Gt([zce,dM,fM,fo],(t,e,r,n)=>{if(!(e==null||t==null))return Ltt({offset:n,pieSettings:e,displayedData:t,cells:r})}),Wce={exports:{}},Xa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hM=Symbol.for("react.transitional.element"),AM=Symbol.for("react.portal"),aP=Symbol.for("react.fragment"),sP=Symbol.for("react.strict_mode"),iP=Symbol.for("react.profiler"),oP=Symbol.for("react.consumer"),lP=Symbol.for("react.context"),cP=Symbol.for("react.forward_ref"),uP=Symbol.for("react.suspense"),dP=Symbol.for("react.suspense_list"),fP=Symbol.for("react.memo"),hP=Symbol.for("react.lazy"),Met=Symbol.for("react.view_transition"),Let=Symbol.for("react.client.reference");function xd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hM:switch(t=t.type,t){case aP:case iP:case sP:case uP:case dP:case Met:return t;default:switch(t=t&&t.$$typeof,t){case lP:case cP:case hP:case fP:return t;case oP:return t;default:return e}}case AM:return e}}}Xa.ContextConsumer=oP;Xa.ContextProvider=lP;Xa.Element=hM;Xa.ForwardRef=cP;Xa.Fragment=aP;Xa.Lazy=hP;Xa.Memo=fP;Xa.Portal=AM;Xa.Profiler=iP;Xa.StrictMode=sP;Xa.Suspense=uP;Xa.SuspenseList=dP;Xa.isContextConsumer=function(t){return xd(t)===oP};Xa.isContextProvider=function(t){return xd(t)===lP};Xa.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hM};Xa.isForwardRef=function(t){return xd(t)===cP};Xa.isFragment=function(t){return xd(t)===aP};Xa.isLazy=function(t){return xd(t)===hP};Xa.isMemo=function(t){return xd(t)===fP};Xa.isPortal=function(t){return xd(t)===AM};Xa.isProfiler=function(t){return xd(t)===iP};Xa.isStrictMode=function(t){return xd(t)===sP};Xa.isSuspense=function(t){return xd(t)===uP};Xa.isSuspenseList=function(t){return xd(t)===dP};Xa.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===aP||t===iP||t===sP||t===uP||t===dP||typeof t=="object"&&t!==null&&(t.$$typeof===hP||t.$$typeof===fP||t.$$typeof===lP||t.$$typeof===oP||t.$$typeof===cP||t.$$typeof===Let||t.getModuleId!==void 0)};Xa.typeOf=xd;Wce.exports=Xa;var Uet=Wce.exports,Wq=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",Xq=null,hB=null,Xce=t=>{if(t===Xq&&Array.isArray(hB))return hB;var e=[];return v.Children.forEach(t,r=>{Ro(r)||(Uet.isFragment(r)?e=e.concat(Xce(r.props.children)):e.push(r))}),hB=e,Xq=t,e};function mM(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>Wq(a)):n=[Wq(e)],Xce(t).forEach(a=>{var s=sg(a,"type.displayName")||sg(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var Yce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(Yce);var Qet=Yce.isPlainObject;const Vet=dA(Qet);var Yq,Jq,Zq,ez,tz;function rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(r),!0).forEach(function(n){Het(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Het(t,e,r){return(e=$et(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $et(t){var e=Get(t,"string");return typeof e=="symbol"?e:e+""}function Get(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FI.apply(null,arguments)}function wy(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var az=(t,e,r,n,a)=>{var s=r-n,o;return o=ni(Yq||(Yq=wy(["M ",",",""])),t,e),o+=ni(Jq||(Jq=wy(["L ",",",""])),t+r,e),o+=ni(Zq||(Zq=wy(["L ",",",""])),t+r-s/2,e+a),o+=ni(ez||(ez=wy(["L ",",",""])),t+r-s/2-n,e+a),o+=ni(tz||(tz=wy(["L ",","," Z"])),t,e),o},Ket={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qet=t=>{var e=dl(t,Ket),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=v.useRef(null),[h,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(o),y=v.useRef(r),b=v.useRef(n),w=R4(t,"trapezoid-");if(v.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var Z=A.current.getTotalLength();Z&&m(Z)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var j=Oa("recharts-trapezoid",l);if(!f)return v.createElement("g",null,v.createElement("path",FI({},dd(e),{className:j,d:az(r,n,a,s,o)})));var I=p.current,_=g.current,S=x.current,E=y.current,F=b.current,P="0px ".concat(h===-1?1:h,"px"),k="".concat(h,"px 0px"),D=foe(["strokeDasharray"],u,c);return v.createElement(D4,{animationId:w,key:w,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},Z=>{var fe=eo(I,a,Z),me=eo(_,s,Z),pe=eo(S,o,Z),ye=eo(E,r,Z),ae=eo(F,n,Z);A.current&&(p.current=fe,g.current=me,x.current=pe,y.current=ye,b.current=ae);var je=Z>0?{transition:D,strokeDasharray:k}:{strokeDasharray:P};return v.createElement("path",FI({},dd(e),{className:j,d:az(ye,ae,fe,me,pe),ref:A,style:nz(nz({},je),e.style)}))})},zet=["option","shapeType","activeClassName"];function Wet(t,e){if(t==null)return{};var r,n,a=Xet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Xet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){Yet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yet(t,e,r){return(e=Jet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jet(t){var e=Zet(t,"string");return typeof e=="symbol"?e:e+""}function Zet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ett(t,e){return OI(OI({},e),t)}function ttt(t,e){return t==="symbols"}function iz(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(poe,r);case"trapezoid":return v.createElement(qet,r);case"sector":return v.createElement(yoe,r);case"symbols":if(ttt(e))return v.createElement(PR,r);break;case"curve":return v.createElement(ZR,r);default:return null}}function rtt(t){return v.isValidElement(t)?t.props:t}function Jce(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=Wet(t,zet),s;if(v.isValidElement(e))s=v.cloneElement(e,OI(OI({},a),rtt(e)));else if(typeof e=="function")s=e(a,a.index);else if(Vet(e)&&typeof e!="boolean"){var o=ett(e,a);s=v.createElement(iz,{shapeType:r,elementProps:o})}else{var l=a;s=v.createElement(iz,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(oc,{className:n},s):s}var pM=(t,e,r)=>{var n=ss();return(a,s)=>o=>{t==null||t(a,s,o),n(ace({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},gM=t=>{var e=ss();return(r,n)=>a=>{t==null||t(r,n,a),e(AYe())}},xM=(t,e,r)=>{var n=ss();return(a,s)=>o=>{t==null||t(a,s,o),n(mYe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Zce(t){var{tooltipEntrySettings:e}=t,r=ss(),n=yu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(uYe(e)):a.current!==e&&r(dYe({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(fYe(a.current)),a.current=null)},[r]),null}function ntt(t){var{legendPayload:e}=t,r=ss(),n=yu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(loe(e)):a.current!==e&&r(coe({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(uoe(a.current)),a.current=null)},[r]),null}function att(t){var{legendPayload:e}=t,r=ss(),n=Jr(ca),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(loe(e)):a.current!==e&&r(coe({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(uoe(a.current)),a.current=null)},[r]),null}var AB,stt=()=>{var[t]=v.useState(()=>U2("uid-"));return t},itt=(AB=Rde.useId)!==null&&AB!==void 0?AB:stt;function ott(t,e){var r=itt();return e||(t?"".concat(t,"-").concat(r):r)}var ltt=v.createContext(void 0),eue=t=>{var{id:e,type:r,children:n}=t,a=ott("recharts-".concat(r),e);return v.createElement(ltt.Provider,{value:a},n(a))},ctt={cartesianItems:[],polarItems:[]},tue=Dc({name:"graphicalItems",initialState:ctt,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:bs()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Jd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:bs()},removeCartesianGraphicalItem:{reducer(t,e){var r=Jd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:bs()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:bs()},removePolarGraphicalItem:{reducer(t,e){var r=Jd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:bs()}}}),{addCartesianGraphicalItem:utt,replaceCartesianGraphicalItem:dtt,removeCartesianGraphicalItem:ftt,addPolarGraphicalItem:htt,removePolarGraphicalItem:Att}=tue.actions,mtt=tue.reducer,ptt=t=>{var e=ss(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(utt(t)):r.current!==t&&e(dtt({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(ftt(r.current)),r.current=null)},[e]),null},gtt=v.memo(ptt);function xtt(t){var e=ss();return v.useLayoutEffect(()=>(e(htt(t)),()=>{e(Att(t))}),[e,t]),null}var vtt=["key"],ytt=["onMouseEnter","onClick","onMouseLeave"],btt=["id"],wtt=["id"];function oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ii(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oz(Object(r),!0).forEach(function(n){Ntt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ntt(t,e,r){return(e=Ctt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ctt(t){var e=_tt(t,"string");return typeof e=="symbol"?e:e+""}function _tt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mm.apply(null,arguments)}function AP(t,e){if(t==null)return{};var r,n,a=Ett(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ett(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Stt(t){var e=v.useMemo(()=>mM(t.children,sN),[t.children]),r=Jr(n=>Det(n,t.id,e));return r==null?null:v.createElement(att,{legendPayload:r})}var Itt=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),positions:n.map(A=>A.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:_4(l,e),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return v.createElement(Zce,{tooltipEntrySettings:f})}),jtt=(t,e)=>t>e?"start":t<e?"end":"middle",Ptt=(t,e,r)=>Dl(typeof e=="function"?e(t):e,r,r*.8),Btt=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=goe(s,o),c=a+Dl(t.cx,s,s/2),u=n+Dl(t.cy,o,o/2),d=Dl(t.innerRadius,l,0),f=Ptt(r,t.outerRadius,l),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},Ttt=(t,e)=>{var r=ll(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function ktt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Ftt=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Oa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=AP(e,vtt);return v.createElement(ZR,mm({},a,{type:"linear",className:r}))},Ott=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=Oa("recharts-pie-label-text",ktt(t));return v.createElement(tP,mm({},e,{alignmentBaseline:"middle",className:a}),n)};function Dtt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=Hf(r),c=L2(a),u=L2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((A,h)=>{var m=(A.startAngle+A.endAngle)/2,p=Mi(A.cx,A.cy,A.outerRadius+d,m),g=ii(ii(ii(ii({},l),A),{},{stroke:"none"},c),{},{index:h,textAnchor:jtt(p.x,A.cx)},p),x=ii(ii(ii(ii({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:h,points:[Mi(A.cx,A.cy,A.outerRadius,m),p],key:"line"});return v.createElement(Zf,{zIndex:Fl.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(h)},v.createElement(oc,null,s&&Ftt(s,x),Ott(a,g,As(A,o))))});return v.createElement(oc,{className:"recharts-pie-labels"},f)}function Rtt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement($ce,{label:a}):v.createElement(Dtt,{sectors:e,props:r,showLabels:n})}function Mtt(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=Jr(ug),c=Jr(sM),u=Jr(eJe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=a,h=AP(a,ytt),m=pM(d,a.dataKey,o),p=gM(A),g=xM(f,a.dataKey,o);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===o,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=ii(ii({},x),{},{stroke:x.stroke,tabIndex:-1,[$ie]:y,[Gie]:o});return v.createElement(oc,mm({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Uw(h,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(Jce,mm({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function Ltt(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),h=Ttt(l,c),m=Math.abs(h),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(I=>As(I,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*A-x,b=n.reduce((I,_)=>{var S=As(_,u,0);return I+(nn(S)?S:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var S=As(I,u,0),E=As(I,d,_),F=Btt(r,s,I),P=(nn(S)?S:0)/b,k,D=ii(ii({},I),a&&a[_]&&a[_].props);_?k=j.endAngle+ll(h)*p*(S!==0?1:0):k=l;var Z=k+ll(h)*((S!==0?A:0)+P*y),fe=(k+Z)/2,me=(F.innerRadius+F.outerRadius)/2,pe=[{name:E,value:S,payload:D,dataKey:u,type:f,graphicalItemId:r.id}],ye=Mi(F.cx,F.cy,me,fe);return j=ii(ii(ii(ii({},r.presentationProps),{},{percent:P,cornerRadius:typeof o=="string"?parseFloat(o):o,name:E,tooltipPayload:pe,midAngle:fe,middleRadius:me,tooltipPosition:ye},D),F),{},{value:S,dataKey:u,startAngle:k,endAngle:Z,payload:D,paddingAngle:ll(h)*p}),j})}return w}function Utt(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(vet,{value:e?a:void 0},n)}function Qtt(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,h=R4(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof A=="function"&&A(),g(!1)},[A]),y=v.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return v.createElement(Utt,{showLabels:!p,sectors:a},v.createElement(D4,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:h},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,S)=>{var E=m&&m[S],F=S>0?sg(_,"paddingAngle",0):0;if(E){var P=eo(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),k=ii(ii({},_),{},{startAngle:I+F,endAngle:I+P+F});w.push(k),I=k.endAngle}else{var{endAngle:D,startAngle:Z}=_,fe=eo(0,D-Z,b),me=ii(ii({},_),{},{startAngle:I+F,endAngle:I+fe+F});w.push(me),I=me.endAngle}}),r.current=w,v.createElement(oc,null,v.createElement(Mtt,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(Rtt,{showLabels:!p,sectors:a,props:e}),e.children)}var Vtt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Fl.area};function Htt(t){var{id:e}=t,r=AP(t,btt),{hide:n,className:a,rootTabIndex:s}=t,o=v.useMemo(()=>mM(t.children,sN),[t.children]),l=Jr(d=>Ret(d,e,o)),c=v.useRef(null),u=Oa("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(oc,{tabIndex:s,className:u})):v.createElement(Zf,{zIndex:t.zIndex},v.createElement(Itt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(oc,{tabIndex:s,className:u},v.createElement(Qtt,{props:ii(ii({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function rue(t){var e=dl(t,Vtt),{id:r}=e,n=AP(e,wtt),a=Hf(n);return v.createElement(eue,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(xtt,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(Stt,mm({},n,{id:s})),v.createElement(Htt,mm({},n,{id:s}))))}rue.displayName="Pie";function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){$tt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $tt(t,e,r){return(e=Gtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gtt(t){var e=Ktt(t,"string");return typeof e=="symbol"?e:e+""}function Ktt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nue=0,qtt={xAxis:{},yAxis:{},zAxis:{}},aue=Dc({name:"cartesianAxis",initialState:qtt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:bs()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:bs()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:bs()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:bs()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:bs()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:bs()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:bs()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:bs()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:bs()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=cz(cz({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:ztt,replaceXAxis:Wtt,removeXAxis:Xtt,addYAxis:Ytt,replaceYAxis:Jtt,removeYAxis:Ztt,addZAxis:dit,replaceZAxis:fit,removeZAxis:hit,updateYAxisWidth:ert}=aue.actions,trt=aue.reducer,rrt=Gt([fo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),nrt=Gt([rrt,bA,wA],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),sue=()=>Jr(nrt),uz=(t,e,r)=>{var n=r??t;if(!Ro(n))return Dl(n,e,0)},art=(t,e,r)=>{var n={},a=t.filter(q4),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(m=>m.dataKey),h=uz(e,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=uz(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(r),!0).forEach(function(n){srt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function srt(t,e,r){return(e=irt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function irt(t){var e=ort(t,"string");return typeof e=="symbol"?e:e+""}function ort(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lrt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=Dl(t,r,0,!0),l,c=[];if(Ws(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((x,y)=>x+(y.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,h={offset:A-o,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...x,w];return h=j[j.length-1].position,j},c)}else{var m=Dl(e,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var g=Ws(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-g)/2,size:g}}],c)}return l}}var crt=(t,e,r,n,a,s,o)=>{var l=Ro(o)?e:o,c=lrt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>v_(v_({},u),{},{position:v_(v_({},u.position),{},{offset:u.position.offset-a/2})}))),c},urt=(t,e)=>{var r=B8(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function drt(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Ws(t.zIndex)?t.zIndex:e}var iue=t=>{var{chartData:e}=t,r=ss(),n=yu();return v.useEffect(()=>n?()=>{}:(r(Sq(e)),()=>{r(Sq(void 0))}),[e,r,n]),null},fz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},oue=Dc({name:"brush",initialState:fz,reducers:{setBrushSettings(t,e){return e.payload==null?fz:e.payload}}}),{setBrushSettings:Ait}=oue.actions,frt=oue.reducer;function hrt(t,e,r){return(e=Art(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Art(t){var e=mrt(t,"string");return typeof e=="symbol"?e:e+""}function mrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class vM{static create(e){return new vM(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}hrt(vM,"EPS",1e-4);function prt(t){return(t%180+180)%180}var grt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=prt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},xrt={dots:[],areas:[],lines:[]},lue=Dc({name:"referenceElements",initialState:xrt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Jd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Jd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Jd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:mit,removeDot:pit,addArea:git,removeArea:xit,addLine:vit,removeLine:yit}=lue.actions,vrt=lue.reducer,yrt=v.createContext(void 0),brt=t=>{var{children:e}=t,[r]=v.useState("".concat(U2("recharts"),"-clip")),n=sue();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return v.createElement(yrt.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function cue(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function wrt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return grt(n,r)}function Nrt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function ew(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Crt(t,e){return cue(t,e+1)}function _rt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:cue(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||ew(t,y,x,d,l);b||(c=0,d=o,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function Ert(t,e,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=e,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,A=!0,h=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||ew(t,I,j,f,c);if(!_)return A=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<o&&!h();m+=u);if(A){for(var p=[],g=d;g<o;g+=u)p.push(n[g]);return p}}return[]}function hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(r),!0).forEach(function(n){Srt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Srt(t,e,r){return(e=Irt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Irt(t){var e=jrt(t,"string");return typeof e=="symbol"?e:e+""}function jrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Prt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(A){var h=s[A],m,p=()=>(m===void 0&&(m=r(h,A)),m);if(A===o-1){var g=t*(h.coordinate+t*p()/2-c);s[A]=h=Sl(Sl({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else s[A]=h=Sl(Sl({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var x=ew(t,h.tickCoord,p,l,c);x&&(c=h.tickCoord-t*(p()/2+a),s[A]=Sl(Sl({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function Brt(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);if(o[l-1]=d=Sl(Sl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var h=ew(t,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=Sl(Sl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);o[y]=b=Sl(Sl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else o[y]=b=Sl(Sl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=ew(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),o[y]=Sl(Sl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return o}function Trt(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(nn(c)||O4.isSsr){var A;return(A=Crt(a,nn(c)?c:0))!==null&&A!==void 0?A:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?kb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?wrt(kb(j,{fontSize:e,letterSpacing:r}),p,f):kb(j,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?ll(a[1].coordinate-a[0].coordinate):1,y=Nrt(s,x,m);return c==="equidistantPreserveStart"?_rt(x,y,g,a,o):c==="equidistantPreserveEnd"?Ert(x,y,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Brt(x,y,g,a,o,c==="preserveStartEnd"):h=Prt(x,y,g,a,o),h.filter(b=>b.isShow))}var krt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Frt=["axisLine","width","height","className","hide","ticks","axisType"];function Ort(t,e){if(t==null)return{};var r,n,a=Drt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Drt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function dg(){return dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dg.apply(null,arguments)}function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ki(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){Rrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rrt(t,e,r){return(e=Mrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mrt(t){var e=Lrt(t,"string");return typeof e=="symbol"?e:e+""}function Lrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Fl.axis};function Urt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=ki(ki(ki({},c),Hf(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=ki(ki({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=ki(ki({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return v.createElement("line",dg({},u,{className:Oa("recharts-cartesian-axis-line",sg(l,"className"))}))}function Qrt(t,e,r,n,a,s,o,l,c){var u,d,f,A,h,m,p=l?-1:1,g=t.tickSize||o,x=nn(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,A=r+ +!l*a,f=A-p*g,m=f-p*c,h=x;break;case"left":f=A=t.coordinate,d=e+ +!l*n,u=d-p*g,h=u-p*c,m=x;break;case"right":f=A=t.coordinate,d=e+ +l*n,u=d+p*g,h=u+p*c,m=x;break;default:u=d=t.coordinate,A=r+ +l*a,f=A+p*g,m=f+p*c,h=x;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:h,y:m}}}function Vrt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Hrt(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function $rt(t){var{option:e,tickProps:r,value:n}=t,a,s=Oa(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,ki(ki({},r),{},{className:s}));else if(typeof e=="function")a=e(ki(ki({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Oa(o,e==null?void 0:e.className)),a=v.createElement(tP,dg({},r,{className:o}),n)}return a}var Grt=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:h,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=Trt(ki(ki({},w),{},{ticks:r}),y,b),S=Vrt(d,f),E=Hrt(d,f),F=Hf(w),P=L2(n),k={};typeof a=="object"&&(k=a);var D=ki(ki({},F),{},{fill:"none"},k),Z=_.map(pe=>ki({entry:pe},Qrt(pe,A,h,m,p,d,g,f,x))),fe=Z.map(pe=>{var{entry:ye,line:ae}=pe;return v.createElement(oc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ye.value,"-").concat(ye.coordinate,"-").concat(ye.tickCoord)},a&&v.createElement("line",dg({},D,ae,{className:Oa("recharts-cartesian-axis-tick-line",sg(a,"className"))})))}),me=Z.map((pe,ye)=>{var{entry:ae,tick:je}=pe,Be=ki(ki(ki(ki({textAnchor:S,verticalAnchor:E},F),{},{stroke:"none",fill:s},P),je),{},{index:ye,payload:ae,visibleTicksCount:_.length,tickFormatter:o,padding:c},u);return v.createElement(oc,dg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},Uw(j,ae,ye)),n&&v.createElement($rt,{option:n,tickProps:Be,value:"".concat(typeof o=="function"?o(ae.value,ye):ae.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},me.length>0&&v.createElement(Zf,{zIndex:Fl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},me)),fe.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},fe))}),Krt=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Ort(t,Frt),[d,f]=v.useState(""),[A,h]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return krt({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==A)&&(f(w),h(j))}}},[d,A]);return o||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(Zf,{zIndex:t.zIndex},v.createElement(oc,{className:Oa("recharts-cartesian-axis",s)},v.createElement(Urt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Hf(t)}),v.createElement(Grt,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(eet,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(det,{label:t.label,labelRef:t.labelRef}),t.children)))}),yM=v.forwardRef((t,e)=>{var r=dl(t,Fp);return v.createElement(Krt,dg({},r,{ref:e}))});yM.displayName="CartesianAxis";var qrt={},uue=Dc({name:"errorBars",initialState:qrt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:bit,replaceErrorBar:wit,removeErrorBar:Nit}=uue.actions,zrt=uue.reducer,Wrt=["children"];function Xrt(t,e){if(t==null)return{};var r,n,a=Yrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Yrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Jrt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Zrt=v.createContext(Jrt);function ent(t){var{children:e}=t,r=Xrt(t,Wrt);return v.createElement(Zrt.Provider,{value:r},e)}function due(t,e){var r,n,a=Jr(u=>_A(u,t)),s=Jr(u=>EA(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:wo.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:No.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function tnt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=sue(),{needClipX:s,needClipY:o,needClip:l}=due(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var rnt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN=v;function nnt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ant=typeof Object.is=="function"?Object.is:nnt,snt=iN.useSyncExternalStore,int=iN.useRef,ont=iN.useEffect,lnt=iN.useMemo,cnt=iN.useDebugValue;rnt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=int(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=lnt(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,ant(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=snt(t,s[0],s[1]);return ont(function(){o.hasValue=!0,o.value=l},[l]),cnt(l),l};function unt(t){t()}function dnt(){let t=null,e=null;return{clear(){t=null,e=null},notify(){unt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var mz={notify(){},get:()=>[]};function fnt(t,e){let r,n=mz,a=0,s=!1;function o(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=dnt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=mz)}function A(){s||(s=!0,d())}function h(){s&&(s=!1,f())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:h,getListeners:()=>n};return m}var hnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ant=hnt(),mnt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pnt=mnt(),gnt=()=>Ant||pnt?v.useLayoutEffect:v.useEffect,xnt=gnt();function pz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function vnt(t,e){if(pz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!pz(t[r[a]],e[r[a]]))return!1;return!0}var mB=Symbol.for("react-redux-context"),pB=typeof globalThis<"u"?globalThis:{};function ynt(){if(!v.createContext)return{};const t=pB[mB]??(pB[mB]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var bnt=ynt();function wnt(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=fnt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=v.useMemo(()=>a.getState(),[a]);xnt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||bnt;return v.createElement(l.Provider,{value:s},e)}var Nnt=wnt,Cnt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function _nt(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function bM(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Cnt.has(n)){if(t[n]==null&&e[n]==null)continue;if(!vnt(t[n],e[n]))return!1}else if(!_nt(t[n],e[n]))return!1;return!0}function Tg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:nue}function kg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:nue}var Ent="Invariant failed";function Snt(t,e){throw new Error(Ent)}function YF(){return YF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YF.apply(null,arguments)}function DI(t){return v.createElement(Jce,YF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Int=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(nn(e))return e;var s=nn(n)||Ro(n);return s?e(n,a):(s||Snt(),r)}},jnt=(t,e,r)=>r,Pnt=(t,e)=>e,oN=Gt([F8,Pnt],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Bnt=Gt([oN],t=>t==null?void 0:t.maxBarSize),Tnt=(t,e,r,n)=>n,knt=Gt([ca,F8,Tg,kg,jnt],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Fnt=(t,e,r)=>{var n=ca(t),a=Tg(t,e),s=kg(t,e);if(!(a==null||s==null))return n==="horizontal"?$F(t,"yAxis",s,r):$F(t,"xAxis",a,r)},Ont=(t,e)=>{var r=ca(t),n=Tg(t,e),a=kg(t,e);if(!(n==null||a==null))return r==="horizontal"?pq(t,"xAxis",n):pq(t,"yAxis",a)},Dnt=Gt([knt,nXe,Ont],art),Rnt=(t,e,r)=>{var n,a,s=oN(t,e);if(s!=null){var o=Tg(t,e),l=kg(t,e);if(!(o==null||l==null)){var c=ca(t),u=vle(t),{maxBarSize:d}=s,f=Ro(d)?u:d,A,h;return c==="horizontal"?(A=Qv(t,"xAxis",o,r),h=Uv(t,"xAxis",o,r)):(A=Qv(t,"yAxis",l,r),h=Uv(t,"yAxis",l,r)),(n=(a=uI(A,h,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},fue=(t,e,r)=>{var n=ca(t),a=Tg(t,e),s=kg(t,e);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=Qv(t,"xAxis",a,r),l=Uv(t,"xAxis",a,r)):(o=Qv(t,"yAxis",s,r),l=Uv(t,"yAxis",s,r)),uI(o,l)}},Mnt=Gt([Dnt,vle,rXe,yle,Rnt,fue,Bnt],crt),Lnt=(t,e,r)=>{var n=Tg(t,e);if(n!=null)return Qv(t,"xAxis",n,r)},Unt=(t,e,r)=>{var n=kg(t,e);if(n!=null)return Qv(t,"yAxis",n,r)},Qnt=(t,e,r)=>{var n=Tg(t,e);if(n!=null)return Uv(t,"xAxis",n,r)},Vnt=(t,e,r)=>{var n=kg(t,e);if(n!=null)return Uv(t,"yAxis",n,r)},Hnt=Gt([Mnt,oN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),$nt=Gt([Fnt,oN],urt),Gnt=Gt([fo,WR,Lnt,Unt,Qnt,Vnt,Hnt,ca,$We,fue,$nt,oN,Tnt],(t,e,r,n,a,s,o,l,c,u,d,f,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,x;if(g!=null&&g.length>0?x=g:x=h==null?void 0:h.slice(m,p+1),x!=null)return yat({layout:l,barSettings:f,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:A,dataStartIndex:m})}}),Knt=["index"];function JF(){return JF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JF.apply(null,arguments)}function qnt(t,e){if(t==null)return{};var r,n,a=znt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function znt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var hue=v.createContext(void 0),Wnt=t=>{var e=v.useContext(hue);if(e!=null)return e.stackId;if(t!=null)return G$e(t)},Xnt=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Ynt=t=>{var e=v.useContext(hue);if(e!=null){var{stackId:r}=e;return"url(#".concat(Xnt(r,t),")")}},Jnt=t=>{var{index:e}=t,r=qnt(t,Knt),n=Ynt(e);return v.createElement(oc,JF({className:"recharts-bar-stack-layer",clipPath:n},r))},Znt=["onMouseEnter","onMouseLeave","onClick"],eat=["value","background","tooltipPosition"],tat=["id"],rat=["onMouseEnter","onClick","onMouseLeave"];function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uA.apply(null,arguments)}function gz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(r),!0).forEach(function(n){nat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nat(t,e,r){return(e=aat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aat(t){var e=sat(t,"string");return typeof e=="symbol"?e:e+""}function sat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RI(t,e){if(t==null)return{};var r,n,a=iat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oat=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:_4(r,e),payload:t}]},lat=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:_4(s,e),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(Zce,{tooltipEntrySettings:d})});function cat(t){var e=Jr(ug),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=RI(s,Znt),d=pM(o,n,s.id),f=gM(l),A=xM(c,n,s.id);if(!a||r==null)return null;var h=L2(a);return v.createElement(Zf,{zIndex:drt(a,Fl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=RI(m,eat);if(!x)return null;var w=d(m,p),j=f(m,p),I=A(m,p),_=tc(tc(tc(tc(tc({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),h),Uw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(DI,uA({key:"background-bar-".concat(p)},_))}))}function uat(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return tc(tc({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return v.createElement(xet,{value:e?a:void 0},r)}function dat(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=Jr(ug),c=Jr(sM),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?v.createElement(Zf,{zIndex:Fl.activeBar},v.createElement(DI,uA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):v.createElement(DI,uA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function fat(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(DI,uA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function hat(t){var e,{data:r,props:n}=t,a=(e=Hf(n))!==null&&e!==void 0?e:{},{id:s}=a,o=RI(a,tat),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,h=RI(n,rat),m=pM(d,c,s),p=gM(A),g=xM(f,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(Jnt,uA({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},Uw(h,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(dat,{shape:l,activeBar:u,baseProps:o,entry:x,index:y,dataKey:c}):v.createElement(fat,{shape:l,baseProps:o,entry:x,index:y,dataKey:c})))):null}function Aat(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,A=R4(e,"recharts-bar-"),[h,m]=v.useState(!1),p=!h,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(uat,{showLabels:p,rects:n},v.createElement(D4,{animationId:A,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:A},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return tc(tc({},w),{},{x:eo(I.x,w.x,y),y:eo(I.y,w.y,y),width:eo(I.width,w.width,y),height:eo(I.height,w.height,y)});if(a==="horizontal"){var _=eo(0,w.height,y),S=eo(w.stackedBarStart,w.y,y);return tc(tc({},w),{},{y:S,height:_})}var E=eo(0,w.width,y),F=eo(w.stackedBarStart,w.x,y);return tc(tc({},w),{},{width:E,x:F})});return y>0&&(r.current=b??null),b==null?null:v.createElement(oc,null,v.createElement(hat,{props:e,data:b}))}),v.createElement($ce,{label:e.label}),e.children)}function mat(t){var e=v.useRef(null);return v.createElement(Aat,{previousRectanglesRef:e,props:t})}var Aue=0,pat=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:As(t,e)}};class gat extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=Oa("recharts-bar",a),f=u;return v.createElement(oc,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(tnt,{clipPathId:f,xAxisId:s,yAxisId:o})),v.createElement(oc,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},v.createElement(cat,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(mat,this.props)))}}var xat={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Aue,xAxisId:0,yAxisId:0,zIndex:Fl.bar};function vat(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=due(e,r),A=$w(),h=yu(),m=mM(t.children,sN),p=Jr(y=>Gnt(y,t.id,h,m));if(A!=="vertical"&&A!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=A==="vertical"?x.height/2:x.width/2,v.createElement(ent,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:pat,errorBarOffset:g},v.createElement(gat,uA({},t,{layout:A,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function yat(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:h,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:o,x=d?g.scale.domain():null,y=K$e({numericAxis:g}),b=g.scale(y);return f.map((w,j)=>{var I,_,S,E,F,P;if(d){var k=d[j+p];if(k==null)return null;I=U$e(k,x)}else I=As(w,r),Array.isArray(I)||(I=[y,I]);var D=Int(n,Aue)(I[1],j);if(e==="horizontal"){var Z,[fe,me]=[l.scale(I[0]),l.scale(I[1])];_=EG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),S=(Z=me??fe)!==null&&Z!==void 0?Z:void 0,E=a.size;var pe=fe-me;if(F=$f(pe)?0:pe,P={x:_,y:A.top,width:E,height:A.height},Math.abs(D)>0&&Math.abs(F)<Math.abs(D)){var ye=ll(F||D)*(Math.abs(D)-Math.abs(F));S-=ye,F+=ye}}else{var[ae,je]=[o.scale(I[0]),o.scale(I[1])];if(_=ae,S=EG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),E=je-ae,F=a.size,P={x:A.left,y:S,width:A.width,height:F},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var Be=ll(E||D)*(Math.abs(D)-Math.abs(E));E+=Be}}if(_==null||S==null||E==null||F==null)return null;var O=tc(tc({},w),{},{stackedBarStart:b,x:_,y:S,width:E,height:F,value:d?I:I[1],payload:w,background:P,tooltipPosition:{x:_+E/2,y:S+F/2},parentViewBox:m},h&&h[j]&&h[j].props);return O}).filter(Boolean)}function bat(t){var e=dl(t,xat),r=Wnt(e.stackId),n=yu();return v.createElement(eue,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(ntt,{legendPayload:oat(e)}),v.createElement(lat,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(gtt,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(Zf,{zIndex:e.zIndex},v.createElement(vat,uA({},e,{id:a})))))}var ZF=v.memo(bat,bM);ZF.displayName="Bar";var wat=["domain","range"],Nat=["domain","range"];function xz(t,e){if(t==null)return{};var r,n,a=Cat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Cat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function vz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function mue(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=xz(t,wat),{domain:s,range:o}=e,l=xz(e,Nat);return!vz(r,s)||!vz(n,o)?!1:bM(a,l)}var _at=["dangerouslySetInnerHTML","ticks","scale"],Eat=["id","scale"];function eO(){return eO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eO.apply(null,arguments)}function yz(t,e){if(t==null)return{};var r,n,a=Sat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Sat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Iat(t){var e=ss(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(ztt(t)):r.current!==t&&e(Wtt({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(Xtt(r.current)),r.current=null)},[e]),null}var jat=t=>{var{xAxisId:e,className:r}=t,n=Jr(WR),a=yu(),s="xAxis",o=Jr(x=>Jle(x,s,e,a)),l=Jr(x=>zle(x,e)),c=Jr(x=>eYe(x,e)),u=Jr(x=>jle(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,h=yz(t,_at),{id:m,scale:p}=u,g=yz(u,Eat);return v.createElement(yM,eO({},h,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Oa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},Pat={allowDataOverflow:wo.allowDataOverflow,allowDecimals:wo.allowDecimals,allowDuplicatedCategory:wo.allowDuplicatedCategory,angle:wo.angle,axisLine:Fp.axisLine,height:wo.height,hide:!1,includeHidden:wo.includeHidden,interval:wo.interval,minTickGap:wo.minTickGap,mirror:wo.mirror,orientation:wo.orientation,padding:wo.padding,reversed:wo.reversed,scale:wo.scale,tick:wo.tick,tickCount:wo.tickCount,tickLine:Fp.tickLine,tickSize:Fp.tickSize,type:wo.type,xAxisId:0},Bat=t=>{var e=dl(t,Pat);return v.createElement(v.Fragment,null,v.createElement(Iat,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(jat,e))},pue=v.memo(Bat,mue);pue.displayName="XAxis";var Tat=["dangerouslySetInnerHTML","ticks","scale"],kat=["id","scale"];function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tO.apply(null,arguments)}function bz(t,e){if(t==null)return{};var r,n,a=Fat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Fat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Oat(t){var e=ss(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(Ytt(t)):r.current!==t&&e(Jtt({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(Ztt(r.current)),r.current=null)},[e]),null}var Dat=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),o=v.useRef(null),l=Jr(WR),c=yu(),u=ss(),d="yAxis",f=Jr(I=>Wle(I,e)),A=Jr(I=>rYe(I,e)),h=Jr(I=>Jle(I,d,e,c)),m=Jr(I=>Ple(I,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!f||uM(a)||v.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(ert({id:e,width:_}))}}},[h,f,u,a,e,n,m]),f==null||A==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=bz(t,Tat),{id:b,scale:w}=m,j=bz(m,kat);return v.createElement(yM,tO({},y,j,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Oa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},Rat={allowDataOverflow:No.allowDataOverflow,allowDecimals:No.allowDecimals,allowDuplicatedCategory:No.allowDuplicatedCategory,angle:No.angle,axisLine:Fp.axisLine,hide:!1,includeHidden:No.includeHidden,interval:No.interval,minTickGap:No.minTickGap,mirror:No.mirror,orientation:No.orientation,padding:No.padding,reversed:No.reversed,scale:No.scale,tick:No.tick,tickCount:No.tickCount,tickLine:Fp.tickLine,tickSize:Fp.tickSize,type:No.type,width:No.width,yAxisId:0},Mat=t=>{var e=dl(t,Rat);return v.createElement(v.Fragment,null,v.createElement(Oat,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(Dat,e))},gue=v.memo(Mat,mue);gue.displayName="YAxis";var Lat=(t,e)=>e,wM=Gt([Lat,ca,Sle,Ao,Ace,SA,gJe,fo],CJe),NM=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},xue=fd("mouseClick"),vue=Vw();vue.startListening({actionCreator:xue,effect:(t,e)=>{var r=t.payload,n=wM(e.getState(),NM(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(pYe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var rO=fd("mouseMove"),yue=Vw(),y_=null;yue.startListening({actionCreator:rO,effect:(t,e)=>{var r=t.payload;y_!==null&&cancelAnimationFrame(y_);var n=NM(r);y_=requestAnimationFrame(()=>{var a=e.getState(),s=Z8(a,a.tooltip.settings.shared);if(s==="axis"){var o=wM(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(ice({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(sce())}y_=null})}});function Uat(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var wz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},bue=Dc({name:"rootProps",initialState:wz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:wz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Qat=bue.reducer,{updateOptions:Vat}=bue.actions,wue=Dc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Hat}=wue.actions,$at=wue.reducer,Nue=fd("keyDown"),Cue=fd("focus"),CM=Vw();CM.startListening({actionCreator:Nue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=eM(a,b1(r),eN(r),nN(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=SA(r);if(s==="Enter"){var u=TI(r,"axis","hover",String(a.index));e.dispatch(KF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=iYe(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=l+A*f;if(!(c==null||h>=c.length||h<0)){var m=TI(r,"axis","hover",String(h));e.dispatch(KF({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});CM.startListening({actionCreator:Cue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=TI(r,"axis","hover",String(s));e.dispatch(KF({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Qu=fd("externalEvent"),_ue=Vw(),gB=new Map;_ue.startListening({actionCreator:Qu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=gB.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:rJe(l),activeDataKey:sM(l),activeIndex:ug(l),activeLabel:gce(l),activeTooltipIndex:ug(l),isTooltipActive:nJe(l)};r(c,n)}finally{gB.delete(a)}});gB.set(a,o)}}});var Gat=Gt([v1],t=>t.tooltipItemPayloads),Kat=Gt([Gat,rN,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Eue=fd("touchMove"),Sue=Vw();Sue.startListening({actionCreator:Eue,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=Z8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=wM(n,NM({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(ice({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute($ie),f=(l=u.getAttribute(Gie))!==null&&l!==void 0?l:void 0,A=y1(n).find(p=>p.id===f);if(d==null||A==null||f==null)return;var{dataKey:h}=A,m=Kat(n,d,f);e.dispatch(ace({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var qat=Aie({brush:frt,cartesianAxis:trt,chartData:eZe,errorBars:zrt,graphicalItems:mtt,layout:F$e,legend:LGe,options:WJe,polarAxis:Pet,polarOptions:$at,referenceElements:vrt,rootProps:Qat,tooltip:gYe,zIndex:MJe}),zat=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return s$e({reducer:qat,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([vue.middleware,yue.middleware,CM.middleware,_ue.middleware,Sue.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(jie({type:"raf"}))},devTools:{serialize:{replacer:Uat},name:"recharts-".concat(r)}})};function Iue(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=yu(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=zat(e,n));var o=UR;return v.createElement(Nnt,{context:o,store:s.current},r)}function Wat(t){var{layout:e,margin:r}=t,n=ss(),a=yu();return v.useEffect(()=>{a||(n(B$e(e)),n(P$e(r)))},[n,a,e,r]),null}var jue=v.memo(Wat,bM);function Pue(t){var e=ss();return v.useEffect(()=>{e(Vat(t))},[e,t]),null}function Nz(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=ss();return v.useLayoutEffect(()=>(n.current&&a(DJe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(RJe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function Cz(t){var{children:e,isPanorama:r}=t,n=Jr(EJe);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return v.createElement(v.Fragment,null,a.map(o=>v.createElement(Nz,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>v.createElement(Nz,{key:o,zIndex:o,isPanorama:r})))}var Xat=["children"];function Yat(t,e){if(t==null)return{};var r,n,a=Jat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Jat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MI.apply(null,arguments)}var Zat={width:"100%",height:"100%",display:"block"},est=v.forwardRef((t,e)=>{var r=Zie(),n=eoe(),a=doe();if(!hm(r)||!hm(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),v.createElement(_R,MI({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Zat,ref:e}),s)}),tst=t=>{var{children:e}=t,r=Jr(j4);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return v.createElement(_R,{width:n,height:a,x:o,y:s},e)},_z=v.forwardRef((t,e)=>{var{children:r}=t,n=Yat(t,Xat),a=yu();return a?v.createElement(tst,null,v.createElement(Cz,{isPanorama:!0},r)):v.createElement(est,MI({ref:e},n),v.createElement(Cz,{isPanorama:!1},r))});function rst(){var t=ss(),[e,r]=v.useState(null),n=Jr(J$e);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Ws(s)&&s!==n&&t(k$e(s))}},[e,t,n]),r}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nst(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){ast(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ast(t,e,r){return(e=sst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sst(t){var e=ist(t,"string");return typeof e=="symbol"?e:e+""}function ist(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fg.apply(null,arguments)}var ost=()=>(cZe(),null);function LI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var lst=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,o]=v.useState({containerWidth:LI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:LI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{o(f=>{var A=Math.round(u),h=Math.round(d);return f.containerWidth===A&&f.containerHeight===h?f:{containerWidth:A,containerHeight:h}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},h=new ResizeObserver(A);h.observe(u),a.current=h}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(B4,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",fg({ref:c},t)))}),cst=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:LI(r),containerHeight:LI(n)}),o=v.useCallback((c,u)=>{s(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return v.createElement(v.Fragment,null,v.createElement(B4,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",fg({ref:l},t)))}),ust=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(B4,{width:r,height:n}),v.createElement("div",fg({ref:e},t)))}),dst=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return aA(r)||aA(n)?v.createElement(cst,fg({},t,{ref:e})):v.createElement(ust,fg({},t,{ref:e}))});function fst(t){return t===!0?lst:dst}var hst=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),j=ss(),[I,_]=v.useState(null),[S,E]=v.useState(null),F=rst(),P=XR(),k=(P==null?void 0:P.width)>0?P.width:x,D=(P==null?void 0:P.height)>0?P.height:a,Z=v.useCallback(H=>{F(H),typeof e=="function"&&e(H),_(H),E(H),H!=null&&(w.current=H)},[F,e,_,E]),fe=v.useCallback(H=>{j(xue(H)),j(Qu({handler:s,reactEvent:H}))},[j,s]),me=v.useCallback(H=>{j(rO(H)),j(Qu({handler:u,reactEvent:H}))},[j,u]),pe=v.useCallback(H=>{j(sce()),j(Qu({handler:d,reactEvent:H}))},[j,d]),ye=v.useCallback(H=>{j(rO(H)),j(Qu({handler:f,reactEvent:H}))},[j,f]),ae=v.useCallback(()=>{j(Cue())},[j]),je=v.useCallback(H=>{j(Nue(H.key))},[j]),Be=v.useCallback(H=>{j(Qu({handler:o,reactEvent:H}))},[j,o]),O=v.useCallback(H=>{j(Qu({handler:l,reactEvent:H}))},[j,l]),G=v.useCallback(H=>{j(Qu({handler:c,reactEvent:H}))},[j,c]),z=v.useCallback(H=>{j(Qu({handler:A,reactEvent:H}))},[j,A]),L=v.useCallback(H=>{j(Qu({handler:p,reactEvent:H}))},[j,p]),Y=v.useCallback(H=>{b&&j(Eue(H)),j(Qu({handler:m,reactEvent:H}))},[j,b,m]),J=v.useCallback(H=>{j(Qu({handler:h,reactEvent:H}))},[j,h]),R=fst(y);return v.createElement(Cce.Provider,{value:I},v.createElement(mse.Provider,{value:S},v.createElement(R,{width:k??(g==null?void 0:g.width),height:D??(g==null?void 0:g.height),className:Oa("recharts-wrapper",n),style:nst({position:"relative",cursor:"default",width:k,height:D},g),onClick:fe,onContextMenu:Be,onDoubleClick:O,onFocus:ae,onKeyDown:je,onMouseDown:G,onMouseEnter:me,onMouseLeave:pe,onMouseMove:ye,onMouseUp:z,onTouchEnd:J,onTouchMove:Y,onTouchStart:L,ref:Z},v.createElement(ost,null),r)))}),Ast=["width","height","responsive","children","className","style","compact","title","desc"];function mst(t,e){if(t==null)return{};var r,n,a=pst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Bue=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,f=mst(t,Ast),A=Hf(f);return c?v.createElement(v.Fragment,null,v.createElement(B4,{width:r,height:n}),v.createElement(_z,{otherAttributes:A,title:u,desc:d},s)):v.createElement(hst,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(_z,{otherAttributes:A,title:u,desc:d,ref:e},v.createElement(brt,null,s)))});function nO(){return nO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nO.apply(null,arguments)}var gst={top:5,right:5,bottom:5,left:5},xst={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:gst,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vst=v.forwardRef(function(e,r){var n,a=dl(e.categoricalChartProps,xst),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Iue,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(iue,{chartData:u.data}),v.createElement(jue,{layout:a.layout,margin:a.margin}),v.createElement(Pue,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Bue,nO({},a,{ref:r})))}),yst=["axis","item"],bst=v.forwardRef((t,e)=>v.createElement(vst,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yst,tooltipPayloadSearcher:Ece,categoricalChartProps:t,ref:e}));function wst(t){var e=ss();return v.useEffect(()=>{e(Hat(t))},[e,t]),null}var Nst=["layout"];function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aO.apply(null,arguments)}function Cst(t,e){if(t==null)return{};var r,n,a=_st(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _st(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Est={top:5,right:5,bottom:5,left:5},Tue={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Est,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Sst=v.forwardRef(function(e,r){var n,a=dl(e.categoricalChartProps,Tue),{layout:s}=a,o=Cst(a,Nst),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Iue,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(iue,{chartData:a.data}),v.createElement(jue,{layout:s,margin:a.margin}),v.createElement(Pue,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(wst,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(Bue,aO({},o,{ref:r})))});function Sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Iz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sz(Object(r),!0).forEach(function(n){Ist(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ist(t,e,r){return(e=jst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jst(t){var e=Pst(t,"string");return typeof e=="symbol"?e:e+""}function Pst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bst=["item"],Tst=Iz(Iz({},Tue),{},{layout:"centric",startAngle:0,endAngle:360}),kst=v.forwardRef((t,e)=>{var r=dl(t,Tst);return v.createElement(Sst,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Bst,tooltipPayloadSearcher:Ece,categoricalChartProps:r,ref:e})});const Fst="sellers_candies",b_="cash_deliveries_candies";function fa(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function mi(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function w_(t,e){return t*e/100}function N_(t,e,r){return t-e-r}function jz(t){return t?Cr(t.toDate(),"yyyy-MM-dd"):""}function C_(t){if(!t)return ur.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return ur.fromDate(a)}function Ost(){const t=new Date,[e,r]=v.useState(Cr(md(t),"yyyy-MM-dd")),[n,a]=v.useState(Cr(Ad(t),"yyyy-MM-dd")),[s,o]=v.useState([]),l=v.useMemo(()=>{const R=new Map;return s.forEach(H=>R.set(H.id,H)),R},[s]),[c,u]=v.useState([]),[d,f]=v.useState(!0),[A,h]=v.useState(()=>Cr(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState({}),F=v.useRef(null);v.useEffect(()=>{const R=rr(Ct(Te,Fst),gn("name","asc")),H=ad(R,ne=>{const ge=ne.docs.map(U=>{const Ue=U.data();return{id:U.id,name:String((Ue==null?void 0:Ue.name)??""),branch:Ue!=null&&Ue.branch?String(Ue.branch):"",commissionPercent:fa((Ue==null?void 0:Ue.commissionPercent)??0)}});o(ge)},()=>o([]));return()=>H()},[]),v.useEffect(()=>{f(!0);const R=C_(e),H=new Date(C_(n).toDate().getTime());H.setDate(H.getDate()+1);const ne=ur.fromDate(H),ge=rr(Ct(Te,b_),or("date",">=",R),or("date","<",ne),gn("date","desc")),U=ad(ge,Ue=>{const ie=Ue.docs.map(te=>{const Ee=te.data();return{id:te.id,date:Ee==null?void 0:Ee.date,sellerId:String((Ee==null?void 0:Ee.sellerId)??""),sellerName:String((Ee==null?void 0:Ee.sellerName)??""),amountDelivered:fa(Ee==null?void 0:Ee.amountDelivered),commissionPercent:fa(Ee==null?void 0:Ee.commissionPercent),commissionPaid:fa(Ee==null?void 0:Ee.commissionPaid),extraExpenses:fa(Ee==null?void 0:Ee.extraExpenses),totalFinal:fa(Ee==null?void 0:Ee.totalFinal),comment:String((Ee==null?void 0:Ee.comment)??""),createdAt:Ee==null?void 0:Ee.createdAt,updatedAt:Ee==null?void 0:Ee.updatedAt}});u(ie),f(!1)},Ue=>{console.error("Firestore deliveries query error:",Ue),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>U()},[e,n]);const P=v.useMemo(()=>m?l.get(m):void 0,[m,l]),k=fa((P==null?void 0:P.commissionPercent)??0),D=fa(g),Z=fa(y),fe=w_(D,k),me=N_(D,fe,Z),pe=v.useMemo(()=>{var H;const R=new Map;for(const ne of c){const ge=ne.sellerId||ne.sellerName||"UNKNOWN",U=R.get(ge)??{sellerId:ne.sellerId,sellerName:ne.sellerName||((H=l.get(ne.sellerId))==null?void 0:H.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};U.delivered+=fa(ne.amountDelivered),U.commission+=fa(ne.commissionPaid),U.totalFinal+=fa(ne.totalFinal),R.set(ge,U)}return Array.from(R.values()).sort((ne,ge)=>ne.sellerName.localeCompare(ge.sellerName))},[c,l]),ye=v.useMemo(()=>{let R=0,H=0,ne=0,ge=0;for(const U of c)R+=fa(U.amountDelivered),H+=fa(U.commissionPaid),ne+=fa(U.extraExpenses),ge+=fa(U.totalFinal);return{delivered:R,commission:H,expenses:ne,totalFinal:ge}},[c]),ae=v.useMemo(()=>pe.map(R=>({name:R.sellerName,Entregado:Number(R.delivered.toFixed(2)),Comision:Number(R.commission.toFixed(2))})),[pe]),je=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ye.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ye.commission.toFixed(2))},{name:"Total Gastos",value:Number(ye.expenses.toFixed(2))}].filter(R=>R.value>0),[ye]),Be=["#3B82F6","#F59E0B","#EF4444"];async function O(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const R=l.get(m),H=(R==null?void 0:R.name)??"Sin nombre",ne=fa((R==null?void 0:R.commissionPercent)??0),ge=w_(D,ne),U=N_(D,ge,Z);await Tn(Ct(Te,b_),{date:C_(A),sellerId:m,sellerName:H,amountDelivered:D,commissionPercent:ne,commissionPaid:ge,extraExpenses:Z,totalFinal:U,comment:w??"",createdAt:ur.now()}),x(""),b("0"),j("")}function G(R){_(R.id),E({...R,dateInput:jz(R.date)})}function z(){_(null),E({})}async function L(R){const H=S,ne=String(H.sellerId??""),ge=l.get(ne),U=String(H.sellerName??(ge==null?void 0:ge.name)??"Sin nombre"),Ue=fa(H.amountDelivered),ie=fa(H.extraExpenses),te=fa(H.commissionPercent??(ge==null?void 0:ge.commissionPercent)??0),Ee=w_(Ue,te),ce=N_(Ue,Ee,ie),we=C_(String(H.dateInput??jz(H.date)));await xn(Wt(Te,b_,R),{date:we,sellerId:ne,sellerName:U,amountDelivered:Ue,commissionPercent:te,commissionPaid:Ee,extraExpenses:ie,totalFinal:ce,comment:String(H.comment??""),updatedAt:ur.now()}),z()}async function Y(R){confirm("Eliminar este registro?")&&await Bn(Wt(Te,b_,R))}async function J(){if(!F.current)return;const R=await yg(F.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),H=R.toDataURL("image/png"),ne=new Lr("p","mm","a4"),ge=ne.internal.pageSize.getWidth(),U=ne.internal.pageSize.getHeight(),Ue=ge,ie=R.height*Ue/R.width;let te=ie,Ee=0;for(ne.addImage(H,"PNG",0,Ee,Ue,ie),te-=U;te>0;)ne.addPage(),Ee=-(ie-te),ne.addImage(H,"PNG",0,Ee,Ue,ie),te-=U;ne.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:e})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:J,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:e,onChange:R=>r(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:R=>a(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:F,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",mi(ye.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",mi(ye.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",mi(ye.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",mi(ye.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):pe.map(R=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:R.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",mi(R.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",mi(R.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",mi(R.totalFinal)]})]},R.sellerId||R.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(FG,{children:i.jsxs(bst,{data:ae,children:[i.jsx(pue,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(gue,{}),i.jsx(Tq,{}),i.jsx(IF,{}),i.jsx(ZF,{dataKey:"Entregado"}),i.jsx(ZF,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(FG,{children:i.jsxs(kst,{children:[i.jsx(rue,{data:je,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:je.map((R,H)=>i.jsx(sN,{fill:Be[H%Be.length]},H))}),i.jsx(Tq,{}),i.jsx(IF,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:A,onChange:R=>h(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>i.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:R=>x(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${k}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${mi(fe)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:R=>b(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${mi(me)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:w,onChange:R=>j(R.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:O,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(R=>{if(!(I===R.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Cr(R.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:R.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",mi(R.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[mi(R.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",mi(R.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",mi(R.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",mi(R.totalFinal)]}),i.jsx("td",{className:"p-2",children:R.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>G(R),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(R.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},R.id);const ne=fa(S.amountDelivered??R.amountDelivered),ge=fa(S.commissionPercent??R.commissionPercent),U=fa(S.extraExpenses??R.extraExpenses),Ue=w_(ne,ge),ie=N_(ne,Ue,U);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:te=>E(Ee=>({...Ee,dateInput:te.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(S.sellerId??R.sellerId),onChange:te=>{const Ee=te.target.value,ce=l.get(Ee);E(we=>({...we,sellerId:Ee,sellerName:(ce==null?void 0:ce.name)??"",commissionPercent:fa((ce==null?void 0:ce.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(te=>i.jsxs("option",{value:te.id,children:[te.name," ",te.branch?`(${te.branch})`:""]},te.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ne),onChange:te=>E(Ee=>({...Ee,amountDelivered:fa(te.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ge),onChange:te=>E(Ee=>({...Ee,commissionPercent:fa(te.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",mi(Ue)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(U),onChange:te=>E(Ee=>({...Ee,extraExpenses:fa(te.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",mi(ie)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(S.comment??R.comment),onChange:te=>E(Ee=>({...Ee,comment:te.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>L(R.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},R.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(R=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:R.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Cr(R.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",mi(R.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[mi(R.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",mi(R.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",mi(R.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",mi(R.totalFinal)]})]}),R.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:R.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>G(R),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(R.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},R.id)),I?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:R=>E(H=>({...H,dateInput:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(S.sellerId??""),onChange:R=>{const H=R.target.value,ne=l.get(H);E(ge=>({...ge,sellerId:H,sellerName:(ne==null?void 0:ne.name)??"",commissionPercent:fa((ne==null?void 0:ne.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>i.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:R=>E(H=>({...H,amountDelivered:fa(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:R=>E(H=>({...H,extraExpenses:fa(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:R=>E(H=>({...H,commissionPercent:fa(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(S.comment??""),onChange:R=>E(H=>({...H,comment:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>L(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Vm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Dst(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Pz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Rst(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Mst({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,o]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new b2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function Lst(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState("ANY"),[y,b]=v.useState(!1),[w,j]=v.useState({});v.useEffect(()=>{(async()=>{n(!0),s("");try{const be=await Lt(rr(Ct(Te,"candy_main_orders"))),ue=new Map;be.forEach(ke=>{var re,oe,Ve;const Ae=ke.data(),Ye=Rst(Ae.date),yt=((oe=(re=Ae==null?void 0:Ae.createdAt)==null?void 0:re.toMillis)==null?void 0:oe.call(re))||((Ve=Ae==null?void 0:Ae.createdAt)!=null&&Ve.seconds?Ae.createdAt.seconds*1e3:0)||0,At=Math.max(Ye,yt),he=Array.isArray(Ae.items)?Ae.items:[];for(const de of he){const Se=String((de==null?void 0:de.id)||(de==null?void 0:de.productId)||"").trim();if(!Se)continue;const dt=String((de==null?void 0:de.name)||(de==null?void 0:de.productName)||"").trim(),xt=String((de==null?void 0:de.category)||"").trim(),ht=Number((de==null?void 0:de.unitPriceIsla)||0),bt=Number((de==null?void 0:de.unitPriceRivas)||0),et=Number((de==null?void 0:de.unitsPerPackage)||(de==null?void 0:de.unitsPerPack)||1),Ne=ue.get(Se);(!Ne||At>=Ne._sortKey)&&ue.set(Se,{productId:Se,category:xt,productName:dt,priceIsla:ht,priceRivas:bt,unitsPerPackage:et,_sortKey:At})}});const Le=Array.from(ue.values()).sort((ke,Ae)=>ke.productName.localeCompare(Ae.productName,"es"));l(Le)}catch(be){console.error(be),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),v.useEffect(()=>{const be=Ct(Te,"products_candies"),ue=rr(be),Le=ad(ue,ke=>{const Ae={},Ye={},yt={},At={};ke.forEach(he=>{const re=he.data();Ae[he.id]=Number((re==null?void 0:re.providerPrice)||(re==null?void 0:re.providerPricePerUnit)||0),yt[he.id]=Number((re==null?void 0:re.unitsPerPackage)||(re==null?void 0:re.unitsPerPack)||1)||1;const oe=String((re==null?void 0:re.barcode)||"").trim();oe&&(Ye[he.id]=oe);const Ve=String((re==null?void 0:re.packaging)||(re==null?void 0:re.empaque)||"").trim();Ve&&(At[he.id]=Ve)});try{const he=S.current||{};let re=!1;for(const Se of Object.keys(Ye))if((Ye[Se]||"")!==(he[Se]||"")){re=!0;break}const oe=F.current||{};let Ve=!1;for(const Se of Object.keys(yt))if((yt[Se]||0)!==(oe[Se]||0)){Ve=!0;break}Z(Ae),me(yt);const de={...Ye,...he};_(de),S.current=de,F.current={...yt},je(At),l(Se=>Se.map(dt=>({...dt,unitsPerPackage:yt[dt.productId]??dt.unitsPerPackage}))),!E.current&&re&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&Ve&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{Z(Ae),me(yt),_(re=>({...Ye,...re})),F.current={...yt},je(At),l(re=>re.map(oe=>({...oe,unitsPerPackage:yt[oe.productId]??oe.unitsPerPackage})))}},ke=>console.error(ke));return()=>Le()},[]);const[I,_]=v.useState({}),S=v.useRef({}),E=v.useRef(!0),F=v.useRef({}),P=v.useRef({}),k=v.useRef(!0),[D,Z]=v.useState({}),[fe,me]=v.useState({}),[pe,ye]=v.useState({}),[ae,je]=v.useState({}),[Be,O]=v.useState("");v.useEffect(()=>{const be=Ct(Te,"inventory_candies"),ue=rr(be),Le=ad(ue,ke=>{try{const Ae={};ke.forEach(yt=>{var de,Se,dt;const At=yt.data(),he=String(At.productId||"").trim();if(!he)return;const re=Number(At.unitsPerPackage||At.unitsPerPack||0)||0,oe=((Se=(de=At==null?void 0:At.createdAt)==null?void 0:de.toMillis)==null?void 0:Se.call(de))||((dt=At==null?void 0:At.createdAt)!=null&&dt.seconds?At.createdAt.seconds*1e3:0)||0,Ve=Ae[he];(!Ve||oe>=Ve.ts)&&(Ae[he]={val:re||0,ts:oe})});const Ye={};for(const yt of Object.keys(Ae))Ye[yt]=Ae[yt].val||0;ye(Ye);try{const yt=P.current||{};let At=!1;for(const he of Object.keys(Ye))if((Ye[he]||0)!==(yt[he]||0)){At=!0;break}P.current={...Ye},!k.current&&At&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),k.current=!1}catch{}l(yt=>yt.map(At=>({...At,unitsPerPackage:Ye[At.productId]??fe[At.productId]??At.unitsPerPackage})))}catch(Ae){console.error("inventory_candies snapshot error:",Ae)}},ke=>console.error(ke));return()=>Le()},[fe]),v.useEffect(()=>{l(be=>be.map(ue=>({...ue,unitsPerPackage:pe[ue.productId]??fe[ue.productId]??ue.unitsPerPackage})))},[fe,pe]);const G=v.useMemo(()=>{const be=Dst(c),ue=String(d||"").trim(),Le=String(Be||"").trim().toLowerCase(),ke=A.trim()===""?null:Pz(A,NaN),Ae=m.trim()===""?null:Pz(m,NaN);return o.filter(Ye=>{const yt=String(ae[Ye.productId]||"").trim().toLowerCase();if(Le)return yt===Le;if(be&&!`${Ye.category} ${Ye.productName}`.toLowerCase().includes(be))return!1;if(ue){const oe=String(Ye.productId||""),Ve=String(I[Ye.productId]||"");if(!oe.includes(ue)&&!Ve.includes(ue))return!1}const At=g==="ISLA"?[Ye.priceIsla]:g==="RIVAS"?[Ye.priceRivas]:[Ye.priceIsla,Ye.priceRivas],he=ke==null||!Number.isFinite(ke)?!0:At.some(oe=>oe>=ke),re=Ae==null||!Number.isFinite(Ae)?!0:At.some(oe=>oe<=Ae);return he&&re})},[o,c,A,m,g,I,Be,ae]),z=v.useMemo(()=>{const be=new Map;for(const ue of G){const Le=(ue.category||"Sin categora").trim()||"Sin categora",ke=be.get(Le)||[];ke.push(ue),be.set(Le,ke)}return Array.from(be.entries()).sort(([ue],[Le])=>ue.localeCompare(Le,"es"))},[G]),L=be=>{j(ue=>({...ue,[be]:!ue[be]}))},Y=()=>{u(""),h(""),p(""),x("ANY"),O("")},[J,R]=v.useState(!1),[H,ne]=v.useState("search"),[ge,U]=v.useState(null),[Ue,ie]=v.useState(0),[te,Ee]=v.useState(0),[ce,we]=v.useState(null),[Re,We]=v.useState(""),[pt,_t]=v.useState(""),He=v.useMemo(()=>c.trim()!==""||A.trim()!==""||m.trim()!==""||g!=="ANY"||Be.trim()!=="",[c,A,m,g,Be]),[gt,ut]=v.useState(!1);v.useEffect(()=>{var Le;const be=window.matchMedia("(max-width: 900px)"),ue=()=>ut(be.matches);return ue(),(Le=be.addEventListener)==null||Le.call(be,"change",ue),()=>{var ke;return(ke=be.removeEventListener)==null?void 0:ke.call(be,"change",ue)}},[]);const[vt,Pe]=v.useState(!1);v.useEffect(()=>{const be=ij(Wd,async ue=>{if(!ue)return Pe(!1);try{const Le=await js(Wt(Te,"users",ue.uid)),ke=Le.exists()?Le.data():null,Ae=ke?Array.isArray(ke.roles)?ke.roles:ke.role?[ke.role]:[]:[];Pe(ln(Ae,"admin"))}catch(Le){console.error(Le),Pe(!1)}});return()=>be()},[]);const ct=async be=>{var ue;if(H==="search"){f(be);const Le=Object.keys(I).find(Ye=>(I[Ye]||"")===be),ke=(ue=o.find(Ye=>String(Ye.productId||"").includes(be)))==null?void 0:ue.productId,Ae=Le||ke||null;Ae&&(we(Ae),b(!1)),R(!1);return}if(H==="edit"&&ge)try{const Le=Ct(Te,"products_candies"),ke=Wt(Le,ge);await xn(ke,{barcode:be}),_(Ae=>({...Ae,[ge]:be})),We(be),R(!1),ne("search"),s(" Producto guardado.")}catch(Le){console.error(Le),s(" Error guardando el cdigo.")}},lt=async be=>{l(ue=>ue.map(Le=>Le.productId===be?{...Le,priceIsla:Number(Ue||0),priceRivas:Number(te||0)}:Le));try{const ue=String(pt||"").trim();await xn(Wt(Ct(Te,"products_candies"),be),{packaging:ue||""}),je(Le=>({...Le,[be]:ue||""}))}catch(ue){console.error("Error updating packaging:",ue),s(" Error guardando empaque.")}U(null),s(gt?" Producto guardado.":"")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),i.jsx("div",{className:"flex gap-2",children:i.jsx(dc,{onClick:e,loading:r})})]}),i.jsxs("div",{className:"md:hidden mb-3",children:[i.jsxs("button",{type:"button",onClick:()=>b(be=>!be),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${He?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-semibold",children:"Filtros"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[He?"Activos":"Ninguno","  ","Mostrando ",i.jsx("b",{children:G.length})]})]}),i.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&i.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:be=>u(be.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Be,onChange:be=>O(be.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:be=>f(be.target.value),placeholder:"Cdigo EAN"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne("search"),R(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Y(),f("")},children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),i.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:be=>u(be.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Be,onChange:be=>O(be.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:A,onChange:be=>h(be.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:be=>p(be.target.value),placeholder:"0"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Y,children:"Limpiar"})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",i.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",i.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",i.jsx("b",{children:G.length})]})]})]}),i.jsxs("div",{className:"md:hidden",children:[r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):G.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):i.jsx("div",{className:"space-y-2",children:z.map(([be,ue])=>{const Le=!!w[be];return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>L(be),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:be}),i.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[ue.length," ",ue.length===1?"producto":"productos"]})]}),i.jsx("div",{className:"text-sm font-semibold",children:Le?"":"+"})]}),Le&&i.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:ue.map(ke=>{const Ae=ce===ke.productId,Ye=ge===ke.productId,yt=D[ke.productId]||0,At=ke.priceIsla-yt,he=At*.25;return i.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>we(re=>re===ke.productId?null:ke.productId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:ke.productName}),i.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:ke.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Vm(ke.priceIsla)})]})]}),Ae&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),i.jsx("div",{className:"text-sm",children:ke.category}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),i.jsx("div",{className:"text-sm",children:String(ke.unitsPerPackage||1)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),i.jsx("div",{className:"text-sm tabular-nums",children:Vm(ke.priceIsla/(ke.unitsPerPackage||1))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Ye?i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(Ue),onChange:re=>ie(Number(re.target.value||0))}):i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Vm(ke.priceIsla)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-sm tabular-nums",children:Vm(At)})]}),i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),i.jsx("div",{className:"text-sm tabular-nums",children:Vm(he)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Ye?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Re,readOnly:!0}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{ne("edit"),R(!0)},type:"button",children:"Escanear"})]}):i.jsx("div",{children:I[ke.productId]||""})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Ye?i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:pt,onChange:re=>_t(re.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"text-sm",children:ae[ke.productId]||""})]})]})]}),i.jsx("div",{className:"flex gap-2",children:Ye?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{lt(ke.productId),we(null)},type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ne("edit"),R(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>U(null),type:"button",children:"Cancelar"})]}):vt&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{U(ke.productId),ie(ke.priceIsla||0),Ee(ke.priceRivas||0),We(I[ke.productId]||""),_t(ae[ke.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(re=>re.filter(oe=>oe.productId!==ke.productId)),type:"button",children:"Borrar"})]})})]})})]},ke.productId)})})]},be)})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a})]}),i.jsx(Mst,{open:J,onClose:()=>R(!1),onDetected:ct}),i.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):G.map(be=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 border",children:be.category}),i.jsx("td",{className:"p-2 border",children:be.productName}),i.jsx("td",{className:"p-2 border",children:ge===be.productId?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pt,onChange:ue=>_t(ue.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):ae[be.productId]||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ge===be.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Ue),onChange:ue=>ie(Number(ue.target.value||0))}):Vm(be.priceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ge===be.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(te),onChange:ue=>Ee(Number(ue.target.value||0))}):Vm(be.priceRivas)}),i.jsx("td",{className:"p-2 border text-right",children:ge===be.productId?i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>lt(be.productId),type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>U(null),type:"button",children:"Cancelar"})]}):vt&&i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{U(be.productId),ie(be.priceIsla||0),Ee(be.priceRivas||0),We(I[be.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{U(be.productId),ne("edit"),R(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(ue=>ue.filter(Le=>Le.productId!==be.productId)),type:"button",children:"Borrar"})]})})]},be.productId))})]})}),a&&i.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const __=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],Bz=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],xB=["Hombre","Mujer","Variado","NA"],Ust=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],Cl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Xi(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Yl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function mE(t,e=1){const r=Math.floor(Yl(t,e));return r>0?r:e}function kue(t){return!Number.isFinite(t)||t<=0?0:t}function vB(t){const e=String(t??"").trim();return e||""}function kd(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Xi(a),a));for(const a of e){const s=n.get(Xi(a));if(s!=null)return t[s]}}function Qst(t){return Object.values(t||{}).every(r=>Xi(r)==="")}function hx(t){const e=Math.max(0,Yl(t.providerPrice,0)),r=Math.max(1,mE(t.quantity,1)),n=kue(Yl(t.margin,0)),a=Math.max(0,Yl(t.salePrice,0)),s=n>0?e/n:e,o=a>0?a:s,l=o>0?e/o:n,c=e*r,u=(o-e)*r,d=o*r;return{providerPrice:e,quantity:r,margin:l,salePrice:o,facturado:c,gain:u,totalEsperado:d}}function Vst(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(""),[A,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(!1),[S,E]=v.useState(null),[F,P]=v.useState(__[0]),[k,D]=v.useState(Bz[0]),[Z,fe]=v.useState(""),[me,pe]=v.useState(0),[ye,ae]=v.useState(1),[je,Be]=v.useState(.7),[O,G]=v.useState(0),[z,L]=v.useState("NA"),[Y,J]=v.useState(""),[R,H]=v.useState(""),[ne,ge]=v.useState(!1),[U,Ue]=v.useState(""),[ie,te]=v.useState([]),[Ee,ce]=v.useState([]),[we,Re]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const he=await Lt(rr(Ct(Te,"products_stationery"))),re=[];he.forEach(oe=>{const Ve=oe.data();re.push({id:oe.id,category:Ve.category||"",brand:Ve.brand||"",name:Ve.name||"",providerPrice:Number(Ve.providerPrice||0),quantity:Number(Ve.quantity||1),facturado:Number(Ve.facturado||0),margin:Number(Ve.margin||0),salePrice:Number(Ve.salePrice||0),gain:Number(Ve.gain||0),gender:Ve.gender||"NA",typeProduct:Ve.typeProduct||"",code:Ve.code??"",createdAt:Ve.createdAt,updatedAt:Ve.updatedAt,totalEsperado:Number(Ve.totalEsperado||Number(Ve.salePrice||0)*Number(Ve.quantity||1))})}),l(re)}catch(he){console.error(he),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const We=v.useMemo(()=>{const he=Xi(d),re=Xi(A),oe=m.trim()===""?null:Yl(m,NaN),Ve=g.trim()===""?null:Yl(g,NaN);return o.filter(de=>!(he&&!`${de.category} ${de.name}`.toLowerCase().includes(he)||re&&!String(de.code||"").toLowerCase().includes(re)||oe!=null&&Number.isFinite(oe)&&de.salePrice<oe||Ve!=null&&Number.isFinite(Ve)&&de.salePrice>Ve))},[o,d,A,m,g]),pt=v.useMemo(()=>d.trim()!==""||A.trim()!==""||m.trim()!==""||g.trim()!=="",[d,A,m,g]),_t=v.useMemo(()=>{const he=o.length,re=o.reduce((de,Se)=>de+(Se.facturado||0),0),oe=o.reduce((de,Se)=>de+Number(Se.totalEsperado||Number(Se.salePrice||0)*Number(Se.quantity||1)),0),Ve=o.reduce((de,Se)=>de+(Se.gain||0),0);return{count:he,sumFact:re,sumEsperado:oe,sumGain:Ve}},[o]),He=()=>{P(__[0]),fe(""),pe(0),ae(1),Be(.7),G(0),L("NA"),J(""),H(""),j(null)},gt=()=>{He(),b(!0)},ut=he=>{j(he),P(he.category||__[0]),D(he.brand||Bz[0]),fe(he.name||""),pe(Number(he.providerPrice||0)),ae(Number(he.quantity||1)),Be(Number(he.margin||.7)),G(Number(he.salePrice||0)),L(he.gender||"NA"),J(he.typeProduct||""),H(String(he.code||"")),b(!0)},vt=async()=>{s("");const he=String(F||"").trim(),re=String(k||"").trim(),oe=String(Z||"").trim(),{providerPrice:Ve,quantity:de,margin:Se,salePrice:dt,facturado:xt,totalEsperado:ht,gain:bt}=hx({providerPrice:me,quantity:ye,margin:je,salePrice:O});if(!he)return s(" Categora requerida.");if(!oe)return s(" Producto requerido.");if(Ve<=0)return s(" Precio proveedor debe ser > 0.");if(de<=0)return s(" Cantidad debe ser > 0.");if(dt<=0)return s(" Precio venta invlido.");if(Se<=0)return s(" Margen invlido.");const et={category:he,brand:re,name:oe,providerPrice:Ve,quantity:de,facturado:xt,margin:Se,salePrice:dt,gain:bt,gender:z||"NA",typeProduct:String(Y||"").trim(),code:vB(R)||null,updatedAt:ur.now(),totalEsperado:ht};try{n(!0),w?(await xn(Wt(Te,"products_stationery",w.id),et),s(" Producto actualizado.")):(await Tn(Ct(Te,"products_stationery"),{...et,createdAt:ur.now()}),s(" Producto creado.")),b(!1),j(null),He(),e()}catch(Ne){console.error(Ne),s(" Error guardando producto.")}finally{n(!1)}},Pe=async()=>{var he;try{const re=new b2,oe=await b2.listVideoInputDevices(),Ve=(he=oe[oe.length-1])==null?void 0:he.deviceId;if(!Ve)return null;const de=document.createElement("div");de.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Se=document.createElement("div");Se.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const dt=document.createElement("div");dt.className="p-3 flex items-center justify-between border-b",dt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const xt=document.createElement("button");xt.textContent="Cerrar",xt.className="px-3 py-1 rounded bg-gray-200";const ht=document.createElement("div");ht.className="p-3";const bt=document.createElement("video");return bt.style.width="100%",bt.style.borderRadius="12px",ht.appendChild(bt),dt.appendChild(xt),Se.appendChild(dt),Se.appendChild(ht),de.appendChild(Se),document.body.appendChild(de),await new Promise(async et=>{const Ne=()=>{de.remove(),et(null)};xt.onclick=Ne;const mt=await re.decodeFromVideoDevice(Ve,bt,W=>{if(W){const Ie=W.getText();try{mt.stop()}catch{}de.remove(),et(Ie)}})})}catch(re){return console.error(re),null}},ct=async()=>{const he=await Pe();he&&H(he)},lt=async()=>{const he=await Pe();if(!he)return;const re=o.find(oe=>String(oe.code||"")===String(he));re?(E(re),_(!0),s("")):(E(null),_(!0),s(""))},be=(he,re)=>{const oe=he.map(Se=>({Id:Se.id,Categoria:Se.category,brand:Se.brand,Producto:Se.name,PrecioProveedor:Se.providerPrice,Cantidad:Se.quantity,Facturado:Se.facturado,TotalEsperado:Se.totalEsperado||Se.salePrice*Se.quantity,Margen:Se.margin,PrecioVenta:Se.salePrice,Ganancia:Se.gain,Genero:Se.gender,TipoProducto:Se.typeProduct,Codigo:Se.code||""})),Ve=Us.json_to_sheet(oe),de=Us.book_new();Us.book_append_sheet(de,Ve,"Productos"),tF(de,re)},ue=()=>{const he=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],re=Us.json_to_sheet(he),oe=Us.book_new();Us.book_append_sheet(oe,re,"Productos");const Ve=i4(oe,{type:"array",bookType:"xlsx"}),de=new Blob([Ve],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Se=URL.createObjectURL(de),dt=document.createElement("a");dt.href=Se,dt.download="template_products_stationery.xlsx",document.body.appendChild(dt),dt.click(),dt.remove(),URL.revokeObjectURL(Se)},Le=he=>{const re=[],oe=[];he.forEach((de,Se)=>{if(!de||typeof de!="object"||Qst(de))return;const dt=Se+2,xt=String(kd(de,["Id","ID","docId","DocId"])??"").trim(),ht=String(kd(de,["Categoria","Categora","Category","category"])??"").trim(),bt=String(kd(de,["Brand","Marca","brand","marca"])??"").trim(),et=String(kd(de,["Producto","Product","Nombre","Name","name"])??"").trim(),Ne=kd(de,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),mt=kd(de,["Cantidad","Qty","quantity","cantidad"]),W=kd(de,["Margen","Margin","margen","margin"]),Ie=kd(de,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Je=String(kd(de,["Genero","Gnero","Gender","gender"])??"NA").trim(),tt=String(kd(de,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),ft=kd(de,["Codigo","Cdigo","Code","Barcode","code"]),T=vB(ft),M=Math.max(0,Yl(Ne,0)),V=Math.max(1,mE(mt,1)),q=kue(Yl(W,0)),ee=Math.max(0,Yl(Ie,0));ht||oe.push(`Fila ${dt}: falta Categoria.`),et||oe.push(`Fila ${dt}: falta Producto.`),M<=0&&oe.push(`Fila ${dt}: PrecioProveedor debe ser > 0.`),V<=0&&oe.push(`Fila ${dt}: Cantidad debe ser > 0.`),q<=0&&ee<=0&&oe.push(`Fila ${dt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Oe=xB.includes(Je||"NA")?Je:"NA";ht&&et&&M>0&&V>0&&(q>0||ee>0)&&re.push({id:xt||void 0,category:ht,brand:bt,name:et,providerPrice:M,quantity:V,margin:q>0?q:.7,salePrice:ee>0?ee:void 0,gender:Oe,typeProduct:tt,code:T||"",_raw:de})});const Ve=new Map;for(const de of re){const Se=de.id?`id::${de.id}`:`${Xi(de.category)}::${Xi(de.name)}`;Ve.set(Se,de)}return{rows:Array.from(Ve.values()),errors:oe}},ke=async he=>{if(s(""),ce([]),te([]),Ue((he==null?void 0:he.name)||""),!he)return;const re=he.name.toLowerCase(),oe=re.endsWith(".xlsx")||re.endsWith(".xls"),Ve=re.endsWith(".csv");if(!oe&&!Ve){ce(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Re(!0);const de=new FileReader,Se=await new Promise((mt,W)=>{de.onerror=()=>W(new Error("No se pudo leer el archivo.")),de.onload=()=>mt(de.result),de.readAsArrayBuffer(he)}),dt=O2(new Uint8Array(Se),{type:"array"}),xt=dt.SheetNames[0],ht=dt.Sheets[xt],bt=Us.sheet_to_json(ht,{defval:""}),{rows:et,errors:Ne}=Le(bt);te(et),ce(Ne),et.length===0&&Ne.length===0&&ce(["No se encontraron filas vlidas para importar."])}catch(de){console.error(de),ce(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Re(!1)}},Ae=(he,re)=>{te(oe=>{const Ve=[...oe],de=Ve[he];return de?(Ve[he]={...de,...re},Ve):oe})},Ye=v.useMemo(()=>{const he=new Set(o.map(de=>de.id)),re=new Set(o.map(de=>`${Xi(de.category)}::${Xi(de.name)}`));let oe=0,Ve=0;for(const de of ie){if(de.id&&he.has(de.id)){oe+=1;continue}const Se=`${Xi(de.category)}::${Xi(de.name)}`;re.has(Se)?oe+=1:Ve+=1}return{total:ie.length,willCreate:Ve,willUpdate:oe}},[ie,o]),yt=async()=>{if(s(""),Ee.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{Re(!0);const he={},re={};o.forEach(Se=>{he[Se.id]=Se,re[`${Xi(Se.category)}::${Xi(Se.name)}`]=Se});const oe=zd(Te);let Ve=0,de=0;for(const Se of ie){const dt=String(Se.category||"").trim(),xt=String(Se.name||"").trim(),{providerPrice:ht,quantity:bt,margin:et,salePrice:Ne,facturado:mt,totalEsperado:W,gain:Ie}=hx({providerPrice:Se.providerPrice,quantity:Se.quantity,margin:Se.margin,salePrice:Se.salePrice});if(!dt||!xt||ht<=0||bt<=0||Ne<=0||et<=0)continue;const Je={category:dt,name:xt,providerPrice:ht,quantity:bt,facturado:mt,totalEsperado:W,margin:et,salePrice:Ne,gain:Ie,gender:Se.gender||"NA",typeProduct:String(Se.typeProduct||"").trim(),code:vB(Se.code)||null,updatedAt:ur.now()};let tt;if(Se.id&&he[Se.id])tt=he[Se.id];else{const ft=`${Xi(dt)}::${Xi(xt)}`;tt=re[ft]}if(tt)oe.update(Wt(Te,"products_stationery",tt.id),Je),de+=1;else{const ft=Wt(Ct(Te,"products_stationery"));oe.set(ft,{...Je,createdAt:ur.now()}),Ve+=1}}await oe.commit(),s(` Importacin lista. Creados: ${Ve}, Actualizados: ${de}`),ge(!1),te([]),ce([]),Ue(""),e()}catch(he){console.error(he),s(" Error importando productos a Firestore.")}finally{Re(!1)}},At=()=>{f(""),h(""),p(""),x("")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:lt,type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:gt,type:"button",children:"+ Nuevo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ge(!0),te([]),ce([]),Ue("")},type:"button",children:"Importar (.xlsx)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>be(o,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>be(We,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),i.jsx(dc,{onClick:e,loading:r||we})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[i.jsx(E_,{label:"Productos",value:_t.count}),i.jsx(E_,{label:"Facturado",value:Cl(_t.sumFact)}),i.jsx(E_,{label:"Esperado",value:Cl(_t.sumEsperado)}),i.jsx(E_,{label:"Ganancia",value:Cl(_t.sumGain)})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${pt?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(he=>!he),children:[c?"Cerrar filtros":"Abrir filtros"," ",pt?"(activos)":""]}),c&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:he=>f(he.target.value),placeholder:"Ej: Cuaderno Norma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:A,onChange:he=>h(he.target.value),placeholder:"Barcode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:he=>p(he.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:he=>x(he.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:At,children:"Limpiar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("div",{children:["Mostrando: ",i.jsx("b",{children:We.length})]}),i.jsxs("div",{children:["Coleccin: ",i.jsx("b",{children:"products_stationery"})]})]})]})]}),i.jsx("div",{className:"md:hidden space-y-2",children:r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):We.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):We.map(he=>i.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:he.category}),i.jsx("div",{className:"text-base font-bold leading-tight",children:he.name}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Cl(he.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",i.jsx("b",{children:Cl(he.totalEsperado||he.salePrice*he.quantity)})]}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Cl(he.gain)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",i.jsx("b",{children:he.code||""})]}),i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ut(he),children:"Editar"})})]},he.id))}),i.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),i.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"Venta"}),i.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):We.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):We.map(he=>i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:he.category}),i.jsx("td",{className:"p-2 border",children:he.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Cl(he.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:he.quantity}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Cl(he.facturado)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Cl(he.totalEsperado||he.salePrice*he.quantity)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(he.margin||0).toFixed(2)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Cl(he.salePrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Cl(he.gain)}),i.jsx("td",{className:"p-2 border",children:he.gender}),i.jsx("td",{className:"p-2 border",children:he.typeProduct}),i.jsx("td",{className:"p-2 border",children:he.code||""}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ut(he),children:"Editar"})})]},he.id))})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),y&&i.jsxs(Tz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:F,onChange:he=>P(he.target.value),children:__.map(he=>i.jsx("option",{value:he,children:he},he))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:Z,onChange:he=>fe(he.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(me)?"":me,onChange:he=>pe(Math.max(0,Yl(he.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cantidad"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:ye,onChange:he=>ae(mE(he.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Cl(hx({providerPrice:me,quantity:ye,margin:je,salePrice:O}).facturado)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Margen"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(je)?"":je,onChange:he=>Be(Math.max(0,Yl(he.target.value,0)))}),i.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(hx({providerPrice:me,quantity:ye,margin:je,salePrice:O}).salePrice)?"":hx({providerPrice:me,quantity:ye,margin:je,salePrice:O}).salePrice,onChange:he=>{G(Math.max(0,Yl(he.target.value,0)))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Cl(hx({providerPrice:me,quantity:ye,margin:je,salePrice:O}).gain)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:z,onChange:he=>L(he.target.value),children:xB.map(he=>i.jsx("option",{value:he,children:he},he))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Y,onChange:he=>J(he.target.value),children:[i.jsx("option",{value:"",children:""}),Ust.map(he=>i.jsx("option",{value:he,children:he},he))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:R,onChange:he=>H(he.target.value),placeholder:"Escane o peg el cdigo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:ct,children:"Escanear"})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),i.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:vt,disabled:r,children:"Guardar"})]})]}),I&&i.jsx(Tz,{onClose:()=>_(!1),title:"Resultado de escaneo",children:S?i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:S.category}),i.jsx("div",{className:"text-lg font-bold",children:S.name}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Cl(S.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Cl(S.gain)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),i.jsx("div",{className:"font-semibold tabular-nums",children:Cl(S.providerPrice)})]}),i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.quantity})]}),i.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.code||""})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),ut(S)},children:"Editar"})})]}):i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"No encontrado"}),i.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",i.jsx("b",{children:"products_stationery"}),"."]})]})}),ne&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ue,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:he=>{var re;return ke(((re=he.target.files)==null?void 0:re[0])||null)}}),U&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:U})]}),we&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Ee.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Ee.slice(0,60).map((he,re)=>i.jsx("li",{children:he},re))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Ye.total," filas (Crear:"," ",Ye.willCreate," / Actualizar:"," ",Ye.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:yt,disabled:we||ie.length===0||Ee.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:ie.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((he,re)=>{const oe=he.id?o.some(Se=>Se.id===he.id):!1,Ve=o.some(Se=>`${Xi(Se.category)}::${Xi(Se.name)}`==`${Xi(he.category)}::${Xi(he.name)}`),de=oe||Ve;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.id||"",onChange:Se=>Ae(re,{id:Se.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:he.category,onChange:Se=>Ae(re,{category:Se.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:he.name,onChange:Se=>Ae(re,{name:Se.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:he.providerPrice,onChange:Se=>Ae(re,{providerPrice:Math.max(0,Yl(Se.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:he.quantity,onChange:Se=>Ae(re,{quantity:mE(Se.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:he.margin,onChange:Se=>Ae(re,{margin:Math.max(0,Yl(Se.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:he.salePrice??"",onChange:Se=>Ae(re,{salePrice:Math.max(0,Yl(Se.target.value,0))||void 0}),placeholder:"Opcional"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("select",{className:"w-28 border rounded px-2 py-1",value:he.gender,onChange:Se=>Ae(re,{gender:Se.target.value}),children:xB.map(Se=>i.jsx("option",{value:Se,children:Se},Se))})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.typeProduct,onChange:Se=>Ae(re,{typeProduct:Se.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.code||"",onChange:Se=>Ae(re,{code:Se.target.value})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${de?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:de?"ACTUALIZA":"CREA"})})]},`${he.id||""}-${re}`)})})]}),ie.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function E_({label:t,value:e}){return i.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Tz({title:t,children:e,onClose:r}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:t}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const Ru=t=>`C$ ${(Number(t)||0).toFixed(2)}`,s0=t=>Number(t||0).toFixed(3),yB=(t,e)=>{var a,s,o,l;const r=t._raw||{},n=t.customerName||r.customerName||((a=r.customer)==null?void 0:a.name)||r.clientName||((s=r.client)==null?void 0:s.name)||"";return t.type==="CONTADO"&&n?n:(t.customerId?e[t.customerId]:"")||t.customerName||r.customerName||((o=r.customer)==null?void 0:o.name)||r.clientName||((l=r.client)==null?void 0:l.name)||"Nombre cliente"},kz=t=>{const e=t._raw||{},r=Oue(e)||t.date,n=Kx(r);return isFinite(n)?n:NaN},bB=t=>String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"||t!=null&&t.closureId||t!=null&&t.closureDate||t!=null&&t.processedDate?"PROCESADA":"FLOTANTE",Hst=t=>String(t??"").toLowerCase().trim(),Fz=t=>["lb","lbs","libra","libras"].includes(Hst(t)),Oz=t=>Number((t==null?void 0:t.qty)??(t==null?void 0:t.quantity)??0)||0,$st=t=>t?Array.isArray(t.items)&&t.items.length>0?t.items.reduce((e,r)=>Fz((r==null?void 0:r.measurement)??(t==null?void 0:t.measurement))?e+Oz(r):e,0):Fz(t==null?void 0:t.measurement)?Oz(t):0:0;function Fue(t){if(!t)return"";if(t!=null&&t.toDate)return Cr(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=cS(e,a,new Date);if(f6(s))return Cr(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":Cr(n,"yyyy-MM-dd")}function Kx(t){const e=Fue(t);if(!e)return NaN;const r=cS(e,"yyyy-MM-dd",new Date);return f6(r)?r.getTime():NaN}function Oue(t){var n,a;const e=Fue(t==null?void 0:t.date),r=(n=t==null?void 0:t.createdAt)!=null&&n.toDate?t.createdAt.toDate():null;if(e&&r){const s=Kx(e),o=r.getTime();if(Math.abs(o-s)/(1e3*60*60*24)>30)return Cr(r,"yyyy-MM-dd")}return e||((a=t==null?void 0:t.timestamp)!=null&&a.toDate?Cr(t.timestamp.toDate(),"yyyy-MM-dd"):r?Cr(r,"yyyy-MM-dd"):"")}function Gst(t,e){var s,o,l,c;const r=Oue(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((u,d)=>u+(Number(d.qty??d.quantity??d.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||((s=t.customer)==null?void 0:s.id)||((o=t.customer)==null?void 0:o.customerId)||t.clientId||void 0,customerName:t.customerName||((l=t.customer)==null?void 0:l.name)||t.clientName||((c=t.client)==null?void 0:c.name)||void 0,_raw:t}}async function Kst(t){const e=rr(Ct(Te,"ar_movements"),or("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Bn(Wt(Te,"ar_movements",n.id))))}function qst({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=ln(n,"vendedor_pollo"),s=ln(n,"admin");if(!(ln(n,"admin")||ln(n,"vendedor_pollo")||ln(n,"supervisor_pollo")||ln(n,"contador")))return i.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const o=s?8:7,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,A]=v.useState(null),[h,m]=v.useState([]),p=async He=>{c(!0),d(!0),A(He),m([]);try{const gt=await js(Wt(Te,"salesV2",He)),ut=gt.exists()?gt.data():null;if(!ut){m([]);return}let vt=[];if(Array.isArray(ut.items)&&ut.items.length>0)vt=ut.items;else if(ut.items&&typeof ut.items=="object")try{vt=Object.values(ut.items)}catch{vt=[]}else ut.item?vt=[ut.item]:Array.isArray(ut.products)&&ut.products.length>0?vt=ut.products:Array.isArray(ut.lines)&&ut.lines.length>0?vt=ut.lines:Array.isArray(ut.detalles)&&ut.detalles.length>0?vt=ut.detalles:(ut.productName||ut.product)&&(vt=[{productName:ut.productName||ut.product||"",qty:ut.qty??ut.quantity??ut.lbs??0,unitPrice:ut.unitPrice??ut.price??0,discount:ut.discount??0,total:ut.total??ut.amount??0}]);const Pe=ke=>{if(ke==null)return NaN;if(typeof ke=="number")return ke;let Ae=String(ke).trim();if(!Ae)return NaN;if(Ae=Ae.replace(/[^0-9.,-]/g,""),!Ae)return NaN;Ae.indexOf(".")>-1&&Ae.indexOf(",")>-1?Ae=Ae.replace(/,/g,""):Ae.indexOf(",")>-1&&Ae.indexOf(".")===-1&&(Ae=Ae.replace(/,/g,"."));const Ye=Number(Ae);return isNaN(Ye)?NaN:Ye},ct=new Set;for(const ke of vt)if(Array.isArray(ke==null?void 0:ke.allocations))for(const Ae of ke.allocations){const Ye=String((Ae==null?void 0:Ae.batchId)||"").trim();Ye&&ct.add(Ye)}else if(ke!=null&&ke.allocations&&typeof ke.allocations=="object")try{for(const Ae of Object.values(ke.allocations)){const Ye=String((Ae==null?void 0:Ae.batchId)||"").trim();Ye&&ct.add(Ye)}}catch{}if(Array.isArray(ut==null?void 0:ut.allocations))for(const ke of ut.allocations){const Ae=String((ke==null?void 0:ke.batchId)||"").trim();Ae&&ct.add(Ae)}const lt={};ct.size>0&&await Promise.all(Array.from(ct).map(async ke=>{try{const Ae=await js(Wt(Te,"inventory_batches",ke));if(Ae.exists()){const Ye=Ae.data();lt[ke]=Number(Ye.salePrice??Ye.sale_price??Ye.price??0)}}catch{}}));const be=new Set;for(const ke of vt){const Ae=String(ke.productId||ke.productId||"").trim();Ae&&be.add(Ae)}const ue={};be.size>0&&await Promise.all(Array.from(be).map(async ke=>{try{const Ae=await js(Wt(Te,"products",ke));if(Ae.exists()){const Ye=Ae.data();ue[ke]=Number(Ye.salePrice??Ye.price??0)}}catch{}}));const Le=vt.map(ke=>{const Ae=String(ke.productName||ke.product||ke.name||"(sin nombre)"),Ye=Number(ke.qty??ke.quantity??ke.lbs??ke.weight??0)||0,yt=Pe(ke.total??ke.lineFinal??ke.amount??ke.monto??ke.line_total)||0;let At=0;const he=[ke.unitPrice,ke.unitPricePackage,ke.salePrice,ke.sale_price,ke.price,ke.unit_price,ke.pricePerUnit,ke.price_per_unit];for(const Ve of he){const de=Pe(Ve);if(!isNaN(de)&&de!==0){At=de;break}}if(!At){const Ve=(ut==null?void 0:ut.salePrice)??(ut==null?void 0:ut.sale_price)??(ut==null?void 0:ut.unitPrice)??(ut==null?void 0:ut.unit_price)??(ut==null?void 0:ut.price)??(ut==null?void 0:ut.pricePerUnit),de=Pe(Ve);!isNaN(de)&&de!==0&&(At=de)}if(!At){const Ve=Array.isArray(ke.allocations)?ke.allocations[0]:ke.allocations&&typeof ke.allocations=="object"?Object.values(ke.allocations)[0]:null,de=Ve?String(Ve.batchId||"").trim():"";de&&lt[de]&&(At=lt[de]||0)}!At&&ke.productId&&(At=ue[String(ke.productId)]||0),(!At||At===0)&&yt>0&&Ye>0&&(At=yt/Ye);const re=Pe(ke.discount??ke.desc??0)||0;let oe=yt;return(!oe||oe===0)&&(oe=Number(At*Ye||0)),oe=Number(oe)||0,{productName:Ae,qty:Ye,unitPrice:At,discount:re,total:oe}});m(Le)}catch(gt){console.error(gt)}finally{d(!1)}},[g,x]=v.useState(Cr(new Date,"yyyy-MM-01")),[y,b]=v.useState(Cr(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState([]),[F,P]=v.useState(!0),[k,D]=v.useState(""),{refreshKey:Z,refresh:fe}=fc(),[me,pe]=v.useState(""),[ye,ae]=v.useState(""),[je,Be]=v.useState("ALL"),[O,G]=v.useState(""),[z,L]=v.useState(null),Y=15,[J,R]=v.useState(1),H=v.useMemo(()=>{const He={};return w.forEach(gt=>He[gt.id]=gt.name),He},[w]);v.useEffect(()=>{je!=="ALL"&&!S.includes(je)&&Be("ALL")},[S,je]),v.useEffect(()=>{(async()=>{P(!0),D("");try{const He=[];if(a&&e){const Ae=rr(Ct(Te,"customers_pollo"),or("vendorId","==",e),gn("createdAt","desc"));(await Lt(Ae)).forEach(yt=>He.push({id:yt.id,name:yt.data().name||""}))}else(await Lt(rr(Ct(Te,"customers_pollo"),gn("createdAt","desc")))).forEach(Ye=>He.push({id:Ye.id,name:Ye.data().name||""}));j(He);const gt={};He.forEach(Ae=>{gt[Ae.id]=Ae.name});const[ut,vt,Pe]=await Promise.all([Lt(rr(Ct(Te,"salesV2"),gn("timestamp","desc"))),Lt(rr(Ct(Te,"daily_closures"),gn("createdAt","desc"))),Lt(rr(Ct(Te,"ar_movements_pollo"),or("date",">=",g),or("date","<=",y)))]),ct=new Map;Pe.forEach(Ae=>{var he;const Ye=Ae.data(),yt=String(((he=Ye==null?void 0:Ye.ref)==null?void 0:he.saleId)||"").trim(),At=String((Ye==null?void 0:Ye.customerId)||"").trim();yt&&At&&ct.set(yt,At)});const lt=new Map;vt.forEach(Ae=>{const Ye=Ae.data(),yt=Array.isArray(Ye==null?void 0:Ye.salesV2)?Ye.salesV2:[];for(const At of yt){const he=String((At==null?void 0:At.id)||"").trim();if(!he)continue;const re=he.split("#")[0];(String((At==null?void 0:At.status)||"").toUpperCase()==="PROCESADA"||At!=null&&At.closureDate||At!=null&&At.processedDate)&&lt.set(re,{closureDate:At==null?void 0:At.closureDate,processedDate:At==null?void 0:At.processedDate})}});const be=[];ut.forEach(Ae=>{const Ye=Ae.data(),yt=lt.get(Ae.id),At=ct.get(Ae.id);!Ye.customerId&&At&&(Ye.customerId=At),!Ye.customerName&&At&&(Ye.customerName=gt[At]||""),yt&&(Ye.status="PROCESADA",!Ye.closureDate&&yt.closureDate&&(Ye.closureDate=yt.closureDate),!Ye.processedDate&&yt.processedDate&&(Ye.processedDate=yt.processedDate));const he=Gst(Ye,Ae.id);he&&be.push(he)});const ue=be.sort((Ae,Ye)=>Ye.date.localeCompare(Ae.date));_(ue);const Le=Kx(g),ke=Kx(y);E(Array.from(new Set(ue.filter(Ae=>{const Ye=kz(Ae);return!(!isFinite(Ye)||isFinite(Le)&&Ye<Le||isFinite(ke)&&Ye>ke)}).map(Ae=>{var Ye,yt,At,he;return((Ye=Ae._raw)==null?void 0:Ye.productName)||((he=(At=(yt=Ae._raw)==null?void 0:yt.items)==null?void 0:At[0])==null?void 0:he.productName)||"(sin producto)"}))).sort()),R(1)}catch(He){console.error(He),D(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y,Z]);const ne=v.useMemo(()=>{const He=Kx(g),gt=Kx(y);return I.filter(ut=>{const vt=kz(ut);return!(!isFinite(vt)||isFinite(He)&&vt<He||isFinite(gt)&&vt>gt)})},[I,g,y]),ge=v.useMemo(()=>ne.filter(He=>{var gt,ut,vt,Pe;if(me&&He.customerId!==me||ye&&He.type!==ye)return!1;if(je&&je!=="ALL"){const ct=((gt=He._raw)==null?void 0:gt.productName)||((Pe=(vt=(ut=He._raw)==null?void 0:ut.items)==null?void 0:vt[0])==null?void 0:Pe.productName)||"";if(!ct||ct!==je)return!1}return!(O&&bB(He._raw)!==O)}),[ne,me,ye,je,O]),U=v.useMemo(()=>{let He=0,gt=0,ut=0,vt=0;for(const lt of ge){const be=$st(lt._raw);lt.type==="CONTADO"?(He+=be,ut+=lt.total):(gt+=be,vt+=lt.total)}const Pe=He+gt,ct=ut+vt;return{packsCash:He,packsCredito:gt,packsTotal:Pe,montoCash:ut,montoCredito:vt,montoTotal:ct}},[ge]),Ue=v.useMemo(()=>{let He=0,gt=0;for(const vt of ge)vt.type==="CONTADO"?He+=vt.quantity:gt+=vt.quantity;const ut=He+gt;return{unidadesCash:He,unidadesCredito:gt,unidadesTotal:ut}},[ge]),ie=Math.max(1,Math.ceil(ge.length/Y)),te=v.useMemo(()=>{const He=(J-1)*Y;return ge.slice(He,He+Y)},[ge,J]);v.useMemo(()=>f&&I.find(He=>He.id===f)||null,[f,I]);const Ee=async He=>{if(s&&(L(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{P(!0),await Are(He.id),await Kst(He.id),_(gt=>gt.filter(ut=>ut.id!==He.id)),D(" Venta eliminada")}catch(gt){console.error(gt),D(" No se pudo eliminar la venta.")}finally{P(!1)}},ce=()=>{const He=`Ventas del dia  ${g} a ${y}`,gt=ct=>(ct||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ut=ge.map(ct=>{var be,ue,Le,ke;const lt=yB(ct,H);return(be=ct._raw)!=null&&be.productName||(ke=(Le=(ue=ct._raw)==null?void 0:ue.items)==null?void 0:Le[0])!=null&&ke.productName,`<tr>
          <td>${ct.date}</td>
          <td>${gt(lt)}</td>
          <td>${ct.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ct.quantity}</td>
          <td style="text-align:right">${Ru(ct.total)}</td>
        </tr>`}).join(""),vt=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${gt(He)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${gt(He)}</h1>
      <div class="kpis">

      
        <div><b>Unidades Cash:</b> ${s0(Ue.unidadesCash)}</div>
        <div><b>Unidades Crdito:</b> ${s0(Ue.unidadesCredito)}</div>
        <div><b>Total Unidades:</b> ${s0(Ue.unidadesTotal)}</div>
      </div>

      <div class="kpis">
        <div><b>Libras Cash:</b> ${U.packsCash}</div>
        <div><b>Libras Crdito:</b> ${U.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${Ru(U.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${Ru(U.montoCredito)}</div>
      </div>

      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${ut||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Pe=window.open("","_blank");Pe&&(Pe.document.open(),Pe.document.write(vt),Pe.document.close())},we=()=>R(1),Re=()=>R(He=>Math.max(1,He-1)),We=()=>R(He=>Math.min(ie,He+1)),pt=()=>R(ie),_t=()=>{const He=[];if(ie<=7)for(let ut=1;ut<=ie;ut++)He.push(ut);else{const ut=Math.max(1,J-2),vt=Math.min(ie,J+2);He.push(1),ut>2&&He.push(-1);for(let Pe=ut;Pe<=vt;Pe++)Pe!==1&&Pe!==ie&&He.push(Pe);vt<ie-1&&He.push(-2),He.push(ie)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:we,disabled:J===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Re,disabled:J===1,children:" Anterior"}),He.map((ut,vt)=>typeof ut=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${ut===J?"bg-blue-600 text-white":""}`,onClick:()=>R(ut),children:ut},vt):i.jsx("span",{className:"px-2",children:""},vt)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:We,disabled:J===ie,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:pt,disabled:J===ie,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",J," de ",ie,"  ",ge.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:He=>{x(He.target.value),R(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:He=>{b(He.target.value),R(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:me,onChange:He=>{pe(He.target.value),R(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(He=>i.jsx("option",{value:He.id,children:He.name},He.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ye,onChange:He=>{ae(He.target.value),R(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:je,onChange:He=>{Be(He.target.value),R(1)},children:[i.jsx("option",{value:"ALL",children:"Todos"}),S.map(He=>i.jsx("option",{value:He,children:He},He))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:O,onChange:He=>{G(He.target.value),R(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"FLOTANTE",children:"FLOTANTE"}),i.jsx("option",{value:"PROCESADA",children:"PROCESADA"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:ce,children:"Exportar PDF"}),i.jsx("div",{className:"sm:col-span-2 lg:col-span-1 flex",children:i.jsx(dc,{onClick:fe,loading:F,className:"w-full justify-center"})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:s0(U.packsCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:s0(U.packsCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(U.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(U.montoCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),i.jsx("div",{className:"text-xl font-semibold",children:Ru(U.montoTotal)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):te.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):te.map(He=>{var Pe,ct,lt,be;const gt=yB(He,H),ut=((Pe=He._raw)==null?void 0:Pe.productName)||((be=(lt=(ct=He._raw)==null?void 0:ct.items)==null?void 0:lt[0])==null?void 0:be.productName)||"(sin producto)",vt=bB(He._raw);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:gt}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:He.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${vt==="PROCESADA"?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-700"}`,children:vt}),i.jsx("span",{className:`px-2 py-1 rounded-full border ${He.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:He.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Libras:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:ue=>{ue.preventDefault(),p(He.id)},title:"Ver detalle",children:s0(He.quantity)})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Ru(He.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:gt})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Producto"}),i.jsx("span",{className:"font-medium text-right",children:ut})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:He.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Estado"}),i.jsx("span",{className:"font-medium",children:vt})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:He.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Libras"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(He.id),title:"Ver detalle",children:s0(He.quantity)})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Ru(He.total)})]}),i.jsx("div",{className:"flex items-center justify-between",children:s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>L(ue=>ue===He.id?null:He.id),children:" Acciones"}),z===He.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Ee(He),children:"Eliminar"})]})})]})})]})},He.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:_t()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):te.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):te.map(He=>{var Pe,ct,lt,be;const gt=yB(He,H),ut=((Pe=He._raw)==null?void 0:Pe.productName)||((be=(lt=(ct=He._raw)==null?void 0:ct.items)==null?void 0:lt[0])==null?void 0:be.productName)||"(sin producto)",vt=bB(He._raw);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:He.date}),i.jsx("td",{className:"p-2 border",children:vt}),i.jsx("td",{className:"p-2 border",children:gt}),i.jsx("td",{className:"p-2 border",children:ut}),i.jsx("td",{className:"p-2 border",children:He.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(He.id),children:s0(He.quantity)})}),i.jsx("td",{className:"p-2 border",children:Ru(He.total)}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>L(ue=>ue===He.id?null:He.id),title:"Acciones",children:""}),z===He.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Ee(He),children:"Eliminar"})})]})]},He.id)})})]}),_t()]}),k&&i.jsx("p",{className:"mt-2 text-sm",children:k}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{children:i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Libras"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((He,gt)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:He.productName}),i.jsx("td",{className:"p-2 border text-right",children:He.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ru(He.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ru(He.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ru(He.total)})]},gt))})]})})]})})]})}function zst(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Wst(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState([]),[o,l]=v.useState(""),[c,u]=v.useState(!0),d=zst(),f=v.useMemo(()=>d?i.jsx(Pye,{role:r,roles:a}):i.jsx(jye,{role:r,roles:a}),[d,r,a]),A=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const m=ij(Wd,async p=>{if(u(!0),p){e(p);try{const g=Wt(Te,"users",p.uid),x=await js(g);if(x.exists()){const y=x.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const h=()=>{const m=a&&a.length?a:r;return ln(m,"admin")?i.jsx(xh,{to:"financialDashboard",replace:!0}):ln(m,"vendedor_pollo")?i.jsx(xh,{to:"salesV2",replace:!0}):ln(m,"supervisor_pollo")?i.jsx(xh,{to:"batches",replace:!0}):ln(m,"contador")?i.jsx(xh,{to:"batches",replace:!0}):ln(m,"vendedor_ropa")?i.jsx(xh,{to:"salesClothes",replace:!0}):ln(m,"vendedor_dulces")?i.jsx(xh,{to:"salesCandies",replace:!0}):i.jsx(xh,{to:"/",replace:!0})};return i.jsx(l0e,{children:i.jsxs(LAe,{children:[i.jsx(wn,{path:"/",element:i.jsx(_ye,{})}),i.jsxs(wn,{path:"/admin",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[i.jsx(wn,{index:!0,element:i.jsx(h,{})}),i.jsx(wn,{path:"bills",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(r4e,{role:r,roles:a})})}),i.jsx(wn,{path:"salesV2",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(kV,{user:t})})}),i.jsx(wn,{path:"financialDashboard",element:i.jsx(jn,{allowedRoles:["admin","contador","supervisor_pollo"],children:i.jsx(ePe,{})})}),i.jsx(wn,{path:"expenses",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(tPe,{})})}),i.jsx(wn,{path:"transactionsPollo",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(qst,{role:r,roles:a})})}),i.jsx(wn,{path:"batches",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(A4e,{role:r,roles:a})})}),i.jsx(wn,{path:"paidBatches",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(lPe,{})})}),i.jsx(wn,{path:"fix",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(aPe,{})})}),i.jsx(wn,{path:"transactionclose",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(m4e,{})})}),i.jsx(wn,{path:"billhistoric",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(n4e,{})})}),i.jsx(wn,{path:"users",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(a4e,{})})}),i.jsx(wn,{path:"products",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(s4e,{})})}),i.jsx(wn,{path:"customersPollo",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(LPe,{role:r,roles:a,currentUserEmail:A,sellerPolloId:o})})}),i.jsx(wn,{path:"datacenter",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(TQe,{})})}),i.jsx(wn,{path:"productsCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(O9e,{})})}),i.jsx(wn,{path:"mainordersCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(pQe,{})})}),i.jsx(wn,{path:"productsPricesCandies",element:i.jsx(jn,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:i.jsx(Lst,{})})}),i.jsx(wn,{path:"inventoryMainOrderCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(gQe,{})})}),i.jsx(wn,{path:"inventoryCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(V9e,{})})}),i.jsx(wn,{path:"billingsCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(EQe,{})})}),i.jsx(wn,{path:"cashDeliveries",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(Ost,{})})}),i.jsx(wn,{path:"customersCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(H9e,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"salesCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(W9e,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"expensesCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(X9e,{})})}),i.jsx(wn,{path:"dashboardCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(sQe,{})})}),i.jsx(wn,{path:"transactionCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"vendorsCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(iQe,{})})}),i.jsx(wn,{path:"productsVendorsCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(dQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"cierreVentasCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(vQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"reporteCierresCandies",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(IQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(wn,{path:"consolidatedVendors",element:i.jsx(jn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(CQe,{})})}),i.jsx(wn,{path:"salesClothes",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(IPe,{})})}),i.jsx(wn,{path:"notebooksInventory",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(Vst,{})})}),i.jsx(wn,{path:"TransactionsReportClothes",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(MPe,{})})}),i.jsx(wn,{path:"financialDashboardClothes",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(BPe,{})})}),i.jsx(wn,{path:"ExpensesClothes",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(TPe,{})})}),i.jsx(wn,{path:"inventoryClothesBatches",element:i.jsx(jn,{allowedRoles:["admin"],children:i.jsx(fPe,{})})}),i.jsx(wn,{path:"productsClothes",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(NPe,{})})}),i.jsx(wn,{path:"CustomersClothes",element:i.jsx(jn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(_Pe,{})})})]}),i.jsx(wn,{path:"/salesV2",element:i.jsx(jn,{allowedRoles:["admin","vendedor_pollo","contador"],children:i.jsx(kV,{user:t})})}),i.jsx(wn,{path:"*",element:i.jsx(xh,{to:"/"})})]})})}Cye.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{wB.createRoot(document.getElementById("root")).render(i.jsx(jo.StrictMode,{children:i.jsx(Wst,{})}))});export{Ba as _,Yst as c,dA as g};
